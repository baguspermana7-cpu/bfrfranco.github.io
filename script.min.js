function initDarkMode(){const t=document.getElementById("themeToggle"),e=window.matchMedia("(prefers-color-scheme: dark)");function n(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content","dark"===t?"#0a0a14":"#0066cc")}n(function(){const t=localStorage.getItem("theme");return t||(e.matches?"dark":"light")}()),t&&t.addEventListener("click",function(){n("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark"),this.style.transform="scale(0.95)",setTimeout(()=>{this.style.transform=""},150)}),e.addEventListener("change",function(t){localStorage.getItem("theme")||n(t.matches?"dark":"light")})}function initNavigation(){const t=document.querySelector(".hamburger"),e=document.querySelector(".nav-menu"),n=document.querySelectorAll(".nav-link"),o=document.querySelectorAll(".nav-dropdown");let i=0;function r(){t?.classList.remove("active"),e?.classList.remove("active"),o.forEach(t=>t.classList.remove("active")),document.body.classList.contains("menu-open")&&(document.body.classList.remove("menu-open"),document.body.style.top="",window.scrollTo(0,i)),t?.setAttribute("aria-expanded","false"),t?.setAttribute("aria-label","Open navigation menu")}t?.addEventListener("click",function(){t.classList.toggle("active"),e.classList.toggle("active");const n=e.classList.contains("active");n?(i=window.scrollY,document.body.classList.add("menu-open"),document.body.style.top=`-${i}px`):(document.body.classList.remove("menu-open"),document.body.style.top="",window.scrollTo(0,i)),t.setAttribute("aria-expanded",n),t.setAttribute("aria-label",n?"Close navigation menu":"Open navigation menu")}),o.forEach(t=>{const e=t.querySelector(".nav-link");e?.addEventListener("click",function(e){window.innerWidth<=768&&(e.preventDefault(),t.classList.toggle("active"))})}),n.forEach(t=>{t.addEventListener("click",function(t){(!(this.closest(".nav-dropdown")?.querySelector(".nav-link")===this)||window.innerWidth>768)&&r()})});document.querySelectorAll(".dropdown-menu a").forEach(t=>{t.addEventListener("click",function(){r()})}),document.addEventListener("click",function(n){t?.contains(n.target)||e?.contains(n.target)||r()}),updateActiveNavLink(),window.addEventListener("scroll",throttle(updateActiveNavLink,100))}function updateActiveNavLink(){const t=document.querySelectorAll("section[id]"),e=document.querySelectorAll(".nav-link");let n="";const o=window.scrollY+100;t.forEach(t=>{const e=t.offsetTop,i=t.offsetHeight;o>=e&&o<e+i&&(n=t.getAttribute("id"))}),e.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===`#${n}`&&t.classList.add("active")})}function initNavbarScroll(){const t=document.querySelector(".navbar");window.addEventListener("scroll",function(){window.scrollY>50?t?.classList.add("scrolled"):t?.classList.remove("scrolled")})}function initScrollAnimations(){const t=document.querySelectorAll(".fade-in"),e=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},{root:null,rootMargin:"0px",threshold:.1});t.forEach(t=>{e.observe(t)});const n=document.querySelectorAll(".hero .fade-in");setTimeout(()=>{n.forEach(t=>t.classList.add("visible"))},100)}function initMetricCounters(){const t=document.querySelectorAll(".metric-value"),e=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&(animateCounter(t.target),e.unobserve(t.target))})},{root:null,rootMargin:"0px",threshold:.5});t.forEach(t=>{e.observe(t)})}function animateCounter(t){const e=parseFloat(t.getAttribute("data-target")),n=t.getAttribute("data-prefix")||"",o=t.getAttribute("data-suffix")||"%";let i=0,r=0;const c=setInterval(()=>{let a;r++,i=easeOutQuad(r,0,e,60),a=e%1!=0?i.toFixed(1):Math.round(i),t.textContent=`${n}${a}${o}`,r>=60&&(clearInterval(c),t.textContent=e%1!=0?`${n}${e.toFixed(1)}${o}`:`${n}${e}${o}`)},2e3/60)}function easeOutQuad(t,e,n,o){return-n*(t/=o)*(t-2)+e}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href");if("#"===e)return;const n=document.querySelector(e);if(n){t.preventDefault();const e=document.querySelector(".navbar")?.offsetHeight||0,o=n.offsetTop-e;window.scrollTo({top:o,behavior:"smooth"})}})})}function initContactForm(){}function sendEmail(t){t.preventDefault();const e=document.getElementById("contactForm"),n=document.getElementById("name").value.trim(),o=document.getElementById("email").value.trim(),i=document.getElementById("message").value.trim();if(!n||!o||!i)return showNotification("Please fill in all fields.","error"),!1;if(!isValidEmail(o))return showNotification("Please enter a valid email address.","error"),!1;const r=encodeURIComponent(`Portfolio Contact from ${n}`),c=encodeURIComponent(`Name: ${n}\nEmail: ${o}\n\nMessage:\n${i}`);return window.location.href=`mailto:baguspermana7@gmail.com?subject=${r}&body=${c}`,showNotification("Opening your email app... Please click Send in your email client.","success"),setTimeout(()=>{e.reset()},1e3),!1}function isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function showNotification(t,e){const n=document.querySelector(".notification");n?.remove();const o=document.createElement("div");if(o.className=`notification notification-${e}`,o.innerHTML=`\n        <p>${t}</p>\n        <button class="notification-close">&times;</button>\n    `,Object.assign(o.style,{position:"fixed",bottom:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"10px",backgroundColor:"success"===e?"#10b981":"#ef4444",color:"#ffffff",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",gap:"1rem",zIndex:"9999",animation:"slideIn 0.3s ease",maxWidth:"90%",width:"400px"}),!document.querySelector("#notification-styles")){const t=document.createElement("style");t.id="notification-styles",t.textContent="\n            @keyframes slideIn {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n            @keyframes slideOut {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        ",document.head.appendChild(t)}document.body.appendChild(o);const i=o.querySelector(".notification-close");Object.assign(i.style,{background:"transparent",border:"none",color:"#ffffff",fontSize:"1.5rem",cursor:"pointer",padding:"0",lineHeight:"1"}),i.addEventListener("click",()=>{o.style.animation="slideOut 0.3s ease",setTimeout(()=>o.remove(),300)}),setTimeout(()=>{o.parentNode&&(o.style.animation="slideOut 0.3s ease",setTimeout(()=>o.remove(),300))},5e3)}function initParallax(){const t=document.querySelector(".hero-shape");window.addEventListener("scroll",function(){const e=window.scrollY;t&&(t.style.transform=`translateY(${.3*e}px)`)})}function initTypedEffect(){const t=document.querySelector(".hero-tagline");if(!t)return;const e=t.textContent;t.textContent="",t.style.opacity="1";let n=0;setTimeout(function o(){n<e.length&&(t.textContent+=e.charAt(n),n++,setTimeout(o,50))},1e3)}function debounce(t,e){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...o)},e)}}function throttle(t,e){let n;return function(...o){n||(t(...o),n=!0,setTimeout(()=>n=!1,e))}}function initScrollProgress(){const t=document.getElementById("scrollProgress");t&&window.addEventListener("scroll",throttle(function(){const e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;t.style.width=e+"%"},50))}function initCursorSpotlight(){const t=document.getElementById("cursorSpotlight");if(!t)return;if(!window.matchMedia("(pointer: fine)").matches)return;let e=0,n=0,o=0,i=0,r=!1,c=null;function a(){o+=.1*(e-o),i+=.1*(n-i),t.style.left=o+"px",t.style.top=i+"px",Math.abs(e-o)>.5||Math.abs(n-i)>.5?c=requestAnimationFrame(a):(c=null,r=!1)}document.addEventListener("mousemove",function(o){e=o.clientX,n=o.clientY,t.classList.add("active"),r||(r=!0,c||(c=requestAnimationFrame(a)))}),document.addEventListener("mouseleave",function(){t.classList.remove("active"),r=!1})}function initCardTilt(){document.querySelectorAll(".metric-card, .case-card").forEach(t=>{t.addEventListener("mousemove",function(e){const n=t.getBoundingClientRect(),o=e.clientX-n.left,i=e.clientY-n.top,r=n.width/2,c=(i-n.height/2)/20,a=(r-o)/20;t.style.transform=`\n                perspective(1000px)\n                rotateX(${c}deg)\n                rotateY(${a}deg)\n                translateY(-10px)\n                scale(1.02)\n            `}),t.addEventListener("mouseleave",function(){t.style.transform=""})})}document.addEventListener("DOMContentLoaded",function(){initDarkMode(),initNavigation(),initScrollAnimations(),initMetricCounters(),initSmoothScroll(),initContactForm(),initNavbarScroll(),initScrollProgress(),initCursorSpotlight(),initCardTilt()});