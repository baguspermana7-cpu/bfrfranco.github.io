<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GED7FX8RTV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GED7FX8RTV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <title>No Incident Is Not Evidence of Safety | ResistanceZero</title>
    <meta name="description" content="Safety as presence of positive capacity, not absence of incidents. Weak signal detection, HRO principles, and Safety-II in data centers.">
    <meta name="keywords" content="Safety Indicators, Lagging Indicators, Leading Indicators, Weak Signals, Data Center Safety, Drift to Failure, Normalization of Deviance, Proactive Safety Culture, Westrum Typology, Rasmussen, Safety Health Index, HRO, Near Miss Reporting">
    <meta name="author" content="Bagus Dwi Permana">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#8b5cf6">
    <link rel="canonical" href="https://resistancezero.com/article-8.html">

    <link rel="alternate" hreflang="en" href="https://resistancezero.com/article-8.html">

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://resistancezero.com/article-8.html">
    <meta property="og:title" content="Why 'No Incident' Is Not Evidence of Safety">
    <meta property="og:description" content="Lagging indicators create the illusion of stability. Learn to identify weak signals, implement leading indicators, and build proactive safety culture in critical data center operations.">
    <meta property="og:image" content="https://resistancezero.com/assets/article-8-cover.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Why No Incident Is Not Evidence of Safety - Data Center Safety Science">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Bagus Dwi Permana Portfolio">
    <meta property="article:author" content="Bagus Dwi Permana">
    <meta property="article:published_time" content="2025-12-28T00:00:00Z">
    <meta property="article:modified_time" content="2026-02-17T00:00:00Z">
    <meta property="article:section" content="Safety Management">
    <meta property="article:tag" content="Leading Indicators">
    <meta property="article:tag" content="Weak Signals">
    <meta property="article:tag" content="Safety Culture">
    <meta property="article:tag" content="Drift to Failure">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BagusDPermana">
    <meta name="twitter:creator" content="@BagusDPermana">
    <meta name="twitter:title" content="Why 'No Incident' Is Not Evidence of Safety">
    <meta name="twitter:description" content="Identify weak signals and leading indicators for true safety in data center operations. Includes Safety Health Index calculator.">
    <meta name="twitter:image" content="https://resistancezero.com/assets/article-8-cover.jpg">
    <meta name="twitter:image:alt" content="Safety Health and No-Incident Culture in Data Centers">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <link rel="apple-touch-icon" href="assets/Favicon.png">
    <link rel="stylesheet" href="styles.min.css?v=20260225">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preload" as="image" href="assets/article-8-cover.jpg">

    <!-- Structured Data - TechnicalArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechnicalArticle",
        "headline": "Why 'No Incident' Is Not Evidence of Safety",
        "description": "Comprehensive analysis of safety indicators in critical infrastructure. Explores drift-to-failure theory, weak signal taxonomy, leading indicators, and proactive safety culture.",
        "image": "https://resistancezero.com/assets/article-8-cover.jpg",
        "author": {
            "@type": "Person",
            "name": "Bagus Dwi Permana",
            "jobTitle": "Engineering Operations Manager",
            "url": "https://resistancezero.com/"
        },
        "datePublished": "2025-12-28",
        "dateModified": "2025-12-28",
        "publisher": {
            "@type": "Person",
            "name": "Bagus Dwi Permana"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://resistancezero.com/article-8.html"
        },
        "wordCount": "9500",
        "articleSection": "Safety Management",
        "keywords": ["Leading Indicators", "Weak Signals", "Safety Culture", "Drift to Failure", "Normalization of Deviance", "Westrum Typology", "HRO"]
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://resistancezero.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Articles",
                "item": "https://resistancezero.com/articles.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Why 'No Incident' Is Not Evidence of Safety"
            }
        ]
    }
    </script>

    <!-- Structured Data - FAQPage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Does zero incidents mean a data center is safe?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No. Zero incidents may indicate effective safety systems, or it may indicate failure to detect weak signals. Safety-II theory argues that safety is the presence of positive capacities, not merely the absence of negative events."
                }
            },
            {
                "@type": "Question",
                "name": "What are weak signals in data center safety?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Weak signals are early indicators of degrading safety margins — near-misses, workarounds, deferred maintenance, alarm trends, and informal operator adaptations that compensate for system deficiencies before failures occur."
                }
            },
            {
                "@type": "Question",
                "name": "What is Safety-II in data center operations?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Safety-II focuses on understanding why things go right, not just why they fail. It studies everyday operational success to strengthen the positive capacities that prevent incidents, rather than only reacting after failures."
                }
            }
        ]
    }
    </script>

    <style>
        :root {
            --primary-blue: #1e3a5f;
            --accent-purple: #8b5cf6;
            --accent-purple-light: #a78bfa;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-emerald: #10b981;
            --accent-red: #ef4444;
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* Hero Section */
        .article-hero {
            background: linear-gradient(135deg, #0b1220 0%, #2d1b69 50%, #4c1d95 100%);
            padding: 7rem 2rem 3.5rem;
            color: #fff;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(167, 139, 250, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .article-hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L32 15 L42 17 L32 19 L30 29 L28 19 L18 17 L28 15 Z' fill='%238b5cf6' fill-opacity='0.03'/%3E%3C/svg%3E");
            z-index: 0;
        }

        .article-hero > * { position: relative; z-index: 1; }
        .article-hero .container { max-width: 1000px; margin: 0 auto; }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .article-title {
            font-size: clamp(1.6rem, 3.2vw, 2.35rem);
            font-weight: 800;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            color: #fff;
            letter-spacing: -0.01em;
        }

        .article-subtitle {
            font-size: clamp(0.95rem, 1.6vw, 1.15rem);
            color: #94a3b8;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .article-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Table of Contents */
        .toc-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 3rem 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .toc-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .toc-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.625rem;
        }

        .toc-item {
            background: #fff;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-purple);
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .toc-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toc-item-number {
            font-size: 0.75rem;
            color: var(--accent-purple);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .toc-item-title {
            font-weight: 600;
            font-size: 0.88rem;
        }

        /* TOC Calculator Highlight */
        .toc-item.toc-calculator {
            background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
            border-left-color: #8b5cf6;
            border-left-width: 5px;
        }
        .toc-item.toc-calculator .toc-item-number { display: flex; align-items: center; gap: 6px; }
        .toc-item.toc-calculator .toc-calc-badge {
            font-size: 0.6rem; background: #8b5cf6; color: #fff; padding: 1px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px;
        }
        [data-theme="dark"] .toc-item.toc-calculator {
            background: linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(139,92,246,0.08) 100%);
        }

        /* Article Content */
        .article-content {
            padding: 4rem 2rem;
            background: #fff;
        }

        .article-content .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-purple);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .article-body h2 .section-number {
            background: var(--accent-purple);
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .article-body h3 {
            font-size: 1.1rem;
            color: #334155;
            margin: 1.5rem 0 0.5rem;
        }

        .article-body h4 {
            font-size: 0.9rem;
            color: #475569;
            margin: 1rem 0 0.5rem;
        }

        .article-body li {
            margin-bottom: 0.35rem;
            font-size: 0.9rem;
        }

        .article-body ul, .article-body ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        /* Tooltips */
        .tip {
            position: relative;
            border-bottom: 1px dashed var(--accent-purple);
            cursor: help;
            color: var(--accent-purple);
            font-weight: 500;
        }

        .tip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: #e2e8f0;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 400;
            white-space: nowrap;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            max-width: 300px;
            white-space: normal;
            line-height: 1.4;
        }

        .tip:hover::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 2px);
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1e293b;
            z-index: 100;
        }

        /* Source References */
        .src-ref {
            color: var(--accent-purple);
            font-size: 0.75em;
            vertical-align: super;
            font-weight: 600;
            text-decoration: none;
            padding: 0 2px;
            cursor: pointer;
        }

        .src-ref:hover {
            color: #7c3aed;
            text-decoration: underline;
        }

        /* Key Insight Boxes */
        .key-insight {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border-left: 4px solid var(--accent-purple);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .key-insight-title {
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .key-insight p {
            margin: 0;
            color: #4c1d95;
            font-size: 0.88rem;
        }

        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid var(--accent-cyan);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left-color: var(--accent-amber);
        }

        .info-box.critical {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left-color: var(--accent-red);
        }

        .info-box.success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: var(--accent-emerald);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Formula Box */
        .formula-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #c4b5fd;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .formula-box-title {
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 0.75rem;
            font-family: 'Inter', sans-serif;
        }

        .formula-box code {
            font-size: 0.82rem;
            line-height: 1.8;
            color: #4c1d95;
        }

        /* Data Tables */
        .data-table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table thead {
            background: linear-gradient(135deg, #2d1b69 0%, #4c1d95 100%);
            color: #fff;
        }

        .data-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            white-space: nowrap;
        }

        .data-table td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .comparison-card {
            background: #fff;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        /* Interactive Chart */
        .chart-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .chart-title {
            text-align: center;
            color: #fff;
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .chart-subtitle {
            text-align: center;
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 1.5rem;
        }

        .chart-wrapper {
            background: rgba(2, 6, 23, 0.5);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .control-label {
            color: #94a3b8;
            font-size: 0.85rem;
        }

        .control-slider {
            width: 200px;
            height: 8px;
            border-radius: 4px;
            background: rgba(148, 163, 184, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-purple);
            cursor: pointer;
        }

        .control-value {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.85rem;
            min-width: 50px;
            text-align: center;
        }

        .legend-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.8rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .callout-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .callout-card {
            background: rgba(30, 58, 95, 0.3);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(139, 92, 246, 0.15);
        }

        .callout-label {
            color: #94a3b8;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .callout-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent-purple);
        }

        /* Calculator Section */
        .calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            margin: 3rem 0;
            color: #fff;
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .calculator-subtitle {
            color: #94a3b8;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-label {
            font-size: 0.85rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .calc-input, .calc-select {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .calc-input:focus, .calc-select:focus {
            outline: none;
            border-color: var(--accent-purple);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        .calc-select option {
            background: #1e293b;
            color: #fff;
        }

        .calc-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .calc-result-item {
            text-align: center;
            padding: 1rem;
        }

        .calc-result-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent-purple-light);
        }

        .calc-result-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Dimension Bars */
        .dimension-bars {
            display: grid;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .dimension-bar-group {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .dimension-bar-label {
            font-size: 0.8rem;
            color: #94a3b8;
            min-width: 120px;
            text-align: right;
        }

        .dimension-bar-track {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            height: 10px;
            overflow: hidden;
        }

        .dimension-bar-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
            background: var(--accent-purple);
        }

        .dimension-bar-value {
            font-size: 0.8rem;
            color: #a78bfa;
            font-weight: 700;
            min-width: 40px;
        }

        /* Gauge */
        .gauge-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        /* Paradox Warning */
        .paradox-warning {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(245, 158, 11, 0.15) 100%);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            display: none;
        }

        .paradox-warning.visible {
            display: block;
        }

        .paradox-warning-title {
            color: #ef4444;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .paradox-warning p {
            color: #fca5a5;
            font-size: 0.85rem;
            margin: 0;
        }

        /* Culture Badge */
        .culture-badge {
            display: inline-flex;
            padding: 0.5rem 1.25rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .culture-badge.generative { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .culture-badge.bureaucratic { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
        .culture-badge.pathological { background: rgba(239, 68, 68, 0.2); color: #f87171; }

        /* Trajectory Arrow */
        .trajectory-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 0.5rem;
        }

        .trajectory-arrow {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .trajectory-arrow.improving { color: #10b981; }
        .trajectory-arrow.stagnant { color: #f59e0b; }
        .trajectory-arrow.deteriorating { color: #ef4444; }

        /* Conclusion Box */
        .conclusion-box {
            background: linear-gradient(135deg, #faf5ff 0%, #ede9fe 100%);
            border: 2px solid #c4b5fd;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .conclusion-box h3 {
            color: #7c3aed;
            margin-top: 0;
        }

        /* References */
        .references-section {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 16px;
            margin-top: 3rem;
        }

        .references-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
        }

        ol.ref-list {
            list-style: none;
            padding: 0;
            margin: 0;
            counter-reset: ref-counter;
        }

        ol.ref-list li {
            counter-increment: ref-counter;
            display: flex;
            gap: 0.75rem;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
            line-height: 1.6;
            color: #475569;
        }

        ol.ref-list li::before {
            content: "[" counter(ref-counter) "]";
            color: var(--accent-purple);
            font-weight: 700;
            flex-shrink: 0;
            min-width: 28px;
        }

        /* Article Nav */
        .article-nav {
            display: flex;
            justify-content: space-between;
            padding: 2rem 0;
            border-top: 1px solid #e2e8f0;
            margin-top: 3rem;
        }
        .article-nav a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-blue);
            font-weight: 600;
            transition: color 0.3s ease;
            text-decoration: none;
        }
        [data-theme="dark"] .article-nav a { color: #93c5fd; }
        .article-nav a:hover { color: #60a5fa; }

        /* Print CSS */
        @media print {
            .navbar, .share-buttons, .toc-section, .calculator-section, .chart-container, .article-nav { display: none !important; }
            .article-hero { padding: 2rem; background: #4c1d95 !important; }
            .article-content { padding: 1rem; }
            .article-body { font-size: 10pt; }
        }

        /* === PRO ENHANCEMENT MODE === */
        .shi-evidence-block {
            margin: 2rem auto; max-width: 900px; padding: 2rem;
            background: linear-gradient(135deg, rgba(139,92,246,0.08) 0%, rgba(167,139,250,0.04) 100%);
            border: 1px solid rgba(139,92,246,0.25); border-radius: 16px;
        }
        .shi-evidence-grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; margin-bottom: 1rem;
        }
        .shi-evidence-card {
            text-align: center; padding: 1rem 0.5rem;
            background: rgba(139,92,246,0.06); border-radius: 10px;
        }
        .shi-evidence-value {
            font-size: 1.5rem; font-weight: 800; color: #a78bfa;
            font-family: 'JetBrains Mono', monospace;
        }
        .shi-evidence-label { font-size: 0.78rem; color: #94a3b8; margin-top: 0.25rem; }
        .shi-evidence-sub { font-size: 0.68rem; color: #64748b; margin-top: 0.15rem; }
        .shi-evidence-source {
            text-align: center; font-size: 0.72rem; color: #64748b;
            border-top: 1px solid rgba(139,92,246,0.15); padding-top: 0.75rem; margin-top: 0.5rem;
        }
        .shi-cta-block {
            margin: 2rem 0; padding: 2rem; text-align: center;
            background: linear-gradient(135deg, rgba(139,92,246,0.12), rgba(167,139,250,0.06));
            border: 1px solid rgba(139,92,246,0.3); border-radius: 16px;
        }
        .shi-cta-headline {
            font-size: 1.4rem; font-weight: 800; color: #e2e8f0; margin-bottom: 0.5rem;
        }
        .shi-cta-subtitle { font-size: 0.92rem; color: #94a3b8; margin-bottom: 1.25rem; }
        .shi-cta-btn {
            display: inline-block; padding: 0.75rem 2rem; font-weight: 700; font-size: 0.9rem;
            color: #fff; background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            border-radius: 10px; text-decoration: none; transition: transform 0.2s, box-shadow 0.2s;
        }
        .shi-cta-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(139,92,246,0.4); }
        .shi-toolbar {
            display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;
            margin-bottom: 1.5rem; padding: 0.75rem 1rem;
            background: rgba(139,92,246,0.08); border: 1px solid rgba(139,92,246,0.2);
            border-radius: 10px;
        }
        .shi-toolbar-btn {
            padding: 0.5rem 1rem; font-size: 0.82rem; font-weight: 600; border: none;
            border-radius: 8px; cursor: pointer; transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }
        .shi-btn-free { background: rgba(139,92,246,0.15); color: #a78bfa; }
        .shi-btn-free.active { background: #8b5cf6; color: #fff; }
        .shi-btn-pro { background: rgba(139,92,246,0.15); color: #a78bfa; }
        .shi-btn-pro.active { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: #fff; }
        .shi-btn-reset { background: rgba(148,163,184,0.15); color: #94a3b8; margin-left: auto; }
        .shi-btn-reset:hover { background: rgba(148,163,184,0.25); }
        .shi-btn-pdf { background: rgba(139,92,246,0.15); color: #a78bfa; }
        .shi-btn-pdf:hover { background: rgba(139,92,246,0.3); }
        .shi-pro-container { display: none; margin-top: 2rem; }
        .shi-pro-container.visible { display: block; }
        .shi-pro-panel {
            margin-bottom: 1.5rem; padding: 1.5rem;
            background: rgba(139,92,246,0.06); border: 1px solid rgba(139,92,246,0.2);
            border-radius: 14px; position: relative; overflow: hidden;
        }
        .shi-pro-panel.gated .shi-panel-content { filter: blur(6px); pointer-events: none; user-select: none; }
        .shi-gate-overlay {
            position: absolute; inset: 0; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 10; cursor: pointer;
            background: rgba(15,23,42,0.7); backdrop-filter: blur(4px);
        }
        .shi-gate-overlay i { font-size: 2rem; color: #a78bfa; margin-bottom: 0.5rem; }
        .shi-gate-overlay span { color: #cbd5e1; font-size: 0.85rem; font-weight: 600; }
        .shi-panel-title {
            font-size: 0.95rem; font-weight: 700; color: #a78bfa; margin-bottom: 0.75rem;
            display: flex; align-items: center; gap: 0.5rem;
        }
        .shi-kpi-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; }
        .shi-kpi-card {
            padding: 0.75rem; background: rgba(139,92,246,0.08); border-radius: 10px;
            text-align: center;
        }
        .shi-kpi-value {
            font-size: 1.4rem; font-weight: 800; color: #a78bfa;
            font-family: 'JetBrains Mono', monospace;
        }
        .shi-kpi-label { font-size: 0.72rem; color: #94a3b8; margin-top: 0.2rem; }
        .shi-chart-container { margin-top: 1rem; }
        .shi-chart-container canvas { width: 100%; max-height: 280px; }
        .shi-narrative-box {
            margin-top: 1rem; padding: 1rem; font-size: 0.85rem; line-height: 1.6;
            color: #cbd5e1; background: rgba(139,92,246,0.05);
            border-left: 3px solid #8b5cf6; border-radius: 0 8px 8px 0;
        }
        .shi-sensitivity-bar {
            display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;
        }
        .shi-sensitivity-label { min-width: 110px; font-size: 0.78rem; color: #94a3b8; }
        .shi-sensitivity-track {
            flex: 1; height: 20px; background: rgba(255,255,255,0.05);
            border-radius: 4px; position: relative; overflow: hidden;
        }
        .shi-sensitivity-fill {
            height: 100%; border-radius: 4px; transition: width 0.3s;
        }
        .shi-sensitivity-value {
            min-width: 40px; text-align: right; font-size: 0.78rem;
            color: #a78bfa; font-family: 'JetBrains Mono', monospace;
        }
        .shi-login-overlay {
            display: none; position: fixed; inset: 0; z-index: 9999;
            background: rgba(0,0,0,0.75); backdrop-filter: blur(8px);
            align-items: center; justify-content: center;
        }
        .shi-login-overlay.visible { display: flex; }
        .shi-login-box {
            background: #0f172a; border: 1px solid rgba(139,92,246,0.3);
            border-radius: 16px; padding: 2rem; width: 90%; max-width: 400px;
            position: relative;
        }
        .shi-login-close {
            position: absolute; top: 1rem; right: 1rem; background: none; border: none;
            color: #94a3b8; font-size: 1.5rem; cursor: pointer;
        }
        .shi-login-title { font-size: 1.2rem; font-weight: 700; color: #e2e8f0; margin-bottom: 0.25rem; }
        .shi-login-subtitle { font-size: 0.85rem; color: #94a3b8; margin-bottom: 1.5rem; }
        .shi-login-input {
            width: 100%; padding: 0.75rem 1rem; margin-bottom: 0.75rem;
            background: #1e293b; border: 1px solid #334155;
            border-radius: 8px; color: #e2e8f0; font-size: 0.9rem;
            font-family: 'Inter', sans-serif; box-sizing: border-box;
        }
        .shi-login-input:focus { outline: none; border-color: #8b5cf6; }
        .shi-login-error { color: #f87171; font-size: 0.8rem; margin-bottom: 0.75rem; display: none; }
        .shi-login-submit {
            width: 100%; padding: 0.75rem; font-weight: 700; font-size: 0.9rem;
            color: #fff; background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: none; border-radius: 8px; cursor: pointer;
            font-family: 'Inter', sans-serif; transition: opacity 0.2s;
        }
        .shi-login-submit:hover { opacity: 0.9; }
        .shi-login-demo {
            text-align: center; margin-top: 1rem; font-size: 0.75rem; color: #64748b;
        }
        [data-theme="light"] .shi-login-box { background: #ffffff; border-color: #e2e8f0; }
        [data-theme="light"] .shi-login-title { color: #1e293b; }
        [data-theme="light"] .shi-login-subtitle { color: #64748b; }
        [data-theme="light"] .shi-login-input { background: #f1f5f9; border-color: #e2e8f0; color: #1e293b; }
        .shi-privacy-badge {
            display: flex; align-items: center; justify-content: center; gap: 0.5rem;
            margin-top: 1.5rem; font-size: 0.75rem; color: #64748b;
        }
        .shi-privacy-badge i { color: #8b5cf6; }
        .shi-benchmark-meta {
            display: none;
        }
        .tooltip-trigger {
            display: inline-flex; align-items: center; justify-content: center;
            width: 16px; height: 16px; border-radius: 50%; font-size: 0.65rem;
            font-weight: 700; color: #a78bfa; background: rgba(139,92,246,0.15);
            cursor: help; margin-left: 0.35rem; position: relative; vertical-align: middle;
        }
        .tooltip-content {
            display: none; position: fixed; z-index: 9998;
            width: 260px; padding: 0.85rem; background: #1e293b;
            border: 1px solid rgba(139,92,246,0.3); border-radius: 10px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }
        .tooltip-content.visible { display: block; }
        .tooltip-title { font-size: 0.82rem; font-weight: 700; color: #a78bfa; margin-bottom: 0.35rem; }
        .tooltip-desc { font-size: 0.78rem; color: #cbd5e1; line-height: 1.5; margin-bottom: 0.35rem; }
        .tooltip-formula {
            font-size: 0.72rem; color: #8b5cf6; font-family: 'JetBrains Mono', monospace;
            background: rgba(139,92,246,0.08); padding: 0.35rem 0.5rem; border-radius: 6px;
        }
        [data-theme="dark"] .shi-evidence-block { background: linear-gradient(135deg, rgba(139,92,246,0.12) 0%, rgba(167,139,250,0.06) 100%); }
        [data-theme="dark"] .shi-gate-overlay { background: rgba(15,23,42,0.8); }

        /* ═══ DARK MODE ENHANCEMENTS ═══ */
        [data-theme="dark"] .article-content { background: #0f172a; }
        [data-theme="dark"] .article-body { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body h2 { color: #93c5fd; }
        [data-theme="dark"] .article-body h3 { color: #cbd5e1; }
        [data-theme="dark"] .article-body p { color: #cbd5e1; }
        [data-theme="dark"] .article-body blockquote { background: rgba(30,58,95,0.3); border-color: rgba(96,165,250,0.4); color: #cbd5e1; }
        [data-theme="dark"] .article-body .info-box,
        [data-theme="dark"] .article-body .key-insight { background: rgba(15,23,42,0.8); border-color: rgba(255,255,255,0.1); color: #cbd5e1; }
        [data-theme="dark"] .article-body table th { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body table td { color: #cbd5e1; border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .article-body ul li,
        [data-theme="dark"] .article-body ol li { color: #cbd5e1; }
        [data-theme="dark"] .article-body a { color: #60a5fa; }
        [data-theme="dark"] .article-body strong { color: #f1f5f9; }

        /* Responsive */
        @media (max-width: 900px) {
            .calc-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
            .dimension-bar-label { min-width: 90px; font-size: 0.75rem; }
        }

        @media (max-width: 600px) {
            .article-hero { padding: 6rem 1rem 3rem; }
            .article-content { padding: 2rem 1rem; }
            .toc-grid { grid-template-columns: 1fr; }
            .comparison-grid { grid-template-columns: 1fr; }
            .calc-grid { grid-template-columns: 1fr; }
            .article-meta { flex-direction: column; gap: 0.75rem; align-items: center; }
            .dimension-bar-group { flex-direction: column; align-items: flex-start; gap: 0.25rem; }
            .dimension-bar-label { text-align: left; min-width: auto; }
            .shi-evidence-grid { grid-template-columns: repeat(2, 1fr); }
            .shi-kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .shi-toolbar { flex-wrap: wrap; }
        }
    
        /* Result Card Tooltip System */
        .res-tip {
            display: inline-flex; align-items: center; justify-content: center;
            width: 14px; height: 14px;
            background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.3);
            border-radius: 50%; font-size: 0.6rem; font-weight: 700;
            color: #fbbf24; margin-left: 4px; cursor: help;
            position: relative; flex-shrink: 0; vertical-align: middle;
            line-height: 1;
        }
        .res-tip:hover { background: rgba(245,158,11,0.3); transform: scale(1.15); }
        .res-tip .res-tip-body {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: calc(100% + 8px); left: 50%;
            transform: translateX(-50%);
            background: #1e293b; color: #e2e8f0;
            padding: 0.7rem 0.9rem; border-radius: 8px;
            font-size: 0.72rem; font-weight: 400; line-height: 1.5;
            width: 260px; z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(245,158,11,0.2);
            transition: opacity 0.2s ease; pointer-events: none;
            text-transform: none; letter-spacing: normal;
        }
        .res-tip:hover .res-tip-body { visibility: visible; opacity: 1; }
        .res-tip-body .rtt { font-weight: 700; color: #fbbf24; margin-bottom: 3px; font-size: 0.75rem; }
        .res-tip-body .rtd { color: #cbd5e1; }
        .res-tip-body .rtf {
            font-family: 'JetBrains Mono', monospace; font-size: 0.68rem;
            background: rgba(0,0,0,0.3); padding: 3px 7px; border-radius: 4px;
            color: #67e8f9; margin-top: 4px; display: block;
        }
</style>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0" defer></script>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Search Overlay & Modal -->
    <div class="search-overlay" id="searchOverlay"></div>
    <div class="search-modal" id="searchModal">
        <div class="search-input-wrap">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Search articles, calculators, tools..." autocomplete="off">
            <kbd class="search-kbd">ESC</kbd>
        </div>
        <div class="search-chips" id="searchChips">
            <button class="search-chip active" data-filter="all">All</button>
            <button class="search-chip" data-filter="articles">Articles</button>
            <button class="search-chip" data-filter="calculators">Calculators</button>
            <button class="search-chip" data-filter="tools">Tools</button>
        </div>
        <div class="search-results" id="searchResults">
            <div class="search-empty">Type to search across all content</div>
        </div>
        <div class="search-footer">
            <span><kbd class="search-kbd">&uarr;&darr;</kbd> Navigate</span>
            <span><kbd class="search-kbd">Enter</kbd> Open</span>
        </div>
    </div>
    <div class="search-preview" id="searchPreview"></div>

    <!-- TOC Sidebar (desktop, wide screens) -->
    <nav class="toc-sidebar" id="tocSidebar" aria-label="Table of Contents">
        <div class="toc-sidebar-label">On this page</div>
        <ul class="toc-sidebar-list" id="tocSidebarList"></ul>
    </nav>

    <!-- TOC Mobile Toggle -->
    <button class="toc-mobile-toggle" id="tocMobileToggle" aria-label="Table of contents">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
    </button>
    <div class="toc-mobile-backdrop" id="tocMobileBackdrop"></div>
    <div class="toc-mobile-drawer" id="tocMobileDrawer">
        <div class="toc-drawer-header">
            <span class="toc-drawer-title">Table of Contents</span>
            <button class="toc-drawer-close" id="tocDrawerClose" aria-label="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <ul class="toc-mobile-list" id="tocMobileList"></ul>
    </div>


    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana" class="nav-avatar">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-dropdown">
                    <a href="datacenter-solutions.html" class="nav-link">
                        DC Solutions
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="datacenter-solutions.html" style="color: #06b6d4; font-weight: 600;">DC Solutions Hub</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="datahallAI.html" style="color: #8b5cf6;">DC AI/HPC</a></li>
                        <li><a href="dc-conventional.html">DC Conventional</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="capex-calculator.html" style="color: #f59e0b;">CAPEX Calculator</a></li>
                        <li><a href="opex-calculator.html" style="color: #10b981;">OPEX Calculator</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="dcmoc/" style="color: #ef4444; font-weight: 600;">DC MOC</a></li>
                    </ul>
                </li>
                <li class="nav-dropdown">
                    <a href="articles.html" class="nav-link">
                        Insights
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="articles.html" style="color: #06b6d4; font-weight: 600;">Engineering Journal</a></li>
                        <li><a href="geopolitics.html" style="color: #ef4444;">Global Analysis</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="insights.html" style="color: #64748b; font-size: 0.85rem;">All Insights</a></li>
                    </ul>
                </li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
                        <button class="nav-search-btn" id="navSearchBtn" aria-label="Search" title="Search (Ctrl+K)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            <button class="hamburger" aria-label="Open navigation menu" aria-expanded="false">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero Section -->
    <section class="article-hero">
        <div class="container">
            <a href="articles.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem; text-decoration: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Back to Articles
            </a>
            <div class="article-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                Safety Science &mdash; Article #08
            </div>
            <h1 class="article-title">Why &ldquo;No Incident&rdquo; Is Not Evidence of Safety</h1>
            <p class="article-subtitle">Lagging indicators create the illusion of stability. This paper dissects drift-to-failure theory, weak signal taxonomy, leading indicator frameworks, and the paradox of incident-free periods in critical data center operations.</p>
            <div class="article-meta">
                <span class="article-meta-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                    22 min read
                </span>
                <span class="article-meta-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                    December 28, 2025
                </span>
                <span class="article-meta-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                    ~9,500 words
                </span>
                <span class="article-meta-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    Bagus Dwi Permana
                </span>
            </div>
        </div>
    </section>
    <!-- Series Navigation -->
    <div class="series-nav" style="margin-top: 1rem;">
        <div class="series-badge">
            <span class="series-badge-icon">08</span>
            Engineering Journal &mdash; Article 8 of 18
        </div>
        <span class="series-title"></span>
        <div class="series-links">
            <a href="article-7.html" class="series-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>Prev</a>
            <a href="article-9.html" class="series-link">Next<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></a>
        </div>
    </div>


    <!-- Evidence Block -->
    <section class="shi-evidence-block">
        <div class="shi-evidence-grid">
            <div class="shi-evidence-card">
                <div class="shi-evidence-value">70%</div>
                <div class="shi-evidence-label">Outages Had Detectable Precursors</div>
                <div class="shi-evidence-sub">Uptime Institute 2023</div>
            </div>
            <div class="shi-evidence-card">
                <div class="shi-evidence-value">3-6 mo</div>
                <div class="shi-evidence-label">Avg Signal Incubation Window</div>
                <div class="shi-evidence-sub">Before catastrophic failure</div>
            </div>
            <div class="shi-evidence-card">
                <div class="shi-evidence-value">8x</div>
                <div class="shi-evidence-label">Near-Miss Reporting Multiplier</div>
                <div class="shi-evidence-sub">Generative vs Pathological orgs</div>
            </div>
            <div class="shi-evidence-card">
                <div class="shi-evidence-value">45%</div>
                <div class="shi-evidence-label">Safety Events Underreported</div>
                <div class="shi-evidence-sub">HSE Research Report 367</div>
            </div>
            <div class="shi-evidence-card">
                <div class="shi-evidence-value">$2.5M</div>
                <div class="shi-evidence-label">Avg Cost per Major DC Outage</div>
                <div class="shi-evidence-sub">Uptime Institute 2024</div>
            </div>
        </div>
        <div class="shi-evidence-source">Sources: Uptime Institute Annual Outage Analysis 2023-2024, HSE Research Report 367, Westrum (2004), IAEA GSR Part 2</div>
    </section>

    <!-- Featured Image -->
    <figure style="margin: 2rem 0; text-align: center;">
        <img src="Article/Article_8/8.1.jpg" alt="Shift operations and 24/7 staffing models for continuous data center management" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
    </figure>

    <!-- Table of Contents -->
    <section class="toc-section">
        <div class="toc-container">
            <div class="toc-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                Table of Contents
            </div>
            <div class="toc-grid">
                <a href="#abstract" class="toc-item"><div class="toc-item-number">Section 01</div><div class="toc-item-title">Abstract</div></a>
                <a href="#dangerous-comfort" class="toc-item"><div class="toc-item-number">Section 02</div><div class="toc-item-title">The Dangerous Comfort of Zero</div></a>
                <a href="#lagging-vs-leading" class="toc-item"><div class="toc-item-number">Section 03</div><div class="toc-item-title">Lagging vs Leading Indicators</div></a>
                <a href="#drift-to-failure" class="toc-item"><div class="toc-item-number">Section 04</div><div class="toc-item-title">Drift-to-Failure Theory</div></a>
                <a href="#normalization" class="toc-item"><div class="toc-item-number">Section 05</div><div class="toc-item-title">Normalization of Deviance</div></a>
                <a href="#weak-signals" class="toc-item"><div class="toc-item-number">Section 06</div><div class="toc-item-title">Weak Signals Taxonomy</div></a>
                <a href="#case-context" class="toc-item"><div class="toc-item-number">Section 07</div><div class="toc-item-title">Case Context: Silent Drift</div></a>
                <a href="#interactive" class="toc-item toc-calculator"><div class="toc-item-number">Section 08 <span class="toc-calc-badge"><i class="fas fa-calculator" style="font-size:0.5rem;"></i> Interactive</span></div><div class="toc-item-title">Interactive Safety Health Chart</div></a>
                <a href="#detection-system" class="toc-item"><div class="toc-item-number">Section 09</div><div class="toc-item-title">Detection System Design</div></a>
                <a href="#effective-leading" class="toc-item"><div class="toc-item-number">Section 10</div><div class="toc-item-title">Effective Leading Indicators</div></a>
                <a href="#calculator" class="toc-item toc-calculator"><div class="toc-item-number">Section 11 <span class="toc-calc-badge"><i class="fas fa-calculator" style="font-size:0.5rem;"></i> Interactive</span></div><div class="toc-item-title">Safety Health Index Calculator</div></a>
                <a href="#proactive-culture" class="toc-item"><div class="toc-item-number">Section 12</div><div class="toc-item-title">Proactive Safety Culture</div></a>
                <a href="#conclusion" class="toc-item"><div class="toc-item-number">Section 13</div><div class="toc-item-title">Conclusion</div></a>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="article-content">
        <div class="container">
            <div class="article-body">

                <!-- Section 1: Abstract -->
                <h2 id="abstract"><span class="section-number">1</span> Abstract</h2>

                <p>In many data centers and critical infrastructure facilities, safety and reliability are inferred from the absence of incidents. Periods without outages, injuries, or near-misses are treated as proof that systems, processes, and human behaviors are sound. This assumption is deeply embedded in management dashboards, regulatory compliance reports, and organizational culture. Yet safety science has consistently demonstrated that this inference is fundamentally flawed.</p>

                <p>This paper examines the paradox of incident-free operations through the lens of established safety theory. We explore Jens Rasmussen's drift-to-failure model<a href="#ref1" class="src-ref">[1]</a>, Diane Vaughan's normalization of deviance<a href="#ref2" class="src-ref">[2]</a>, and Erik Hollnagel's Safety-I versus Safety-II paradigm<a href="#ref3" class="src-ref">[3]</a> to demonstrate why "no incident" periods often precede catastrophic failures rather than prevent them. The paper proposes a comprehensive weak signal taxonomy, a set of eight effective leading indicators with quantitative targets, and an interactive Safety Health Index calculator that reveals the hidden relationship between extended incident-free periods and accumulating systemic risk.</p>

                <div class="key-insight">
                    <div class="key-insight-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        Central Thesis
                    </div>
                    <p>The absence of incidents is not evidence of safety. It is evidence that boundaries have not yet been crossed. In complex socio-technical systems, extended incident-free periods without corresponding leading indicator health create a false sense of security that actively increases systemic risk through normalized drift, suppressed reporting, and eroded safety margins.</p>
                </div>

                <p>For operators of critical facilities&mdash;from data centers managing <span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> and <span class="tip" data-tip="Power Distribution Unit: Device that distributes electric power to rack-mounted equipment in data centers">PDU</span> systems to those overseeing <span class="tip" data-tip="Building Management System: Centralized system controlling and monitoring mechanical, electrical, fire, and security systems">BMS</span> and <span class="tip" data-tip="Heating, Ventilation, and Air Conditioning: Climate control systems maintaining proper temperature and humidity in data centers">HVAC</span> infrastructure&mdash;the implications are profound. A green dashboard does not mean the system is safe. It means the system has not yet failed. These are fundamentally different propositions, and confusing them is the first step toward catastrophe.</p>

                <p>This analysis draws from 16 foundational references spanning safety science, reliability engineering, high-reliability organization (<span class="tip" data-tip="High Reliability Organization: Organizations that operate in hazardous conditions with fewer than expected accidents through mindful practices">HRO</span>) theory, and international standards from <span class="tip" data-tip="International Atomic Energy Agency: The world's central intergovernmental forum for scientific and technical cooperation in the nuclear field">IAEA</span> and <span class="tip" data-tip="International Civil Aviation Organization: UN specialized agency managing the administration and governance of international civil aviation">ICAO</span>. The paper concludes with actionable frameworks for transitioning from lagging-indicator complacency to leading-indicator vigilance.</p>

                <!-- CTA Block -->
                <div class="shi-cta-block">
                    <div class="shi-cta-headline">Calculate Your Facility's Safety Health Index</div>
                    <div class="shi-cta-subtitle">Quantify the gap between perceived safety and systemic drift risk with 8 leading indicators</div>
                    <a href="#calculator" class="shi-cta-btn">Open Safety Calculator</a>
                </div>

                <!-- Section 2: The Dangerous Comfort of Zero -->
                <h2 id="dangerous-comfort"><span class="section-number">2</span> The Dangerous Comfort of Zero</h2>

                <p>In critical infrastructure, "zero incidents" is often celebrated as the ultimate achievement. Dashboards glow green. <span class="tip" data-tip="Key Performance Indicator: Measurable value demonstrating how effectively an organization is achieving key business objectives">KPI</span> targets are met. Confidence cascades upward through management layers. Teams receive commendations. Budgets are maintained&mdash;or reduced, because after all, if nothing is breaking, perhaps less investment is needed. This is the dangerous comfort of zero.</p>

                <p>The logic appears sound on the surface: if the goal of safety management is to prevent incidents, then the absence of incidents must indicate successful safety management. But this reasoning commits what philosophers call the fallacy of <em>absence of evidence as evidence of absence</em>. The fact that we have not observed a failure does not mean the conditions for failure are not present. It means only that the conditions have not yet been sufficient to produce an observable outcome.</p>

                <h3>2.1 The Statistics of Silence</h3>

                <p>Consider a data center operating for 365 days without a power-related incident. Management interprets this as confirmation that the electrical infrastructure&mdash;<span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> systems, <span class="tip" data-tip="Automatic Transfer Switch: Electrical device that switches a load between two sources, typically utility and generator power">ATS</span> units, generator sets, distribution panels&mdash;is performing well. But during those 365 days, several conditions may have developed silently:</p>

                <ul>
                    <li><strong>Battery degradation:</strong> <span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> battery strings may have lost capacity below manufacturer specifications, but because no utility outage occurred, the degradation went untested by real-world demand</li>
                    <li><strong>Thermal drift:</strong> <span class="tip" data-tip="Heating, Ventilation, and Air Conditioning: Climate control systems maintaining proper temperature and humidity in data centers">HVAC</span> performance may have degraded gradually, with hot spots developing that remained within alarm thresholds but represented a shrinking safety margin</li>
                    <li><strong>Procedure erosion:</strong> Maintenance procedures may have been shortened or skipped under operational pressure, with each successful shortcut reinforcing the belief that the full procedure was unnecessary</li>
                    <li><strong>Alarm normalization:</strong> Recurring nuisance alarms may have been acknowledged without investigation, training operators to ignore signals that could indicate early-stage failures &mdash; a phenomenon closely related to <a href="article-2.html">alarm fatigue in BMS and monitoring systems</a></li>
                    <li><strong>Knowledge concentration:</strong> Critical institutional knowledge may have become concentrated in a small number of experienced operators, creating single points of failure in the human system</li>
                </ul>

                <p>None of these conditions produce incidents on their own. They accumulate quietly, each one narrowing the gap between normal operations and catastrophic failure. James Reason described this as the "Swiss cheese model"<a href="#ref4" class="src-ref">[4]</a>&mdash;each degraded condition represents a hole in a defensive layer, and it is only when the holes align that an accident passes through all defenses simultaneously.</p>

                <div class="info-box critical">
                    <div class="info-box-title">The Paradox Quantified</div>
                    <p style="margin:0; font-size: 0.88rem;">Uptime Institute's 2023 Annual Outage Analysis<a href="#ref5" class="src-ref">[5]</a> found that 70% of data center outages were caused by factors that had been present&mdash;and potentially detectable&mdash;for weeks or months before the incident. The 2024 report<a href="#ref6" class="src-ref">[6]</a> further confirmed that human error, often manifesting as procedural drift during "stable" periods, remained the leading root cause category. The incidents did not appear suddenly. They accumulated quietly while the dashboard stayed green.</p>
                </div>

                <h3>2.2 The Organizational Reward Loop</h3>

                <p>The danger is compounded by organizational incentive structures. When zero incidents are achieved, the behavior that produced the zero is rewarded&mdash;regardless of whether that behavior was genuinely safe or merely lucky. This creates a reinforcement loop that Hollnagel<a href="#ref3" class="src-ref">[3]</a> identifies as the core problem with Safety-I thinking: the organization learns to optimize for the absence of negative outcomes rather than the presence of positive safety behaviors.</p>

                <p>In practice, this means that the team which cuts a maintenance window short to meet operational targets and suffers no incident is rewarded equally&mdash;or more&mdash;than the team which takes the full maintenance window and identifies a latent defect. The first team delivered efficiency. The second team delivered safety. But the <span class="tip" data-tip="Key Performance Indicator: Measurable value demonstrating how effectively an organization is achieving key business objectives">KPI</span> dashboard cannot distinguish between the two.</p>

                <h3>2.3 The Normative Trap</h3>

                <p>Perhaps most insidiously, the comfort of zero creates normative pressure against reporting. When an organization celebrates its incident-free record, individual operators face social and professional pressure not to be the person who "breaks the streak." Near-misses go unreported. Anomalies are rationalized. Workarounds become standard practice. The very metric intended to measure safety begins to suppress the information needed to maintain it.</p>

                <p>This is not a theoretical concern. The <span class="tip" data-tip="Health and Safety Executive: UK government body responsible for the regulation of health and safety in the workplace">HSE</span> (2005)<a href="#ref7" class="src-ref">[7]</a> documented this phenomenon across multiple industries, finding that organizations with the strongest incident-free cultures often had the weakest near-miss reporting rates. The correlation was not incidental&mdash;it was causal. The pursuit of zero had created silence where there should have been signal.</p>

                <!-- Section 3: Lagging vs Leading Indicators -->
                <h2 id="lagging-vs-leading"><span class="section-number">3</span> Lagging vs Leading Indicators</h2>

                <p>To understand why incident-free periods provide false assurance, we must first distinguish between two fundamentally different types of safety measurement. Lagging indicators measure outcomes after failure has occurred. Leading indicators measure conditions before failure becomes possible. The distinction is not merely academic&mdash;it determines whether an organization can detect and respond to risk, or only count the consequences of undetected risk.</p>

                <h3>3.1 Comprehensive Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Dimension</th>
                                <th>Lagging Indicators</th>
                                <th>Leading Indicators</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Temporal orientation</strong></td>
                                <td>Retrospective (what happened)</td>
                                <td>Prospective (what could happen)</td>
                            </tr>
                            <tr>
                                <td><strong>Measurement focus</strong></td>
                                <td>Outcomes and consequences</td>
                                <td>Conditions and behaviors</td>
                            </tr>
                            <tr>
                                <td><strong>Control window</strong></td>
                                <td>After boundary is crossed</td>
                                <td>Before boundary is approached</td>
                            </tr>
                            <tr>
                                <td><strong>Actionability</strong></td>
                                <td>Reactive (investigate, remediate)</td>
                                <td>Proactive (prevent, intervene)</td>
                            </tr>
                            <tr>
                                <td><strong>Signal clarity</strong></td>
                                <td>Clear (incident occurred or not)</td>
                                <td>Ambiguous (requires interpretation)</td>
                            </tr>
                            <tr>
                                <td><strong>Data source</strong></td>
                                <td>Incident reports, <span class="tip" data-tip="Service Level Agreement: Contract defining expected service performance metrics and penalties for non-compliance">SLA</span> breaches</td>
                                <td>Audits, observations, trend analysis</td>
                            </tr>
                            <tr>
                                <td><strong>Organizational ease</strong></td>
                                <td>Easy to collect, easy to report</td>
                                <td>Difficult to collect, requires judgment</td>
                            </tr>
                            <tr>
                                <td><strong>Risk of manipulation</strong></td>
                                <td>Reporting suppression, reclassification</td>
                                <td>Gaming metrics, false compliance</td>
                            </tr>
                            <tr>
                                <td><strong>Failure mode</strong></td>
                                <td>False confidence from absence</td>
                                <td>Alert fatigue from abundance</td>
                            </tr>
                            <tr>
                                <td><strong>DC examples</strong></td>
                                <td>Outage count, <span class="tip" data-tip="Mean Time Between Failures: Average time between system breakdowns, measuring reliability">MTBF</span>, injury rate</td>
                                <td>Near-miss rate, audit close rate, training hours</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <div class="key-insight">
                    <div class="key-insight-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                        Critical Insight
                    </div>
                    <p>By the time a lagging indicator moves, control is already lost. The incident has occurred, the <span class="tip" data-tip="Service Level Agreement: Contract defining expected service performance metrics and penalties for non-compliance">SLA</span> has been breached, the injury has happened. Lagging indicators are useful for accountability and learning from failure, but they are structurally incapable of preventing the next failure. An organization that relies exclusively on lagging indicators is, by definition, operating blind to emerging risk.</p>
                </div>

                <h3>3.2 The Measurement Asymmetry Problem</h3>

                <p>The fundamental challenge is measurement asymmetry. Lagging indicators are binary and unambiguous: an incident either occurred or it did not. Leading indicators are continuous and interpretive: a near-miss report requires judgment about what constitutes "near," an audit finding requires assessment of severity, and a training completion rate requires evaluation of whether the training actually improved competence.</p>

                <p>This asymmetry creates organizational preference for lagging indicators. They are easier to collect, easier to report, and easier to benchmark. A facility manager can state with confidence that the site had "zero safety incidents in Q4." Stating that "the leading indicator profile suggests elevated systemic risk despite zero incidents" requires far more nuance, carries career risk, and may be met with skepticism by management that conflates absence of incidents with presence of safety.</p>

                <p>Hudson's safety culture maturity model<a href="#ref8" class="src-ref">[8]</a> places organizations that rely primarily on lagging indicators at the "reactive" or "calculative" stages of safety maturity. Only at the "proactive" and "generative" stages do organizations systematically measure and act on leading indicators. This progression mirrors the <a href="article-1.html">operational maturity journey from reactive to proactive engineering</a>. The transition between these stages is not merely a matter of adding more metrics&mdash;it requires a fundamental shift in how the organization defines and measures safety.</p>

                <!-- Section 4: Drift-to-Failure Theory -->
                <h2 id="drift-to-failure"><span class="section-number">4</span> Drift-to-Failure Theory (Rasmussen 1997)</h2>

                <p>Jens Rasmussen's seminal 1997 paper "Risk Management in a Dynamic Society"<a href="#ref1" class="src-ref">[1]</a> introduced the concept of drift-to-failure as a systemic property of complex socio-technical systems. Rather than viewing accidents as the result of individual errors or component failures, Rasmussen demonstrated that accidents emerge from the gradual migration of organizational behavior toward and eventually across safety boundaries.</p>

                <h3>4.1 The Boundary Model</h3>

                <p>Rasmussen's model describes system behavior as existing within a space bounded by three fundamental constraints:</p>

                <ul>
                    <li><strong>Economic failure boundary:</strong> The limit beyond which the organization becomes financially nonviable (too much cost, too little revenue)</li>
                    <li><strong>Unacceptable workload boundary:</strong> The limit beyond which workers can no longer sustain their effort (burnout, turnover, errors)</li>
                    <li><strong>Safety boundary:</strong> The limit beyond which operations become unsafe (equipment failure, environmental hazard, human harm)</li>
                </ul>

                <p>Under normal conditions, organizational behavior migrates within this space. Two forces drive systematic drift:</p>

                <div class="formula-box">
                    <div class="formula-box-title">Rasmussen's Dual Pressure Model</div>
                    <code>
                        Gradient toward least effort &rarr; Pushes behavior toward safety boundary<br>
                        Gradient toward efficiency &rarr; Pushes behavior toward safety boundary<br><br>
                        Combined effect: Systematic migration toward the safety boundary<br>
                        over time, even without any individual decision to be "unsafe"
                    </code>
                </div>

                <p>The critical insight is that each individual step in the drift is locally rational. A maintenance team that reduces a 4-hour procedure to 3 hours saves time, reduces workload, and faces no immediate consequence because the safety boundary is still some distance away. The 3-hour procedure becomes the new standard. Six months later, pressure reduces it to 2.5 hours. Then to 2 hours. At no point does anyone make a conscious decision to be unsafe. Each step is a marginal adaptation to competing pressures. But the cumulative effect is progressive erosion of the safety margin until the system operates at the very edge of its boundary&mdash;where even a small perturbation can cause it to cross over into failure.</p>

                <h3>4.2 Why Drift Is Invisible</h3>

                <p>Drift is invisible for three reasons that are particularly relevant to data center operations:</p>

                <p><strong>First, the boundary is invisible.</strong> Unlike physical boundaries (a cliff edge, a wall), safety boundaries in complex systems are not marked with bright lines. The point at which a <span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> system transitions from "operating with adequate margin" to "operating with insufficient margin to survive a dual utility failure" is not accompanied by a dashboard change. The boundary exists, but it can only be known through rigorous analysis&mdash;analysis that may not be performed during long incident-free periods when the system appears to be functioning well.</p>

                <p><strong>Second, drift is rewarded.</strong> Each step closer to the boundary typically comes with efficiency gains&mdash;shorter maintenance windows, reduced staffing, lower costs. In Rasmussen's framework, these are not failures of management; they are predictable responses to economic pressure. The organization is optimizing for the gradient it can see (cost, efficiency, speed) while drifting toward the gradient it cannot see (safety boundary proximity).</p>

                <p><strong>Third, drift is normalized.</strong> As we will explore in the next section, once a deviation from original design or procedure becomes established practice, it ceases to be perceived as a deviation. It becomes "the way we do things." Diane Vaughan<a href="#ref2" class="src-ref">[2]</a> documented this phenomenon in devastating detail in her analysis of the Challenger disaster, but the same dynamics operate in every complex organization, including data center operations.</p>

                <p>Sidney Dekker<a href="#ref9" class="src-ref">[9]</a> further developed this concept, noting that drift into failure is a property of systems, not of individuals. "The drift occurs because the system is doing exactly what it was designed to do: adapt to local pressures while maintaining production." The problem is that adaptation, in the absence of equally strong safety feedback, always tends in one direction: toward the boundary.</p>

                <!-- Article Image 2 -->
                <figure style="margin: 2rem 0; text-align: center;">
                    <img src="Article/Article_8/8.2.jpg" alt="Normalization of deviance and drift-to-failure theory applied to 24/7 shift operations" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
                </figure>

                <!-- Section 5: Normalization of Deviance -->
                <h2 id="normalization"><span class="section-number">5</span> Normalization of Deviance (Vaughan 1996)</h2>

                <p>Diane Vaughan's concept of the "normalization of deviance," developed in her landmark study of the 1986 Challenger disaster<a href="#ref2" class="src-ref">[2]</a>, describes the process by which organizations gradually accept previously unacceptable conditions as normal. The concept has since been recognized as one of the most important contributions to organizational safety theory, with applications far beyond aerospace.</p>

                <h3>5.1 The Mechanism</h3>

                <p>Normalization of deviance follows a predictable sequence that maps directly to data center operations:</p>

                <ol>
                    <li><strong>Initial deviation occurs:</strong> A design specification, procedure, or standard is not fully met. In a data center context, this might be a <span class="tip" data-tip="Preventive Maintenance: Regularly scheduled maintenance activities designed to prevent equipment failures">PM</span> task that is performed with a simplified checklist rather than the full manufacturer protocol, or a <span class="tip" data-tip="Management of Change: Formal process for evaluating and approving changes to facilities, equipment, procedures, or personnel that could affect safety">MoC</span> process that is bypassed for "minor" changes.</li>
                    <li><strong>No immediate consequence:</strong> The deviation does not produce an incident. The <span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> still functions. The cooling system still maintains temperature. The generator still starts on test.</li>
                    <li><strong>Deviation is rationalized:</strong> Because no consequence occurred, the deviation is retrospectively justified. "The full procedure takes too long." "The <span class="tip" data-tip="Management of Change: Formal process for evaluating and approving changes to facilities, equipment, procedures, or personnel that could affect safety">MoC</span> process is too bureaucratic for something this simple." "We've always done it this way and nothing has gone wrong."</li>
                    <li><strong>Deviation becomes precedent:</strong> The rationalized deviation becomes the new standard practice. New team members are trained on the deviated procedure, not the original. The deviation is now invisible&mdash;it is "how we do things."</li>
                    <li><strong>Cycle repeats:</strong> A new deviation occurs from the already-deviated standard, and the process begins again. Each cycle moves the operational norm further from the original design intent, accumulating risk that remains invisible until a triggering event exposes the accumulated gap.</li>
                </ol>

                <h3>5.2 Data Center Manifestations</h3>

                <p>In critical facilities, normalization of deviance manifests in patterns that are remarkably consistent across organizations:</p>

                <ul>
                    <li><strong><span class="tip" data-tip="Lockout/Tagout: Safety procedure ensuring that dangerous machines are properly shut off and not able to be started up again before maintenance work is completed">LOTO</span> procedure shortcuts:</strong> Lock-out/tag-out procedures gradually simplified from multi-step verification to single-check processes, eroding the defense-in-depth that the original procedure was designed to provide</li>
                    <li><strong><span class="tip" data-tip="Computerized Maintenance Management System: Software system that maintains a computer database of information about maintenance operations">CMMS</span> work order closure:</strong> Maintenance work orders closed as "complete" with incomplete testing, driven by pressure to clear the backlog and maintain closure rate <span class="tip" data-tip="Key Performance Indicator: Measurable value demonstrating how effectively an organization is achieving key business objectives">KPI</span>s</li>
                    <li><strong>Alarm threshold creep:</strong> <span class="tip" data-tip="Building Management System: Centralized system controlling and monitoring mechanical, electrical, fire, and security systems">BMS</span> alarm thresholds gradually widened to reduce nuisance alarms, inadvertently narrowing the warning window between normal operation and failure</li>
                    <li><strong><span class="tip" data-tip="Management of Change: Formal process for evaluating and approving changes to facilities, equipment, procedures, or personnel that could affect safety">MoC</span> bypass:</strong> Changes classified as "like-for-like" to avoid the change management process, even when the replacement introduces subtle differences in performance characteristics</li>
                    <li><strong>Staffing adaptation:</strong> Critical operations performed by one person instead of the designed two-person protocol, justified by experience and "familiarity with the system"</li>
                </ul>

                <div class="info-box warning">
                    <div class="info-box-title">The Insidiousness of Normalization</div>
                    <p style="margin:0; font-size: 0.88rem;">Vaughan's most important finding was that normalization is not a failure of vigilance. The engineers and managers at NASA who normalized the O-ring erosion problem were not negligent. They were following the organizational logic available to them: the erosion had been observed, analyzed, and determined to be within acceptable limits based on prior successful flights. Each successful flight reinforced the conclusion. The deviance was not hidden&mdash;it was visible but reclassified as acceptable. This is precisely what happens in data centers when a known deviation produces no incident: the deviation is not suppressed; it is accepted.</p>
                </div>

                <h3>5.3 The Accumulation Problem</h3>

                <p>The most dangerous aspect of normalization is not any single deviance, but the accumulation of multiple normalized deviances operating simultaneously. A data center may simultaneously have:</p>

                <ul>
                    <li>Simplified <span class="tip" data-tip="Lockout/Tagout: Safety procedure ensuring that dangerous machines are properly shut off and not able to be started up again before maintenance work is completed">LOTO</span> procedures (reducing human defense)</li>
                    <li>Widened <span class="tip" data-tip="Building Management System: Centralized system controlling and monitoring mechanical, electrical, fire, and security systems">BMS</span> alarm thresholds (reducing technical detection)</li>
                    <li>Deferred maintenance items (reducing equipment reliability)</li>
                    <li>Single-person operations for two-person tasks (reducing verification)</li>
                    <li>Bypassed <span class="tip" data-tip="Management of Change: Formal process for evaluating and approving changes to facilities, equipment, procedures, or personnel that could affect safety">MoC</span> processes (reducing change control)</li>
                </ul>

                <p>Each individual normalization may represent an acceptable risk. But collectively, they create a system state that the original designers never intended and the original risk assessment never evaluated. This is Perrow's "normal accident"<a href="#ref10" class="src-ref">[10]</a>&mdash;a failure that emerges not from any single cause but from the unexpected interaction of multiple degraded conditions that were each individually "acceptable."</p>

                <!-- Section 6: Weak Signals Taxonomy -->
                <h2 id="weak-signals"><span class="section-number">6</span> Weak Signals Taxonomy</h2>

                <p>If incident-free periods mask accumulating risk, then the critical question becomes: what signals exist that could reveal the hidden drift? Weick and Sutcliffe<a href="#ref11" class="src-ref">[11]</a>, in their study of High Reliability Organizations (<span class="tip" data-tip="High Reliability Organization: Organizations that operate in hazardous conditions with fewer than expected accidents through mindful practices">HRO</span>s), identified "preoccupation with failure" as a defining characteristic of organizations that successfully detect and respond to emerging risk. This preoccupation manifests as systematic attention to weak signals&mdash;subtle deviations from expected conditions that, individually, appear insignificant but collectively indicate systemic drift.</p>

                <p>Based on the safety science literature and operational experience in critical facilities, we propose a taxonomy of five weak signal categories relevant to data center operations:</p>

                <h3>6.1 Category 1: Operational Anomalies</h3>
                <p>These are deviations from expected system behavior that do not trigger alarms or incidents but indicate that something has changed:</p>
                <ul>
                    <li>Recurring nuisance alarms that are acknowledged but not investigated</li>
                    <li><span class="tip" data-tip="Heating, Ventilation, and Air Conditioning: Climate control systems maintaining proper temperature and humidity in data centers">HVAC</span> temperature variations that remain within thresholds but show increasing amplitude</li>
                    <li><span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span> battery test results that meet minimum requirements but show declining trend</li>
                    <li>Generator start times that are increasing, even if still within specification</li>
                    <li><span class="tip" data-tip="Data Center Infrastructure Management: Software solutions that provide comprehensive management of data center assets, resources, and operational information">DCIM</span> data showing drift in power utilization patterns</li>
                </ul>

                <h3>6.2 Category 2: Procedural Drift Signals</h3>
                <p>These indicate that actual practice has diverged from documented procedure:</p>
                <ul>
                    <li>Maintenance tasks consistently completed faster than the estimated duration</li>
                    <li><span class="tip" data-tip="Computerized Maintenance Management System: Software system that maintains a computer database of information about maintenance operations">CMMS</span> work orders with identical completion notes across different tasks</li>
                    <li>Increasing use of "N/A" or "not applicable" in checklist items</li>
                    <li>Informal workarounds that have become standard practice</li>
                    <li><span class="tip" data-tip="Standard Operating Procedure: Established step-by-step instruction compiled by an organization to help workers carry out routine operations">SOP</span> versions that do not match actual practice</li>
                </ul>

                <h3>6.3 Category 3: Organizational Stress Signals</h3>
                <p>These reflect pressures on the human system that may degrade decision-making and vigilance:</p>
                <ul>
                    <li>Increasing overtime hours, particularly for key technical personnel</li>
                    <li>Rising turnover in critical roles, especially experienced operators</li>
                    <li>Declining participation in safety meetings or toolbox talks</li>
                    <li>Increasing time between incident and <span class="tip" data-tip="Root Cause Analysis: Method of problem solving used for identifying the root causes of faults or problems">RCA</span> completion &mdash; see our guide on <a href="article-6.html">root cause analysis methodology for critical facilities</a></li>
                    <li>Knowledge concentration in a small number of individuals</li>
                </ul>

                <h3>6.4 Category 4: Reporting Suppression Signals</h3>
                <p>These indicate that the organization's information flow about safety is being constrained:</p>
                <ul>
                    <li>Declining near-miss report rates during periods of high operational tempo</li>
                    <li>Near-miss reports with decreasing detail or specificity</li>
                    <li>Gap between safety-walk observations and formal reports</li>
                    <li>Informal resolution of safety concerns without documentation</li>
                    <li>Reluctance to escalate findings to management</li>
                </ul>

                <h3>6.5 Category 5: System Coupling Signals</h3>
                <p>These indicate increasing interdependency that may amplify the impact of individual failures. Perrow<a href="#ref10" class="src-ref">[10]</a> and Leveson<a href="#ref12" class="src-ref">[12]</a> both emphasize that tight coupling is a precondition for cascade failures:</p>
                <ul>
                    <li>Increasing number of systems sharing single points of failure</li>
                    <li>Reduced isolation capability between independent systems</li>
                    <li>Growing dependency on specific network paths or control systems</li>
                    <li>Configuration changes that inadvertently create new interdependencies</li>
                    <li>Maintenance windows that require multiple systems to be at elevated risk simultaneously</li>
                </ul>

                <div class="key-insight">
                    <div class="key-insight-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        Why Weak Signals Matter
                    </div>
                    <p>Turner (1978)<a href="#ref13" class="src-ref">[13]</a> demonstrated that every major disaster he studied was preceded by an "incubation period" during which weak signals were present but unrecognized. The signals were not absent. They were unstructured, unowned, and unacted upon. A systematic taxonomy provides the structure; the following sections address ownership and action.</p>
                </div>

                <!-- Section 7: Case Context: Silent Drift -->
                <h2 id="case-context"><span class="section-number">7</span> Case Context: Silent Drift in Data Center Operations</h2>

                <p>To illustrate how drift, normalization, and weak signal suppression operate in practice, consider a composite case drawn from patterns observed across multiple critical facilities. This is not a single incident report; it is a synthesis of recurring dynamics that safety science literature and operational experience consistently identify.</p>

                <h3>7.1 The Scenario: 18 Months of Green</h3>

                <p>A Tier III data center serving financial services clients operates for 18 consecutive months without a reportable incident. During this period, several observable changes occur:</p>

                <ul>
                    <li><strong>Month 1-6:</strong> Full compliance with all maintenance protocols. Near-miss reports average 4-5 per month. <span class="tip" data-tip="Failure Mode and Effects Analysis: Systematic method for evaluating processes to identify where and how they might fail">FMEA</span> reviews conducted quarterly. Safety meetings well-attended with active participation.</li>
                    <li><strong>Month 7-12:</strong> Maintenance window pressures increase as client load grows. Two experienced operators leave; replacements are less experienced. Near-miss reports decline to 1-2 per month. <span class="tip" data-tip="Root Cause Analysis: Method of problem solving used for identifying the root causes of faults or problems">RCA</span> completion times extend from 5 days to 15 days. Management celebrates the "zero incident" milestone.</li>
                    <li><strong>Month 13-18:</strong> Informal workarounds become standard for three maintenance procedures. <span class="tip" data-tip="Building Management System: Centralized system controlling and monitoring mechanical, electrical, fire, and security systems">BMS</span> alarm thresholds widened twice to reduce "noise." Near-miss reports drop to zero&mdash;interpreted as evidence of improving safety. Budget request for additional training is deferred because "the numbers look great."</li>
                </ul>

                <h3>7.2 The Invisible Gap</h3>

                <p>At month 18, the dashboard shows perfect performance. Every lagging indicator is green. But the leading indicator profile tells a different story entirely:</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Indicator</th>
                                <th>Month 1</th>
                                <th>Month 18</th>
                                <th>Direction</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Near-miss reports/month</td>
                                <td style="color: #10b981;">4.5</td>
                                <td style="color: #ef4444;">0</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                            <tr>
                                <td>RCA completion (days)</td>
                                <td style="color: #10b981;">5</td>
                                <td style="color: #ef4444;">15+</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                            <tr>
                                <td>Training hours/quarter</td>
                                <td style="color: #10b981;">16</td>
                                <td style="color: #f59e0b;">6</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                            <tr>
                                <td>Open audit findings</td>
                                <td style="color: #10b981;">3</td>
                                <td style="color: #ef4444;">14</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                            <tr>
                                <td>Mgmt safety walks/month</td>
                                <td style="color: #10b981;">4</td>
                                <td style="color: #f59e0b;">1</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                            <tr>
                                <td>Procedure deviations known</td>
                                <td style="color: #10b981;">0</td>
                                <td style="color: #ef4444;">3 normalized</td>
                                <td style="color: #ef4444;">Deteriorating</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <p>The system has drifted substantially toward its safety boundary. The conditions for a significant failure are present. Only the triggering event&mdash;a utility outage, an equipment demand beyond degraded capacity, a human error in a simplified procedure&mdash;is missing. And the organization, looking at its lagging indicator dashboard, has no awareness of the accumulated risk.</p>

                <div class="info-box critical">
                    <div class="info-box-title">The Silent Drift Pattern</div>
                    <p style="margin:0; font-size: 0.88rem;">This pattern&mdash;green dashboards masking deteriorating safety margins&mdash;has been documented by Uptime Institute<a href="#ref5" class="src-ref">[5]</a><a href="#ref6" class="src-ref">[6]</a>, the <span class="tip" data-tip="International Atomic Energy Agency: The world's central intergovernmental forum for scientific and technical cooperation in the nuclear field">IAEA</span><a href="#ref14" class="src-ref">[14]</a>, and <span class="tip" data-tip="International Civil Aviation Organization: UN specialized agency managing the administration and governance of international civil aviation">ICAO</span><a href="#ref15" class="src-ref">[15]</a> across their respective industries. The pattern is not industry-specific. It is a property of complex socio-technical systems under production pressure. The question is not whether drift will occur, but whether the organization has the instrumentation to detect it.</p>
                </div>

                <!-- Section 8: Interactive Canvas -->
                <h2 id="interactive"><span class="section-number">8</span> Interactive: Safety Health Over Time</h2>

                <p>The following interactive visualization demonstrates the relationship between perceived safety (based on lagging indicators) and actual safety health (based on leading indicators) over a 24-month period. Adjust the sliders to model different organizational conditions and observe how the gap between perception and reality develops.</p>

                <div class="chart-container">
                    <div class="chart-title">Perceived Safety vs Actual Safety Health</div>
                    <div class="chart-subtitle">The growing gap between lagging indicator comfort and leading indicator reality</div>

                    <div class="chart-wrapper">
                        <canvas id="safetyHealthChart" class="chart-canvas" width="800" height="380"></canvas>
                    </div>

                    <div class="control-row">
                        <span class="control-label">Drift Rate:</span>
                        <input type="range" id="driftSlider" class="control-slider" min="0" max="100" value="45">
                        <span class="control-value" id="driftValue">45%</span>
                    </div>
                    <div class="control-row">
                        <span class="control-label">Reporting Suppression:</span>
                        <input type="range" id="suppressionSlider" class="control-slider" min="0" max="100" value="30">
                        <span class="control-value" id="suppressionValue">30%</span>
                    </div>

                    <div class="legend-row">
                        <div class="legend-item"><span class="legend-dot" style="background: #22c55e;"></span> Perceived Safety (Lagging)</div>
                        <div class="legend-item"><span class="legend-dot" style="background: #8b5cf6;"></span> Actual Safety Health (Leading)</div>
                        <div class="legend-item"><span class="legend-dot" style="background: #ef4444;"></span> Critical Threshold</div>
                    </div>

                    <div class="callout-row">
                        <div class="callout-card">
                            <div class="callout-label">Perception Gap</div>
                            <div class="callout-value" id="chartGap">38%</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Drift Level</div>
                            <div class="callout-value" id="chartDrift" style="color: #f59e0b;">Moderate</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Risk Status</div>
                            <div class="callout-value" id="chartRisk" style="color: #8b5cf6;">Latent</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Time to Boundary</div>
                            <div class="callout-value" id="chartTime" style="color: #06b6d4;">~8 mo</div>
                        </div>
                    </div>
                </div>

                <!-- Section 9: Detection System Design -->
                <h2 id="detection-system"><span class="section-number">9</span> Detection System Design</h2>

                <p>Given that drift is systematic, normalization is predictable, and weak signals are identifiable, the question becomes: how should an organization design a detection system that surfaces emerging risk before it manifests as incident? Drawing from <span class="tip" data-tip="High Reliability Organization: Organizations that operate in hazardous conditions with fewer than expected accidents through mindful practices">HRO</span> principles<a href="#ref11" class="src-ref">[11]</a> and the <span class="tip" data-tip="Safety Management System: Systematic approach to managing safety, including organizational structures, accountabilities, policies, and procedures">SMS</span> frameworks of <span class="tip" data-tip="International Atomic Energy Agency: The world's central intergovernmental forum for scientific and technical cooperation in the nuclear field">IAEA</span><a href="#ref14" class="src-ref">[14]</a> and <span class="tip" data-tip="International Civil Aviation Organization: UN specialized agency managing the administration and governance of international civil aviation">ICAO</span><a href="#ref15" class="src-ref">[15]</a>, we propose a five-component detection architecture.</p>

                <h3>9.1 Component 1: Safe Reporting Channels</h3>
                <p>The foundation of any detection system is the willingness and ability of front-line personnel to report anomalies, near-misses, and concerns without fear of reprisal. This requires:</p>
                <ul>
                    <li>Anonymous or confidential reporting mechanisms</li>
                    <li>Explicit organizational commitment to non-punitive reporting</li>
                    <li>Visible response to reported concerns (closing the feedback loop)</li>
                    <li>Regular communication about the value of reporting</li>
                </ul>

                <h3>9.2 Component 2: Structured Near-Miss Capture</h3>
                <p>Near-miss events are the most valuable leading indicator available, because they represent actual system failures that were intercepted before consequence. Structured capture requires:</p>
                <ul>
                    <li>Standardized near-miss classification taxonomy</li>
                    <li>Low-friction reporting tools (mobile, simple, rapid)</li>
                    <li>Dedicated analysis resource (not ad hoc review)</li>
                    <li>Trend analysis across reports (pattern recognition)</li>
                </ul>

                <h3>9.3 Component 3: Trend Analysis Over Time</h3>
                <p>Individual data points are less informative than trends. A detection system must track key indicators over time and alert on trajectory changes, not just threshold breaches:</p>
                <ul>
                    <li><span class="tip" data-tip="Mean Time To Repair: Average time to restore a failed system to full operational capability">MTTR</span> variance (not just average)</li>
                    <li>Alarm frequency trends (increasing nuisance alarms)</li>
                    <li>Work order completion time distributions</li>
                    <li>Training completion and competency assessment trends</li>
                </ul>

                <h3>9.4 Component 4: Explicit Anomaly Ownership</h3>
                <p>Every identified weak signal must have an owner&mdash;a specific individual or team responsible for investigation, disposition, and closure. Without ownership, signals enter what Turner<a href="#ref13" class="src-ref">[13]</a> called the "organizational void"&mdash;observed but unacted upon.</p>

                <h3>9.5 Component 5: Independent Safety Assessment</h3>
                <p>Periodic assessment by individuals or teams not embedded in day-to-day operations. This addresses the normalization problem: people embedded in the system cannot see the drift because they are part of it. Independent assessors&mdash;whether internal safety teams, peer reviewers from other sites, or external auditors&mdash;provide the outside perspective necessary to identify normalized deviance.</p>

                <div class="key-insight">
                    <div class="key-insight-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        Design Principle
                    </div>
                    <p>The goal of a detection system is not to eliminate risk&mdash;that is impossible in complex systems. The goal is to make risk visible. An organization that can see its risk can manage it. An organization that cannot see its risk is managing an illusion.</p>
                </div>

                <!-- Section 10: Effective Leading Indicators -->
                <h2 id="effective-leading"><span class="section-number">10</span> Effective Leading Indicators</h2>

                <p>Based on the theoretical foundations established in the preceding sections, we propose eight leading indicators specifically designed for critical facility operations. Each indicator includes a measurement method, a target range, and a rationale grounded in safety science.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Indicator</th>
                                <th>Measurement</th>
                                <th>Target</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">1</td>
                                <td><strong>Near-miss report rate</strong></td>
                                <td>Reports per month per 100 staff</td>
                                <td style="color: #10b981;">&ge; 10</td>
                                <td>Indicates reporting culture health; declining rates signal suppression</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">2</td>
                                <td><strong>Weak signal identification rate</strong></td>
                                <td>Documented weak signals per month</td>
                                <td style="color: #10b981;">&ge; 15</td>
                                <td>Measures organizational sensitivity to emerging risk per the taxonomy</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">3</td>
                                <td><strong>Open audit finding count</strong></td>
                                <td>Unresolved findings at month-end</td>
                                <td style="color: #10b981;">&le; 5</td>
                                <td>Proxy for organizational capacity to close gaps; rising count indicates overload</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">4</td>
                                <td><strong>Safety training hours</strong></td>
                                <td>Hours per person per quarter</td>
                                <td style="color: #10b981;">&ge; 20</td>
                                <td>Competency maintenance; declining hours correlate with procedural drift</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">5</td>
                                <td><strong>Management safety walks</strong></td>
                                <td>Walks per month per facility</td>
                                <td style="color: #10b981;">&ge; 8</td>
                                <td>Demonstrates leadership commitment; provides independent observation data</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">6</td>
                                <td><strong>Hazard action close rate</strong></td>
                                <td>% of identified hazards resolved within SLA</td>
                                <td style="color: #10b981;">&ge; 85%</td>
                                <td>Measures responsiveness to identified risk; declining rate indicates normalization</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">7</td>
                                <td><strong>Safety meeting frequency</strong></td>
                                <td>Scheduled meetings per month</td>
                                <td style="color: #10b981;">Weekly</td>
                                <td>Maintains organizational attention to safety; less frequent meetings correlate with drift</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: 700;">8</td>
                                <td><strong><span class="tip" data-tip="Mean Time To Repair: Average time to restore a failed system to full operational capability">MTTR</span> variance coefficient</strong></td>
                                <td>Standard deviation / mean of repair times</td>
                                <td style="color: #10b981;">&le; 0.3</td>
                                <td>High variance indicates inconsistent competency or process; trending up indicates degradation</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Leading Indicator Health Score Composite Formula</div>
                    <code>
                        Safety Health Index = Sum of weighted dimension scores (0-100)<br><br>
                        Near-miss score     = min(100, reports/10 * 100) * 0.15<br>
                        Weak signal score   = min(100, signals/15 * 100) * 0.15<br>
                        Audit score         = max(0, (1 - findings/30) * 100) * 0.10<br>
                        Training score      = min(100, hours/20 * 100) * 0.15<br>
                        Walk score          = min(100, walks/8 * 100) * 0.10<br>
                        Hazard score        = hazardRate * 0.20<br>
                        Meeting score       = meetingMap[frequency] * 0.15<br><br>
                        Total = sum of all weighted scores (range: 0-100)
                    </code>
                </div>

                <p>The critical observation is that these indicators are designed to move <em>before</em> an incident occurs. A declining Safety Health Index during an incident-free period is precisely the paradox this paper addresses: the leading indicators are deteriorating while the lagging indicators remain green. This is the drift-to-failure pattern in quantitative form.</p>

                <!-- Section 11: Calculator -->
                <h2 id="calculator"><span class="section-number">11</span> Safety Health Index Calculator</h2>

                <p>Use this interactive calculator to assess your facility's Safety Health Index. Enter your current operational metrics to receive a composite score, drift probability assessment, culture classification, and trajectory projection. Pay particular attention to the paradox warning&mdash;it activates when extended incident-free periods coincide with low safety health scores, revealing the exact condition this paper identifies as most dangerous.</p>

                <div class="calculator-section">
                    <div class="calculator-title">Safety Health Index Calculator</div>
                    <div class="calculator-subtitle">Quantifying the gap between perceived safety and actual system health</div>

                    <div class="shi-toolbar">
                        <button class="shi-toolbar-btn shi-btn-free active" onclick="shiSetMode('free')">Free Mode</button>
                        <button class="shi-toolbar-btn shi-btn-pro" onclick="shiSetMode('pro')">
                            <i class="fas fa-crown" style="margin-right:4px;font-size:0.7rem;"></i> Pro Mode
                        </button>
                        <button class="shi-toolbar-btn shi-btn-reset" onclick="shiReset()">
                            <i class="fas fa-undo" style="margin-right:4px;font-size:0.7rem;"></i> Reset
                        </button>
                        <button class="shi-toolbar-btn shi-btn-pdf" onclick="shiExportPDF()">
                            <i class="fas fa-file-pdf" style="margin-right:4px;font-size:0.7rem;"></i> Export PDF
                        </button>
                    </div>

                    <div class="calc-grid">
                        <div class="calc-input-group">
                            <label class="calc-label">Near-miss Reports / Month <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Near-Miss Reporting Rate</div><div class="tooltip-desc">Monthly count of reported near-miss events. High reporting = healthy safety culture. Suppressed reporting is the #1 precursor to catastrophic drift.</div><div class="tooltip-formula">Benchmark: 10+ reports/month = Generative culture</div></span></span></label>
                            <input type="number" id="calcNearMiss" class="calc-input" value="3" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Weak Signals / Month <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Weak Signal Detection</div><div class="tooltip-desc">Number of anomalies, deviations, or early-warning signals captured per month. These are pre-incident indicators from Turner's incubation theory.</div><div class="tooltip-formula">Benchmark: 15+ signals/month = active detection</div></span></span></label>
                            <input type="number" id="calcWeakSignals" class="calc-input" value="5" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Open Audit Findings <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Open Audit Findings</div><div class="tooltip-desc">Total unresolved audit findings. High count indicates backlog accumulation and eroding compliance. Inversely scored — fewer open items = better health.</div><div class="tooltip-formula">Benchmark: &lt;5 open findings = healthy closure rate</div></span></span></label>
                            <input type="number" id="calcAudit" class="calc-input" value="12" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Training Hrs / Quarter <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Safety Training Investment</div><div class="tooltip-desc">Hours of safety-specific training per quarter. Includes drills, tabletops, classroom sessions, and hands-on exercises per Weick & Sutcliffe HRO principles.</div><div class="tooltip-formula">Benchmark: 20 hrs/quarter = minimum for HRO</div></span></span></label>
                            <input type="number" id="calcTraining" class="calc-input" value="8" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Incident-Free Days <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Incident-Free Period</div><div class="tooltip-desc">Consecutive days without a recordable safety incident. Paradoxically, long incident-free periods with low safety scores indicate Rasmussen's drift-to-failure.</div><div class="tooltip-formula">Warning: &gt;365 days + low score = paradox zone</div></span></span></label>
                            <input type="number" id="calcDays" class="calc-input" value="365" min="0" max="3650">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Mgmt Walkarounds / Month <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Management Safety Walkarounds</div><div class="tooltip-desc">Monthly frequency of leadership safety walkarounds. Direct observation by management signals commitment and detects issues missed in reports.</div><div class="tooltip-formula">Benchmark: 8/month = strong leadership engagement</div></span></span></label>
                            <input type="number" id="calcWalks" class="calc-input" value="2" min="0" max="30">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Hazard Action Rate % <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Hazard Action Close-Out Rate</div><div class="tooltip-desc">Percentage of identified hazards with completed corrective actions within SLA. Low rates indicate systemic inability to close the feedback loop.</div><div class="tooltip-formula">Benchmark: 85%+ = responsive safety system</div></span></span></label>
                            <input type="number" id="calcHazard" class="calc-input" value="60" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Safety Meeting Frequency <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Safety Meeting Cadence</div><div class="tooltip-desc">Regularity of dedicated safety meetings. Weekly cadence enables rapid feedback loops and early signal escalation per ICAO Safety Management Manual (Doc 9859).</div><div class="tooltip-formula">Benchmark: Weekly = generative culture standard</div></span></span></label>
                            <select id="calcMeeting" class="calc-select">
                                <option value="None">None</option>
                                <option value="Monthly" selected>Monthly</option>
                                <option value="Bi-weekly">Bi-weekly</option>
                                <option value="Weekly">Weekly</option>
                            </select>
                        </div>
                    </div>

                    <!-- Gauge -->
                    <div class="gauge-container">
                        <canvas id="gaugeCanvas" width="280" height="160"></canvas>
                    </div>

                    <!-- Results -->
                    <div class="calc-results">
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultScore">--</div>
                            <div class="calc-result-label">Health Score <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Safety Health Score</div><div class="rtd">Composite safety culture score (0-100) based on Rasmussen's drift-to-failure model inputs.</div><span class="rtf">&gt;80 Strong &middot; 60-80 Developing &middot; &lt;60 At Risk</span></span></span></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultDrift" style="color: #ef4444;">--</div>
                            <div class="calc-result-label">Drift Probability <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Drift-to-Failure Probability</div><div class="rtd">Estimated probability of operational drift toward failure boundary based on weak signal analysis.</div></span></span></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultCulture">--</div>
                            <div class="calc-result-label">Culture Type <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Safety Culture Type</div><div class="rtd">Classification per Westrum model: Pathological, Bureaucratic, or Generative safety culture.</div></span></span></div>
                            <div id="cultureBadge"></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultTrajectory">--</div>
                            <div class="calc-result-label">Trajectory <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Safety Trajectory</div><div class="rtd">Direction of safety culture change: Improving, Stable, or Declining.</div></span></span></div>
                            <div id="trajectoryIndicator" class="trajectory-indicator"></div>
                        </div>
                    </div>

                    <!-- Dimension Bars -->
                    <div class="dimension-bars" id="dimensionBars"></div>

                    <!-- Paradox Warning -->
                    <div class="paradox-warning" id="paradoxWarning">
                        <div class="paradox-warning-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                            SAFETY PARADOX DETECTED
                        </div>
                        <p id="paradoxText">Your facility has been incident-free for an extended period, but your Safety Health Index indicates significant systemic drift. This is the exact condition described by Rasmussen's drift-to-failure model: the absence of incidents is masking accumulating risk. Immediate leading indicator review is recommended.</p>
                    </div>

                    <!-- Recommended Indicators -->
                    <div id="recommendations" style="margin-top: 1.5rem; padding: 1.25rem; background: rgba(139, 92, 246, 0.1); border-radius: 12px; border: 1px solid rgba(139, 92, 246, 0.2); display: none;">
                        <div style="color: #a78bfa; font-weight: 700; font-size: 0.9rem; margin-bottom: 0.75rem;">Priority Improvement Areas</div>
                        <ul id="recList" style="color: #94a3b8; font-size: 0.85rem; margin: 0; padding-left: 1.25rem;"></ul>
                    </div>

                    <!-- Pro Analysis Container -->
                    <div class="shi-pro-container" id="shiProContainer">
                        <!-- Panel 1: Safety Maturity Classification -->
                        <div class="shi-pro-panel gated" id="shiPanel1">
                            <div class="shi-gate-overlay" onclick="shiShowLogin()">
                                <i class="fas fa-lock"></i>
                                <span>Sign In</span>
                            </div>
                            <div class="shi-panel-content">
                                <div class="shi-panel-title"><i class="fas fa-layer-group"></i> Safety Maturity Classification (Westrum Typology)</div>
                                <div class="shi-kpi-grid" id="shiMaturityKPIs"></div>
                                <div class="shi-chart-container"><canvas id="shiRadarChart" height="280"></canvas></div>
                                <div class="shi-narrative-box" id="shiMaturityNarrative"></div>
                            </div>
                        </div>

                        <!-- Panel 2: Cost of Complacency -->
                        <div class="shi-pro-panel gated" id="shiPanel2">
                            <div class="shi-gate-overlay" onclick="shiShowLogin()">
                                <i class="fas fa-lock"></i>
                                <span>Sign In</span>
                            </div>
                            <div class="shi-panel-content">
                                <div class="shi-panel-title"><i class="fas fa-dollar-sign"></i> Cost of Complacency Model</div>
                                <div class="shi-kpi-grid" id="shiCostKPIs"></div>
                                <div class="shi-chart-container"><canvas id="shiWaterfallChart" height="280"></canvas></div>
                            </div>
                        </div>

                        <!-- Panel 3: Sensitivity Analysis -->
                        <div class="shi-pro-panel gated" id="shiPanel3">
                            <div class="shi-gate-overlay" onclick="shiShowLogin()">
                                <i class="fas fa-lock"></i>
                                <span>Sign In</span>
                            </div>
                            <div class="shi-panel-content">
                                <div class="shi-panel-title"><i class="fas fa-chart-bar"></i> Sensitivity Analysis (Tornado)</div>
                                <div id="shiTornadoBars"></div>
                                <div class="shi-narrative-box" id="shiSensitivityNarrative"></div>
                            </div>
                        </div>

                        <!-- Panel 4: Monte Carlo & Predictive Risk -->
                        <div class="shi-pro-panel gated" id="shiPanel4">
                            <div class="shi-gate-overlay" onclick="shiShowLogin()">
                                <i class="fas fa-lock"></i>
                                <span>Sign In</span>
                            </div>
                            <div class="shi-panel-content">
                                <div class="shi-panel-title"><i class="fas fa-brain"></i> Monte Carlo Risk Simulation (10,000 iterations)</div>
                                <div class="shi-kpi-grid" id="shiMonteKPIs"></div>
                                <div class="shi-chart-container"><canvas id="shiMonteChart" height="280"></canvas></div>
                                <div class="shi-narrative-box" id="shiMonteNarrative"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Privacy Badge -->
                    <div class="shi-privacy-badge">
                        <i class="fas fa-shield-alt"></i>
                        PDF generated in your browser — no data sent to any server
                    </div>

                    <!-- Benchmark Meta -->
                    <div class="shi-benchmark-meta">
                        <meta name="shi-model-version" content="SHI-v2.0">
                        <meta name="shi-date" content="2026-02-16">
                        <meta name="shi-sources" content="Rasmussen 1997, Vaughan 1996, Hollnagel 2014, Reason 1997, Uptime Institute 2023-2024, HSE 2005, Westrum 2004">
                        <meta name="shi-methodology" content="Weighted composite index with 7 dimensions, Monte Carlo confidence bands (10K iterations), Westrum culture classification">
                    </div>
                </div>

                <!-- Calculator Disclaimer -->
                <div class="calc-disclaimer" style="border-radius:12px;padding:1.25rem 1.5rem;margin-top:1.5rem;">
                    <div style="display:flex;align-items:flex-start;gap:0.75rem;">
                        <div style="color:#f59e0b;font-size:1rem;margin-top:2px;flex-shrink:0;">
                            <i class="fas fa-triangle-exclamation"></i>
                        </div>
                        <div>
                            <div class="disc-title" style="font-weight:700;font-size:0.8rem;margin-bottom:0.5rem;">
                                Disclaimer &amp; Data Sources
                            </div>
                            <p class="disc-text" style="font-size:0.72rem;line-height:1.65;margin:0 0 0.5rem 0;">
                                This calculator is provided for <strong>educational and
                                estimation purposes only</strong>. Results are approximations based on industry
                                benchmarks and publicly available data. They should not be used as the sole basis for investment,
                                procurement, or engineering decisions. Always consult qualified professionals for site-specific analysis.
                            </p>
                            <p class="disc-text" style="font-size:0.72rem;line-height:1.65;margin:0 0 0.5rem 0;">
                                <strong>Algorithm &amp; methodology sources:</strong>
                                Hudson Safety Maturity Model 2007, Westrum typology 2004, Reason Swiss Cheese Model 1997, Uptime Institute 2023&ndash;2024 Global Survey, HSE Safety Culture Framework 2005, 7-dimension weighted composite index with Monte Carlo confidence bands (10K iterations).
                            </p>
                            <p class="disc-text" style="font-size:0.72rem;line-height:1.65;margin:0 0 0.5rem 0;">
                                All calculations are performed entirely in your browser. No data is transmitted
                                to any server. See our <a href="privacy.html" style="text-decoration:underline;">Privacy Policy</a> for details.
                            </p>
                            <p class="disc-fine" style="font-size:0.68rem;line-height:1.5;margin:0;">
                                By using this tool you agree to our
                                <a href="terms.html" style="text-decoration:underline;">Terms</a>.
                                All content on ResistanceZero is independent personal research.
                                This site does not represent any current or former employer.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Login Modal -->
                <div class="shi-login-overlay" id="shiLoginOverlay">
                    <div class="shi-login-box">
                        <button class="shi-login-close" onclick="shiHideLogin()">&times;</button>
                        <div class="shi-login-title">Sign In</div>
                        <div class="shi-login-subtitle">Access Monte Carlo simulation, sensitivity analysis, cost modeling, and comprehensive PDF reports</div>
                        <input type="email" class="shi-login-input" id="shiLoginEmail" placeholder="Email address">
                        <input type="password" class="shi-login-input" id="shiLoginPass" placeholder="Password">
                        <div class="shi-login-error" id="shiLoginError">Invalid credentials</div>
                        <button class="shi-login-submit" onclick="shiDoLogin()">Sign In</button>
                        <div class="shi-login-demo">Demo Account: demo@resistancezero.com / demo2026</div>
<p style="text-align:center;font-size:0.68rem;color:#64748b;margin-top:8px;line-height:1.5;">By signing in, you agree to our <a href="terms.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Terms</a> &amp; <a href="privacy.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Privacy Policy</a>.</p>
                    </div>
                </div>

                <!-- Section 12: Proactive Safety Culture -->
                <h2 id="proactive-culture"><span class="section-number">12</span> Proactive Safety Culture (Westrum Typology)</h2>

                <p>The theoretical and practical frameworks presented in this paper converge on a single conclusion: the transition from lagging-indicator dependence to leading-indicator competence requires a fundamental cultural transformation. Ron Westrum's organizational culture typology<a href="#ref16" class="src-ref">[16]</a> provides the most widely-used framework for understanding where an organization sits on this spectrum and what is required to advance.</p>

                <h3>12.1 Westrum's Three Culture Types</h3>

                <div class="comparison-grid">
                    <div class="comparison-card" style="border-left: 4px solid #ef4444;">
                        <h4 style="color: #ef4444; margin-top: 0;">Pathological</h4>
                        <p style="font-size: 0.88rem; color: var(--text-secondary); margin-bottom: 0.5rem;"><strong>Power-oriented:</strong> Information is a personal resource to be hoarded for advantage.</p>
                        <ul style="font-size: 0.85rem; color: var(--text-secondary); margin: 0; padding-left: 1rem;">
                            <li>Messengers are "shot" (penalized for bad news)</li>
                            <li>Responsibilities are shirked</li>
                            <li>Bridging between teams is discouraged</li>
                            <li>Failure leads to scapegoating</li>
                            <li>Novelty is crushed</li>
                        </ul>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #f59e0b;">
                        <h4 style="color: #f59e0b; margin-top: 0;">Bureaucratic</h4>
                        <p style="font-size: 0.88rem; color: var(--text-secondary); margin-bottom: 0.5rem;"><strong>Rule-oriented:</strong> Information flows through channels. Standard processes are followed.</p>
                        <ul style="font-size: 0.85rem; color: var(--text-secondary); margin: 0; padding-left: 1rem;">
                            <li>Messengers are tolerated</li>
                            <li>Responsibilities are compartmentalized</li>
                            <li>Bridging is allowed but not encouraged</li>
                            <li>Failure leads to justice</li>
                            <li>Novelty creates problems</li>
                        </ul>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #10b981;">
                        <h4 style="color: #10b981; margin-top: 0;">Generative</h4>
                        <p style="font-size: 0.88rem; color: var(--text-secondary); margin-bottom: 0.5rem;"><strong>Performance-oriented:</strong> Information is actively sought and shared to improve outcomes.</p>
                        <ul style="font-size: 0.85rem; color: var(--text-secondary); margin: 0; padding-left: 1rem;">
                            <li>Messengers are trained and rewarded</li>
                            <li>Responsibilities are shared across teams</li>
                            <li>Bridging between teams is actively rewarded</li>
                            <li>Failure leads to inquiry (not blame)</li>
                            <li>Novelty is implemented and shared</li>
                        </ul>
                    </div>
                </div>

                <h3>12.2 Implications for Safety Indicator Programs</h3>

                <p>Westrum's typology has direct implications for the feasibility and effectiveness of leading indicator programs:</p>

                <p>In <strong>pathological</strong> organizations, leading indicator programs will fail because the information they generate threatens power structures. Near-miss reports will be suppressed. Audit findings will be buried. The organization's immune system will reject the feedback mechanism. Safety Health Index scores in the 0-55 range typically correlate with this culture type.</p>

                <p>In <strong>bureaucratic</strong> organizations, leading indicator programs can function mechanistically&mdash;data is collected, reports are generated, meetings are held&mdash;but the information rarely drives genuine change. The metrics become compliance artifacts rather than decision-making tools. Scores in the 55-80 range often reflect this culture.</p>

                <p>In <strong>generative</strong> organizations, leading indicators are valued precisely because they provide early warning. Bad news is welcomed. Declining indicators trigger investigation, not blame. The Safety Health Index becomes a genuine operational tool rather than a compliance checklist. Scores above 80 typically reflect this culture type.</p>

                <h3>12.3 The Culture-Indicator Feedback Loop</h3>

                <p>The relationship between culture and indicators is not one-directional. Implementing a leading indicator program can itself shift organizational culture, provided leadership demonstrates genuine commitment to acting on the information. When operators see that their near-miss reports lead to visible improvements, reporting increases. When audit findings are closed promptly, the value of the audit process is reinforced. Each cycle builds trust in the system, moving the organization from bureaucratic compliance toward generative engagement.</p>

                <p>Conversely, implementing leading indicators in a pathological culture without addressing the underlying power dynamics will produce gaming, suppression, and cynicism&mdash;actively worsening the safety culture rather than improving it. As Westrum<a href="#ref16" class="src-ref">[16]</a> emphasizes, the culture determines how information flows, and information flow determines whether safety indicators function as intended.</p>

                <!-- Section 13: Conclusion -->
                <h2 id="conclusion"><span class="section-number">13</span> Conclusion</h2>

                <div class="conclusion-box">
                    <h3>The Central Argument Summarized</h3>

                    <p>"No incident" is a lagging indicator masquerading as a safety statement. It tells us that boundaries have not been crossed. It tells us nothing about how close to those boundaries the organization is operating, how fast it is drifting toward them, or how many normalized deviances have accumulated along the way.</p>

                    <p>This paper has demonstrated, through the theoretical frameworks of Rasmussen<a href="#ref1" class="src-ref">[1]</a>, Vaughan<a href="#ref2" class="src-ref">[2]</a>, Hollnagel<a href="#ref3" class="src-ref">[3]</a>, Reason<a href="#ref4" class="src-ref">[4]</a>, Dekker<a href="#ref9" class="src-ref">[9]</a>, and Weick &amp; Sutcliffe<a href="#ref11" class="src-ref">[11]</a>, that:</p>

                    <ol>
                        <li><strong>Drift is systematic:</strong> Organizations under production pressure inevitably migrate toward safety boundaries. The drift is not random&mdash;it is driven by predictable forces (economic gradient, least-effort gradient) and follows a predictable trajectory.</li>
                        <li><strong>Normalization masks drift:</strong> As deviations accumulate without consequence, they are reclassified from "deviance" to "normal." The organization loses the ability to perceive its own degradation.</li>
                        <li><strong>Weak signals precede failure:</strong> Every major failure is preceded by an incubation period during which detectable signals are present. The question is whether the organization has the structures, culture, and will to detect and act on them.</li>
                        <li><strong>Leading indicators can reveal the invisible:</strong> A well-designed set of leading indicators&mdash;measuring near-miss reporting, weak signal detection, audit health, training investment, management engagement, hazard closure, and meeting cadence&mdash;can make the invisible drift visible.</li>
                        <li><strong>Culture determines effectiveness:</strong> The Westrum typology demonstrates that leading indicators function as intended only in organizational cultures that value information flow and respond to bad news with inquiry rather than blame.</li>
                    </ol>

                    <p>For data center operators managing <span class="tip" data-tip="Uninterruptible Power Supply: Battery-backed power system that provides emergency power when utility power fails">UPS</span>, <span class="tip" data-tip="Power Distribution Unit: Device that distributes electric power to rack-mounted equipment in data centers">PDU</span>, <span class="tip" data-tip="Heating, Ventilation, and Air Conditioning: Climate control systems maintaining proper temperature and humidity in data centers">HVAC</span>, <span class="tip" data-tip="Building Management System: Centralized system controlling and monitoring mechanical, electrical, fire, and security systems">BMS</span>, and associated infrastructure, the practical implication is clear: <strong>celebrate incident-free periods cautiously, and complement them with rigorous leading indicator programs that measure the conditions under which the next incident becomes possible.</strong></p>

                    <p>Safety lives in signals that precede failure, not in the absence of visible harm. Organizations that learn to see weak signals trade false confidence for true resilience. Those that do not will continue to be surprised by failures that, in retrospect, were always visible&mdash;just not measured.</p>
                </div>

                
                <!-- Independence Disclaimer -->
                <div style="margin:2rem 0 0;padding:1rem 0;border-top:1px solid rgba(255,255,255,0.06);text-align:center;">
                    <p style="font-size:0.72rem;color:#64748b;font-style:italic;line-height:1.6;margin:0;">All content on ResistanceZero is independent personal research derived from publicly available sources. This site does not represent any current or former employer. <a href="terms.html" style="color:#8b5cf6;">Terms &amp; Disclaimer</a></p>
                </div>

<!-- References -->
                <div class="references-section" id="references">
                    <h3 class="references-title">References</h3>
                    <ol class="ref-list">
                        <li id="ref1">Rasmussen, J. (1997). <a href="https://doi.org/10.1016/S0925-7535(97)00052-0" target="_blank" rel="noopener noreferrer">"Risk Management in a Dynamic Society: A Modelling Problem."</a> <em>Safety Science</em>, 27(2-3), 183-213.</li>
                        <li id="ref2">Vaughan, D. (1996). <a href="https://press.uchicago.edu/ucp/books/book/chicago/C/bo22781921.html" target="_blank" rel="noopener noreferrer"><em>The Challenger Launch Decision: Risky Technology, Culture, and Deviance at NASA.</em></a> University of Chicago Press.</li>
                        <li id="ref3">Hollnagel, E. (2014). <a href="https://www.routledge.com/Safety-I-and-Safety-II-The-Past-and-Future-of-Safety-Management/Hollnagel/p/book/9781472423085" target="_blank" rel="noopener noreferrer"><em>Safety-I and Safety-II: The Past and Future of Safety Management.</em></a> Ashgate Publishing.</li>
                        <li id="ref4">Reason, J. (1997). <a href="https://www.routledge.com/Managing-the-Risks-of-Organizational-Accidents/Reason/p/book/9781840141054" target="_blank" rel="noopener noreferrer"><em>Managing the Risks of Organizational Accidents.</em></a> Ashgate Publishing.</li>
                        <li id="ref5">Uptime Institute. (2023). <a href="https://uptimeinstitute.com/resources/research-and-reports/annual-outage-analysis-2024" target="_blank" rel="noopener noreferrer"><em>Annual Outage Analysis 2023.</em></a> Uptime Institute Research.</li>
                        <li id="ref6">Uptime Institute. (2024). <a href="https://uptimeinstitute.com/resources/research-and-reports/annual-outage-analysis-2024" target="_blank" rel="noopener noreferrer"><em>Annual Outage Analysis 2024.</em></a> Uptime Institute Research.</li>
                        <li id="ref7">Health and Safety Executive. (2005). <a href="https://www.hse.gov.uk/research/rrhtm/rr367.htm" target="_blank" rel="noopener noreferrer"><em>A Review of Safety Culture and Safety Climate Literature for the Development of the Safety Culture Inspection Toolkit.</em></a> Research Report 367.</li>
                        <li id="ref8">Hudson, P. (2007). <a href="https://doi.org/10.1016/j.ssci.2007.04.005" target="_blank" rel="noopener noreferrer">"Implementing a Safety Culture in a Major Multi-National."</a> <em>Safety Science</em>, 45(6), 697-722.</li>
                        <li id="ref9">Dekker, S. (2011). <a href="https://www.routledge.com/Drift-into-Failure-From-Hunting-Broken-Components-to-Understanding-Complex-Systems/Dekker/p/book/9781409422211" target="_blank" rel="noopener noreferrer"><em>Drift into Failure: From Hunting Broken Components to Understanding Complex Systems.</em></a> Ashgate Publishing.</li>
                        <li id="ref10">Perrow, C. (1999). <a href="https://press.princeton.edu/books/paperback/9780691004129/normal-accidents" target="_blank" rel="noopener noreferrer"><em>Normal Accidents: Living with High-Risk Technologies.</em></a> Princeton University Press (Updated Edition).</li>
                        <li id="ref11">Weick, K. E., &amp; Sutcliffe, K. M. (2007). <a href="https://www.wiley.com/en-us/Managing+the+Unexpected:+Sustained+Performance+in+a+Complex+World,+3rd+Edition-p-9781118862414" target="_blank" rel="noopener noreferrer"><em>Managing the Unexpected: Resilient Performance in an Age of Uncertainty.</em></a> 2nd Edition. Jossey-Bass.</li>
                        <li id="ref12">Leveson, N. (2011). <a href="https://mitpress.mit.edu/9780262533690/engineering-a-safer-world/" target="_blank" rel="noopener noreferrer"><em>Engineering a Safer World: Systems Thinking Applied to Safety.</em></a> MIT Press.</li>
                        <li id="ref13">Turner, B. A. (1978). <a href="https://books.google.com/books/about/Man_made_Disasters.html?id=7Hq6AAAAIAAJ" target="_blank" rel="noopener noreferrer"><em>Man-Made Disasters.</em></a> Wykeham Publications.</li>
                        <li id="ref14">IAEA. (2016). <a href="https://www.iaea.org/publications/11070/leadership-and-management-for-safety" target="_blank" rel="noopener noreferrer"><em>Leadership and Management for Safety.</em></a> IAEA Safety Standards Series No. GSR Part 2.</li>
                        <li id="ref15">ICAO. (2018). <a href="https://store.icao.int/en/safety-management-manual-doc-9859" target="_blank" rel="noopener noreferrer"><em>Safety Management Manual (SMM).</em></a> Doc 9859, 4th Edition.</li>
                        <li id="ref16">Westrum, R. (2004). <a href="https://doi.org/10.1136/qshc.2003.009522" target="_blank" rel="noopener noreferrer">"A Typology of Organisational Cultures."</a> <em>Quality &amp; Safety in Health Care</em>, 13(suppl 2), ii22-ii27.</li>
                    </ol>
                </div>

                <!-- Newsletter Signup -->
                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new articles on data center operations and engineering excellence are published.</p>
                    <form class="newsletter-form" onsubmit="return subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
                </div>

                <!-- Author Bio -->
                <div class="author-bio">
                    <div class="author-bio-image">
                        <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana">
                    </div>
                    <div class="author-bio-content">
                        <h4>Bagus Dwi Permana</h4>
                        <p class="author-bio-title">Engineering Operations Manager | Ahli K3 Listrik</p>
                        <p>12+ years professional experience in critical infrastructure and operations. CDFOM certified. Transforming operations through systematic excellence and safety-first engineering.</p>
                        <div class="author-bio-links">
                            <a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </a>
                            <a href="https://github.com/baguspermana7-cpu" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                GitHub
                            </a>
                            <a href="mailto:baguspermana7@gmail.com">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="related-articles">
                    <h3>Continue Reading</h3>
                    <div class="related-grid">
                        <a href="article-7.html" class="related-card">
                            <div class="related-card-number">07</div>
                            <div class="related-card-content">
                                <h4>From Reliability to Resilience: Why Tier Ratings Stop at Design</h4>
                                <p>Beyond design ratings to operational resilience</p>
                            </div>
                        </a>
                        <a href="article-1.html" class="related-card">
                            <div class="related-card-number">01</div>
                            <div class="related-card-content">
                                <h4>When Nothing Happens, Engineering Is Working</h4>
                                <p>The invisible work of reliability engineering</p>
                            </div>
                        </a>
                        <a href="article-6.html" class="related-card">
                            <div class="related-card-number">06</div>
                            <div class="related-card-content">
                                <h4>Why Post-Incident RCA Fails Without Design Authority</h4>
                                <p>Root cause analysis methodology for critical facilities</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Article Navigation -->
                <div class="article-nav">
                    <a href="article-7.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                        Previous Article
                    </a>
                    <a href="article-9.html">
                        Next Article
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>

            </div>
        </div>
    </article>

    </main>

    <!-- Footer -->
    <footer class="footer footer-enhanced">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <p class="footer-tagline-main">BUILT FOR MISSION CRITICAL INFRASTRUCTURE<br>MANAGEMENT // 2026</p>
                    <p class="footer-tagline-sub">ALL OPERATIONAL DATASETS PRESERVED.</p>
                    <p class="footer-copyright">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p>
                </div>
                <div class="footer-nav">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home Dashboard</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="index.html#case-studies">Case Studies</a></li>
                        <li><a href="datacenter-solutions.html">DC Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4 class="footer-heading">CONNECT</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank" rel="noopener">LinkedIn Profile</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="mailto:baguspermana7@gmail.com">Direct Contact</a></li>
                        <li><a href="https://github.com/baguspermana7-cpu" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Share Buttons - Floating Sidebar -->
    <aside class="share-buttons" id="shareButtons" aria-label="Share this article">
        <span class="share-label">Share</span>
        <button class="share-btn linkedin" data-tooltip="Share on LinkedIn" onclick="shareLinkedIn()" aria-label="Share on LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </button>
        <button class="share-btn twitter" data-tooltip="Share on X" onclick="shareTwitter()" aria-label="Share on X"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></button>
        <button class="share-btn whatsapp" data-tooltip="Share on WhatsApp" onclick="shareWhatsApp()" aria-label="Share on WhatsApp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></button>
        <button class="share-btn copy" data-tooltip="Copy link" onclick="copyLink()" aria-label="Copy article link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="copy-icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="check-icon" style="display:none"><polyline points="20 6 9 17 4 12"></polyline></svg>
        </button>
    </aside>

    <script src="script.min.js?v=20260225"></script>
    <script>
    // Share Buttons Functions
    (function(){const s=document.getElementById('shareButtons'),h=document.querySelector('.article-hero');if(s&&h){document.body.classList.add('has-share-buttons');new IntersectionObserver(e=>e.forEach(x=>s.classList.toggle('visible',!x.isIntersecting)),{threshold:.1}).observe(h)}})();
    function getShareData(){return{title:document.querySelector('meta[property="og:title"]')?.content||document.title,url:window.location.href}}
    function shareLinkedIn(){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(getShareData().url)}`,'_blank','width=600,height=600')}
    function shareTwitter(){const d=getShareData();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(d.title+' by @BagusDPermana')}&url=${encodeURIComponent(d.url)}`,'_blank','width=600,height=400')}
    function shareWhatsApp(){const d=getShareData();window.open(`https://wa.me/?text=${encodeURIComponent(d.title+'\n\n'+d.url)}`,'_blank')}
    function copyLink(){const b=document.querySelector('.share-btn.copy'),c=b.querySelector('.copy-icon'),k=b.querySelector('.check-icon');navigator.clipboard.writeText(window.location.href).then(()=>{b.classList.add('copied');c.style.display='none';k.style.display='block';b.setAttribute('data-tooltip','Copied!');setTimeout(()=>{b.classList.remove('copied');c.style.display='block';k.style.display='none';b.setAttribute('data-tooltip','Copy link')},2000)})}
    </script>

    <!-- Interactive Chart Script -->
    <script>
    (function() {
        const canvas = document.getElementById('safetyHealthChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const driftSlider = document.getElementById('driftSlider');
        const suppressionSlider = document.getElementById('suppressionSlider');
        const driftValue = document.getElementById('driftValue');
        const suppressionValue = document.getElementById('suppressionValue');
        const chartGap = document.getElementById('chartGap');
        const chartDrift = document.getElementById('chartDrift');
        const chartRisk = document.getElementById('chartRisk');
        const chartTime = document.getElementById('chartTime');

        const dpr = window.devicePixelRatio || 1;
        function setupCanvas() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            return rect;
        }
        let rect = setupCanvas();
        const padding = { top: 50, right: 60, bottom: 60, left: 80 };

        function simulate(drift, suppression) {
            let perceived = [], actual = [];
            let p = 92, a = 88;
            for (let i = 0; i < 24; i++) {
                p = Math.max(60, p - (drift * 0.005) + (suppression * 0.01));
                a = Math.max(10, a - (drift * 0.12) - (suppression * 0.05));
                perceived.push(p);
                actual.push(a);
            }
            return { perceived, actual };
        }

        function drawChart() {
            const drift = parseInt(driftSlider.value);
            const suppression = parseInt(suppressionSlider.value);
            driftValue.textContent = drift + '%';
            suppressionValue.textContent = suppression + '%';

            const W = rect.width, H = rect.height;
            const chartW = W - padding.left - padding.right;
            const chartH = H - padding.top - padding.bottom;
            ctx.clearRect(0, 0, W, H);

            // Grid
            ctx.strokeStyle = 'rgba(148, 163, 184, 0.15)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                ctx.beginPath(); ctx.moveTo(padding.left, y); ctx.lineTo(W - padding.right, y); ctx.stroke();
            }

            // Critical threshold
            const threshY = padding.top + chartH - (40 / 100) * chartH;
            ctx.fillStyle = 'rgba(239, 68, 68, 0.08)';
            ctx.fillRect(padding.left, threshY, chartW, padding.top + chartH - threshY);
            ctx.strokeStyle = 'rgba(239, 68, 68, 0.5)';
            ctx.setLineDash([6, 6]);
            ctx.beginPath(); ctx.moveTo(padding.left, threshY); ctx.lineTo(W - padding.right, threshY); ctx.stroke();
            ctx.setLineDash([]);
            ctx.fillStyle = '#ef4444'; ctx.font = '11px Inter, sans-serif'; ctx.textAlign = 'left';
            ctx.fillText('Critical Threshold (40%)', padding.left + 10, threshY - 6);

            // Y-axis labels
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)'; ctx.font = '12px Inter, sans-serif'; ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                ctx.fillText(100 - i * 20, padding.left - 10, y + 4);
            }

            // X-axis labels
            ctx.textAlign = 'center'; ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            for (let i = 0; i < 24; i += 3) {
                const x = padding.left + (chartW / 23) * i;
                ctx.fillText('M' + (i + 1), x, H - padding.bottom + 25);
            }
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Time (Months)', W / 2, H - 15);

            const { perceived, actual } = simulate(drift, suppression);

            // Draw perceived (green)
            ctx.strokeStyle = '#22c55e'; ctx.lineWidth = 3; ctx.lineCap = 'round'; ctx.lineJoin = 'round';
            ctx.beginPath();
            perceived.forEach((v, i) => {
                const x = padding.left + (chartW / 23) * i;
                const y = padding.top + chartH - (v / 100) * chartH;
                i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
            });
            ctx.stroke();

            // Draw actual (purple)
            ctx.strokeStyle = '#8b5cf6';
            ctx.beginPath();
            actual.forEach((v, i) => {
                const x = padding.left + (chartW / 23) * i;
                const y = padding.top + chartH - (v / 100) * chartH;
                i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
            });
            ctx.stroke();

            // Points
            [{ data: perceived, color: '#22c55e' }, { data: actual, color: '#8b5cf6' }].forEach(({ data, color }) => {
                ctx.fillStyle = color;
                data.forEach((v, i) => {
                    if (i % 3 === 0) {
                        const x = padding.left + (chartW / 23) * i;
                        const y = padding.top + chartH - (v / 100) * chartH;
                        ctx.beginPath(); ctx.arc(x, y, 3.5, 0, Math.PI * 2); ctx.fill();
                    }
                });
            });

            // End labels
            const lp = perceived[23], la = actual[23];
            ctx.font = 'bold 11px Inter, sans-serif'; ctx.textAlign = 'left';
            ctx.fillStyle = '#22c55e'; ctx.fillText(Math.round(lp) + '%', W - padding.right + 8, padding.top + chartH - (lp / 100) * chartH + 4);
            ctx.fillStyle = '#8b5cf6'; ctx.fillText(Math.round(la) + '%', W - padding.right + 8, padding.top + chartH - (la / 100) * chartH + 4);

            // Callouts
            const gap = Math.round(lp - la);
            chartGap.textContent = gap + '%';
            if (la < 30) { chartDrift.textContent = 'Critical'; chartDrift.style.color = '#ef4444'; chartRisk.textContent = 'Imminent'; chartRisk.style.color = '#ef4444'; }
            else if (la < 50) { chartDrift.textContent = 'High'; chartDrift.style.color = '#f59e0b'; chartRisk.textContent = 'Elevated'; chartRisk.style.color = '#f59e0b'; }
            else { chartDrift.textContent = 'Moderate'; chartDrift.style.color = '#8b5cf6'; chartRisk.textContent = 'Latent'; chartRisk.style.color = '#8b5cf6'; }
            // Time to boundary estimate
            if (la <= 40) chartTime.textContent = 'NOW';
            else { const moLeft = Math.round((la - 40) / ((88 - la) / 24 || 1)); chartTime.textContent = '~' + Math.max(1, Math.min(moLeft, 36)) + ' mo'; }
        }

        driftSlider.addEventListener('input', drawChart);
        suppressionSlider.addEventListener('input', drawChart);
        drawChart();
        window.addEventListener('resize', () => { rect = setupCanvas(); drawChart(); });
    })();
    </script>

    <!-- Safety Health Index Calculator Script -->
    <script>
    (function() {
        const ids = ['calcNearMiss','calcWeakSignals','calcAudit','calcTraining','calcDays','calcWalks','calcHazard','calcMeeting'];
        const meetingMap = { 'None': 0, 'Monthly': 40, 'Bi-weekly': 70, 'Weekly': 100 };
        const dimLabels = ['Near-Miss','Weak Signals','Audit Health','Training','Walkarounds','Hazard Rate','Meetings'];

        function calculate() {
            const reports = parseFloat(document.getElementById('calcNearMiss').value) || 0;
            const signals = parseFloat(document.getElementById('calcWeakSignals').value) || 0;
            const findings = parseFloat(document.getElementById('calcAudit').value) || 0;
            const hours = parseFloat(document.getElementById('calcTraining').value) || 0;
            const days = parseFloat(document.getElementById('calcDays').value) || 0;
            const walks = parseFloat(document.getElementById('calcWalks').value) || 0;
            const hazardRate = parseFloat(document.getElementById('calcHazard').value) || 0;
            const freq = document.getElementById('calcMeeting').value;

            // Calculate dimension scores (raw 0-100)
            const nearMissRaw = Math.min(100, (reports / 10) * 100);
            const weakSignalRaw = Math.min(100, (signals / 15) * 100);
            const auditRaw = Math.max(0, (1 - findings / 30) * 100);
            const trainingRaw = Math.min(100, (hours / 20) * 100);
            const walkRaw = Math.min(100, (walks / 8) * 100);
            const hazardRaw = hazardRate;
            const meetingRaw = meetingMap[freq] || 0;

            // Weighted scores
            const nearMissScore = nearMissRaw * 0.15;
            const weakSignalScore = weakSignalRaw * 0.15;
            const auditScore = auditRaw * 0.10;
            const trainingScore = trainingRaw * 0.15;
            const walkScore = walkRaw * 0.10;
            const hazardScore = hazardRaw * 0.20;
            const meetingScore = meetingRaw * 0.15;

            const totalScore = nearMissScore + weakSignalScore + auditScore + trainingScore + walkScore + hazardScore + meetingScore;
            const dimScores = [nearMissRaw, weakSignalRaw, auditRaw, trainingRaw, walkRaw, hazardRaw, meetingRaw];

            // Drift probability (PARADOX logic)
            let drift;
            if (days > 180 && totalScore < 50) {
                drift = 0.6 + (days / 1000) * 0.3;
            } else if (days > 365 && totalScore < 70) {
                drift = 0.3 + (days / 2000) * 0.3;
            } else {
                drift = Math.max(0.05, 0.4 - totalScore / 250);
            }
            drift = Math.min(drift, 0.99);

            // Culture type
            let culture, cultureClass;
            if (totalScore >= 80) { culture = 'Generative'; cultureClass = 'generative'; }
            else if (totalScore >= 55) { culture = 'Bureaucratic'; cultureClass = 'bureaucratic'; }
            else { culture = 'Pathological'; cultureClass = 'pathological'; }

            // Trajectory
            let trajectory, trajClass, trajArrow;
            if (drift > 0.5) { trajectory = 'Deteriorating'; trajClass = 'deteriorating'; trajArrow = '&#9660;'; }
            else if (drift > 0.25) { trajectory = 'Stagnant'; trajClass = 'stagnant'; trajArrow = '&#9654;'; }
            else { trajectory = 'Improving'; trajClass = 'improving'; trajArrow = '&#9650;'; }

            // Update display
            document.getElementById('resultScore').textContent = Math.round(totalScore);
            document.getElementById('resultScore').style.color = totalScore >= 80 ? '#34d399' : totalScore >= 55 ? '#fbbf24' : '#f87171';
            document.getElementById('resultDrift').textContent = (drift * 100).toFixed(1) + '%';
            document.getElementById('resultCulture').textContent = culture;
            document.getElementById('cultureBadge').innerHTML = '<span class="culture-badge ' + cultureClass + '">' + culture + '</span>';
            document.getElementById('resultTrajectory').textContent = trajectory;
            document.getElementById('trajectoryIndicator').innerHTML = '<span class="trajectory-arrow ' + trajClass + '">' + trajArrow + '</span><span style="color:#94a3b8;font-size:0.8rem;">' + trajectory + '</span>';

            // Dimension bars
            const barsContainer = document.getElementById('dimensionBars');
            let barsHtml = '';
            dimLabels.forEach((label, i) => {
                const val = Math.round(dimScores[i]);
                const barColor = val >= 70 ? '#10b981' : val >= 40 ? '#f59e0b' : '#ef4444';
                barsHtml += '<div class="dimension-bar-group"><div class="dimension-bar-label">' + label + '</div><div class="dimension-bar-track"><div class="dimension-bar-fill" style="width:' + val + '%;background:' + barColor + ';"></div></div><div class="dimension-bar-value">' + val + '%</div></div>';
            });
            barsContainer.innerHTML = barsHtml;

            // Paradox warning
            const paradoxEl = document.getElementById('paradoxWarning');
            if (days > 365 && totalScore < 60) {
                paradoxEl.classList.add('visible');
                document.getElementById('paradoxText').textContent = 'Your facility has been incident-free for ' + days + ' days, but your Safety Health Index is only ' + Math.round(totalScore) + '/100. This is the exact paradox described by Rasmussen (1997): extended incident-free periods masking systemic drift toward safety boundaries. The drift probability is ' + (drift * 100).toFixed(1) + '%. Immediate review of all leading indicators is strongly recommended.';
            } else {
                paradoxEl.classList.remove('visible');
            }

            // Recommendations
            const recEl = document.getElementById('recommendations');
            const recList = document.getElementById('recList');
            let recs = [];
            if (nearMissRaw < 50) recs.push('Increase near-miss reporting: current rate of ' + reports + '/month suggests reporting suppression. Target: 10+/month.');
            if (weakSignalRaw < 50) recs.push('Implement structured weak signal capture: only ' + signals + ' signals/month documented. Target: 15+/month.');
            if (auditRaw < 50) recs.push('Reduce open audit findings: ' + findings + ' open items indicates overloaded closure capacity. Target: <5.');
            if (trainingRaw < 50) recs.push('Increase safety training: ' + hours + ' hrs/quarter is below minimum. Target: 20 hrs/quarter.');
            if (walkRaw < 50) recs.push('Increase management walkarounds: only ' + walks + '/month. Target: 8/month for leadership visibility.');
            if (hazardRaw < 70) recs.push('Improve hazard action close rate: ' + hazardRate + '% is below target. Aim for 85%+ within SLA.');
            if (meetingRaw < 70) recs.push('Increase safety meeting frequency to at least bi-weekly (currently: ' + freq + ').');
            if (recs.length > 0) {
                recEl.style.display = 'block';
                recList.innerHTML = recs.map(r => '<li>' + r + '</li>').join('');
            } else {
                recEl.style.display = 'none';
            }

            // Draw gauge
            drawGauge(totalScore);
        }

        function drawGauge(score) {
            const gc = document.getElementById('gaugeCanvas');
            if (!gc) return;
            const gctx = gc.getContext('2d');
            const w = 280, h = 160;
            gc.width = w * (window.devicePixelRatio || 1);
            gc.height = h * (window.devicePixelRatio || 1);
            gctx.scale(window.devicePixelRatio || 1, window.devicePixelRatio || 1);
            gc.style.width = w + 'px';
            gc.style.height = h + 'px';
            gctx.clearRect(0, 0, w, h);

            const cx = w / 2, cy = h - 20, r = 100;
            const startAngle = Math.PI, endAngle = 2 * Math.PI;

            // Background arc
            gctx.lineWidth = 16; gctx.lineCap = 'round';
            gctx.strokeStyle = 'rgba(255,255,255,0.1)';
            gctx.beginPath(); gctx.arc(cx, cy, r, startAngle, endAngle); gctx.stroke();

            // Score arc
            const scoreAngle = startAngle + (score / 100) * Math.PI;
            const gradient = gctx.createLinearGradient(cx - r, cy, cx + r, cy);
            gradient.addColorStop(0, '#ef4444');
            gradient.addColorStop(0.5, '#f59e0b');
            gradient.addColorStop(1, '#10b981');
            gctx.strokeStyle = gradient;
            gctx.beginPath(); gctx.arc(cx, cy, r, startAngle, scoreAngle); gctx.stroke();

            // Needle
            const needleAngle = startAngle + (score / 100) * Math.PI;
            const nx = cx + Math.cos(needleAngle) * (r - 25);
            const ny = cy + Math.sin(needleAngle) * (r - 25);
            gctx.strokeStyle = '#fff'; gctx.lineWidth = 2;
            gctx.beginPath(); gctx.moveTo(cx, cy); gctx.lineTo(nx, ny); gctx.stroke();
            gctx.fillStyle = '#fff'; gctx.beginPath(); gctx.arc(cx, cy, 6, 0, Math.PI * 2); gctx.fill();

            // Score text
            gctx.fillStyle = '#fff'; gctx.font = 'bold 28px Inter, sans-serif'; gctx.textAlign = 'center';
            gctx.fillText(Math.round(score), cx, cy - 15);
            gctx.fillStyle = '#94a3b8'; gctx.font = '12px Inter, sans-serif';
            gctx.fillText('Safety Health Index', cx, cy + 2);

            // Labels
            gctx.fillStyle = '#ef4444'; gctx.font = '10px Inter, sans-serif'; gctx.textAlign = 'left';
            gctx.fillText('0', cx - r - 5, cy + 16);
            gctx.fillStyle = '#10b981'; gctx.textAlign = 'right';
            gctx.fillText('100', cx + r + 5, cy + 16);
        }

        // Event listeners
        ids.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('input', calculate);
            if (el) el.addEventListener('change', calculate);
        });
        calculate();
    })();
    </script>
<script>
// === PRO ENHANCEMENT MODE — Safety Health Index ===
(function() {
    'use strict';

    // --- Config ---
    const DEFAULTS = { nearMiss:3, weakSignals:5, audit:12, training:8, days:365, walks:2, hazard:60, meeting:'Monthly' };
    const WEIGHTS = [0.15, 0.15, 0.10, 0.15, 0.10, 0.20, 0.15];
    const DIM_LABELS = ['Near-Miss','Weak Signals','Audit Health','Training','Walkarounds','Hazard Rate','Meetings'];
    const MEETING_MAP = { 'None':0, 'Monthly':40, 'Bi-weekly':70, 'Weekly':100 };
    let proMode = false, isAuthenticated = false;

    // --- Core Calculation Helper ---
    function shiCalcScore(v) {
        const dims = [
            Math.min(100, (v.nearMiss/10)*100),
            Math.min(100, (v.weakSignals/15)*100),
            Math.max(0, (1 - v.audit/30)*100),
            Math.min(100, (v.training/20)*100),
            Math.min(100, (v.walks/8)*100),
            v.hazard,
            MEETING_MAP[v.meeting]||0
        ];
        const total = dims.reduce((s,d,i) => s + d*WEIGHTS[i], 0);
        return { dims, total };
    }

    function getInputs() {
        return {
            nearMiss: parseFloat(document.getElementById('calcNearMiss').value)||0,
            weakSignals: parseFloat(document.getElementById('calcWeakSignals').value)||0,
            audit: parseFloat(document.getElementById('calcAudit').value)||0,
            training: parseFloat(document.getElementById('calcTraining').value)||0,
            days: parseFloat(document.getElementById('calcDays').value)||0,
            walks: parseFloat(document.getElementById('calcWalks').value)||0,
            hazard: parseFloat(document.getElementById('calcHazard').value)||0,
            meeting: document.getElementById('calcMeeting').value
        };
    }

    // --- Monte Carlo (10K iterations) ---
    function runMonteCarlo(base) {
        const results = [];
        for (let i = 0; i < 10000; i++) {
            const noisy = {
                nearMiss: Math.max(0, base.nearMiss * (0.85 + Math.random()*0.3)),
                weakSignals: Math.max(0, base.weakSignals * (0.85 + Math.random()*0.3)),
                audit: Math.max(0, base.audit * (0.85 + Math.random()*0.3)),
                training: Math.max(0, base.training * (0.85 + Math.random()*0.3)),
                days: base.days,
                walks: Math.max(0, base.walks * (0.85 + Math.random()*0.3)),
                hazard: Math.min(100, Math.max(0, base.hazard * (0.85 + Math.random()*0.3))),
                meeting: base.meeting
            };
            results.push(shiCalcScore(noisy).total);
        }
        results.sort((a,b) => a-b);
        return {
            p5: results[499], p25: results[2499], p50: results[4999],
            p75: results[7499], p95: results[9499], mean: results.reduce((a,b)=>a+b,0)/10000,
            all: results
        };
    }

    // --- Sensitivity Tornado ---
    function runSensitivity(base) {
        const baseScore = shiCalcScore(base).total;
        const keys = ['nearMiss','weakSignals','audit','training','walks','hazard'];
        const labels = ['Near-Miss Rate','Weak Signals','Audit Findings','Training Hours','Walkarounds','Hazard Action %'];
        const deltas = [];
        keys.forEach((k, i) => {
            const lo = {...base}; lo[k] = base[k] * 0.8;
            const hi = {...base}; hi[k] = base[k] * 1.2;
            if (k === 'hazard') { lo[k] = Math.max(0, lo[k]); hi[k] = Math.min(100, hi[k]); }
            const scoreLo = shiCalcScore(lo).total;
            const scoreHi = shiCalcScore(hi).total;
            deltas.push({ label: labels[i], low: scoreLo - baseScore, high: scoreHi - baseScore, range: Math.abs(scoreHi - scoreLo) });
        });
        deltas.sort((a,b) => b.range - a.range);
        return deltas;
    }

    // --- Narrative Generator ---
    function generateNarrative(inputs, score, dims) {
        let stage, risk, narrative = '';
        if (score >= 85) { stage = 'Generative (HRO)'; risk = 'Low'; }
        else if (score >= 70) { stage = 'Proactive'; risk = 'Moderate'; }
        else if (score >= 55) { stage = 'Bureaucratic-Calculative'; risk = 'Elevated'; }
        else if (score >= 35) { stage = 'Reactive'; risk = 'High'; }
        else { stage = 'Pathological'; risk = 'Critical'; }

        narrative += 'Your facility operates at the "' + stage + '" maturity level with an overall Safety Health Index of ' + score.toFixed(1) + '/100. ';

        if (inputs.days > 365 && score < 60) {
            narrative += 'CRITICAL PARADOX: ' + inputs.days + ' incident-free days combined with a score of ' + score.toFixed(0) + ' indicates classic Rasmussen drift-to-failure. The absence of incidents is masking systemic degradation. ';
        }

        // Identify weakest dimensions
        const indexed = dims.map((d,i) => ({score:d, label:DIM_LABELS[i]})).sort((a,b) => a.score - b.score);
        narrative += 'Your weakest dimensions are ' + indexed[0].label + ' (' + indexed[0].score.toFixed(0) + '%) and ' + indexed[1].label + ' (' + indexed[1].score.toFixed(0) + '%). ';

        if (risk === 'Critical' || risk === 'High') {
            narrative += 'Immediate intervention is recommended: establish mandatory near-miss reporting, increase management walkarounds to weekly, and implement rapid audit finding closure protocols. ';
        } else if (risk === 'Elevated') {
            narrative += 'Focus on transitioning from compliance-based safety to proactive detection. Increase weak signal capture mechanisms and ensure all safety meetings produce actionable outcomes. ';
        } else if (risk === 'Moderate') {
            narrative += 'Continue strengthening leading indicators. Consider implementing cross-functional safety reviews and expanding the weak signal taxonomy to capture more subtle precursors. ';
        } else {
            narrative += 'Your organization demonstrates generative safety culture characteristics. Maintain vigilance and continue investing in leading indicators to sustain this level. ';
        }

        return narrative;
    }

    // --- Draw Radar Chart ---
    function drawRadarChart(dims) {
        const canvas = document.getElementById('shiRadarChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;
        const W = canvas.parentElement.offsetWidth || 400;
        const H = 280;
        canvas.width = W * dpr; canvas.height = H * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.clearRect(0, 0, W, H);

        const cx = W/2, cy = H/2 + 10, R = Math.min(W, H)/2 - 40;
        const n = 7, angleStep = (2*Math.PI)/n, startAngle = -Math.PI/2;
        const benchmarks = [100, 100, 100, 100, 100, 85, 100];

        // Grid circles
        [0.2, 0.4, 0.6, 0.8, 1.0].forEach(function(f) {
            ctx.beginPath();
            for (var i = 0; i <= n; i++) {
                var a = startAngle + i * angleStep;
                var x = cx + Math.cos(a) * R * f;
                var y = cy + Math.sin(a) * R * f;
                i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
            }
            ctx.strokeStyle = 'rgba(148,163,184,0.15)'; ctx.lineWidth = 1; ctx.stroke();
        });

        // Axis lines + labels
        ctx.font = '10px Inter, sans-serif'; ctx.textAlign = 'center';
        for (var i = 0; i < n; i++) {
            var a = startAngle + i * angleStep;
            var x = cx + Math.cos(a) * R;
            var y = cy + Math.sin(a) * R;
            ctx.strokeStyle = 'rgba(148,163,184,0.2)'; ctx.beginPath();
            ctx.moveTo(cx, cy); ctx.lineTo(x, y); ctx.stroke();
            var lx = cx + Math.cos(a) * (R + 25);
            var ly = cy + Math.sin(a) * (R + 25);
            ctx.fillStyle = '#94a3b8';
            ctx.fillText(DIM_LABELS[i], lx, ly + 3);
        }

        // Benchmark polygon
        ctx.beginPath();
        for (var i = 0; i <= n; i++) {
            var idx = i % n;
            var a = startAngle + idx * angleStep;
            var x = cx + Math.cos(a) * R * (benchmarks[idx]/100);
            var y = cy + Math.sin(a) * R * (benchmarks[idx]/100);
            i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
        }
        ctx.strokeStyle = 'rgba(148,163,184,0.4)'; ctx.setLineDash([4,4]);
        ctx.lineWidth = 1.5; ctx.stroke(); ctx.setLineDash([]);

        // Score polygon
        ctx.beginPath();
        for (var i = 0; i <= n; i++) {
            var idx = i % n;
            var a = startAngle + idx * angleStep;
            var x = cx + Math.cos(a) * R * (dims[idx]/100);
            var y = cy + Math.sin(a) * R * (dims[idx]/100);
            i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
        }
        ctx.fillStyle = 'rgba(139,92,246,0.2)'; ctx.fill();
        ctx.strokeStyle = '#8b5cf6'; ctx.lineWidth = 2; ctx.stroke();

        // Dots
        for (var i = 0; i < n; i++) {
            var a = startAngle + i * angleStep;
            var x = cx + Math.cos(a) * R * (dims[i]/100);
            var y = cy + Math.sin(a) * R * (dims[i]/100);
            ctx.fillStyle = '#8b5cf6'; ctx.beginPath();
            ctx.arc(x, y, 4, 0, Math.PI*2); ctx.fill();
        }
    }

    // --- Draw Waterfall Chart (Cost of Complacency) ---
    function drawWaterfallChart(dims, score) {
        const canvas = document.getElementById('shiWaterfallChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;
        const W = canvas.parentElement.offsetWidth || 400;
        const H = 280;
        canvas.width = W * dpr; canvas.height = H * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.clearRect(0, 0, W, H);

        // Cost model: base $2.5M * risk multiplier per dimension gap
        const baseCost = 2500000;
        const gaps = dims.map(function(d) { return Math.max(0, (100 - d) / 100); });
        const costs = gaps.map(function(g, i) { return Math.round(baseCost * g * WEIGHTS[i] * 1.5); });
        const totalCost = costs.reduce(function(a,b) { return a+b; }, 0);

        const pad = { top: 30, right: 20, bottom: 60, left: 70 };
        const chartW = W - pad.left - pad.right;
        const chartH = H - pad.top - pad.bottom;
        const barW = chartW / (costs.length + 1) - 8;
        const maxCost = Math.max(totalCost, Math.max.apply(null, costs)) * 1.2;

        // Y-axis
        ctx.fillStyle = '#94a3b8'; ctx.font = '10px Inter, sans-serif'; ctx.textAlign = 'right';
        for (var i = 0; i <= 5; i++) {
            var val = (maxCost / 5) * i;
            var y = pad.top + chartH - (val / maxCost) * chartH;
            ctx.fillText('$' + (val/1000).toFixed(0) + 'K', pad.left - 8, y + 3);
            ctx.strokeStyle = 'rgba(148,163,184,0.1)'; ctx.beginPath();
            ctx.moveTo(pad.left, y); ctx.lineTo(W - pad.right, y); ctx.stroke();
        }

        // Bars (waterfall)
        var cumulative = 0;
        costs.forEach(function(cost, i) {
            var x = pad.left + i * (barW + 8) + 4;
            var barH = (cost / maxCost) * chartH;
            var y = pad.top + chartH - (cumulative + cost) / maxCost * chartH;

            var gradient = ctx.createLinearGradient(x, y, x, y + barH);
            gradient.addColorStop(0, 'rgba(139,92,246,0.8)');
            gradient.addColorStop(1, 'rgba(139,92,246,0.4)');
            ctx.fillStyle = gradient;
            ctx.fillRect(x, y, barW, barH);

            // Label
            ctx.fillStyle = '#a78bfa'; ctx.font = '9px Inter, sans-serif'; ctx.textAlign = 'center';
            ctx.fillText('$' + (cost/1000).toFixed(0) + 'K', x + barW/2, y - 5);

            // X label
            ctx.save(); ctx.translate(x + barW/2, pad.top + chartH + 12);
            ctx.rotate(-0.4); ctx.fillStyle = '#94a3b8'; ctx.font = '9px Inter, sans-serif';
            ctx.textAlign = 'left'; ctx.fillText(DIM_LABELS[i], 0, 0); ctx.restore();

            cumulative += cost;
        });

        // Total bar
        var totalX = pad.left + costs.length * (barW + 8) + 4;
        var totalBarH = (totalCost / maxCost) * chartH;
        var totalY = pad.top + chartH - totalBarH;
        ctx.fillStyle = 'rgba(239,68,68,0.6)';
        ctx.fillRect(totalX, totalY, barW, totalBarH);
        ctx.fillStyle = '#f87171'; ctx.font = 'bold 10px Inter, sans-serif'; ctx.textAlign = 'center';
        ctx.fillText('$' + (totalCost/1000).toFixed(0) + 'K', totalX + barW/2, totalY - 5);
        ctx.save(); ctx.translate(totalX + barW/2, pad.top + chartH + 12);
        ctx.rotate(-0.4); ctx.fillStyle = '#f87171'; ctx.font = 'bold 9px Inter, sans-serif';
        ctx.textAlign = 'left'; ctx.fillText('TOTAL RISK', 0, 0); ctx.restore();
    }

    // --- Draw Monte Carlo Histogram ---
    function drawMonteChart(mc) {
        const canvas = document.getElementById('shiMonteChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;
        const W = canvas.parentElement.offsetWidth || 400;
        const H = 280;
        canvas.width = W * dpr; canvas.height = H * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.clearRect(0, 0, W, H);

        const pad = { top: 30, right: 20, bottom: 40, left: 50 };
        const chartW = W - pad.left - pad.right;
        const chartH = H - pad.top - pad.bottom;

        // Build histogram bins
        const bins = 30;
        const min = Math.floor(mc.p5 - 5);
        const max = Math.ceil(mc.p95 + 5);
        const binWidth = (max - min) / bins;
        const counts = new Array(bins).fill(0);
        mc.all.forEach(function(v) {
            var idx = Math.min(bins - 1, Math.max(0, Math.floor((v - min) / binWidth)));
            counts[idx]++;
        });
        const maxCount = Math.max.apply(null, counts);

        // Draw bars
        const barW = chartW / bins - 1;
        counts.forEach(function(c, i) {
            var x = pad.left + i * (chartW / bins);
            var barH = (c / maxCount) * chartH;
            var y = pad.top + chartH - barH;
            var binCenter = min + (i + 0.5) * binWidth;

            var color;
            if (binCenter < 40) color = 'rgba(239,68,68,0.6)';
            else if (binCenter < 60) color = 'rgba(245,158,11,0.6)';
            else if (binCenter < 80) color = 'rgba(139,92,246,0.6)';
            else color = 'rgba(16,185,129,0.6)';

            ctx.fillStyle = color;
            ctx.fillRect(x, y, barW, barH);
        });

        // P5, P50, P95 lines
        var drawLine = function(val, label, color) {
            var x = pad.left + ((val - min) / (max - min)) * chartW;
            ctx.strokeStyle = color; ctx.lineWidth = 2; ctx.setLineDash([4,3]);
            ctx.beginPath(); ctx.moveTo(x, pad.top); ctx.lineTo(x, pad.top + chartH); ctx.stroke();
            ctx.setLineDash([]); ctx.fillStyle = color; ctx.font = 'bold 10px Inter, sans-serif';
            ctx.textAlign = 'center'; ctx.fillText(label + ': ' + val.toFixed(1), x, pad.top - 8);
        };
        drawLine(mc.p5, 'P5', '#ef4444');
        drawLine(mc.p50, 'P50', '#8b5cf6');
        drawLine(mc.p95, 'P95', '#10b981');

        // X-axis labels
        ctx.fillStyle = '#94a3b8'; ctx.font = '10px Inter, sans-serif'; ctx.textAlign = 'center';
        for (var i = 0; i <= 5; i++) {
            var val = min + (max - min) * (i / 5);
            var x = pad.left + (i / 5) * chartW;
            ctx.fillText(val.toFixed(0), x, pad.top + chartH + 20);
        }
        ctx.fillText('Safety Health Index Score Distribution', pad.left + chartW/2, pad.top + chartH + 35);
    }

    // --- Update All Pro Panels ---
    function updateProPanels() {
        if (!proMode) return;
        const inputs = getInputs();
        const { dims, total } = shiCalcScore(inputs);

        // Panel 1: Maturity KPIs + Radar
        const matKPIs = document.getElementById('shiMaturityKPIs');
        let stage, stageColor;
        if (total >= 85) { stage = 'Generative (HRO)'; stageColor = '#10b981'; }
        else if (total >= 70) { stage = 'Proactive'; stageColor = '#8b5cf6'; }
        else if (total >= 55) { stage = 'Bureaucratic'; stageColor = '#f59e0b'; }
        else if (total >= 35) { stage = 'Reactive'; stageColor = '#f97316'; }
        else { stage = 'Pathological'; stageColor = '#ef4444'; }

        const gapFromHRO = Math.max(0, 85 - total).toFixed(1);
        const strongDims = dims.filter(function(d) { return d >= 70; }).length;
        const weakDims = dims.filter(function(d) { return d < 40; }).length;
        const avgDim = (dims.reduce(function(a,b) { return a+b; }, 0) / 7).toFixed(1);
        const dimBalance = (100 - (Math.max.apply(null, dims) - Math.min.apply(null, dims))).toFixed(0);

        matKPIs.innerHTML =
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:' + stageColor + '">' + stage + '</div><div class="shi-kpi-label">Westrum Classification</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + gapFromHRO + '</div><div class="shi-kpi-label">Points to HRO Level</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + strongDims + '/7</div><div class="shi-kpi-label">Strong Dimensions (\u226570%)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:#f87171">' + weakDims + '</div><div class="shi-kpi-label">Critical Gaps (&lt;40%)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + avgDim + '%</div><div class="shi-kpi-label">Average Dimension Score</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + dimBalance + '%</div><div class="shi-kpi-label">Dimension Balance Index</div></div>';
        drawRadarChart(dims);
        document.getElementById('shiMaturityNarrative').textContent = generateNarrative(inputs, total, dims);

        // Panel 2: Cost of Complacency
        const costKPIs = document.getElementById('shiCostKPIs');
        const gaps = dims.map(function(d) { return Math.max(0, (100 - d) / 100); });
        const costs = gaps.map(function(g, i) { return Math.round(2500000 * g * WEIGHTS[i] * 1.5); });
        const totalCost = costs.reduce(function(a,b) { return a+b; }, 0);
        const driftProb = inputs.days > 180 && total < 50 ? Math.min(0.99, 0.6 + (inputs.days/1000)*0.3) : Math.max(0.05, 0.4 - total/250);
        const annualExpected = Math.round(totalCost * driftProb);
        const paybackTraining = Math.round(annualExpected / (inputs.training > 0 ? inputs.training * 200 : 1));

        costKPIs.innerHTML =
            '<div class="shi-kpi-card"><div class="shi-kpi-value">$' + (totalCost/1000).toFixed(0) + 'K</div><div class="shi-kpi-label">Total Risk Exposure</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + (driftProb*100).toFixed(1) + '%</div><div class="shi-kpi-label">Annual Drift Probability</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">$' + (annualExpected/1000).toFixed(0) + 'K</div><div class="shi-kpi-label">Expected Annual Loss</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + paybackTraining + 'x</div><div class="shi-kpi-label">Training ROI Multiplier</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">$' + ((totalCost - annualExpected)/1000).toFixed(0) + 'K</div><div class="shi-kpi-label">Preventable Losses</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + Math.round(inputs.days * driftProb) + '</div><div class="shi-kpi-label">Est. Days to Incident</div></div>';
        drawWaterfallChart(dims, total);

        // Panel 3: Sensitivity Tornado
        const sensitivity = runSensitivity(inputs);
        const tornadoDiv = document.getElementById('shiTornadoBars');
        const maxRange = Math.max.apply(null, sensitivity.map(function(s) { return s.range; }));
        tornadoDiv.innerHTML = sensitivity.map(function(s) {
            var pct = maxRange > 0 ? (s.range / maxRange * 100) : 0;
            return '<div class="shi-sensitivity-bar">' +
                '<div class="shi-sensitivity-label">' + s.label + '</div>' +
                '<div class="shi-sensitivity-track"><div class="shi-sensitivity-fill" style="width:' + pct + '%;background:linear-gradient(90deg,#8b5cf6,#a78bfa);"></div></div>' +
                '<div class="shi-sensitivity-value">\u00b1' + s.range.toFixed(1) + '</div>' +
            '</div>';
        }).join('');

        var topDriver = sensitivity[0];
        document.getElementById('shiSensitivityNarrative').textContent =
            'The most influential input is "' + topDriver.label + '" with a \u00b1' + topDriver.range.toFixed(1) + ' point impact on the Safety Health Index when varied by \u00b120%. ' +
            'This means improving ' + topDriver.label + ' will yield the highest return on safety investment. ' +
            (sensitivity[1] ? 'The second most impactful factor is "' + sensitivity[1].label + '" (\u00b1' + sensitivity[1].range.toFixed(1) + ' points). ' : '') +
            'Focus improvement efforts on these high-leverage dimensions for maximum safety culture advancement.';

        // Panel 4: Monte Carlo
        const mc = runMonteCarlo(inputs);
        const monteKPIs = document.getElementById('shiMonteKPIs');
        const confInterval = mc.p95 - mc.p5;
        const belowCritical = (mc.all.filter(function(v) { return v < 40; }).length / 100).toFixed(1);
        const aboveHRO = (mc.all.filter(function(v) { return v >= 85; }).length / 100).toFixed(1);

        monteKPIs.innerHTML =
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + mc.p5.toFixed(1) + '</div><div class="shi-kpi-label">P5 (Worst Case)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:#a78bfa">' + mc.p50.toFixed(1) + '</div><div class="shi-kpi-label">P50 (Median)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:#10b981">' + mc.p95.toFixed(1) + '</div><div class="shi-kpi-label">P95 (Best Case)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value">' + confInterval.toFixed(1) + '</div><div class="shi-kpi-label">90% Confidence Width</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:#ef4444">' + belowCritical + '%</div><div class="shi-kpi-label">P(Below Critical 40)</div></div>' +
            '<div class="shi-kpi-card"><div class="shi-kpi-value" style="color:#10b981">' + aboveHRO + '%</div><div class="shi-kpi-label">P(HRO Level \u226585)</div></div>';
        drawMonteChart(mc);

        document.getElementById('shiMonteNarrative').textContent =
            'Based on 10,000 Monte Carlo iterations with \u00b115% parameter uncertainty, your Safety Health Index has a 90% confidence interval of [' + mc.p5.toFixed(1) + ', ' + mc.p95.toFixed(1) + ']. ' +
            'The median outcome is ' + mc.p50.toFixed(1) + ', with ' + belowCritical + '% probability of falling below the critical threshold of 40. ' +
            (parseFloat(belowCritical) > 10 ? 'This indicates significant downside risk \u2014 even small variations in your safety practices could push you into the danger zone. ' : '') +
            'There is a ' + aboveHRO + '% chance of achieving HRO-level performance (\u226585) under current conditions.';
    }

    // --- Mode Switching ---
    window.shiSetMode = function(mode) {
        var freeBtn = document.querySelector('.shi-btn-free');
        var proBtn = document.querySelector('.shi-btn-pro');
        var container = document.getElementById('shiProContainer');

        if (mode === 'pro') {
            if (!isAuthenticated) { shiShowLogin(); return; }
            proMode = true;
            freeBtn.classList.remove('active');
            proBtn.classList.add('active');
            container.classList.add('visible');
            updateProPanels();
        } else {
            proMode = false;
            proBtn.classList.remove('active');
            freeBtn.classList.add('active');
            container.classList.remove('visible');
        }
    };

    // --- Panel Unlock ---
    function unlockPanels() {
        document.querySelectorAll('.shi-pro-panel.gated').forEach(function(p) {
            p.classList.remove('gated');
            var overlay = p.querySelector('.shi-gate-overlay');
            if (overlay) overlay.style.display = 'none';
        });
    }
    function lockPanels() {
        document.querySelectorAll('.shi-pro-panel').forEach(function(p) {
            p.classList.add('gated');
            var overlay = p.querySelector('.shi-gate-overlay');
            if (overlay) overlay.style.display = '';
        });
    }

    // --- Auth ---
    function checkAuth() {
        try {
            var sess = JSON.parse(localStorage.getItem('rz_premium_session'));
            if (sess && sess.tier === 'pro' && new Date(sess.expires) > new Date()) {
                isAuthenticated = true;
                unlockPanels();
                return true;
            }
        } catch(e) {}
        isAuthenticated = false;
        return false;
    }

    window.shiShowLogin = function() {
        document.getElementById('shiLoginOverlay').classList.add('visible');
    };
    window.shiHideLogin = function() {
        document.getElementById('shiLoginOverlay').classList.remove('visible');
        document.getElementById('shiLoginError').style.display = 'none';
    };
    window.shiDoLogin = function() {
        var email = document.getElementById('shiLoginEmail').value.trim();
        var pass = document.getElementById('shiLoginPass').value;
        if ((email === 'demo@resistancezero.com' && pass === 'demo2026') || ((email === 'bagus@resistancezero.com' || email === 'admin@resistancezero.com') && pass === 'RZ@Premium2026!')) {
            var session = { email: email, tier: 'pro', role: (['admin@resistancezero.com','bagus@resistancezero.com'].indexOf(email)!==-1?'root':'pro'), expires: new Date(Date.now() + 30*24*60*60*1000).toISOString() };
            localStorage.setItem('rz_premium_session', JSON.stringify(session));
            isAuthenticated = true;
            unlockPanels();
            shiHideLogin();
            shiSetMode('pro');
            window.dispatchEvent(new CustomEvent('rz-auth-change', { detail: session }));
        } else {
            document.getElementById('shiLoginError').style.display = 'block';
        }
    };

    // --- Reset ---
    window.shiReset = function() {
        document.getElementById('calcNearMiss').value = DEFAULTS.nearMiss;
        document.getElementById('calcWeakSignals').value = DEFAULTS.weakSignals;
        document.getElementById('calcAudit').value = DEFAULTS.audit;
        document.getElementById('calcTraining').value = DEFAULTS.training;
        document.getElementById('calcDays').value = DEFAULTS.days;
        document.getElementById('calcWalks').value = DEFAULTS.walks;
        document.getElementById('calcHazard').value = DEFAULTS.hazard;
        document.getElementById('calcMeeting').value = DEFAULTS.meeting;
        document.getElementById('calcNearMiss').dispatchEvent(new Event('input'));
    };

    // --- PDF Export ---
    window.shiExportPDF = function() {
        var inputs = getInputs();
        var result = shiCalcScore(inputs);
        var dims = result.dims, total = result.total;
        var mc = proMode ? runMonteCarlo(inputs) : null;
        var sensitivity = proMode ? runSensitivity(inputs) : null;

        // Generate SVG charts for PDF
        function radarSVG(dims) {
            var W = 400, H = 400, cx = 200, cy = 210, R = 150;
            var n = 7, step = (2*Math.PI)/n, start = -Math.PI/2;
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ' + W + ' ' + H + '" style="width:100%;max-width:400px;">';
            // Grid
            [0.2,0.4,0.6,0.8,1].forEach(function(f) {
                var pts = [];
                for (var i = 0; i < n; i++) { var a = start+i*step; pts.push((cx+Math.cos(a)*R*f) + ',' + (cy+Math.sin(a)*R*f)); }
                svg += '<polygon points="' + pts.join(' ') + '" fill="none" stroke="#cbd5e1" stroke-width="0.5" opacity="0.3"/>';
            });
            // Labels
            for (var i = 0; i < n; i++) {
                var a = start + i * step;
                var lx = cx + Math.cos(a) * (R + 30);
                var ly = cy + Math.sin(a) * (R + 30);
                svg += '<text x="' + lx + '" y="' + ly + '" font-size="10" fill="#1f2937" text-anchor="middle" font-family="Inter,sans-serif">' + DIM_LABELS[i] + '</text>';
            }
            // Score polygon
            var pts = [];
            for (var i = 0; i < n; i++) { var a = start+i*step; pts.push((cx+Math.cos(a)*R*(dims[i]/100)) + ',' + (cy+Math.sin(a)*R*(dims[i]/100))); }
            svg += '<polygon points="' + pts.join(' ') + '" fill="rgba(139,92,246,0.2)" stroke="#8b5cf6" stroke-width="2"/>';
            for (var i = 0; i < n; i++) { var a = start+i*step; var x = cx+Math.cos(a)*R*(dims[i]/100); var y = cy+Math.sin(a)*R*(dims[i]/100); svg += '<circle cx="' + x + '" cy="' + y + '" r="4" fill="#8b5cf6"/>';
                svg += '<text x="' + x + '" y="' + (y-10) + '" font-size="9" fill="#8b5cf6" text-anchor="middle" font-family="JetBrains Mono,monospace">' + dims[i].toFixed(0) + '%</text>';
            }
            svg += '</svg>';
            return svg;
        }

        function gapBarSVG(dims) {
            var W = 500, H = 220, pad = 50;
            var barW = (W - pad*2) / 7 - 6;
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ' + W + ' ' + H + '" style="width:100%;max-width:500px;">';
            dims.forEach(function(d, i) {
                var x = pad + i * ((W-pad*2)/7) + 3;
                var barH = (d/100) * (H - 80);
                var y = H - 40 - barH;
                var color = d >= 70 ? '#10b981' : d >= 40 ? '#f59e0b' : '#ef4444';
                svg += '<rect x="' + x + '" y="' + y + '" width="' + barW + '" height="' + barH + '" fill="' + color + '" rx="3"/>';
                svg += '<text x="' + (x+barW/2) + '" y="' + (y-5) + '" font-size="10" fill="#1f2937" text-anchor="middle" font-family="JetBrains Mono,monospace">' + d.toFixed(0) + '%</text>';
                svg += '<text x="' + (x+barW/2) + '" y="' + (H-20) + '" font-size="8" fill="#64748b" text-anchor="middle" font-family="Inter,sans-serif" transform="rotate(-25,' + (x+barW/2) + ',' + (H-20) + ')">' + DIM_LABELS[i] + '</text>';
            });
            svg += '</svg>';
            return svg;
        }

        var culture;
        if (total >= 85) culture = 'Generative (HRO)';
        else if (total >= 70) culture = 'Proactive';
        else if (total >= 55) culture = 'Bureaucratic';
        else if (total >= 35) culture = 'Reactive';
        else culture = 'Pathological';

        var narrative = generateNarrative(inputs, total, dims);
        var today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

        var html = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Safety Health Index Report</title>' +
        '<style>' +
            '@page { size: A4; margin: 20mm; }' +
            'body { font-family: "Segoe UI", Arial, sans-serif; color: #1f2937; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }' +
            'h1 { color: #1e3a5f; font-size: 22px; border-bottom: 3px solid #8b5cf6; padding-bottom: 8px; }' +
            'h2 { color: #1e3a5f; font-size: 16px; margin-top: 24px; border-bottom: 2px solid #e2e8f0; padding-bottom: 4px; }' +
            'h3 { color: #374151; font-size: 14px; }' +
            '.header-meta { display: flex; justify-content: space-between; color: #6b7280; font-size: 11px; margin-bottom: 20px; }' +
            '.score-hero { text-align: center; padding: 20px; background: linear-gradient(135deg, #f5f3ff, #ede9fe); border-radius: 12px; margin: 16px 0; }' +
            '.score-hero .score { font-size: 48px; font-weight: 800; color: #8b5cf6; }' +
            '.score-hero .label { color: #6b7280; font-size: 13px; }' +
            'table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 12px; }' +
            'th { background: #f8fafc; color: #1e3a5f; padding: 8px 12px; text-align: left; border-bottom: 2px solid #e2e8f0; }' +
            'td { padding: 8px 12px; border-bottom: 1px solid #f1f5f9; color: #1f2937; }' +
            'tr:nth-child(even) td { background: #fafbfc; }' +
            '.narrative { background: #f5f3ff; border-left: 4px solid #8b5cf6; padding: 14px 16px; margin: 16px 0; border-radius: 0 8px 8px 0; font-size: 13px; color: #374151; line-height: 1.7; }' +
            '.rec-item { padding: 6px 0; border-bottom: 1px solid #f1f5f9; font-size: 12px; }' +
            '.rec-badge { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; margin-right: 6px; }' +
            '.badge-critical { background: #fef2f2; color: #dc2626; }' +
            '.badge-warning { background: #fffbeb; color: #d97706; }' +
            '.badge-info { background: #f5f3ff; color: #7c3aed; }' +
            '.chart-container { text-align: center; margin: 16px 0; }' +
            '.footer { margin-top: 30px; padding-top: 12px; border-top: 2px solid #e2e8f0; font-size: 10px; color: #9ca3af; text-align: center; }' +
            '.methodology { background: #f8fafc; padding: 12px; border-radius: 8px; font-size: 11px; color: #6b7280; margin-top: 16px; }' +
            '@media print { body { print-color-adjust: exact; -webkit-print-color-adjust: exact; } }' +
        '</style></head><body>' +
        '<h1>Safety Health Index \u2014 Professional Analysis Report</h1>' +
        '<div class="header-meta">' +
            '<span>Generated: ' + today + '</span>' +
            '<span>Model: SHI-v2.0 | resistancezero.com</span>' +
        '</div>' +
        '<div class="score-hero">' +
            '<div class="score">' + total.toFixed(1) + '</div>' +
            '<div class="label">Safety Health Index Score</div>' +
            '<div style="margin-top:8px;font-size:14px;color:#374151;">Culture Classification: <strong>' + culture + '</strong></div>' +
        '</div>' +
        '<h2>Input Parameters</h2>' +
        '<table>' +
            '<tr><th>Parameter</th><th>Value</th><th>Benchmark</th><th>Status</th></tr>' +
            '<tr><td>Near-Miss Reports/Month</td><td>' + inputs.nearMiss + '</td><td>10+</td><td>' + (inputs.nearMiss >= 10 ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
            '<tr><td>Weak Signals/Month</td><td>' + inputs.weakSignals + '</td><td>15+</td><td>' + (inputs.weakSignals >= 15 ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
            '<tr><td>Open Audit Findings</td><td>' + inputs.audit + '</td><td>&lt;5</td><td>' + (inputs.audit <= 5 ? '\u2713 Good' : '\u26a0 High') + '</td></tr>' +
            '<tr><td>Training Hrs/Quarter</td><td>' + inputs.training + '</td><td>20</td><td>' + (inputs.training >= 20 ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
            '<tr><td>Incident-Free Days</td><td>' + inputs.days + '</td><td>\u2014</td><td>' + (inputs.days > 365 && total < 60 ? '\u26a0 Paradox' : 'Noted') + '</td></tr>' +
            '<tr><td>Mgmt Walkarounds/Month</td><td>' + inputs.walks + '</td><td>8</td><td>' + (inputs.walks >= 8 ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
            '<tr><td>Hazard Action Rate</td><td>' + inputs.hazard + '%</td><td>85%+</td><td>' + (inputs.hazard >= 85 ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
            '<tr><td>Safety Meetings</td><td>' + inputs.meeting + '</td><td>Weekly</td><td>' + (inputs.meeting === 'Weekly' ? '\u2713 Good' : '\u26a0 Below') + '</td></tr>' +
        '</table>' +
        '<h2>Dimension Analysis</h2>' +
        '<div class="chart-container">' + radarSVG(dims) + '</div>' +
        '<table>' +
            '<tr><th>Dimension</th><th>Score</th><th>Weight</th><th>Weighted</th></tr>' +
            DIM_LABELS.map(function(l,i) { return '<tr><td>' + l + '</td><td>' + dims[i].toFixed(1) + '%</td><td>' + (WEIGHTS[i]*100).toFixed(0) + '%</td><td>' + (dims[i]*WEIGHTS[i]).toFixed(1) + '</td></tr>'; }).join('') +
        '</table>' +
        '<div class="chart-container">' + gapBarSVG(dims) + '</div>' +
        '<h2>Narrative Assessment</h2>' +
        '<div class="narrative">' + narrative + '</div>';

        // Pro sections
        if (proMode && mc && sensitivity) {
            var gaps = dims.map(function(d) { return Math.max(0, (100-d)/100); });
            var costs = gaps.map(function(g,i) { return Math.round(2500000*g*WEIGHTS[i]*1.5); });
            var totalCost = costs.reduce(function(a,b) { return a+b; },0);

            html += '<h2>Monte Carlo Simulation (10,000 Iterations)</h2>' +
            '<table>' +
                '<tr><th>Metric</th><th>Value</th></tr>' +
                '<tr><td>P5 (Worst Case)</td><td>' + mc.p5.toFixed(1) + '</td></tr>' +
                '<tr><td>P50 (Median)</td><td>' + mc.p50.toFixed(1) + '</td></tr>' +
                '<tr><td>P95 (Best Case)</td><td>' + mc.p95.toFixed(1) + '</td></tr>' +
                '<tr><td>90% Confidence Interval</td><td>[' + mc.p5.toFixed(1) + ', ' + mc.p95.toFixed(1) + ']</td></tr>' +
                '<tr><td>P(Below Critical 40)</td><td>' + (mc.all.filter(function(v){return v<40;}).length/100).toFixed(1) + '%</td></tr>' +
                '<tr><td>P(HRO Level \u226585)</td><td>' + (mc.all.filter(function(v){return v>=85;}).length/100).toFixed(1) + '%</td></tr>' +
            '</table>' +
            '<h2>Sensitivity Analysis</h2>' +
            '<table>' +
                '<tr><th>Rank</th><th>Input Parameter</th><th>Impact (\u00b120%)</th></tr>' +
                sensitivity.map(function(s,i) { return '<tr><td>#' + (i+1) + '</td><td>' + s.label + '</td><td>\u00b1' + s.range.toFixed(1) + ' points</td></tr>'; }).join('') +
            '</table>' +
            '<h2>Cost of Complacency</h2>' +
            '<table>' +
                '<tr><th>Dimension</th><th>Gap</th><th>Risk Exposure</th></tr>' +
                DIM_LABELS.map(function(l,i) { return '<tr><td>' + l + '</td><td>' + (gaps[i]*100).toFixed(0) + '%</td><td>$' + (costs[i]/1000).toFixed(0) + 'K</td></tr>'; }).join('') +
                '<tr style="font-weight:700;"><td>TOTAL</td><td>\u2014</td><td>$' + (totalCost/1000).toFixed(0) + 'K</td></tr>' +
            '</table>';
        }

        // Recommendations
        var recs = [];
        if (dims[0] < 50) recs.push({ level: 'critical', text: 'Increase near-miss reporting from ' + inputs.nearMiss + ' to 10+/month' });
        if (dims[1] < 50) recs.push({ level: 'critical', text: 'Establish weak signal capture: only ' + inputs.weakSignals + '/month vs 15+ target' });
        if (dims[2] < 50) recs.push({ level: 'warning', text: 'Reduce open audit findings from ' + inputs.audit + ' to <5' });
        if (dims[3] < 50) recs.push({ level: 'warning', text: 'Increase safety training to 20 hrs/quarter (current: ' + inputs.training + ')' });
        if (dims[4] < 50) recs.push({ level: 'info', text: 'Increase management walkarounds to 8/month (current: ' + inputs.walks + ')' });
        if (dims[5] < 70) recs.push({ level: 'warning', text: 'Improve hazard close-out rate to 85%+ (current: ' + inputs.hazard + '%)' });
        if (dims[6] < 70) recs.push({ level: 'info', text: 'Increase safety meeting cadence to weekly (current: ' + inputs.meeting + ')' });

        if (recs.length > 0) {
            html += '<h2>Prioritized Recommendations</h2>';
            recs.forEach(function(r) {
                html += '<div class="rec-item"><span class="rec-badge badge-' + r.level + '">' + r.level.toUpperCase() + '</span>' + r.text + '</div>';
            });
        }

        html += '<div class="methodology">' +
            '<strong>Methodology Note:</strong> The Safety Health Index is a weighted composite of 7 leading indicator dimensions based on Rasmussen (1997), Vaughan (1996), Hollnagel (2014), Reason (1997), and Westrum (2004). ' +
            'Monte Carlo simulation uses 10,000 iterations with \u00b115% uniform noise on each input parameter. Cost modeling uses $2.5M base incident cost from Uptime Institute (2024) scaled by dimension gap and weight.' +
            (proMode ? ' This report includes Pro-level analysis with Monte Carlo confidence bands and sensitivity analysis.' : '') +
        '</div>' +
        '<div class="footer">resistancezero.com | Generated ' + today + ' | All calculations performed client-side | SHI Model v2.0</div>' +
        '</body></html>';

        var w = window.open('', '_blank');
        w.document.write(html);
        w.document.close();
        setTimeout(function() { w.print(); }, 500);
    };

    // --- Tooltip Positioning ---
    document.addEventListener('mouseover', function(e) {
        var trigger = e.target.closest('.tooltip-trigger');
        if (!trigger) return;
        var content = trigger.querySelector('.tooltip-content');
        if (!content) return;
        content.classList.add('visible');
        var rect = trigger.getBoundingClientRect();
        content.style.left = Math.min(rect.left, window.innerWidth - 280) + 'px';
        content.style.top = (rect.bottom + 8) + 'px';
    });
    document.addEventListener('mouseout', function(e) {
        var trigger = e.target.closest('.tooltip-trigger');
        if (!trigger) return;
        var content = trigger.querySelector('.tooltip-content');
        if (content) content.classList.remove('visible');
    });

    // --- Hook to Calculator Inputs ---
    ['calcNearMiss','calcWeakSignals','calcAudit','calcTraining','calcDays','calcWalks','calcHazard','calcMeeting'].forEach(function(id) {
        var el = document.getElementById(id);
        if (el) {
            el.addEventListener('input', updateProPanels);
            el.addEventListener('change', updateProPanels);
        }
    });

    // --- Init ---
    document.addEventListener('DOMContentLoaded', function() {
        checkAuth();
        if (isAuthenticated) {
            var proBtn = document.querySelector('.shi-btn-pro');
            if (proBtn) proBtn.classList.add('active');
        }
    });
    window.addEventListener('rz-auth-change', function() {
        checkAuth();
        if (isAuthenticated && proMode) { unlockPanels(); updateProPanels(); }
    });

    // Run initial auth check
    checkAuth();
})();
</script>

<!-- ═══ Feature 22: Reading Progress Bar ═══ -->
<script>
(function() {
    var bar = document.getElementById('scrollProgress');
    if (!bar) return;
    var ticking = false;
    function updateProgress() {
        var scrollTop = window.scrollY || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - window.innerHeight;
        var pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
        bar.style.width = Math.min(pct, 100) + '%';
        ticking = false;
    }
    window.addEventListener('scroll', function() {
        if (!ticking) { requestAnimationFrame(updateProgress); ticking = true; }
    }, { passive: true });
    updateProgress();
})();
</script>

<!-- ═══ Feature 23: TOC Sidebar ═══ -->
<script>
(function() {
    // Find H2s with IDs first, then fallback to auto-generating IDs
    var sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    if (!sections.length) {
        var allH2s = document.querySelectorAll('.article-body h2, .article-content h2');
        allH2s.forEach(function(h2, i) {
            if (!h2.id) h2.id = 'toc-section-' + (i + 1);
        });
        sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    }
    if (!sections.length) return;

    var sidebarList = document.getElementById('tocSidebarList');
    var mobileList = document.getElementById('tocMobileList');
    var sidebar = document.getElementById('tocSidebar');
    var tocToggle = document.getElementById('tocMobileToggle');
    var tocDrawer = document.getElementById('tocMobileDrawer');
    var tocBackdrop = document.getElementById('tocMobileBackdrop');
    var tocClose = document.getElementById('tocDrawerClose');

    var tocData = [];
    sections.forEach(function(h2, i) {
        var id = h2.getAttribute('id');
        var numMatch = id.match(/\d+/);
        var num = numMatch ? numMatch[0] : String(i + 1);
        var text = h2.textContent.replace(/^\s*\d+[\.\s]*/, '').trim();
        tocData.push({ id: id, num: num, text: text });
    });

    function buildList(container, isMobile) {
        tocData.forEach(function(item) {
            var li = document.createElement('li');
            if (!isMobile) li.className = 'toc-sidebar-item';
            var a = document.createElement('a');
            a.href = '#' + item.id;
            a.setAttribute('data-section', item.id);
            if (isMobile) {
                a.textContent = item.num + '. ' + item.text;
            } else {
                a.className = 'toc-sidebar-link';
                a.innerHTML = '<span class="toc-sidebar-num">' + item.num + '</span>' + item.text;
            }
            a.addEventListener('click', function(e) {
                e.preventDefault();
                var target = document.getElementById(item.id);
                if (target) window.scrollTo({ top: target.offsetTop - 80, behavior: 'smooth' });
                if (isMobile) closeMobileDrawer();
            });
            li.appendChild(a);
            container.appendChild(li);
        });
    }

    buildList(sidebarList, false);
    buildList(mobileList, true);

    var currentSection = null;
    var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                currentSection = entry.target.getAttribute('id');
                highlightActive(currentSection);
            }
        });
    }, { rootMargin: '-80px 0px -70% 0px', threshold: 0 });

    sections.forEach(function(s) { observer.observe(s); });

    function highlightActive(sectionId) {
        sidebarList.querySelectorAll('.toc-sidebar-link').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
        mobileList.querySelectorAll('a').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
    }

    var articleContent = document.querySelector('.article-content');
    if (articleContent && sidebar) {
        var sidebarObserver = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                sidebar.classList.toggle('visible', entry.isIntersecting);
            });
        }, { rootMargin: '0px', threshold: 0.01 });
        sidebarObserver.observe(articleContent);
    }

    function openMobileDrawer() {
        tocDrawer.classList.add('active');
        tocBackdrop.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    function closeMobileDrawer() {
        tocDrawer.classList.remove('active');
        tocBackdrop.classList.remove('active');
        document.body.style.overflow = '';
    }

    if (tocToggle) tocToggle.addEventListener('click', openMobileDrawer);
    if (tocClose) tocClose.addEventListener('click', closeMobileDrawer);
    if (tocBackdrop) tocBackdrop.addEventListener('click', closeMobileDrawer);
})();
</script>

<!-- ═══ Feature 21: Global Search ═══ -->
<script>
(function() {
    var searchBtn = document.getElementById('navSearchBtn');
    var overlay = document.getElementById('searchOverlay');
    var modal = document.getElementById('searchModal');
    var input = document.getElementById('searchInput');
    var resultsEl = document.getElementById('searchResults');
    var previewEl = document.getElementById('searchPreview');
    var chipsEl = document.getElementById('searchChips');
    var fuse = null;
    var searchData = null;
    var focusedIdx = -1;
    var activeFilter = 'all';
    var lastResults = [];
    var RECENT_KEY = 'rz-search-recent';

    function getRecent() {
        try { return JSON.parse(localStorage.getItem(RECENT_KEY)) || []; }
        catch(e) { return []; }
    }
    function saveRecent(query) {
        if (!query || query.length < 2) return;
        var arr = getRecent().filter(function(q) { return q !== query; });
        arr.unshift(query);
        if (arr.length > 3) arr = arr.slice(0, 3);
        try { localStorage.setItem(RECENT_KEY, JSON.stringify(arr)); } catch(e) {}
    }
    function clearRecent() {
        try { localStorage.removeItem(RECENT_KEY); } catch(e) {}
    }

    function renderRecent() {
        var recent = getRecent();
        if (!recent.length) {
            resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
            return;
        }
        var html = '<div class="search-recent"><div class="search-recent-header">'
            + '<span class="search-recent-label">Recent</span>'
            + '<button class="search-recent-clear" id="clearRecent">Clear</button></div>';
        recent.forEach(function(q) {
            html += '<div class="search-recent-item" data-query="' + q.replace(/"/g, '&quot;') + '">'
                + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>'
                + '<span>' + q + '</span></div>';
        });
        html += '</div>';
        resultsEl.innerHTML = html;
        var clearBtn = document.getElementById('clearRecent');
        if (clearBtn) clearBtn.addEventListener('click', function() { clearRecent(); renderRecent(); });
        resultsEl.querySelectorAll('.search-recent-item').forEach(function(el) {
            el.addEventListener('click', function() {
                input.value = el.getAttribute('data-query');
                input.dispatchEvent(new Event('input'));
            });
        });
    }

    function openSearch() {
        overlay.classList.add('active');
        modal.classList.add('active');
        input.value = '';
        input.focus();
        focusedIdx = -1;
        activeFilter = 'all';
        lastResults = [];
        updateChips();
        hidePreview();
        renderRecent();
        if (!searchData) {
            fetch('search-index.json')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    searchData = data;
                    fuse = new Fuse(data, {
                        keys: [
                            { name: 'title', weight: 0.4 },
                            { name: 'description', weight: 0.25 },
                            { name: 'keywords', weight: 0.25 },
                            { name: 'category', weight: 0.1 }
                        ],
                        threshold: 0.35,
                        includeScore: true,
                        includeMatches: true,
                        minMatchCharLength: 2
                    });
                })
                .catch(function() {});
        }
    }

    function closeSearch() {
        overlay.classList.remove('active');
        modal.classList.remove('active');
        input.blur();
        hidePreview();
    }

    function getIconClass(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calc';
        if (cat === 'tool') return 'tool';
        if (cat === 'policy') return 'policy';
        if (cat === 'sustainability') return 'sustainability';
        if (cat === 'geopolitics') return 'geopolitics';
        if (cat === 'analysis') return 'analysis';
        if (cat === 'leadership') return 'leadership';
        if (cat === 'business') return 'business';
        return '';
    }

    function getIconLabel(item) {
        if (item.url && item.url.indexOf('article-') === 0) {
            return item.url.replace('article-', '').replace('.html', '').padStart(2, '0');
        }
        var cat = (item.category || '').toLowerCase();
        if (cat === 'calculator') return '&#9889;';
        if (cat === 'tool') return '&#9881;';
        if (cat === 'geopolitics') return '&#9733;';
        return '&#9733;';
    }

    function getCatFilter(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calculators';
        if (cat === 'tool') return 'tools';
        return 'articles';
    }

    function highlightText(text, matches, key) {
        if (!matches || !matches.length) return text;
        var found = null;
        for (var i = 0; i < matches.length; i++) {
            if (matches[i].key === key) { found = matches[i]; break; }
        }
        if (!found || !found.indices || !found.indices.length) return text;
        var indices = found.indices.sort(function(a, b) { return a[0] - b[0]; });
        var result = '';
        var last = 0;
        indices.forEach(function(pair) {
            var start = pair[0], end = pair[1];
            if (start > last) result += text.substring(last, start);
            result += '<mark class="search-highlight">' + text.substring(start, end + 1) + '</mark>';
            last = end + 1;
        });
        if (last < text.length) result += text.substring(last);
        return result;
    }

    function filterResults(results) {
        if (activeFilter === 'all') return results;
        return results.filter(function(r) {
            return getCatFilter(r.item.category) === activeFilter;
        });
    }

    function renderResults(results) {
        var filtered = filterResults(results);
        if (!filtered.length) {
            resultsEl.innerHTML = '<div class="search-empty">No results found</div>';
            focusedIdx = -1;
            hidePreview();
            return;
        }
        var html = '';
        filtered.slice(0, 8).forEach(function(r, i) {
            var item = r.item;
            var iconCls = getIconClass(item.category);
            var titleHtml = highlightText(item.title, r.matches, 'title');
            var descHtml = highlightText(item.description, r.matches, 'description');
            html += '<a href="' + item.url + '" class="search-result-item" data-idx="' + i + '">'
                + '<div class="search-result-icon ' + iconCls + '">' + getIconLabel(item) + '</div>'
                + '<div class="search-result-info">'
                + '<div class="search-result-category">' + (item.category || '') + '</div>'
                + '<div class="search-result-title">' + titleHtml + '</div>'
                + '<div class="search-result-desc">' + descHtml + '</div>'
                + '</div></a>';
        });
        resultsEl.innerHTML = html;
        focusedIdx = -1;
        attachHoverListeners(filtered);
    }

    function attachHoverListeners(filtered) {
        resultsEl.querySelectorAll('.search-result-item').forEach(function(el) {
            var idx = parseInt(el.getAttribute('data-idx'), 10);
            el.addEventListener('mouseenter', function() { showPreview(filtered[idx], el); });
            el.addEventListener('mouseleave', function() { hidePreview(); });
            el.addEventListener('click', function() { saveRecent(input.value.trim()); });
        });
    }

    function showPreview(r, anchorEl) {
        if (!previewEl || !r) return;
        var item = r.item;
        var imgHtml = item.image ? '<img class="search-preview-img" src="' + item.image + '" alt="">' : '';
        var timeHtml = item.readingTime ? '<div class="search-preview-badge"><svg viewBox="0 0 24 24" width="10" height="10" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>' + item.readingTime + ' min</div>' : '';
        previewEl.innerHTML = imgHtml
            + '<div class="search-preview-text">'
            + '<div class="search-preview-cat">' + (item.category || '') + '</div>'
            + '<div class="search-preview-title">' + item.title + '</div>'
            + '<div class="search-preview-desc">' + item.description + '</div>'
            + timeHtml
            + '</div>';
        // Position tooltip to the right of the modal
        var modalRect = modal.getBoundingClientRect();
        var itemRect = anchorEl.getBoundingClientRect();
        var tipLeft = modalRect.right + 10;
        var tipTop = itemRect.top;
        // If no space on right, show on left
        if (tipLeft + 270 > window.innerWidth) {
            tipLeft = modalRect.left - 270;
        }
        // Keep within viewport vertically
        if (tipTop + 100 > window.innerHeight) {
            tipTop = window.innerHeight - 110;
        }
        previewEl.style.left = tipLeft + 'px';
        previewEl.style.top = tipTop + 'px';
        previewEl.classList.add('visible');
    }

    function hidePreview() {
        if (!previewEl) return;
        previewEl.innerHTML = '';
        previewEl.classList.remove('visible');
    }

    function updateChips() {
        if (!chipsEl) return;
        chipsEl.querySelectorAll('.search-chip').forEach(function(chip) {
            chip.classList.toggle('active', chip.getAttribute('data-filter') === activeFilter);
        });
    }

    if (chipsEl) {
        chipsEl.addEventListener('click', function(e) {
            var chip = e.target.closest('.search-chip');
            if (!chip) return;
            activeFilter = chip.getAttribute('data-filter');
            updateChips();
            if (lastResults.length) renderResults(lastResults);
        });
    }

    function updateFocus() {
        var items = resultsEl.querySelectorAll('.search-result-item');
        items.forEach(function(el, i) {
            el.classList.toggle('focused', i === focusedIdx);
            if (i === focusedIdx) {
                el.scrollIntoView({ block: 'nearest' });
                var idx = parseInt(el.getAttribute('data-idx'), 10);
                var filtered = filterResults(lastResults);
                if (filtered[idx]) showPreview(filtered[idx], el);
            }
        });
    }

    if (searchBtn) searchBtn.addEventListener('click', openSearch);
    if (overlay) overlay.addEventListener('click', closeSearch);

    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            if (modal.classList.contains('active')) closeSearch();
            else openSearch();
            return;
        }
        if (!modal.classList.contains('active')) return;
        if (e.key === 'Escape') { closeSearch(); return; }
        var items = resultsEl.querySelectorAll('.search-result-item');
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            focusedIdx = Math.min(focusedIdx + 1, items.length - 1);
            updateFocus();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            focusedIdx = Math.max(focusedIdx - 1, 0);
            updateFocus();
        } else if (e.key === 'Enter' && focusedIdx >= 0 && items[focusedIdx]) {
            e.preventDefault();
            saveRecent(input.value.trim());
            items[focusedIdx].click();
        }
    });

    if (input) {
        input.addEventListener('input', function() {
            var query = input.value.trim();
            if (query.length < 2 || !fuse) {
                lastResults = [];
                focusedIdx = -1;
                hidePreview();
                if (query.length === 0) { renderRecent(); }
                else { resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>'; }
                return;
            }
            var results = fuse.search(query);
            lastResults = results;
            renderResults(results);
        });
    }
})();
</script>
<script>
function subscribeNewsletter(e){e.preventDefault();var email=e.target.querySelector('input[type="email"]').value.trim();if(!email)return false;var subs=JSON.parse(localStorage.getItem('rz_newsletter_subscribers')||'[]');if(subs.find(function(s){return s.email===email})){alert('Already subscribed!');return false}subs.push({email:email,date:new Date().toISOString(),source:location.pathname.split('/').pop(),status:'active'});localStorage.setItem('rz_newsletter_subscribers',JSON.stringify(subs));e.target.innerHTML='<p style="color:#fff;font-weight:600;">✓ Subscribed successfully!</p>';return false}
</script>
<script src="auth.js?v=20260228"></script>
<script src="rz-tracker.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-banner hidden" id="cookieBanner">
    <p>We use cookies for analytics to improve your experience. <a href="privacy.html">Learn more</a></p>
    <div class="cookie-actions">
        <button class="cookie-accept" id="cookieAccept">Accept</button>
        <button class="cookie-decline" id="cookieDecline">Decline</button>
    </div>
</div>

<!-- Scroll to Top -->
<button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg>
</button>

<script>
(function(){
    // Cookie Banner
    var cb = document.getElementById('cookieBanner');
    var consent = localStorage.getItem('rz_cookie_consent');
    if (!consent && cb) {
        cb.classList.remove('hidden');
    }
    var acceptBtn = document.getElementById('cookieAccept');
    var declineBtn = document.getElementById('cookieDecline');
    if (acceptBtn) acceptBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'accepted');
        cb.classList.add('hidden');
    });
    if (declineBtn) declineBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'declined');
        cb.classList.add('hidden');
        // Disable GA
        window['ga-disable-G-GED7FX8RTV'] = true;
    });

    // Scroll to Top
    var sBtn = document.getElementById('scrollTopBtn');
    if (sBtn) {
        var ticking = false;
        window.addEventListener('scroll', function(){
            if (!ticking) {
                window.requestAnimationFrame(function(){
                    if (window.scrollY > 500) {
                        sBtn.classList.add('visible');
                    } else {
                        sBtn.classList.remove('visible');
                    }
                    ticking = false;
                });
                ticking = true;
            }
        });
        sBtn.addEventListener('click', function(){
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
})();
</script>

</body>
</html>