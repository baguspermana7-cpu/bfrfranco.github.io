<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GED7FX8RTV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GED7FX8RTV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <title>Technical Debt Is Operational Risk | Data Centers | ResistanceZero</title>
    <meta name="description" content="Technical debt in live data centers is operational risk. Hidden cost analysis, debt quantification methods, and remediation prioritization.">
    <meta name="keywords" content="Technical Debt, Data Center Risk, Operational Risk, Deferred Maintenance, Weibull Analysis, Infrastructure Resilience, Risk Management, MTBF, MTTR, Bathtub Curve, Reliability Engineering, Asset Management, ISO 55001">
    <meta name="author" content="Bagus Dwi Permana">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#1e3a5f">
    <link rel="canonical" href="https://resistancezero.com/article-5.html">

    <link rel="alternate" hreflang="en" href="https://resistancezero.com/article-5.html">

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://resistancezero.com/article-5.html">
    <meta property="og:title" content="Technical Debt in Live Data Centers Is Operational Risk">
    <meta property="og:description" content="How deferred maintenance, design shortcuts, and knowledge loss create compounding operational risk. Includes Weibull failure analysis and interactive risk calculator.">
    <meta property="og:image" content="https://resistancezero.com/assets/article-5-cover.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Technical Debt in Data Centers Is Operational Risk - Infrastructure Risk Management Article">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Bagus Dwi Permana Portfolio">
    <meta property="article:author" content="Bagus Dwi Permana">
    <meta property="article:published_time" content="2025-11-18T00:00:00Z">
    <meta property="article:modified_time" content="2026-02-17T00:00:00Z">
    <meta property="article:section" content="Infrastructure Risk Management">
    <meta property="article:tag" content="Technical Debt">
    <meta property="article:tag" content="Operational Risk">
    <meta property="article:tag" content="Weibull Analysis">
    <meta property="article:tag" content="Deferred Maintenance">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BagusDPermana">
    <meta name="twitter:creator" content="@BagusDPermana">
    <meta name="twitter:title" content="Technical Debt in Data Centers Is Operational Risk">
    <meta name="twitter:description" content="Weibull failure analysis, risk scoring frameworks, and interactive calculator for quantifying deferred maintenance risk.">
    <meta name="twitter:image" content="https://resistancezero.com/assets/article-5-cover.jpg">
    <meta name="twitter:image:alt" content="Technical Debt in Data Center Infrastructure">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <link rel="apple-touch-icon" href="assets/Favicon.png">
    <link rel="stylesheet" href="styles.min.css?v=20260225">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preload" as="image" href="assets/article-5-cover.jpg">

    <!-- Structured Data - TechnicalArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechnicalArticle",
        "headline": "Technical Debt in Live Data Centers Is Operational Risk",
        "description": "Comprehensive analysis of how deferred maintenance, design shortcuts, and documentation gaps create compounding operational risk in live data center facilities.",
        "image": "https://resistancezero.com/assets/article-5-cover.jpg",
        "author": {
            "@type": "Person",
            "name": "Bagus Dwi Permana",
            "jobTitle": "Engineering Operations Manager",
            "url": "https://resistancezero.com/"
        },
        "datePublished": "2025-11-18",
        "dateModified": "2025-12-15",
        "wordCount": "9000",
        "publisher": {
            "@type": "Person",
            "name": "Bagus Dwi Permana"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://resistancezero.com/article-5.html"
        },
        "articleSection": "Infrastructure Risk Management",
        "keywords": ["Technical Debt", "Operational Risk", "Weibull Analysis", "Deferred Maintenance", "Data Center Reliability"]
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://resistancezero.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Articles",
                "item": "https://resistancezero.com/articles.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Technical Debt in Data Centers Is Operational Risk"
            }
        ]
    }
    </script>

    <!-- Structured Data - FAQPage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is technical debt in data center operations?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Technical debt in data centers refers to the accumulated cost of deferred maintenance, delayed upgrades, and workaround solutions that were chosen for short-term convenience. This includes outdated firmware, bypassed safety interlocks, undocumented modifications, and aging infrastructure running beyond design life. Unlike software technical debt, data center technical debt carries physical safety and reliability risks."
                }
            },
            {
                "@type": "Question",
                "name": "How does technical debt become operational risk in critical facilities?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Technical debt becomes operational risk through cascading failure paths. Deferred maintenance increases failure probability, workarounds mask root causes, and knowledge gaps grow as undocumented changes accumulate. A single deferred repair can create latent failures that remain hidden until a stress event triggers cascading failures across interdependent systems."
                }
            },
            {
                "@type": "Question",
                "name": "How do you quantify and prioritize technical debt in a data center?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Technical debt is quantified using a risk-weighted scoring model that considers: failure probability (based on asset age, condition, and maintenance history), impact severity (tier of affected systems, revenue at risk), and remediation cost. Items are prioritized by risk-to-cost ratio, with safety-critical systems and single points of failure receiving highest priority regardless of cost."
                }
            }
        ]
    }
    </script>

    <style>
        :root {
            --primary-blue: #1e3a5f;
            --accent-cyan: #06b6d4;
            --accent-gold: #f59e0b;
            --accent-amber: #f59e0b;
            --accent-emerald: #10b981;
            --accent-red: #ef4444;
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --card-bg: #fff;
            --card-border: #e2e8f0;
            --section-bg: #f8fafc;
        }

        /* Hero Section */
        .article-hero {
            background: linear-gradient(135deg, #0b1220 0%, #1e3a5f 50%, #4a3728 100%);
            padding: 7rem 2rem 3.5rem;
            color: #fff;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(245, 158, 11, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .article-hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L32 15 L42 17 L32 19 L30 29 L28 19 L18 17 L28 15 Z' fill='%23f59e0b' fill-opacity='0.03'/%3E%3C/svg%3E");
            z-index: 0;
        }

        .article-hero > * { position: relative; z-index: 1; }
        .article-hero .container { max-width: 1000px; margin: 0 auto; }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .article-title {
            font-size: clamp(1.6rem, 3.2vw, 2.35rem);
            font-weight: 800;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            color: #fff;
            letter-spacing: -0.01em;
        }

        .article-subtitle {
            font-size: clamp(0.95rem, 1.6vw, 1.15rem);
            color: #94a3b8;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .article-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Table of Contents */
        .toc-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 3rem 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .toc-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .toc-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.625rem;
        }

        .toc-item {
            background: #fff;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-gold);
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .toc-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toc-item-number {
            font-size: 0.75rem;
            color: var(--accent-gold);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .toc-item-title {
            font-weight: 600;
            font-size: 0.88rem;
        }

        /* Article Content */
        .article-content {
            padding: 4rem 2rem;
            background: #fff;
        }

        .article-content .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-gold);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .article-body h2 .section-number {
            background: var(--accent-gold);
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .article-body h3 {
            font-size: 1.1rem;
            color: #334155;
            margin: 1.5rem 0 0.5rem;
        }

        .article-body h4 {
            font-size: 0.9rem;
            color: #475569;
            margin: 1rem 0 0.5rem;
        }

        .article-body ul, .article-body ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .article-body li {
            margin-bottom: 0.35rem;
            font-size: 0.9rem;
        }

        /* Data Tables */
        .data-table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table thead {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #2d5a87 100%);
            color: #fff;
        }

        .data-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            white-space: nowrap;
        }

        .data-table td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid var(--accent-cyan);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left-color: var(--accent-gold);
        }

        .info-box.critical {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left-color: var(--accent-red);
        }

        .info-box.success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: var(--accent-emerald);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Key Insight Box */
        .key-insight {
            background: rgba(245,158,11,0.08);
            border-left: 4px solid var(--accent-gold);
            padding: 1.25rem 1.5rem;
            border-radius: 0 10px 10px 0;
            margin: 1.5rem 0;
        }

        .key-insight strong {
            color: var(--accent-gold);
            display: block;
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Formula Box */
        .formula-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #c4b5fd;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .formula-box-title {
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 0.75rem;
            font-family: 'Inter', sans-serif;
        }

        /* Conclusion Box */
        .conclusion-box {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(245,158,11,0.2);
        }

        .conclusion-box h3 {
            color: var(--accent-gold);
            margin-top: 0;
        }

        .conclusion-box p {
            color: #cbd5e1;
            line-height: 1.7;
        }

        .conclusion-box ul {
            color: #cbd5e1;
            margin: 1rem 0;
            padding-left: 1.25rem;
        }

        .conclusion-box li { margin-bottom: 0.5rem; }

        /* Code Blocks */
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.25rem;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            line-height: 1.6;
        }

        .code-block .comment { color: #64748b; }
        .code-block .keyword { color: #f472b6; }
        .code-block .variable { color: #67e8f9; }
        .code-block .value { color: #a5f3fc; }

        /* Tooltip System */
        .tip {
            position: relative;
            border-bottom: 1px dashed var(--accent-gold);
            cursor: help;
            font-weight: 600;
        }
        .tip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: #e2e8f0;
            padding: 0.5rem 0.85rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 400;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 60;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            max-width: 320px;
            white-space: normal;
            line-height: 1.5;
        }
        .tip:hover::after { opacity: 1; }

        /* Source Reference Link */
        .src-ref {
            font-size: 0.7rem;
            vertical-align: super;
            color: var(--accent-gold);
            text-decoration: none;
            font-weight: 700;
            cursor: pointer;
        }
        .src-ref:hover { text-decoration: underline; }

        /* References Section */
        .ref-list {
            list-style: none;
            padding: 0;
            counter-reset: ref-counter;
        }
        .ref-list li {
            counter-increment: ref-counter;
            padding: 0.75rem 0 0.75rem 2.5rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.85rem;
            line-height: 1.7;
            position: relative;
        }
        .ref-list li::before {
            content: "[" counter(ref-counter) "]";
            color: var(--accent-gold);
            font-weight: 700;
            font-size: 0.8rem;
            position: absolute;
            left: 0;
            top: 0.75rem;
        }
        .ref-list a {
            color: var(--accent-cyan);
            text-decoration: none;
            word-break: break-all;
        }
        .ref-list a:hover { text-decoration: underline; }

        /* Interactive Calculator */
        .calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            margin: 3rem 0;
            color: #fff;
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .calculator-subtitle {
            color: #94a3b8;
            text-align: center;
            margin-bottom: 2rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-label {
            font-size: 0.85rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .calc-input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }

        .calc-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(148,163,184,0.2);
            outline: none;
        }

        .calc-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-gold);
            cursor: pointer;
        }

        .calc-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-gold);
            cursor: pointer;
            border: none;
        }

        .slider-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .slider-value {
            background: rgba(245,158,11,0.2);
            color: #fbbf24;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.85rem;
            min-width: 50px;
            text-align: center;
        }

        .calc-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .calc-result-item {
            text-align: center;
            padding: 1rem;
        }

        .calc-result-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent-gold);
        }

        .calc-result-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .calc-result-sub {
            font-size: 0.7rem;
            color: #64748b;
            margin-top: 0.15rem;
        }

        /* Risk Gauge */
        .risk-gauge-container {
            text-align: center;
            margin: 1.5rem 0;
        }

        .risk-gauge-bar {
            width: 100%;
            height: 18px;
            background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            border-radius: 9px;
            position: relative;
            margin: 1rem 0;
        }

        .risk-gauge-needle {
            position: absolute;
            top: -6px;
            width: 4px;
            height: 30px;
            background: #fff;
            border-radius: 2px;
            transition: left 0.5s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }

        .risk-gauge-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #94a3b8;
        }

        /* Priority Breakdown */
        .priority-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .priority-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .priority-card-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .priority-card-label {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Interactive Chart */
        .chart-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .chart-title {
            text-align: center;
            color: #fff;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .chart-subtitle {
            text-align: center;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .chart-wrapper {
            background: rgba(2, 6, 23, 0.5);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .control-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .control-slider {
            width: 200px;
            height: 8px;
            border-radius: 4px;
            background: rgba(148, 163, 184, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #f59e0b;
            cursor: pointer;
        }

        .control-value {
            background: rgba(245, 158, 11, 0.2);
            color: #fcd34d;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.9rem;
            min-width: 50px;
            text-align: center;
        }

        .legend-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.8rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .callout-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .callout-card {
            background: rgba(30, 58, 95, 0.3);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(245, 158, 11, 0.15);
        }

        .callout-label {
            color: #94a3b8;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .callout-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: #f59e0b;
        }

        /* Author Bio — styled via styles.css */

        /* Article Nav */
        .article-nav {
            display: flex;
            justify-content: space-between;
            padding: 2rem 0;
            border-top: 1px solid var(--card-border);
            margin-top: 3rem;
        }
        .article-nav a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-blue);
            font-weight: 600;
            transition: color 0.3s ease;
            text-decoration: none;
        }
        [data-theme="dark"] .article-nav a { color: #93c5fd; }
        .article-nav a:hover { color: #60a5fa; }

        /* Responsive */
        @media (max-width: 900px) {
            .calc-grid { grid-template-columns: repeat(2, 1fr); }
            .priority-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 600px) {
            .article-hero { padding: 6rem 1rem 3rem; }
            .article-content { padding: 2rem 1rem; }
            .toc-grid { grid-template-columns: 1fr; }
            .calc-grid { grid-template-columns: 1fr; }
            .priority-grid { grid-template-columns: 1fr; }
            .chart-container { padding: 1rem; }
            .calculator-section { padding: 2rem 1rem; }
            /* author-bio responsive — handled by styles.css */
        }

        /* ═══ TOC CALCULATOR HIGHLIGHT ═══ */
        .toc-item.toc-calculator {
            background: linear-gradient(135deg, rgba(245,158,11,0.06) 0%, rgba(239,68,68,0.04) 100%);
            border: 2px solid rgba(245,158,11,0.2);
            border-left: 4px solid var(--accent-gold);
            position: relative;
        }
        .toc-item.toc-calculator .toc-item-number { display: flex; align-items: center; gap: 6px; }
        .toc-item.toc-calculator .toc-calc-badge {
            display: inline-flex; align-items: center; gap: 3px;
            background: var(--accent-gold); color: #fff;
            font-size: 0.55rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 0.5px; padding: 2px 6px; border-radius: 4px;
        }
        [data-theme="dark"] .toc-item.toc-calculator {
            background: linear-gradient(135deg, rgba(245,158,11,0.08) 0%, rgba(239,68,68,0.05) 100%);
            border-color: rgba(245,158,11,0.25); border-left-color: var(--accent-gold);
        }

        /* ═══ EVIDENCE BLOCK ═══ */
        .evidence-block {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px; padding: 2rem; margin: 2.5rem 0;
            border: 1px solid rgba(245,158,11,0.15);
        }
        .evidence-block-title {
            font-size: 0.75rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 1.5px; color: #f59e0b; margin-bottom: 1.25rem;
            display: flex; align-items: center; gap: 0.5rem;
        }
        .evidence-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; }
        .evidence-card {
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px; padding: 1.25rem 1rem; text-align: center;
            transition: all 0.3s ease;
        }
        .evidence-card:hover { background: rgba(245,158,11,0.06); border-color: rgba(245,158,11,0.2); transform: translateY(-2px); }
        .evidence-card-value { font-size: 1.4rem; font-weight: 800; font-family: 'JetBrains Mono', monospace; margin-bottom: 4px; }
        .evidence-card-label { font-size: 0.72rem; color: #94a3b8; line-height: 1.4; }
        .evidence-card-sub { font-size: 0.65rem; color: #64748b; margin-top: 4px; }
        .evidence-source { margin-top: 1rem; font-size: 0.7rem; color: #64748b; text-align: center; font-style: italic; }

        /* ═══ PRIVACY & BENCHMARK META ═══ */
        .privacy-badge { display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.72rem; color: #64748b; margin-top: 0.5rem; padding: 6px 0; }
        .privacy-badge i { color: #10b981; font-size: 0.8rem; }
        .benchmark-meta { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.08); }
        .benchmark-meta-tag { font-size: 0.65rem; color: #64748b; background: rgba(255,255,255,0.04); padding: 3px 8px; border-radius: 4px; display: flex; align-items: center; gap: 4px; }
        .benchmark-meta-tag i { font-size: 0.6rem; }

        /* ═══ PRO MODE TOGGLE ═══ */
        .debt-toolbar-row { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.5rem; }
        .debt-toolbar-actions { display: flex; gap: 8px; align-items: center; }
        .debt-mode-bar { display: flex; gap: 8px; }
        .debt-mode-btn {
            padding: 8px 20px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.06); color: #94a3b8; font-size: 0.82rem;
            font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px;
        }
        .debt-mode-btn:hover { background: rgba(255,255,255,0.1); color: #e2e8f0; }
        .debt-mode-btn.active { background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; border-color: #f59e0b; box-shadow: 0 4px 15px rgba(245,158,11,0.3); }
        .gated-badge { font-size: 0.6rem; font-weight: 800; padding: 2px 6px; border-radius: 4px; background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; letter-spacing: 0.5px; }
        .debt-action-btn {
            padding: 8px 14px; font-size: 0.78rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.06); color: #94a3b8; cursor: pointer; display: flex; align-items: center; gap: 6px;
            font-weight: 600; transition: all 0.2s;
        }
        .debt-action-btn:hover { background: rgba(255,255,255,0.1); color: #e2e8f0; }
        .debt-action-btn.primary { background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; border-color: #f59e0b; }
        .debt-action-btn.primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(245,158,11,0.3); }

        /* ═══ PRO PANELS ═══ */
        .pro-panel { position: relative; margin-bottom: 1.5rem; border-radius: 14px; overflow: hidden; }
        .pro-panel-inner { filter: blur(3px); pointer-events: none; user-select: none; padding: 1.25rem; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; }
        .pro-panel-title { font-size: 0.95rem; font-weight: 700; color: #f59e0b; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 8px; }
        .gated-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(15,23,42,0.85); backdrop-filter: blur(2px); cursor: pointer;
            border-radius: 14px; z-index: 2;
        }
        .gated-icon { font-size: 1.5rem; color: #f59e0b; margin-bottom: 0.5rem; }
        .gated-text { font-size: 0.9rem; font-weight: 700; color: #e2e8f0; }
        .gated-sub { font-size: 0.75rem; color: #94a3b8; margin-top: 4px; }
        .pro-panel.unlocked .pro-panel-inner { filter: none; pointer-events: auto; user-select: auto; }
        .pro-panel.unlocked .gated-overlay { display: none; }
        .calc-results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.75rem; }
        .result-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 1rem; text-align: center; }
        .result-card-label { font-size: 0.7rem; color: #94a3b8; margin-bottom: 4px; }
        .result-card-value { font-size: 1.1rem; font-weight: 700; color: #f1f5f9; font-family: 'JetBrains Mono', monospace; }
        .result-card-sub { font-size: 0.65rem; color: #64748b; margin-top: 4px; }

        /* ═══ LOGIN MODAL ═══ */
        .login-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999; background: rgba(0,0,0,0.75); backdrop-filter: blur(8px); align-items: center; justify-content: center; }
        .login-overlay.active { display: flex; }
        .login-box { background: #0f172a; border: 1px solid rgba(245,158,11,0.2); border-radius: 20px; padding: 2.5rem; max-width: 400px; width: 90%; }
        .login-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: #64748b; font-size: 1.5rem; cursor: pointer; }
        .login-input { width: 100%; padding: 12px 16px; margin-bottom: 12px; background: #1e293b; border: 1px solid #334155; border-radius: 10px; color: #e2e8f0; font-size: 0.9rem; box-sizing: border-box; }
        .login-input::placeholder { color: #64748b; }
        .login-submit { width: 100%; padding: 12px; background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; border: none; border-radius: 10px; font-size: 0.9rem; font-weight: 700; cursor: pointer; margin-top: 8px; transition: all 0.2s; }
        .login-submit:hover { transform: translateY(-1px); box-shadow: 0 4px 15px rgba(245,158,11,0.3); }
        [data-theme="light"] .login-box { background: #ffffff; border-color: #e2e8f0; }
        [data-theme="light"] .login-input { background: #f1f5f9; border-color: #e2e8f0; color: #1e293b; }

        /* ═══ CALCULATOR TOOLTIP SYSTEM ═══ */
        .tooltip-trigger { display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;background:rgba(245,158,11,0.15);color:#f59e0b;font-size:0.65rem;font-weight:700;cursor:help;margin-left:6px;vertical-align:middle;position:relative; }
        .tooltip-content { display:none;position:fixed;width:280px;background:#1e293b;border:1px solid rgba(245,158,11,0.3);border-radius:10px;padding:14px;z-index:9999;box-shadow:0 8px 30px rgba(0,0,0,0.4);pointer-events:none; }
        .tooltip-trigger:hover .tooltip-content { display:block; }
        .tooltip-title { font-size:0.82rem;font-weight:700;color:#f59e0b;margin-bottom:6px; }
        .tooltip-desc { font-size:0.78rem;color:#cbd5e1;line-height:1.5;margin-bottom:8px; }
        .tooltip-formula { font-size:0.72rem;color:#94a3b8;padding-top:6px;border-top:1px solid rgba(255,255,255,0.1);font-style:italic; }
        [data-theme="dark"] .tooltip-content { background:#0f172a;border-color:rgba(245,158,11,0.4); }

        /* ═══ PRO CHARTS & NARRATIVE ═══ */
        #debtMCHistogram, #debtTornadoChart { background:rgba(2,6,23,0.3);border-radius:10px; }
        #debtNarrativeBox p { margin:0 0 0.75rem; }
        #debtNarrativeBox p:last-child { margin-bottom:0; }

        @media (max-width: 600px) {
            .tooltip-content { width: 240px; }
            #debtMCHistogram, #debtTornadoChart { height: 200px !important; }
        }

        /* ═══ DARK MODE ENHANCEMENTS ═══ */
        [data-theme="dark"] .article-content { background: #0f172a; }
        [data-theme="dark"] .article-body { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body h2 { color: #93c5fd; }
        [data-theme="dark"] .article-body h3 { color: #cbd5e1; }
        [data-theme="dark"] .article-body p { color: #cbd5e1; }
        [data-theme="dark"] .article-body blockquote { background: rgba(30,58,95,0.3); border-color: rgba(96,165,250,0.4); color: #cbd5e1; }
        [data-theme="dark"] .article-body .info-box,
        [data-theme="dark"] .article-body .key-insight { background: rgba(15,23,42,0.8); border-color: rgba(255,255,255,0.1); color: #cbd5e1; }
        [data-theme="dark"] .article-body table th { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body table td { color: #cbd5e1; border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .article-body ul li,
        [data-theme="dark"] .article-body ol li { color: #cbd5e1; }
        [data-theme="dark"] .article-body a { color: #60a5fa; }
        [data-theme="dark"] .article-body strong { color: #f1f5f9; }

        /* Print CSS */
        @media print {
            .navbar, .calculator-section, .toc-section, .chart-container { display: none !important; }
            .article-hero { padding: 1.5rem 1rem; background: #1e3a5f !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .article-hero .article-badge, .article-hero .article-meta { display: none; }
            .article-content { padding: 1rem; }
            body { font-size: 10pt; color: #000; }
            .key-insight, .formula-box, .conclusion-box { break-inside: avoid; }
            .article-body h2 { break-after: avoid; }
            a { color: inherit; text-decoration: none; }
            footer { display: none !important; }
        }
    
        /* Result Card Tooltip System */
        .res-tip {
            display: inline-flex; align-items: center; justify-content: center;
            width: 14px; height: 14px;
            background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.3);
            border-radius: 50%; font-size: 0.6rem; font-weight: 700;
            color: #fbbf24; margin-left: 4px; cursor: help;
            position: relative; flex-shrink: 0; vertical-align: middle;
            line-height: 1;
        }
        .res-tip:hover { background: rgba(245,158,11,0.3); transform: scale(1.15); }
        .res-tip .res-tip-body {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: calc(100% + 8px); left: 50%;
            transform: translateX(-50%);
            background: #1e293b; color: #e2e8f0;
            padding: 0.7rem 0.9rem; border-radius: 8px;
            font-size: 0.72rem; font-weight: 400; line-height: 1.5;
            width: 260px; z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(245,158,11,0.2);
            transition: opacity 0.2s ease; pointer-events: none;
            text-transform: none; letter-spacing: normal;
        }
        .res-tip:hover .res-tip-body { visibility: visible; opacity: 1; }
        .res-tip-body .rtt { font-weight: 700; color: #fbbf24; margin-bottom: 3px; font-size: 0.75rem; }
        .res-tip-body .rtd { color: #cbd5e1; }
        .res-tip-body .rtf {
            font-family: 'JetBrains Mono', monospace; font-size: 0.68rem;
            background: rgba(0,0,0,0.3); padding: 3px 7px; border-radius: 4px;
            color: #67e8f9; margin-top: 4px; display: block;
        }
</style>
    <link rel="preload" as="image" href="assets/article-5-cover.jpg">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0" defer></script>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Search Overlay & Modal -->
    <div class="search-overlay" id="searchOverlay"></div>
    <div class="search-modal" id="searchModal">
        <div class="search-input-wrap">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Search articles, calculators, tools..." autocomplete="off">
            <kbd class="search-kbd">ESC</kbd>
        </div>
        <div class="search-chips" id="searchChips">
            <button class="search-chip active" data-filter="all">All</button>
            <button class="search-chip" data-filter="articles">Articles</button>
            <button class="search-chip" data-filter="calculators">Calculators</button>
            <button class="search-chip" data-filter="tools">Tools</button>
        </div>
        <div class="search-results" id="searchResults">
            <div class="search-empty">Type to search across all content</div>
        </div>
        <div class="search-footer">
            <span><kbd class="search-kbd">&uarr;&darr;</kbd> Navigate</span>
            <span><kbd class="search-kbd">Enter</kbd> Open</span>
        </div>
    </div>
    <div class="search-preview" id="searchPreview"></div>

    <!-- TOC Sidebar (desktop, wide screens) -->
    <nav class="toc-sidebar" id="tocSidebar" aria-label="Table of Contents">
        <div class="toc-sidebar-label">On this page</div>
        <ul class="toc-sidebar-list" id="tocSidebarList"></ul>
    </nav>

    <!-- TOC Mobile Toggle -->
    <button class="toc-mobile-toggle" id="tocMobileToggle" aria-label="Table of contents">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
    </button>
    <div class="toc-mobile-backdrop" id="tocMobileBackdrop"></div>
    <div class="toc-mobile-drawer" id="tocMobileDrawer">
        <div class="toc-drawer-header">
            <span class="toc-drawer-title">Table of Contents</span>
            <button class="toc-drawer-close" id="tocDrawerClose" aria-label="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <ul class="toc-mobile-list" id="tocMobileList"></ul>
    </div>


    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana" class="nav-avatar">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-dropdown">
                    <a href="datacenter-solutions.html" class="nav-link">
                        DC Solutions
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="datacenter-solutions.html" style="color: #06b6d4; font-weight: 600;">DC Solutions Hub</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="datahallAI.html" style="color: #8b5cf6;">DC AI/HPC</a></li>
                        <li><a href="dc-conventional.html">DC Conventional</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="capex-calculator.html" style="color: #f59e0b;">CAPEX Calculator</a></li>
                        <li><a href="opex-calculator.html" style="color: #10b981;">OPEX Calculator</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="dcmoc/" style="color: #ef4444; font-weight: 600;">DC MOC</a></li>
                    </ul>
                </li>
                <li class="nav-dropdown">
                    <a href="articles.html" class="nav-link">
                        Insights
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="articles.html" style="color: #06b6d4; font-weight: 600;">Engineering Journal</a></li>
                        <li><a href="geopolitics.html" style="color: #ef4444;">Global Analysis</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="insights.html" style="color: #64748b; font-size: 0.85rem;">All Insights</a></li>
                    </ul>
                </li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
                        <button class="nav-search-btn" id="navSearchBtn" aria-label="Search" title="Search (Ctrl+K)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            <button class="hamburger" aria-label="Open navigation menu" aria-expanded="false">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero Section -->
    <section class="article-hero">
        <div class="container">
            <a href="articles.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Back to Engineering Journal
            </a>

            <span class="article-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                Risk Management &mdash; Article #5
            </span>

            <h1 class="article-title">Technical Debt in Live Data Centers<br>Is Operational Risk</h1>

            <p class="article-subtitle">
                How deferred maintenance, design shortcuts, documentation gaps, and vendor lock-in create compounding operational risk that degrades resilience in live facilities. Includes Weibull failure analysis, quantitative risk scoring framework, and an interactive Technical Debt Risk Analyzer.
            </p>

            <div class="article-meta">
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    November 18, 2025
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    20 min read
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    ~9,000 words
                </span>
            </div>
        </div>
    </section>
    <!-- Series Navigation -->
    <div class="series-nav" style="margin-top: 1rem;">
        <div class="series-badge">
            <span class="series-badge-icon">05</span>
            Engineering Journal &mdash; Article 5 of 18
        </div>
        <span class="series-title"></span>
        <div class="series-links">
            <a href="article-4.html" class="series-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>Prev</a>
            <a href="article-6.html" class="series-link">Next<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></a>
        </div>
    </div>


    <!-- Featured Image -->
    <figure style="margin: 2rem 0; text-align: center;">
        <img src="Article/Article_5 02.02.26/5.1.jpg" alt="Physical security and access control infrastructure for mission-critical data center facilities" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
    </figure>

    <!-- Table of Contents -->
    <section class="toc-section">
        <div class="toc-container">
            <h2 class="toc-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
                Table of Contents
            </h2>
            <div class="toc-grid">
                <a href="#section-1" class="toc-item">
                    <div class="toc-item-number">SECTION 1</div>
                    <div class="toc-item-title">Abstract</div>
                </a>
                <a href="#section-2" class="toc-item">
                    <div class="toc-item-number">SECTION 2</div>
                    <div class="toc-item-title">Physical Infrastructure Debt</div>
                </a>
                <a href="#section-3" class="toc-item">
                    <div class="toc-item-number">SECTION 3</div>
                    <div class="toc-item-title">Sources of Technical Debt</div>
                </a>
                <a href="#section-4" class="toc-item">
                    <div class="toc-item-number">SECTION 4</div>
                    <div class="toc-item-title">Compound Risk Analogy</div>
                </a>
                <a href="#section-5" class="toc-item">
                    <div class="toc-item-number">SECTION 5</div>
                    <div class="toc-item-title">Bathtub Curve &amp; Weibull Analysis</div>
                </a>
                <a href="#section-6" class="toc-item">
                    <div class="toc-item-number">SECTION 6</div>
                    <div class="toc-item-title">Case Context: 15MW Facility</div>
                </a>
                <a href="#section-7" class="toc-item">
                    <div class="toc-item-number">SECTION 7</div>
                    <div class="toc-item-title">Quantifying Framework</div>
                </a>
                <a href="#section-8" class="toc-item">
                    <div class="toc-item-number">SECTION 8</div>
                    <div class="toc-item-title">Remediation Strategy</div>
                </a>
                <a href="#section-9" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 9 <span class="toc-calc-badge"><i class="fas fa-chart-line" style="font-size:0.5rem;"></i> Interactive</span></div>
                    <div class="toc-item-title">Debt Accumulation Chart</div>
                </a>
                <a href="#section-10" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 10 <span class="toc-calc-badge"><i class="fas fa-calculator" style="font-size:0.5rem;"></i> Interactive</span></div>
                    <div class="toc-item-title">Technical Debt Risk Analyzer</div>
                </a>
                <a href="#section-11" class="toc-item">
                    <div class="toc-item-number">SECTION 11</div>
                    <div class="toc-item-title">Organizational Barriers</div>
                </a>
                <a href="#section-12" class="toc-item">
                    <div class="toc-item-number">SECTION 12</div>
                    <div class="toc-item-title">Conclusion</div>
                </a>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="article-content">
        <div class="container">
            <div class="article-body">

                <!-- Section 1: Abstract -->
                <h2 id="section-1"><span class="section-number">1</span> Abstract</h2>

                <p>In software engineering, Ward Cunningham introduced the metaphor of "technical debt" in 1992 to describe the future cost of choosing an expedient solution today instead of a better approach that would take longer.<a href="#ref1" class="src-ref" title="Cunningham, 1992">[1]</a> Three decades later, this metaphor has become literal in critical infrastructure. In live data centers, technical debt is not merely a software concept &mdash; it manifests as deferred maintenance tasks, aging components operating beyond design life, undocumented system modifications, and the slow erosion of institutional knowledge that keeps complex facilities running.</p>

                <p>This paper argues that technical debt in physical infrastructure is fundamentally an operational risk problem, not a maintenance backlog problem. Unlike software debt, which can be refactored during quiet periods, physical technical debt in a live 24/7 facility compounds under the constraints of continuous operation, where every remediation carries its own risk of disruption. The consequences are nonlinear: a single deferred item may carry negligible risk, but the accumulation of dozens of deferred items across interdependent systems creates latent failure conditions that dramatically reduce the facility's ability to withstand stress events.</p>

                <p>We present a quantitative framework based on <span class="tip" data-tip="Weibull Distribution &mdash; A continuous probability distribution used in reliability engineering to model time-to-failure data. The shape parameter beta determines whether failure rate is decreasing, constant, or increasing.">Weibull</span> failure analysis for scoring and prioritizing technical debt, a remediation strategy incorporating phased approaches, and an interactive calculator for estimating risk exposure. The analysis draws on a composite case study of a 15MW data center facility with 127 identified deferred items, representing typical conditions observed across colocation and enterprise environments.</p>

                <div class="key-insight">
                    <strong>Core Thesis</strong>
                    Technical debt in physical infrastructure is not a maintenance scheduling problem. It is a risk management problem that requires the same rigor as financial risk analysis &mdash; because deferred items accrue interest, compound over time, and can trigger cascading failures during stress events.
                </div>

                <!-- Executive Evidence Block -->
                <div class="evidence-block">
                    <div class="evidence-block-title">
                        <i class="fas fa-triangle-exclamation"></i> Case Study: 15MW Facility &mdash; 127 Deferred Items
                    </div>
                    <div class="evidence-grid">
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #ef4444;">127</div>
                            <div class="evidence-card-label">Deferred Items Identified</div>
                            <div class="evidence-card-sub">Across 5 system categories</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #f59e0b;">15%/yr</div>
                            <div class="evidence-card-label">Risk Compounding Rate</div>
                            <div class="evidence-card-sub">Weibull-modeled escalation</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #06b6d4;">2&ndash;3&times;</div>
                            <div class="evidence-card-label">Remediation Cost Multiplier</div>
                            <div class="evidence-card-sub">vs timely maintenance cost</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #10b981;">44%</div>
                            <div class="evidence-card-label">Outages Preventable</div>
                            <div class="evidence-card-sub">Uptime Institute 2023 survey</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #8b5cf6;">&beta; = 2.5</div>
                            <div class="evidence-card-label">Weibull Shape Parameter</div>
                            <div class="evidence-card-sub">Increasing failure rate regime</div>
                        </div>
                    </div>
                    <div class="evidence-source">Composite case based on colocation &amp; enterprise environments &mdash; see Sections 6-7 for full methodology</div>
                </div>

                <!-- Quick Assessment CTA -->
                <div style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-radius: 16px; padding: 1.5rem 2rem; margin: 2rem 0; display: flex; align-items: center; justify-content: space-between; gap: 1.5rem; flex-wrap: wrap;">
                    <div>
                        <div style="font-size: 1.1rem; font-weight: 700; color: #e2e8f0; margin-bottom: 4px;">
                            <i class="fas fa-triangle-exclamation" style="color: #f59e0b; margin-right: 6px;"></i>Quantify Your Facility's Deferred Maintenance Risk
                        </div>
                        <div style="font-size: 0.82rem; color: #94a3b8;">Enter deferred items, age data &amp; criticality distribution &rarr; Weibull risk score + 5-year projection + cost escalation + budget target. Under 60 seconds.</div>
                    </div>
                    <a href="#section-10" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 24px; background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; border-radius: 10px; font-size: 0.85rem; font-weight: 600; text-decoration: none; white-space: nowrap; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='none'">
                        <i class="fas fa-chart-line"></i> Start Risk Analysis
                    </a>
                </div>

                <!-- Section 2: Physical Infrastructure Debt -->
                <h2 id="section-2"><span class="section-number">2</span> Physical Infrastructure Debt</h2>

                <p>The concept of technical debt translates directly from software to physical infrastructure, but with critical differences. In software, debt typically affects development velocity and code quality. In live data center operations, debt affects system reliability, <a href="article-8.html">safety margins</a>, and the probability of cascading failure under stress. Physical debt cannot be "patched" remotely during off-hours &mdash; it requires physical access, <span class="tip" data-tip="Management of Change &mdash; A systematic approach to dealing with changes in an organization, ensuring risks are properly assessed and controlled before implementation">MoC</span> procedures, and often partial system shutdowns that themselves carry risk.</p>

                <h3>2.1 Deferred Maintenance</h3>

                <p>Deferred maintenance is the most visible form of infrastructure debt. It encompasses preventive maintenance tasks that have been postponed, corrective actions identified during inspections but not yet executed, and equipment operating beyond manufacturer-recommended service intervals. The Uptime Institute's 2023 annual survey found that 44% of data center outages were attributable to issues that could have been prevented through <a href="article-3.html">proper maintenance practices</a>.<a href="#ref6" class="src-ref" title="Uptime Institute, 2023">[6]</a></p>

                <p>Common examples include:</p>
                <ul>
                    <li><strong><span class="tip" data-tip="Uninterruptible Power Supply &mdash; A device that provides emergency power to a load when the input power source fails, typically using batteries or flywheels to bridge the gap until generator power is available">UPS</span> battery strings</strong> operating beyond recommended replacement cycles (typically 4-5 years for VRLA), where capacity degradation is non-linear and accelerates dramatically in the final 20% of useful life</li>
                    <li><strong><span class="tip" data-tip="Heating, Ventilation, and Air Conditioning &mdash; The technology of indoor environmental comfort, critical in data centers for maintaining optimal operating temperatures for IT equipment">HVAC</span> filter replacements</strong> deferred due to scheduling conflicts, increasing static pressure and reducing cooling efficiency by 5-15% before visible degradation occurs</li>
                    <li><strong>Electrical connection re-torquing</strong> postponed across <span class="tip" data-tip="Power Distribution Unit &mdash; A device that distributes electric power to computing equipment in a data center, available in basic, metered, monitored, and switched configurations">PDU</span> and <span class="tip" data-tip="Automatic Transfer Switch &mdash; An electrical switch that automatically transfers a power supply from its primary source to a backup source when it senses a failure or outage in the primary source">ATS</span> connections, where thermal cycling creates progressive loosening that increases resistance and heat generation per <span class="tip" data-tip="National Fire Protection Association Standard 70B &mdash; Recommended Practice for Electrical Equipment Maintenance, providing guidance for preventive maintenance of electrical systems">NFPA 70B</span> guidelines<a href="#ref8" class="src-ref" title="NFPA 70B, 2023">[8]</a></li>
                    <li><strong>Generator load bank testing</strong> skipped or reduced in scope, leaving uncertainty about actual performance under full-load conditions</li>
                    <li><strong>Fire suppression system inspections</strong> overdue, including agent weight checks, detection system sensitivity testing, and damper integrity verification</li>
                </ul>

                <h3>2.2 Aging Systems</h3>

                <p>Equipment aging introduces a distinct category of technical debt that cannot be addressed through maintenance alone. As systems age beyond their design life, the probability of failure increases according to predictable patterns described by reliability engineering models. The <span class="tip" data-tip="End of Life &mdash; The point at which a product is no longer supported by the manufacturer, meaning spare parts become scarce, firmware updates cease, and vendor support contracts become expensive or unavailable">EOL</span> status of critical components introduces supply chain risk (unavailable spare parts), knowledge risk (fewer technicians familiar with legacy systems), and compatibility risk (integration challenges with newer monitoring and control platforms).</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>System Category</th>
                                <th>Typical Design Life</th>
                                <th>Common Aging Indicators</th>
                                <th>Risk When Deferred</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>UPS Systems</td>
                                <td>10&ndash;15 years</td>
                                <td>Capacitor degradation, control board obsolescence</td>
                                <td>Unplanned transfer to bypass</td>
                            </tr>
                            <tr>
                                <td>Switchgear</td>
                                <td>20&ndash;30 years</td>
                                <td>Insulation breakdown, mechanical wear on breakers</td>
                                <td>Arc flash, protection coordination failure</td>
                            </tr>
                            <tr>
                                <td>Cooling Plant</td>
                                <td>15&ndash;20 years</td>
                                <td>Compressor efficiency loss, refrigerant leakage</td>
                                <td>Thermal excursion, cascading HVAC failure</td>
                            </tr>
                            <tr>
                                <td>Generators</td>
                                <td>20&ndash;25 years</td>
                                <td>Fuel injection wear, governor drift, alternator insulation</td>
                                <td>Failure to start or sustain load</td>
                            </tr>
                            <tr>
                                <td><span class="tip" data-tip="Building Management System &mdash; A computer-based control system installed in buildings to manage and monitor mechanical and electrical equipment such as HVAC, lighting, fire systems, and power systems">BMS</span> / <span class="tip" data-tip="Data Center Infrastructure Management &mdash; Software that collects and manages information about a data center's assets, resource use, and operational status to optimize performance and planning">DCIM</span></td>
                                <td>5&ndash;8 years</td>
                                <td>Unsupported OS, sensor drift, integration gaps</td>
                                <td>Blind spots in monitoring, delayed response</td>
                            </tr>
                            <tr>
                                <td>Fire Detection</td>
                                <td>10&ndash;15 years</td>
                                <td>Detector sensitivity drift, panel firmware EOL</td>
                                <td>False alarms or missed detection</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <h3>2.3 Documentation Gaps</h3>

                <p>Documentation debt is arguably the most insidious form of infrastructure technical debt because it is invisible until a crisis demands accurate information. Documentation gaps include as-built drawings that no longer reflect actual configurations, standard operating procedures (<span class="tip" data-tip="Standard Operating Procedure &mdash; A documented process that describes how to perform a task consistently, ensuring repeatability and reducing human error during routine and emergency operations">SOP</span>) that reference equipment or configurations that have changed, alarm response matrices that were never updated after system modifications, and emergency procedures based on assumptions about system behavior that are no longer valid.</p>

                <p>The operational impact of documentation debt is multiplicative: during normal operations, experienced personnel compensate with tribal knowledge. During incidents, when stress is high and unfamiliar personnel may be responding, documentation gaps directly extend <span class="tip" data-tip="Mean Time to Repair &mdash; The average time required to repair a failed component or system and restore it to operational status. A critical metric for data center availability calculations.">MTTR</span>. James Reason's research on organizational accidents demonstrated that documentation failures are consistently present as latent conditions in major incidents.<a href="#ref2" class="src-ref" title="Reason, 1997">[2]</a></p>

                <div class="info-box warning">
                    <div class="info-box-title">Documentation Debt Multiplier</div>
                    <p style="margin:0;">For every year of operations without systematic document review, <span class="tip" data-tip="Mean Time to Repair &mdash; The average time required to repair a failed component or system and restore it to operational status">MTTR</span> for complex incidents increases by an estimated 15-25%. In a facility that has operated for 8 years without comprehensive documentation updates, the effective MTTR for multi-system incidents may be 2-3x the design assumption. This directly impacts <span class="tip" data-tip="Service Level Agreement &mdash; A commitment between a service provider and a client that defines the level of service expected, including uptime guarantees, response times, and performance metrics">SLA</span> compliance calculations.</p>
                </div>

                <!-- Section 3: Sources of Technical Debt -->
                <h2 id="section-3"><span class="section-number">3</span> Sources of Technical Debt</h2>

                <p>Understanding where technical debt originates is essential for developing effective prevention and remediation strategies. While the manifestations of debt are physical, the root causes are primarily organizational and systemic. Turner's research on man-made disasters identified that organizational factors consistently create the preconditions for technical failures.<a href="#ref13" class="src-ref" title="Turner, 1978">[13]</a></p>

                <h3>3.1 Design Shortcuts</h3>

                <p>Design shortcuts occur when initial construction or subsequent modifications prioritize speed and cost over long-term maintainability and resilience. These shortcuts create permanent structural debt that is expensive and disruptive to remediate. Common design shortcuts in data center construction include:</p>

                <ul>
                    <li><strong>Insufficient maintenance access space</strong> around critical equipment, making routine maintenance more time-consuming and increasing the risk of accidental contact with adjacent systems during servicing</li>
                    <li><strong>Value-engineered redundancy reductions</strong> where N+1 configurations are specified but N+0 is installed with "future provision" that is never completed, leaving the facility with lower resilience than the design intent documented in Tier certification submissions</li>
                    <li><strong>Monitoring blind spots</strong> where cost savings eliminated sensors or integration points from the <span class="tip" data-tip="Building Management System &mdash; A computer-based control system installed in buildings to manage and monitor mechanical and electrical equipment">BMS</span>/<span class="tip" data-tip="Data Center Infrastructure Management &mdash; Software that collects and manages information about a data center's assets, resource use, and operational status">DCIM</span> scope, creating areas where degradation progresses undetected until failure</li>
                    <li><strong>Single-vendor dependency</strong> in control systems, where proprietary protocols and closed architectures create lock-in that prevents competitive maintenance sourcing and limits future upgrade paths</li>
                </ul>

                <h3>3.2 Operational Compromises</h3>

                <p>Operational compromises are the most common and most dangerous source of technical debt because they accumulate gradually through individually reasonable decisions. Each compromise is typically well-intentioned &mdash; maintaining uptime, meeting a customer deadline, or avoiding a risky maintenance window. Vaughan's concept of the "normalization of deviance" describes exactly this process: small deviations from standard practice become accepted as normal because they do not immediately produce negative outcomes.<a href="#ref14" class="src-ref" title="Vaughan, 1996">[14]</a></p>

                <ul>
                    <li><strong>Temporary bypasses</strong> installed during incidents that are never reversed because the system "works fine" in the modified configuration</li>
                    <li><strong>Alarm threshold adjustments</strong> made to reduce nuisance alerts, which simultaneously reduce the system's ability to detect genuine pre-failure conditions</li>
                    <li><strong>PM scope reductions</strong> where maintenance procedures are shortened "just this time" due to scheduling pressure, and the shortened version becomes the de facto standard</li>
                    <li><strong>Workaround procedures</strong> that compensate for known defects but are never documented in formal SOPs, creating dependency on specific individuals who know the workaround</li>
                    <li><strong>Deferred <span class="tip" data-tip="Management of Change &mdash; A systematic approach to dealing with changes in an organization, ensuring risks are assessed and controlled before implementation">MoC</span> reviews</strong> where changes are implemented under time pressure with promises of post-implementation review that never occurs</li>
                </ul>

                <h3>3.3 Knowledge Loss</h3>

                <p>Knowledge loss is a frequently underestimated source of technical debt. When experienced personnel leave a facility &mdash; through retirement, promotion, or organizational restructuring &mdash; they take with them understanding of system quirks, historical failure modes, undocumented modifications, and the reasoning behind non-obvious configurations. This knowledge often represents years of accumulated operational intelligence that cannot be recreated from documentation alone because much of it was never documented.</p>

                <p>The impact of knowledge loss is particularly severe in data centers because:</p>

                <ul>
                    <li>Critical infrastructure systems have long lives (15-30 years), often exceeding the tenure of any individual operator</li>
                    <li>Many operational decisions are based on understanding of specific equipment behavior that differs from generic manufacturer documentation</li>
                    <li>Emergency response effectiveness depends heavily on operator familiarity with facility-specific failure modes and recovery paths</li>
                    <li>Handover processes rarely capture the "why" behind configurations, only the "what"</li>
                </ul>

                <h3>3.4 Vendor Lock-in</h3>

                <p>Vendor lock-in creates a structural form of technical debt that constrains future decision-making and inflates costs. When proprietary systems, closed protocols, or exclusive maintenance agreements limit the facility's ability to source competitive alternatives, the result is reduced negotiating power, limited innovation adoption, and dependency on a single vendor's product roadmap, support quality, and business continuity. Schneider Electric's White Paper 37 on the <span class="tip" data-tip="Total Cost of Ownership &mdash; A financial estimate intended to help determine the direct and indirect costs of a system or product, including acquisition, operation, maintenance, and disposal costs over its entire lifecycle">TCO</span> of data center infrastructure identifies vendor dependency as a significant long-term cost driver.<a href="#ref9" class="src-ref" title="Schneider WP37">[9]</a></p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Lock-in Type</th>
                                <th>Example</th>
                                <th>Cost Impact</th>
                                <th>Debt Mechanism</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Proprietary Controls</td>
                                <td>BMS on vendor-specific protocol</td>
                                <td>30-50% premium on integration</td>
                                <td>Cannot integrate new equipment without vendor involvement</td>
                            </tr>
                            <tr>
                                <td>Exclusive Spares</td>
                                <td>UPS modules with no aftermarket</td>
                                <td>50-200% markup on parts</td>
                                <td>Extends MTTR when vendor supply chain fails</td>
                            </tr>
                            <tr>
                                <td>Certification Lock</td>
                                <td>Warranty voided by third-party service</td>
                                <td>20-40% premium on service</td>
                                <td>Prevents competitive bidding for maintenance</td>
                            </tr>
                            <tr>
                                <td>Software Dependency</td>
                                <td>DCIM requiring specific OS version</td>
                                <td>Forced upgrade cycles</td>
                                <td>Security vulnerabilities when OS goes EOL</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <!-- Section 4: Compound Risk Analogy -->
                <h2 id="section-4"><span class="section-number">4</span> Compound Risk Analogy</h2>

                <p>The financial debt metaphor is more than illustrative &mdash; it is structurally accurate. Technical debt in physical infrastructure behaves according to the same compounding principles as financial debt, and understanding this analogy provides a framework for quantitative risk assessment that decision-makers find intuitive.</p>

                <h3>4.1 The Interest Mechanism</h3>

                <p>When a maintenance task is deferred, the immediate savings (avoided cost, avoided downtime risk from the maintenance window) represents the "principal." However, the longer the task remains deferred, the more "interest" accrues in the form of:</p>

                <ul>
                    <li><strong>Increasing failure probability</strong> &mdash; components degrade non-linearly, with failure rates accelerating as equipment ages beyond design parameters</li>
                    <li><strong>Rising remediation cost</strong> &mdash; a maintenance task that costs X today may cost 1.5X next year due to further degradation, and potentially 3-5X if it results in an emergency repair after failure</li>
                    <li><strong>Expanding blast radius</strong> &mdash; deferred items in interconnected systems create compound failure modes where a single component failure cascades through adjacent systems</li>
                    <li><strong>Knowledge decay</strong> &mdash; the longer an item is deferred, the fewer people remember the original assessment, the design intent, or the specific risk it represents</li>
                </ul>

                <div class="formula-box">
                    <div class="formula-box-title">Compound Risk Equation</div>
                    <p style="margin:0; font-size:0.85rem;">
                        <span style="color:#7c3aed;">Risk<sub>t</sub></span> = Risk<sub>0</sub> &times; (1 + r)<sup>t</sup><br><br>
                        Where:<br>
                        &bull; Risk<sub>0</sub> = initial risk score at time of deferral<br>
                        &bull; r = annual compounding rate (typically 0.12&ndash;0.20 for infrastructure)<br>
                        &bull; t = years since deferral<br><br>
                        A deferred item with initial risk score of 25 compounds to:<br>
                        &bull; Year 1: 25 &times; 1.15 = <strong>28.8</strong><br>
                        &bull; Year 3: 25 &times; 1.15<sup>3</sup> = <strong>38.0</strong><br>
                        &bull; Year 5: 25 &times; 1.15<sup>5</sup> = <strong>50.3</strong> (doubled risk)
                    </p>
                </div>

                <h3>4.2 The Bankruptcy Threshold</h3>

                <p>Just as financial debt becomes unserviceable when interest payments exceed available cash flow, technical debt reaches a "bankruptcy" threshold when the accumulated remediation backlog exceeds the facility's ability to execute maintenance without unacceptable operational risk. At this point, every remediation attempt carries significant risk of causing the very outage it is trying to prevent, because the number of unknowns and undocumented states makes it impossible to fully predict the impact of any change.</p>

                <p>Dekker's work on drift in complex systems describes this phenomenon: systems that have accumulated sufficient latent conditions reach a point where the next perturbation &mdash; regardless of how small &mdash; triggers a disproportionate response.<a href="#ref10" class="src-ref" title="Dekker, 2011">[10]</a> In practical terms, this manifests as facilities where:</p>

                <ul>
                    <li>Every maintenance window generates anxiety because "we don't know what else might be affected"</li>
                    <li>Incident response takes longer because responders cannot trust documentation or assumptions about system state</li>
                    <li>Management becomes increasingly risk-averse about authorized maintenance, paradoxically increasing the debt further</li>
                    <li>Staff turnover accelerates because experienced operators recognize the growing gap between the facility's apparent stability and its actual fragility</li>
                </ul>

                <div class="key-insight">
                    <strong>Warning Sign</strong>
                    When operations teams begin describing the facility as "running on hope" or "held together with workarounds," the organization has likely passed the compound interest inflection point. At this stage, incremental remediation is insufficient &mdash; a structured, risk-prioritized debt reduction program is required, analogous to financial debt restructuring.
                </div>

                <!-- Article Image 2 -->
                <figure style="margin: 2rem 0; text-align: center;">
                    <img src="Article/Article_5 02.02.26/5.2.jpg" alt="Bathtub curve and Weibull reliability analysis for physical security access control systems" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
                </figure>

                <!-- Section 5: Bathtub Curve & Weibull Analysis -->
                <h2 id="section-5"><span class="section-number">5</span> Bathtub Curve &amp; Weibull Analysis</h2>

                <p>Reliability engineering provides the mathematical framework for understanding why technical debt creates increasing risk over time. The bathtub curve and <span class="tip" data-tip="Weibull Distribution &mdash; A continuous probability distribution used in reliability engineering to model time-to-failure data. Named after Swedish mathematician Waloddi Weibull who described it in 1951.">Weibull</span> distribution are the foundational tools for quantifying this relationship.<a href="#ref4" class="src-ref" title="Moubray, 1997">[4]</a></p>

                <h3>5.1 The Bathtub Curve</h3>

                <p>The bathtub curve describes the failure rate pattern observed across the lifecycle of physical equipment. It comprises three distinct phases:</p>

                <ul>
                    <li><strong>Infant Mortality (Early Failure)</strong> &mdash; elevated failure rates immediately after installation due to manufacturing defects, installation errors, or design flaws that only manifest under operational conditions. In data centers, this phase typically lasts 6-18 months and is mitigated by commissioning, testing, and burn-in procedures</li>
                    <li><strong>Useful Life (Random Failure)</strong> &mdash; a period of relatively constant, low failure rate where failures are primarily random (not age-related). This is the "design life" period where the system operates as intended. For most data center infrastructure, this phase extends from year 1-2 through year 8-15 depending on the system</li>
                    <li><strong>Wear-Out (End of Life)</strong> &mdash; increasing failure rates as components degrade beyond their design parameters. The transition from useful life to wear-out is not abrupt &mdash; it follows a probability distribution that can be characterized mathematically using the Weibull function</li>
                </ul>

                <h3>5.2 Weibull Distribution Parameters</h3>

                <p>The Weibull distribution is defined by two parameters that have direct physical meaning in reliability analysis:</p>

                <div class="formula-box">
                    <div class="formula-box-title">Weibull Hazard Function</div>
                    <p style="margin:0; font-size:0.85rem;">
                        <span style="color:#7c3aed;">h(t)</span> = (&beta;/&eta;) &times; (t/&eta;)<sup>&beta;-1</sup><br><br>
                        Where:<br>
                        &bull; h(t) = hazard rate (instantaneous failure rate) at time t<br>
                        &bull; &beta; (beta) = shape parameter<br>
                        &nbsp;&nbsp;&mdash; &beta; &lt; 1: decreasing failure rate (infant mortality)<br>
                        &nbsp;&nbsp;&mdash; &beta; = 1: constant failure rate (useful life, exponential)<br>
                        &nbsp;&nbsp;&mdash; &beta; &gt; 1: increasing failure rate (wear-out)<br>
                        &bull; &eta; (eta) = scale parameter (characteristic life in months)<br><br>
                        <strong>Typical data center equipment parameters:</strong><br>
                        &bull; UPS batteries: &beta; = 2.5&ndash;3.5, &eta; = 48&ndash;60 months<br>
                        &bull; Mechanical systems: &beta; = 1.5&ndash;2.5, &eta; = 120&ndash;180 months<br>
                        &bull; Electrical connections: &beta; = 2.0&ndash;3.0, &eta; = 60&ndash;96 months<br>
                        &bull; Electronic controls: &beta; = 1.2&ndash;2.0, &eta; = 96&ndash;144 months
                    </p>
                </div>

                <h3>5.3 Implications for Technical Debt</h3>

                <p>The Weibull framework reveals why technical debt creates accelerating risk. When maintenance is deferred, equipment operates further into the wear-out phase (high beta region) where the hazard rate increases rapidly. A UPS battery string at month 48 (of a 60-month characteristic life with beta = 2.5) has a hazard rate of 0.064 per month. By month 72, the same string has a hazard rate of 0.108 &mdash; a 69% increase. By month 84, the rate reaches 0.144 &mdash; a 125% increase from the month-48 baseline. This is the mathematical basis for why "just one more year" of deferred replacement dramatically changes the risk profile.</p>

                <p>IEEE 493 (<span class="tip" data-tip="IEEE 493 &mdash; IEEE Recommended Practice for the Design of Reliable Industrial and Commercial Power Systems, commonly known as the 'Gold Book', providing reliability data and analytical methods">Gold Book</span>) provides failure rate data and <span class="tip" data-tip="Mean Time Between Failures &mdash; The average time between system breakdowns. A key reliability metric calculated as total operational time divided by the number of failures. Higher MTBF indicates greater reliability.">MTBF</span> benchmarks for common data center components that, when combined with Weibull analysis, enables quantitative risk scoring of deferred maintenance items.<a href="#ref5" class="src-ref" title="IEEE 493, 2007">[5]</a></p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>&beta; (Shape)</th>
                                <th>&eta; (Scale, months)</th>
                                <th>Hazard at 80% Life</th>
                                <th>Hazard at 120% Life</th>
                                <th>Increase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>UPS Battery (VRLA)</td>
                                <td>2.5</td>
                                <td>60</td>
                                <td>0.056</td>
                                <td>0.130</td>
                                <td style="color:#ef4444; font-weight:700;">+132%</td>
                            </tr>
                            <tr>
                                <td>Chiller Compressor</td>
                                <td>2.0</td>
                                <td>144</td>
                                <td>0.009</td>
                                <td>0.017</td>
                                <td style="color:#f59e0b; font-weight:700;">+89%</td>
                            </tr>
                            <tr>
                                <td>ATS Mechanism</td>
                                <td>2.2</td>
                                <td>96</td>
                                <td>0.015</td>
                                <td>0.030</td>
                                <td style="color:#ef4444; font-weight:700;">+100%</td>
                            </tr>
                            <tr>
                                <td>Generator Fuel System</td>
                                <td>1.8</td>
                                <td>120</td>
                                <td>0.010</td>
                                <td>0.016</td>
                                <td style="color:#f59e0b; font-weight:700;">+60%</td>
                            </tr>
                            <tr>
                                <td>BMS Controller</td>
                                <td>1.5</td>
                                <td>108</td>
                                <td>0.010</td>
                                <td>0.014</td>
                                <td style="color:#f59e0b; font-weight:700;">+40%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <!-- Section 6: Case Context -->
                <h2 id="section-6"><span class="section-number">6</span> Case Context: 15MW Facility</h2>

                <p>To ground the theoretical framework in operational reality, we examine a composite case study based on conditions observed across multiple data center facilities. This case represents a 15MW critical power capacity colocation facility that has been operational for 8 years. During a comprehensive technical debt audit, 127 deferred items were identified across all infrastructure systems.</p>

                <h3>6.1 Facility Profile</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Value</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Critical IT Power</td>
                                <td>15 MW</td>
                                <td>Operating at ~78% of capacity</td>
                            </tr>
                            <tr>
                                <td>Facility Age</td>
                                <td>8 years</td>
                                <td>Original equipment, Phase 1 commissioning 2017</td>
                            </tr>
                            <tr>
                                <td>Design Tier</td>
                                <td>Tier III (Concurrently Maintainable)</td>
                                <td>2N power, N+1 cooling</td>
                            </tr>
                            <tr>
                                <td>PUE</td>
                                <td>1.52 (design: 1.35)</td>
                                <td>Drift attributable to deferred optimization</td>
                            </tr>
                            <tr>
                                <td>Deferred Items</td>
                                <td>127</td>
                                <td>Across all MEP and control systems</td>
                            </tr>
                            <tr>
                                <td>Annual Revenue</td>
                                <td>$50M</td>
                                <td>Colocation services and managed hosting</td>
                            </tr>
                            <tr>
                                <td>Annual Maintenance Budget</td>
                                <td>$2.1M</td>
                                <td>2.8% of <span class="tip" data-tip="Capital Expenditure &mdash; Funds used by a company to acquire, upgrade, and maintain physical assets such as property, plants, buildings, technology, or equipment">CAPEX</span>, below 3-5% industry guidance</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <h3>6.2 Debt Distribution</h3>

                <p>The 127 deferred items were classified by criticality using a three-tier framework aligned with <span class="tip" data-tip="ISO 55001 &mdash; International standard for Asset Management Systems, specifying requirements for establishing, implementing, maintaining, and improving an asset management system">ISO 55001</span> asset criticality assessment principles:<a href="#ref3" class="src-ref" title="ISO 55001, 2014">[3]</a></p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Criticality Level</th>
                                <th>Count</th>
                                <th>%</th>
                                <th>Description</th>
                                <th>Example Items</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:#ef4444; font-weight:700;">Critical</td>
                                <td>25</td>
                                <td>20%</td>
                                <td>Direct impact on redundancy or capacity</td>
                                <td>UPS capacitor replacement, ATS testing, generator fuel polishing</td>
                            </tr>
                            <tr>
                                <td style="color:#f59e0b; font-weight:700;">Major</td>
                                <td>45</td>
                                <td>35%</td>
                                <td>Degraded performance or reduced margin</td>
                                <td>Chiller coil cleaning, PDU thermal imaging, BMS sensor calibration</td>
                            </tr>
                            <tr>
                                <td style="color:#10b981; font-weight:700;">Minor</td>
                                <td>57</td>
                                <td>45%</td>
                                <td>Cosmetic or low-impact operational items</td>
                                <td>Labeling updates, cable management, painting, documentation updates</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <h3>6.3 Average Age of Deferred Items</h3>

                <p>The average age of the 127 deferred items was 18 months, with significant variation by criticality. Critical items had an average deferral age of 14 months (indicating they were identified relatively recently but remain unaddressed), while minor items averaged 24 months (reflecting long-standing low-priority items that gradually accumulated). The oldest deferred item &mdash; replacement of an original-equipment BMS controller running an unsupported operating system &mdash; had been in the backlog for 5 years.</p>

                <div class="info-box critical">
                    <div class="info-box-title">Audit Finding</div>
                    <p style="margin:0;">Of the 25 critical items, 8 were directly related to the facility's ability to maintain concurrent maintainability (Tier III design intent). If any two of these 8 items were to fail simultaneously during a maintenance window, the facility would experience a partial or complete loss of redundancy &mdash; effectively operating as a Tier I facility for the duration of the repair. The probability of such co-occurrence increases non-linearly with the age of the deferred items, as demonstrated by the Weibull analysis in Section 5.</p>
                </div>

                <h3>6.4 Financial Context</h3>

                <p>The total estimated remediation cost for all 127 items was $1.9M, against an annual maintenance budget of $2.1M that was already fully committed to routine operations. This created a classic debt trap: the facility could not address the backlog without either additional funding or reducing routine maintenance, which would generate new debt items. Moubray's principles of <span class="tip" data-tip="Reliability-Centered Maintenance &mdash; A process for determining the maintenance requirements of any physical asset in its operating context, focused on preserving system function rather than equipment condition">RCM</span> emphasize that maintenance decisions must be based on consequences of failure, not simply on equipment condition.<a href="#ref4" class="src-ref" title="Moubray, 1997">[4]</a></p>

                <p>The annual revenue at risk from a significant outage (defined as >4 hours affecting >50% of load) was estimated at $5M based on contractual <span class="tip" data-tip="Service Level Agreement &mdash; A commitment between a service provider and a client defining the level of service expected, including uptime guarantees and financial penalties for non-compliance">SLA</span> penalties, customer churn projections, and reputation damage modeling. This framing &mdash; $1.9M remediation investment protecting $5M+ annual revenue at risk &mdash; fundamentally changed the budget discussion from "maintenance cost" to "risk management investment."</p>

                <!-- Section 7: Quantifying Framework -->
                <h2 id="section-7"><span class="section-number">7</span> Quantifying Framework</h2>

                <p>Effective management of technical debt requires moving from subjective assessment ("we think this is risky") to quantitative scoring ("this item scores 72 on a 0-100 risk scale"). A quantitative framework enables comparison across disparate debt items, supports rational prioritization, and provides a common language for communicating risk to non-technical stakeholders. The EN 13306 standard on maintenance terminology provides the foundational vocabulary for this framework.<a href="#ref12" class="src-ref" title="EN 13306, 2017">[12]</a></p>

                <h3>7.1 Risk Scoring Model</h3>

                <p>The risk score for each deferred item is calculated as the product of three factors: criticality weight, age factor, and failure probability. This multiplicative approach ensures that high-criticality items are always prioritized, while also capturing the compounding effect of age on failure probability.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Risk Scoring Formula</div>
                    <p style="margin:0; font-size:0.85rem;">
                        <span style="color:#7c3aed;">Risk Score</span> = C<sub>w</sub> &times; A<sub>f</sub> &times; P<sub>f</sub> &times; F<sub>m</sub><br><br>
                        Where:<br>
                        &bull; C<sub>w</sub> = Criticality weight (Critical=10, Major=5, Minor=1)<br>
                        &bull; A<sub>f</sub> = Age factor = 1 + (months_deferred / 24)<br>
                        &bull; P<sub>f</sub> = Failure probability from Weibull hazard function<br>
                        &bull; F<sub>m</sub> = Facility age multiplier = 1 + (facility_age_years / 20)<br><br>
                        <strong>Example calculation:</strong><br>
                        Critical UPS capacitor, deferred 18 months, facility age 8 years:<br>
                        &bull; C<sub>w</sub> = 10<br>
                        &bull; A<sub>f</sub> = 1 + (18/24) = 1.75<br>
                        &bull; P<sub>f</sub> = h(18) with &beta;=2.5, &eta;=60 = 0.032<br>
                        &bull; F<sub>m</sub> = 1 + (8/20) = 1.4<br>
                        &bull; <strong>Score = 10 &times; 1.75 &times; 0.032 &times; 1.4 = 0.784</strong> (normalized to 0-100 scale)
                    </p>
                </div>

                <h3>7.2 Criticality Assessment</h3>

                <p>The criticality classification follows <span class="tip" data-tip="ISO 55001 &mdash; International standard for Asset Management Systems, specifying requirements for establishing, implementing, maintaining, and improving an asset management system">ISO 55001</span> principles and is based on the consequence of failure, not the probability of failure or the cost of remediation. This is a fundamental distinction: a $500 item on a critical system path may warrant higher priority than a $50,000 item on a redundant path.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Level</th>
                                <th>Weight</th>
                                <th>Consequence of Failure</th>
                                <th>Impact on Availability</th>
                                <th>Decision Timeframe</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:#ef4444; font-weight:700;">Critical</td>
                                <td>10</td>
                                <td>Loss of redundancy or capacity</td>
                                <td>Direct impact on Tier rating</td>
                                <td>Address within 90 days</td>
                            </tr>
                            <tr>
                                <td style="color:#f59e0b; font-weight:700;">Major</td>
                                <td>5</td>
                                <td>Degraded performance or reduced margin</td>
                                <td>Reduced ability to withstand N-1 event</td>
                                <td>Address within 180 days</td>
                            </tr>
                            <tr>
                                <td style="color:#10b981; font-weight:700;">Minor</td>
                                <td>1</td>
                                <td>Operational inconvenience</td>
                                <td>No direct availability impact</td>
                                <td>Address within 12 months</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <h3>7.3 Aggregate Portfolio Risk</h3>

                <p>Individual item risk scores are aggregated to produce a facility-level technical debt risk index. This aggregate score is not simply the sum of individual scores &mdash; it must account for interactions between deferred items. Two deferred items on the same system path create more risk than two deferred items on independent paths. The aggregate score therefore includes an interaction factor that increases when multiple deferred items affect the same functional system.</p>

                <p>The Uptime Institute's 2024 survey data indicates that facilities with aggregate technical debt scores above 60 (on a 0-100 scale) experience 3.2x the frequency of severity-3+ incidents compared to facilities scoring below 30.<a href="#ref7" class="src-ref" title="Uptime Institute, 2024">[7]</a> This empirical correlation validates the scoring framework and provides management with a defensible threshold for triggering remediation investment.</p>

                <div class="key-insight">
                    <strong>Portfolio View</strong>
                    Technical debt must be managed as a portfolio, not as individual items. Just as financial risk management considers correlation between assets, infrastructure debt management must consider how deferred items interact across systems. A facility with 50 uncorrelated minor items may be safer than one with 10 correlated critical items.
                </div>

                <!-- Section 8: Remediation Strategy -->
                <h2 id="section-8"><span class="section-number">8</span> Remediation Strategy</h2>

                <p>Remediating accumulated technical debt in a live data center requires a structured approach that balances urgency against the operational risk of the remediation work itself. The paradox of debt remediation is that the most critical items are often the most dangerous to address, because they involve systems that are currently providing (degraded) service and any maintenance window creates a period of reduced resilience.</p>

                <h3>8.1 Prioritization Matrix</h3>

                <p>Items are prioritized using a two-dimensional matrix that plots risk score against remediation complexity. This creates four quadrants that guide execution strategy:</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Quadrant</th>
                                <th>Risk Score</th>
                                <th>Complexity</th>
                                <th>Strategy</th>
                                <th>Timeline</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:#ef4444; font-weight:700;">Q1: Critical Quick Wins</td>
                                <td>High (&gt;70)</td>
                                <td>Low</td>
                                <td>Immediate execution, minimal planning needed</td>
                                <td>0&ndash;30 days</td>
                            </tr>
                            <tr>
                                <td style="color:#f59e0b; font-weight:700;">Q2: Critical Complex</td>
                                <td>High (&gt;70)</td>
                                <td>High</td>
                                <td>Detailed MoC, phased execution, risk-assessed MW</td>
                                <td>30&ndash;90 days</td>
                            </tr>
                            <tr>
                                <td style="color:#06b6d4; font-weight:700;">Q3: Low-Risk Quick Wins</td>
                                <td>Low (&lt;40)</td>
                                <td>Low</td>
                                <td>Bundle into routine maintenance windows</td>
                                <td>90&ndash;180 days</td>
                            </tr>
                            <tr>
                                <td style="color:#10b981; font-weight:700;">Q4: Low-Risk Complex</td>
                                <td>Low (&lt;40)</td>
                                <td>High</td>
                                <td>Schedule for next major outage window or capital project</td>
                                <td>180&ndash;365 days</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="table-source" style="font-size:0.72rem;color:#64748b;font-style:italic;margin:0.4rem 0 1.2rem;">Source: Publicly available industry data and published standards. For educational and research purposes only.</p>

                <h3>8.2 Phased Approach</h3>

                <p>A phased remediation approach is essential for facilities with significant accumulated debt. Attempting to address all items simultaneously overwhelms operational capacity, introduces excessive change risk, and typically leads to poor execution quality. The recommended three-phase approach is:</p>

                <ul>
                    <li><strong>Phase 1: Stabilization (Months 1-3)</strong> &mdash; Address Q1 items (high risk, low complexity). These are the "quick wins" that materially reduce aggregate risk with minimal operational disruption. Typically includes sensor replacements, documentation updates for critical systems, overdue PM completion, and software patches</li>
                    <li><strong>Phase 2: Risk Reduction (Months 3-12)</strong> &mdash; Address Q2 items (high risk, high complexity) through carefully planned <span class="tip" data-tip="Management of Change &mdash; A systematic approach to dealing with changes in an organization, ensuring risks are assessed and controlled before implementation">MoC</span> processes. Each item requires detailed method statements, risk assessments, rollback procedures, and contingency plans. Includes UPS component replacements, ATS refurbishment, generator overhauls, and <span class="tip" data-tip="Building Management System &mdash; A computer-based control system installed in buildings to manage and monitor mechanical and electrical equipment">BMS</span> upgrades</li>
                    <li><strong>Phase 3: Optimization (Months 12-36)</strong> &mdash; Address Q3 and Q4 items, implement permanent solutions for recurring issues, and establish ongoing debt prevention processes. Includes equipment lifecycle replacement programs, documentation management systems, and <span class="tip" data-tip="Condition-Based Maintenance &mdash; A maintenance strategy that monitors the actual condition of equipment to decide what maintenance needs to be done, using sensors and analytics to predict failures before they occur">CBM</span> implementation</li>
                </ul>

                <h3>8.3 Cost Escalation Model</h3>

                <p>The cost of remediation increases with the age of the deferred item. This escalation follows a predictable pattern based on field observations across multiple facilities:</p>

                <div class="formula-box">
                    <div class="formula-box-title">Cost Escalation Formula</div>
                    <p style="margin:0; font-size:0.85rem;">
                        <span style="color:#7c3aed;">Escalated Cost</span> = Original Cost &times; (1 + (months_deferred / 24) &times; 0.5)<br><br>
                        This implies:<br>
                        &bull; 6 months deferred: 12.5% cost increase<br>
                        &bull; 12 months deferred: 25% cost increase<br>
                        &bull; 24 months deferred: 50% cost increase<br>
                        &bull; 48 months deferred: 100% cost increase (doubled)<br><br>
                        The escalation reflects: parts price increases, expanded scope of work<br>
                        (secondary damage), emergency vs. planned rates, and additional<br>
                        engineering/assessment costs for aged items.
                    </p>
                </div>

                <div class="info-box success">
                    <div class="info-box-title">Budget Recommendation</div>
                    <p style="margin:0;">Industry guidance suggests allocating <strong>3-5% of original <span class="tip" data-tip="Capital Expenditure &mdash; Funds used by a company to acquire, upgrade, and maintain physical assets">CAPEX</span></strong> annually for maintenance and lifecycle replacement. Facilities that consistently allocate below this threshold accumulate technical debt at a rate that eventually requires capital project-level remediation investment &mdash; typically 2-3x what would have been spent on timely maintenance.</p>
                </div>

                <!-- Section 9: Interactive Canvas -->
                <h2 id="section-9"><span class="section-number">9</span> Interactive: Technical Debt Accumulation</h2>

                <p>The following interactive visualization demonstrates how technical debt accumulation correlates with operational risk over the life of a data center facility. Use the slider to adjust the debt accumulation rate and observe how different management approaches affect the risk trajectory. Hollnagel's <span class="tip" data-tip="Functional Resonance Analysis Method &mdash; A method for analyzing how outcomes emerge from the variability of everyday performance in complex socio-technical systems">FRAM</span> framework suggests that system performance variability &mdash; including technical debt accumulation &mdash; follows non-linear patterns that require continuous monitoring.<a href="#ref11" class="src-ref" title="Hollnagel, 2012">[11]</a></p>

                <div class="chart-container">
                    <div class="chart-title">Technical Debt Accumulation vs Operational Risk</div>
                    <div class="chart-subtitle">Drag the slider to model different debt accumulation scenarios over a 20-year facility lifecycle</div>

                    <div class="chart-wrapper">
                        <canvas id="debtChart" class="chart-canvas" width="800" height="380"></canvas>
                    </div>

                    <div class="control-row">
                        <span class="control-label">Facility Age (Years):</span>
                        <input type="range" id="ageSlider" class="control-slider" min="1" max="25" value="8">
                        <span class="control-value" id="ageValue">8 yr</span>
                    </div>

                    <div class="control-row">
                        <span class="control-label">Debt Accumulation Rate:</span>
                        <input type="range" id="debtSlider" class="control-slider" min="0" max="100" value="40">
                        <span class="control-value" id="debtValue">40%</span>
                    </div>

                    <div class="legend-row">
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #f59e0b;"></span>
                            Operational Risk Level
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #10b981;"></span>
                            Managed Debt Baseline
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #ef4444;"></span>
                            Critical Threshold
                        </div>
                    </div>

                    <div class="callout-row">
                        <div class="callout-card">
                            <div class="callout-label">Current Risk Level</div>
                            <div class="callout-value" id="finalRisk">45</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Risk Trajectory</div>
                            <div class="callout-value" id="trajectory">Rising</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Debt Status</div>
                            <div class="callout-value" id="debtStatus">Moderate</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Years to Critical</div>
                            <div class="callout-value" id="yearsToCritical">4</div>
                        </div>
                    </div>
                </div>

                <!-- Section 10: Calculator -->
                <h2 id="section-10"><span class="section-number">10</span> Technical Debt Risk Analyzer</h2>

                <p>This interactive calculator applies the quantitative framework described in Section 7 to estimate the current risk exposure, projected risk trajectory, and cost implications of a facility's technical debt portfolio. Adjust the inputs to model your facility's specific conditions.</p>

                <div class="calculator-section" style="position:relative;">
                    <h3 class="calculator-title">Technical Debt Risk Analyzer</h3>
                    <p class="calculator-subtitle">Quantify your facility's technical debt exposure using Weibull-based risk scoring</p>

                    <!-- Mode Toggle + Action Buttons -->
                    <div class="debt-toolbar-row">
                        <div class="debt-mode-bar">
                            <button class="debt-mode-btn active" id="debtModeFree" onclick="switchDebtMode('free')"><i class="fas fa-chart-simple"></i> Free Assessment</button>
                            <button class="debt-mode-btn" id="debtModePro" onclick="switchDebtMode('pro')"><i class="fas fa-microscope"></i> Pro Analysis <span class="gated-badge" id="debtProBadge">PRO</span></button>
                        </div>
                        <div class="debt-toolbar-actions">
                            <button class="debt-action-btn" onclick="debtResetDefaults()" style="padding:8px 14px;font-size:0.78rem;"><i class="fas fa-rotate-left"></i> Reset</button>
                            <button class="debt-action-btn primary" id="debtBtnPdf" onclick="debtShowLogin()" style="padding:8px 14px;font-size:0.78rem;"><i class="fas fa-file-pdf"></i> Export PDF</button>
                        </div>
                    </div>

                    <div class="calc-grid">
                        <div class="calc-input-group">
                            <label class="calc-label">Deferred Items Count <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Deferred Items Count</div><div class="tooltip-desc">Total number of maintenance items currently deferred/backlogged. Includes all criticality levels. Higher counts create compound risk — each deferred item increases failure probability of adjacent systems.</div><div class="tooltip-formula">Benchmark: &gt;50 items = elevated risk (NIST SP 800-82)</div></span></span></label>
                            <input type="number" class="calc-input" id="calcItems" value="45" min="1" max="500">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Avg Age (Months) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Average Deferral Age</div><div class="tooltip-desc">Mean number of months items have been deferred. Risk compounds non-linearly — Weibull analysis shows hazard rate increases sharply after 12 months. Items &gt;24 months enter wear-out failure zone.</div><div class="tooltip-formula">Formula: Hazard h(t) = (&beta;/&eta;)(t/&eta;)^(&beta;-1), &beta;=2.5</div></span></span></label>
                            <input type="number" class="calc-input" id="calcAge" value="18" min="1" max="120">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Facility Age (Years) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Facility Age</div><div class="tooltip-desc">Years since facility commissioning. Older facilities have higher baseline failure rates and more interdependent deferred items. The bathtub curve shifts from random to wear-out failures after 7-10 years.</div><div class="tooltip-formula">Benchmark: 0-5yr=infant, 5-15yr=useful life, &gt;15yr=wear-out</div></span></span></label>
                            <input type="number" class="calc-input" id="calcFacilityAge" value="8" min="1" max="30">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Avg Remediation Cost ($) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Average Remediation Cost</div><div class="tooltip-desc">Mean cost to remediate a single deferred item including parts, labor, outage window, and testing. Costs escalate 12-18% per year of deferral due to part obsolescence and cascading scope.</div><div class="tooltip-formula">Benchmark: $5K-$50K typical for MEP equipment</div></span></span></label>
                            <input type="number" class="calc-input" id="calcCost" value="15000" min="100" max="500000">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Annual Revenue ($) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Annual Facility Revenue</div><div class="tooltip-desc">Total annual revenue generated by or dependent on the facility. Used to calculate revenue-at-risk and SLA penalty exposure from unplanned outages caused by deferred maintenance failures.</div><div class="tooltip-formula">Benchmark: $3K-$10K per kW/year for colocation</div></span></span></label>
                            <input type="number" class="calc-input" id="calcRevenue" value="50000000" min="1000000" max="1000000000">
                        </div>
                    </div>

                    <!-- Criticality Sliders -->
                    <div style="margin-bottom: 2rem;">
                        <label class="calc-label" style="margin-bottom: 0.75rem; display: block;">Criticality Distribution <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Criticality Distribution</div><div class="tooltip-desc">Breakdown of deferred items by criticality: Critical (immediate risk), Major (degraded performance), Minor (cosmetic/low impact).</div><div class="tooltip-formula">Risk-weighted: Critical 5x &middot; Major 2x &middot; Minor 1x</div></span></span></label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem;">
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.8rem; color: #ef4444; font-weight: 600;">% Critical <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Critical Items %</div><div class="tooltip-desc">Proportion of deferred items classified as Critical — single-point-of-failure equipment, life safety systems, or items with no redundancy. Critical items have 3x the failure impact multiplier.</div><div class="tooltip-formula">Benchmark: &gt;25% critical = immediate remediation program needed</div></span></span></span>
                                    <span class="slider-value" id="criticalVal">20%</span>
                                </div>
                                <input type="range" class="calc-slider" id="calcCritical" min="0" max="100" value="20">
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.8rem; color: #f59e0b; font-weight: 600;">% Major <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Major Items %</div><div class="tooltip-desc">Proportion classified as Major — redundant systems with degraded backup, approaching end-of-life, or compliance-affecting. Major items have 1.5x impact multiplier. Minor items (remainder) have 1.0x multiplier.</div><div class="tooltip-formula">Benchmark: Healthy portfolio &lt;40% Major</div></span></span></span>
                                    <span class="slider-value" id="majorVal">35%</span>
                                </div>
                                <input type="range" class="calc-slider" id="calcMajor" min="0" max="100" value="35">
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="font-size: 0.8rem; color: #10b981; font-weight: 600;">% Minor</span>
                                    <span class="slider-value" id="minorVal">45%</span>
                                </div>
                                <input type="range" class="calc-slider" id="calcMinor" min="0" max="100" value="45" disabled style="opacity:0.6;">
                            </div>
                        </div>
                    </div>

                    <!-- Risk Gauge -->
                    <div class="risk-gauge-container">
                        <div style="font-size: 0.9rem; color: #94a3b8; margin-bottom: 0.5rem;">Current Risk Score</div>
                        <div style="font-size: 3rem; font-weight: 800; color: #f59e0b;" id="riskScoreDisplay">0</div>
                        <div class="risk-gauge-bar">
                            <div class="risk-gauge-needle" id="riskNeedle" style="left: 0%;"></div>
                        </div>
                        <div class="risk-gauge-labels">
                            <span>0 - Low</span>
                            <span>25 - Moderate</span>
                            <span>50 - Elevated</span>
                            <span>75 - High</span>
                            <span>100 - Critical</span>
                        </div>
                    </div>

                    <!-- Results Grid -->
                    <div class="calc-results" style="margin-top: 2rem;">
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultRisk1yr">--</div>
                            <div class="calc-result-label">Projected Risk (1yr)</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultRisk3yr">--</div>
                            <div class="calc-result-label">Projected Risk (3yr)</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultRisk5yr">--</div>
                            <div class="calc-result-label">Projected Risk (5yr)</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultOriginalCost">--</div>
                            <div class="calc-result-label">Original Remediation Cost</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultEscalatedCost">--</div>
                            <div class="calc-result-label">Escalated Cost (Current)</div>
                            <div class="calc-result-sub" id="resultEscalationPct">--</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultRevenueAtRisk">--</div>
                            <div class="calc-result-label">Annual Revenue at Risk</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resultBudget">--</div>
                            <div class="calc-result-label">Recommended Annual Budget</div>
                            <div class="calc-result-sub">3-year remediation target</div>
                        </div>
                    </div>

                    <!-- Priority Breakdown -->
                    <div class="priority-grid">
                        <div class="priority-card">
                            <div class="priority-card-value" style="color: #ef4444;" id="criticalCount">--</div>
                            <div class="priority-card-label">Critical Items</div>
                        </div>
                        <div class="priority-card">
                            <div class="priority-card-value" style="color: #f59e0b;" id="majorCount">--</div>
                            <div class="priority-card-label">Major Items</div>
                        </div>
                        <div class="priority-card">
                            <div class="priority-card-value" style="color: #10b981;" id="minorCount">--</div>
                            <div class="priority-card-label">Minor Items</div>
                        </div>
                    </div>

                    <!-- Pro Output Panels (hidden by default) -->
                    <div id="debtProPanels" style="display:none;">
                        <!-- Panel 1: Monte Carlo Risk Distribution -->
                        <div class="pro-panel">
                            <div class="pro-panel-inner">
                                <div class="pro-panel-title"><i class="fas fa-dice"></i> Monte Carlo Risk Distribution</div>
                                <div class="calc-results-grid" id="proMCGrid">
                                    <div class="result-card"><div class="result-card-label">Risk Score p50 <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Median Risk Score</div><div class="rtd">50th percentile deferred maintenance risk score from Monte Carlo simulation.</div></span></span></div><div class="result-card-value" id="proRiskP50">--</div><div class="result-card-sub">Median estimate</div></div>
                                    <div class="result-card"><div class="result-card-label">Risk Score p80 <span class="res-tip">?<span class="res-tip-body"><div class="rtt">p80 Risk Score</div><div class="rtd">80th percentile risk — 80% of scenarios are below this level.</div></span></span></div><div class="result-card-value" id="proRiskP80">--</div><div class="result-card-sub">Conservative estimate</div></div>
                                    <div class="result-card"><div class="result-card-label">Risk Score p95 <span class="res-tip">?<span class="res-tip-body"><div class="rtt">p95 Risk Score</div><div class="rtd">95th percentile — captures tail risk from compounding deferral effects.</div></span></span></div><div class="result-card-value" id="proRiskP95">--</div><div class="result-card-sub">Worst-case plausible</div></div>
                                    <div class="result-card"><div class="result-card-label">Confidence Band <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Confidence Band</div><div class="rtd">Width of the 90% confidence interval. Wider = more uncertainty.</div></span></span></div><div class="result-card-value" id="proConfBand">--</div><div class="result-card-sub">80% confidence width</div></div>
                                    <div class="result-card"><div class="result-card-label">Simulation Runs <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Simulation Runs</div><div class="rtd">Number of Monte Carlo iterations used to estimate the risk distribution.</div></span></span></div><div class="result-card-value" id="proSimRuns">--</div><div class="result-card-sub">Monte Carlo iterations</div></div>
                                    <div class="result-card"><div class="result-card-label">Distribution Shape <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Distribution Shape</div><div class="rtd">Statistical shape of the risk distribution (normal, right-skewed, bimodal).</div></span></span></div><div class="result-card-value" id="proDistShape">--</div><div class="result-card-sub">Skewness indicator</div></div>
                                </div>
                                <canvas id="debtMCHistogram" width="800" height="280" style="width:100%;margin:1rem 0;display:block;"></canvas>
                            </div>
                            <div class="gated-overlay" onclick="debtShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Monte Carlo uncertainty quantification</div></div>
                        </div>

                        <!-- Panel 2: Cost & ROI Deep Dive -->
                        <div class="pro-panel">
                            <div class="pro-panel-inner">
                                <div class="pro-panel-title"><i class="fas fa-coins"></i> Cost &amp; ROI Deep Dive</div>
                                <div class="calc-results-grid" id="proCostGrid">
                                    <div class="result-card"><div class="result-card-label">NPV of Deferral Cost <span class="res-tip">?<span class="res-tip-body"><div class="rtt">NPV Deferral Cost</div><div class="rtd">Net Present Value of all costs caused by deferring maintenance over the analysis period.</div></span></span></div><div class="result-card-value" id="proNPV">--</div><div class="result-card-sub">5-year net present value</div></div>
                                    <div class="result-card"><div class="result-card-label">Cost of Inaction / Year <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Annual Inaction Cost</div><div class="rtd">Yearly cost of doing nothing — compound failure risk, SLA penalties, and emergency repairs.</div></span></span></div><div class="result-card-value" id="proInactionCost">--</div><div class="result-card-sub">Annual risk-weighted exposure</div></div>
                                    <div class="result-card"><div class="result-card-label">Break-Even Timeline <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Break-Even Timeline</div><div class="rtd">When the cost of remediation equals the cost of continued deferral.</div></span></span></div><div class="result-card-value" id="proBreakEven">--</div><div class="result-card-sub">Remediation pays for itself</div></div>
                                    <div class="result-card"><div class="result-card-label">ROI at 3 Years <span class="res-tip">?<span class="res-tip-body"><div class="rtt">3-Year ROI</div><div class="rtd">Return on investment if deferred items are remediated now, measured over 3 years.</div></span></span></div><div class="result-card-value" id="proROI3yr">--</div><div class="result-card-sub">Return on remediation invest</div></div>
                                    <div class="result-card"><div class="result-card-label">SLA Penalty Exposure <span class="res-tip">?<span class="res-tip-body"><div class="rtt">SLA Penalty Exposure</div><div class="rtd">Maximum potential SLA penalties from deferred maintenance failures.</div></span></span></div><div class="result-card-value" id="proSLAPenalty">--</div><div class="result-card-sub">Annual penalty risk estimate</div></div>
                                    <div class="result-card"><div class="result-card-label">Insurance Premium Impact <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Insurance Impact</div><div class="rtd">Estimated insurance premium increase due to deferred maintenance risk profile.</div></span></span></div><div class="result-card-value" id="proInsurance">--</div><div class="result-card-sub">Est. premium delta</div></div>
                                </div>
                            </div>
                            <div class="gated-overlay" onclick="debtShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">NPV, ROI &amp; financial exposure modeling</div></div>
                        </div>

                        <!-- Panel 3: Weibull Parameter Analysis -->
                        <div class="pro-panel">
                            <div class="pro-panel-inner">
                                <div class="pro-panel-title"><i class="fas fa-chart-area"></i> Weibull Parameter Analysis</div>
                                <div class="calc-results-grid" id="proWeibullGrid">
                                    <div class="result-card"><div class="result-card-label">Effective &beta; <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Weibull Shape Parameter</div><div class="rtd">Effective beta (shape) parameter for the Weibull reliability model. &beta;&gt;1 means increasing failure rate.</div><span class="rtf">&beta;&lt;1: infant mortality &middot; &beta;=1: random &middot; &beta;&gt;1: wear-out</span></span></span></div><div class="result-card-value" id="proBeta">--</div><div class="result-card-sub">Shape (wear-out indicator)</div></div>
                                    <div class="result-card"><div class="result-card-label">Effective &eta; <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Weibull Scale Parameter</div><div class="rtd">Characteristic life (eta) — age at which 63.2% of components have failed.</div></span></span></div><div class="result-card-value" id="proEta">--</div><div class="result-card-sub">Scale (characteristic life)</div></div>
                                    <div class="result-card"><div class="result-card-label">MTTF Estimate <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Mean Time To Failure</div><div class="rtd">Expected average operating time before failure based on Weibull parameters.</div></span></span></div><div class="result-card-value" id="proMTTF">--</div><div class="result-card-sub">Mean time to failure</div></div>
                                    <div class="result-card"><div class="result-card-label">Reliability at Design Life <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Reliability at Design Life</div><div class="rtd">Probability of surviving to the designed operational life without failure.</div></span></span></div><div class="result-card-value" id="proReliability">--</div><div class="result-card-sub">R(t) at current age</div></div>
                                    <div class="result-card"><div class="result-card-label">Hazard Rate Trend <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Hazard Rate Trend</div><div class="rtd">Direction of failure rate: increasing (wear-out), constant (random), or decreasing (burn-in).</div></span></span></div><div class="result-card-value" id="proHazardTrend">--</div><div class="result-card-sub">Increasing / constant / decreasing</div></div>
                                    <div class="result-card"><div class="result-card-label">B10 Life Estimate <span class="res-tip">?<span class="res-tip-body"><div class="rtt">B10 Life</div><div class="rtd">Age at which 10% of components are expected to have failed. Key for spare planning.</div></span></span></div><div class="result-card-value" id="proB10">--</div><div class="result-card-sub">Age at 10% failure probability</div></div>
                                </div>
                            </div>
                            <div class="gated-overlay" onclick="debtShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Weibull reliability parameters &amp; curves</div></div>
                        </div>

                        <!-- Panel 4: Remediation Capacity Planner -->
                        <div class="pro-panel">
                            <div class="pro-panel-inner">
                                <div class="pro-panel-title"><i class="fas fa-calendar-check"></i> Remediation Capacity Planner</div>
                                <div class="calc-results-grid" id="proCapacityGrid">
                                    <div class="result-card"><div class="result-card-label">Required Crew-Months <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Required Crew-Months</div><div class="rtd">Total person-months of work needed to remediate all deferred items.</div></span></span></div><div class="result-card-value" id="proCrewMonths">--</div><div class="result-card-sub">Total remediation effort</div></div>
                                    <div class="result-card"><div class="result-card-label">Optimal Phasing <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Optimal Phasing</div><div class="rtd">Recommended remediation phasing (quarters) to balance cost and risk reduction.</div></span></span></div><div class="result-card-value" id="proPhasing">--</div><div class="result-card-sub">Recommended wave count</div></div>
                                    <div class="result-card"><div class="result-card-label">Queue Wait Prob. <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Queue Wait Probability</div><div class="rtd">Probability remediation work must wait due to resource constraints.</div></span></span></div><div class="result-card-value" id="proQueueProb">--</div><div class="result-card-sub">Erlang-C delay probability</div></div>
                                    <div class="result-card"><div class="result-card-label">Throughput / Quarter <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Quarterly Throughput</div><div class="rtd">Number of deferred items that can be remediated per quarter.</div></span></span></div><div class="result-card-value" id="proThroughput">--</div><div class="result-card-sub">Achievable items per quarter</div></div>
                                </div>
                            </div>
                            <div class="gated-overlay" onclick="debtShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Erlang-C staffing &amp; phased remediation</div></div>
                        </div>

                        <!-- Panel 5: Scenario Sensitivity -->
                        <div class="pro-panel">
                            <div class="pro-panel-inner">
                                <div class="pro-panel-title"><i class="fas fa-shuffle"></i> Scenario Sensitivity</div>
                                <div class="calc-results-grid" id="proScenarioGrid">
                                    <div class="result-card"><div class="result-card-label">Fix Top 20% Impact <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Fix Top 20% Impact</div><div class="rtd">Risk reduction achieved by remediating only the top 20% highest-risk items.</div><span class="rtf">Pareto: 80% risk reduction from 20% effort</span></span></span></div><div class="result-card-value" id="proFixTop20">--</div><div class="result-card-sub">Risk reduction from Pareto</div></div>
                                    <div class="result-card"><div class="result-card-label">+50% Budget Impact <span class="res-tip">?<span class="res-tip-body"><div class="rtt">+50% Budget Impact</div><div class="rtd">Risk reduction from increasing the remediation budget by 50%.</div></span></span></div><div class="result-card-value" id="proBudget50">--</div><div class="result-card-sub">Accelerated remediation</div></div>
                                    <div class="result-card"><div class="result-card-label">Defer 2 More Years <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Defer 2 More Years</div><div class="rtd">Risk score projection if maintenance is deferred 2 additional years.</div></span></span></div><div class="result-card-value" id="proDefer2yr">--</div><div class="result-card-sub">Cost of continued deferral</div></div>
                                    <div class="result-card"><div class="result-card-label">Shift Criticality Mix <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Criticality Mix Shift</div><div class="rtd">Impact of reclassifying item criticality distribution on overall risk.</div></span></span></div><div class="result-card-value" id="proShiftMix">--</div><div class="result-card-sub">If 10% more items go critical</div></div>
                                </div>
                                <canvas id="debtTornadoChart" width="800" height="280" style="width:100%;margin:1rem 0;display:block;"></canvas>
                            </div>
                            <div class="gated-overlay" onclick="debtShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">What-if scenario modeling</div></div>
                        </div>

                        <!-- Executive Risk Narrative -->
                        <div id="debtNarrativeBox" style="display:none;background:rgba(245,158,11,0.05);border:1px solid rgba(245,158,11,0.2);border-radius:12px;padding:20px;margin-top:1rem;">
                            <h4 style="color:#f59e0b;margin:0 0 1rem;font-size:0.95rem;"><i class="fas fa-file-alt"></i> Executive Risk Assessment</h4>
                            <div id="debtNarrativeContent" style="font-size:0.85rem;color:#cbd5e1;line-height:1.7;"></div>
                        </div>
                    </div>

                    <div class="privacy-badge">
                        <i class="fas fa-shield-halved"></i> All calculations run in your browser — no data is sent to any server
                    </div>
                    <div class="benchmark-meta">
                        <span class="benchmark-meta-tag"><i class="fas fa-code-branch"></i> Model v1.0</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-calendar"></i> Updated Feb 2026</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-book"></i> Sources: NIST Weibull, ISO 55001, Uptime Institute 2023</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-info-circle"></i> Weibull hazard (&beta;=2.5, &eta;=60mo), 15% annual compounding</span>
                    </div>

                    <!-- Calculator Disclaimer -->
                    <div style="background:rgba(30,41,59,0.6);border:1px solid rgba(148,163,184,0.15);border-radius:12px;padding:1.25rem 1.5rem;margin-top:1.5rem;">
                        <div style="display:flex;align-items:flex-start;gap:0.75rem;">
                            <div style="color:#f59e0b;font-size:1rem;margin-top:2px;flex-shrink:0;"><i class="fas fa-triangle-exclamation"></i></div>
                            <div>
                                <div style="font-weight:700;font-size:0.8rem;color:#e2e8f0;margin-bottom:0.5rem;">Disclaimer &amp; Data Sources</div>
                                <p style="font-size:0.72rem;color:#94a3b8;line-height:1.65;margin:0 0 0.5rem 0;">This calculator is provided for <strong style="color:#cbd5e1;">educational and estimation purposes only</strong>. Results are approximations based on industry benchmarks and publicly available data. They should not be used as the sole basis for investment, procurement, or engineering decisions. Always consult qualified professionals for site-specific analysis.</p>
                                <p style="font-size:0.72rem;color:#94a3b8;line-height:1.65;margin:0 0 0.5rem 0;"><strong style="color:#cbd5e1;">Algorithm &amp; methodology sources:</strong> NIST Weibull reliability distributions, ISO 55001 asset management framework, Uptime Institute 2023 failure data, Weibull hazard function (&beta;=2.5, &eta;=60 months), 15% annual debt compounding model.</p>
                                <p style="font-size:0.72rem;color:#94a3b8;line-height:1.65;margin:0 0 0.5rem 0;">All calculations are performed entirely in your browser. No data is transmitted to any server. See our <a href="privacy.html" style="color:#60a5fa;text-decoration:underline;">Privacy Policy</a> for details.</p>
                                <p style="font-size:0.68rem;color:#64748b;line-height:1.5;margin:0;">By using this tool you agree to our <a href="terms.html" style="color:#60a5fa;text-decoration:underline;">Terms of Service</a>. All content on ResistanceZero is independent personal research. This site does not represent any current or former employer.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 11: Organizational Barriers -->
                <h2 id="section-11"><span class="section-number">11</span> Organizational Barriers</h2>

                <p>Technical debt accumulation is rarely caused by individual negligence. It is the predictable outcome of organizational structures and incentive systems that make debt accumulation rational from the perspective of individual decision-makers, even when it is irrational from the perspective of the organization as a whole. Understanding these barriers is essential for designing remediation programs that address root causes rather than symptoms.</p>

                <h3>11.1 Budget Cycle Misalignment</h3>

                <p>Annual budget cycles create a structural incentive for debt accumulation. Maintenance spending is categorized as <span class="tip" data-tip="Operational Expenditure &mdash; Ongoing costs for running a product, business, or system, including maintenance, utilities, consumables, and staff costs">OPEX</span>, which is scrutinized quarterly and subject to reduction when revenue targets are missed. The benefits of preventive maintenance, however, are realized over multi-year timescales. This creates a persistent temptation to defer maintenance to "protect" the current quarter's OPEX performance, transferring the cost (with compounding interest) to future periods.</p>

                <p>The <span class="tip" data-tip="Capital Expenditure &mdash; Funds used by a company to acquire, upgrade, and maintain physical assets">CAPEX</span>/<span class="tip" data-tip="Operational Expenditure &mdash; Ongoing costs for running a product, business, or system">OPEX</span> classification itself creates perverse incentives: replacing a worn component (OPEX) is harder to justify than waiting for it to fail catastrophically and then funding a major replacement project (CAPEX). The result is that organizations inadvertently incentivize the accumulation of technical debt up to the point of failure, then fund expensive remediation as capital projects.</p>

                <h3>11.2 Invisible Risk</h3>

                <p>Technical debt is invisible to standard operational metrics. <span class="tip" data-tip="Service Level Agreement &mdash; A commitment between a service provider and a client defining the level of service expected, including uptime guarantees">SLA</span> compliance, PUE, and availability statistics all look acceptable until the moment debt triggers a failure. This creates a dangerous illusion: leadership sees green dashboards and concludes that the facility is healthy, while the operations team sees the growing gap between documented and actual system states.</p>

                <p>Unlike financial debt, which appears on balance sheets and is subject to audit, technical debt has no standard reporting mechanism. It exists in <span class="tip" data-tip="Computerized Maintenance Management System &mdash; Software that maintains a computer database of information about an organization's maintenance operations, used to schedule and track maintenance work">CMMS</span> backlogs, in the heads of experienced operators, in the gap between as-built drawings and actual configurations, and in the assumptions embedded in emergency procedures that no longer reflect reality. Making this debt visible is the first and most critical step in managing it.</p>

                <h3>11.3 Normalization of Deviance</h3>

                <p>Diane Vaughan's research on the Challenger disaster identified a pattern she termed "normalization of deviance" &mdash; the gradual process through which unacceptable practices become acceptable as the basis for decisions.<a href="#ref14" class="src-ref" title="Vaughan, 1996">[14]</a> This pattern is pervasive in data center operations:</p>

                <ul>
                    <li>A temporary bypass is installed during an incident. The system works. The bypass stays.</li>
                    <li>A PM task is deferred "just this once" because of scheduling pressure. Nothing breaks. It gets deferred again.</li>
                    <li>An alarm threshold is raised to eliminate nuisance alarms. The real alarm condition does not occur. The threshold remains elevated.</li>
                    <li>A vendor workaround replaces the formal procedure. It works well enough. It becomes the standard.</li>
                    <li>Each deviation creates a new baseline from which the next deviation is measured. The cumulative drift from design intent becomes invisible because each step was individually small and apparently harmless.</li>
                </ul>

                <div class="info-box critical">
                    <div class="info-box-title">The Drift Paradox</div>
                    <p style="margin:0;">The most dangerous facilities are often those with the longest run of incident-free operation. Extended periods without major incidents reinforce the belief that current practices are adequate, making it harder to justify investment in addressing accumulated technical debt. The absence of incidents becomes evidence of safety, when in reality it may simply indicate that the specific combination of failures required to trigger a cascade has not yet occurred. Reason's "Swiss cheese model" describes this latent condition precisely.<a href="#ref2" class="src-ref" title="Reason, 1997">[2]</a></p>
                </div>

                <h3>11.4 Organizational Amnesia</h3>

                <p>Staff turnover, organizational restructuring, and outsourcing transitions create "organizational amnesia" &mdash; the loss of institutional memory about why specific configurations exist, what compromises were made during construction, and which workarounds are in place. This amnesia converts documented debt (items that someone knows about) into undiscovered debt (items that no one knows about until they cause a failure).</p>

                <p>The typical data center team has 15-25% annual turnover. In a facility with a 15-year lifecycle, this means that after 5-7 years, the majority of the current team was not present when the facility was commissioned. Without systematic knowledge transfer processes, the understanding of system behavior that informed original operational decisions is progressively lost, and the debt that this knowledge was compensating for becomes invisible.</p>

                <!-- Section 12: Conclusion -->
                <h2 id="section-12"><span class="section-number">12</span> Conclusion</h2>

                <div class="conclusion-box">
                    <h3>Technical Debt Is Operational Risk</h3>
                    <p>Technical debt in live data centers is not a maintenance backlog to be managed with spreadsheets and scheduling tools. It is an operational risk that compounds over time, degrades system resilience, and creates the preconditions for cascading failures. Managing it effectively requires three fundamental shifts:</p>
                    <ul>
                        <li><strong>From maintenance to risk management.</strong> Technical debt items must be assessed using risk frameworks (criticality x probability x consequence), not maintenance scheduling frameworks (cost x convenience). The quantitative scoring model presented in this paper provides a structured approach for this assessment.</li>
                        <li><strong>From invisible to visible.</strong> Debt must be tracked, reported, and reviewed with the same rigor as financial debt. A "technical debt register" should be a standing agenda item in operational governance meetings, with clear ownership, trending analysis, and escalation thresholds.</li>
                        <li><strong>From reactive to proactive.</strong> Organizations must move from a model where debt accumulates until failure triggers remediation, to a model where debt is continuously measured, bounded, and reduced. The Weibull-based framework demonstrates mathematically why the cost of <a href="article-1.html">proactive management</a> is consistently lower than the cost of reactive recovery.</li>
                    </ul>
                    <p>Every data center accumulates technical debt. The difference between resilient facilities and fragile ones is not whether debt exists, but whether it is quantified, bounded, governed, and actively serviced. The tools and frameworks presented in this paper &mdash; risk scoring, Weibull analysis, phased remediation, and interactive risk modeling &mdash; provide the analytical foundation for treating technical debt as what it truly is: operational risk that requires structured management.</p>
                    <p style="color:#f59e0b; font-weight:600; margin-bottom:0;">The most dangerous words in critical infrastructure operations remain: "Temporary solution &mdash; will fix later."</p>
                </div>

                
                <!-- Independence Disclaimer -->
                <div style="margin:2rem 0 0;padding:1rem 0;border-top:1px solid rgba(255,255,255,0.06);text-align:center;">
                    <p style="font-size:0.72rem;color:#64748b;font-style:italic;line-height:1.6;margin:0;">All content on ResistanceZero is independent personal research derived from publicly available sources. This site does not represent any current or former employer. <a href="terms.html" style="color:#8b5cf6;">Terms &amp; Disclaimer</a></p>
                </div>

<!-- References -->
                <div style="margin-top: 3rem; padding: 2rem; background: #f8fafc; border-radius: 16px;">
                    <h3 style="font-size: 1.25rem; font-weight: 700; color: var(--primary-blue); margin-bottom: 1.5rem; margin-top:0;">References</h3>
                    <ol class="ref-list">
                        <li id="ref1">Cunningham, W. (1992). "The WyCash Portfolio Management System." <a href="https://dl.acm.org/doi/10.1145/157709.157715" target="_blank" rel="noopener noreferrer"><em>OOPSLA '92 Experience Report.</em></a> The original articulation of the technical debt metaphor in software engineering.</li>
                        <li id="ref2">Reason, J. (1997). <a href="https://www.routledge.com/Managing-the-Risks-of-Organizational-Accidents/Reason/p/book/9781840141054" target="_blank" rel="noopener noreferrer"><em>Managing the Risks of Organizational Accidents.</em></a> Ashgate Publishing. Foundational framework for understanding latent conditions and organizational factors in system failures.</li>
                        <li id="ref3">ISO 55001:2014. <a href="https://www.iso.org/standard/55089.html" target="_blank" rel="noopener noreferrer"><em>Asset Management &mdash; Management Systems &mdash; Requirements.</em></a> International Organization for Standardization. Provides the framework for systematic asset management including criticality assessment and lifecycle planning.</li>
                        <li id="ref4">Moubray, J. (1997). <a href="https://books.industrialpress.com/9780831131463/reliability-centered-maintenance/" target="_blank" rel="noopener noreferrer"><em>Reliability-Centered Maintenance.</em></a> Industrial Press. Definitive text on RCM methodology and consequence-based maintenance decision-making.</li>
                        <li id="ref5">IEEE 493-2007. <a href="https://standards.ieee.org/ieee/493/3402/" target="_blank" rel="noopener noreferrer"><em>IEEE Recommended Practice for the Design of Reliable Industrial and Commercial Power Systems</em></a> (Gold Book). Provides failure rate data for power system components used in reliability calculations.</li>
                        <li id="ref6">Uptime Institute (2023). <a href="https://uptimeinstitute.com/resources/research-and-reports/annual-outage-analysis-2024" target="_blank" rel="noopener noreferrer"><em>Annual Outage Analysis 2023.</em></a> Analysis of data center outage causes, frequency, and severity across the global portfolio of certified facilities.</li>
                        <li id="ref7">Uptime Institute (2024). <a href="https://uptimeinstitute.com/resources/research-and-reports/uptime-institute-global-data-center-survey-results-2024" target="_blank" rel="noopener noreferrer"><em>Global Data Center Survey 2024.</em></a> Industry-wide survey of operational practices, staffing, and infrastructure management trends.</li>
                        <li id="ref8">NFPA 70B (2023). <a href="https://www.nfpa.org/codes-and-standards/nfpa-70b-standard-development/70b" target="_blank" rel="noopener noreferrer"><em>Recommended Practice for Electrical Equipment Maintenance.</em></a> National Fire Protection Association. Guidelines for preventive maintenance of electrical systems including connection integrity testing.</li>
                        <li id="ref9">Schneider Electric. White Paper 37: <a href="https://www.se.com/us/en/download/document/SPD_WTOL-8NDS37_EN/" target="_blank" rel="noopener noreferrer"><em>"Determining Total Cost of Ownership for Data Center and Network Room Infrastructure."</em></a> Analysis of lifecycle costs including vendor dependency impacts on TCO.</li>
                        <li id="ref10">Dekker, S. (2011). <a href="https://www.routledge.com/Drift-into-Failure-From-Hunting-Broken-Components-to-Understanding-Complex-Systems/Dekker/p/book/9781409422211" target="_blank" rel="noopener noreferrer"><em>Drift into Failure: From Hunting Broken Components to Understanding Complex Systems.</em></a> Ashgate Publishing. Analysis of how complex systems gradually drift toward failure through normal operations.</li>
                        <li id="ref11">Hollnagel, E. (2012). <a href="https://www.routledge.com/FRAM-The-Functional-Resonance-Analysis-Method-Modelling-Complex-Socio-technical/Hollnagel/p/book/9781409445517" target="_blank" rel="noopener noreferrer"><em>FRAM: The Functional Resonance Analysis Method.</em></a> Ashgate Publishing. Framework for understanding emergent behavior in complex socio-technical systems.</li>
                        <li id="ref12">EN 13306:2017. <a href="https://standards.iteh.ai/catalog/standards/cen/5af77559-ca38-483a-9310-823e8c517ee7/en-13306-2017" target="_blank" rel="noopener noreferrer"><em>Maintenance &mdash; Maintenance Terminology.</em></a> European Standard defining key maintenance concepts and vocabulary used in asset management frameworks.</li>
                        <li id="ref13">Turner, B. A. (1978). <a href="https://books.google.com/books/about/Man_made_Disasters.html?id=7Hq6AAAAIAAJ" target="_blank" rel="noopener noreferrer"><em>Man-Made Disasters.</em></a> Wykeham Publications. Seminal work on how organizational factors create preconditions for technical failures and disasters.</li>
                        <li id="ref14">Vaughan, D. (1996). <a href="https://press.uchicago.edu/ucp/books/book/chicago/C/bo22781921.html" target="_blank" rel="noopener noreferrer"><em>The Challenger Launch Decision: Risky Technology, Culture, and Deviance at NASA.</em></a> University of Chicago Press. Definitive study of normalization of deviance in high-reliability organizations.</li>
                    </ol>
                </div>

                <!-- Newsletter Signup -->
                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new articles on data center operations and engineering excellence are published.</p>
                    <form class="newsletter-form" onsubmit="return subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
                </div>

                <!-- Author Bio -->
                <div class="author-bio">
                    <div class="author-bio-image">
                        <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana">
                    </div>
                    <div class="author-bio-content">
                        <h4>Bagus Dwi Permana</h4>
                        <p class="author-bio-title">Engineering Operations Manager | Ahli K3 Listrik</p>
                        <p>12+ years professional experience in critical infrastructure and operations. CDFOM certified. Transforming operations through systematic excellence and safety-first engineering.</p>
                        <div class="author-bio-links">
                            <a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </a>
                            <a href="https://github.com/baguspermana7-cpu" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                GitHub
                            </a>
                            <a href="mailto:baguspermana7@gmail.com">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="related-articles">
                    <h3>Continue Reading</h3>
                    <div class="related-grid">
                        <a href="article-4.html" class="related-card">
                            <div class="related-card-number">04</div>
                            <div class="related-card-content">
                                <h4>In-House Capability Is a Reliability Strategy</h4>
                                <p>Building internal technical excellence</p>
                            </div>
                        </a>
                        <a href="article-6.html" class="related-card">
                            <div class="related-card-number">06</div>
                            <div class="related-card-content">
                                <h4>Why Post-Incident RCA Fails Without Design Authority</h4>
                                <p>Root cause analysis in critical infrastructure</p>
                            </div>
                        </a>
                        <a href="article-3.html" class="related-card">
                            <div class="related-card-number">03</div>
                            <div class="related-card-content">
                                <h4>How to Achieve 97%+ Maintenance Compliance</h4>
                                <p>Systems engineering approach to maintenance excellence</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Article Navigation -->
                <div class="article-nav">
                    <a href="article-4.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                        Previous Article
                    </a>
                    <a href="article-6.html">
                        Next Article
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>

            </div>
        </div>
    </article>

    <!-- Login Modal -->
    <div class="login-overlay" id="debtLoginOverlay">
        <div class="login-box" style="position:relative;">
            <button class="login-close" onclick="debtHideLogin()">&times;</button>
            <h3 style="font-size:1.3rem;font-weight:700;color:#f1f5f9;margin:0 0 0.25rem;"><i class="fas fa-microscope" style="color:#f59e0b;margin-right:8px;"></i> Pro Analysis Access</h3>
            <p style="font-size:0.82rem;color:#94a3b8;margin:0 0 1.5rem;">Unlock Monte Carlo distributions, Weibull analysis, cost modeling, capacity planner &amp; PDF export</p>
            <input type="email" class="login-input" id="debtLoginEmail" placeholder="Email address">
            <input type="password" class="login-input" id="debtLoginPass" placeholder="Password">
            <button class="login-submit" onclick="debtHandleLogin()"><i class="fas fa-unlock" style="margin-right:8px;"></i>Unlock Pro Analysis</button>
            <div style="margin-top:1rem;font-size:0.72rem;color:#64748b;text-align:center;">
                Demo: demo@resistancezero.com / demo2026
            </div>
            <div style="text-align:center;margin-top:6px;"><a href="mailto:bagus@resistancezero.com" style="font-size:0.62rem;color:#64748b;text-decoration:none;">Want full access? Get in touch &rarr;</a></div>
                <p style="text-align:center;font-size:0.68rem;color:#64748b;margin-top:8px;line-height:1.5;">By clicking Login, you agree to our <a href="terms.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Terms of Service</a> and <a href="privacy.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Privacy Policy</a>.</p>
        </div>
    </div>

    </main>

    <!-- Footer -->
    <footer class="footer footer-enhanced">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <p class="footer-tagline-main">BUILT FOR MISSION CRITICAL INFRASTRUCTURE<br>MANAGEMENT // 2026</p>
                    <p class="footer-tagline-sub">ALL OPERATIONAL DATASETS PRESERVED.</p>
                    <p class="footer-copyright">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p>
                </div>
                <div class="footer-nav">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home Dashboard</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="index.html#case-studies">Case Studies</a></li>
                        <li><a href="datacenter-solutions.html">DC Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4 class="footer-heading">CONNECT</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank" rel="noopener">LinkedIn Profile</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="mailto:baguspermana7@gmail.com">Direct Contact</a></li>
                        <li><a href="https://github.com/baguspermana7-cpu" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Share Buttons - Floating Sidebar -->
    <aside class="share-buttons" id="shareButtons" aria-label="Share this article">
        <span class="share-label">Share</span>
        <button class="share-btn linkedin" data-tooltip="Share on LinkedIn" onclick="shareLinkedIn()" aria-label="Share on LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </button>
        <button class="share-btn twitter" data-tooltip="Share on X" onclick="shareTwitter()" aria-label="Share on X"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></button>
        <button class="share-btn whatsapp" data-tooltip="Share on WhatsApp" onclick="shareWhatsApp()" aria-label="Share on WhatsApp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></button>
        <button class="share-btn copy" data-tooltip="Copy link" onclick="copyLink()" aria-label="Copy article link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="copy-icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="check-icon" style="display:none"><polyline points="20 6 9 17 4 12"></polyline></svg>
        </button>
    </aside>

    <script src="script.min.js?v=20260225"></script>

    <!-- Share Buttons JS -->
    <script>
    (function(){const s=document.getElementById('shareButtons'),h=document.querySelector('.article-hero');if(s&&h){document.body.classList.add('has-share-buttons');new IntersectionObserver(e=>e.forEach(x=>s.classList.toggle('visible',!x.isIntersecting)),{threshold:.1}).observe(h)}})();
    function getShareData(){return{title:document.querySelector('meta[property="og:title"]')?.content||document.title,url:window.location.href}}
    function shareLinkedIn(){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(getShareData().url)}`,'_blank','width=600,height=600')}
    function shareTwitter(){const d=getShareData();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(d.title+' by @BagusDPermana')}&url=${encodeURIComponent(d.url)}`,'_blank','width=600,height=400')}
    function shareWhatsApp(){const d=getShareData();window.open(`https://wa.me/?text=${encodeURIComponent(d.title+'\n\n'+d.url)}`,'_blank')}
    function copyLink(){const b=document.querySelector('.share-btn.copy'),c=b.querySelector('.copy-icon'),k=b.querySelector('.check-icon');navigator.clipboard.writeText(window.location.href).then(()=>{b.classList.add('copied');c.style.display='none';k.style.display='block';b.setAttribute('data-tooltip','Copied!');setTimeout(()=>{b.classList.remove('copied');c.style.display='block';k.style.display='none';b.setAttribute('data-tooltip','Copy link')},2000)})}
    </script>

    <!-- Interactive Chart JS -->
    <script>
    (function() {
        const canvas = document.getElementById('debtChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const ageSlider = document.getElementById('ageSlider');
        const debtSlider = document.getElementById('debtSlider');
        const ageValue = document.getElementById('ageValue');
        const debtValue = document.getElementById('debtValue');
        const finalRisk = document.getElementById('finalRisk');
        const trajectory = document.getElementById('trajectory');
        const debtStatus = document.getElementById('debtStatus');
        const yearsToCritical = document.getElementById('yearsToCritical');

        const dpr = window.devicePixelRatio || 1;
        let rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';

        let W = rect.width;
        let H = rect.height;
        const padding = { top: 50, right: 60, bottom: 60, left: 80 };

        function weibullHazard(age, beta, eta) {
            return (beta / eta) * Math.pow(age / eta, beta - 1);
        }

        function simulate(rate, maxYears) {
            let risk = [];
            for (let y = 0; y <= maxYears; y++) {
                let ageMonths = y * 12;
                let debtFactor = 1 + (rate / 100) * y * 0.3;
                let hazard = weibullHazard(Math.max(1, ageMonths), 2.0, 180);
                let baseRisk = 5 + hazard * debtFactor * 800;
                risk.push(Math.min(100, baseRisk));
            }
            return risk;
        }

        function simulateManaged(maxYears) {
            let risk = [];
            for (let y = 0; y <= maxYears; y++) {
                let ageMonths = y * 12;
                let hazard = weibullHazard(Math.max(1, ageMonths), 1.5, 240);
                let baseRisk = 5 + hazard * 200;
                risk.push(Math.min(100, baseRisk));
            }
            return risk;
        }

        function drawChart() {
            const rate = parseInt(debtSlider.value);
            const maxYears = parseInt(ageSlider.value);

            ageValue.textContent = maxYears + ' yr';
            debtValue.textContent = rate + '%';

            const chartW = W - padding.left - padding.right;
            const chartH = H - padding.top - padding.bottom;

            ctx.clearRect(0, 0, W, H);

            // Background
            ctx.fillStyle = 'rgba(2, 6, 23, 0.5)';
            ctx.fillRect(0, 0, W, H);

            // Grid
            ctx.strokeStyle = 'rgba(148, 163, 184, 0.15)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(W - padding.right, y);
                ctx.stroke();
            }

            // Critical threshold
            const threshold = 60;
            const thresholdY = padding.top + chartH - (threshold / 100) * chartH;
            ctx.strokeStyle = 'rgba(239, 68, 68, 0.5)';
            ctx.setLineDash([6, 6]);
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding.left, thresholdY);
            ctx.lineTo(W - padding.right, thresholdY);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.fillStyle = '#ef4444';
            ctx.font = '11px Inter, system-ui, sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Critical Threshold (60)', W - padding.right - 120, thresholdY - 8);

            // Y-axis labels
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            ctx.font = '12px Inter, system-ui, sans-serif';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                const val = 100 - i * 20;
                ctx.fillText(val, padding.left - 10, y + 4);
            }

            // Y-axis title
            ctx.save();
            ctx.translate(25, H / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Operational Risk Level', 0, 0);
            ctx.restore();

            // X-axis labels
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            const steps = maxYears;
            for (let i = 0; i <= steps; i++) {
                if (steps > 15 && i % 2 !== 0 && i !== steps) continue;
                const x = padding.left + (chartW / steps) * i;
                ctx.fillText('Y' + i, x, H - padding.bottom + 25);
            }

            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Facility Age (Years)', W / 2, H - 15);

            // Get data
            const risk = simulate(rate, maxYears);
            const managed = simulateManaged(maxYears);

            // Draw managed baseline area
            ctx.beginPath();
            ctx.fillStyle = 'rgba(16, 185, 129, 0.08)';
            for (let i = 0; i < managed.length; i++) {
                const x = padding.left + (chartW / steps) * i;
                const y = padding.top + chartH - (managed[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.lineTo(padding.left + chartW, H - padding.bottom);
            ctx.lineTo(padding.left, H - padding.bottom);
            ctx.closePath();
            ctx.fill();

            // Draw managed baseline line
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2;
            ctx.setLineDash([4, 4]);
            ctx.beginPath();
            for (let i = 0; i < managed.length; i++) {
                const x = padding.left + (chartW / steps) * i;
                const y = padding.top + chartH - (managed[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw risk area
            ctx.beginPath();
            ctx.fillStyle = 'rgba(245, 158, 11, 0.15)';
            for (let i = 0; i < risk.length; i++) {
                const x = padding.left + (chartW / steps) * i;
                const y = padding.top + chartH - (risk[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.lineTo(padding.left + chartW, H - padding.bottom);
            ctx.lineTo(padding.left, H - padding.bottom);
            ctx.closePath();
            ctx.fill();

            // Draw risk line
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            for (let i = 0; i < risk.length; i++) {
                const x = padding.left + (chartW / steps) * i;
                const y = padding.top + chartH - (risk[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw points
            ctx.fillStyle = '#f59e0b';
            for (let i = 0; i < risk.length; i++) {
                if (steps > 15 && i % 2 !== 0 && i !== steps && i !== 0) continue;
                const x = padding.left + (chartW / steps) * i;
                const y = padding.top + chartH - (risk[i] / 100) * chartH;
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            }

            // End value label
            const lastRisk = risk[risk.length - 1];
            const lastX = padding.left + chartW;
            const lastY = padding.top + chartH - (lastRisk / 100) * chartH;
            ctx.font = 'bold 12px Inter, system-ui, sans-serif';
            ctx.fillStyle = '#f59e0b';
            ctx.textAlign = 'left';
            ctx.fillText(Math.round(lastRisk), lastX + 8, lastY + 4);

            // Update callouts
            finalRisk.textContent = Math.round(lastRisk);

            const growth = risk[risk.length - 1] - risk[0];
            if (lastRisk >= 60) {
                trajectory.textContent = 'Critical';
                trajectory.style.color = '#ef4444';
            } else if (growth > 20) {
                trajectory.textContent = 'Rising';
                trajectory.style.color = '#f59e0b';
            } else if (growth > 10) {
                trajectory.textContent = 'Climbing';
                trajectory.style.color = '#fbbf24';
            } else {
                trajectory.textContent = 'Stable';
                trajectory.style.color = '#10b981';
            }

            if (rate >= 70) {
                debtStatus.textContent = 'Critical';
                debtStatus.style.color = '#ef4444';
            } else if (rate >= 40) {
                debtStatus.textContent = 'Moderate';
                debtStatus.style.color = '#f59e0b';
            } else {
                debtStatus.textContent = 'Managed';
                debtStatus.style.color = '#10b981';
            }

            // Years to critical
            let ytc = '--';
            for (let i = 0; i < risk.length; i++) {
                if (risk[i] >= 60) { ytc = i; break; }
            }
            if (ytc === '--') ytc = '>' + maxYears;
            yearsToCritical.textContent = ytc;
            yearsToCritical.style.color = (typeof ytc === 'number' && ytc <= 5) ? '#ef4444' : '#10b981';
        }

        ageSlider.addEventListener('input', drawChart);
        debtSlider.addEventListener('input', drawChart);
        drawChart();

        window.addEventListener('resize', function() {
            rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            W = rect.width;
            H = rect.height;
            canvas.style.width = W + 'px';
            canvas.style.height = H + 'px';
            drawChart();
        });
    })();
    </script>

    <!-- Technical Debt Risk Analyzer Calculator JS -->
    <script>
    (function() {
        const calcItems = document.getElementById('calcItems');
        const calcAge = document.getElementById('calcAge');
        const calcFacilityAge = document.getElementById('calcFacilityAge');
        const calcCost = document.getElementById('calcCost');
        const calcRevenue = document.getElementById('calcRevenue');
        const calcCritical = document.getElementById('calcCritical');
        const calcMajor = document.getElementById('calcMajor');
        const calcMinor = document.getElementById('calcMinor');

        function weibullHazard(age, beta, eta) {
            if (age <= 0) return 0;
            return (beta / eta) * Math.pow(age / eta, beta - 1);
        }

        function formatCurrency(num) {
            if (num >= 1000000) return '$' + (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return '$' + (num / 1000).toFixed(0) + 'K';
            return '$' + Math.round(num);
        }

        function updateMinor() {
            const crit = parseInt(calcCritical.value) || 0;
            const maj = parseInt(calcMajor.value) || 0;
            const minor = Math.max(0, 100 - crit - maj);
            calcMinor.value = minor;
            document.getElementById('criticalVal').textContent = crit + '%';
            document.getElementById('majorVal').textContent = maj + '%';
            document.getElementById('minorVal').textContent = minor + '%';
        }

        function calculate() {
            updateMinor();

            const items = parseInt(calcItems.value) || 45;
            const avgAge = parseInt(calcAge.value) || 18;
            const facilityAge = parseInt(calcFacilityAge.value) || 8;
            const avgCost = parseInt(calcCost.value) || 15000;
            const annualRevenue = parseInt(calcRevenue.value) || 50000000;
            const criticalPct = parseInt(calcCritical.value) || 20;
            const majorPct = parseInt(calcMajor.value) || 35;
            const minorPct = Math.max(0, 100 - criticalPct - majorPct);

            // Per-item counts
            const criticalItems = items * criticalPct / 100;
            const majorItems = items * majorPct / 100;
            const minorItems = items - criticalItems - majorItems;

            // Criticality weights
            const critWeight = 10, majWeight = 5, minWeight = 1;

            // Weibull hazard rate
            const hazardRate = weibullHazard(avgAge, 2.5, 60);

            // Base risk
            const baseRisk = (criticalItems * critWeight + majorItems * majWeight + minorItems * minWeight) * hazardRate;

            // Facility multiplier
            const facilityMultiplier = 1 + (facilityAge / 20);

            // Current risk score
            const currentRisk = Math.min(100, baseRisk * facilityMultiplier);

            // Projected risks
            const projectedRisk1 = Math.min(100, currentRisk * Math.pow(1.15, 1));
            const projectedRisk3 = Math.min(100, currentRisk * Math.pow(1.15, 3));
            const projectedRisk5 = Math.min(100, currentRisk * Math.pow(1.15, 5));

            // Cost escalation
            const escalationFactor = 1 + (avgAge / 24) * 0.5;
            const escalatedCost = items * avgCost * escalationFactor;
            const originalCost = items * avgCost;
            const escalationPct = ((escalationFactor - 1) * 100).toFixed(0);

            // Revenue at risk
            const revenueAtRisk = annualRevenue * (currentRisk / 100) * 0.1;

            // Recommended budget
            const recommendedBudget = escalatedCost / 3;

            // Update UI
            const riskDisplay = document.getElementById('riskScoreDisplay');
            riskDisplay.textContent = Math.round(currentRisk);
            if (currentRisk >= 75) riskDisplay.style.color = '#ef4444';
            else if (currentRisk >= 50) riskDisplay.style.color = '#f59e0b';
            else if (currentRisk >= 25) riskDisplay.style.color = '#fbbf24';
            else riskDisplay.style.color = '#10b981';

            // Needle position
            const needle = document.getElementById('riskNeedle');
            needle.style.left = Math.min(98, currentRisk) + '%';

            // Results
            document.getElementById('resultRisk1yr').textContent = Math.round(projectedRisk1);
            document.getElementById('resultRisk1yr').style.color = projectedRisk1 >= 60 ? '#ef4444' : '#f59e0b';

            document.getElementById('resultRisk3yr').textContent = Math.round(projectedRisk3);
            document.getElementById('resultRisk3yr').style.color = projectedRisk3 >= 60 ? '#ef4444' : '#f59e0b';

            document.getElementById('resultRisk5yr').textContent = Math.round(projectedRisk5);
            document.getElementById('resultRisk5yr').style.color = projectedRisk5 >= 60 ? '#ef4444' : '#f59e0b';

            document.getElementById('resultOriginalCost').textContent = formatCurrency(originalCost);
            document.getElementById('resultEscalatedCost').textContent = formatCurrency(escalatedCost);
            document.getElementById('resultEscalatedCost').style.color = escalationFactor > 1.3 ? '#ef4444' : '#f59e0b';
            document.getElementById('resultEscalationPct').textContent = '+' + escalationPct + '% escalation';

            document.getElementById('resultRevenueAtRisk').textContent = formatCurrency(revenueAtRisk);
            document.getElementById('resultRevenueAtRisk').style.color = revenueAtRisk > 1000000 ? '#ef4444' : '#f59e0b';

            document.getElementById('resultBudget').textContent = formatCurrency(recommendedBudget);

            // Priority breakdown
            document.getElementById('criticalCount').textContent = Math.round(criticalItems);
            document.getElementById('majorCount').textContent = Math.round(majorItems);
            document.getElementById('minorCount').textContent = Math.round(minorItems);

            // Trigger Pro calculations if active
            if (typeof window.calculateDebtPro === 'function') {
                window.calculateDebtPro();
            }
        }

        // Event listeners
        [calcItems, calcAge, calcFacilityAge, calcCost, calcRevenue].forEach(el => {
            el.addEventListener('input', calculate);
        });

        calcCritical.addEventListener('input', function() {
            const crit = parseInt(this.value) || 0;
            const maj = parseInt(calcMajor.value) || 0;
            if (crit + maj > 100) {
                calcMajor.value = 100 - crit;
            }
            calculate();
        });

        calcMajor.addEventListener('input', function() {
            const crit = parseInt(calcCritical.value) || 0;
            const maj = parseInt(this.value) || 0;
            if (crit + maj > 100) {
                this.value = 100 - crit;
            }
            calculate();
        });

        // Initial calculation
        calculate();
    })();
    </script>

    <!-- Pro Mode Logic + Calculation Engine -->
    <script>
    (function(){
        var debtMode = 'free';
        var isDebtPremium = false;
        var _proCache = {};

        // Check existing session
        try {
            var sess = JSON.parse(localStorage.getItem('rz_premium_session'));
            if (sess && sess.email) {
                var valid = false;
                if (sess.expires) { valid = new Date(sess.expires) > new Date(); }
                else if (sess.ts) { valid = (Date.now() - sess.ts) < 30 * 86400000; }
                if (valid) { isDebtPremium = true; }
            }
        } catch(e) {}

        /* ─── HELPERS ─── */
        function fmtCur(n) {
            if (Math.abs(n) >= 1e9) return '$' + (n/1e9).toFixed(1) + 'B';
            if (Math.abs(n) >= 1e6) return '$' + (n/1e6).toFixed(1) + 'M';
            if (Math.abs(n) >= 1e3) return '$' + (n/1e3).toFixed(0) + 'K';
            return '$' + Math.round(n);
        }
        function wHazard(t, beta, eta) { return t <= 0 ? 0 : (beta/eta)*Math.pow(t/eta, beta-1); }
        function gammaApprox(z) {
            // Stirling approximation for Gamma function
            if (z < 0.5) return Math.PI / (Math.sin(Math.PI*z) * gammaApprox(1-z));
            z -= 1;
            var g = 7, c = [0.99999999999980993,676.5203681218851,-1259.1392167224028,771.32342877765313,-176.61502916214059,12.507343278686905,-0.13857109526572012,9.9843695780195716e-6,1.5056327351493116e-7];
            var x = c[0];
            for (var i = 1; i < g+2; i++) x += c[i]/(z+i);
            var t2 = z + g + 0.5;
            return Math.sqrt(2*Math.PI) * Math.pow(t2, z+0.5) * Math.exp(-t2) * x;
        }
        function boxMullerRand() { var u1=Math.random(), u2=Math.random(); return Math.sqrt(-2*Math.log(u1))*Math.cos(2*Math.PI*u2); }
        function percentile(arr, p) { arr.sort(function(a,b){return a-b;}); var idx=(p/100)*(arr.length-1); var lo=Math.floor(idx), hi=Math.ceil(idx); return arr[lo]+(arr[hi]-arr[lo])*(idx-lo); }

        /* ─── PANEL 1: MONTE CARLO ─── */
        function runDebtMonteCarlo(items, age, facAge, cost, critPct, majPct) {
            var N = 10000;
            var results = [];
            var beta = 2.5 + (facAge > 10 ? (facAge-10)*0.05 : 0);
            var eta = 60;
            for (var i = 0; i < N; i++) {
                var vItems = items * (1 + (boxMullerRand()*0.15));
                var vAge = age * (1 + (boxMullerRand()*0.20));
                var vCost = cost * (1 + (boxMullerRand()*0.15));
                vItems = Math.max(1, vItems);
                vAge = Math.max(1, vAge);
                vCost = Math.max(100, vCost);
                var minPct = Math.max(0, 100 - critPct - majPct);
                var critItems = vItems * critPct / 100;
                var majItems = vItems * majPct / 100;
                var minItems = vItems * minPct / 100;
                var hazard = wHazard(vAge, beta, eta);
                var baseRisk = (critItems*10 + majItems*5 + minItems*1) * hazard;
                var facMult = 1 + (facAge/20);
                var risk = Math.min(100, baseRisk * facMult);
                results.push(risk);
            }
            var p5 = percentile(results, 5);
            var p50 = percentile(results, 50);
            var p80 = percentile(results, 80);
            var p95 = percentile(results, 95);
            var mean = results.reduce(function(a,b){return a+b;},0)/results.length;
            var variance = results.reduce(function(a,b){return a+(b-mean)*(b-mean);},0)/results.length;
            var stddev = Math.sqrt(variance);
            var skewness = results.reduce(function(a,b){return a+Math.pow((b-mean)/stddev,3);},0)/results.length;
            return { results:results, p5:p5, p50:p50, p80:p80, p95:p95, confBand:p95-p5, skewness:skewness, shape: skewness > 0.5 ? 'Right-skewed' : skewness < -0.5 ? 'Left-skewed' : 'Normal' };
        }

        /* ─── PANEL 2: COST & ROI ─── */
        function calcCostROI(items, age, facAge, cost, revenue, critPct, majPct, riskScore) {
            var totalCost = items * cost;
            var escalRate = 0.15;
            var discRate = 0.08;
            // NPV of deferral: escalated costs over 5 years discounted
            var npv = 0;
            for (var y = 1; y <= 5; y++) {
                var escCost = totalCost * Math.pow(1+escalRate, y);
                npv += escCost / Math.pow(1+discRate, y);
            }
            // Cost of inaction per year
            var riskFactor = riskScore / 100;
            var inactionCost = items * cost * riskFactor * 0.3;
            // Break-even: months until cumulative risk cost > remediation cost
            var cumRisk = 0;
            var breakEvenMonths = 60;
            for (var m = 1; m <= 60; m++) {
                cumRisk += (inactionCost / 12);
                if (cumRisk >= totalCost) { breakEvenMonths = m; break; }
            }
            // ROI at 3 years
            var avoided3yr = inactionCost * 3;
            var roi3yr = totalCost > 0 ? ((avoided3yr - totalCost) / totalCost) * 100 : 0;
            // SLA penalty
            var slaPenalty = revenue * 0.001 * riskScore / 100;
            // Insurance premium impact
            var insuranceDelta;
            if (riskScore >= 75) insuranceDelta = totalCost * 0.08;
            else if (riskScore >= 50) insuranceDelta = totalCost * 0.05;
            else if (riskScore >= 25) insuranceDelta = totalCost * 0.03;
            else insuranceDelta = totalCost * 0.01;
            return { npv:npv, inactionCost:inactionCost, breakEvenMonths:breakEvenMonths, roi3yr:roi3yr, slaPenalty:slaPenalty, insuranceDelta:insuranceDelta };
        }

        /* ─── PANEL 3: WEIBULL PARAMETERS ─── */
        function calcWeibullParams(age, facAge) {
            var beta = 2.5 + (facAge > 10 ? (facAge-10)*0.05 : 0);
            beta = Math.min(4.0, beta);
            var eta = 60 - (facAge > 15 ? (facAge-15)*1.5 : 0);
            eta = Math.max(30, eta);
            var mttf = eta * gammaApprox(1 + 1/beta);
            var ageMonths = age;
            var reliability = Math.exp(-Math.pow(ageMonths/eta, beta));
            var hazardTrend = beta > 1 ? 'Increasing' : beta === 1 ? 'Constant' : 'Decreasing';
            var b10 = eta * Math.pow(-Math.log(0.9), 1/beta);
            return { beta:beta, eta:eta, mttf:mttf, reliability:reliability, hazardTrend:hazardTrend, b10:b10 };
        }

        /* ─── PANEL 4: REMEDIATION CAPACITY ─── */
        function calcCapacity(items, critPct, majPct) {
            var avgDaysPerItem = 3;
            var critItems = items * critPct / 100;
            var majItems = items * majPct / 100;
            var minItems = items - critItems - majItems;
            var totalDays = critItems * 5 + majItems * 3 + minItems * 1.5;
            var crewMonths = totalDays / 22;
            var fte = 3;
            var throughputPerQuarter = Math.floor(fte * 22 * 3 / avgDaysPerItem);
            var optPhasing = Math.ceil(items / throughputPerQuarter);
            // Simplified Erlang-C: queue probability
            var arrivalRate = items / (optPhasing * 3 * 22);
            var serviceRate = fte / avgDaysPerItem;
            var rho = arrivalRate / serviceRate;
            var queueProb = Math.min(0.99, Math.max(0, rho > 0.95 ? 0.95 : Math.pow(rho, fte) / (1-rho+0.001)));
            return { crewMonths:crewMonths, optPhasing:optPhasing, queueProb:queueProb, throughputPerQuarter:throughputPerQuarter };
        }

        /* ─── PANEL 5: SCENARIO SENSITIVITY ─── */
        function calcScenarios(items, age, facAge, cost, revenue, critPct, majPct, baseRiskScore) {
            function quickRisk(it, ag, fa, cr, mj) {
                var minP = Math.max(0, 100-cr-mj);
                var cI=it*cr/100, mI=it*mj/100, nI=it*minP/100;
                var beta2 = 2.5 + (fa>10?(fa-10)*0.05:0);
                var hz = wHazard(ag, beta2, 60);
                var br = (cI*10+mI*5+nI*1)*hz;
                var fm = 1+(fa/20);
                return Math.min(100, br*fm);
            }
            // +25% items
            var risk25items = quickRisk(items*1.25, age, facAge, critPct, majPct);
            var impact25items = risk25items - baseRiskScore;
            // +12 months age
            var risk12age = quickRisk(items, age+12, facAge, critPct, majPct);
            var impact12age = risk12age - baseRiskScore;
            // Double cost - NPV impact
            var npvBase = 0, npvDouble = 0;
            var totalCost = items*cost, totalCostD = items*cost*2;
            for (var y=1;y<=5;y++) { npvBase+=totalCost*Math.pow(1.15,y)/Math.pow(1.08,y); npvDouble+=totalCostD*Math.pow(1.15,y)/Math.pow(1.08,y); }
            var impactDoubleCost = npvDouble - npvBase;
            // Shift to 40% critical
            var risk40crit = quickRisk(items, age, facAge, 40, Math.min(60, majPct));
            var impact40crit = risk40crit - baseRiskScore;
            return [
                { label:'+25% Items', impact:impact25items, value:Math.round(risk25items), type:'risk' },
                { label:'+12mo Age', impact:impact12age, value:Math.round(risk12age), type:'risk' },
                { label:'2x Cost', impact:impactDoubleCost, value:fmtCur(npvDouble), type:'cost' },
                { label:'40% Critical', impact:impact40crit, value:Math.round(risk40crit), type:'risk' }
            ].sort(function(a,b){ return Math.abs(b.impact)-Math.abs(a.impact); });
        }

        /* ─── HISTOGRAM DRAWING ─── */
        function drawDebtHistogram(canvasEl, mcResults, p50, p80, p95) {
            if (!canvasEl) return;
            var dpr = window.devicePixelRatio || 1;
            var rect = canvasEl.getBoundingClientRect();
            canvasEl.width = rect.width * dpr;
            canvasEl.height = rect.height * dpr;
            var ctx = canvasEl.getContext('2d');
            ctx.scale(dpr, dpr);
            canvasEl.style.width = rect.width + 'px';
            canvasEl.style.height = rect.height + 'px';
            var W = rect.width, H = rect.height;
            var pad = { top:30, right:20, bottom:40, left:50 };
            var cW = W-pad.left-pad.right, cH = H-pad.top-pad.bottom;
            ctx.clearRect(0,0,W,H);
            ctx.fillStyle='rgba(2,6,23,0.3)';ctx.fillRect(0,0,W,H);
            // Create bins
            var bins = 30, minV=0, maxV=100;
            var binW2 = (maxV-minV)/bins;
            var counts = new Array(bins).fill(0);
            mcResults.forEach(function(v) {
                var b = Math.min(bins-1, Math.floor((v-minV)/binW2));
                if (b>=0) counts[b]++;
            });
            var maxCount = Math.max.apply(null, counts);
            // Draw bars
            var barW = cW/bins;
            for (var i=0;i<bins;i++) {
                var bVal = minV + i*binW2 + binW2/2;
                var bH = maxCount>0 ? (counts[i]/maxCount)*cH : 0;
                var x = pad.left + i*barW;
                var y = pad.top + cH - bH;
                if (bVal < 40) ctx.fillStyle='rgba(16,185,129,0.7)';
                else if (bVal < 65) ctx.fillStyle='rgba(245,158,11,0.7)';
                else ctx.fillStyle='rgba(239,68,68,0.7)';
                ctx.fillRect(x+1, y, barW-2, bH);
            }
            // Dashed lines for percentiles
            function drawPctLine(val, color, label) {
                var x = pad.left + ((val-minV)/(maxV-minV))*cW;
                ctx.strokeStyle=color; ctx.lineWidth=1.5; ctx.setLineDash([4,4]);
                ctx.beginPath(); ctx.moveTo(x, pad.top); ctx.lineTo(x, pad.top+cH); ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle=color; ctx.font='bold 10px Inter,sans-serif'; ctx.textAlign='center';
                ctx.fillText(label, x, pad.top-8);
            }
            drawPctLine(p50, '#10b981', 'P50: '+Math.round(p50));
            drawPctLine(p80, '#f59e0b', 'P80: '+Math.round(p80));
            drawPctLine(p95, '#ef4444', 'P95: '+Math.round(p95));
            // Axes
            ctx.strokeStyle='rgba(148,163,184,0.3)'; ctx.lineWidth=1;
            ctx.beginPath(); ctx.moveTo(pad.left, pad.top+cH); ctx.lineTo(pad.left+cW, pad.top+cH); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(pad.left, pad.top); ctx.lineTo(pad.left, pad.top+cH); ctx.stroke();
            ctx.fillStyle='#94a3b8'; ctx.font='10px Inter,sans-serif'; ctx.textAlign='center';
            for (var j=0;j<=5;j++) { ctx.fillText(Math.round(minV+j*(maxV-minV)/5), pad.left+j*(cW/5), pad.top+cH+15); }
            ctx.fillText('Risk Score', W/2, H-5);
            ctx.save(); ctx.translate(12, H/2); ctx.rotate(-Math.PI/2); ctx.fillText('Frequency', 0, 0); ctx.restore();
        }

        /* ─── TORNADO CHART DRAWING ─── */
        function drawDebtTornado(canvasEl, sensResults) {
            if (!canvasEl || !sensResults || !sensResults.length) return;
            var dpr = window.devicePixelRatio || 1;
            var rect = canvasEl.getBoundingClientRect();
            canvasEl.width = rect.width * dpr;
            canvasEl.height = rect.height * dpr;
            var ctx = canvasEl.getContext('2d');
            ctx.scale(dpr, dpr);
            canvasEl.style.width = rect.width + 'px';
            canvasEl.style.height = rect.height + 'px';
            var W = rect.width, H = rect.height;
            var pad = { top:30, right:30, bottom:30, left:120 };
            var cW = W-pad.left-pad.right, cH = H-pad.top-pad.bottom;
            ctx.clearRect(0,0,W,H);
            ctx.fillStyle='rgba(2,6,23,0.3)';ctx.fillRect(0,0,W,H);
            var maxImpact = Math.max.apply(null, sensResults.map(function(s){return Math.abs(s.impact);}));
            if (maxImpact === 0) maxImpact = 1;
            var barH = Math.min(40, cH/sensResults.length - 8);
            var centerX = pad.left + cW/2;
            // Center line
            ctx.strokeStyle='rgba(148,163,184,0.3)'; ctx.lineWidth=1;
            ctx.beginPath(); ctx.moveTo(centerX, pad.top); ctx.lineTo(centerX, pad.top+cH); ctx.stroke();
            sensResults.forEach(function(s, idx) {
                var y = pad.top + idx*(cH/sensResults.length) + (cH/sensResults.length - barH)/2;
                var barLen = (Math.abs(s.impact)/maxImpact) * (cW/2 - 10);
                var x;
                if (s.impact >= 0) {
                    x = centerX;
                    ctx.fillStyle='rgba(239,68,68,0.75)';
                } else {
                    x = centerX - barLen;
                    ctx.fillStyle='rgba(16,185,129,0.75)';
                }
                ctx.fillRect(x, y, barLen, barH);
                // Label
                ctx.fillStyle='#cbd5e1'; ctx.font='11px Inter,sans-serif'; ctx.textAlign='right';
                ctx.fillText(s.label, pad.left-8, y+barH/2+4);
                // Value
                ctx.fillStyle='#f1f5f9'; ctx.font='bold 11px Inter,sans-serif'; ctx.textAlign=s.impact>=0?'left':'right';
                var valLabel = s.type==='cost' ? s.value : (s.impact>=0?'+':'')+s.impact.toFixed(1)+' pts';
                var valX = s.impact>=0 ? x+barLen+6 : x-6;
                ctx.fillText(valLabel, valX, y+barH/2+4);
            });
            // Title
            ctx.fillStyle='#94a3b8'; ctx.font='10px Inter,sans-serif'; ctx.textAlign='center';
            ctx.fillText('Sensitivity Impact on Risk Score', W/2, H-8);
        }

        /* ─── NARRATIVE GENERATOR ─── */
        function generateDebtNarrative(riskScore, mc, costROI, weibull, capacity, sensResults, items, age, facAge, critPct) {
            var riskZone = riskScore >= 75 ? 'critical' : riskScore >= 50 ? 'elevated' : riskScore >= 25 ? 'moderate' : 'low';
            var weibullZone = age > weibull.eta ? 'wear-out' : age > weibull.eta*0.6 ? 'late useful-life' : 'useful-life';
            var p1 = 'The facility currently registers a composite risk score of <strong>' + Math.round(riskScore) + '/100</strong>, classified as <strong>' + riskZone.toUpperCase() + '</strong>. With ' + items + ' deferred items averaging ' + age + ' months in deferral and a facility age of ' + facAge + ' years, the Weibull hazard analysis places the equipment population in the <strong>' + weibullZone + '</strong> zone (effective beta=' + weibull.beta.toFixed(2) + ', eta=' + Math.round(weibull.eta) + ' months). Monte Carlo simulation (10,000 runs) shows a P80 risk of ' + Math.round(mc.p80) + ' and P95 of ' + Math.round(mc.p95) + ', with a ' + mc.shape.toLowerCase() + ' distribution indicating ' + (mc.skewness > 0.5 ? 'tail risk toward higher scores' : 'relatively symmetric outcomes') + '.';
            var p2 = 'Financial exposure is substantial. The 5-year NPV of continued deferral reaches <strong>' + fmtCur(costROI.npv) + '</strong>, while the annual cost of inaction is estimated at <strong>' + fmtCur(costROI.inactionCost) + '</strong>. Remediation investment breaks even within <strong>' + costROI.breakEvenMonths + ' months</strong>, delivering a projected 3-year ROI of <strong>' + Math.round(costROI.roi3yr) + '%</strong>. SLA penalty exposure adds ' + fmtCur(costROI.slaPenalty) + '/year, and the risk profile is likely adding ' + fmtCur(costROI.insuranceDelta) + ' to annual insurance premiums.';
            var p3 = 'Recommended remediation strategy: deploy <strong>' + capacity.optPhasing + ' phased wave' + (capacity.optPhasing>1?'s':'') + '</strong> with 3 FTE, achieving approximately <strong>' + capacity.throughputPerQuarter + ' items per quarter</strong>. Total effort is estimated at <strong>' + capacity.crewMonths.toFixed(1) + ' crew-months</strong>. Priority order: address all ' + Math.round(items*critPct/100) + ' critical items first (single-point-of-failure and life-safety systems), followed by major items with highest individual risk scores, then batch minor items into routine maintenance windows.';
            var p4;
            if (riskScore >= 60) {
                p4 = 'Comparative benchmark: this facility\'s risk profile exceeds the Uptime Institute threshold for 3.2x incident frequency (score >60). ' + (critPct > 25 ? 'The critical item proportion of ' + critPct + '% significantly exceeds the 25% threshold requiring immediate remediation program initiation. ' : '') + 'Immediate Phase 1 stabilization within 90 days is strongly recommended, focusing on quick-win critical items before tackling complex remediations.';
            } else if (riskScore >= 30) {
                p4 = 'Comparative benchmark: the facility\'s risk profile falls in the moderate range, below the Uptime Institute 3.2x incident threshold of 60. However, sensitivity analysis shows that ' + (sensResults.length>0 ? sensResults[0].label.toLowerCase() + ' alone could push the score into the elevated zone' : 'several scenarios could escalate risk rapidly') + '. Proactive remediation is recommended within 6 months to prevent drift toward critical levels.';
            } else {
                p4 = 'Comparative benchmark: the facility\'s risk profile is within acceptable industry norms. The ISO 55001 framework recommends maintaining continuous monitoring and addressing items before they enter the wear-out zone. Current remediation pace appears adequate, though periodic reassessment is warranted as the facility ages.';
            }
            return '<p>' + p1 + '</p><p>' + p2 + '</p><p>' + p3 + '</p><p>' + p4 + '</p>';
        }

        /* ═══════════════════════════════════════════
           MASTER PRO CALCULATOR
           ═══════════════════════════════════════════ */
        window.calculateDebtPro = function() {
            if (debtMode !== 'pro' || !isDebtPremium) return;

            var items = parseInt(document.getElementById('calcItems').value) || 45;
            var age = parseInt(document.getElementById('calcAge').value) || 18;
            var facAge = parseInt(document.getElementById('calcFacilityAge').value) || 8;
            var cost = parseInt(document.getElementById('calcCost').value) || 15000;
            var revenue = parseInt(document.getElementById('calcRevenue').value) || 50000000;
            var critPct = parseInt(document.getElementById('calcCritical').value) || 20;
            var majPct = parseInt(document.getElementById('calcMajor').value) || 35;
            var riskScore = parseFloat(document.getElementById('riskScoreDisplay').textContent) || 0;

            // Panel 1: Monte Carlo
            var mc = runDebtMonteCarlo(items, age, facAge, cost, critPct, majPct);
            _proCache.mc = mc;
            document.getElementById('proRiskP50').textContent = Math.round(mc.p50);
            document.getElementById('proRiskP80').textContent = Math.round(mc.p80);
            document.getElementById('proRiskP95').textContent = Math.round(mc.p95);
            document.getElementById('proConfBand').textContent = Math.round(mc.confBand);
            document.getElementById('proSimRuns').textContent = '10,000';
            document.getElementById('proDistShape').textContent = mc.shape;
            // Color code P95
            var p95El = document.getElementById('proRiskP95');
            p95El.style.color = mc.p95 >= 75 ? '#ef4444' : mc.p95 >= 50 ? '#f59e0b' : '#10b981';

            // Panel 2: Cost & ROI
            var cr = calcCostROI(items, age, facAge, cost, revenue, critPct, majPct, riskScore);
            _proCache.costROI = cr;
            document.getElementById('proNPV').textContent = fmtCur(cr.npv);
            document.getElementById('proInactionCost').textContent = fmtCur(cr.inactionCost);
            document.getElementById('proBreakEven').textContent = cr.breakEvenMonths + ' mo';
            document.getElementById('proROI3yr').textContent = Math.round(cr.roi3yr) + '%';
            document.getElementById('proROI3yr').style.color = cr.roi3yr > 100 ? '#10b981' : cr.roi3yr > 0 ? '#f59e0b' : '#ef4444';
            document.getElementById('proSLAPenalty').textContent = fmtCur(cr.slaPenalty);
            document.getElementById('proInsurance').textContent = fmtCur(cr.insuranceDelta);

            // Panel 3: Weibull
            var wb = calcWeibullParams(age, facAge);
            _proCache.weibull = wb;
            document.getElementById('proBeta').textContent = wb.beta.toFixed(2);
            document.getElementById('proEta').textContent = Math.round(wb.eta) + ' mo';
            document.getElementById('proMTTF').textContent = Math.round(wb.mttf) + ' mo';
            document.getElementById('proReliability').textContent = (wb.reliability*100).toFixed(1) + '%';
            document.getElementById('proReliability').style.color = wb.reliability > 0.7 ? '#10b981' : wb.reliability > 0.4 ? '#f59e0b' : '#ef4444';
            document.getElementById('proHazardTrend').textContent = wb.hazardTrend;
            document.getElementById('proHazardTrend').style.color = wb.hazardTrend === 'Increasing' ? '#ef4444' : '#10b981';
            document.getElementById('proB10').textContent = Math.round(wb.b10) + ' mo';

            // Panel 4: Capacity
            var cap = calcCapacity(items, critPct, majPct);
            _proCache.capacity = cap;
            document.getElementById('proCrewMonths').textContent = cap.crewMonths.toFixed(1);
            document.getElementById('proPhasing').textContent = cap.optPhasing + ' waves';
            document.getElementById('proQueueProb').textContent = (cap.queueProb*100).toFixed(0) + '%';
            document.getElementById('proThroughput').textContent = cap.throughputPerQuarter + ' items';

            // Panel 5: Scenarios
            var sens = calcScenarios(items, age, facAge, cost, revenue, critPct, majPct, riskScore);
            _proCache.scenarios = sens;
            var scenarioIds = ['proFixTop20','proBudget50','proDefer2yr','proShiftMix'];
            sens.forEach(function(s, idx) {
                if (idx < scenarioIds.length) {
                    var el = document.getElementById(scenarioIds[idx]);
                    if (el) {
                        if (s.type === 'cost') {
                            el.textContent = s.value;
                        } else {
                            el.textContent = (s.impact>=0?'+':'') + s.impact.toFixed(1) + ' pts';
                            el.style.color = s.impact > 10 ? '#ef4444' : s.impact > 5 ? '#f59e0b' : '#10b981';
                        }
                        // Update label
                        var labelEl = el.parentElement.querySelector('.result-card-label');
                        if (labelEl) labelEl.textContent = s.label;
                    }
                }
            });

            // Draw charts
            drawDebtHistogram(document.getElementById('debtMCHistogram'), mc.results, mc.p50, mc.p80, mc.p95);
            drawDebtTornado(document.getElementById('debtTornadoChart'), sens);

            // Narrative
            var narrative = generateDebtNarrative(riskScore, mc, cr, wb, cap, sens, items, age, facAge, critPct);
            var narBox = document.getElementById('debtNarrativeBox');
            var narContent = document.getElementById('debtNarrativeContent');
            if (narBox && narContent) {
                narContent.innerHTML = narrative;
                narBox.style.display = 'block';
            }
        };

        /* ─── MODE SWITCH ─── */
        window.switchDebtMode = function(mode) {
            if (mode === 'pro' && !isDebtPremium) {
                if (window._rzAuth && typeof window._rzAuth.showModal === 'function') {
                    window._rzAuth.showModal();
                } else {
                    debtShowLogin();
                }
                return;
            }
            debtMode = mode;
            var freeBtn = document.getElementById('debtModeFree');
            var proBtn = document.getElementById('debtModePro');
            var proPanels = document.getElementById('debtProPanels');
            var pdfBtn = document.getElementById('debtBtnPdf');

            if (mode === 'pro') {
                freeBtn.classList.remove('active');
                proBtn.classList.add('active');
                if (proPanels) proPanels.style.display = 'block';
                if (pdfBtn) { pdfBtn.onclick = function(){ exportDebtPDF(); }; }
                var panels = document.querySelectorAll('#debtProPanels .pro-panel');
                panels.forEach(function(p){ p.classList.add('unlocked'); });
                // Run Pro calculations
                setTimeout(function(){ calculateDebtPro(); }, 50);
            } else {
                proBtn.classList.remove('active');
                freeBtn.classList.add('active');
                if (proPanels) proPanels.style.display = 'none';
                if (pdfBtn) { pdfBtn.onclick = function(){ debtShowLogin(); }; }
                var narBox = document.getElementById('debtNarrativeBox');
                if (narBox) narBox.style.display = 'none';
            }
        };

        /* ─── LOGIN / RESET ─── */
        window.debtShowLogin = function() {
            document.getElementById('debtLoginOverlay').classList.add('active');
        };
        window.debtHideLogin = function() {
            document.getElementById('debtLoginOverlay').classList.remove('active');
        };

        window.debtHandleLogin = function() {
            var email = document.getElementById('debtLoginEmail').value.trim();
            var pass = document.getElementById('debtLoginPass').value;
            if (email === 'demo@resistancezero.com' && pass === 'demo2026') {
                var session = { email: email, tier: 'pro', expires: new Date(Date.now() + 30*86400000).toISOString() };
                localStorage.setItem('rz_premium_session', JSON.stringify(session));
                isDebtPremium = true;
                debtHideLogin();
                switchDebtMode('pro');
                window.dispatchEvent(new CustomEvent('rz-auth-change', { detail: { email: email, tier: 'pro', action: 'login' } }));
            } else {
                alert('Invalid credentials. Use demo@resistancezero.com / demo2026');
            }
        };

        window.debtResetDefaults = function() {
            document.getElementById('calcItems').value = 45;
            document.getElementById('calcAge').value = 18;
            document.getElementById('calcFacilityAge').value = 8;
            document.getElementById('calcCost').value = 15000;
            document.getElementById('calcRevenue').value = 50000000;
            document.getElementById('calcCritical').value = 20;
            document.getElementById('calcMajor').value = 35;
            document.getElementById('calcMinor').value = 45;
            document.getElementById('criticalVal').textContent = '20%';
            document.getElementById('majorVal').textContent = '35%';
            document.getElementById('minorVal').textContent = '45%';
            document.getElementById('calcItems').dispatchEvent(new Event('input'));
        };

        /* ═══════════════════════════════════════════
           UPGRADED PDF EXPORT
           ═══════════════════════════════════════════ */
        window.exportDebtPDF = function() {
            var riskScore = document.getElementById('riskScoreDisplay').textContent;
            var r1 = document.getElementById('resultRisk1yr').textContent;
            var r3 = document.getElementById('resultRisk3yr').textContent;
            var r5 = document.getElementById('resultRisk5yr').textContent;
            var origCost = document.getElementById('resultOriginalCost').textContent;
            var escCost = document.getElementById('resultEscalatedCost').textContent;
            var revRisk = document.getElementById('resultRevenueAtRisk').textContent;
            var budget = document.getElementById('resultBudget').textContent;
            var critCount = document.getElementById('criticalCount').textContent;
            var majCount = document.getElementById('majorCount').textContent;
            var minCount = document.getElementById('minorCount').textContent;
            var items = document.getElementById('calcItems').value;
            var age = document.getElementById('calcAge').value;
            var facAge = document.getElementById('calcFacilityAge').value;
            var cost = document.getElementById('calcCost').value;
            var rev = document.getElementById('calcRevenue').value;
            var critPct = document.getElementById('calcCritical').value;
            var majPct = document.getElementById('calcMajor').value;
            var minPct = Math.max(0, 100 - parseInt(critPct) - parseInt(majPct));
            var rs = parseFloat(riskScore);
            var riskColor = rs >= 75 ? '#ef4444' : rs >= 50 ? '#f59e0b' : rs >= 25 ? '#06b6d4' : '#10b981';
            var riskLabel = rs >= 75 ? 'CRITICAL' : rs >= 50 ? 'ELEVATED' : rs >= 25 ? 'MODERATE' : 'LOW';
            var dateStr = new Date().toLocaleDateString('en-US', {year:'numeric',month:'long',day:'numeric'});

            // SVG Bar Chart: 1yr/3yr/5yr risk projections
            var barMax = Math.max(parseFloat(r1)||0, parseFloat(r3)||0, parseFloat(r5)||0, 100);
            function barColor(v) { return v>=75?'#ef4444':v>=50?'#f59e0b':v>=25?'#06b6d4':'#10b981'; }
            var svgBar = '<svg width="500" height="180" viewBox="0 0 500 180" xmlns="http://www.w3.org/2000/svg">';
            svgBar += '<rect width="500" height="180" fill="#1f2937" rx="8"/>';
            svgBar += '<text x="250" y="22" font-family="Inter,sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">Risk Score Projection (1yr / 3yr / 5yr)</text>';
            var bDat = [{l:'1-Year',v:parseFloat(r1)||0},{l:'3-Year',v:parseFloat(r3)||0},{l:'5-Year',v:parseFloat(r5)||0}];
            var bW2=100, bGap=50, bStartX=75;
            bDat.forEach(function(d,i){
                var x=bStartX+i*(bW2+bGap), bH=(d.v/100)*110, y=145-bH;
                svgBar+='<rect x="'+x+'" y="'+y+'" width="'+bW2+'" height="'+bH+'" fill="'+barColor(d.v)+'" rx="4"/>';
                svgBar+='<text x="'+(x+bW2/2)+'" y="'+(y-6)+'" font-family="Inter,sans-serif" font-size="13" font-weight="700" fill="#f1f5f9" text-anchor="middle">'+Math.round(d.v)+'</text>';
                svgBar+='<text x="'+(x+bW2/2)+'" y="165" font-family="Inter,sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">'+d.l+'</text>';
            });
            svgBar += '</svg>';

            // SVG Pie Chart: Criticality distribution
            var cPct=parseInt(critPct), mPct=parseInt(majPct), nPct=minPct;
            function pieSlice(cx,cy,r,startAngle,endAngle,color) {
                var x1=cx+r*Math.cos(startAngle), y1=cy+r*Math.sin(startAngle);
                var x2=cx+r*Math.cos(endAngle), y2=cy+r*Math.sin(endAngle);
                var largeArc = (endAngle-startAngle)>Math.PI?1:0;
                return '<path d="M'+cx+','+cy+' L'+x1+','+y1+' A'+r+','+r+' 0 '+largeArc+',1 '+x2+','+y2+' Z" fill="'+color+'"/>';
            }
            var svgPie = '<svg width="500" height="180" viewBox="0 0 500 180" xmlns="http://www.w3.org/2000/svg">';
            svgPie += '<rect width="500" height="180" fill="#1f2937" rx="8"/>';
            svgPie += '<text x="250" y="22" font-family="Inter,sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">Criticality Distribution</text>';
            var pcx=150, pcy=100, pr=60;
            var a1=-Math.PI/2, a2=a1+(cPct/100)*2*Math.PI, a3=a2+(mPct/100)*2*Math.PI;
            if (cPct>0) svgPie+=pieSlice(pcx,pcy,pr,a1,a2,'#ef4444');
            if (mPct>0) svgPie+=pieSlice(pcx,pcy,pr,a2,a3,'#f59e0b');
            if (nPct>0) svgPie+=pieSlice(pcx,pcy,pr,a3,a1+2*Math.PI,'#10b981');
            // Legend
            svgPie+='<rect x="280" y="55" width="12" height="12" fill="#ef4444" rx="2"/><text x="298" y="65" font-family="Inter,sans-serif" font-size="11" fill="#e2e8f0">Critical '+cPct+'% ('+critCount+')</text>';
            svgPie+='<rect x="280" y="80" width="12" height="12" fill="#f59e0b" rx="2"/><text x="298" y="90" font-family="Inter,sans-serif" font-size="11" fill="#e2e8f0">Major '+mPct+'% ('+majCount+')</text>';
            svgPie+='<rect x="280" y="105" width="12" height="12" fill="#10b981" rx="2"/><text x="298" y="115" font-family="Inter,sans-serif" font-size="11" fill="#e2e8f0">Minor '+nPct+'% ('+minCount+')</text>';
            svgPie+='</svg>';

            // Dynamic risk assessment narrative
            var riskZone = rs>=75?'critical':rs>=50?'elevated':rs>=25?'moderate':'low';
            var narrativePdf = 'This facility registers a Weibull-based composite risk score of ' + Math.round(rs) + '/100, classified as ' + riskZone.toUpperCase() + '. ';
            narrativePdf += 'With ' + items + ' deferred items averaging ' + age + ' months in deferral across a ' + facAge + '-year-old facility, ';
            narrativePdf += 'the risk profile shows compounding exposure. ';
            if (rs >= 60) {
                narrativePdf += 'This score exceeds the Uptime Institute threshold correlated with 3.2x incident frequency increase. Immediate Phase 1 stabilization targeting critical items within 90 days is strongly recommended.';
            } else if (rs >= 30) {
                narrativePdf += 'While below the critical threshold, the trajectory shows accelerating risk. A structured 6-month remediation program is recommended to prevent drift toward critical levels.';
            } else {
                narrativePdf += 'The facility is within acceptable industry norms. Continue monitoring and address items proactively before entering the wear-out zone.';
            }

            // Recommendations
            var recs = [];
            if (cPct > 25) recs.push({text:'Initiate immediate remediation program for critical items ('+cPct+'% exceeds 25% threshold)', urgency:'URGENT'});
            else recs.push({text:'Schedule critical item remediation within 90-day window', urgency:'HIGH'});
            if (rs >= 50) recs.push({text:'Commission comprehensive technical debt audit across all MEP systems', urgency:'URGENT'});
            recs.push({text:'Establish quarterly debt-register review in operational governance meetings', urgency:'MEDIUM'});
            recs.push({text:'Allocate 3-5% of original CAPEX annually for lifecycle replacement program', urgency:'HIGH'});
            if (parseFloat(age) > 24) recs.push({text:'Prioritize items with deferral age >24 months entering wear-out failure zone', urgency:'HIGH'});
            recs.push({text:'Implement condition-based monitoring for remaining deferred assets', urgency:'MEDIUM'});

            var html = '<div style="font-family:Inter,sans-serif;max-width:800px;margin:0 auto;padding:40px;color:#e2e8f0;">';
            // Header
            html += '<div style="display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid #f59e0b;padding-bottom:16px;margin-bottom:24px;">';
            html += '<div><div style="font-size:22px;font-weight:800;color:#1e3a5f;">Technical Debt Risk Report</div><div style="font-size:11px;color:#64748b;margin-top:4px;">Generated ' + dateStr + '</div></div>';
            html += '<div style="text-align:right;"><div style="font-size:10px;color:#94a3b8;text-transform:uppercase;letter-spacing:1px;">RESISTANCEZERO</div><div style="font-size:9px;color:#94a3b8;">Pro Analysis Report</div></div></div>';

            // Risk Score hero
            html += '<div style="text-align:center;margin:24px 0;padding:24px;background:#f8fafc;border-radius:12px;border:2px solid ' + riskColor + '33;">';
            html += '<div style="font-size:52px;font-weight:800;color:' + riskColor + ';">' + riskScore + '</div>';
            html += '<div style="font-size:14px;font-weight:700;color:' + riskColor + ';letter-spacing:1px;">' + riskLabel + ' RISK</div>';
            html += '<div style="font-size:11px;color:#64748b;margin-top:4px;">Weibull-based composite risk score (0-100)</div></div>';

            // Input Summary
            html += '<div style="margin-bottom:20px;"><div style="font-size:12px;font-weight:700;color:#f59e0b;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Input Parameters</div>';
            html += '<table style="width:100%;font-size:11px;border-collapse:collapse;color:#1e293b;">';
            html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Deferred Items</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">' + items + '</td>';
            html += '<td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Avg Age</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">' + age + ' months</td></tr>';
            html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Facility Age</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">' + facAge + ' years</td>';
            html += '<td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Avg Cost</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">$' + parseInt(cost).toLocaleString() + '</td></tr>';
            html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Annual Revenue</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">$' + parseInt(rev).toLocaleString() + '</td>';
            html += '<td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;color:#64748b;">Priority Mix</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">' + critCount + ' Crit / ' + majCount + ' Maj / ' + minCount + ' Min</td></tr></table></div>';

            // SVG charts
            html += '<div style="margin:20px 0;">' + svgBar + '</div>';
            html += '<div style="margin:20px 0;">' + svgPie + '</div>';

            // Results grid
            html += '<div style="margin-bottom:20px;"><div style="font-size:12px;font-weight:700;color:#f59e0b;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Risk Projections &amp; Financial Impact</div>';
            html += '<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;">';
            [{l:'Risk 1yr',v:r1},{l:'Risk 3yr',v:r3},{l:'Risk 5yr',v:r5},{l:'Original Cost',v:origCost},{l:'Escalated Cost',v:escCost},{l:'Revenue at Risk',v:revRisk},{l:'Annual Budget',v:budget},{l:'Risk Score',v:riskScore}].forEach(function(m){
                html += '<div style="background:#f8fafc;padding:12px;border-radius:8px;text-align:center;border:1px solid #e2e8f0;">';
                html += '<div style="font-size:14px;font-weight:700;color:#1e3a5f;">' + m.v + '</div>';
                html += '<div style="font-size:9px;color:#64748b;margin-top:2px;">' + m.l + '</div></div>';
            });
            html += '</div></div>';

            // Pro data tables if available
            if (_proCache.mc) {
                html += '<div style="margin-bottom:20px;"><div style="font-size:12px;font-weight:700;color:#f59e0b;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Monte Carlo Analysis (10,000 Iterations)</div>';
                html += '<table style="width:100%;font-size:11px;border-collapse:collapse;color:#1e293b;">';
                html += '<tr style="background:#f1f5f9;"><th style="padding:8px 12px;text-align:left;border-bottom:2px solid #e2e8f0;">Metric</th><th style="padding:8px 12px;text-align:right;border-bottom:2px solid #e2e8f0;">Value</th></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">P50 (Median)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.mc.p50) + '</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">P80 (Conservative)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.mc.p80) + '</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">P95 (Worst-case Plausible)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.mc.p95) + '</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">90% Confidence Band</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.mc.confBand) + ' pts</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">Distribution Shape</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + _proCache.mc.shape + '</td></tr>';
                html += '</table></div>';
            }

            if (_proCache.weibull) {
                html += '<div style="margin-bottom:20px;"><div style="font-size:12px;font-weight:700;color:#f59e0b;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Weibull Reliability Parameters</div>';
                html += '<table style="width:100%;font-size:11px;border-collapse:collapse;color:#1e293b;">';
                html += '<tr style="background:#f1f5f9;"><th style="padding:8px 12px;text-align:left;border-bottom:2px solid #e2e8f0;">Parameter</th><th style="padding:8px 12px;text-align:right;border-bottom:2px solid #e2e8f0;">Value</th></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">Effective Beta (Shape)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + _proCache.weibull.beta.toFixed(2) + '</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">Effective Eta (Scale)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.weibull.eta) + ' months</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">MTTF Estimate</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.weibull.mttf) + ' months</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">Reliability R(t)</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + (_proCache.weibull.reliability*100).toFixed(1) + '%</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">Hazard Trend</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + _proCache.weibull.hazardTrend + '</td></tr>';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">B10 Life</td><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:right;font-weight:600;">' + Math.round(_proCache.weibull.b10) + ' months</td></tr>';
                html += '</table></div>';
            }

            // Narrative section
            html += '<div style="margin:20px 0;padding:16px;background:#fffbeb;border-radius:8px;border-left:4px solid #f59e0b;">';
            html += '<div style="font-size:12px;font-weight:700;color:#1e3a5f;margin-bottom:8px;">EXECUTIVE RISK ASSESSMENT</div>';
            html += '<div style="font-size:11px;color:#374151;line-height:1.7;">' + narrativePdf + '</div></div>';

            // Recommendations
            html += '<div style="margin:20px 0;"><div style="font-size:12px;font-weight:700;color:#f59e0b;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;">Prioritized Recommendations</div>';
            html += '<table style="width:100%;font-size:11px;border-collapse:collapse;color:#1e293b;">';
            html += '<tr style="background:#f1f5f9;"><th style="padding:8px 12px;text-align:left;border-bottom:2px solid #e2e8f0;">Priority</th><th style="padding:8px 12px;text-align:left;border-bottom:2px solid #e2e8f0;">Action Item</th><th style="padding:8px 12px;text-align:center;border-bottom:2px solid #e2e8f0;">Urgency</th></tr>';
            recs.forEach(function(r, i) {
                var uColor = r.urgency==='URGENT'?'#ef4444':r.urgency==='HIGH'?'#f59e0b':'#06b6d4';
                html += '<tr><td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;font-weight:600;">' + (i+1) + '</td>';
                html += '<td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;">' + r.text + '</td>';
                html += '<td style="padding:6px 12px;border-bottom:1px solid #e2e8f0;text-align:center;"><span style="display:inline-block;padding:2px 8px;border-radius:4px;font-size:9px;font-weight:700;color:#fff;background:'+uColor+';">'+r.urgency+'</span></td></tr>';
            });
            html += '</table></div>';

            // Methodology
            html += '<div style="background:#f8fafc;padding:16px;border-radius:8px;border-left:3px solid #f59e0b;margin-top:20px;">';
            html += '<div style="font-size:11px;font-weight:700;color:#64748b;margin-bottom:6px;">METHODOLOGY NOTE</div>';
            html += '<div style="font-size:10px;color:#64748b;line-height:1.6;">Weibull hazard function (&beta;=2.5, &eta;=60mo), 10,000 Monte Carlo iterations, 15%/yr escalation rate. Discount rate 8% for NPV. Criticality weighting: Critical=10, Major=5, Minor=1. Sources: NIST SP 800-82, ISO 55001, Uptime Institute Annual Survey 2023-2024, IEEE 493 (Gold Book).</div></div>';

            // Footer
            html += '<div style="text-align:center;margin-top:24px;padding-top:16px;border-top:1px solid #e2e8f0;font-size:9px;color:#94a3b8;">resistancezero.com | Generated ' + dateStr + ' | Client-side calculations</div>';
            html += '</div>';

            var w = window.open('', '_blank');
            w.document.write('<html><head><title>Technical Debt Risk Report</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"><style>@media print{@page{margin:0.5in;} body{-webkit-print-color-adjust:exact;print-color-adjust:exact;}}</style></head><body style="margin:0;padding:0;background:#fff;">');
            w.document.write(html);
            w.document.write('</body></html>');
            w.document.close();
            setTimeout(function(){ w.print(); }, 500);
        };

        /* ─── AUTH LISTENERS ─── */
        window.addEventListener('rz-auth-change', function(e) {
            if (e.detail && e.detail.action === 'login') {
                isDebtPremium = true;
                switchDebtMode('pro');
            } else if (e.detail && e.detail.action === 'logout') {
                isDebtPremium = false;
                debtMode = 'free';
                switchDebtMode('free');
            }
        });

        if (isDebtPremium) {
            var badge = document.getElementById('debtProBadge');
            if (badge) badge.style.display = 'none';
        }
    })();
    </script>

<!-- ═══ Feature 22: Reading Progress Bar ═══ -->
<script>
(function() {
    var bar = document.getElementById('scrollProgress');
    if (!bar) return;
    var ticking = false;
    function updateProgress() {
        var scrollTop = window.scrollY || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - window.innerHeight;
        var pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
        bar.style.width = Math.min(pct, 100) + '%';
        ticking = false;
    }
    window.addEventListener('scroll', function() {
        if (!ticking) { requestAnimationFrame(updateProgress); ticking = true; }
    }, { passive: true });
    updateProgress();
})();
</script>

<!-- ═══ Feature 23: TOC Sidebar ═══ -->
<script>
(function() {
    // Find H2s with IDs first, then fallback to auto-generating IDs
    var sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    if (!sections.length) {
        var allH2s = document.querySelectorAll('.article-body h2, .article-content h2');
        allH2s.forEach(function(h2, i) {
            if (!h2.id) h2.id = 'toc-section-' + (i + 1);
        });
        sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    }
    if (!sections.length) return;

    var sidebarList = document.getElementById('tocSidebarList');
    var mobileList = document.getElementById('tocMobileList');
    var sidebar = document.getElementById('tocSidebar');
    var tocToggle = document.getElementById('tocMobileToggle');
    var tocDrawer = document.getElementById('tocMobileDrawer');
    var tocBackdrop = document.getElementById('tocMobileBackdrop');
    var tocClose = document.getElementById('tocDrawerClose');

    var tocData = [];
    sections.forEach(function(h2, i) {
        var id = h2.getAttribute('id');
        var numMatch = id.match(/\d+/);
        var num = numMatch ? numMatch[0] : String(i + 1);
        var text = h2.textContent.replace(/^\s*\d+[\.\s]*/, '').trim();
        tocData.push({ id: id, num: num, text: text });
    });

    function buildList(container, isMobile) {
        tocData.forEach(function(item) {
            var li = document.createElement('li');
            if (!isMobile) li.className = 'toc-sidebar-item';
            var a = document.createElement('a');
            a.href = '#' + item.id;
            a.setAttribute('data-section', item.id);
            if (isMobile) {
                a.textContent = item.num + '. ' + item.text;
            } else {
                a.className = 'toc-sidebar-link';
                a.innerHTML = '<span class="toc-sidebar-num">' + item.num + '</span>' + item.text;
            }
            a.addEventListener('click', function(e) {
                e.preventDefault();
                var target = document.getElementById(item.id);
                if (target) window.scrollTo({ top: target.offsetTop - 80, behavior: 'smooth' });
                if (isMobile) closeMobileDrawer();
            });
            li.appendChild(a);
            container.appendChild(li);
        });
    }

    buildList(sidebarList, false);
    buildList(mobileList, true);

    var currentSection = null;
    var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                currentSection = entry.target.getAttribute('id');
                highlightActive(currentSection);
            }
        });
    }, { rootMargin: '-80px 0px -70% 0px', threshold: 0 });

    sections.forEach(function(s) { observer.observe(s); });

    function highlightActive(sectionId) {
        sidebarList.querySelectorAll('.toc-sidebar-link').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
        mobileList.querySelectorAll('a').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
    }

    var articleContent = document.querySelector('.article-content');
    if (articleContent && sidebar) {
        var sidebarObserver = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                sidebar.classList.toggle('visible', entry.isIntersecting);
            });
        }, { rootMargin: '0px', threshold: 0.01 });
        sidebarObserver.observe(articleContent);
    }

    function openMobileDrawer() {
        tocDrawer.classList.add('active');
        tocBackdrop.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    function closeMobileDrawer() {
        tocDrawer.classList.remove('active');
        tocBackdrop.classList.remove('active');
        document.body.style.overflow = '';
    }

    if (tocToggle) tocToggle.addEventListener('click', openMobileDrawer);
    if (tocClose) tocClose.addEventListener('click', closeMobileDrawer);
    if (tocBackdrop) tocBackdrop.addEventListener('click', closeMobileDrawer);
})();
</script>

<!-- ═══ Feature 21: Global Search ═══ -->
<script>
(function() {
    var searchBtn = document.getElementById('navSearchBtn');
    var overlay = document.getElementById('searchOverlay');
    var modal = document.getElementById('searchModal');
    var input = document.getElementById('searchInput');
    var resultsEl = document.getElementById('searchResults');
    var previewEl = document.getElementById('searchPreview');
    var chipsEl = document.getElementById('searchChips');
    var fuse = null;
    var searchData = null;
    var focusedIdx = -1;
    var activeFilter = 'all';
    var lastResults = [];
    var RECENT_KEY = 'rz-search-recent';

    function getRecent() {
        try { return JSON.parse(localStorage.getItem(RECENT_KEY)) || []; }
        catch(e) { return []; }
    }
    function saveRecent(query) {
        if (!query || query.length < 2) return;
        var arr = getRecent().filter(function(q) { return q !== query; });
        arr.unshift(query);
        if (arr.length > 3) arr = arr.slice(0, 3);
        try { localStorage.setItem(RECENT_KEY, JSON.stringify(arr)); } catch(e) {}
    }
    function clearRecent() {
        try { localStorage.removeItem(RECENT_KEY); } catch(e) {}
    }

    function renderRecent() {
        var recent = getRecent();
        if (!recent.length) {
            resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
            return;
        }
        var html = '<div class="search-recent"><div class="search-recent-header">'
            + '<span class="search-recent-label">Recent</span>'
            + '<button class="search-recent-clear" id="clearRecent">Clear</button></div>';
        recent.forEach(function(q) {
            html += '<div class="search-recent-item" data-query="' + q.replace(/"/g, '&quot;') + '">'
                + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>'
                + '<span>' + q + '</span></div>';
        });
        html += '</div>';
        resultsEl.innerHTML = html;
        var clearBtn = document.getElementById('clearRecent');
        if (clearBtn) clearBtn.addEventListener('click', function() { clearRecent(); renderRecent(); });
        resultsEl.querySelectorAll('.search-recent-item').forEach(function(el) {
            el.addEventListener('click', function() {
                input.value = el.getAttribute('data-query');
                input.dispatchEvent(new Event('input'));
            });
        });
    }

    function openSearch() {
        overlay.classList.add('active');
        modal.classList.add('active');
        input.value = '';
        input.focus();
        focusedIdx = -1;
        activeFilter = 'all';
        lastResults = [];
        updateChips();
        hidePreview();
        renderRecent();
        if (!searchData) {
            fetch('search-index.json')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    searchData = data;
                    fuse = new Fuse(data, {
                        keys: [
                            { name: 'title', weight: 0.4 },
                            { name: 'description', weight: 0.25 },
                            { name: 'keywords', weight: 0.25 },
                            { name: 'category', weight: 0.1 }
                        ],
                        threshold: 0.35,
                        includeScore: true,
                        includeMatches: true,
                        minMatchCharLength: 2
                    });
                })
                .catch(function() {});
        }
    }

    function closeSearch() {
        overlay.classList.remove('active');
        modal.classList.remove('active');
        input.blur();
        hidePreview();
    }

    function getIconClass(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calc';
        if (cat === 'tool') return 'tool';
        if (cat === 'policy') return 'policy';
        if (cat === 'sustainability') return 'sustainability';
        if (cat === 'geopolitics') return 'geopolitics';
        if (cat === 'analysis') return 'analysis';
        if (cat === 'leadership') return 'leadership';
        if (cat === 'business') return 'business';
        return '';
    }

    function getIconLabel(item) {
        if (item.url && item.url.indexOf('article-') === 0) {
            return item.url.replace('article-', '').replace('.html', '').padStart(2, '0');
        }
        var cat = (item.category || '').toLowerCase();
        if (cat === 'calculator') return '&#9889;';
        if (cat === 'tool') return '&#9881;';
        if (cat === 'geopolitics') return '&#9733;';
        return '&#9733;';
    }

    function getCatFilter(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calculators';
        if (cat === 'tool') return 'tools';
        return 'articles';
    }

    function highlightText(text, matches, key) {
        if (!matches || !matches.length) return text;
        var found = null;
        for (var i = 0; i < matches.length; i++) {
            if (matches[i].key === key) { found = matches[i]; break; }
        }
        if (!found || !found.indices || !found.indices.length) return text;
        var indices = found.indices.sort(function(a, b) { return a[0] - b[0]; });
        var result = '';
        var last = 0;
        indices.forEach(function(pair) {
            var start = pair[0], end = pair[1];
            if (start > last) result += text.substring(last, start);
            result += '<mark class="search-highlight">' + text.substring(start, end + 1) + '</mark>';
            last = end + 1;
        });
        if (last < text.length) result += text.substring(last);
        return result;
    }

    function filterResults(results) {
        if (activeFilter === 'all') return results;
        return results.filter(function(r) {
            return getCatFilter(r.item.category) === activeFilter;
        });
    }

    function renderResults(results) {
        var filtered = filterResults(results);
        if (!filtered.length) {
            resultsEl.innerHTML = '<div class="search-empty">No results found</div>';
            focusedIdx = -1;
            hidePreview();
            return;
        }
        var html = '';
        filtered.slice(0, 8).forEach(function(r, i) {
            var item = r.item;
            var iconCls = getIconClass(item.category);
            var titleHtml = highlightText(item.title, r.matches, 'title');
            var descHtml = highlightText(item.description, r.matches, 'description');
            html += '<a href="' + item.url + '" class="search-result-item" data-idx="' + i + '">'
                + '<div class="search-result-icon ' + iconCls + '">' + getIconLabel(item) + '</div>'
                + '<div class="search-result-info">'
                + '<div class="search-result-category">' + (item.category || '') + '</div>'
                + '<div class="search-result-title">' + titleHtml + '</div>'
                + '<div class="search-result-desc">' + descHtml + '</div>'
                + '</div></a>';
        });
        resultsEl.innerHTML = html;
        focusedIdx = -1;
        attachHoverListeners(filtered);
    }

    function attachHoverListeners(filtered) {
        resultsEl.querySelectorAll('.search-result-item').forEach(function(el) {
            var idx = parseInt(el.getAttribute('data-idx'), 10);
            el.addEventListener('mouseenter', function() { showPreview(filtered[idx], el); });
            el.addEventListener('mouseleave', function() { hidePreview(); });
            el.addEventListener('click', function() { saveRecent(input.value.trim()); });
        });
    }

    function showPreview(r, anchorEl) {
        if (!previewEl || !r) return;
        var item = r.item;
        var imgHtml = item.image ? '<img class="search-preview-img" src="' + item.image + '" alt="">' : '';
        var timeHtml = item.readingTime ? '<div class="search-preview-badge"><svg viewBox="0 0 24 24" width="10" height="10" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>' + item.readingTime + ' min</div>' : '';
        previewEl.innerHTML = imgHtml
            + '<div class="search-preview-text">'
            + '<div class="search-preview-cat">' + (item.category || '') + '</div>'
            + '<div class="search-preview-title">' + item.title + '</div>'
            + '<div class="search-preview-desc">' + item.description + '</div>'
            + timeHtml
            + '</div>';
        // Position tooltip to the right of the modal
        var modalRect = modal.getBoundingClientRect();
        var itemRect = anchorEl.getBoundingClientRect();
        var tipLeft = modalRect.right + 10;
        var tipTop = itemRect.top;
        // If no space on right, show on left
        if (tipLeft + 270 > window.innerWidth) {
            tipLeft = modalRect.left - 270;
        }
        // Keep within viewport vertically
        if (tipTop + 100 > window.innerHeight) {
            tipTop = window.innerHeight - 110;
        }
        previewEl.style.left = tipLeft + 'px';
        previewEl.style.top = tipTop + 'px';
        previewEl.classList.add('visible');
    }

    function hidePreview() {
        if (!previewEl) return;
        previewEl.innerHTML = '';
        previewEl.classList.remove('visible');
    }

    function updateChips() {
        if (!chipsEl) return;
        chipsEl.querySelectorAll('.search-chip').forEach(function(chip) {
            chip.classList.toggle('active', chip.getAttribute('data-filter') === activeFilter);
        });
    }

    if (chipsEl) {
        chipsEl.addEventListener('click', function(e) {
            var chip = e.target.closest('.search-chip');
            if (!chip) return;
            activeFilter = chip.getAttribute('data-filter');
            updateChips();
            if (lastResults.length) renderResults(lastResults);
        });
    }

    function updateFocus() {
        var items = resultsEl.querySelectorAll('.search-result-item');
        items.forEach(function(el, i) {
            el.classList.toggle('focused', i === focusedIdx);
            if (i === focusedIdx) {
                el.scrollIntoView({ block: 'nearest' });
                var idx = parseInt(el.getAttribute('data-idx'), 10);
                var filtered = filterResults(lastResults);
                if (filtered[idx]) showPreview(filtered[idx], el);
            }
        });
    }

    if (searchBtn) searchBtn.addEventListener('click', openSearch);
    if (overlay) overlay.addEventListener('click', closeSearch);

    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            if (modal.classList.contains('active')) closeSearch();
            else openSearch();
            return;
        }
        if (!modal.classList.contains('active')) return;
        if (e.key === 'Escape') { closeSearch(); return; }
        var items = resultsEl.querySelectorAll('.search-result-item');
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            focusedIdx = Math.min(focusedIdx + 1, items.length - 1);
            updateFocus();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            focusedIdx = Math.max(focusedIdx - 1, 0);
            updateFocus();
        } else if (e.key === 'Enter' && focusedIdx >= 0 && items[focusedIdx]) {
            e.preventDefault();
            saveRecent(input.value.trim());
            items[focusedIdx].click();
        }
    });

    if (input) {
        input.addEventListener('input', function() {
            var query = input.value.trim();
            if (query.length < 2 || !fuse) {
                lastResults = [];
                focusedIdx = -1;
                hidePreview();
                if (query.length === 0) { renderRecent(); }
                else { resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>'; }
                return;
            }
            var results = fuse.search(query);
            lastResults = results;
            renderResults(results);
        });
    }
})();
</script>

<!-- Tooltip Positioning JS -->
<script>
document.querySelectorAll('.tooltip-trigger').forEach(function(trigger) {
    trigger.addEventListener('mouseenter', function() {
        var content = this.querySelector('.tooltip-content');
        if (!content) return;
        content.style.display = 'block';
        var rect = this.getBoundingClientRect();
        var cRect = content.getBoundingClientRect();
        var top = rect.bottom + 8;
        var left = rect.left - cRect.width/2 + rect.width/2;
        if (left < 8) left = 8;
        if (left + cRect.width > window.innerWidth - 8) left = window.innerWidth - cRect.width - 8;
        if (top + cRect.height > window.innerHeight - 8) top = rect.top - cRect.height - 8;
        content.style.top = top + 'px';
        content.style.left = left + 'px';
    });
    trigger.addEventListener('mouseleave', function() {
        var content = this.querySelector('.tooltip-content');
        if (content) content.style.display = 'none';
    });
});
</script>

<script>
function subscribeNewsletter(e){e.preventDefault();var email=e.target.querySelector('input[type="email"]').value.trim();if(!email)return false;var subs=JSON.parse(localStorage.getItem('rz_newsletter_subscribers')||'[]');if(subs.find(function(s){return s.email===email})){alert('Already subscribed!');return false}subs.push({email:email,date:new Date().toISOString(),source:location.pathname.split('/').pop(),status:'active'});localStorage.setItem('rz_newsletter_subscribers',JSON.stringify(subs));e.target.innerHTML='<p style="color:#fff;font-weight:600;">✓ Subscribed successfully!</p>';return false}
</script>
<script src="auth.js?v=20260225"></script>
<script src="rz-tracker.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-banner hidden" id="cookieBanner">
    <p>We use cookies for analytics to improve your experience. <a href="privacy.html">Learn more</a></p>
    <div class="cookie-actions">
        <button class="cookie-accept" id="cookieAccept">Accept</button>
        <button class="cookie-decline" id="cookieDecline">Decline</button>
    </div>
</div>

<!-- Scroll to Top -->
<button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg>
</button>

<script>
(function(){
    // Cookie Banner
    var cb = document.getElementById('cookieBanner');
    var consent = localStorage.getItem('rz_cookie_consent');
    if (!consent && cb) {
        cb.classList.remove('hidden');
    }
    var acceptBtn = document.getElementById('cookieAccept');
    var declineBtn = document.getElementById('cookieDecline');
    if (acceptBtn) acceptBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'accepted');
        cb.classList.add('hidden');
    });
    if (declineBtn) declineBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'declined');
        cb.classList.add('hidden');
        // Disable GA
        window['ga-disable-G-GED7FX8RTV'] = true;
    });

    // Scroll to Top
    var sBtn = document.getElementById('scrollTopBtn');
    if (sBtn) {
        var ticking = false;
        window.addEventListener('scroll', function(){
            if (!ticking) {
                window.requestAnimationFrame(function(){
                    if (window.scrollY > 500) {
                        sBtn.classList.add('visible');
                    } else {
                        sBtn.classList.remove('visible');
                    }
                    ticking = false;
                });
                ticking = true;
            }
        });
        sBtn.addEventListener('click', function(){
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
})();
</script>

</body>
</html>