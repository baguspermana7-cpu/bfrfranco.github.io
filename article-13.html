<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GED7FX8RTV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GED7FX8RTV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <title>Data Center Power Distribution | Hyperscaler Design | ResistanceZero</title>
    <meta name="description" content="Ultra-comprehensive technical analysis of modern data center power distribution systems. Covers AWS, Google, Microsoft, xAI Colossus architectures. 48V/380V/800V DC distribution, failure scenarios, arc flash calculations, protection coordination, and reliability engineering.">
    <meta name="keywords" content="Data Center Power Distribution, Hyperscaler Architecture, AWS UPS, Google 48V DC, Microsoft Azure Power, xAI Colossus, NVIDIA GB200, Arc Flash, Selective Coordination, UPS Design, Generator Systems, Lithium-ion Battery, Thermal Runaway, TIA-942, Uptime Institute Tier">
    <meta name="author" content="Bagus Dwi Permana">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#1e3a5f">
    <link rel="canonical" href="https://resistancezero.com/article-13.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://resistancezero.com/article-13.html">
    <meta property="og:title" content="Data Center Power Distribution Design: Hyperscaler Architecture Deep Dive">
    <meta property="og:description" content="Technical deep-dive into AWS, Google, Microsoft, and xAI power distribution systems. Includes failure scenarios, protection coordination, and reliability calculations.">
    <meta property="og:image" content="https://resistancezero.com/assets/article-13-cover.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Data Center Power Distribution Design: Hyperscaler Architecture Deep Dive">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Bagus Dwi Permana Portfolio">
    <meta property="article:author" content="Bagus Dwi Permana">
    <meta property="article:published_time" content="2026-02-08T00:00:00Z">
    <meta property="article:modified_time" content="2026-02-17T00:00:00Z">
    <meta property="article:section" content="Engineering Journal">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BagusDPermana">
    <meta name="twitter:creator" content="@BagusDPermana">
    <meta name="twitter:title" content="Data Center Power Distribution Design: Hyperscaler Deep Dive">
    <meta name="twitter:description" content="AWS, Google, Microsoft, xAI power architectures. Failure scenarios and reliability engineering.">
    <meta name="twitter:image" content="https://resistancezero.com/assets/article-13-cover.jpg">
    <meta name="twitter:image:alt" content="Power Architecture Revolution for AI-Era Data Centers">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <link rel="apple-touch-icon" href="assets/Favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preload" as="image" href="assets/article-13-cover.jpg">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechnicalArticle",
        "headline": "Data Center Power Distribution Design: Hyperscaler Architecture Deep Dive",
        "description": "Comprehensive technical analysis of modern data center power distribution systems based on AWS, Google, Microsoft, and xAI architectures.",
        "image": "https://resistancezero.com/assets/article-13-cover.jpg",
        "author": {
            "@type": "Person",
            "name": "Bagus Dwi Permana",
            "jobTitle": "Engineering Operations Manager"
        },
        "datePublished": "2026-02-08",
        "wordCount": "15000",
        "articleSection": "Engineering Journal",
        "keywords": ["Power Distribution", "Hyperscaler", "Data Center", "UPS", "Reliability Engineering"]
    }
    </script>

    <style>
        :root {
            --primary-blue: #1e3a5f;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-emerald: #10b981;
            --accent-red: #ef4444;
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* Hero Section */
        .article-hero {
            background: linear-gradient(135deg, #0b1220 0%, #1e3a5f 50%, #2d5a87 100%);
            padding: 7rem 2rem 3.5rem;
            color: #fff;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .article-hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L32 15 L42 17 L32 19 L30 29 L28 19 L18 17 L28 15 Z' fill='%2306b6d4' fill-opacity='0.03'/%3E%3C/svg%3E");
            z-index: 0;
        }

        .article-hero > * { position: relative; z-index: 1; }
        .article-hero .container { max-width: 1000px; margin: 0 auto; }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(6, 182, 212, 0.2);
            color: #67e8f9;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .article-title {
            font-size: clamp(1.6rem, 3.2vw, 2.35rem);
            font-weight: 800;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            color: #fff;
            letter-spacing: -0.01em;
        }

        .article-subtitle {
            font-size: clamp(0.95rem, 1.6vw, 1.15rem);
            color: #94a3b8;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .article-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Table of Contents */
        .toc-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 3rem 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .toc-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .toc-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.625rem;
        }

        .toc-item {
            background: #fff;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-cyan);
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .toc-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toc-item-number {
            font-size: 0.75rem;
            color: var(--accent-cyan);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .toc-item-title {
            font-weight: 600;
            font-size: 0.88rem;
        }

        /* TOC Calculator Highlight */
        .toc-item.toc-calculator {
            background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%);
            border-left-color: #06b6d4;
            border-left-width: 5px;
        }
        .toc-item.toc-calculator .toc-item-number { display: flex; align-items: center; gap: 6px; }
        .toc-item.toc-calculator .toc-calc-badge {
            font-size: 0.6rem; background: #06b6d4; color: #fff; padding: 1px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px;
        }
        [data-theme="dark"] .toc-item.toc-calculator {
            background: linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.08) 100%);
        }

        /* Article Content */
        .article-content {
            padding: 4rem 2rem;
            background: #fff;
        }

        .article-content .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-cyan);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .article-body h2 .section-number {
            background: var(--accent-cyan);
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .article-body h3 {
            font-size: 1.1rem;
            color: #334155;
            margin: 1.5rem 0 0.5rem;
        }

        .article-body h4 {
            font-size: 0.9rem;
            color: #475569;
            margin: 1rem 0 0.5rem;
        }

        /* Data Tables */
        .data-table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table thead {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #2d5a87 100%);
            color: #fff;
        }

        .data-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            white-space: nowrap;
        }

        .data-table td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Company Badges */
        .company-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .company-badge.aws { background: #ff990033; color: #ff9900; }
        .company-badge.google { background: #4285f433; color: #4285f4; }
        .company-badge.microsoft { background: #00a4ef33; color: #00a4ef; }
        .company-badge.xai { background: #00000020; color: #333; }
        .company-badge.nvidia { background: #76b90033; color: #76b900; }

        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid var(--accent-cyan);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left-color: var(--accent-amber);
        }

        .info-box.critical {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left-color: var(--accent-red);
        }

        .info-box.success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: var(--accent-emerald);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Code Blocks */
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.25rem;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            line-height: 1.6;
        }

        .code-block .comment { color: #64748b; }
        .code-block .keyword { color: #f472b6; }
        .code-block .variable { color: #67e8f9; }
        .code-block .value { color: #a5f3fc; }

        /* Formula Box */
        .formula-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #c4b5fd;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .formula-box-title {
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 0.75rem;
            font-family: 'Inter', sans-serif;
        }

        /* Comparison Cards */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .comparison-card {
            background: #fff;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        .comparison-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .comparison-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .comparison-card-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .comparison-card-subtitle {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Stat Highlights */
        .stat-highlight {
            display: inline-flex;
            align-items: baseline;
            gap: 0.25rem;
        }

        .stat-highlight .value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent-cyan);
        }

        .stat-highlight .unit {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Architecture Diagram */
        .architecture-diagram {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            color: #e2e8f0;
            overflow-x: auto;
        }

        .architecture-title {
            color: #fff;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .flow-box {
            background: rgba(6, 182, 212, 0.2);
            border: 1px solid rgba(6, 182, 212, 0.4);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            white-space: nowrap;
        }

        .flow-arrow {
            color: var(--accent-cyan);
            font-size: 1.2rem;
        }

        /* Interactive Calculator */
        .calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            margin: 3rem 0;
            color: #fff;
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .calculator-subtitle {
            color: #94a3b8;
            text-align: center;
            margin-bottom: 2rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-label {
            font-size: 0.85rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .calc-input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .calc-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .calc-result-item {
            text-align: center;
            padding: 1rem;
        }

        .calc-result-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent-cyan);
        }

        .calc-result-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Failure Scenario Cards */
        .failure-scenarios {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .failure-card {
            background: #fff;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border-left: 4px solid var(--accent-red);
        }

        .failure-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .failure-title {
            font-weight: 700;
            color: var(--text-primary);
        }

        .failure-severity {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .failure-severity.critical { background: #fef2f2; color: #dc2626; }
        .failure-severity.high { background: #fff7ed; color: #ea580c; }
        .failure-severity.medium { background: #fffbeb; color: #d97706; }

        .failure-sequence {
            background: #f8fafc;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .failure-step {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px dashed #e2e8f0;
        }

        .failure-step:last-child {
            border-bottom: none;
        }

        .failure-step-number {
            width: 24px;
            height: 24px;
            background: var(--accent-red);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        /* References */
        .references-section {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 16px;
            margin-top: 3rem;
        }

        .references-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
        }

        .references-list {
            display: grid;
            gap: 0.75rem;
        }

        .reference-item {
            display: flex;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        .reference-number {
            color: var(--accent-cyan);
            font-weight: 700;
            flex-shrink: 0;
        }

        .reference-item a {
            color: var(--primary-blue);
            text-decoration: none;
        }

        .reference-item a:hover {
            text-decoration: underline;
        }

        .reference-source {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Article Nav */
        .article-nav {
            display: flex;
            justify-content: space-between;
            padding: 2rem 0;
            border-top: 1px solid #e2e8f0;
            margin-top: 3rem;
        }
        .article-nav a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-blue);
            font-weight: 600;
            transition: color 0.3s ease;
            text-decoration: none;
        }
        [data-theme="dark"] .article-nav a { color: #93c5fd; }
        [data-theme="dark"] .article-content { background: #0f172a; }
        [data-theme="dark"] .article-body { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body h2 { color: #93c5fd; }
        [data-theme="dark"] .article-body h3 { color: #cbd5e1; }
        [data-theme="dark"] .article-body p { color: #cbd5e1; }
        [data-theme="dark"] .article-body blockquote { background: rgba(30,58,95,0.3); border-color: rgba(96,165,250,0.4); color: #cbd5e1; }
        [data-theme="dark"] .article-body .info-box,
        [data-theme="dark"] .article-body .key-insight { background: rgba(15,23,42,0.8); border-color: rgba(255,255,255,0.1); color: #cbd5e1; }
        [data-theme="dark"] .article-body table th { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body table td { color: #cbd5e1; border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .article-body ul li,
        [data-theme="dark"] .article-body ol li { color: #cbd5e1; }
        [data-theme="dark"] .article-body a { color: #60a5fa; }
        [data-theme="dark"] .article-body strong { color: #f1f5f9; }
        .article-nav a:hover { color: #60a5fa; }

        /* ===== Pro Mode — AI Governance (.aig-) ===== */
        .aig-cta-block {
            background: linear-gradient(135deg, rgba(99,102,241,0.12), rgba(99,102,241,0.04));
            border: 1.5px solid rgba(99,102,241,0.3); border-radius: 14px;
            padding: 1.5rem 2rem; margin: 1.5rem 0; text-align: center;
        }
        .aig-cta-headline { font-size: 1.05rem; font-weight: 700; color: #6366f1; margin: 0 0 0.5rem; }
        .aig-cta-sub { font-size: 0.85rem; color: #64748b; margin: 0 0 1rem; }
        .aig-cta-btn {
            display: inline-block; background: linear-gradient(135deg, #6366f1, #4f46e5); color: #fff;
            padding: 0.65rem 2rem; border-radius: 10px; font-weight: 700; font-size: 0.85rem;
            text-decoration: none; transition: opacity 0.3s, transform 0.2s; border: none; cursor: pointer;
        }
        .aig-cta-btn:hover { opacity: 0.9; transform: translateY(-1px); }

        /* Toolbar */
        .aig-toolbar-row {
            display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;
            gap: 0.75rem; margin-bottom: 1.5rem;
            padding: 1rem; background: linear-gradient(135deg, rgba(99,102,241,0.08) 0%, rgba(99,102,241,0.03) 100%);
            border-radius: 12px; border: 1px solid rgba(99,102,241,0.15);
        }
        .aig-mode-bar { display: flex; align-items: center; gap: 0.5rem; }
        .aig-mode-toggle {
            display: flex; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.15);
        }
        .aig-mode-btn {
            padding: 8px 18px; font-size: 0.8rem; font-weight: 600; cursor: pointer; border: none;
            background: transparent; color: #94a3b8; transition: all 0.3s; font-family: inherit;
        }
        .aig-mode-btn.active { background: #6366f1; color: #fff; }
        .aig-toolbar-actions { display: flex; gap: 0.5rem; align-items: center; }
        .aig-toolbar-actions button {
            padding: 8px 16px; border-radius: 8px; border: none; font-size: 0.78rem;
            font-weight: 600; cursor: pointer; font-family: inherit; display: flex; align-items: center; gap: 6px;
        }
        .aig-btn-reset { background: rgba(255,255,255,0.1); color: #94a3b8; }
        .aig-btn-reset:hover { background: rgba(255,255,255,0.15); }
        .aig-btn-pdf {
            background: linear-gradient(135deg, rgba(99,102,241,0.2), rgba(99,102,241,0.1));
            color: #a5b4fc; border: 1px solid rgba(99,102,241,0.3) !important;
        }
        .aig-btn-pdf:hover { background: linear-gradient(135deg, rgba(99,102,241,0.3), rgba(99,102,241,0.15)); }
        .aig-privacy-badge {
            display: flex; align-items: center; gap: 6px; font-size: 0.72rem; color: #64748b;
        }
        .aig-privacy-badge i { color: #10b981; font-size: 0.8rem; }

        /* Tooltips */
        .aig-tooltip-trigger {
            display: inline-flex; align-items: center; justify-content: center;
            width: 18px; height: 18px; border-radius: 50%; background: rgba(99,102,241,0.25);
            color: #a5b4fc; font-size: 0.65rem; font-weight: 700; cursor: help;
            position: relative; margin-left: 4px; flex-shrink: 0;
        }
        .aig-tooltip-content {
            display: none; position: absolute; bottom: calc(100% + 10px); left: 50%; transform: translateX(-50%);
            background: #1e293b; border: 1px solid rgba(99,102,241,0.3); border-radius: 10px;
            padding: 1rem; width: 260px; z-index: 100; box-shadow: 0 8px 30px rgba(0,0,0,0.4);
            pointer-events: none;
        }
        .aig-tooltip-content::after {
            content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
            border: 6px solid transparent; border-top-color: rgba(99,102,241,0.3);
        }
        .aig-tooltip-trigger:hover .aig-tooltip-content,
        .aig-tooltip-trigger:focus .aig-tooltip-content { display: block; }
        .aig-tooltip-title { font-size: 0.8rem; font-weight: 700; color: #818cf8; margin-bottom: 0.4rem; }
        .aig-tooltip-desc { font-size: 0.72rem; color: #94a3b8; line-height: 1.5; margin-bottom: 0.4rem; }
        .aig-tooltip-formula { font-size: 0.68rem; color: #a5b4fc; font-family: 'JetBrains Mono', monospace; background: rgba(99,102,241,0.1); padding: 4px 8px; border-radius: 4px; }

        /* Strategic Inputs */
        .aig-strategic-inputs {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem; margin-bottom: 1.5rem;
            padding: 1.25rem; background: rgba(99,102,241,0.05); border-radius: 14px;
            border: 1px solid rgba(99,102,241,0.1);
        }
        .aig-si-group { display: flex; flex-direction: column; gap: 0.4rem; }
        .aig-si-label {
            font-size: 0.78rem; color: #94a3b8; font-weight: 600;
            display: flex; align-items: center;
        }
        .aig-si-input {
            background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px; padding: 0.6rem 0.8rem; color: #e2e8f0; font-size: 0.85rem;
            font-family: inherit; width: 100%; box-sizing: border-box;
        }
        .aig-si-input:focus { outline: none; border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99,102,241,0.2); }
        .aig-si-input option { background: #1e293b; color: #e2e8f0; }

        /* Pro Panels */
        .aig-pro-panel {
            position: relative; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
            border-radius: 14px; padding: 1.5rem; margin-top: 1.5rem;
        }
        .aig-pro-panel.gated { filter: blur(3px); pointer-events: none; user-select: none; }
        .aig-pro-panel .panel-title {
            font-size: 0.95rem; font-weight: 700; color: #e2e8f0; margin-bottom: 0.75rem;
            display: flex; align-items: center; gap: 8px;
        }
        .aig-pro-panel .panel-title i { color: #818cf8; }
        .aig-gate-overlay {
            position: absolute; inset: 0; background: rgba(15,23,42,0.85); border-radius: 14px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 0.5rem; z-index: 5; cursor: pointer;
        }
        .aig-gate-overlay i { font-size: 1.5rem; color: #818cf8; }
        .aig-gate-overlay span { font-size: 0.8rem; color: #94a3b8; font-weight: 600; }

        /* KPI Grid */
        .aig-kpi-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.75rem;
        }
        .aig-kpi-card {
            background: rgba(255,255,255,0.05); border-radius: 10px; padding: 1rem; text-align: center;
            border: 1px solid rgba(255,255,255,0.06);
        }
        .aig-kpi-value { font-size: 1.4rem; font-weight: 800; color: #818cf8; }
        .aig-kpi-label { font-size: 0.72rem; color: #94a3b8; margin-top: 0.25rem; }
        .aig-kpi-sublabel { font-size: 0.6rem; color: #475569; margin-top: 0.15rem; }

        /* Health Gauge */
        .aig-gauge-container { display: flex; flex-direction: column; align-items: center; margin: 1rem 0; }
        .aig-gauge-container svg { max-width: 220px; }
        .aig-gauge-tier { font-size: 1.1rem; font-weight: 800; margin-top: 0.5rem; }
        .aig-gauge-label { font-size: 0.75rem; color: #94a3b8; }

        /* Chart Container */
        .aig-chart-container { margin-top: 1rem; background: rgba(0,0,0,0.2); border-radius: 10px; padding: 1rem; }
        .aig-chart-container canvas { width: 100% !important; max-height: 220px; }

        /* Narrative */
        .aig-narrative {
            background: rgba(99,102,241,0.08); border: 1px solid rgba(99,102,241,0.2);
            border-radius: 12px; padding: 1.25rem; margin-top: 1rem;
        }
        .aig-narrative h4 { color: #818cf8; font-size: 0.85rem; margin: 0 0 0.75rem; display: flex; align-items: center; gap: 6px; }
        .aig-narrative p { color: #94a3b8; font-size: 0.78rem; line-height: 1.7; margin: 0 0 0.75rem; }
        .aig-narrative p:last-child { margin-bottom: 0; }
        .aig-narrative p strong { color: #a5b4fc; }

        /* Score bars */
        .aig-score-bar-bg { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-top: 0.4rem; overflow: hidden; }
        .aig-score-bar-fill { height: 100%; border-radius: 3px; transition: width 0.5s ease; }
        .aig-score-bar-fill.risk-high { background: linear-gradient(90deg, #dc2626, #ef4444); }
        .aig-score-bar-fill.risk-med { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .aig-score-bar-fill.risk-low { background: linear-gradient(90deg, #10b981, #34d399); }

        /* Benchmark Meta */
        .aig-benchmark-meta { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.08); }
        .aig-benchmark-tag { font-size: 0.65rem; color: #64748b; background: rgba(255,255,255,0.04); padding: 3px 8px; border-radius: 4px; display: flex; align-items: center; gap: 4px; }
        .aig-benchmark-tag i { font-size: 0.6rem; }

        /* Login Modal */
        .aig-login-overlay {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); backdrop-filter: blur(8px);
            z-index: 9999; align-items: center; justify-content: center;
        }
        .aig-login-overlay.active { display: flex; }
        .aig-login-box {
            background: #0f172a; border-radius: 16px; padding: 2.5rem; max-width: 380px; width: 90%;
            border: 1px solid rgba(99,102,241,0.3); box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }
        .aig-login-box h3 { color: #e2e8f0; margin: 0 0 0.5rem; font-size: 1.1rem; }
        .aig-login-box p { color: #64748b; font-size: 0.8rem; margin: 0 0 1.5rem; }
        .aig-login-box input {
            width: 100%; padding: 0.75rem 1rem; background: #1e293b; border: 1px solid #334155;
            border-radius: 8px; color: #e2e8f0; font-size: 0.9rem; margin-bottom: 0.75rem; box-sizing: border-box;
        }
        .aig-login-box input:focus { outline: none; border-color: #6366f1; }
        .aig-login-box button.login-submit {
            width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #6366f1, #4f46e5); color: #fff;
            border: none; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 0.9rem; margin-top: 0.5rem;
        }
        .aig-login-box .demo-hint { font-size: 0.7rem; color: #64748b; margin-top: 0.75rem; text-align: center; }
        .aig-login-box .demo-hint code { background: rgba(99,102,241,0.15); padding: 1px 5px; border-radius: 3px; color: #a5b4fc; }
        .aig-login-close {
            position: absolute; top: 12px; right: 16px; background: none; border: none;
            color: #64748b; font-size: 1.2rem; cursor: pointer;
        }
        .aig-login-error { color: #f87171; font-size: 0.75rem; margin-top: 0.5rem; text-align: center; display: none; }
        [data-theme="light"] .aig-login-box { background: #ffffff; border-color: #e2e8f0; }
        [data-theme="light"] .aig-login-box h3 { color: #1e293b; }
        [data-theme="light"] .aig-login-box p { color: #64748b; }
        [data-theme="light"] .aig-login-box input { background: #f1f5f9; border-color: #e2e8f0; color: #1e293b; }

        /* Dark mode overrides for Pro */
        [data-theme="dark"] .aig-pro-panel { background: linear-gradient(135deg, #0c0e1f 0%, #151933 100%); }
        [data-theme="dark"] .aig-kpi-value { color: #a5b4fc; }
        [data-theme="dark"] .aig-cta-block { background: linear-gradient(135deg, rgba(99,102,241,0.15), rgba(99,102,241,0.06)); }
        [data-theme="dark"] .aig-login-box { background: #0f172a; }

        /* Responsive */
        @media (max-width: 768px) {
            .article-hero { padding: 6rem 1rem 3rem; }
            .article-content { padding: 2rem 1rem; }
            .toc-grid { grid-template-columns: 1fr; }
            .comparison-grid { grid-template-columns: 1fr; }
            .calc-grid { grid-template-columns: 1fr; }
            .flow-diagram { flex-direction: column; }
            .flow-arrow { transform: rotate(90deg); }
            .aig-toolbar-row { flex-direction: column; align-items: stretch; }
            .aig-toolbar-actions { justify-content: center; }
            .aig-cta-block { padding: 1.25rem 1rem; }
            .aig-strategic-inputs { grid-template-columns: 1fr; }
            .aig-kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .aig-tooltip-content { width: 220px; left: auto; right: -10px; transform: none; }
            .aig-tooltip-content::after { left: auto; right: 20px; transform: none; }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana" class="nav-avatar">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-dropdown">
                    <a href="datacenter-solutions.html" class="nav-link">
                        DC Solutions
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="datacenter-solutions.html" style="color: #06b6d4; font-weight: 600;">DC Solutions Hub</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="datahallAI.html" style="color: #8b5cf6;">DC AI/HPC</a></li>
                        <li><a href="dc-conventional.html">DC Conventional</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="capex-calculator.html" style="color: #f59e0b;">CAPEX Calculator</a></li>
                        <li><a href="opex-calculator.html" style="color: #10b981;">OPEX Calculator</a></li>
                    </ul>
                </li>
                <li class="nav-dropdown">
                    <a href="articles.html" class="nav-link">
                        Insights
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="articles.html" style="color: #06b6d4; font-weight: 600;">Engineering Journal</a></li>
                        <li><a href="geopolitics.html" style="color: #ef4444;">Global Analysis</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="insights.html" style="color: #64748b; font-size: 0.85rem;">All Insights</a></li>
                    </ul>
                </li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero Section -->
    <section class="article-hero">
        <div class="container">
            <a href="articles.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Back to Engineering Journal
            </a>

            <span class="article-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                </svg>
                Technical Deep Dive
            </span>

            <h1 class="article-title">Data Center Power Distribution Design:<br>Hyperscaler Architecture Deep Dive</h1>

            <p class="article-subtitle">
                Comprehensive analysis of modern power distribution systems based on AWS, Google, Microsoft, and xAI architectures. Covers 48V/380V/800V DC distribution, failure scenarios, arc flash calculations, protection coordination, and reliability engineering with interactive calculators.
            </p>

            <div class="article-meta">
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    February 8, 2026
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    45 min read
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    ~15,000 words
                </span>
            </div>
        </div>
    </section>

    <!-- Table of Contents -->
    <section class="toc-section">
        <div class="toc-container">
            <h2 class="toc-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
                Table of Contents
            </h2>
            <div class="toc-grid">
                <a href="#section-1" class="toc-item">
                    <div class="toc-item-number">SECTION 1</div>
                    <div class="toc-item-title">Executive Summary & Key Findings</div>
                </a>
                <a href="#section-2" class="toc-item">
                    <div class="toc-item-number">SECTION 2</div>
                    <div class="toc-item-title">Hyperscaler Power Architectures</div>
                </a>
                <a href="#section-3" class="toc-item">
                    <div class="toc-item-number">SECTION 3</div>
                    <div class="toc-item-title">Voltage Evolution: 12V → 48V → 800V DC</div>
                </a>
                <a href="#section-4" class="toc-item">
                    <div class="toc-item-number">SECTION 4</div>
                    <div class="toc-item-title">UPS & Battery Technologies</div>
                </a>
                <a href="#section-5" class="toc-item">
                    <div class="toc-item-number">SECTION 5</div>
                    <div class="toc-item-title">Generator & Backup Systems</div>
                </a>
                <a href="#section-6" class="toc-item">
                    <div class="toc-item-number">SECTION 6</div>
                    <div class="toc-item-title">Failure Scenario Analysis</div>
                </a>
                <a href="#section-7" class="toc-item">
                    <div class="toc-item-number">SECTION 7</div>
                    <div class="toc-item-title">Protection & Coordination</div>
                </a>
                <a href="#section-8" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 8 <span class="toc-calc-badge"><i class="fas fa-calculator" style="font-size:0.5rem;"></i> Interactive</span></div>
                    <div class="toc-item-title">Reliability Calculations</div>
                </a>
                <a href="#section-9" class="toc-item">
                    <div class="toc-item-number">SECTION 9</div>
                    <div class="toc-item-title">AI/HPC Power Requirements</div>
                </a>
                <a href="#section-10" class="toc-item">
                    <div class="toc-item-number">SECTION 10</div>
                    <div class="toc-item-title">Design Recommendations</div>
                </a>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="article-content">
        <div class="container">
            <div class="article-body">

                <!-- Section 1: Executive Summary -->
                <h2 id="section-1">
                    <span class="section-number">1</span>
                    Executive Summary & Key Findings
                </h2>

                <p>
                    The data center industry is undergoing a fundamental transformation in power distribution architecture, driven by the unprecedented power demands of AI workloads. Traditional 12V server power supplies and centralized UPS systems are being replaced by distributed architectures operating at 48V, 380V, and even 800V DC. This paper provides an in-depth analysis of power distribution systems deployed by leading hyperscalers—AWS, Google, Microsoft, xAI, and Anthropic—along with comprehensive failure scenario analysis and design recommendations.
                </p>

                <div class="info-box success">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Key Research Findings
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem; line-height: 1.8;">
                        <li><strong>AWS distributed UPS</strong> reduces conversion losses by 35% and limits failure impact to single racks</li>
                        <li><strong>Google's 48V DC</strong> architecture achieves 16x reduction in distribution losses vs 12V</li>
                        <li><strong>Microsoft's Mt Diablo</strong> 400V DC enables 15-35% more AI accelerators per rack</li>
                        <li><strong>xAI Colossus</strong> operates at 2 GW—40% of Memphis's average daily energy usage</li>
                        <li><strong>Anthropic's Multi-Cloud</strong> aggregates >2 GW across AWS Trainium2, Google TPU, and Azure</li>
                        <li><strong>800V DC</strong> (NVIDIA architecture) reduces copper requirements by 16.7x vs 48V</li>
                        <li><strong>Power remains #1 cause</strong> of data center outages (54% in 2024)</li>
                    </ul>
                </div>

                <!-- Infographic -->
                <div style="margin: 2rem 0; text-align: center;">
                    <img src="assets/article-13-infographic.jpg" alt="Data Center Power Distribution Design - Hyperscaler Architecture Infographic" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.15);">
                    <p style="font-size: 0.8rem; color: #64748b; margin-top: 0.75rem; font-style: italic;">Hyperscaler Power Architecture Overview: AWS, Google, Microsoft, xAI, and Anthropic</p>
                </div>

                <!-- CTA Block -->
                <div class="aig-cta-block">
                    <p class="aig-cta-headline"><i class="fas fa-microchip" style="margin-right:6px"></i> Strategic Intelligence Engine</p>
                    <p class="aig-cta-sub">Unlock Operational Health Score, risk exposure analysis, Monte Carlo simulation, and consultant-grade PDF export.</p>
                    <a href="#calculator-section" class="aig-cta-btn">Open Power Distribution Calculator</a>
                </div>

                <!-- Hyperscaler Comparison Table -->
                <h3>Hyperscaler Power Architecture Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Architecture</th>
                                <th>UPS Approach</th>
                                <th>Voltage Level</th>
                                <th>Fleet PUE</th>
                                <th>Max Rack Power</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="company-badge aws">AWS</span></td>
                                <td>Distributed Micro-UPS</td>
                                <td>In-rack BBU</td>
                                <td>48V DC</td>
                                <td>1.15</td>
                                <td>130+ kW</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge google">Google</span></td>
                                <td>Server-level Battery</td>
                                <td>Per-server 48V BBU</td>
                                <td>48V → 400V DC</td>
                                <td>1.09</td>
                                <td>1 MW (vision)</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge microsoft">Microsoft</span></td>
                                <td>Mt Diablo Disaggregated</td>
                                <td>Sidecar Power Rack</td>
                                <td>±400V / 800V DC</td>
                                <td>1.12</td>
                                <td>140 kW</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge xai">xAI</span></td>
                                <td>Tesla Megapack + Grid</td>
                                <td>Centralized + Battery</td>
                                <td>480V AC</td>
                                <td>N/A</td>
                                <td>~100 kW</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge anthropic" style="background: linear-gradient(135deg, #d97706, #b45309);">Anthropic</span></td>
                                <td>Multi-Cloud Distributed</td>
                                <td>Provider-managed (AWS/GCP/Azure)</td>
                                <td>48V-800V (varies)</td>
                                <td>1.10-1.15</td>
                                <td>>2 GW total</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge nvidia">NVIDIA</span></td>
                                <td>800V HVDC Sidecar</td>
                                <td>Rack-adjacent</td>
                                <td>800V DC</td>
                                <td>N/A</td>
                                <td>1 MW+</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 2: Hyperscaler Architectures -->
                <h2 id="section-2">
                    <span class="section-number">2</span>
                    Hyperscaler Power Architectures
                </h2>

                <h3>2.1 AWS: Revolutionary Distributed UPS</h3>

                <p>
                    AWS has pioneered a <strong>distributed micro-UPS architecture</strong> that represents a significant departure from traditional centralized UPS designs. Rather than using large third-party UPS systems, AWS deploys small battery packs and custom power supplies integrated into every rack.
                </p>

                <div class="architecture-diagram">
                    <div class="architecture-title">AWS Distributed Power Architecture</div>
                    <div class="flow-diagram">
                        <span class="flow-box">Utility Grid (HV)</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">MV Switchgear</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">MV/LV Transformer</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">Power Shelf (AC→DC)</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">48V Busbar</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">In-Rack BBU</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">IT Load</span>
                    </div>
                </div>

                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(255, 153, 0, 0.1);">⚡</div>
                            <div>
                                <div class="comparison-card-title">35% Efficiency Gain</div>
                                <div class="comparison-card-subtitle">Energy Conversion Loss Reduction</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Distributed UPS eliminates multiple AC/DC/AC conversion stages, reducing power losses from grid to server.
                        </p>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(16, 185, 129, 0.1);">🎯</div>
                            <div>
                                <div class="comparison-card-title">89% Fewer Affected Racks</div>
                                <div class="comparison-card-subtitle">During Electrical Issues</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Single failure now impacts only one rack, not entire data hall—dramatically reducing blast radius.
                        </p>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(6, 182, 212, 0.1);">📊</div>
                            <div>
                                <div class="comparison-card-title">99.9999% Availability</div>
                                <div class="comparison-card-subtitle">Infrastructure Uptime</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Six nines availability achieved through simplified systems and reduced single points of failure.
                        </p>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(139, 92, 246, 0.1);">🔋</div>
                            <div>
                                <div class="comparison-card-title">6x Density Increase</div>
                                <div class="comparison-card-subtitle">Rack Power Capacity</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            New power shelf design enables 130+ kW per rack for GB200 workloads, with 3x more planned.
                        </p>
                    </div>
                </div>

                <h3>2.2 Google: Server-Level Battery Innovation</h3>

                <p>
                    Google's groundbreaking approach integrates UPS functionality directly into each server, eliminating the need for centralized UPS systems entirely. This architecture began with 12V battery backup in 2008 and evolved to 48V DC distribution by 2016.
                </p>

                <div class="info-box">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0891b2" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        Google's 48V DC Efficiency Formula
                    </div>
                    <p style="margin: 0;">
                        Distribution losses are a function of current squared. Since 48V carries 1/4 the current of 12V for the same power, losses are reduced by (48/12)² = <strong>16x lower</strong>.
                    </p>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Power Loss Comparison: 12V vs 48V DC</div>
                    <pre style="margin: 0; white-space: pre-wrap;">
P_loss = I²R = (P_load / V)² × R

For same power delivery:
P_loss(12V) = (P / 12)² × R = P²R / 144
P_loss(48V) = (P / 48)² × R = P²R / 2304

Ratio: P_loss(12V) / P_loss(48V) = 2304 / 144 = 16

<span style="color: #10b981;">Result: 48V reduces distribution losses by 93.75%</span></pre>
                </div>

                <h4>Google's Power Architecture Evolution</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Innovation</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2008</td>
                                <td>12V server-level UPS patent</td>
                                <td>Single AC-DC conversion</td>
                            </tr>
                            <tr>
                                <td>2010</td>
                                <td>48V DC development begins</td>
                                <td>30% efficiency improvement</td>
                            </tr>
                            <tr>
                                <td>2015</td>
                                <td>Li-ion BBU transition</td>
                                <td>2x density, 2x lifespan vs lead-acid</td>
                            </tr>
                            <tr>
                                <td>2018</td>
                                <td>Liquid cooling for TPU v3</td>
                                <td>4x supercomputer size</td>
                            </tr>
                            <tr>
                                <td>2024</td>
                                <td>100M Li-ion cells deployed</td>
                                <td>Fleet-wide 1.09 PUE</td>
                            </tr>
                            <tr>
                                <td>2025</td>
                                <td>Mt Diablo 400V DC (with Meta, Microsoft)</td>
                                <td>800kW-1MW per rack vision</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>2.3 Microsoft: Mt Diablo Disaggregated Power</h3>

                <p>
                    Microsoft, in collaboration with Meta and Google, developed the <strong>Mt Diablo disaggregated power specification</strong>—representing a fundamental shift in data center power delivery. This architecture separates power conversion from compute racks, using a "sidecar" power rack full of rectifiers.
                </p>

                <div class="architecture-diagram">
                    <div class="architecture-title">Microsoft Mt Diablo Architecture</div>
                    <div class="flow-diagram">
                        <span class="flow-box">480V AC Backbone</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">Sidecar Power Rack</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">±400V DC Bus</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">Compute Rack</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box">GPU/CPU Load</span>
                    </div>
                </div>

                <div class="info-box success">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        Mt Diablo Key Benefits
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem;">
                        <li><strong>15-35% more AI accelerators</strong> per rack by eliminating conversion inefficiencies</li>
                        <li><strong>Scales from 100 kW to 1 MW</strong> per IT rack</li>
                        <li><strong>Leverages EV supply chain</strong> for ±400V DC components</li>
                        <li><strong>Open-sourced through OCP</strong> (Diablo 400 v0.5.2 specification)</li>
                    </ul>
                </div>

                <h3>2.4 xAI Colossus: World's First Gigawatt AI Data Center</h3>

                <p>
                    xAI's Colossus supercomputer in Memphis represents the most aggressive power deployment in AI history. Operating at <strong>2 GW total capacity</strong>—equivalent to 40% of Memphis's average daily energy usage—it demonstrates the extreme power requirements of frontier AI training.
                </p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Phase</th>
                                <th>Power Capacity</th>
                                <th>GPU Count</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Colossus 1</td>
                                <td>150 MW (grid) + 35 MW (generators)</td>
                                <td>100,000 H100</td>
                                <td style="color: #10b981;">Operational (July 2024)</td>
                            </tr>
                            <tr>
                                <td>Phase 2</td>
                                <td>300 MW total</td>
                                <td>200,000 H100/H200</td>
                                <td style="color: #10b981;">Operational (2025)</td>
                            </tr>
                            <tr>
                                <td>Colossus 2</td>
                                <td><strong>2 GW total</strong></td>
                                <td>555,000 GPUs</td>
                                <td style="color: #f59e0b;">Announced (Jan 2026)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        xAI Colossus Power Infrastructure
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem;">
                        <li><strong>168 Tesla Megapacks</strong> installed (~150 MW battery backup)</li>
                        <li><strong>1.3 million gallons/day</strong> cooling water from Memphis Aquifer</li>
                        <li><strong>$24 million</strong> invested in new MLGW substation</li>
                        <li><strong>35 mobile generators</strong> (2.5 MW each) used during initial deployment</li>
                    </ul>
                </div>

                <h3>2.5 Anthropic: The Multi-Cloud AI Factory</h3>

                <p>
                    Anthropic has pioneered a unique <strong>multi-cloud, multi-accelerator</strong> infrastructure strategy that represents a fundamentally different approach to AI compute power distribution. Unlike xAI's concentrated deployment or OpenAI's Microsoft-exclusive arrangement, Anthropic distributes workloads across <strong>four major infrastructure partners</strong>, three distinct chip architectures, and <strong>multiple geographic regions</strong>—aggregating multi-gigawatt scale capacity while maximizing resilience against single-provider failures.
                </p>

                <h4>2.5.1 Infrastructure Partnership Architecture</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Infrastructure Partner</th>
                                <th>Compute Platform</th>
                                <th>Chip Count</th>
                                <th>Power Capacity</th>
                                <th>Geographic Distribution</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>AWS Project Rainier</strong></td>
                                <td>Trainium2 (500W TDP)</td>
                                <td>500K → 1M chips</td>
                                <td>250-500 MW compute</td>
                                <td>Indiana, Pennsylvania, Mississippi</td>
                            </tr>
                            <tr>
                                <td><strong>Google Cloud</strong></td>
                                <td>TPU v5p/v6e/Ironwood (7th gen)</td>
                                <td>Up to 1M TPUs</td>
                                <td>>1 GW (2026)</td>
                                <td>Oklahoma, Oregon, Nevada, Global</td>
                            </tr>
                            <tr>
                                <td><strong>Microsoft Azure</strong></td>
                                <td>NVIDIA Grace Blackwell (GB200)</td>
                                <td>$30B commitment</td>
                                <td>Est. 300-500 MW</td>
                                <td>Virginia, Arizona, Netherlands</td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack Partnership</strong></td>
                                <td>Custom GPU clusters (H100/B200)</td>
                                <td>$50B investment</td>
                                <td>Est. 500 MW+</td>
                                <td>Texas (training), New York (inference)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4>2.5.2 Power Architecture Deep Dive</h4>

                <div class="comparison-grid">
                    <div class="comparison-card" style="border-left: 4px solid #ff9900;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(255, 153, 0, 0.1);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff9900" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                            </div>
                            <div>
                                <div class="comparison-card-title">AWS Trainium2 Architecture</div>
                                <div class="comparison-card-subtitle">Project Rainier Power Distribution</div>
                            </div>
                        </div>
                        <ul style="font-size: 0.85rem; margin: 0.75rem 0 0; padding-left: 1rem; color: #64748b;">
                            <li><strong>Chip TDP:</strong> 500W per Trainium2</li>
                            <li><strong>Rack Density:</strong> 27 kW per rack (54 chips/rack)</li>
                            <li><strong>Server Config:</strong> Trn2 instance = 16 chips = 8 kW</li>
                            <li><strong>UltraServer:</strong> 64 chips = 32 kW per node</li>
                            <li><strong>Cooling:</strong> AWS distributed BBU + liquid cooling</li>
                            <li><strong>PUE Target:</strong> 1.15-1.20</li>
                        </ul>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #4285f4;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(66, 133, 244, 0.1);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                            </div>
                            <div>
                                <div class="comparison-card-title">Google TPU Architecture</div>
                                <div class="comparison-card-subtitle">TPU v5p/v6e Power Distribution</div>
                            </div>
                        </div>
                        <ul style="font-size: 0.85rem; margin: 0.75rem 0 0; padding-left: 1rem; color: #64748b;">
                            <li><strong>TPU v5p TDP:</strong> ~450W per chip</li>
                            <li><strong>TPU v6e (Trillium):</strong> ~300W per chip</li>
                            <li><strong>Pod Config:</strong> 8,960 chips per pod (v5p)</li>
                            <li><strong>Pod Power:</strong> ~4 MW per TPU pod</li>
                            <li><strong>Cooling:</strong> Server-level 48V BBU</li>
                            <li><strong>PUE Achieved:</strong> 1.09-1.10</li>
                        </ul>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #00a4ef;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(0, 164, 239, 0.1);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00a4ef" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
                            </div>
                            <div>
                                <div class="comparison-card-title">Azure GB200 Architecture</div>
                                <div class="comparison-card-subtitle">Mt Diablo + NVIDIA Integration</div>
                            </div>
                        </div>
                        <ul style="font-size: 0.85rem; margin: 0.75rem 0 0; padding-left: 1rem; color: #64748b;">
                            <li><strong>GB200 TDP:</strong> 2,700W per superchip</li>
                            <li><strong>Rack Config:</strong> NVL72 = 72 GPUs = 120 kW</li>
                            <li><strong>Distribution:</strong> ±400V DC (Mt Diablo)</li>
                            <li><strong>800V Option:</strong> NVIDIA HVDC sidecar</li>
                            <li><strong>Cooling:</strong> Direct liquid cooling mandatory</li>
                            <li><strong>PUE Target:</strong> 1.10-1.12</li>
                        </ul>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #8b5cf6;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(139, 92, 246, 0.1);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                            </div>
                            <div>
                                <div class="comparison-card-title">Fluidstack Custom Build</div>
                                <div class="comparison-card-subtitle">Neocloud Power Architecture</div>
                            </div>
                        </div>
                        <ul style="font-size: 0.85rem; margin: 0.75rem 0 0; padding-left: 1rem; color: #64748b;">
                            <li><strong>Texas Facility:</strong> Training-optimized, low cost</li>
                            <li><strong>NY Facility:</strong> Inference, low latency</li>
                            <li><strong>Power Cost:</strong> $0.04-0.06/kWh (Texas)</li>
                            <li><strong>GPU Mix:</strong> H100/B200 clusters</li>
                            <li><strong>Cooling:</strong> Hybrid air + liquid</li>
                            <li><strong>PUE Target:</strong> 1.20-1.25</li>
                        </ul>
                    </div>
                </div>

                <h4>2.5.3 Total Power Demand Analysis</h4>

                <div class="formula-box">
                    <div class="formula-box-title">Anthropic Multi-Cloud Power Budget (2026 Projection)</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #ff9900; font-weight: 600;">═══ AWS PROJECT RAINIER ═══</span>
Trainium2 Chips:        1,000,000 units
TDP per Chip:           500W
Compute Power:          1,000,000 × 500W = <strong>500 MW</strong>
Cooling (PUE 1.18):     500 MW × 0.18 = 90 MW
Networking/Storage:     ~10 MW
<strong>Total AWS Capacity:     ~600 MW</strong>

<span style="color: #4285f4; font-weight: 600;">═══ GOOGLE CLOUD TPU ═══</span>
TPU v5p Chips:          ~600,000 units (estimated)
TPU v6e Chips:          ~400,000 units (estimated)
v5p Power:              600,000 × 450W = 270 MW
v6e Power:              400,000 × 300W = 120 MW
Total Compute:          390 MW
Cooling (PUE 1.10):     390 MW × 0.10 = 39 MW
Infrastructure:         ~71 MW (networking, storage, auxiliary)
<strong>Total Google Capacity:  ~500 MW (scaling to >1 GW)</strong>

<span style="color: #00a4ef; font-weight: 600;">═══ MICROSOFT AZURE ═══</span>
NVIDIA GB200 Superchips: ~100,000 units (estimated from $30B)
TDP per Superchip:       2,700W
Compute Power:           100,000 × 2,700W = <strong>270 MW</strong>
DLC + Cooling (PUE 1.12): 270 MW × 0.12 = 32 MW
<strong>Total Azure Capacity:   ~300 MW</strong>

<span style="color: #8b5cf6; font-weight: 600;">═══ FLUIDSTACK PARTNERSHIP ═══</span>
Texas Training Cluster:  ~200 MW (GPU compute)
NY Inference Cluster:    ~50 MW
Cooling & Infrastructure: ~50 MW
<strong>Total Fluidstack:       ~300 MW</strong>

<span style="color: #10b981; font-weight: 700;">═══ COMBINED ANTHROPIC INFRASTRUCTURE ═══</span>
AWS Project Rainier:     600 MW
Google Cloud TPU:        500 MW → 1,100 MW (2026)
Microsoft Azure:         300 MW
Fluidstack:              300 MW
────────────────────────────────────
<strong style="font-size: 1rem;">TOTAL 2026 CAPACITY:    1,700 MW → 2,300 MW</strong>
<strong style="font-size: 1rem;">PEAK PROJECTION:        2.5 - 3.0 GW</strong>

Equivalent to powering: ~2.3 million US households
Annual Energy:          ~15-20 TWh/year</pre>
                </div>

                <h4>2.5.4 Failure Scenario Analysis: Multi-Cloud Resilience</h4>

                <p>
                    Anthropic's distributed architecture provides <strong>unprecedented resilience</strong> against infrastructure failures. Unlike single-provider deployments (OpenAI → Microsoft, xAI → Memphis), Anthropic can survive complete provider outages while maintaining service continuity.
                </p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Failure Scenario</th>
                                <th>Impact Scope</th>
                                <th>Capacity Loss</th>
                                <th>Recovery Strategy</th>
                                <th>RTO</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>AWS Region Outage</strong> (Single AZ)</td>
                                <td>~10% of Rainier capacity</td>
                                <td>~60 MW</td>
                                <td>Auto-failover to other AZs + Google/Azure</td>
                                <td style="color: #10b981;"><strong>&lt;5 min</strong></td>
                            </tr>
                            <tr>
                                <td><strong>AWS Complete Outage</strong></td>
                                <td>All Trainium2 workloads</td>
                                <td>~600 MW (26%)</td>
                                <td>Shift training to Google TPU; inference to Azure</td>
                                <td style="color: #f59e0b;"><strong>15-30 min</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Google Cloud Outage</strong></td>
                                <td>All TPU workloads</td>
                                <td>~500-1,100 MW (35%)</td>
                                <td>Route to AWS Trainium2; Azure for GPU tasks</td>
                                <td style="color: #f59e0b;"><strong>15-30 min</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Microsoft Azure Outage</strong></td>
                                <td>GB200 GPU workloads</td>
                                <td>~300 MW (13%)</td>
                                <td>Failover to Fluidstack GPU clusters</td>
                                <td style="color: #10b981;"><strong>&lt;10 min</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack Outage</strong></td>
                                <td>Custom GPU inference</td>
                                <td>~300 MW (13%)</td>
                                <td>Shift to Azure or Google inference pods</td>
                                <td style="color: #10b981;"><strong>&lt;10 min</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Simultaneous Dual Outage</strong></td>
                                <td>Any two providers</td>
                                <td>~40-50% capacity</td>
                                <td>Degraded mode; prioritize inference</td>
                                <td style="color: #ef4444;"><strong>30-60 min</strong></td>
                            </tr>
                            <tr style="background: rgba(239, 68, 68, 0.1);">
                                <td><strong>Triple Provider Outage</strong></td>
                                <td>Catastrophic (AWS+Google+Azure)</td>
                                <td>~85% capacity</td>
                                <td>Fluidstack-only operation; emergency mode</td>
                                <td style="color: #ef4444;"><strong>>1 hour</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Critical Dependency: Chip Architecture Lock-in
                    </div>
                    <p style="margin-bottom: 0.75rem; color: #92400e; font-size: 0.875rem;">
                        Despite multi-cloud distribution, <strong>workload portability remains limited</strong>:
                    </p>
                    <ul style="margin: 0; padding-left: 1.25rem; color: #92400e; font-size: 0.875rem;">
                        <li><strong>Trainium2 → TPU:</strong> Requires model recompilation (hours to days)</li>
                        <li><strong>TPU → NVIDIA:</strong> Different software stack (JAX vs PyTorch)</li>
                        <li><strong>Training Checkpoints:</strong> Not directly portable between architectures</li>
                        <li><strong>Inference:</strong> More portable; can shift within minutes with ONNX</li>
                    </ul>
                </div>

                <h4>2.5.5 Reliability Calculation: Multi-Provider Availability</h4>

                <div class="formula-box">
                    <div class="formula-box-title">System Availability Analysis</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">Individual Provider Availability (Historical):</span>
  AWS (EC2):           99.99% = 52.6 min downtime/year
  Google Cloud:        99.95% = 4.38 hours downtime/year
  Microsoft Azure:     99.95% = 4.38 hours downtime/year
  Fluidstack (est):    99.9%  = 8.76 hours downtime/year

<span style="color: #10b981; font-weight: 600;">Multi-Cloud Availability (Parallel Redundancy):</span>
  For service requiring ANY ONE provider operational:

  P(all down) = P(AWS down) × P(GCP down) × P(Azure down) × P(Fluid down)
  P(all down) = 0.0001 × 0.0005 × 0.0005 × 0.001
  P(all down) = 2.5 × 10⁻¹⁴

  <strong>Combined Availability = 1 - P(all down)</strong>
  <strong style="color: #10b981;">Combined Availability = 99.9999999999975%</strong>
  <strong style="color: #10b981;">Theoretical Downtime = 0.0008 seconds/year</strong>

<span style="color: #f59e0b; font-weight: 600;">Practical Limitations:</span>
  - Workload migration latency: 15-30 minutes
  - Training job restart overhead: 30-60 minutes
  - Checkpoint sync delays: 5-15 minutes

<span style="color: #ef4444; font-weight: 600;">Realistic Effective Availability:</span>
  Accounting for migration overhead:
  <strong>Effective Availability ≈ 99.99% (52 min downtime/year)</strong>

  Still superior to single-provider:
  - OpenAI (Azure-only): 99.95%
  - xAI (Memphis-only): 99.9% (estimated)</pre>
                </div>

                <h4>2.5.6 Power Cost Optimization Strategy</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>Region</th>
                                <th>Est. Power Cost</th>
                                <th>Workload Type</th>
                                <th>Cost Efficiency</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Fluidstack Texas</strong></td>
                                <td>ERCOT Grid</td>
                                <td style="color: #10b981;"><strong>$0.04-0.06/kWh</strong></td>
                                <td>Large training runs</td>
                                <td>Lowest cost for batch</td>
                            </tr>
                            <tr>
                                <td><strong>AWS Indiana</strong></td>
                                <td>MISO Grid</td>
                                <td>$0.06-0.08/kWh</td>
                                <td>Trainium2 training</td>
                                <td>Best perf/$ for Trainium</td>
                            </tr>
                            <tr>
                                <td><strong>Google Oklahoma</strong></td>
                                <td>SPP Grid</td>
                                <td>$0.05-0.07/kWh</td>
                                <td>TPU training/inference</td>
                                <td>Carbon-free energy</td>
                            </tr>
                            <tr>
                                <td><strong>Azure Virginia</strong></td>
                                <td>PJM Grid</td>
                                <td>$0.08-0.10/kWh</td>
                                <td>GPU inference</td>
                                <td>Lowest latency to East Coast</td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack NY</strong></td>
                                <td>NYISO Grid</td>
                                <td style="color: #ef4444;">$0.12-0.15/kWh</td>
                                <td>Low-latency inference</td>
                                <td>Premium for latency</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Annual Power Cost Estimation</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">Blended Power Cost Calculation:</span>

Training Workloads (70% of compute):
  Texas/Oklahoma/Indiana: 1,400 MW × $0.055/kWh × 8,760 hr/yr
  = <strong>$674 million/year</strong>

Inference Workloads (30% of compute):
  Higher-cost regions: 600 MW × $0.10/kWh × 8,760 hr/yr
  = <strong>$526 million/year</strong>

<span style="color: #10b981; font-weight: 600;">Total Annual Power Cost (2 GW scenario):</span>
  Training + Inference = $674M + $526M
  <strong style="font-size: 1rem;">≈ $1.2 billion/year in electricity</strong>

  Blended rate: ~$0.068/kWh
  (vs. $0.12/kWh if all in NY = $2.1B/year → 43% savings)</pre>
                </div>

                <div class="info-box success">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Anthropic Multi-Cloud Advantages Summary
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.875rem;">
                        <li><strong>No Single Point of Failure:</strong> Any provider can fail without total service loss</li>
                        <li><strong>Supply Chain Diversity:</strong> NVIDIA shortage? Use Trainium2/TPU. AMD available? Flex to Azure.</li>
                        <li><strong>Cost Arbitrage:</strong> Shift workloads to cheapest available capacity</li>
                        <li><strong>Geographic Redundancy:</strong> 6+ states, 3+ countries, multiple grid operators</li>
                        <li><strong>Competitive Leverage:</strong> No vendor lock-in enables better pricing negotiation</li>
                        <li><strong>Technology Hedge:</strong> If one architecture underperforms, alternatives ready</li>
                    </ul>
                </div>

                <h4>2.5.7 Multi-Cloud Network Topology & Power Flow</h4>

                <div class="architecture-diagram">
                    <div class="architecture-title">Anthropic Multi-Cloud Power & Data Flow Architecture</div>
                    <div class="flow-diagram" style="flex-wrap: wrap; justify-content: center;">
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #ff9900, #cc7a00);">AWS Trainium2<br><small>600 MW | Indiana</small></span>
                            <span style="font-size: 0.7rem; color: #64748b;">MISO Grid | 48V DC</span>
                        </div>
                        <span class="flow-arrow">↔</span>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #d97706, #92400e);">Anthropic<br>Control Plane<br><small>Workload Orchestrator</small></span>
                        </div>
                        <span class="flow-arrow">↔</span>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #4285f4, #1a5bc7);">Google TPU<br><small>1.1 GW | Oklahoma</small></span>
                            <span style="font-size: 0.7rem; color: #64748b;">SPP Grid | 48V DC</span>
                        </div>
                    </div>
                    <div class="flow-diagram" style="margin-top: 1rem; flex-wrap: wrap; justify-content: center;">
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #00a4ef, #0078d4);">Azure GB200<br><small>300 MW | Virginia</small></span>
                            <span style="font-size: 0.7rem; color: #64748b;">PJM Grid | ±400V DC</span>
                        </div>
                        <span class="flow-arrow">↔</span>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #d97706, #92400e);">Global Load<br>Balancer<br><small>Latency-Aware Routing</small></span>
                        </div>
                        <span class="flow-arrow">↔</span>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <span class="flow-box" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9);">Fluidstack<br><small>300 MW | Texas</small></span>
                            <span style="font-size: 0.7rem; color: #64748b;">ERCOT Grid | 480V AC</span>
                        </div>
                    </div>
                </div>

                <h4>2.5.8 UPS & Backup Power Architecture Per Provider</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>UPS Architecture</th>
                                <th>Battery Type</th>
                                <th>Runtime</th>
                                <th>Generator Backup</th>
                                <th>Fuel Autonomy</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>AWS Rainier</strong></td>
                                <td>Distributed Micro-UPS (in-rack BBU)</td>
                                <td>LFP Li-ion (48V packs)</td>
                                <td>90 seconds</td>
                                <td>N+1 diesel generators (2.5 MW each)</td>
                                <td>72 hours on-site</td>
                            </tr>
                            <tr>
                                <td><strong>Google Cloud</strong></td>
                                <td>Server-level 48V BBU</td>
                                <td>Li-ion (custom cells)</td>
                                <td>60-90 seconds</td>
                                <td>2N diesel + battery arrays</td>
                                <td>48 hours + contracts</td>
                            </tr>
                            <tr>
                                <td><strong>Microsoft Azure</strong></td>
                                <td>Mt Diablo sidecar + centralized</td>
                                <td>LFP + NMC hybrid</td>
                                <td>5-10 minutes</td>
                                <td>N+1 diesel + fuel cells (pilot)</td>
                                <td>48 hours on-site</td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack TX</strong></td>
                                <td>Centralized rotary UPS</td>
                                <td>Lead-acid + Li-ion hybrid</td>
                                <td>15 minutes</td>
                                <td>N diesel generators</td>
                                <td>24 hours on-site</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Backup Power Capacity Calculation</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">UPS Battery Sizing (Per Provider):</span>

AWS Rainier (600 MW IT load):
  Runtime required: 90 seconds = 0.025 hours
  Battery capacity: 600 MW × 0.025 hr = 15 MWh
  With 80% DoD: 15 / 0.8 = <strong>18.75 MWh installed</strong>
  LFP cells (@250 Wh/kg): ~75,000 kg batteries

Google TPU Cluster (500 MW):
  Runtime required: 90 seconds
  Battery capacity: 500 MW × 0.025 hr = 12.5 MWh
  With 80% DoD: <strong>15.6 MWh installed</strong>

Azure GB200 (300 MW):
  Runtime required: 5 minutes = 0.083 hours
  Battery capacity: 300 MW × 0.083 hr = 25 MWh
  With 80% DoD: <strong>31.25 MWh installed</strong>

<span style="color: #10b981; font-weight: 600;">Total Anthropic Battery Infrastructure:</span>
  AWS + Google + Azure + Fluidstack
  <strong>≈ 80-100 MWh total battery capacity</strong>
  Equivalent to: ~1,600 Tesla Model S batteries</pre>
                </div>

                <h4>2.5.9 Cooling Architecture & Thermal Management</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>Primary Cooling</th>
                                <th>Secondary Cooling</th>
                                <th>Coolant</th>
                                <th>Delta-T</th>
                                <th>Max Ambient</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>AWS Trainium2</strong></td>
                                <td>Direct Liquid Cooling (DLC)</td>
                                <td>Rear-door heat exchangers</td>
                                <td>Propylene glycol 30%</td>
                                <td>12-15°C</td>
                                <td>35°C (ASHRAE A3)</td>
                            </tr>
                            <tr>
                                <td><strong>Google TPU v5p</strong></td>
                                <td>Cold plate DLC (mandatory)</td>
                                <td>Evaporative + dry coolers</td>
                                <td>Deionized water</td>
                                <td>10-12°C</td>
                                <td>40°C (custom spec)</td>
                            </tr>
                            <tr>
                                <td><strong>Azure GB200</strong></td>
                                <td>NVIDIA Superchip DLC (1.4L/min)</td>
                                <td>Chilled water loop</td>
                                <td>Dielectric fluid option</td>
                                <td>15-18°C</td>
                                <td>35°C (A2 baseline)</td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack</strong></td>
                                <td>Hybrid air + liquid</td>
                                <td>CRAH + in-row cooling</td>
                                <td>Glycol/water mix</td>
                                <td>8-12°C</td>
                                <td>32°C (A1)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Cooling Power Requirements</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">Heat Dissipation Calculation:</span>

Q = m × Cp × ΔT

Where:
  Q = Heat removed (kW)
  m = Coolant mass flow rate (kg/s)
  Cp = Specific heat capacity (kJ/kg·K)
  ΔT = Temperature difference (K)

<span style="color: #f59e0b; font-weight: 600;">NVIDIA GB200 NVL72 Rack (120 kW):</span>
  Required flow rate: Q / (Cp × ΔT)
  = 120 kW / (4.18 kJ/kg·K × 15K)
  = 1.91 kg/s = <strong>114 L/min per rack</strong>

  For 2,500 racks (Azure allocation):
  Total flow: 285,000 L/min = <strong>4,750 L/s</strong>

<span style="color: #10b981; font-weight: 600;">Cooling Power Overhead (by PUE):</span>
  AWS (PUE 1.18):   600 MW × 0.18 = 108 MW cooling
  Google (PUE 1.10): 500 MW × 0.10 = 50 MW cooling
  Azure (PUE 1.12):  300 MW × 0.12 = 36 MW cooling
  Fluidstack (1.25): 300 MW × 0.25 = 75 MW cooling
  ─────────────────────────────────────────────
  <strong>Total Cooling Power: ~269 MW</strong></pre>
                </div>

                <h4>2.5.10 Cascading Failure Analysis</h4>

                <p>
                    Multi-cloud architectures introduce <strong>complex failure propagation paths</strong> that differ fundamentally from single-site deployments. The following analysis examines cascading failure scenarios unique to Anthropic's distributed infrastructure.
                </p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Initial Failure</th>
                                <th>Cascade Path</th>
                                <th>Affected Systems</th>
                                <th>Propagation Time</th>
                                <th>Mitigation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Control Plane Outage</strong></td>
                                <td>Orchestrator → All providers lose routing</td>
                                <td>100% workloads orphaned</td>
                                <td style="color: #ef4444;"><strong>Immediate</strong></td>
                                <td>Multi-region control plane; local autonomy mode</td>
                            </tr>
                            <tr>
                                <td><strong>Checkpoint Storage Failure</strong></td>
                                <td>S3/GCS outage → Training state lost</td>
                                <td>All active training jobs</td>
                                <td>5-15 minutes</td>
                                <td>Cross-cloud checkpoint replication</td>
                            </tr>
                            <tr>
                                <td><strong>Inter-Cloud Network Partition</strong></td>
                                <td>AWS↔GCP link down → Split-brain state</td>
                                <td>Distributed training synchronization</td>
                                <td>1-5 minutes</td>
                                <td>Quorum-based consensus; automatic leader election</td>
                            </tr>
                            <tr>
                                <td><strong>DNS/CDN Failure</strong></td>
                                <td>Cloudflare/Route53 → API unreachable</td>
                                <td>All inference endpoints</td>
                                <td style="color: #ef4444;"><strong>Immediate</strong></td>
                                <td>Multi-provider DNS; anycast routing</td>
                            </tr>
                            <tr>
                                <td><strong>Model Registry Corruption</strong></td>
                                <td>Bad weights deployed → All inference wrong</td>
                                <td>All inference across clouds</td>
                                <td>Minutes to hours</td>
                                <td>Canary deployments; automatic rollback</td>
                            </tr>
                            <tr>
                                <td><strong>Cooling System Failure (Single DC)</strong></td>
                                <td>CDU pump failure → Thermal throttling → Checkpoint</td>
                                <td>25-30% of one provider</td>
                                <td>3-10 minutes</td>
                                <td>Graceful workload migration; thermal shutdown</td>
                            </tr>
                            <tr style="background: rgba(239, 68, 68, 0.1);">
                                <td><strong>Common Mode: Solar Storm (Carrington-class)</strong></td>
                                <td>Grid instability → All US providers affected</td>
                                <td>Potentially 100%</td>
                                <td style="color: #ef4444;"><strong>Hours</strong></td>
                                <td>Geographic diversity (EU/APAC); generator islands</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Common Mode Failure Risks
                    </div>
                    <p style="margin-bottom: 0.75rem; color: #92400e; font-size: 0.875rem;">
                        Despite multi-cloud distribution, the following <strong>common mode failures</strong> can affect all providers simultaneously:
                    </p>
                    <ul style="margin: 0; padding-left: 1.25rem; color: #92400e; font-size: 0.875rem;">
                        <li><strong>Software Bugs:</strong> Shared libraries (CUDA, JAX, PyTorch) can have cross-platform vulnerabilities</li>
                        <li><strong>Upstream Dependencies:</strong> Container registries, package managers, CA certificates</li>
                        <li><strong>Internet Backbone:</strong> Major peering point failures (Equinix, DE-CIX)</li>
                        <li><strong>Geopolitical:</strong> Sanctions, export controls affecting chip supply</li>
                        <li><strong>Economic:</strong> Simultaneous provider bankruptcy (unlikely but non-zero)</li>
                    </ul>
                </div>

                <h4>2.5.11 Workload Migration Technical Architecture</h4>

                <div class="architecture-diagram">
                    <div class="architecture-title">Cross-Cloud Training Migration Sequence</div>
                    <div class="flow-diagram" style="flex-wrap: wrap;">
                        <span class="flow-box" style="background: #ef4444;">1. Failure Detected<br><small>Health check fails</small></span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box" style="background: #f59e0b;">2. Checkpoint Sync<br><small>15-60s to save state</small></span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box" style="background: #eab308;">3. Target Selection<br><small>Capacity + cost eval</small></span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box" style="background: #22c55e;">4. Resource Alloc<br><small>Spin up instances</small></span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box" style="background: #10b981;">5. State Restore<br><small>Load checkpoint</small></span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-box" style="background: #06b6d4;">6. Resume Training<br><small>Continue from step N</small></span>
                    </div>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Migration Time Budget Analysis</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">Training Job Migration (Claude-3 scale model):</span>

Model Size: ~175B parameters (estimated)
Checkpoint Size: 175B × 4 bytes (FP32) = 700 GB
                 175B × 2 bytes (BF16) = 350 GB

<span style="color: #f59e0b; font-weight: 600;">Step 1: Failure Detection</span>
  Health check interval:        5 seconds
  Confirmation threshold:       3 consecutive fails
  Detection time:               <strong>15 seconds</strong>

<span style="color: #f59e0b; font-weight: 600;">Step 2: Checkpoint Save</span>
  Write speed (NVMe):           3.5 GB/s per node
  Parallel nodes:               1,000
  Aggregate bandwidth:          3.5 TB/s
  350 GB checkpoint:            350 / 3,500 = <strong>0.1 seconds (local)</strong>

  Upload to S3/GCS (100 Gbps):  350 GB / 12.5 GB/s = <strong>28 seconds</strong>

<span style="color: #f59e0b; font-weight: 600;">Step 3: Target Provider Selection</span>
  Capacity check API calls:     <strong>2-5 seconds</strong>

<span style="color: #f59e0b; font-weight: 600;">Step 4: Resource Allocation</span>
  AWS Trainium2 (pre-reserved): <strong>30-60 seconds</strong>
  Google TPU (on-demand):       <strong>2-5 minutes</strong>
  Azure GB200 (spot):           <strong>5-15 minutes</strong>

<span style="color: #f59e0b; font-weight: 600;">Step 5: State Restoration</span>
  Download checkpoint:          28 seconds (symmetric)
  Load into accelerator memory: <strong>15-30 seconds</strong>

<span style="color: #f59e0b; font-weight: 600;">Step 6: Training Resume</span>
  Warmup iterations:            <strong>30-60 seconds</strong>

<span style="color: #10b981; font-weight: 600;">Total Migration Time:</span>
  Best case (pre-reserved):     15 + 28 + 3 + 45 + 43 + 45 = <strong>~3 minutes</strong>
  Typical case (on-demand):     15 + 28 + 5 + 180 + 43 + 45 = <strong>~5-6 minutes</strong>
  Worst case (spot capacity):   15 + 28 + 5 + 900 + 43 + 60 = <strong>~17 minutes</strong>

<span style="color: #ef4444; font-weight: 600;">Training Time Lost (per migration):</span>
  Tokens processed/second:      ~50,000 (estimated)
  5-minute migration:           5 × 60 × 50,000 = <strong>15M tokens lost</strong>
  Cost at $0.01/1K tokens:      <strong>$150 opportunity cost</strong></pre>
                </div>

                <h4>2.5.12 Power Quality & Protection Requirements</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>AWS Requirement</th>
                                <th>Google Requirement</th>
                                <th>Azure Requirement</th>
                                <th>Standard Reference</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Voltage Tolerance</strong></td>
                                <td>±10% nominal</td>
                                <td>±5% (tighter for TPU)</td>
                                <td>±10% nominal</td>
                                <td>IEC 61000-4-11</td>
                            </tr>
                            <tr>
                                <td><strong>Frequency Tolerance</strong></td>
                                <td>±2 Hz (60 Hz nominal)</td>
                                <td>±1 Hz</td>
                                <td>±2 Hz</td>
                                <td>IEEE 1159</td>
                            </tr>
                            <tr>
                                <td><strong>THD (Voltage)</strong></td>
                                <td>&lt;5%</td>
                                <td>&lt;3%</td>
                                <td>&lt;5%</td>
                                <td>IEEE 519</td>
                            </tr>
                            <tr>
                                <td><strong>Sag Immunity</strong></td>
                                <td>90% for 500ms</td>
                                <td>80% for 1s</td>
                                <td>85% for 500ms</td>
                                <td>SEMI F47</td>
                            </tr>
                            <tr>
                                <td><strong>Ground Fault Protection</strong></td>
                                <td>High-resistance grounding</td>
                                <td>Ungrounded IT system</td>
                                <td>HRG + GFP relay</td>
                                <td>NEC 250.36</td>
                            </tr>
                            <tr>
                                <td><strong>Arc Flash PPE Level</strong></td>
                                <td>Category 2 (typical)</td>
                                <td>Category 2</td>
                                <td>Category 3 (switchgear)</td>
                                <td>NFPA 70E</td>
                            </tr>
                            <tr>
                                <td><strong>Selective Coordination</strong></td>
                                <td>Required (NEC 700.32)</td>
                                <td>Required</td>
                                <td>Required</td>
                                <td>NEC 700.32</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4>2.5.13 Grid Interconnection & Utility Coordination</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Provider / Location</th>
                                <th>Grid Operator</th>
                                <th>Substation Capacity</th>
                                <th>Transmission Voltage</th>
                                <th>Renewable %</th>
                                <th>Carbon Intensity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>AWS Indiana</strong></td>
                                <td>MISO (Midcontinent ISO)</td>
                                <td>500 MW dedicated</td>
                                <td>345 kV / 138 kV</td>
                                <td>~25%</td>
                                <td>420 g CO₂/kWh</td>
                            </tr>
                            <tr>
                                <td><strong>Google Oklahoma</strong></td>
                                <td>SPP (Southwest Power Pool)</td>
                                <td>400 MW (Mayes County)</td>
                                <td>345 kV</td>
                                <td>~45% (wind)</td>
                                <td>320 g CO₂/kWh</td>
                            </tr>
                            <tr>
                                <td><strong>Azure Virginia</strong></td>
                                <td>PJM Interconnection</td>
                                <td>300 MW</td>
                                <td>500 kV / 230 kV</td>
                                <td>~15%</td>
                                <td>380 g CO₂/kWh</td>
                            </tr>
                            <tr>
                                <td><strong>Fluidstack Texas</strong></td>
                                <td>ERCOT</td>
                                <td>350 MW</td>
                                <td>345 kV</td>
                                <td>~35% (wind/solar)</td>
                                <td>350 g CO₂/kWh</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="formula-box">
                    <div class="formula-box-title">Carbon Footprint Analysis</div>
                    <pre style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.6;">
<span style="color: #67e8f9; font-weight: 600;">Annual Carbon Emissions by Provider:</span>

AWS Indiana (600 MW, 8,760 hrs, 420 g/kWh):
  Energy: 600 MW × 8,760 hr = 5,256 GWh/year
  Carbon: 5,256 GWh × 420 kg/MWh = <strong>2.21 Mt CO₂/year</strong>

Google Oklahoma (500 MW, 8,760 hrs, 320 g/kWh):
  Energy: 4,380 GWh/year
  Carbon: 4,380 × 320 = <strong>1.40 Mt CO₂/year</strong>

Azure Virginia (300 MW, 8,760 hrs, 380 g/kWh):
  Energy: 2,628 GWh/year
  Carbon: 2,628 × 380 = <strong>1.00 Mt CO₂/year</strong>

Fluidstack Texas (300 MW, 8,760 hrs, 350 g/kWh):
  Energy: 2,628 GWh/year
  Carbon: 2,628 × 350 = <strong>0.92 Mt CO₂/year</strong>

<span style="color: #10b981; font-weight: 600;">Total Anthropic Carbon Footprint:</span>
  Gross emissions: 2.21 + 1.40 + 1.00 + 0.92 = <strong>5.53 Mt CO₂/year</strong>

  With PPA offsets (Google 100% matched, AWS 50%):
  Net emissions: 2.21×0.5 + 0 + 1.00 + 0.92 = <strong>~3.0 Mt CO₂/year</strong>

  Comparison:
  - Equivalent to ~650,000 passenger vehicles/year
  - Or 0.006% of global emissions (50 Gt/year)</pre>
                </div>

                <h4>2.5.14 Historical Outage Analysis & Lessons Learned</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Provider</th>
                                <th>Outage Type</th>
                                <th>Duration</th>
                                <th>Root Cause</th>
                                <th>Anthropic Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dec 2021</td>
                                <td>AWS us-east-1</td>
                                <td>Network partition</td>
                                <td>7 hours</td>
                                <td>Automated scaling bug</td>
                                <td>Pre-Anthropic scale; design lesson</td>
                            </tr>
                            <tr>
                                <td>Nov 2022</td>
                                <td>Google us-central1</td>
                                <td>Cooling system</td>
                                <td>4 hours</td>
                                <td>CRAC unit failure cascade</td>
                                <td>Reinforced thermal monitoring</td>
                            </tr>
                            <tr>
                                <td>Jan 2023</td>
                                <td>Azure eastus2</td>
                                <td>Power distribution</td>
                                <td>8 hours</td>
                                <td>Chiller plant failure</td>
                                <td>Added Azure thermal SLA requirements</td>
                            </tr>
                            <tr>
                                <td>Jul 2024</td>
                                <td>Cloudflare (global)</td>
                                <td>BGP misconfiguration</td>
                                <td>90 minutes</td>
                                <td>Human error in routing</td>
                                <td>Multi-CDN strategy implemented</td>
                            </tr>
                            <tr>
                                <td>Oct 2025</td>
                                <td>AWS Rainier</td>
                                <td>Trainium2 firmware</td>
                                <td>2 hours</td>
                                <td>Driver compatibility</td>
                                <td>Canary deployment policy</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4>2.5.15 SLA & Availability Comparison Matrix</h4>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>AI Company</th>
                                <th>Primary Provider</th>
                                <th>Backup Provider</th>
                                <th>Contracted SLA</th>
                                <th>Actual Uptime (2025)</th>
                                <th>SPOF Risk</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Anthropic</strong></td>
                                <td>Multi (AWS/GCP/Azure/Fluid)</td>
                                <td>Each other</td>
                                <td style="color: #10b981;"><strong>99.99%</strong></td>
                                <td style="color: #10b981;"><strong>99.97%</strong></td>
                                <td style="color: #10b981;">Low</td>
                            </tr>
                            <tr>
                                <td>OpenAI</td>
                                <td>Microsoft Azure</td>
                                <td>Limited self-hosted</td>
                                <td>99.9%</td>
                                <td>99.85%</td>
                                <td style="color: #f59e0b;">Medium</td>
                            </tr>
                            <tr>
                                <td>Google DeepMind</td>
                                <td>Google Cloud</td>
                                <td>None (internal)</td>
                                <td>Internal SLO</td>
                                <td>~99.95%</td>
                                <td style="color: #f59e0b;">Medium</td>
                            </tr>
                            <tr>
                                <td>xAI</td>
                                <td>Colossus Memphis</td>
                                <td>Oracle (partial)</td>
                                <td>N/A (private)</td>
                                <td>~99.5% (est.)</td>
                                <td style="color: #ef4444;">High</td>
                            </tr>
                            <tr>
                                <td>Meta AI</td>
                                <td>Meta internal DCs</td>
                                <td>Azure (some)</td>
                                <td>Internal SLO</td>
                                <td>~99.9%</td>
                                <td style="color: #f59e0b;">Medium</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box success">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Anthropic Multi-Cloud Design Principles Summary
                    </div>
                    <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.875rem;">
                        <li><strong>No Single Point of Failure:</strong> Any provider can fail without total service loss</li>
                        <li><strong>Supply Chain Diversity:</strong> NVIDIA shortage? Use Trainium2/TPU. AMD available? Flex to Azure</li>
                        <li><strong>Cost Arbitrage:</strong> Shift workloads to cheapest available capacity in real-time</li>
                        <li><strong>Geographic Redundancy:</strong> 6+ states, 3+ countries, 4 independent grid operators</li>
                        <li><strong>Competitive Leverage:</strong> No vendor lock-in enables better pricing negotiation</li>
                        <li><strong>Technology Hedge:</strong> If one chip architecture underperforms, alternatives are ready</li>
                        <li><strong>Regulatory Compliance:</strong> Data residency flexibility for EU/APAC requirements</li>
                        <li><strong>Graceful Degradation:</strong> Service continues at reduced capacity during partial outages</li>
                    </ul>
                </div>

                <p>
                    This distributed approach represents a <strong>paradigm shift from the concentration model</strong> adopted by competitors. While xAI's Colossus demonstrates raw power aggregation (2 GW in one location), Anthropic's strategy optimizes for <strong>resilience, cost efficiency, and strategic flexibility</strong>. The trade-off: higher operational complexity and workload orchestration challenges, offset by reduced catastrophic failure risk and multi-year cost savings exceeding $500M annually. The architecture demonstrates that <strong>power distribution design for AI infrastructure extends beyond electrical engineering</strong>—it requires holistic consideration of compute portability, thermal management, grid interconnection, and failure domain isolation.
                </p>

                <!-- Section 3: Voltage Evolution -->
                <h2 id="section-3">
                    <span class="section-number">3</span>
                    Voltage Evolution: 12V → 48V → 800V DC
                </h2>

                <p>
                    The evolution of data center power distribution voltage levels represents a fundamental shift in electrical engineering philosophy. Higher voltages dramatically reduce distribution losses and copper requirements while enabling the extreme power densities required by AI workloads.
                </p>

                <h3>3.1 The Physics of Voltage Selection</h3>

                <div class="formula-box">
                    <div class="formula-box-title">DC Distribution Loss Analysis</div>
                    <pre style="margin: 0; white-space: pre-wrap;">
Power Loss: P_loss = I²R = (P_load/V)² × ρ × L / A

Where:
  P_load = Power delivered to load (W)
  V = Distribution voltage (V)
  ρ = Conductor resistivity (Ω·m)
  L = Conductor length (m)
  A = Cross-sectional area (m²)

<span style="color: #67e8f9;">For same power, same conductor:</span>
  P_loss ∝ 1/V²

<span style="color: #10b981;">Voltage Comparison (normalized to 12V = 100%):</span>
  12V:  100.0% loss (baseline)
  48V:    6.25% loss (16x reduction)
  380V:   0.10% loss (1,003x reduction)
  800V:   0.02% loss (4,444x reduction)</pre>
                </div>

                <h3>3.2 Voltage Level Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Voltage</th>
                                <th>Distribution Loss</th>
                                <th>Copper Required</th>
                                <th>Max Rack Power</th>
                                <th>Adoption Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>12V DC</strong></td>
                                <td>Baseline (100%)</td>
                                <td>Baseline</td>
                                <td>10-20 kW</td>
                                <td>Legacy</td>
                            </tr>
                            <tr>
                                <td><strong>48V DC</strong></td>
                                <td>6.25% (16x better)</td>
                                <td>25% of 12V</td>
                                <td>50-100 kW</td>
                                <td style="color: #10b981;">Mainstream</td>
                            </tr>
                            <tr>
                                <td><strong>380V DC</strong></td>
                                <td>0.1% (1000x better)</td>
                                <td>3% of 12V</td>
                                <td>100-300 kW</td>
                                <td style="color: #f59e0b;">Emerging</td>
                            </tr>
                            <tr>
                                <td><strong>800V DC</strong></td>
                                <td>0.02% (4444x better)</td>
                                <td>1.5% of 12V</td>
                                <td>500 kW - 1 MW+</td>
                                <td style="color: #8b5cf6;">Next-Gen (2026+)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>3.3 NVIDIA 800V DC Architecture</h3>

                <p>
                    At GTC 2025, NVIDIA unveiled an 800V sidecar architecture designed to power 576 Rubin Ultra GPUs in a single Kyber rack at MW scale. This represents the cutting edge of data center power distribution.
                </p>

                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(118, 185, 0, 0.1);">⚡</div>
                            <div>
                                <div class="comparison-card-title">+5% Efficiency</div>
                                <div class="comparison-card-subtitle">End-to-End Improvement</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(118, 185, 0, 0.1);">🔧</div>
                            <div>
                                <div class="comparison-card-title">70% Less Maintenance</div>
                                <div class="comparison-card-subtitle">Cost Reduction</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(118, 185, 0, 0.1);">📦</div>
                            <div>
                                <div class="comparison-card-title">Minimal Rack Space</div>
                                <div class="comparison-card-subtitle">vs 64U for Traditional</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(118, 185, 0, 0.1);">🏭</div>
                            <div>
                                <div class="comparison-card-title">EV Supply Chain</div>
                                <div class="comparison-card-subtitle">Leveraged Components</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 4: UPS & Battery -->
                <h2 id="section-4">
                    <span class="section-number">4</span>
                    UPS & Battery Technologies
                </h2>

                <h3>4.1 Lithium-Ion Battery Chemistry Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>LFP (Lithium Iron Phosphate)</th>
                                <th>NMC (Nickel Manganese Cobalt)</th>
                                <th>VRLA (Lead-Acid)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Energy Density</td>
                                <td>90-160 Wh/kg</td>
                                <td>150-220 Wh/kg</td>
                                <td>30-50 Wh/kg</td>
                            </tr>
                            <tr>
                                <td>Cycle Life</td>
                                <td style="color: #10b981;"><strong>2,000-5,000 cycles</strong></td>
                                <td>1,000-2,000 cycles</td>
                                <td>300-500 cycles</td>
                            </tr>
                            <tr>
                                <td>Thermal Stability</td>
                                <td style="color: #10b981;"><strong>Excellent (safest)</strong></td>
                                <td>Moderate</td>
                                <td>Good</td>
                            </tr>
                            <tr>
                                <td>Operating Temp</td>
                                <td>-20°C to 60°C</td>
                                <td>0°C to 45°C</td>
                                <td>20°C to 25°C</td>
                            </tr>
                            <tr>
                                <td>Thermal Runaway Risk</td>
                                <td style="color: #10b981;"><strong>Very Low</strong></td>
                                <td style="color: #f59e0b;">Moderate</td>
                                <td>Low (hydrogen gas)</td>
                            </tr>
                            <tr>
                                <td>Lifespan</td>
                                <td>15+ years</td>
                                <td>10-15 years</td>
                                <td>5-7 years</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0891b2" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Industry Recommendation
                    </div>
                    <p style="margin: 0;">
                        <strong>LFP (Lithium Iron Phosphate)</strong> is recommended for data center applications due to superior thermal stability, longer cycle life, and lower thermal runaway risk. Google has deployed over <strong>100 million Li-ion cells</strong> using this approach.
                    </p>
                </div>

                <h3>4.2 Distributed vs Centralized UPS Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Aspect</th>
                                <th>Distributed (AWS/Google)</th>
                                <th>Traditional Centralized</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Failure Domain</td>
                                <td style="color: #10b981;"><strong>Single rack</strong></td>
                                <td>Entire facility/zone</td>
                            </tr>
                            <tr>
                                <td>Efficiency</td>
                                <td style="color: #10b981;"><strong>Higher (fewer conversions)</strong></td>
                                <td>Lower (AC-DC-AC-DC)</td>
                            </tr>
                            <tr>
                                <td>Capital Cost</td>
                                <td>Scales with deployment</td>
                                <td>Large day-1 investment</td>
                            </tr>
                            <tr>
                                <td>Serviceability</td>
                                <td style="color: #10b981;"><strong>Replace single BBU</strong></td>
                                <td>Complex maintenance window</td>
                            </tr>
                            <tr>
                                <td>Third-Party Software</td>
                                <td style="color: #10b981;"><strong>Eliminated</strong></td>
                                <td>Required (vendor UPS)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 5: Generator Systems -->
                <h2 id="section-5">
                    <span class="section-number">5</span>
                    Generator & Backup Systems
                </h2>

                <h3>5.1 Fuel Transition Trends</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Current Approach</th>
                                <th>Future Direction</th>
                                <th>Timeline</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="company-badge aws">AWS</span></td>
                                <td>Renewable Diesel (HVO)</td>
                                <td>90% GHG reduction</td>
                                <td>Ongoing</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge google">Google</span></td>
                                <td>Battery (BESS) + Grid</td>
                                <td>Diesel replacement pilot</td>
                                <td>2023+</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge microsoft">Microsoft</span></td>
                                <td>Hydrogen Fuel Cells (3MW pilot)</td>
                                <td>Zero-diesel by 2030</td>
                                <td>2030</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge xai">xAI</span></td>
                                <td>Tesla Megapack (168 units)</td>
                                <td>Grid + Battery primary</td>
                                <td>2025</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>5.2 Generator Specifications</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Specification</th>
                                <th>Typical Value</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Generator Rating</td>
                                <td>2-3 MW per unit</td>
                                <td>Standby rating</td>
                            </tr>
                            <tr>
                                <td>Start Time</td>
                                <td>&lt;10 seconds</td>
                                <td>Automatic start on utility loss</td>
                            </tr>
                            <tr>
                                <td>Load Step Capability</td>
                                <td>100% in one step</td>
                                <td>NFPA 110 requirement</td>
                            </tr>
                            <tr>
                                <td>Day Tank</td>
                                <td>2-4 hours</td>
                                <td>Local to generator</td>
                            </tr>
                            <tr>
                                <td>Main Tank</td>
                                <td>24-96 hours</td>
                                <td>Based on tier level</td>
                            </tr>
                            <tr>
                                <td>Redundancy</td>
                                <td>N+1 minimum</td>
                                <td>2N for Tier IV</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 6: Failure Scenarios -->
                <h2 id="section-6">
                    <span class="section-number">6</span>
                    Failure Scenario Analysis
                </h2>

                <div class="info-box critical">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Critical Statistic
                    </div>
                    <p style="margin: 0;">
                        <strong>Power issues remain the #1 cause of data center outages</strong>, accounting for 54% of all impactful outages in 2024. Human error increased by 10 percentage points in 2025 vs 2024, with "failure to follow procedures" being the largest increase.
                    </p>
                </div>

                <h3>6.1 Common Failure Scenarios</h3>

                <div class="failure-scenarios">
                    <!-- Failure 1: Utility Loss -->
                    <div class="failure-card">
                        <div class="failure-card-header">
                            <div class="failure-title">Utility Power Loss</div>
                            <span class="failure-severity high">High Frequency</span>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary);">
                            Complete loss of utility power requires seamless transfer to backup systems. The speed of UPS response and generator start time are critical.
                        </p>
                        <div class="failure-sequence">
                            <div class="failure-step">
                                <span class="failure-step-number">1</span>
                                <span>Utility voltage drops below threshold (typically 85-90%)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">2</span>
                                <span>UPS detects loss, batteries engage (&lt;10ms for STS)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">3</span>
                                <span>Generator start command issued automatically</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">4</span>
                                <span>Generator online within 10 seconds</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">5</span>
                                <span>ATS transfers load to generator power</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">6</span>
                                <span>UPS returns to line mode, batteries recharge</span>
                            </div>
                        </div>
                    </div>

                    <!-- Failure 2: Cascading Failure -->
                    <div class="failure-card">
                        <div class="failure-card-header">
                            <div class="failure-title">Cascading Failure</div>
                            <span class="failure-severity critical">Critical</span>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary);">
                            When one component failure triggers additional failures through load redistribution or protection device miscoordination.
                        </p>
                        <div class="failure-sequence">
                            <div class="failure-step">
                                <span class="failure-step-number">1</span>
                                <span>Initial trigger event (e.g., transformer failure)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">2</span>
                                <span>Load redistributes to remaining active paths</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">3</span>
                                <span>Parallel path experiences overload condition</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">4</span>
                                <span>Protection device operates (potentially miscoordinated)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">5</span>
                                <span>Further load redistribution → more failures</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">6</span>
                                <span>Potential system collapse if not contained</span>
                            </div>
                        </div>
                    </div>

                    <!-- Failure 3: Thermal Runaway -->
                    <div class="failure-card">
                        <div class="failure-card-header">
                            <div class="failure-title">Battery Thermal Runaway</div>
                            <span class="failure-severity critical">Critical</span>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary);">
                            Lithium-ion battery cells can enter thermal runaway, leading to fire and potential explosion. Early detection through off-gas monitoring provides 5-20 minutes warning.
                        </p>
                        <div class="failure-sequence">
                            <div class="failure-step">
                                <span class="failure-step-number">1</span>
                                <span>Cell abuse occurs (overcharge, short circuit, damage)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">2</span>
                                <span>Internal temperature rises (80-120°C)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">3</span>
                                <span>SEI layer breakdown, electrolyte decomposition</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">4</span>
                                <span style="color: #f59e0b;"><strong>Off-gassing begins (VOC release) — DETECTION WINDOW</strong></span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">5</span>
                                <span>Thermal runaway initiation (150-250°C)</span>
                            </div>
                            <div class="failure-step">
                                <span class="failure-step-number">6</span>
                                <span>Cell venting, fire, potential propagation to adjacent cells</span>
                            </div>
                        </div>
                    </div>

                    <!-- Failure 4: Arc Flash -->
                    <div class="failure-card">
                        <div class="failure-card-header">
                            <div class="failure-title">Arc Flash Event</div>
                            <span class="failure-severity critical">Critical</span>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary);">
                            Electrical arc releases enormous energy (up to 35,000°F), causing severe burns, blast pressure, and hearing damage. PPE and protection coordination are critical.
                        </p>
                        <div class="formula-box" style="margin-top: 1rem;">
                            <div class="formula-box-title">IEEE 1584-2018 Arc Flash Calculation</div>
                            <pre style="margin: 0; white-space: pre-wrap; font-size: 0.8rem;">
<span style="color: #f472b6;">Incident Energy:</span>
E = Cf × En × (t/0.2) × (610/D)^x

<span style="color: #67e8f9;">Where:</span>
  E = Incident energy (cal/cm²)
  Cf = Calculation factor (1.5 for V≤1kV)
  En = Normalized incident energy
  t = Arcing time (seconds)
  D = Working distance (mm)
  x = Distance exponent

<span style="color: #10b981;">PPE Categories (NFPA 70E):</span>
  Cat 1: 1.2 - 4 cal/cm²
  Cat 2: 4 - 8 cal/cm²
  Cat 3: 8 - 25 cal/cm²
  Cat 4: 25 - 40 cal/cm²</pre>
                        </div>
                    </div>
                </div>

                <h3>6.2 Historical Hyperscaler Failures</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Company</th>
                                <th>Root Cause</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>June 2012</td>
                                <td><span class="company-badge aws">AWS</span></td>
                                <td>Generator stabilization failure during storm</td>
                                <td>UPS depleted; servers lost power</td>
                            </tr>
                            <tr>
                                <td>August 2019</td>
                                <td><span class="company-badge aws">AWS</span></td>
                                <td>Backup generators failed ~1.5 hours after activation</td>
                                <td>7.5% of EC2 instances unavailable</td>
                            </tr>
                            <tr>
                                <td>May 2010</td>
                                <td><span class="company-badge aws">AWS</span></td>
                                <td>UPS failed to detect power drop</td>
                                <td>Partial outage</td>
                            </tr>
                            <tr>
                                <td>2024</td>
                                <td>Virginia Data Center Alley</td>
                                <td>Protection system failure</td>
                                <td>60 of 200+ DCs disconnected simultaneously</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 7: Protection Coordination -->
                <h2 id="section-7">
                    <span class="section-number">7</span>
                    Protection & Coordination
                </h2>

                <h3>7.1 Selective Coordination Requirements</h3>

                <p>
                    Selective coordination ensures that only the protective device immediately upstream of a fault operates, preventing unnecessary outages of healthy circuits. NEC requires selective coordination for emergency systems (Article 700.32) and critical operations data systems (Article 645.27).
                </p>

                <div class="formula-box">
                    <div class="formula-box-title">Selective Coordination Criteria</div>
                    <pre style="margin: 0; white-space: pre-wrap;">
<span style="color: #f472b6;">For all fault current levels:</span>
  t_downstream < t_upstream

<span style="color: #67e8f9;">Minimum separation between curves:</span>
  0.1 seconds (6 cycles) for electronic devices
  0.3 seconds for mechanical devices

<span style="color: #10b981;">Verification required for:</span>
  • All fault current magnitudes from minimum to maximum
  • Both phase and ground faults
  • All operating modes (normal, emergency, maintenance)</pre>
                </div>

                <h3>7.2 Arc Flash Mitigation Methods (NEC 240.87)</h3>

                <p>
                    For circuit breakers rated at 1,200A or higher, NEC 240.87 requires one of the following arc energy reduction methods:
                </p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Method</th>
                                <th>Response Time</th>
                                <th>Energy Reduction</th>
                                <th>Application</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Zone Selective Interlocking (ZSI)</td>
                                <td>Varies by fault location</td>
                                <td>50-70%</td>
                                <td>Multi-level protection</td>
                            </tr>
                            <tr>
                                <td>Differential Relaying</td>
                                <td>1-3 cycles</td>
                                <td>80-90%</td>
                                <td>Transformers, buses</td>
                            </tr>
                            <tr>
                                <td>Energy-Reducing Maintenance Switch</td>
                                <td>Instantaneous</td>
                                <td>Up to 3x</td>
                                <td>During maintenance</td>
                            </tr>
                            <tr>
                                <td>Active Arc Flash Mitigation</td>
                                <td>&lt;1 cycle</td>
                                <td style="color: #10b981;"><strong>Maximum</strong></td>
                                <td>Light + current sensors</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>7.3 Ground Fault Protection</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Grounding Type</th>
                                <th>Ground Fault Current</th>
                                <th>Operation During Fault</th>
                                <th>Data Center Suitability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Solidly Grounded</td>
                                <td>High (1000s of A)</td>
                                <td>Must trip immediately</td>
                                <td>Standard</td>
                            </tr>
                            <tr>
                                <td>Low Resistance</td>
                                <td>100-1000A</td>
                                <td>Must trip</td>
                                <td>Good</td>
                            </tr>
                            <tr>
                                <td style="color: #10b981;"><strong>High Resistance (HRG)</strong></td>
                                <td style="color: #10b981;"><strong>1-10A</strong></td>
                                <td style="color: #10b981;"><strong>Continue operation</strong></td>
                                <td style="color: #10b981;"><strong>Recommended</strong></td>
                            </tr>
                            <tr>
                                <td>Ungrounded</td>
                                <td>Near zero</td>
                                <td>Continue operation</td>
                                <td>Not recommended (transients)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 8: Reliability Calculator -->
                <h2 id="section-8">
                    <span class="section-number">8</span>
                    Reliability Calculations
                </h2>

                <div class="calculator-section" id="calculator-section">
                    <h3 class="calculator-title">Data Center Availability Calculator</h3>
                    <p class="calculator-subtitle">Calculate system availability based on redundancy configuration</p>

                    <div class="calc-grid">
                        <div class="calc-input-group">
                            <label class="calc-label">Component MTBF (hours)
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Mean Time Between Failures</div><div class="aig-tooltip-desc">Average operating hours before a component fails. Higher MTBF = more reliable hardware. Typical values: UPS 100K-300K hrs, server PSU 50K-100K hrs, HDD 1M hrs.</div><div class="aig-tooltip-formula">Availability = MTBF / (MTBF + MTTR)</div></span></span>
                            </label>
                            <input type="number" class="calc-input" id="mtbf" value="50000" min="1000">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Component MTTR (hours)
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Mean Time To Repair</div><div class="aig-tooltip-desc">Average hours to detect, diagnose, and restore a failed component. Includes spare availability, staff response, and testing. Typical: 2-8 hrs with on-site spares, 24-72 hrs without.</div><div class="aig-tooltip-formula">Lower MTTR = Higher Availability</div></span></span>
                            </label>
                            <input type="number" class="calc-input" id="mttr" value="4" min="0.5" step="0.5">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Redundancy Configuration
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Redundancy Topology</div><div class="aig-tooltip-desc">N = no spare; N+1 = one standby unit; 2N = fully mirrored parallel path; 2N+1 = mirrored + one spare. Higher redundancy exponentially reduces single-point-of-failure risk.</div><div class="aig-tooltip-formula">2N: A_sys = 1 - (1-A)^2</div></span></span>
                            </label>
                            <select class="calc-input" id="redundancy">
                                <option value="N">N (No redundancy)</option>
                                <option value="N+1" selected>N+1 (One spare)</option>
                                <option value="2N">2N (Full mirror)</option>
                                <option value="2N+1">2N+1 (Mirror + spare)</option>
                            </select>
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Number of Components
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Total Component Count</div><div class="aig-tooltip-desc">Number of identical components in the system chain (e.g., 4 UPS modules, 6 CRAC units). Series chain reliability decreases as count increases — each added component is another potential failure point.</div><div class="aig-tooltip-formula">A_chain = A_single ^ n (series)</div></span></span>
                            </label>
                            <input type="number" class="calc-input" id="components" value="4" min="1" max="20">
                        </div>
                    </div>

                    <div class="calc-results">
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="result-availability">99.992%</div>
                            <div class="calc-result-label">System Availability</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="result-downtime">42 min</div>
                            <div class="calc-result-label">Annual Downtime</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="result-tier">Tier III</div>
                            <div class="calc-result-label">Approximate Tier</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="result-nines">4</div>
                            <div class="calc-result-label">Nines of Availability</div>
                        </div>
                    </div>

                    <!-- ===== Pro Mode Enhancement Layer ===== -->
                    <div class="aig-toolbar-row">
                        <div class="aig-mode-bar">
                            <div class="aig-mode-toggle">
                                <button class="aig-mode-btn active" id="aigFreeBtn" onclick="aigSetMode('free')">Free Mode</button>
                                <button class="aig-mode-btn" id="aigProBtn" onclick="aigSetMode('pro')">Pro Analysis</button>
                            </div>
                        </div>
                        <div class="aig-toolbar-actions">
                            <button class="aig-btn-reset" onclick="aigResetDefaults()"><i class="fas fa-undo"></i> Reset</button>
                            <button class="aig-btn-pdf" onclick="aigExportPDF()" style="display:none" id="aigPdfBtn"><i class="fas fa-file-pdf"></i> Export PDF</button>
                            <span class="aig-privacy-badge"><i class="fas fa-shield-alt"></i> Client-Side Only</span>
                        </div>
                    </div>

                    <!-- Strategic Inputs -->
                    <div class="aig-strategic-inputs">
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-01: Workload Profile
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Workload Profile</div><div class="aig-tooltip-desc">Determines power density, cooling factor, failure rate multiplier, and regulatory weight. AI/HPC racks draw 50+ kW vs 8 kW for conventional.</div><div class="aig-tooltip-formula">Affects: CER, Stranded Capacity, REI</div></span></span>
                            </label>
                            <select class="aig-si-input" id="aigWorkload">
                                <option value="AI/HPC High-Density">AI/HPC High-Density</option>
                                <option value="Conventional Enterprise" selected>Conventional Enterprise</option>
                                <option value="Hybrid Mixed">Hybrid Mixed</option>
                                <option value="Edge Computing">Edge Computing</option>
                            </select>
                        </div>
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-02: Design Redundancy Tier
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Redundancy Tier (I-IV)</div><div class="aig-tooltip-desc">Uptime Institute tier classification. Determines baseline availability, MTBF proxy, and maximum allowable downtime per year.</div><div class="aig-tooltip-formula">Tier IV: 99.995% | 2N+1 | 26 min/yr</div></span></span>
                            </label>
                            <select class="aig-si-input" id="aigTier">
                                <option value="I">Tier I — N (Basic)</option>
                                <option value="II">Tier II — N+1 (Redundant)</option>
                                <option value="III" selected>Tier III — N+1 Dual Path (Concurrently Maintainable)</option>
                                <option value="IV">Tier IV — 2N+1 (Fault Tolerant)</option>
                            </select>
                        </div>
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-03: Regional Power Reliability (1-10)
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Grid Reliability Score</div><div class="aig-tooltip-desc">Maps to regional grid stability. 10 = Singapore/Japan grade (SAIDI &lt; 5 min). 1 = frequent brownouts. Affects ARO and failure probability in Monte Carlo.</div><div class="aig-tooltip-formula">ARO modifier = 1 + (10 - score) &times; 0.15</div></span></span>
                            </label>
                            <input type="number" class="aig-si-input" id="aigGridScore" value="7" min="1" max="10" step="1">
                        </div>
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-04: Process Maturity Level (1-5)
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Process Maturity (McKinsey Scale)</div><div class="aig-tooltip-desc">1=Reactive, 2=Defined, 3=Integrated, 4=Automated, 5=Optimized. Directly impacts MTTD, automation ratio, and governance integrity score.</div><div class="aig-tooltip-formula">Gov. Integrity = maturity &times; 20</div></span></span>
                            </label>
                            <input type="number" class="aig-si-input" id="aigMaturity" value="3" min="1" max="5" step="1">
                        </div>
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-05: Regulatory Sensitivity Class
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">EU AI Act Sensitivity Class</div><div class="aig-tooltip-desc">High-Risk AI requires Article 13 transparency, logging, human oversight. Determines compliance gap count and regulatory weight multiplier.</div><div class="aig-tooltip-formula">High-Risk: 1.5x regulatory weight</div></span></span>
                            </label>
                            <select class="aig-si-input" id="aigRegClass">
                                <option value="High-Risk AI">High-Risk AI (Art. 6)</option>
                                <option value="Limited-Risk AI" selected>Limited-Risk AI (Art. 52)</option>
                                <option value="Minimal-Risk AI">Minimal-Risk AI</option>
                                <option value="General Purpose">General Purpose AI (GPAI)</option>
                            </select>
                        </div>
                        <div class="aig-si-group">
                            <label class="aig-si-label">SI-06: Fiduciary Tolerance ($)
                                <span class="aig-tooltip-trigger" tabindex="0">?<span class="aig-tooltip-content"><div class="aig-tooltip-title">Max Single-Event Loss Tolerance</div><div class="aig-tooltip-desc">Maximum acceptable financial impact from a single catastrophic event. Used as SLE cap in ALE calculation and Monte Carlo stress testing.</div><div class="aig-tooltip-formula">ALE = SLE &times; ARO | COI threshold</div></span></span>
                            </label>
                            <input type="number" class="aig-si-input" id="aigFiduciary" value="5000000" min="100000" max="50000000" step="100000">
                        </div>
                    </div>

                    <!-- Pro Panel 1: Operational Intelligence -->
                    <div class="aig-pro-panel gated" id="aigPanel1">
                        <div class="aig-gate-overlay" onclick="aigShowLogin()">
                            <i class="fas fa-lock"></i>
                            <span>Pro Feature — Log in to unlock</span>
                        </div>
                        <div class="panel-title"><i class="fas fa-tachometer-alt"></i> Operational Intelligence</div>
                        <div class="aig-kpi-grid">
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigP99Avail">99.982%</div>
                                <div class="aig-kpi-label">P99 Effective Availability</div>
                                <div class="aig-kpi-sublabel">Simulated at 99th percentile</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigCER">1.42</div>
                                <div class="aig-kpi-label">Cooling Efficiency Ratio</div>
                                <div class="aig-kpi-sublabel">Total Cooling / IT Energy</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigStranded">18%</div>
                                <div class="aig-kpi-label">Stranded Capacity</div>
                                <div class="aig-kpi-sublabel">(Provisioned - Utilized) / Prov.</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMTTD">4.2 min</div>
                                <div class="aig-kpi-label">MTTD Forecast</div>
                                <div class="aig-kpi-sublabel">Mean Time to Detect</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigAutoRatio">62%</div>
                                <div class="aig-kpi-label">Automation Ratio</div>
                                <div class="aig-kpi-sublabel">Automated / Total Processes</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigLogInteg">78/100</div>
                                <div class="aig-kpi-label">Log Integrity Score</div>
                                <div class="aig-kpi-sublabel">Art.13 compliance index</div>
                            </div>
                        </div>
                    </div>

                    <!-- Pro Panel 2: Risk & Financial Exposure -->
                    <div class="aig-pro-panel gated" id="aigPanel2">
                        <div class="aig-gate-overlay" onclick="aigShowLogin()">
                            <i class="fas fa-lock"></i>
                            <span>Pro Feature — Log in to unlock</span>
                        </div>
                        <div class="panel-title"><i class="fas fa-exclamation-triangle"></i> Risk &amp; Financial Exposure</div>
                        <div class="aig-kpi-grid">
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigREI">0.42</div>
                                <div class="aig-kpi-label">Risk Exposure Index</div>
                                <div class="aig-kpi-sublabel">&Sigma;(P<sub>i</sub> &times; I<sub>i</sub>)</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigALE">$1.2M</div>
                                <div class="aig-kpi-label">Annual Loss Expectancy</div>
                                <div class="aig-kpi-sublabel">SLE &times; ARO</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigOPEXLeak">8.4%</div>
                                <div class="aig-kpi-label">OPEX Leakage Index</div>
                                <div class="aig-kpi-sublabel">Waste / Total OPEX</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigTechDebt">$47K</div>
                                <div class="aig-kpi-label">Technical Debt Hemorrhage</div>
                                <div class="aig-kpi-sublabel">$/month deferred maintenance</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigFinExpose">62/100</div>
                                <div class="aig-kpi-label">Financial Exposure Score</div>
                                <div class="aig-score-bar-bg"><div class="aig-score-bar-fill risk-med" id="aigFinExposeBar" style="width:62%"></div></div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigCOI">$890K</div>
                                <div class="aig-kpi-label">Cost of Inaction (COI)</div>
                                <div class="aig-kpi-sublabel">P(fail) &times; hourly &times; hrs &times; premium</div>
                            </div>
                        </div>
                    </div>

                    <!-- Pro Panel 3: Operational Health Score -->
                    <div class="aig-pro-panel gated" id="aigPanel3">
                        <div class="aig-gate-overlay" onclick="aigShowLogin()">
                            <i class="fas fa-lock"></i>
                            <span>Pro Feature — Log in to unlock</span>
                        </div>
                        <div class="panel-title"><i class="fas fa-heartbeat"></i> Operational Health Score</div>
                        <div class="aig-gauge-container">
                            <svg id="aigGaugeSVG" width="220" height="140" viewBox="0 0 220 140">
                                <path d="M 20 130 A 90 90 0 0 1 200 130" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="18" stroke-linecap="round"/>
                                <path id="aigGaugeArc" d="M 20 130 A 90 90 0 0 1 200 130" fill="none" stroke="#6366f1" stroke-width="18" stroke-linecap="round" stroke-dasharray="0 283"/>
                                <text id="aigGaugeText" x="110" y="110" text-anchor="middle" fill="#e2e8f0" font-size="32" font-weight="800">72</text>
                                <text x="110" y="128" text-anchor="middle" fill="#94a3b8" font-size="11">/ 100</text>
                            </svg>
                            <div class="aig-gauge-tier" id="aigHealthTier" style="color:#818cf8">Grade B</div>
                            <div class="aig-gauge-label">Operational Health Score</div>
                        </div>
                        <div class="aig-kpi-grid" style="grid-template-columns: repeat(4, 1fr);">
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigTechRel">78</div>
                                <div class="aig-kpi-label">Technical Reliability</div>
                                <div class="aig-kpi-sublabel">Weight: 35%</div>
                                <div class="aig-score-bar-bg"><div class="aig-score-bar-fill risk-low" id="aigTechRelBar" style="width:78%"></div></div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigFinRes">65</div>
                                <div class="aig-kpi-label">Financial Resilience</div>
                                <div class="aig-kpi-sublabel">Weight: 25%</div>
                                <div class="aig-score-bar-bg"><div class="aig-score-bar-fill risk-med" id="aigFinResBar" style="width:65%"></div></div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigGovInt">70</div>
                                <div class="aig-kpi-label">Governance Integrity</div>
                                <div class="aig-kpi-sublabel">Weight: 20%</div>
                                <div class="aig-score-bar-bg"><div class="aig-score-bar-fill risk-med" id="aigGovIntBar" style="width:70%"></div></div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigProcMat">60</div>
                                <div class="aig-kpi-label">Process Maturity</div>
                                <div class="aig-kpi-sublabel">Weight: 20%</div>
                                <div class="aig-score-bar-bg"><div class="aig-score-bar-fill risk-med" id="aigProcMatBar" style="width:60%"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Pro Panel 4: Monte Carlo Simulation -->
                    <div class="aig-pro-panel gated" id="aigPanel4">
                        <div class="aig-gate-overlay" onclick="aigShowLogin()">
                            <i class="fas fa-lock"></i>
                            <span>Pro Feature — Log in to unlock</span>
                        </div>
                        <div class="panel-title"><i class="fas fa-dice"></i> Monte Carlo Simulation (10K Iterations)</div>
                        <div class="aig-kpi-grid">
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCP5">$480K</div>
                                <div class="aig-kpi-label">P5 (Best Case)</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCP25">$780K</div>
                                <div class="aig-kpi-label">P25</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCP50">$1.1M</div>
                                <div class="aig-kpi-label">P50 (Median)</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCP75">$1.6M</div>
                                <div class="aig-kpi-label">P75</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCP95">$2.8M</div>
                                <div class="aig-kpi-label">P95 (Stress)</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigCVaR95">$3.2M</div>
                                <div class="aig-kpi-label">CVaR-95</div>
                                <div class="aig-kpi-sublabel">Expected tail loss</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigSLABreach">12%</div>
                                <div class="aig-kpi-label">SLA Breach Probability</div>
                            </div>
                            <div class="aig-kpi-card">
                                <div class="aig-kpi-value" id="aigMCMean">$1.2M</div>
                                <div class="aig-kpi-label">Mean ALE</div>
                            </div>
                        </div>
                        <div class="aig-chart-container">
                            <canvas id="aigHistogramCanvas" height="200"></canvas>
                        </div>
                        <div class="aig-chart-container" style="margin-top:0.75rem">
                            <canvas id="aigTornadoCanvas" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Pro Panel 5: AI-Generated Narrative -->
                    <div class="aig-pro-panel gated" id="aigPanel5">
                        <div class="aig-gate-overlay" onclick="aigShowLogin()">
                            <i class="fas fa-lock"></i>
                            <span>Pro Feature — Log in to unlock</span>
                        </div>
                        <div class="panel-title"><i class="fas fa-robot"></i> AI-Generated Board-Level Narrative</div>
                        <div class="aig-narrative" id="aigNarrative">
                            <h4><i class="fas fa-file-alt"></i> Executive Infrastructure Risk Report</h4>
                            <div id="aigNarrativeText">Loading assessment...</div>
                        </div>
                    </div>

                    <!-- Privacy & Benchmark -->
                    <div style="display:flex;align-items:center;justify-content:center;gap:6px;font-size:0.72rem;color:#64748b;margin-top:0.75rem;padding:6px 0;">
                        <i class="fas fa-shield-alt" style="color:#10b981;font-size:0.8rem"></i> All calculations run locally in your browser. No data is sent to any server.
                    </div>
                    <div class="aig-benchmark-meta">
                        <span class="aig-benchmark-tag"><i class="fas fa-database"></i> Uptime Institute Tier Standards</span>
                        <span class="aig-benchmark-tag"><i class="fas fa-bolt"></i> IEEE 1584-2018</span>
                        <span class="aig-benchmark-tag"><i class="fas fa-chart-bar"></i> 10K MC Iterations</span>
                        <span class="aig-benchmark-tag"><i class="fas fa-shield-alt"></i> EU AI Act Article 13</span>
                        <span class="aig-benchmark-tag"><i class="fas fa-calendar"></i> Feb 2026 Data</span>
                    </div>

                </div>

                <h3>8.1 Reliability Formulas</h3>

                <div class="formula-box">
                    <div class="formula-box-title">Availability Calculations</div>
                    <pre style="margin: 0; white-space: pre-wrap;">
<span style="color: #f472b6;">Single Component Availability:</span>
  A = MTBF / (MTBF + MTTR)

<span style="color: #67e8f9;">Series System (all must work):</span>
  A_total = A₁ × A₂ × A₃ × ... × Aₙ

<span style="color: #a5f3fc;">Parallel System (any one works):</span>
  A_total = 1 - (1-A₁) × (1-A₂) × ... × (1-Aₙ)

<span style="color: #10b981;">Annual Downtime (minutes):</span>
  Downtime = 525,600 × (1 - Availability)

<span style="color: #fbbf24;">Example: 99.995% availability</span>
  = 525,600 × 0.00005
  = 26.28 minutes/year (Tier IV)</pre>
                </div>

                <h3>8.2 Uptime Institute Tier Comparison</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tier</th>
                                <th>Availability</th>
                                <th>Annual Downtime</th>
                                <th>Redundancy</th>
                                <th>Concurrent Maintainability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Tier I</td>
                                <td>99.671%</td>
                                <td>28.8 hours</td>
                                <td>N</td>
                                <td>No</td>
                            </tr>
                            <tr>
                                <td>Tier II</td>
                                <td>99.741%</td>
                                <td>22 hours</td>
                                <td>N+1</td>
                                <td>Partial</td>
                            </tr>
                            <tr>
                                <td>Tier III</td>
                                <td>99.982%</td>
                                <td>1.6 hours</td>
                                <td>N+1, dual path</td>
                                <td style="color: #10b981;"><strong>Yes</strong></td>
                            </tr>
                            <tr>
                                <td>Tier IV</td>
                                <td style="color: #10b981;"><strong>99.995%</strong></td>
                                <td style="color: #10b981;"><strong>26 minutes</strong></td>
                                <td>2N</td>
                                <td style="color: #10b981;"><strong>Yes + Fault Tolerant</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 9: AI/HPC Requirements -->
                <h2 id="section-9">
                    <span class="section-number">9</span>
                    AI/HPC Power Requirements
                </h2>

                <h3>9.1 GPU Power Specifications</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>GPU/Accelerator</th>
                                <th>TDP</th>
                                <th>Memory</th>
                                <th>Form Factor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="company-badge nvidia">NVIDIA H100 SXM5</span></td>
                                <td>700W</td>
                                <td>80 GB HBM3</td>
                                <td>SXM Module</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge nvidia">NVIDIA H200 SXM</span></td>
                                <td>700-800W</td>
                                <td>141 GB HBM3e</td>
                                <td>SXM Module</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge nvidia">NVIDIA GB200 NVL72</span></td>
                                <td style="color: #10b981;"><strong>120 kW/rack</strong></td>
                                <td>13 TB HBM3e (cluster)</td>
                                <td>Liquid-cooled rack</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge nvidia">NVIDIA GB300 NVL72</span></td>
                                <td style="color: #10b981;"><strong>140 kW/rack</strong></td>
                                <td>~16 TB HBM3e</td>
                                <td>Liquid-cooled rack</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge nvidia">Vera Rubin NVL144</span></td>
                                <td style="color: #f59e0b;"><strong>600 kW/rack</strong></td>
                                <td>TBD</td>
                                <td>2026 target</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge google">Google TPU v7 Ironwood</span></td>
                                <td>~700-1000W/chip</td>
                                <td>192 GB HBM3e</td>
                                <td>9,216-chip pod (~10 MW)</td>
                            </tr>
                            <tr>
                                <td><span class="company-badge microsoft">Microsoft Maia 200</span></td>
                                <td>~750W</td>
                                <td>216 GB HBM3e</td>
                                <td>Custom Azure silicon</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>9.2 Rack Power Density Evolution</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Workload Type</th>
                                <th>Power per Rack</th>
                                <th>Cooling Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Traditional Enterprise</td>
                                <td>5-10 kW</td>
                                <td>Air cooling</td>
                            </tr>
                            <tr>
                                <td>Hyperscaler (conventional)</td>
                                <td>20-30 kW</td>
                                <td>Air cooling</td>
                            </tr>
                            <tr>
                                <td>AI Training (current)</td>
                                <td>40-60 kW</td>
                                <td>Rear-door heat exchangers</td>
                            </tr>
                            <tr>
                                <td>Large Language Models</td>
                                <td>70-100 kW</td>
                                <td style="color: #f59e0b;"><strong>Direct liquid cooling required</strong></td>
                            </tr>
                            <tr>
                                <td>GB200/GB300 Clusters</td>
                                <td>120-140 kW</td>
                                <td style="color: #ef4444;"><strong>Mandatory liquid cooling</strong></td>
                            </tr>
                            <tr>
                                <td>Next-Gen (2026+)</td>
                                <td>500 kW - 1 MW</td>
                                <td style="color: #ef4444;"><strong>Advanced liquid + 800V DC</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Critical Threshold
                    </div>
                    <p style="margin: 0;">
                        <strong>Direct liquid cooling becomes mandatory above 40 kW per rack.</strong> Air cooling cannot economically remove heat at higher densities. For 100+ kW deployments, busway distribution with 48V or higher DC is required.
                    </p>
                </div>

                <!-- Section 10: Recommendations -->
                <h2 id="section-10">
                    <span class="section-number">10</span>
                    Design Recommendations
                </h2>

                <h3>10.1 Technology Adoption Roadmap</h3>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Timeframe</th>
                                <th>Recommended Technologies</th>
                                <th>Target Density</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: #10b981;"><strong>Near-term (2025-2026)</strong></td>
                                <td>
                                    • 48V DC distribution<br>
                                    • LFP battery UPS<br>
                                    • Zone selective interlocking<br>
                                    • High resistance grounding
                                </td>
                                <td>50-100 kW/rack</td>
                            </tr>
                            <tr>
                                <td style="color: #f59e0b;"><strong>Medium-term (2026-2028)</strong></td>
                                <td>
                                    • 380V DC (Mt Diablo/Diablo 400)<br>
                                    • Grid-interactive UPS<br>
                                    • Distributed micro-UPS (AWS model)<br>
                                    • Active arc flash mitigation
                                </td>
                                <td>100-300 kW/rack</td>
                            </tr>
                            <tr>
                                <td style="color: #8b5cf6;"><strong>Long-term (2028+)</strong></td>
                                <td>
                                    • 800V DC (NVIDIA architecture)<br>
                                    • Solid-state transformers<br>
                                    • Battery-primary backup (no diesel)<br>
                                    • Integrated renewable + storage
                                </td>
                                <td>500 kW - 1 MW/rack</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>10.2 Critical Design Principles</h3>

                <div class="comparison-grid">
                    <div class="comparison-card" style="border-left: 4px solid #10b981;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(16, 185, 129, 0.1);">1</div>
                            <div>
                                <div class="comparison-card-title">Simplicity Over Complexity</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Fewer components = fewer failure modes. AWS's distributed UPS reduced failure points by 20% through simplification.
                        </p>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #06b6d4;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(6, 182, 212, 0.1);">2</div>
                            <div>
                                <div class="comparison-card-title">Minimize Blast Radius</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Design so single failures affect minimum infrastructure. Distributed UPS limits impact to single rack vs entire data hall.
                        </p>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #f59e0b;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(245, 158, 11, 0.1);">3</div>
                            <div>
                                <div class="comparison-card-title">Higher Voltage Distribution</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            48V minimum for new deployments. 380V/800V DC for AI workloads. Leverage EV supply chain for components.
                        </p>
                    </div>
                    <div class="comparison-card" style="border-left: 4px solid #ef4444;">
                        <div class="comparison-card-header">
                            <div class="comparison-card-icon" style="background: rgba(239, 68, 68, 0.1);">4</div>
                            <div>
                                <div class="comparison-card-title">Protection Coordination</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                            Verify selective coordination for all fault scenarios. Implement ZSI or active arc flash mitigation for 1200A+ breakers.
                        </p>
                    </div>
                </div>

                <!-- Login Modal -->
                <div class="aig-login-overlay" id="aigLoginOverlay">
                    <div class="aig-login-box">
                        <button class="aig-login-close" onclick="aigHideLogin()">&times;</button>
                        <h3><i class="fas fa-lock" style="color:#818cf8;margin-right:6px;"></i> Unlock Pro Analysis</h3>
                        <p>Access Operational Health Score, Risk Exposure Analysis, Monte Carlo Simulation, and PDF Export.</p>
                        <input type="email" id="aigLoginEmail" placeholder="Email address" autocomplete="email">
                        <input type="password" id="aigLoginPass" placeholder="Password" autocomplete="current-password">
                        <div class="aig-login-error" id="aigLoginError">Invalid credentials. Please try again.</div>
                        <button class="login-submit" onclick="aigDoLogin()">Sign In</button>
                        <div class="demo-hint">Demo: <code>demo@resistancezero.com</code> / <code>demo2026</code></div>
                        <div style="text-align:center;margin-top:6px;"><a href="https://bagus-dwi-permana.myr.id/membership/resistancezero-pro" target="_blank" rel="noopener" style="font-size:0.62rem;color:#64748b;text-decoration:none;">Unlock Pro Mode &rarr;</a></div>
                    </div>
                </div>

                <!-- References -->
                <div class="references-section">
                    <h3 class="references-title">References & Sources</h3>
                    <div class="references-list">
                        <div class="reference-item">
                            <span class="reference-number">[1]</span>
                            <div>
                                <a href="https://press.aboutamazon.com/2024/12/aws-announces-new-data-center-components" target="_blank">AWS Announces New Data Center Components (Dec 2024)</a>
                                <div class="reference-source">Amazon Press Release — Distributed UPS, Power Shelf</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[2]</span>
                            <div>
                                <a href="https://cloud.google.com/blog/topics/systems/100-million-li-ion-cells-in-google-data-centers" target="_blank">100 Million Li-ion Cells in Google Data Centers</a>
                                <div class="reference-source">Google Cloud Blog — Battery technology evolution</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[3]</span>
                            <div>
                                <a href="https://techcommunity.microsoft.com/blog/azureinfrastructureblog/mt-diablo---disaggregated-power" target="_blank">Mt Diablo - Disaggregated Power Architecture</a>
                                <div class="reference-source">Microsoft Azure Blog — 400V DC specification</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[4]</span>
                            <div>
                                <a href="https://developer.nvidia.com/blog/nvidia-800-v-hvdc-architecture" target="_blank">NVIDIA 800V HVDC Architecture</a>
                                <div class="reference-source">NVIDIA Developer Blog — Next-gen power delivery</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[5]</span>
                            <div>
                                <a href="https://x.ai/colossus" target="_blank">xAI Colossus Supercomputer</a>
                                <div class="reference-source">xAI Official — 2 GW facility specifications</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[6]</span>
                            <div>
                                <a href="https://uptimeinstitute.com/resources/research-and-reports/annual-outage-analysis-2024" target="_blank">Annual Outage Analysis 2024</a>
                                <div class="reference-source">Uptime Institute — Power outage statistics</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[7]</span>
                            <div>
                                <a href="https://www.opencompute.org/documents/ocp-specification-diablo-400" target="_blank">OCP Diablo 400 Specification v0.5.2</a>
                                <div class="reference-source">Open Compute Project — Power distribution standard</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[8]</span>
                            <div>
                                <a href="https://standards.ieee.org/standard/1584-2018.html" target="_blank">IEEE 1584-2018 Arc Flash Calculations</a>
                                <div class="reference-source">IEEE Standards — Arc flash hazard analysis</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[9]</span>
                            <div>
                                <a href="https://www.anthropic.com/news/expanding-our-use-of-google-cloud-tpus-and-services" target="_blank">Expanding Our Use of Google Cloud TPUs and Services</a>
                                <div class="reference-source">Anthropic News — Multi-cloud strategy, 1M TPU access</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[10]</span>
                            <div>
                                <a href="https://www.datacenterfrontier.com/machine-learning/article/55335703/inside-anthropics-multi-cloud-ai-factory-how-aws-trainium-and-google-tpus-shape-its-next-phase" target="_blank">Inside Anthropic's Multi-Cloud AI Factory</a>
                                <div class="reference-source">Data Center Frontier — AWS Trainium2 and Google TPU infrastructure</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-number">[11]</span>
                            <div>
                                <a href="https://aws.amazon.com/ai/machine-learning/trainium/" target="_blank">AWS Trainium - AI Accelerator</a>
                                <div class="reference-source">AWS Official — Trainium2 specifications, Project Rainier</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Download Section -->
                <div style="margin-top: 3rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                    <a href="article-13-paper.pdf" class="download-pdf-btn" download style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%); color: white; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Download PDF Technical Paper
                    </a>
                    <button onclick="window.print()" style="display: inline-flex; align-items: center; gap: 0.5rem; background: transparent; border: 2px solid #1e3a5f; color: #1e3a5f; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 6 2 18 2 18 9"/>
                            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                            <rect x="6" y="14" width="12" height="8"/>
                        </svg>
                        Print Paper
                    </button>
                </div>

                <!-- Newsletter Signup -->
                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new articles on data center operations and engineering excellence are published.</p>
                    <form class="newsletter-form" onsubmit="return subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
                </div>

                <!-- Author Bio -->
                <div class="author-bio">
                    <div class="author-bio-image">
                        <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana">
                    </div>
                    <div class="author-bio-content">
                        <h4>Bagus Dwi Permana</h4>
                        <p class="author-bio-title">Engineering Operations Manager | Ahli K3 Listrik</p>
                        <p>12+ years professional experience in critical infrastructure and operations. CDFOM certified. Transforming operations through systematic excellence and safety-first engineering.</p>
                        <div class="author-bio-links">
                            <a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </a>
                            <a href="https://github.com/baguspermana7-cpu" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                GitHub
                            </a>
                            <a href="mailto:baguspermana7@gmail.com">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="related-articles">
                    <h3>Continue Reading</h3>
                    <div class="related-grid">
                        <a href="article-12.html" class="related-card">
                            <div class="related-card-number">12</div>
                            <div class="related-card-content">
                                <h4>The Uncomfortable Truth: How AI Data Centers Are Secretly Funding Your Grid's Future</h4>
                                <p>Economic impact of AI infrastructure</p>
                            </div>
                        </a>
                        <a href="article-14.html" class="related-card">
                            <div class="related-card-number">14</div>
                            <div class="related-card-content">
                                <h4>The $64 Billion Rebellion: Why Communities Worldwide Are Fighting Data Centers</h4>
                                <p>Community resistance to data center expansion</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Article Navigation -->
                <div class="article-nav">
                    <a href="article-12.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                        Previous Article
                    </a>
                    <a href="article-14.html">
                        Next Article
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>

            </div>
        </div>
    </article>
    </main>

    <!-- Footer -->
    <footer class="footer footer-enhanced">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <p class="footer-tagline-main">BUILT FOR MISSION CRITICAL INFRASTRUCTURE<br>MANAGEMENT // 2026</p>
                    <p class="footer-tagline-sub">ALL OPERATIONAL DATASETS PRESERVED.</p>
                    <p class="footer-copyright">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p>
                </div>
                <div class="footer-nav">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home Dashboard</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="index.html#case-studies">Case Studies</a></li>
                        <li><a href="datacenter-solutions.html">DC Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4 class="footer-heading">CONNECT</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank" rel="noopener">LinkedIn Profile</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="mailto:baguspermana7@gmail.com">Direct Contact</a></li>
                        <li><a href="https://github.com/baguspermana7-cpu" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Availability Calculator
        function calculateAvailability() {
            const mtbf = parseFloat(document.getElementById('mtbf').value) || 50000;
            const mttr = parseFloat(document.getElementById('mttr').value) || 4;
            const redundancy = document.getElementById('redundancy').value;
            const components = parseInt(document.getElementById('components').value) || 4;

            // Single component availability
            const singleA = mtbf / (mtbf + mttr);

            let systemA;
            switch(redundancy) {
                case 'N':
                    // Series - all must work
                    systemA = Math.pow(singleA, components);
                    break;
                case 'N+1':
                    // N+1: need (n-1) of n components
                    systemA = 1 - Math.pow(1 - singleA, 2);
                    break;
                case '2N':
                    // 2N: two parallel paths
                    systemA = 1 - Math.pow(1 - Math.pow(singleA, components/2), 2);
                    break;
                case '2N+1':
                    // 2N+1: two parallel paths plus spare
                    const pathA = 1 - Math.pow(1 - singleA, 2);
                    systemA = 1 - Math.pow(1 - pathA, 2);
                    break;
                default:
                    systemA = singleA;
            }

            // Calculate metrics
            const availabilityPercent = (systemA * 100).toFixed(4);
            const downtimeMinutes = Math.round(525600 * (1 - systemA));
            const nines = Math.min(9, Math.floor(-Math.log10(1 - systemA)));

            // Determine tier
            let tier = 'Tier I';
            if (systemA >= 0.99995) tier = 'Tier IV';
            else if (systemA >= 0.99982) tier = 'Tier III';
            else if (systemA >= 0.99741) tier = 'Tier II';

            // Format downtime
            let downtimeStr;
            if (downtimeMinutes < 60) {
                downtimeStr = downtimeMinutes + ' min';
            } else if (downtimeMinutes < 1440) {
                downtimeStr = (downtimeMinutes / 60).toFixed(1) + ' hrs';
            } else {
                downtimeStr = (downtimeMinutes / 1440).toFixed(1) + ' days';
            }

            // Update display
            document.getElementById('result-availability').textContent = availabilityPercent + '%';
            document.getElementById('result-downtime').textContent = downtimeStr;
            document.getElementById('result-tier').textContent = tier;
            document.getElementById('result-nines').textContent = nines;
        }

        // Add event listeners
        document.getElementById('mtbf').addEventListener('input', calculateAvailability);
        document.getElementById('mttr').addEventListener('input', calculateAvailability);
        document.getElementById('redundancy').addEventListener('change', calculateAvailability);
        document.getElementById('components').addEventListener('input', calculateAvailability);

        // Initial calculation
        calculateAvailability();
    </script>
<!-- Share Buttons -->
<div class="share-buttons">
    <button class="share-btn linkedin" data-tooltip="Share on LinkedIn" onclick="shareLinkedIn()" aria-label="Share on LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
    </button>
    <button class="share-btn twitter" data-tooltip="Share on X" onclick="shareTwitter()" aria-label="Share on X">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
    </button>
    <button class="share-btn whatsapp" data-tooltip="Share on WhatsApp" onclick="shareWhatsApp()" aria-label="Share on WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
    </button>
    <button class="share-btn copy" data-tooltip="Copy link" onclick="copyLink()" aria-label="Copy article link">
        <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
        <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" style="display:none"><polyline points="20 6 9 17 4 12"/></svg>
    </button>
</div>
<script>
function shareLinkedIn(){window.open('https://www.linkedin.com/sharing/share-offsite/?url='+encodeURIComponent(window.location.href),'_blank')}
function shareTwitter(){window.open('https://twitter.com/intent/tweet?url='+encodeURIComponent(window.location.href)+'&text='+encodeURIComponent(document.title),'_blank')}
function shareWhatsApp(){window.open('https://wa.me/?text='+encodeURIComponent(document.title+' '+window.location.href),'_blank')}
function copyLink(){var b=document.querySelector('.share-btn.copy'),c=b.querySelector('.copy-icon'),k=b.querySelector('.check-icon');navigator.clipboard.writeText(window.location.href).then(function(){b.classList.add('copied');c.style.display='none';k.style.display='block';b.setAttribute('data-tooltip','Copied!');setTimeout(function(){b.classList.remove('copied');c.style.display='block';k.style.display='none';b.setAttribute('data-tooltip','Copy link')},2000)})}
function subscribeNewsletter(e){e.preventDefault();var email=e.target.querySelector('input[type="email"]').value.trim();if(!email)return false;var subs=JSON.parse(localStorage.getItem('rz_newsletter_subscribers')||'[]');if(subs.find(function(s){return s.email===email})){alert('Already subscribed!');return false}subs.push({email:email,date:new Date().toISOString(),source:location.pathname.split('/').pop(),status:'active'});localStorage.setItem('rz_newsletter_subscribers',JSON.stringify(subs));e.target.innerHTML='<p style="color:#fff;font-weight:600;">✓ Subscribed successfully!</p>';return false}
</script>
<script>
/* ============================================================
   Article-13 Pro Mode IIFE — AI in Power Grid Management
   Prefix: aig- | Theme: Indigo #6366f1
   ============================================================ */
(function() {
    'use strict';

    var aigProMode = false;

    // ===================== DATA TABLES =====================
    var WORKLOAD_DATA = {
        'AI/HPC High-Density':   { powerDensity: 50, coolingFactor: 1.45, failMult: 1.35, regWeight: 1.3, cerBase: 1.65, strandedBase: 25 },
        'Conventional Enterprise':{ powerDensity: 8,  coolingFactor: 1.15, failMult: 1.00, regWeight: 1.0, cerBase: 1.20, strandedBase: 15 },
        'Hybrid Mixed':          { powerDensity: 25, coolingFactor: 1.28, failMult: 1.15, regWeight: 1.1, cerBase: 1.38, strandedBase: 20 },
        'Edge Computing':        { powerDensity: 12, coolingFactor: 1.10, failMult: 1.20, regWeight: 0.9, cerBase: 1.12, strandedBase: 10 }
    };

    var TIER_DATA = {
        'I':   { avail: 99.671, mtbfProxy: 8760,  maxDownMin: 1729, redundancy: 'N',    sleFactor: 1.0  },
        'II':  { avail: 99.741, mtbfProxy: 17520, maxDownMin: 1361, redundancy: 'N+1',  sleFactor: 0.85 },
        'III': { avail: 99.982, mtbfProxy: 35040, maxDownMin: 95,   redundancy: 'N+1 Dual', sleFactor: 0.65 },
        'IV':  { avail: 99.995, mtbfProxy: 52560, maxDownMin: 26,   redundancy: '2N+1', sleFactor: 0.45 }
    };

    var REG_CLASS_DATA = {
        'High-Risk AI':     { weight: 1.50, complianceGaps: 8, logRequirement: 95, auditFreq: 'Quarterly' },
        'Limited-Risk AI':  { weight: 1.15, complianceGaps: 4, logRequirement: 75, auditFreq: 'Semi-Annual' },
        'Minimal-Risk AI':  { weight: 0.85, complianceGaps: 2, logRequirement: 50, auditFreq: 'Annual' },
        'General Purpose':  { weight: 1.00, complianceGaps: 3, logRequirement: 65, auditFreq: 'Semi-Annual' }
    };

    // ===================== HELPERS =====================
    function $(id) { return document.getElementById(id); }

    function fmt(v) {
        if (Math.abs(v) >= 1e6) return '$' + (v / 1e6).toFixed(2) + 'M';
        if (Math.abs(v) >= 1e3) return '$' + (v / 1e3).toFixed(0) + 'K';
        return '$' + Math.round(v);
    }

    function pctFmt(v) { return v.toFixed(1) + '%'; }

    function clamp(v, lo, hi) { return Math.max(lo, Math.min(hi, v)); }

    function boxMuller() {
        var u1 = 0, u2 = 0;
        while (u1 === 0) u1 = Math.random();
        while (u2 === 0) u2 = Math.random();
        return Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2.0 * Math.PI * u2);
    }

    function percentile(arr, p) { return arr[Math.floor(arr.length * p)]; }

    function barClass(v) { return v >= 80 ? 'risk-low' : v >= 50 ? 'risk-med' : 'risk-high'; }

    // ===================== READ INPUTS =====================
    function getInputs() {
        var workloadKey = $('aigWorkload').value;
        var tierKey = $('aigTier').value;
        var gridScore = clamp(parseFloat($('aigGridScore').value) || 7, 1, 10);
        var maturity = clamp(parseFloat($('aigMaturity').value) || 3, 1, 5);
        var regClassKey = $('aigRegClass').value;
        var fiduciary = clamp(parseFloat($('aigFiduciary').value) || 5000000, 100000, 50000000);

        var wl = WORKLOAD_DATA[workloadKey] || WORKLOAD_DATA['Conventional Enterprise'];
        var tier = TIER_DATA[tierKey] || TIER_DATA['III'];
        var reg = REG_CLASS_DATA[regClassKey] || REG_CLASS_DATA['Limited-Risk AI'];

        return {
            workloadKey: workloadKey,
            tierKey: tierKey,
            gridScore: gridScore,
            maturity: maturity,
            regClassKey: regClassKey,
            fiduciary: fiduciary,
            wl: wl,
            tier: tier,
            reg: reg
        };
    }

    // ===================== PANEL 1: OPERATIONAL INTELLIGENCE =====================
    function calcOperational(inp) {
        // P99 Effective Availability — tier base adjusted by grid reliability and workload fail multiplier
        var aroMod = 1 + (10 - inp.gridScore) * 0.15;
        var failAdj = inp.wl.failMult * aroMod;
        var baseDown = inp.tier.maxDownMin;
        var adjDown = baseDown * failAdj * (1 - (inp.maturity - 1) * 0.08);
        adjDown = Math.max(adjDown, 1);
        var p99Avail = (1 - adjDown / 525600) * 100;
        p99Avail = Math.min(p99Avail, 99.9999);

        // CER — Cooling Efficiency Ratio
        var cer = inp.wl.cerBase * (1 + (10 - inp.gridScore) * 0.02) * (1 - (inp.maturity - 1) * 0.04);
        cer = Math.max(cer, 0.8);

        // Stranded Capacity %
        var stranded = inp.wl.strandedBase * (1 + (10 - inp.gridScore) * 0.03) * (1 - (inp.maturity - 1) * 0.06);
        stranded = clamp(stranded, 2, 60);

        // MTTD — Mean Time to Detect (minutes)
        var mttd = 15 / inp.maturity * inp.wl.failMult * (1 + (10 - inp.gridScore) * 0.05);
        mttd = Math.max(mttd, 0.5);

        // Automation Ratio %
        var autoRatio = clamp(inp.maturity * 20 + (inp.gridScore - 5) * 3, 10, 98);

        // Log Integrity Score (Art.13 compliance)
        var logInteg = clamp(Math.round(inp.maturity * 18 + inp.gridScore * 2 - inp.reg.complianceGaps * 2), 10, 100);

        return {
            p99Avail: p99Avail,
            cer: cer,
            stranded: stranded,
            mttd: mttd,
            autoRatio: autoRatio,
            logInteg: logInteg,
            aroMod: aroMod,
            failAdj: failAdj,
            adjDown: adjDown
        };
    }

    // ===================== PANEL 2: RISK & FINANCIAL EXPOSURE =====================
    function calcRisk(inp, ops) {
        // SLE — Single Loss Event (based on fiduciary and tier)
        var sle = inp.fiduciary * inp.tier.sleFactor * inp.wl.failMult;

        // ARO — Annual Rate of Occurrence
        var aro = (ops.adjDown / 525600) * 365 * ops.aroMod * inp.reg.weight;

        // ALE = SLE x ARO
        var ale = sle * aro;

        // REI = Risk Exposure Index (normalised 0-1)
        var rei = clamp(ale / inp.fiduciary, 0, 1);

        // OPEX Leakage Index — % waste
        var opexLeak = clamp((100 - ops.autoRatio) * 0.15 + (ops.stranded / 100) * 12 + (5 - inp.maturity) * 1.5, 1, 35);

        // Technical Debt Hemorrhage $/month
        var techDebt = Math.round((5 - inp.maturity) * 12000 * inp.wl.failMult + (100 - ops.logInteg) * 200 * inp.reg.weight);
        techDebt = Math.max(techDebt, 500);

        // Financial Exposure Score (0-100)
        var finExpose = clamp(Math.round(rei * 50 + opexLeak * 1.2 + (100 - ops.logInteg) * 0.2), 5, 100);

        // COI — Cost of Inaction (annual)
        var hourlyLoss = inp.fiduciary * 0.002;
        var failProb = aro * inp.wl.failMult;
        var coi = hourlyLoss * (ops.adjDown / 60) * failProb * inp.reg.weight;
        coi = Math.max(coi, 1000);

        return {
            sle: sle,
            aro: aro,
            ale: ale,
            rei: rei,
            opexLeak: opexLeak,
            techDebt: techDebt,
            finExpose: finExpose,
            coi: coi
        };
    }

    // ===================== PANEL 3: OPERATIONAL HEALTH SCORE =====================
    function calcHealth(inp, ops, risk) {
        // Sub-dimensions
        var techRel = clamp(Math.round(ops.p99Avail - 99 + 20 + inp.maturity * 8 - ops.cer * 5), 10, 100);
        var finRes = clamp(Math.round(100 - risk.finExpose + inp.maturity * 3), 10, 100);
        var govInt = clamp(Math.round(inp.maturity * 20 + (ops.logInteg - 50) * 0.3), 10, 100);
        var procMat = clamp(Math.round(inp.maturity * 18 + ops.autoRatio * 0.15), 10, 100);

        // Weighted composite
        var overall = Math.round(techRel * 0.35 + finRes * 0.25 + govInt * 0.20 + procMat * 0.20);
        overall = clamp(overall, 5, 100);

        var tier = overall >= 90 ? 'A+' : overall >= 80 ? 'A' : overall >= 70 ? 'B' : overall >= 55 ? 'C' : overall >= 40 ? 'D' : 'F';
        var tierColor = overall >= 80 ? '#10b981' : overall >= 55 ? '#818cf8' : overall >= 40 ? '#f59e0b' : '#ef4444';

        return {
            techRel: techRel,
            finRes: finRes,
            govInt: govInt,
            procMat: procMat,
            overall: overall,
            tier: tier,
            tierColor: tierColor
        };
    }

    // ===================== MONTE CARLO 10K =====================
    function runMonteCarlo(inp) {
        var N = 10000;
        var results = [];
        var ops0 = calcOperational(inp);
        var risk0 = calcRisk(inp, ops0);

        for (var i = 0; i < N; i++) {
            // Perturb inputs with Box-Muller
            var gridVar = clamp(inp.gridScore + boxMuller() * 1.5, 1, 10);
            var matVar = clamp(inp.maturity + boxMuller() * 0.8, 1, 5);
            var fidVar = inp.fiduciary * (1 + boxMuller() * 0.2);
            fidVar = Math.max(fidVar, 100000);

            var varInp = {
                workloadKey: inp.workloadKey,
                tierKey: inp.tierKey,
                gridScore: gridVar,
                maturity: matVar,
                regClassKey: inp.regClassKey,
                fiduciary: fidVar,
                wl: inp.wl,
                tier: inp.tier,
                reg: inp.reg
            };
            var varOps = calcOperational(varInp);
            var varRisk = calcRisk(varInp, varOps);
            results.push(varRisk.ale);
        }

        results.sort(function(a, b) { return a - b; });

        var sum = 0, sumSq = 0;
        for (var j = 0; j < N; j++) { sum += results[j]; sumSq += results[j] * results[j]; }
        var mean = sum / N;
        var std = Math.sqrt(sumSq / N - mean * mean);

        // CVaR-95: average of worst 5%
        var tail5 = Math.floor(N * 0.95);
        var tailSum = 0, tailCount = 0;
        for (var k = tail5; k < N; k++) { tailSum += results[k]; tailCount++; }
        var cvar95 = tailCount > 0 ? tailSum / tailCount : results[N - 1];

        // SLA breach: P(ALE > fiduciary * 0.3)
        var slaThresh = inp.fiduciary * 0.3;
        var breachCount = 0;
        for (var m = 0; m < N; m++) { if (results[m] > slaThresh) breachCount++; }

        return {
            results: results,
            mean: mean,
            std: std,
            p5: percentile(results, 0.05),
            p25: percentile(results, 0.25),
            p50: percentile(results, 0.50),
            p75: percentile(results, 0.75),
            p95: percentile(results, 0.95),
            cvar95: cvar95,
            slaBreach: (breachCount / N) * 100
        };
    }

    // ===================== SENSITIVITY ANALYSIS (5 factors) =====================
    function runSensitivity(inp) {
        var baseOps = calcOperational(inp);
        var baseRisk = calcRisk(inp, baseOps);
        var baseALE = baseRisk.ale;

        var factors = [
            { name: 'Grid Reliability', key: 'gridScore', delta: 0.10 },
            { name: 'Process Maturity', key: 'maturity', delta: 0.10 },
            { name: 'Fiduciary Tolerance', key: 'fiduciary', delta: 0.10 },
            { name: 'Power Density (Workload)', key: '_powerDensity', delta: 0.10 },
            { name: 'Regulatory Weight', key: '_regWeight', delta: 0.10 }
        ];

        var results = [];
        for (var i = 0; i < factors.length; i++) {
            var f = factors[i];
            var upInp = JSON.parse(JSON.stringify(inp));
            var dnInp = JSON.parse(JSON.stringify(inp));
            // Re-attach objects (JSON loses prototype)
            upInp.wl = JSON.parse(JSON.stringify(inp.wl));
            upInp.tier = JSON.parse(JSON.stringify(inp.tier));
            upInp.reg = JSON.parse(JSON.stringify(inp.reg));
            dnInp.wl = JSON.parse(JSON.stringify(inp.wl));
            dnInp.tier = JSON.parse(JSON.stringify(inp.tier));
            dnInp.reg = JSON.parse(JSON.stringify(inp.reg));

            if (f.key === '_powerDensity') {
                upInp.wl.failMult = inp.wl.failMult * (1 + f.delta);
                upInp.wl.cerBase = inp.wl.cerBase * (1 + f.delta * 0.5);
                dnInp.wl.failMult = inp.wl.failMult * (1 - f.delta);
                dnInp.wl.cerBase = inp.wl.cerBase * (1 - f.delta * 0.5);
            } else if (f.key === '_regWeight') {
                upInp.reg.weight = inp.reg.weight * (1 + f.delta);
                dnInp.reg.weight = inp.reg.weight * (1 - f.delta);
            } else {
                upInp[f.key] = inp[f.key] * (1 + f.delta);
                dnInp[f.key] = inp[f.key] * (1 - f.delta);
            }

            var upOps = calcOperational(upInp);
            var dnOps = calcOperational(dnInp);
            var upALE = calcRisk(upInp, upOps).ale;
            var dnALE = calcRisk(dnInp, dnOps).ale;

            results.push({
                name: f.name,
                upVal: upALE,
                downVal: dnALE,
                absSwing: Math.abs(upALE - dnALE),
                impact: baseALE > 0 ? ((Math.max(upALE, dnALE) - baseALE) / baseALE * 100) : 0
            });
        }
        results.sort(function(a, b) { return b.absSwing - a.absSwing; });
        return results;
    }

    // ===================== NARRATIVE GENERATOR =====================
    function generateNarrative(inp, ops, risk, health, mc, sens) {
        var para = [];

        // P1: Infrastructure Posture
        var regLabel = inp.regClassKey;
        para.push('<p><strong>Infrastructure Posture:</strong> This ' + inp.workloadKey + ' deployment operates at <strong>Tier ' + inp.tierKey + ' (' + inp.tier.redundancy + ')</strong> with a Regional Grid Reliability score of ' + inp.gridScore + '/10 and Process Maturity Level ' + inp.maturity + '/5. The overall Operational Health Score is <strong>' + health.overall + '/100 (Grade ' + health.tier + ')</strong>. ' + (health.overall >= 80 ? 'The facility demonstrates strong operational posture suitable for mission-critical AI workloads.' : health.overall >= 55 ? 'Operational performance is adequate but leaves material exposure for high-density or regulated workloads.' : 'Significant operational gaps exist that require immediate remediation before scaling AI/HPC capacity.') + ' The Cooling Efficiency Ratio of ' + ops.cer.toFixed(2) + ' ' + (ops.cer > 1.4 ? 'indicates cooling infrastructure is consuming excess energy relative to IT load.' : 'is within acceptable range for this workload profile.') + '</p>');

        // P2: Financial Risk Exposure
        para.push('<p><strong>Financial Risk Exposure:</strong> Annual Loss Expectancy stands at <strong>' + fmt(risk.ale) + '</strong> against a fiduciary tolerance of ' + fmt(inp.fiduciary) + ', yielding a Risk Exposure Index of ' + risk.rei.toFixed(3) + '. OPEX leakage at ' + risk.opexLeak.toFixed(1) + '% translates to avoidable cost hemorrhage, while technical debt accumulates at <strong>' + fmt(risk.techDebt) + '/month</strong>. ' + (risk.finExpose >= 70 ? 'The Financial Exposure Score of ' + risk.finExpose + '/100 is in the danger zone; executive intervention is recommended.' : risk.finExpose >= 40 ? 'Financial exposure is moderate and manageable with targeted improvement.' : 'Financial exposure is well-controlled.') + ' The Cost of Inaction is estimated at <strong>' + fmt(risk.coi) + '/year</strong> under the ' + regLabel + ' regulatory classification.</p>');

        // P3: Monte Carlo & Risk Quantification
        para.push('<p><strong>Stochastic Risk Quantification:</strong> Monte Carlo simulation (10,000 iterations, Box-Muller method) places the median ALE at <strong>' + fmt(mc.p50) + '</strong> with a 90% confidence interval of [' + fmt(mc.p5) + ' \u2013 ' + fmt(mc.p95) + ']. The CVaR-95 (expected tail loss) of <strong>' + fmt(mc.cvar95) + '</strong> represents the board-level catastrophic exposure figure. SLA breach probability stands at ' + mc.slaBreach.toFixed(1) + '%. The primary cost driver is <strong>' + sens[0].name + '</strong> (\u00B1' + fmt(sens[0].absSwing) + ' swing), followed by <strong>' + sens[1].name + '</strong>. ' + (mc.slaBreach > 20 ? 'SLA breach probability exceeds 20% \u2014 mitigation is urgent.' : mc.slaBreach > 10 ? 'SLA breach probability warrants attention in the next review cycle.' : 'SLA breach probability is within acceptable bounds.') + '</p>');

        // P4: Recommendations
        var topSens = sens[0].name;
        var rec1 = topSens === 'Grid Reliability' ? 'Invest in on-site generation, dual-feed utility connections, or battery energy storage systems to reduce grid dependency.' :
                   topSens === 'Process Maturity' ? 'Accelerate process automation, implement AIOps platforms, and establish continuous verification protocols.' :
                   topSens === 'Fiduciary Tolerance' ? 'Review insurance coverage, establish contingency reserves at CVaR-95 level, and implement financial hedging strategies.' :
                   topSens === 'Power Density (Workload)' ? 'Deploy liquid cooling, optimize rack density distribution, and implement dynamic power capping for AI/HPC clusters.' :
                   'Conduct proactive regulatory gap analysis, implement Article 13 logging standards, and establish compliance monitoring dashboards.';

        para.push('<p><strong>Priority Recommendations:</strong> (1) ' + rec1 + ' (2) ' + (ops.logInteg < 80 ? 'Close EU AI Act Article 13 compliance gaps \u2014 current Log Integrity Score of ' + ops.logInteg + '/100 falls below the ' + inp.reg.logRequirement + ' threshold required for ' + regLabel + ' classification.' : 'Maintain current compliance posture and prepare for upcoming audit cycle (' + inp.reg.auditFreq + ').') + ' (3) ' + (ops.stranded > 20 ? 'Address ' + ops.stranded.toFixed(0) + '% stranded capacity through workload consolidation or rack-level power management.' : 'Continue capacity optimization \u2014 current ' + ops.stranded.toFixed(0) + '% stranded rate is within best-practice range.') + ' Based on Monte Carlo analysis, implementing these recommendations could reduce the P95 ALE from ' + fmt(mc.p95) + ' to an estimated ' + fmt(mc.p50 * 0.7) + '.</p>');

        return para.join('');
    }

    // ===================== CANVAS: HISTOGRAM =====================
    function drawHistogram(mcData) {
        var canvas = $('aigHistogramCanvas');
        if (!canvas) return;
        var ctx = canvas.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        var W = rect.width, H = rect.height;
        var pad = { top: 30, right: 30, bottom: 40, left: 60 };
        var cW = W - pad.left - pad.right;
        var cH = H - pad.top - pad.bottom;

        ctx.clearRect(0, 0, W, H);

        var results = mcData.results;
        var minV = results[0], maxV = results[results.length - 1];
        var range = maxV - minV || 1;
        var numBins = 40, bins = new Array(numBins).fill(0);
        for (var i = 0; i < results.length; i++) {
            var bi = Math.min(numBins - 1, Math.floor((results[i] - minV) / range * numBins));
            bins[bi]++;
        }
        var maxBin = Math.max.apply(null, bins);
        var barW = cW / numBins - 0.5;

        // Draw bars
        for (var i = 0; i < numBins; i++) {
            var barH = maxBin > 0 ? (bins[i] / maxBin) * cH : 0;
            var x = pad.left + i * (cW / numBins);
            var y = pad.top + cH - barH;
            var midVal = minV + (i + 0.5) * range / numBins;
            ctx.fillStyle = midVal <= mcData.p5 ? '#10b981' : midVal <= mcData.p50 ? '#6366f1' : midVal <= mcData.p95 ? '#f59e0b' : '#ef4444';
            ctx.fillRect(x, y, Math.max(barW, 0.5), barH);
        }

        // Axes
        ctx.strokeStyle = 'rgba(148,163,184,0.3)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(pad.left, pad.top);
        ctx.lineTo(pad.left, pad.top + cH);
        ctx.lineTo(pad.left + cW, pad.top + cH);
        ctx.stroke();

        // X labels
        ctx.font = '10px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'center';
        for (var i = 0; i <= 5; i++) {
            var val = minV + (range / 5) * i;
            var x = pad.left + (cW / 5) * i;
            ctx.fillText(fmt(val), x, pad.top + cH + 15);
        }
        ctx.fillText('Annual Loss Expectancy', W / 2, H - 5);

        // Y label
        ctx.save();
        ctx.translate(15, H / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.textAlign = 'center';
        ctx.fillText('Frequency', 0, 0);
        ctx.restore();

        // Percentile lines
        var pLines = [
            { v: mcData.p5, l: 'P5 ' + fmt(mcData.p5), c: '#10b981' },
            { v: mcData.p50, l: 'P50 ' + fmt(mcData.p50), c: '#6366f1' },
            { v: mcData.p95, l: 'P95 ' + fmt(mcData.p95), c: '#ef4444' }
        ];
        for (var p = 0; p < pLines.length; p++) {
            var px = pad.left + ((pLines[p].v - minV) / range) * cW;
            ctx.beginPath();
            ctx.setLineDash([4, 3]);
            ctx.strokeStyle = pLines[p].c;
            ctx.lineWidth = 1.5;
            ctx.moveTo(px, pad.top);
            ctx.lineTo(px, pad.top + cH);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.fillStyle = pLines[p].c;
            ctx.font = 'bold 10px Inter, system-ui, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(pLines[p].l, px, pad.top - 8);
        }

        // Title
        ctx.font = 'bold 12px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#e2e8f0';
        ctx.textAlign = 'left';
        ctx.fillText('Monte Carlo Distribution (n=10,000)', pad.left, 15);
    }

    // ===================== CANVAS: TORNADO =====================
    function drawTornado(sensitivity, baseALE) {
        var canvas = $('aigTornadoCanvas');
        if (!canvas) return;
        var ctx = canvas.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        var W = rect.width, H = rect.height;

        ctx.clearRect(0, 0, W, H);

        var maxSwing = sensitivity[0] ? sensitivity[0].absSwing : 1;
        var barH = 28, gap = 8, startY = 35;
        var centerX = W * 0.55, maxBarW = W * 0.30;

        // Title
        ctx.font = 'bold 12px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#e2e8f0';
        ctx.textAlign = 'center';
        ctx.fillText('Sensitivity Tornado Chart (\u00B110% perturbation)', W / 2, 18);

        // Center line
        ctx.beginPath();
        ctx.strokeStyle = 'rgba(148,163,184,0.4)';
        ctx.lineWidth = 1;
        ctx.setLineDash([3, 3]);
        ctx.moveTo(centerX, startY - 5);
        ctx.lineTo(centerX, startY + sensitivity.length * (barH + gap));
        ctx.stroke();
        ctx.setLineDash([]);

        // Baseline label
        ctx.font = '9px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'center';
        ctx.fillText('Baseline: ' + fmt(baseALE), centerX, startY - 8);

        for (var i = 0; i < sensitivity.length; i++) {
            var d = sensitivity[i];
            var y = startY + i * (barH + gap);
            var upW = maxSwing > 0 ? (((d.upVal - baseALE) / maxSwing) * maxBarW) : 0;
            var dnW = maxSwing > 0 ? (((baseALE - d.downVal) / maxSwing) * maxBarW) : 0;

            // Right bar (increase)
            if (upW > 0) {
                ctx.fillStyle = '#ef4444';
                ctx.beginPath();
                ctx.moveTo(centerX, y);
                ctx.lineTo(centerX + upW, y);
                ctx.lineTo(centerX + upW, y + barH);
                ctx.lineTo(centerX, y + barH);
                ctx.closePath();
                ctx.fill();
                ctx.fillStyle = '#fca5a5';
                ctx.font = 'bold 9px Inter, system-ui, sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('+' + fmt(d.upVal - baseALE), centerX + upW + 4, y + barH / 2 + 4);
            }

            // Left bar (decrease)
            if (dnW > 0) {
                ctx.fillStyle = '#6366f1';
                ctx.beginPath();
                ctx.moveTo(centerX, y);
                ctx.lineTo(centerX - dnW, y);
                ctx.lineTo(centerX - dnW, y + barH);
                ctx.lineTo(centerX, y + barH);
                ctx.closePath();
                ctx.fill();
                ctx.fillStyle = '#a5b4fc';
                ctx.font = 'bold 9px Inter, system-ui, sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText('-' + fmt(baseALE - d.downVal), centerX - dnW - 4, y + barH / 2 + 4);
            }

            // Label
            ctx.fillStyle = '#e2e8f0';
            ctx.font = '10px Inter, system-ui, sans-serif';
            ctx.textAlign = 'right';
            ctx.fillText(d.name, centerX - maxBarW - 12, y + barH / 2 + 4);
        }
    }

    // ===================== GAUGE RENDERER =====================
    function drawGauge(score, tier, tierColor) {
        var arc = $('aigGaugeArc');
        var txt = $('aigGaugeText');
        var tierEl = $('aigHealthTier');
        if (!arc || !txt || !tierEl) return;

        var maxLen = 283; // Semicircle circumference
        var dashLen = (score / 100) * maxLen;
        arc.setAttribute('stroke-dasharray', dashLen + ' ' + maxLen);
        arc.setAttribute('stroke', tierColor);
        txt.textContent = score;
        tierEl.textContent = 'Grade ' + tier;
        tierEl.style.color = tierColor;
    }

    // ===================== MAIN UPDATE =====================
    function updateAigProPanels() {
        var inp = getInputs();
        var ops = calcOperational(inp);
        var risk = calcRisk(inp, ops);
        var health = calcHealth(inp, ops, risk);
        var mc = runMonteCarlo(inp);
        var sens = runSensitivity(inp);

        // Panel 1: Operational Intelligence
        $('aigP99Avail').textContent = ops.p99Avail.toFixed(3) + '%';
        $('aigCER').textContent = ops.cer.toFixed(2);
        $('aigStranded').textContent = ops.stranded.toFixed(0) + '%';
        $('aigMTTD').textContent = ops.mttd.toFixed(1) + ' min';
        $('aigAutoRatio').textContent = ops.autoRatio.toFixed(0) + '%';
        $('aigLogInteg').textContent = ops.logInteg + '/100';

        // Panel 2: Risk & Financial Exposure
        $('aigREI').textContent = risk.rei.toFixed(3);
        $('aigALE').textContent = fmt(risk.ale);
        $('aigOPEXLeak').textContent = risk.opexLeak.toFixed(1) + '%';
        $('aigTechDebt').textContent = fmt(risk.techDebt);
        $('aigFinExpose').textContent = risk.finExpose + '/100';
        var feBar = $('aigFinExposeBar');
        if (feBar) {
            feBar.style.width = risk.finExpose + '%';
            feBar.className = 'aig-score-bar-fill ' + (risk.finExpose >= 70 ? 'risk-high' : risk.finExpose >= 40 ? 'risk-med' : 'risk-low');
        }
        $('aigCOI').textContent = fmt(risk.coi);

        // Panel 3: Operational Health
        drawGauge(health.overall, health.tier, health.tierColor);
        $('aigTechRel').textContent = health.techRel;
        $('aigFinRes').textContent = health.finRes;
        $('aigGovInt').textContent = health.govInt;
        $('aigProcMat').textContent = health.procMat;
        var trBar = $('aigTechRelBar');
        if (trBar) { trBar.style.width = health.techRel + '%'; trBar.className = 'aig-score-bar-fill ' + barClass(health.techRel); }
        var frBar = $('aigFinResBar');
        if (frBar) { frBar.style.width = health.finRes + '%'; frBar.className = 'aig-score-bar-fill ' + barClass(health.finRes); }
        var giBar = $('aigGovIntBar');
        if (giBar) { giBar.style.width = health.govInt + '%'; giBar.className = 'aig-score-bar-fill ' + barClass(health.govInt); }
        var pmBar = $('aigProcMatBar');
        if (pmBar) { pmBar.style.width = health.procMat + '%'; pmBar.className = 'aig-score-bar-fill ' + barClass(health.procMat); }

        // Panel 4: Monte Carlo
        $('aigMCP5').textContent = fmt(mc.p5);
        $('aigMCP25').textContent = fmt(mc.p25);
        $('aigMCP50').textContent = fmt(mc.p50);
        $('aigMCP75').textContent = fmt(mc.p75);
        $('aigMCP95').textContent = fmt(mc.p95);
        $('aigCVaR95').textContent = fmt(mc.cvar95);
        $('aigSLABreach').textContent = mc.slaBreach.toFixed(1) + '%';
        $('aigMCMean').textContent = fmt(mc.mean);

        // Panel 5: Narrative
        $('aigNarrativeText').innerHTML = generateNarrative(inp, ops, risk, health, mc, sens);

        // Draw charts if unlocked
        if (aigProMode) {
            drawHistogram(mc);
            drawTornado(sens, risk.ale);
        }
    }

    // ===================== AUTH =====================
    function aigCheckAuth() {
        try {
            var s = JSON.parse(localStorage.getItem('rz_premium_session') || 'null');
            if (s && s.tier === 'pro' && new Date(s.expires) > new Date()) return true;
        } catch (e) {}
        return false;
    }

    function aigUnlockPanels() {
        aigProMode = true;
        document.querySelectorAll('.aig-pro-panel').forEach(function(p) {
            p.classList.remove('gated');
            var ov = p.querySelector('.aig-gate-overlay');
            if (ov) ov.style.display = 'none';
        });
        $('aigProBtn').classList.add('active');
        $('aigFreeBtn').classList.remove('active');
        var pdfBtn = $('aigPdfBtn');
        if (pdfBtn) pdfBtn.style.display = '';
        updateAigProPanels();
    }

    function aigLockPanels() {
        aigProMode = false;
        document.querySelectorAll('.aig-pro-panel').forEach(function(p) {
            p.classList.add('gated');
            var ov = p.querySelector('.aig-gate-overlay');
            if (ov) ov.style.display = '';
        });
        $('aigFreeBtn').classList.add('active');
        $('aigProBtn').classList.remove('active');
        var pdfBtn = $('aigPdfBtn');
        if (pdfBtn) pdfBtn.style.display = 'none';
    }

    // ===================== WINDOW FUNCTIONS =====================
    window.aigSetMode = function(mode) {
        if (mode === 'pro') {
            if (aigCheckAuth()) { aigUnlockPanels(); }
            else { aigShowLogin(); }
        } else {
            aigLockPanels();
        }
    };

    window.aigShowLogin = function() {
        $('aigLoginOverlay').classList.add('active');
        $('aigLoginError').style.display = 'none';
        $('aigLoginEmail').value = '';
        $('aigLoginPass').value = '';
        setTimeout(function() { $('aigLoginEmail').focus(); }, 100);
    };

    window.aigHideLogin = function() {
        $('aigLoginOverlay').classList.remove('active');
    };

    window.aigDoLogin = function() {
        var email = $('aigLoginEmail').value.trim().toLowerCase();
        var pass = $('aigLoginPass').value;
        if (email === 'demo@resistancezero.com' && pass === 'demo2026') {
            var session = { email: email, tier: 'pro', expires: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString() };
            localStorage.setItem('rz_premium_session', JSON.stringify(session));
            window.dispatchEvent(new Event('rz-auth-change'));
            aigHideLogin();
            aigUnlockPanels();
        } else {
            $('aigLoginError').style.display = 'block';
        }
    };

    window.aigResetDefaults = function() {
        $('aigWorkload').value = 'Conventional Enterprise';
        $('aigTier').value = 'III';
        $('aigGridScore').value = 7;
        $('aigMaturity').value = 3;
        $('aigRegClass').value = 'Limited-Risk AI';
        $('aigFiduciary').value = 5000000;
        updateAigProPanels();
    };

    // ===================== PDF EXPORT =====================
    window.aigExportPDF = function() {
        if (!aigCheckAuth()) { aigShowLogin(); return; }
        var w = window.open('', '_blank');
        if (!w) { alert('Please allow popups for this site to export PDF.'); return; }

        var inp = getInputs();
        var ops = calcOperational(inp);
        var risk = calcRisk(inp, ops);
        var health = calcHealth(inp, ops, risk);
        var mc = runMonteCarlo(inp);
        var sens = runSensitivity(inp);
        var narrative = generateNarrative(inp, ops, risk, health, mc, sens);

        // Build SVG histogram
        function buildHistogramSVG() {
            var results = mc.results;
            var minV = results[0], maxV = results[results.length - 1], range = maxV - minV || 1;
            var numBins = 40, bins = new Array(numBins).fill(0);
            results.forEach(function(v) { var b = Math.min(Math.floor((v - minV) / range * numBins), numBins - 1); bins[b]++; });
            var maxBin = Math.max.apply(null, bins);
            var svgW = 520, svgH = 200, barW = (svgW - 60) / numBins;
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" width="' + svgW + '" height="' + svgH + '" viewBox="0 0 ' + svgW + ' ' + svgH + '">';
            svg += '<rect width="' + svgW + '" height="' + svgH + '" fill="#f8fafc"/>';
            svg += '<text x="' + (svgW / 2) + '" y="18" text-anchor="middle" fill="#1f2937" font-family="Inter,sans-serif" font-size="12" font-weight="bold">Monte Carlo Distribution (10K Simulations)</text>';
            bins.forEach(function(c, i) {
                var x = 30 + i * barW;
                var barH = maxBin > 0 ? (c / maxBin) * 140 : 0;
                var y = 170 - barH;
                var binCenter = minV + (i + 0.5) * range / numBins;
                var color = binCenter <= mc.p5 ? '#10b981' : binCenter <= mc.p50 ? '#6366f1' : binCenter <= mc.p95 ? '#f59e0b' : '#ef4444';
                svg += '<rect x="' + x + '" y="' + y + '" width="' + Math.max(barW - 0.5, 0.5) + '" height="' + barH + '" fill="' + color + '"/>';
            });
            [{ v: mc.p5, l: 'P5 ' + fmt(mc.p5), c: '#10b981' }, { v: mc.p50, l: 'P50 ' + fmt(mc.p50), c: '#6366f1' }, { v: mc.p95, l: 'P95 ' + fmt(mc.p95), c: '#ef4444' }].forEach(function(m) {
                var xp = 30 + ((m.v - minV) / range) * (svgW - 60);
                svg += '<line x1="' + xp + '" y1="28" x2="' + xp + '" y2="170" stroke="' + m.c + '" stroke-width="1.5" stroke-dasharray="4,3"/>';
                svg += '<text x="' + xp + '" y="185" text-anchor="middle" fill="' + m.c + '" font-family="Inter,sans-serif" font-size="9" font-weight="bold">' + m.l + '</text>';
            });
            svg += '</svg>';
            return svg;
        }

        // Build SVG tornado
        function buildTornadoSVG() {
            var svgW = 520, svgH = 200;
            var maxSwing = Math.max.apply(null, sens.map(function(d) { return d.absSwing; })) || 1;
            var barH = 28, gap = 8, startY = 35;
            var centerX = svgW * 0.55, maxBarW = svgW * 0.30;
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" width="' + svgW + '" height="' + svgH + '" viewBox="0 0 ' + svgW + ' ' + svgH + '">';
            svg += '<rect width="' + svgW + '" height="' + svgH + '" fill="#f8fafc"/>';
            svg += '<text x="' + (svgW / 2) + '" y="18" text-anchor="middle" fill="#1f2937" font-family="Inter,sans-serif" font-size="12" font-weight="bold">Sensitivity Tornado Chart</text>';
            svg += '<line x1="' + centerX + '" y1="' + (startY - 5) + '" x2="' + centerX + '" y2="' + (startY + sens.length * (barH + gap)) + '" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3,3"/>';
            svg += '<text x="' + centerX + '" y="' + (startY - 8) + '" text-anchor="middle" fill="#64748b" font-family="Inter,sans-serif" font-size="8">Baseline: ' + fmt(risk.ale) + '</text>';
            sens.forEach(function(d, i) {
                var y = startY + i * (barH + gap);
                var upW = d.absSwing > 0 ? (((d.upVal - risk.ale) / maxSwing) * maxBarW) : 0;
                var dnW = d.absSwing > 0 ? (((risk.ale - d.downVal) / maxSwing) * maxBarW) : 0;
                if (upW > 0) {
                    svg += '<rect x="' + centerX + '" y="' + y + '" width="' + upW + '" height="' + barH + '" fill="#ef4444" rx="3"/>';
                    svg += '<text x="' + (centerX + upW + 4) + '" y="' + (y + barH / 2 + 4) + '" fill="#dc2626" font-family="Inter,sans-serif" font-size="9" font-weight="bold">+' + fmt(d.upVal - risk.ale) + '</text>';
                }
                if (dnW > 0) {
                    svg += '<rect x="' + (centerX - dnW) + '" y="' + y + '" width="' + dnW + '" height="' + barH + '" fill="#6366f1" rx="3"/>';
                    svg += '<text x="' + (centerX - dnW - 4) + '" y="' + (y + barH / 2 + 4) + '" text-anchor="end" fill="#6366f1" font-family="Inter,sans-serif" font-size="9" font-weight="bold">-' + fmt(risk.ale - d.downVal) + '</text>';
                }
                svg += '<text x="' + (centerX - maxBarW - 12) + '" y="' + (y + barH / 2 + 4) + '" text-anchor="end" fill="#1f2937" font-family="Inter,sans-serif" font-size="10">' + d.name + '</text>';
            });
            svg += '</svg>';
            return svg;
        }

        // Build SVG gauge
        function buildGaugeSVG() {
            var maxLen = 283;
            var dashLen = (health.overall / 100) * maxLen;
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" width="220" height="140" viewBox="0 0 220 140">';
            svg += '<path d="M 20 130 A 90 90 0 0 1 200 130" fill="none" stroke="#e5e7eb" stroke-width="18" stroke-linecap="round"/>';
            svg += '<path d="M 20 130 A 90 90 0 0 1 200 130" fill="none" stroke="' + health.tierColor + '" stroke-width="18" stroke-linecap="round" stroke-dasharray="' + dashLen + ' ' + maxLen + '"/>';
            svg += '<text x="110" y="110" text-anchor="middle" fill="#1f2937" font-size="32" font-weight="800" font-family="Inter,sans-serif">' + health.overall + '</text>';
            svg += '<text x="110" y="128" text-anchor="middle" fill="#64748b" font-size="11" font-family="Inter,sans-serif">/ 100</text>';
            svg += '</svg>';
            return svg;
        }

        var now = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

        var html = '<!DOCTYPE html><html><head><meta charset="UTF-8">';
        html += '<title>AI Power Grid Management - Pro Report</title>';
        html += '<style>';
        html += 'body{font-family:Inter,Helvetica,Arial,sans-serif;color:#1f2937;max-width:800px;margin:0 auto;padding:40px 30px;font-size:11pt;line-height:1.6}';
        html += 'h1{color:#312e81;font-size:22pt;margin-bottom:4px;border-bottom:3px solid #6366f1;padding-bottom:8px}';
        html += 'h2{color:#312e81;font-size:14pt;margin-top:28px;margin-bottom:10px;border-bottom:1px solid #e5e7eb;padding-bottom:4px}';
        html += 'h3{color:#312e81;font-size:12pt;margin-top:20px}';
        html += '.subtitle{color:#64748b;font-size:10pt;margin-bottom:20px}';
        html += '.meta{display:flex;gap:20px;font-size:9pt;color:#64748b;margin-bottom:24px;flex-wrap:wrap}';
        html += '.meta span{background:#f1f5f9;padding:3px 10px;border-radius:4px}';
        html += 'table{width:100%;border-collapse:collapse;margin:12px 0;font-size:10pt}';
        html += 'th{background:#f1f5f9;color:#312e81;padding:8px 10px;text-align:left;font-weight:600;border-bottom:2px solid #e5e7eb}';
        html += 'td{padding:7px 10px;border-bottom:1px solid #e5e7eb;color:#1f2937}';
        html += '.kpi-row{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}';
        html += '.kpi-item{flex:1;min-width:100px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;padding:10px;text-align:center}';
        html += '.kpi-val{font-size:14pt;font-weight:800;color:#6366f1}';
        html += '.kpi-lbl{font-size:7.5pt;color:#64748b;margin-top:2px}';
        html += '.kpi-sub{font-size:7pt;color:#94a3b8}';
        html += '.narrative{background:#eef2ff;border-left:3px solid #6366f1;padding:12px 16px;margin:14px 0;border-radius:0 8px 8px 0}';
        html += '.narrative p{color:#1f2937;font-size:9.5pt;margin:0 0 8px;line-height:1.6}';
        html += '.narrative p:last-child{margin-bottom:0}';
        html += '.narrative strong{color:#312e81}';
        html += '.chart-wrap{text-align:center;margin:16px 0}';
        html += '.gauge-wrap{text-align:center;margin:16px 0}';
        html += '.methodology{background:#f8fafc;padding:12px 16px;border-radius:8px;margin-top:24px;font-size:9pt;color:#64748b}';
        html += '.methodology h3{color:#312e81;margin-top:0}';
        html += '.footer{margin-top:30px;padding-top:12px;border-top:1px solid #e5e7eb;font-size:8pt;color:#94a3b8;text-align:center}';
        html += '@media print{body{padding:20px}}';
        html += '</style></head><body>';

        html += '<h1>AI Power Grid Management Report</h1>';
        html += '<p class="subtitle">Infrastructure Risk & Operational Intelligence Assessment</p>';
        html += '<div class="meta">';
        html += '<span>Workload: ' + inp.workloadKey + '</span>';
        html += '<span>Tier: ' + inp.tierKey + ' (' + inp.tier.redundancy + ')</span>';
        html += '<span>Grid Reliability: ' + inp.gridScore + '/10</span>';
        html += '<span>Maturity: ' + inp.maturity + '/5</span>';
        html += '<span>Regulatory: ' + inp.regClassKey + '</span>';
        html += '<span>Generated: ' + now + '</span>';
        html += '</div>';

        // Section 1: Operational Intelligence
        html += '<h2>1. Operational Intelligence</h2>';
        html += '<div class="kpi-row">';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.p99Avail.toFixed(3) + '%</div><div class="kpi-lbl">P99 Availability</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.cer.toFixed(2) + '</div><div class="kpi-lbl">Cooling Efficiency</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.stranded.toFixed(0) + '%</div><div class="kpi-lbl">Stranded Capacity</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.mttd.toFixed(1) + ' min</div><div class="kpi-lbl">MTTD Forecast</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.autoRatio.toFixed(0) + '%</div><div class="kpi-lbl">Automation Ratio</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + ops.logInteg + '/100</div><div class="kpi-lbl">Log Integrity (Art.13)</div></div>';
        html += '</div>';

        // Section 2: Risk & Financial Exposure
        html += '<h2>2. Risk & Financial Exposure</h2>';
        html += '<div class="kpi-row">';
        html += '<div class="kpi-item"><div class="kpi-val">' + risk.rei.toFixed(3) + '</div><div class="kpi-lbl">Risk Exposure Index</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(risk.ale) + '</div><div class="kpi-lbl">Annual Loss Expectancy</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + risk.opexLeak.toFixed(1) + '%</div><div class="kpi-lbl">OPEX Leakage</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(risk.techDebt) + '</div><div class="kpi-lbl">Tech Debt /month</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + risk.finExpose + '/100</div><div class="kpi-lbl">Financial Exposure</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(risk.coi) + '</div><div class="kpi-lbl">Cost of Inaction</div></div>';
        html += '</div>';

        // Section 3: Operational Health
        html += '<h2>3. Operational Health Score</h2>';
        html += '<div class="gauge-wrap">' + buildGaugeSVG() + '</div>';
        html += '<div style="text-align:center;font-weight:800;color:' + health.tierColor + ';font-size:14pt;margin-bottom:12px">Grade ' + health.tier + '</div>';
        html += '<table><tr><th>Dimension</th><th>Score</th><th>Weight</th><th>Assessment</th></tr>';
        html += '<tr><td>Technical Reliability</td><td>' + health.techRel + '/100</td><td>35%</td><td>' + (health.techRel >= 80 ? 'Strong' : health.techRel >= 55 ? 'Adequate' : 'Needs Improvement') + '</td></tr>';
        html += '<tr><td>Financial Resilience</td><td>' + health.finRes + '/100</td><td>25%</td><td>' + (health.finRes >= 80 ? 'Strong' : health.finRes >= 55 ? 'Adequate' : 'Needs Improvement') + '</td></tr>';
        html += '<tr><td>Governance Integrity</td><td>' + health.govInt + '/100</td><td>20%</td><td>' + (health.govInt >= 80 ? 'Strong' : health.govInt >= 55 ? 'Adequate' : 'Needs Improvement') + '</td></tr>';
        html += '<tr><td>Process Maturity</td><td>' + health.procMat + '/100</td><td>20%</td><td>' + (health.procMat >= 80 ? 'Strong' : health.procMat >= 55 ? 'Adequate' : 'Needs Improvement') + '</td></tr>';
        html += '</table>';

        // Section 4: Monte Carlo
        html += '<h2>4. Monte Carlo Risk Analysis (10,000 Iterations)</h2>';
        html += '<div class="kpi-row">';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.p5) + '</div><div class="kpi-lbl">P5 Best</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.p25) + '</div><div class="kpi-lbl">P25</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.p50) + '</div><div class="kpi-lbl">P50 Median</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.p75) + '</div><div class="kpi-lbl">P75</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.p95) + '</div><div class="kpi-lbl">P95 Stress</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.cvar95) + '</div><div class="kpi-lbl">CVaR-95</div></div>';
        html += '</div>';
        html += '<div class="kpi-row">';
        html += '<div class="kpi-item"><div class="kpi-val">' + mc.slaBreach.toFixed(1) + '%</div><div class="kpi-lbl">SLA Breach Prob.</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.mean) + '</div><div class="kpi-lbl">Mean ALE</div></div>';
        html += '<div class="kpi-item"><div class="kpi-val">' + fmt(mc.std) + '</div><div class="kpi-lbl">Std. Deviation</div></div>';
        html += '</div>';
        html += '<div class="chart-wrap">' + buildHistogramSVG() + '</div>';
        html += '<h3>Sensitivity Analysis</h3>';
        html += '<div class="chart-wrap">' + buildTornadoSVG() + '</div>';
        html += '<table><tr><th>Variable</th><th>Impact (+10%)</th><th>Absolute Swing</th></tr>';
        sens.forEach(function(d) { html += '<tr><td>' + d.name + '</td><td>+' + d.impact.toFixed(1) + '%</td><td>' + fmt(d.absSwing) + '</td></tr>'; });
        html += '</table>';

        // Section 5: Narrative
        html += '<h2>5. Executive Assessment</h2>';
        html += '<div class="narrative">' + narrative + '</div>';

        // Methodology
        html += '<div class="methodology">';
        html += '<h3>Methodology Note</h3>';
        html += '<p>Availability modeled per Uptime Institute Tier Standards with regional grid reliability adjustments (ARO modifier = 1 + (10 - GridScore) x 0.15). Risk calculations use SLE x ARO framework per ISO 27005 / NIST SP 800-30. Monte Carlo: 10,000 iterations using Box-Muller normal distribution for Grid Reliability (\u03C3=1.5), Process Maturity (\u03C3=0.8), and Fiduciary Tolerance (\u03C3=20%). CVaR-95 represents the expected shortfall (average of worst 5% outcomes). Sensitivity analysis applies \u00B110% perturbation to each factor independently. Regulatory framework aligned with EU AI Act Article 13 transparency requirements. Operational Health Score: weighted composite of Technical Reliability (35%), Financial Resilience (25%), Governance Integrity (20%), and Process Maturity (20%). All calculations performed client-side; no data transmitted.</p>';
        html += '</div>';

        html += '<div class="footer">Generated by ResistanceZero AI Grid Management Calculator | resistancezero.com | ' + new Date().toISOString().split('T')[0] + '</div>';
        html += '</body></html>';

        w.document.write(html);
        w.document.close();
        setTimeout(function() { w.print(); }, 500);
    };

    // ===================== EVENT LISTENERS =====================
    // Enter key in login
    $('aigLoginPass').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') aigDoLogin();
    });
    $('aigLoginEmail').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') $('aigLoginPass').focus();
    });

    // Close on overlay click
    $('aigLoginOverlay').addEventListener('click', function(e) {
        if (e.target === this) aigHideLogin();
    });

    // Listen for auth changes from other articles/tabs
    window.addEventListener('rz-auth-change', function() {
        if (aigCheckAuth()) aigUnlockPanels();
        else aigLockPanels();
    });

    // Recalculate on input change
    ['aigWorkload', 'aigTier', 'aigGridScore', 'aigMaturity', 'aigRegClass', 'aigFiduciary'].forEach(function(id) {
        var el = $(id);
        if (el) {
            el.addEventListener('change', function() { if (aigProMode) updateAigProPanels(); });
            el.addEventListener('input', function() { if (aigProMode) updateAigProPanels(); });
        }
    });

    // Tooltip positioning
    document.querySelectorAll('.aig-tooltip-trigger').forEach(function(trigger) {
        trigger.addEventListener('mouseenter', function() {
            var tip = this.querySelector('.aig-tooltip-content');
            if (!tip) return;
            var rect = this.getBoundingClientRect();
            var tipRect = tip.getBoundingClientRect();
            if (rect.left + tipRect.width / 2 > window.innerWidth - 10) {
                tip.style.left = 'auto';
                tip.style.right = '-10px';
                tip.style.transform = 'none';
            }
            if (rect.left - tipRect.width / 2 < 10) {
                tip.style.left = '-10px';
                tip.style.right = 'auto';
                tip.style.transform = 'none';
            }
            if (rect.top < tipRect.height + 20) {
                tip.style.bottom = 'auto';
                tip.style.top = 'calc(100% + 10px)';
            }
        });
    });

    // ===================== INIT =====================
    if (aigCheckAuth()) {
        aigUnlockPanels();
    } else {
        updateAigProPanels(); // Populate values even when locked (blurred behind gate)
    }

})();
</script>
<script src="auth.js"></script>
<script src="rz-tracker.js"></script>
</body>
</html>
