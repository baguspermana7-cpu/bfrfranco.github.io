<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GED7FX8RTV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GED7FX8RTV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <title>How to Achieve 97%+ Maintenance Compliance in Data Centers | ResistanceZero</title>
    <meta name="description" content="Deep analysis of why maintenance compliance plateaus at 70-85% in data centers and the systems engineering approach that achieves 97%+. Covers CMMS maturity, workflow friction, evidence engineering, escalation architecture, and predictive compliance modeling.">
    <meta name="keywords" content="Maintenance Compliance, Data Center Maintenance, CMMS, Preventive Maintenance, Workflow Engineering, Asset Governance, PM Compliance, Work Order Management, Escalation Architecture, Evidence Engineering, Corrective Maintenance, Predictive Maintenance, RCM, MTBF, MTTR">
    <meta name="author" content="Bagus Dwi Permana">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#10b981">
    <link rel="canonical" href="https://resistancezero.com/article-3.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://resistancezero.com/article-3.html">
    <meta property="og:title" content="Maintenance Compliance Is Not a Technician Problem">
    <meta property="og:description" content="Why compliance plateaus at 70-85% and the systems engineering approach to achieve 97%+. CMMS maturity, workflow friction analysis, evidence engineering, and escalation architecture.">
    <meta property="og:image" content="https://resistancezero.com/assets/article-3-cover.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Maintenance Compliance Is Not a Technician Problem - Data Center Operations Technical Paper">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Bagus Dwi Permana Portfolio">
    <meta property="article:author" content="Bagus Dwi Permana">
    <meta property="article:published_time" content="2025-11-30T00:00:00Z">
    <meta property="article:modified_time" content="2026-02-17T00:00:00Z">
    <meta property="article:section" content="Data Center Operations">
    <meta property="article:tag" content="Maintenance Compliance">
    <meta property="article:tag" content="Workflow Engineering">
    <meta property="article:tag" content="Asset Governance">
    <meta property="article:tag" content="CMMS">
    <meta property="article:tag" content="Preventive Maintenance">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BagusDPermana">
    <meta name="twitter:creator" content="@BagusDPermana">
    <meta name="twitter:title" content="Maintenance Compliance Is Not a Technician Problem">
    <meta name="twitter:description" content="Why compliance plateaus at 70-85% and the systems approach to 97%+. CMMS maturity, workflow friction, evidence engineering.">
    <meta name="twitter:image" content="https://resistancezero.com/assets/article-3-cover.jpg">
    <meta name="twitter:image:alt" content="Maintenance Compliance and Accountability in Data Centers">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <link rel="apple-touch-icon" href="assets/Favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preload" as="image" href="assets/article-3-cover.jpg">
    <!-- Chart.js + D3.js for data visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>


    <!-- Structured Data - TechnicalArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechnicalArticle",
        "headline": "Maintenance Compliance Is Not a Technician Problem",
        "description": "Deep analysis of why maintenance compliance plateaus at 70-85% in data centers and the systems engineering approach that achieves 97%+.",
        "image": "https://resistancezero.com/assets/article-3-cover.jpg",
        "author": {
            "@type": "Person",
            "name": "Bagus Dwi Permana",
            "jobTitle": "Engineering Operations Manager",
            "url": "https://resistancezero.com/"
        },
        "datePublished": "2025-11-30",
        "dateModified": "2026-02-20",
        "publisher": {
            "@type": "Person",
            "name": "Bagus Dwi Permana"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://resistancezero.com/article-3.html"
        },
        "wordCount": "10000",
        "articleSection": "Data Center Operations",
        "keywords": ["Maintenance Compliance", "CMMS", "Workflow Engineering", "Asset Governance", "Preventive Maintenance", "Evidence Engineering"]
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://resistancezero.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Articles",
                "item": "https://resistancezero.com/articles.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Maintenance Compliance Is Not a Technician Problem"
            }
        ]
    }
    </script>

    <style>
        :root {
            --primary-blue: #1e3a5f;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-emerald: #10b981;
            --accent-red: #ef4444;
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }


        /* ─── Operator Narrative ─── */
        .operator-story {
            background: linear-gradient(135deg, #f0fdf4, #ecfdf5);
            border: 1px solid rgba(16,185,129,0.3);
            border-left: 4px solid #10b981;
            border-radius: 12px;
            padding: 1.5rem 1.75rem;
            margin: 2rem 0;
        }
        .operator-story-label {
            font-size: 0.72rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            color: #059669;
            text-transform: uppercase;
            margin-bottom: 0.75rem;
        }
        .operator-story blockquote {
            border-left: 3px solid rgba(16,185,129,0.5);
            padding-left: 1rem;
            margin: 0.75rem 0;
            color: #1e293b;
            font-style: italic;
            font-size: 0.88rem;
            line-height: 1.7;
        }
        .operator-story .stat-highlight {
            display: inline-block;
            background: rgba(16,185,129,0.15);
            color: #047857;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 700;
            font-style: normal;
            font-size: 0.82rem;
        }
        /* ─── Chart Wrap ─── */
        .chart-wrap {
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .chart-wrap .chart-title {
            font-size: 0.78rem;
            font-weight: 700;
            color: #1e3a5f;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }
        /* ─── Monte Carlo Section ─── */
        .mc-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            border: 1px solid rgba(139,92,246,0.3);
            border-radius: 16px;
            padding: 2rem;
            color: #e2e8f0;
        }
        .mc-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        .mc-icon { font-size: 2.5rem; }
        .mc-title { font-size: 1.2rem; font-weight: 800; color: #fff; }
        .mc-subtitle { font-size: 0.78rem; color: #a78bfa; margin-top: 2px; }
        .mc-controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.75rem; margin: 1rem 0; }
        .mc-control label { display: block; font-size: 0.72rem; color: #94a3b8; margin-bottom: 4px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
        .mc-control input, .mc-control select { width: 100%; padding: 8px 10px; background: rgba(30,58,95,0.5); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; color: #e2e8f0; font-size: 0.85rem; }
        .mc-run-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 28px; background: linear-gradient(135deg, #7c3aed, #a855f7); color: #fff; border: none; border-radius: 10px; font-size: 0.9rem; font-weight: 700; cursor: pointer; margin: 0.75rem 0; transition: transform 0.15s; }
        .mc-run-btn:hover { transform: translateY(-2px); }
        .mc-run-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .mc-results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.75rem; margin: 1rem 0; }
        .mc-stat { background: rgba(30,58,95,0.4); border: 1px solid rgba(139,92,246,0.2); border-radius: 10px; padding: 0.75rem; text-align: center; }
        .mc-stat .mc-stat-label { font-size: 0.65rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px; }
        .mc-stat .mc-stat-value { font-size: 1.3rem; font-weight: 800; color: #a78bfa; }
        .mc-stat .mc-stat-range { font-size: 0.68rem; color: #64748b; margin-top: 2px; }
        /* ─── Sankey Section ─── */
        .sankey-section {
            background: linear-gradient(135deg, #0f172a 0%, #042f2e 100%);
            border: 1px solid rgba(6,182,212,0.3);
            border-radius: 16px;
            padding: 2rem;
            color: #e2e8f0;
        }
        .sankey-title { font-size: 1.2rem; font-weight: 800; color: #fff; margin-bottom: 4px; }
        .sankey-subtitle { font-size: 0.78rem; color: #22d3ee; margin-bottom: 1rem; }
        /* Hero Section */
        .article-hero {
            background: linear-gradient(135deg, #0b1220 0%, #064e3b 50%, #1e3a5f 100%);
            padding: 7rem 2rem 3.5rem;
            color: #fff;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .article-hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L32 15 L42 17 L32 19 L30 29 L28 19 L18 17 L28 15 Z' fill='%2310b981' fill-opacity='0.03'/%3E%3C/svg%3E");
            z-index: 0;
        }

        .article-hero > * { position: relative; z-index: 1; }
        .article-hero .container { max-width: 1000px; margin: 0 auto; }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .article-title {
            font-size: clamp(1.6rem, 3.2vw, 2.35rem);
            font-weight: 800;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            color: #fff;
            letter-spacing: -0.01em;
        }

        .article-subtitle {
            font-size: clamp(0.95rem, 1.6vw, 1.15rem);
            color: #94a3b8;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .article-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Table of Contents */
        .toc-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 3rem 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .toc-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .toc-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.625rem;
        }

        .toc-item {
            background: #fff;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-emerald);
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .toc-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toc-item-number {
            font-size: 0.75rem;
            color: var(--accent-emerald);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .toc-item-title {
            font-weight: 600;
            font-size: 0.88rem;
        }

        /* Article Content */
        .article-content {
            padding: 4rem 2rem;
            background: #fff;
        }

        .article-content .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-emerald);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .article-body h2 .section-number {
            background: var(--accent-emerald);
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .article-body h3 {
            font-size: 1.1rem;
            color: #334155;
            margin: 1.5rem 0 0.5rem;
        }

        .article-body h4 {
            font-size: 0.9rem;
            color: #475569;
            margin: 1rem 0 0.5rem;
        }

        .article-body ul, .article-body ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .article-body li {
            margin-bottom: 0.35rem;
            font-size: 0.9rem;
        }

        /* Inline Citations */
        .cite { color: var(--accent-emerald); font-size: 0.75em; vertical-align: super; font-weight: 600; text-decoration: none; padding: 0 2px; }
        .cite:hover { color: #059669; text-decoration: underline; }

        /* Tooltips */
        .term-tooltip {
            position: relative;
            border-bottom: 1px dashed var(--accent-emerald);
            cursor: help;
            font-weight: 500;
        }

        .term-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: #fff;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.78rem;
            font-weight: 400;
            white-space: nowrap;
            max-width: 320px;
            white-space: normal;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 100;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            line-height: 1.4;
        }

        .term-tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Data Tables */
        .data-table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .data-table thead {
            background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            color: #fff;
        }

        .data-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            white-space: nowrap;
        }

        .data-table td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left: 4px solid var(--accent-emerald);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left-color: var(--accent-amber);
        }

        .info-box.critical {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left-color: var(--accent-red);
        }

        .info-box.blue {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left-color: var(--accent-cyan);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Code / Formula Blocks */
        .formula-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid #6ee7b7;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .formula-box-title {
            font-weight: 700;
            color: #065f46;
            margin-bottom: 0.75rem;
            font-family: 'Inter', sans-serif;
        }

        /* Maturity Model */
        .maturity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .maturity-card {
            background: #fff;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-top: 4px solid #e2e8f0;
            text-align: center;
            transition: transform 0.2s ease;
        }

        .maturity-card:hover {
            transform: translateY(-2px);
        }

        .maturity-card.level-1 { border-top-color: #ef4444; }
        .maturity-card.level-2 { border-top-color: #f59e0b; }
        .maturity-card.level-3 { border-top-color: #06b6d4; }
        .maturity-card.level-4 { border-top-color: #10b981; }
        .maturity-card.level-5 { border-top-color: #8b5cf6; }

        .maturity-level {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.25rem;
        }

        .maturity-card.level-1 .maturity-level { color: #ef4444; }
        .maturity-card.level-2 .maturity-level { color: #f59e0b; }
        .maturity-card.level-3 .maturity-level { color: #06b6d4; }
        .maturity-card.level-4 .maturity-level { color: #10b981; }
        .maturity-card.level-5 .maturity-level { color: #8b5cf6; }

        .maturity-name {
            font-weight: 700;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .maturity-desc {
            font-size: 0.78rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Escalation Tier Cards */
        .escalation-grid {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .escalation-card {
            background: #fff;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .escalation-tier {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            color: #fff;
        }

        .escalation-card.tier-1 .escalation-tier { background: #06b6d4; }
        .escalation-card.tier-2 .escalation-tier { background: #f59e0b; }
        .escalation-card.tier-3 .escalation-tier { background: #ef4444; }
        .escalation-card.tier-4 .escalation-tier { background: #7c3aed; }

        /* Step Cards for Intervention */
        .step-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .step-card {
            background: #fff;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 4px solid var(--accent-emerald);
            position: relative;
        }

        .step-card-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background: var(--accent-emerald);
            color: #fff;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .step-card-title {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .step-card-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Interactive Dashboard */
        .dashboard-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .dashboard-title {
            text-align: center;
            color: #fff;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .dashboard-subtitle {
            text-align: center;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .chart-wrapper {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.18);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .control-card {
            background: rgba(30, 58, 95, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .control-label {
            color: #e5e7eb;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-label-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .control-label-icon.friction { background: rgba(239, 68, 68, 0.2); color: #fca5a5; }
        .control-label-icon.evidence { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; }

        .control-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(148, 163, 184, 0.2);
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 0.75rem;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .control-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .control-slider.friction::-webkit-slider-thumb { background: #ef4444; }
        .control-slider.evidence::-webkit-slider-thumb { background: #10b981; }

        .control-value {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
        }

        .control-value span { color: #94a3b8; }

        .control-value .current-val {
            color: #fff;
            font-weight: 700;
            background: rgba(16, 185, 129, 0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
        }

        .legend-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.8rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.compliance { background: #10b981; }
        .legend-dot.evidence { background: #94a3b8; }

        .callout-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .callout-card {
            background: rgba(30, 58, 95, 0.3);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(16, 185, 129, 0.15);
        }

        .callout-label {
            color: #94a3b8;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .callout-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .callout-value.blue { color: #60a5fa; }
        .callout-value.green { color: #10b981; }
        .callout-value.amber { color: #f59e0b; }
        .callout-value.red { color: #ef4444; }

        /* Calculator Section */
        .calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            margin: 3rem 0;
            color: #fff;
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .calculator-subtitle {
            color: #94a3b8;
            text-align: center;
            margin-bottom: 2rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-label {
            font-size: 0.85rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .calc-input, .calc-select {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .calc-input:focus, .calc-select:focus {
            outline: none;
            border-color: var(--accent-emerald);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }

        .calc-select option {
            background: #1e293b;
            color: #fff;
        }

        .calc-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 0 auto 2rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
        }

        .calc-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .calc-result-item {
            text-align: center;
            padding: 1rem;
        }

        .calc-result-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent-emerald);
        }

        .calc-result-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .calc-result-value.warning { color: var(--accent-amber); }
        .calc-result-value.danger { color: var(--accent-red); }

        /* References */
        .references-section {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 16px;
            margin-top: 3rem;
            border-left: 4px solid var(--accent-emerald);
        }

        .references-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
        }

        .references-list {
            display: grid;
            gap: 0.75rem;
        }

        .reference-item {
            display: flex;
            gap: 0.75rem;
            font-size: 0.85rem;
        }

        .reference-number {
            color: var(--accent-emerald);
            font-weight: 700;
            flex-shrink: 0;
        }

        .reference-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .privacy-badge{display:flex;align-items:center;justify-content:center;gap:6px;font-size:0.72rem;color:#64748b;margin-top:0.5rem;padding:6px 0}
        .privacy-badge i{color:#10b981;font-size:0.8rem}

        /* ═══ TOC CALCULATOR HIGHLIGHT ═══ */
        .toc-item.toc-calculator{background:linear-gradient(135deg,rgba(16,185,129,0.06) 0%,rgba(5,150,105,0.04) 100%);border:2px solid rgba(16,185,129,0.2);border-left:4px solid #10b981;position:relative}
        .toc-item.toc-calculator .toc-item-number{display:flex;align-items:center;gap:6px}
        .toc-item.toc-calculator .toc-calc-badge{display:inline-flex;align-items:center;gap:3px;background:#10b981;color:#fff;font-size:0.55rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;padding:2px 6px;border-radius:4px}

        /* ═══ EVIDENCE BLOCK ═══ */
        .evidence-block{background:linear-gradient(135deg,#0f172a 0%,#1e293b 100%);border-radius:16px;padding:2rem;margin:2.5rem 0;border:1px solid rgba(16,185,129,0.15)}
        .evidence-block-title{font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#10b981;margin-bottom:1.25rem;display:flex;align-items:center;gap:0.5rem}
        .evidence-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem}
        .evidence-card{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:1.25rem 1rem;text-align:center;transition:all 0.3s ease}
        .evidence-card:hover{background:rgba(16,185,129,0.06);border-color:rgba(16,185,129,0.2);transform:translateY(-2px)}
        .evidence-card-value{font-size:1.4rem;font-weight:800;font-family:'JetBrains Mono',monospace;margin-bottom:4px}
        .evidence-card-label{font-size:0.72rem;color:#94a3b8;line-height:1.4}
        .evidence-card-sub{font-size:0.65rem;color:#64748b;margin-top:4px}
        .evidence-source{margin-top:1rem;font-size:0.7rem;color:#64748b;text-align:center;font-style:italic}

        /* ═══ BENCHMARK META ═══ */
        .benchmark-meta{display:flex;flex-wrap:wrap;gap:0.75rem;margin-top:0.75rem;padding-top:0.75rem;border-top:1px solid rgba(255,255,255,0.08)}
        .benchmark-meta-tag{font-size:0.65rem;color:#64748b;background:rgba(255,255,255,0.04);padding:3px 8px;border-radius:4px;display:flex;align-items:center;gap:4px}
        .benchmark-meta-tag i{font-size:0.6rem}

        /* ═══ DARK MODE ═══ */
        [data-theme="dark"] .article-content { background: #0f172a; }
        [data-theme="dark"] .article-body { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body h2 { color: #93c5fd; }
        [data-theme="dark"] .article-body h3 { color: #cbd5e1; }
        [data-theme="dark"] .article-body p { color: #cbd5e1; }
        [data-theme="dark"] .article-body blockquote { background: rgba(30,58,95,0.3); border-color: rgba(96,165,250,0.4); color: #cbd5e1; }
        [data-theme="dark"] .article-body .info-box,
        [data-theme="dark"] .article-body .key-insight { background: rgba(15,23,42,0.8); border-color: rgba(255,255,255,0.1); color: #cbd5e1; }
        [data-theme="dark"] .article-body table th { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body table td { color: #cbd5e1; border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .article-body ul li,
        [data-theme="dark"] .article-body ol li { color: #cbd5e1; }
        [data-theme="dark"] .article-body a { color: #60a5fa; }
        [data-theme="dark"] .article-body strong { color: #f1f5f9; }
        [data-theme="dark"] .toc-section { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .toc-item { background: rgba(255,255,255,0.05); color: #e2e8f0; border-left-color: rgba(16,185,129,0.5); }
        [data-theme="dark"] .toc-item:hover { background: rgba(255,255,255,0.08); }
        [data-theme="dark"] .toc-title { color: #e2e8f0; }
        [data-theme="dark"] .reference-item { color: #cbd5e1; }
        [data-theme="dark"] .reference-item a { color: #60a5fa; }
        [data-theme="dark"] .comparison-grid .comparison-card { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .data-table { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .data-table th { background: #1e293b; color: #e2e8f0; }
        [data-theme="dark"] .data-table td { color: #cbd5e1; border-color: rgba(255,255,255,0.08); }
        [data-theme="dark"] .flow-step { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #e2e8f0; }
        [data-theme="dark"] .callout-card { background: rgba(30,58,95,0.4); border-color: rgba(16,185,129,0.2); }
        [data-theme="dark"] .maturity-card { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #e2e8f0; }
        [data-theme="dark"] .step-card { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #e2e8f0; }

        /* Responsive */
        @media (max-width: 768px) {
            .article-hero { padding: 6rem 1rem 3rem; }
            .article-content { padding: 2rem 1rem; }
            .toc-grid { grid-template-columns: 1fr; }
            .maturity-grid { grid-template-columns: 1fr 1fr; }
            .step-grid { grid-template-columns: 1fr; }
            .calc-grid { grid-template-columns: 1fr; }
            .dashboard-container { padding: 1rem; }
            .chart-wrapper { padding: 1rem; }
            .term-tooltip::after { left: 0; transform: none; max-width: 250px; }
        }

        /* ═══ PRO ENHANCEMENT MODE ═══ */
        #maint-tooltip-container{position:fixed;width:320px;background:linear-gradient(135deg,#1e293b,#0f172a);color:#e2e8f0;padding:16px 18px;border-radius:14px;border:1px solid rgba(16,185,129,.25);box-shadow:0 20px 50px rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .2s;font-size:.82rem;line-height:1.55}
        #maint-tooltip-container.visible{opacity:1}
        #maint-tooltip-container .tooltip-title{font-weight:700;color:#34d399;margin-bottom:6px;font-size:.85rem}
        #maint-tooltip-container .tooltip-desc{color:#cbd5e1;margin-bottom:8px}
        #maint-tooltip-container .tooltip-formula{background:rgba(16,185,129,.1);padding:8px 10px;border-radius:8px;font-family:'JetBrains Mono',monospace;font-size:.75rem;color:#6ee7b7}
        .maint-mode-bar{display:flex;gap:8px;margin-bottom:0}
        .maint-toolbar-row{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:0.75rem;margin-bottom:1.5rem}
        .maint-toolbar-actions{display:flex;gap:8px;align-items:center}
        .maint-mode-btn{padding:8px 20px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.12);border-radius:10px;color:#94a3b8;font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
        .maint-mode-btn:hover{background:rgba(255,255,255,.1);color:#e2e8f0}
        .maint-mode-btn.active{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border-color:#10b981;box-shadow:0 4px 15px rgba(16,185,129,.3)}
        .gated-badge{display:inline-block;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;font-size:.65rem;padding:2px 7px;border-radius:6px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;vertical-align:middle;margin-left:4px}
        .pro-panel{position:relative;margin-top:1.5rem}
        .pro-panel-inner{padding:1.25rem;border:1px solid rgba(16,185,129,.15);border-radius:14px;background:rgba(16,185,129,.03)}
        .pro-panel-title{font-size:.95rem;font-weight:700;color:#10b981;text-transform:uppercase;letter-spacing:.8px;margin-bottom:.75rem;display:flex;align-items:center;gap:8px}
        .gated-overlay{position:absolute;inset:0;background:rgba(15,23,42,.7);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);border-radius:14px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;z-index:5;transition:background .2s}
        .gated-overlay:hover{background:rgba(15,23,42,.8)}
        .gated-icon{font-size:2rem;color:#fbbf24;margin-bottom:8px}
        .gated-text{font-size:.85rem;font-weight:600;color:#e2e8f0}
        .gated-sub{font-size:.75rem;color:#94a3b8;margin-top:4px}
        #maintProInputs{display:none;margin-top:1.5rem;padding-top:1.25rem;border-top:1px dashed rgba(16,185,129,.3)}
        .pro-input-section-title{font-size:.72rem;font-weight:700;color:#10b981;text-transform:uppercase;letter-spacing:1px;margin-bottom:1rem;display:flex;align-items:center;gap:8px}
        .maint-action-toolbar{display:flex;gap:8px;justify-content:center;margin-top:1.5rem}
        .maint-action-btn{padding:8px 18px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:10px;color:#94a3b8;font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
        .maint-action-btn:hover{background:rgba(255,255,255,.12);color:#e2e8f0}
        .maint-action-btn.primary{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border-color:#10b981}
        #maintLoginModal{position:fixed;inset:0;background:rgba(0,0,0,0.75);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);z-index:10001;display:none;align-items:center;justify-content:center}
        #maintLoginModal.show{display:flex}
        .maint-login-box{background:#fff;border-radius:20px;padding:2.5rem;max-width:420px;width:90%;position:relative;box-shadow:0 25px 60px rgba(0,0,0,.3)}
        .nav-auth-wrap{display:flex;align-items:center;position:relative;margin-left:12px}
        .nav-login-btn{display:flex;align-items:center;gap:6px;padding:6px 14px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;font-size:.78rem;font-weight:600;cursor:pointer;white-space:nowrap;box-shadow:0 2px 8px rgba(16,185,129,.3)}
        .nav-user-btn{display:none;align-items:center;gap:8px;padding:4px 12px 4px 4px;background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.2);border-radius:50px;cursor:pointer;color:#e2e8f0;font-size:.8rem}
        .nav-user-avatar{width:30px;height:30px;border-radius:50%;background:linear-gradient(135deg,#10b981,#059669);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:.8rem}
        .nav-user-email{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.8rem}
        .nav-user-dropdown{position:absolute;top:calc(100% + 8px);right:0;background:#1e293b;border:1px solid #334155;border-radius:12px;min-width:220px;display:none;z-index:100;box-shadow:0 12px 30px rgba(0,0,0,.4)}
        .nav-user-dropdown.show{display:block}
        .tooltip-trigger{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;background:rgba(16,185,129,.2);color:#10b981;border-radius:50%;font-size:.65rem;font-weight:700;cursor:help;margin-left:4px;vertical-align:middle;position:relative}
        .tooltip-trigger .tooltip-content{display:none}
    
        /* Result Card Tooltip System */
        .res-tip {
            display: inline-flex; align-items: center; justify-content: center;
            width: 14px; height: 14px;
            background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.3);
            border-radius: 50%; font-size: 0.6rem; font-weight: 700;
            color: #fbbf24; margin-left: 4px; cursor: help;
            position: relative; flex-shrink: 0; vertical-align: middle;
            line-height: 1;
        }
        .res-tip:hover { background: rgba(245,158,11,0.3); transform: scale(1.15); }
        .res-tip .res-tip-body {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: calc(100% + 8px); left: 50%;
            transform: translateX(-50%);
            background: #1e293b; color: #e2e8f0;
            padding: 0.7rem 0.9rem; border-radius: 8px;
            font-size: 0.72rem; font-weight: 400; line-height: 1.5;
            width: 260px; z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(245,158,11,0.2);
            transition: opacity 0.2s ease; pointer-events: none;
            text-transform: none; letter-spacing: normal;
        }
        .res-tip:hover .res-tip-body { visibility: visible; opacity: 1; }
        .res-tip-body .rtt { font-weight: 700; color: #fbbf24; margin-bottom: 3px; font-size: 0.75rem; }
        .res-tip-body .rtd { color: #cbd5e1; }
        .res-tip-body .rtf {
            font-family: 'JetBrains Mono', monospace; font-size: 0.68rem;
            background: rgba(0,0,0,0.3); padding: 3px 7px; border-radius: 4px;
            color: #67e8f9; margin-top: 4px; display: block;
        }
</style>
    <link rel="preload" as="image" href="assets/article-3-cover.jpg">
    <!-- Chart.js + D3.js for data visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0" defer></script>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Search Overlay & Modal -->
    <div class="search-overlay" id="searchOverlay"></div>
    <div class="search-modal" id="searchModal">
        <div class="search-input-wrap">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Search articles, calculators, tools..." autocomplete="off">
            <kbd class="search-kbd">ESC</kbd>
        </div>
        <div class="search-results" id="searchResults">
            <div class="search-empty">Type to search across all content</div>
        </div>
        <div class="search-footer">
            <span><kbd class="search-kbd">&uarr;&darr;</kbd> Navigate</span>
            <span><kbd class="search-kbd">Enter</kbd> Open</span>
        </div>
    </div>

    <!-- TOC Sidebar (desktop, wide screens) -->
    <nav class="toc-sidebar" id="tocSidebar" aria-label="Table of Contents">
        <div class="toc-sidebar-label">On this page</div>
        <ul class="toc-sidebar-list" id="tocSidebarList"></ul>
    </nav>

    <!-- TOC Mobile Toggle -->
    <button class="toc-mobile-toggle" id="tocMobileToggle" aria-label="Table of contents">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
    </button>
    <div class="toc-mobile-backdrop" id="tocMobileBackdrop"></div>
    <div class="toc-mobile-drawer" id="tocMobileDrawer">
        <div class="toc-drawer-header">
            <span class="toc-drawer-title">Table of Contents</span>
            <button class="toc-drawer-close" id="tocDrawerClose" aria-label="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <ul class="toc-mobile-list" id="tocMobileList"></ul>
    </div>


    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana" class="nav-avatar">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-dropdown">
                    <a href="datacenter-solutions.html" class="nav-link">
                        DC Solutions
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="datacenter-solutions.html" style="color: #06b6d4; font-weight: 600;">DC Solutions Hub</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="datahallAI.html" style="color: #8b5cf6;">DC AI/HPC</a></li>
                        <li><a href="dc-conventional.html">DC Conventional</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="capex-calculator.html" style="color: #f59e0b;">CAPEX Calculator</a></li>
                        <li><a href="opex-calculator.html" style="color: #10b981;">OPEX Calculator</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="dcmoc/" style="color: #ef4444; font-weight: 600;">DC MOC</a></li>
                    </ul>
                </li>
                <li class="nav-dropdown">
                    <a href="articles.html" class="nav-link">
                        Insights
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="articles.html" style="color: #06b6d4; font-weight: 600;">Engineering Journal</a></li>
                        <li><a href="geopolitics.html" style="color: #ef4444;">Global Analysis</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="insights.html" style="color: #64748b; font-size: 0.85rem;">All Insights</a></li>
                    </ul>
                </li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
                        <button class="nav-search-btn" id="navSearchBtn" aria-label="Search" title="Search (Ctrl+K)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            <div class="nav-auth-wrap" id="maintNavAuthWrap">
                <button class="nav-login-btn" id="maintNavLoginBtn" onclick="maintShowLogin()"><i class="fas fa-user-circle"></i> <span>Login</span></button>
                <button class="nav-user-btn" id="maintNavUserBtn" onclick="maintToggleDropdown()"><span class="nav-user-avatar" id="maintNavAvatar">U</span><span class="nav-user-email" id="maintNavEmail">user</span><i class="fas fa-chevron-down" style="font-size:0.6rem;color:#64748b;"></i></button>
                <div class="nav-user-dropdown" id="maintNavDropdown">
                    <div style="padding:14px 16px;border-bottom:1px solid #334155;">
                        <div style="display:inline-block;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;font-size:.65rem;padding:2px 8px;border-radius:6px;font-weight:700;text-transform:uppercase;">PRO</div>
                        <div style="font-size:.8rem;color:#94a3b8;margin-top:6px;" id="maintDdEmail">user</div>
                    </div>
                    <button onclick="maintLogout()" style="width:100%;padding:12px 16px;background:none;border:none;color:#f87171;font-size:.82rem;cursor:pointer;text-align:left;"><i class="fas fa-sign-out-alt" style="margin-right:8px;"></i>Logout</button>
                </div>
            </div>
            <button class="hamburger" aria-label="Open navigation menu" aria-expanded="false">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero Section -->
    <section class="article-hero">
        <div class="container">
            <a href="articles.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Back to Engineering Journal
            </a>

            <span class="article-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 11l3 3L22 4"/>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                </svg>
                Asset Management &amp; Compliance
            </span>

            <h1 class="article-title">Maintenance Compliance Is Not<br>a Technician Problem</h1>

            <p class="article-subtitle">
                Why <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> compliance plateaus at 70-85% despite training, monitoring, and pressure. A systems engineering analysis of workflow friction, <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> maturity, evidence engineering, and escalation architecture -- with a predictive compliance model and interactive calculator.
            </p>

            <div class="article-meta">
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    November 30, 2025
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    24 min read
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    ~10,000 words
                </span>
            </div>
        </div>
    </section>
    <!-- Series Navigation -->
    <div class="series-nav" style="margin-top: 1rem;">
        <div class="series-badge">
            <span class="series-badge-icon">03</span>
            Engineering Journal &mdash; Article 3 of 18
        </div>
        <span class="series-title"></span>
        <div class="series-links">
            <a href="article-2.html" class="series-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>Prev</a>
            <a href="article-4.html" class="series-link">Next<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></a>
        </div>
    </div>


    <!-- Featured Image -->
    <figure style="margin: 2rem 0; text-align: center;">
        <img src="Article/Article_3 02.02.26/3.1.jpg" alt="Cooling infrastructure and thermal management systems for high-density data center environments" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
    </figure>

    <!-- Table of Contents -->
    <section class="toc-section">
        <div class="toc-container">
            <h2 class="toc-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
                Table of Contents
            </h2>
            <div class="toc-grid">
                <a href="#section-1" class="toc-item">
                    <div class="toc-item-number">SECTION 1</div>
                    <div class="toc-item-title">Abstract</div>
                </a>
                <a href="#section-2" class="toc-item">
                    <div class="toc-item-number">SECTION 2</div>
                    <div class="toc-item-title">The Compliance Paradox</div>
                </a>
                <a href="#section-3" class="toc-item">
                    <div class="toc-item-number">SECTION 3</div>
                    <div class="toc-item-title">Root Causes: A Systems View</div>
                </a>
                <a href="#section-4" class="toc-item">
                    <div class="toc-item-number">SECTION 4</div>
                    <div class="toc-item-title">CMMS as Operating System</div>
                </a>
                <a href="#section-5" class="toc-item">
                    <div class="toc-item-number">SECTION 5</div>
                    <div class="toc-item-title">Workflow Friction Analysis</div>
                </a>
                <a href="#section-6" class="toc-item">
                    <div class="toc-item-number">SECTION 6</div>
                    <div class="toc-item-title">Evidence Engineering</div>
                </a>
                <a href="#section-7" class="toc-item">
                    <div class="toc-item-number">SECTION 7</div>
                    <div class="toc-item-title">Escalation Architecture</div>
                </a>
                <a href="#section-8" class="toc-item">
                    <div class="toc-item-number">SECTION 8</div>
                    <div class="toc-item-title">Case Context</div>
                </a>
                <a href="#section-9" class="toc-item">
                    <div class="toc-item-number">SECTION 9</div>
                    <div class="toc-item-title">The Intervention: 74% to 97.2%</div>
                </a>
                <a href="#section-10" class="toc-item">
                    <div class="toc-item-number">SECTION 10</div>
                    <div class="toc-item-title">Results &amp; Verification</div>
                </a>
                <a href="#sec10mc" class="toc-item toc-calculator"><div class="toc-item-number">SECTION 10b <span class="toc-calc-badge" style="background:rgba(124,58,237,0.2);color:#a78bfa;">Monte Carlo</span></div><div class="toc-item-title">Compliance Risk Simulation &mdash; 10,000 Iterations</div></a>
                <a href="#sec10sk" class="toc-item toc-calculator"><div class="toc-item-number">SECTION 10c <span class="toc-calc-badge" style="background:rgba(6,182,212,0.15);color:#22d3ee;">Sankey</span></div><div class="toc-item-title">PM Task Flow Diagram</div></a>
                <a href="#section-11" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 11 <span class="toc-calc-badge"><i class="fas fa-chart-line" style="font-size:0.5rem;"></i> Interactive</span></div>
                    <div class="toc-item-title">Compliance Canvas</div>
                </a>
                <a href="#section-12" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 12 <span class="toc-calc-badge"><i class="fas fa-calculator" style="font-size:0.5rem;"></i> Interactive</span></div>
                    <div class="toc-item-title">Compliance Predictor Calculator</div>
                </a>
                <a href="#section-13" class="toc-item">
                    <div class="toc-item-number">SECTION 13</div>
                    <div class="toc-item-title">Conclusion</div>
                </a>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="article-content">
        <div class="container">
            <div class="article-body">

                <!-- Section 1: Abstract -->
                <h2 id="section-1"><span class="section-number">1</span> Abstract</h2>

                <p>Maintenance compliance in mission-critical data centers is persistently framed as a technician discipline problem. Managers ask: "Why are people not closing <span class="term-tooltip" data-tooltip="Work Order: A documented task assigned to maintenance personnel">WO</span>s?" and "Why do technicians forget tasks?" This framing is seductively simple -- and dangerously wrong. It locates the failure in human motivation when the actual failure exists within systems architecture, workflow design, and organizational structure.</p>

                <p>This article presents a comprehensive systems-level analysis of why <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> compliance plateaus at 70-85% in the majority of data center operations despite repeated training interventions, monitoring dashboards, and supervisory pressure. Drawing on maintenance engineering theory<a href="#ref-1" class="cite">[1]</a>, reliability-centered maintenance<a href="#ref-3" class="cite">[3]</a>, and human factors research, it demonstrates that sustained compliance above 95% emerges only when five systemic conditions are simultaneously addressed: workflow friction, <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> usability, evidence burden, scheduling conflicts, and escalation gaps.</p>

                <p>The article introduces a Maintenance Compliance Predictor model that quantifies the relationship between staffing capacity, workflow friction, CMMS maturity, and evidence clarity. Through an applied case study of a 15MW concurrently maintainable facility, it documents the journey from 74% to 97.2% compliance over 18 weeks using exclusively systems-level interventions -- without adding headcount or changing personnel.</p>

                <!-- Executive Evidence Block -->
                <div class="evidence-block">
                    <div class="evidence-block-title">
                        <i class="fas fa-chart-line"></i> Documented Intervention Outcomes
                    </div>
                    <div class="evidence-grid">
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #10b981;">74% &rarr; 97.2%</div>
                            <div class="evidence-card-label">PM Compliance Achieved</div>
                            <div class="evidence-card-sub">+23.2 pts in 18 weeks</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #06b6d4;">0</div>
                            <div class="evidence-card-label">Headcount Added</div>
                            <div class="evidence-card-sub">Systems-only interventions</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #f59e0b;">5</div>
                            <div class="evidence-card-label">Systemic Drivers Identified</div>
                            <div class="evidence-card-sub">Friction, CMMS, evidence, scheduling, escalation</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #ef4444;">80%</div>
                            <div class="evidence-card-label">Failures from Planning</div>
                            <div class="evidence-card-sub">Not execution (Smith &amp; Hinchcliffe)</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-card-value" style="color: #8b5cf6;">18 wk</div>
                            <div class="evidence-card-label">Time to Sustained &gt;95%</div>
                            <div class="evidence-card-sub">15MW concurrently maintainable</div>
                        </div>
                    </div>
                    <div class="evidence-source">Applied case study of a 15MW data center &mdash; see Sections 8-10 for full methodology &amp; verification</div>
                </div>

                <!-- Quick Assessment CTA -->
                <div style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-radius: 16px; padding: 1.5rem 2rem; margin: 2rem 0; display: flex; align-items: center; justify-content: space-between; gap: 1.5rem; flex-wrap: wrap;">
                    <div>
                        <div style="font-size: 1.1rem; font-weight: 700; color: #e2e8f0; margin-bottom: 4px;">
                            <i class="fas fa-wrench" style="color: #10b981; margin-right: 6px;"></i>Find Out Why Your PM Compliance Is Stuck Below 85%
                        </div>
                        <div style="font-size: 0.82rem; color: #94a3b8;">Enter 6 parameters &rarr; predicted compliance % + capacity gap analysis + top friction drivers + improvement roadmap. Under 60 seconds.</div>
                    </div>
                    <a href="#section-12" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 24px; background: linear-gradient(135deg, #10b981, #059669); color: #fff; border-radius: 10px; font-size: 0.85rem; font-weight: 600; text-decoration: none; white-space: nowrap; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='none'">
                        <i class="fas fa-chart-line"></i> Start Assessment
                    </a>
                </div>

                <div class="info-box">
                    <div class="info-box-title">Core Thesis</div>
                    <p>Compliance is not about making technicians work harder. It is about making the system work smarter. When the maintenance operating system is correctly engineered, compliance emerges as a natural consequence of well-designed workflows rather than requiring constant supervisory pressure.</p>
                </div>


                <div class="operator-story">
                    <div class="operator-story-label">&#9654; Real Scenario &mdash; Facility X, Monday 07:15 Local Time</div>
                    <blockquote>
                        Ahmad clocks in for his 12-hour shift. He opens the CMMS on the shared desktop at the control room&mdash;it takes <span class="stat-highlight">4 minutes</span> to load. There are <span class="stat-highlight">23 open PM work orders</span> due this week. He prints 6 of them for today's planned maintenance, grabs his toolbox from the central store (an 8-minute walk each way), and heads to the UPS room in Zone C.
                    </blockquote>
                    <blockquote>
                        The first PM is a quarterly battery terminal inspection. The work order template has <span class="stat-highlight">18 fields</span>&mdash;most irrelevant to batteries. He completes the physical check in 20 minutes but spends another <span class="stat-highlight">12 minutes back at the desktop</span> filling in the form. By 10:30, he's completed only 3 of his 6 tasks. A reactive call pulls him away for 90 minutes. The remaining 3 PMs slip to tomorrow, then next week. His compliance this month: <span class="stat-highlight">71%</span>.
                    </blockquote>
                    <blockquote>
                        Ahmad isn't lazy. He isn't untrained. He's trapped in a system where doing maintenance correctly takes <span class="stat-highlight">2.8x longer</span> than the maintenance itself.
                    </blockquote>
                </div>

                <!-- Section 2: The Compliance Paradox -->
                <h2 id="section-2"><span class="section-number">2</span> The Compliance Paradox</h2>

                <p>Across the data center industry, a peculiar pattern repeats itself with remarkable consistency. A new facility achieves 90%+ <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> compliance in its first 6-12 months of operation. Technicians are motivated, procedures are fresh, and management attention is high. Then, gradually and predictably, compliance drifts downward to settle in a band between 70% and 85% -- and stays there<a href="#ref-5" class="cite">[5]</a>.</p>

                <p>This plateau is not random. It is the equilibrium point of a system where the friction of "doing maintenance correctly" matches the organizational pressure to complete it. When management pushes, compliance ticks up temporarily. When attention shifts elsewhere -- to an incident, a project, or an audit -- compliance reverts to its equilibrium.</p>

                <h3>2.1 The Training Fallacy</h3>
                <p>The most common response to declining compliance is training. More toolbox talks, refreshed <span class="term-tooltip" data-tooltip="Standard Operating Procedure: Documented step-by-step instructions for routine operations">SOP</span>s, compliance workshops, and reminder emails. The implicit assumption is that technicians do not understand what to do. In reality, the problem is rarely knowledge -- it is almost always the system environment in which knowledge must be applied.</p>

                <p>Smith and Hinchcliffe<a href="#ref-4" class="cite">[4]</a> documented that 80% of maintenance compliance failures originate in planning and scheduling processes, not in execution quality. Technicians typically know how to perform a task correctly. What they lack is a system environment that makes correct execution the path of least resistance.</p>

                <h3>2.2 The Monitoring Trap</h3>
                <p>The second-most common response is enhanced monitoring: real-time dashboards, daily <span class="term-tooltip" data-tooltip="Key Performance Indicator: A measurable value demonstrating operational effectiveness">KPI</span> reporting, and weekly compliance reviews. While monitoring visibility is necessary, it alone creates a perverse dynamic. Technicians learn to optimize for the metric rather than for the work quality. <span class="term-tooltip" data-tooltip="Work Order: A documented task assigned to maintenance personnel">WO</span>s get closed with "Done" or "OK" as evidence. Physical work may be completed but documentation is minimal. The KPI shows green while actual risk exposure grows.</p>

                <div class="info-box warning">
                    <div class="info-box-title">The 85% Ceiling</div>
                    <p>Across multiple Uptime Institute surveys<a href="#ref-5" class="cite">[5]</a><a href="#ref-6" class="cite">[6]</a>, the industry median PM compliance rate stabilizes between 78% and 85%. Facilities that exceed 95% consistently share one characteristic: they have invested in systems engineering rather than supervisory pressure. The compliance ceiling is not a human limitation -- it is a systems design constraint.</p>
                </div>

                <h3>2.3 Why Pressure Backfires</h3>
                <p>Applying supervisory pressure to a poorly designed system produces three predictable outcomes. First, short-term compliance increases of 5-10 percentage points as technicians rush to close backlog. Second, evidence quality decreases because the system rewards speed over thoroughness. Third, technician morale degrades, creating a negative feedback loop where disengagement further reduces compliance once pressure is released. Moubray<a href="#ref-3" class="cite">[3]</a> identified this cycle as a fundamental limitation of behavior-based maintenance approaches when the operating environment is not concurrently redesigned.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Intervention Type</th>
                                <th>Typical Uplift</th>
                                <th>Sustained?</th>
                                <th>Side Effects</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Training Refresher</td>
                                <td>+3-5 pp</td>
                                <td>2-4 weeks</td>
                                <td>None significant</td>
                            </tr>
                            <tr>
                                <td>Enhanced Monitoring</td>
                                <td>+5-8 pp</td>
                                <td>4-8 weeks</td>
                                <td>Gaming, evidence shortcuts</td>
                            </tr>
                            <tr>
                                <td>Supervisory Pressure</td>
                                <td>+5-10 pp</td>
                                <td>2-6 weeks</td>
                                <td>Morale decline, turnover risk</td>
                            </tr>
                            <tr>
                                <td>Disciplinary Action</td>
                                <td>+3-7 pp</td>
                                <td>1-3 weeks</td>
                                <td>Fear culture, underreporting</td>
                            </tr>
                            <tr>
                                <td><strong>Systems Redesign</strong></td>
                                <td><strong>+15-25 pp</strong></td>
                                <td><strong>Permanent</strong></td>
                                <td><strong>Improved morale, lower turnover</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 3: Root Causes - Systems View -->
                <h2 id="section-3"><span class="section-number">3</span> Root Causes: A Systems View</h2>

                <p>When compliance is analyzed through a systems lens rather than a behavioral one, five dominant root causes emerge repeatedly across facilities of different sizes, geographies, and operational maturity levels. These causes interact nonlinearly -- addressing only one or two produces marginal improvement, while addressing all five simultaneously produces a step-change in performance.</p>


                <!-- Wrench Time / Friction Breakdown Chart -->
                <div class="chart-wrap">
                    <div class="chart-title"><i class="fas fa-chart-pie" style="color:#10b981;margin-right:6px;"></i>Where Does a Technician's Time Actually Go? &mdash; Wrench Time Analysis</div>
                    <canvas id="frictionChart"></canvas>
                    <p style="font-size:0.72rem;color:#334155;margin-top:0.5rem;text-align:center;">Baseline wrench time factor 0.22 = only 22% of paid hours spent on actual maintenance. After systems redesign: 0.34 (+55%).</p>
                </div>

                <h3>3.1 Workflow Friction</h3>
                <p>Workflow friction is the cumulative burden of non-value-adding activities that a technician must navigate between receiving a <span class="term-tooltip" data-tooltip="Work Order: A documented task assigned to maintenance personnel">WO</span> and closing it with acceptable evidence. This includes physical travel time between dispersed equipment rooms, tool retrieval from centralized stores, documentation requirements that are disconnected from the work sequence, and approval chains that introduce waiting time.</p>

                <p>Palmer<a href="#ref-8" class="cite">[8]</a> measured <span class="term-tooltip" data-tooltip="Wrench Time: The percentage of a technician's shift spent performing actual hands-on maintenance work. Industry average: 25-35%. Data centers: 20-28% due to access controls and documentation.">wrench time</span> (actual hands-on-tools time) across industrial maintenance operations and found it typically represents only 25-35% of a technician's shift. The remaining 65-75% is consumed by travel, coordination, documentation, waiting, and breaks. In data center environments where equipment is distributed across multiple secure zones requiring separate access procedures, wrench time can drop to 20-28%.</p>

                <h3>3.2 CMMS Usability</h3>
                <p>The <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> is the nervous system of maintenance operations. When it is poorly configured, difficult to navigate, or requires excessive clicks to complete routine transactions, it becomes a source of friction rather than an enabler. Common anti-patterns include: work order templates that require 15+ mandatory fields when 5-7 are sufficient, inability to attach photos from mobile devices, no offline capability for areas without Wi-Fi coverage, and approval workflows that route through unavailable managers.</p>

                <h3>3.3 Evidence Burden</h3>
                <p>Every maintenance task requires evidence of completion. When evidence standards are unclear or excessively demanding relative to the task complexity, technicians face a choice: spend 40 minutes documenting a 20-minute task, or record minimal evidence and move to the next job. In the absence of clear, proportionate evidence standards, most technicians will -- rationally -- choose the latter.</p>

                <h3>3.4 Scheduling Conflicts</h3>
                <p>Data centers operate 24/7 with concurrent maintenance windows that must be carefully scheduled around customer commitments, redundancy requirements, and <span class="term-tooltip" data-tooltip="Management of Change: Formal process for managing modifications to systems or procedures">MoC</span> procedures. When the <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> schedule is generated without regard to access constraints, vendor availability, or N-1 redundancy windows, tasks accumulate as "blocked" without a clear resolution path. Over time, these blocked tasks become the chronic backlog that depresses compliance metrics.</p>

                <h3>3.5 Escalation Gaps</h3>
                <p>When a task cannot be completed on schedule -- because parts are unavailable, because access is denied, because a vendor failed to appear -- the question becomes: who knows, and what happens next? In many operations, the answer is "nobody" and "nothing." Without an escalation architecture that is calibrated to asset criticality and time-to-risk, blocked tasks simply age until they appear on an overdue report -- at which point the original context has been lost.</p>

                <div class="info-box critical">
                    <div class="info-box-title">Interaction Effect</div>
                    <p>These five causes are not additive -- they are multiplicative. A CMMS with poor usability (cause 2) amplifies the evidence burden (cause 3) which increases workflow friction (cause 1). Similarly, scheduling conflicts (cause 4) create blocked tasks that are invisible due to escalation gaps (cause 5). Addressing causes in isolation typically yields 3-5 pp improvement. Addressing them simultaneously yields 15-25 pp. This is the central insight that distinguishes systems engineering from behavioral intervention.</p>
                </div>

                <!-- Section 4: CMMS as Operating System -->
                <h2 id="section-4"><span class="section-number">4</span> CMMS as Operating System</h2>

                <p>The <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> is frequently treated as a record-keeping tool -- a place where work orders are created, tracked, and closed. This is a fundamental misunderstanding. In a well-run maintenance operation, the CMMS functions as an operating system: it determines the sequence, visibility, accessibility, and evidence capture of every maintenance action. Its design directly determines the upper limit of achievable compliance.</p>

                <p>Drawing on ISO 55001<a href="#ref-2" class="cite">[2]</a> asset management principles and industry benchmarking from Uptime Institute<a href="#ref-5" class="cite">[5]</a>, the following maturity model describes five levels of CMMS deployment. Each level corresponds to a predictable compliance ceiling.</p>

                <h3>4.1 The CMMS Maturity Model</h3>

                <div class="maturity-grid">
                    <div class="maturity-card level-1">
                        <div class="maturity-level">1</div>
                        <div class="maturity-name">Reactive</div>
                        <div class="maturity-desc">Paper-based or spreadsheet tracking. WOs created after failure. No automated scheduling. Compliance ceiling: 50-60%.</div>
                    </div>
                    <div class="maturity-card level-2">
                        <div class="maturity-level">2</div>
                        <div class="maturity-name">Scheduled</div>
                        <div class="maturity-desc">Basic CMMS with PM auto-generation. Limited mobile access. Manual evidence attachment. Compliance ceiling: 70-80%.</div>
                    </div>
                    <div class="maturity-card level-3">
                        <div class="maturity-level">3</div>
                        <div class="maturity-name">Managed</div>
                        <div class="maturity-desc">Full CMMS with mobile, asset hierarchy, KPI dashboards. Structured evidence templates. Compliance ceiling: 85-92%.</div>
                    </div>
                    <div class="maturity-card level-4">
                        <div class="maturity-level">4</div>
                        <div class="maturity-name">Optimized</div>
                        <div class="maturity-desc">CMMS integrated with BMS/DCIM. Auto-verification of sensor readings. Predictive scheduling. Compliance ceiling: 93-97%.</div>
                    </div>
                    <div class="maturity-card level-5">
                        <div class="maturity-level">5</div>
                        <div class="maturity-name">Autonomous</div>
                        <div class="maturity-desc">AI-driven scheduling. Automated evidence via IoT. Self-healing workflows. Compliance ceiling: 97-99%+.</div>
                    </div>
                </div>

                <h3>4.2 CMMS Anti-Patterns</h3>
                <p>Through direct observation across multiple facilities and review of industry literature<a href="#ref-9" class="cite">[9]</a>, the following CMMS anti-patterns consistently correlate with compliance below 80%:</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Anti-Pattern</th>
                                <th>Symptom</th>
                                <th>Compliance Impact</th>
                                <th>Fix Complexity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Excessive Mandatory Fields</td>
                                <td>15+ fields per WO closure</td>
                                <td>-8 to -12 pp</td>
                                <td>Low (config change)</td>
                            </tr>
                            <tr>
                                <td>No Mobile Interface</td>
                                <td>Desktop-only WO closure</td>
                                <td>-10 to -15 pp</td>
                                <td>Medium (procurement)</td>
                            </tr>
                            <tr>
                                <td>Missing Asset Hierarchy</td>
                                <td>Flat asset list, no parent-child</td>
                                <td>-5 to -8 pp</td>
                                <td>High (data migration)</td>
                            </tr>
                            <tr>
                                <td>Generic WO Templates</td>
                                <td>Same template for all PM types</td>
                                <td>-6 to -10 pp</td>
                                <td>Low (template design)</td>
                            </tr>
                            <tr>
                                <td>Absent Offline Mode</td>
                                <td>No coverage in MER/plant rooms</td>
                                <td>-8 to -12 pp</td>
                                <td>Medium (feature request)</td>
                            </tr>
                            <tr>
                                <td>Approval Bottleneck</td>
                                <td>Single-person approval chain</td>
                                <td>-5 to -8 pp</td>
                                <td>Low (workflow redesign)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>4.3 The CMMS as Compliance Enabler</h3>
                <p>When the CMMS is treated as an operating system, its configuration directly enables compliance. Critical capabilities include: asset-specific WO templates with pre-populated evidence checklists, mobile-first interfaces with photo capture and <span class="term-tooltip" data-tooltip="QR Code: Quick Response code used for rapid asset identification and task linking">QR</span> code scanning, automated escalation triggers based on asset criticality, integration with <span class="term-tooltip" data-tooltip="Building Management System: Centralized system for monitoring building infrastructure">BMS</span>/<span class="term-tooltip" data-tooltip="Data Center Infrastructure Management: Software for monitoring and managing data center physical infrastructure">DCIM</span> for automated sensor reading capture, and role-based dashboards that show each technician their personal task queue with clear priority ordering.</p>

                <p>The most impactful single change observed across multiple facilities is the transition from generic work order templates to asset-specific templates with embedded evidence checklists. This change typically improves evidence completeness by 25-40 percentage points and reduces WO closure time by 30-45% by eliminating ambiguity about what constitutes acceptable evidence<a href="#ref-4" class="cite">[4]</a>.</p>

                <!-- Article Image 2 -->
                <figure style="margin: 2rem 0; text-align: center;">
                    <img src="Article/Article_3 02.02.26/3.2.jpg" alt="Workflow friction analysis in cooling infrastructure and thermal management operations" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
                </figure>

                <!-- Section 5: Workflow Friction Analysis -->
                <h2 id="section-5"><span class="section-number">5</span> Workflow Friction Analysis</h2>

                <p>Workflow friction is the silent killer of maintenance compliance. Unlike equipment failures or staff shortages -- which are visible and trigger management response -- workflow friction is distributed across hundreds of micro-delays that individually seem trivial but collectively consume 60-75% of available maintenance capacity.</p>

                <p>Palmer's seminal work on maintenance planning<a href="#ref-8" class="cite">[8]</a> established the concept of "wrench time" as the percentage of a technician's shift spent performing actual hands-on maintenance work. Across industries, wrench time averages 25-35%. In data centers, the unique security, access control, and documentation requirements further reduce this to 20-28%.</p>

                <h3>5.1 Travel Time</h3>
                <p>In a multi-hall data center facility, travel between equipment locations can consume 15-25% of shift time. This includes walking between data halls, traversing to plant rooms on different floors, accessing external fuel storage or water treatment areas, and returning to offices for documentation. Each trip requires badge access through security checkpoints and potentially changing into or out of <span class="term-tooltip" data-tooltip="Personal Protective Equipment: Safety gear required in specific work areas">PPE</span>. A typical 15MW facility with 4 data halls, 2 plant floors, and external infrastructure can require 8-12 location transitions per shift.</p>

                <h3>5.2 Tool and Material Access</h3>
                <p>Centralized tool stores with sign-out procedures add 10-20 minutes per tool retrieval event. When a technician arrives at an equipment location and discovers a needed tool or part is missing, the round-trip to retrieve it creates a context switch that compounds the original time loss. Levitt<a href="#ref-9" class="cite">[9]</a> estimates that each context switch costs 8-15 minutes in re-orientation, representing a total shift tax of 5-12% for a technician performing 3-5 varied tasks.</p>

                <h3>5.3 Documentation Burden</h3>
                <p>The documentation burden encompasses all activities required to create evidence of work completion: recording readings, taking photographs, attaching calibration certificates, updating asset registers, and writing completion narratives. When documentation requirements are poorly designed, they create a disproportionate time burden relative to the physical work. The optimal documentation-to-work ratio is approximately 1:3 to 1:4 (15-25 minutes of documentation for every 60 minutes of physical work). When this ratio exceeds 1:2, technicians begin shortcutting evidence capture.</p>

                <h3>5.4 Approval Chains</h3>
                <p>Multi-level approval chains create waiting time that directly reduces compliance. In the most dysfunctional cases, a completed <span class="term-tooltip" data-tooltip="Work Order: A documented task assigned to maintenance personnel">WO</span> requires: technician submission, supervisor review, quality verification, and manager approval -- with each step introducing 4-24 hours of latency. If any approver is unavailable (on leave, in meetings, or working different shifts), the WO sits open indefinitely. The compliance metric penalizes this delay identically to work that was never performed.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Effective Capacity Formula</div>
                    <p><strong>Effective Capacity = Headcount x Hours/Shift x Wrench Time Factor x Availability Factor</strong></p>
                    <p style="margin-top: 0.5rem; font-size: 0.8rem;">Where Wrench Time Factor = 0.25 to 0.35 (industry) or 0.20 to 0.28 (data center)</p>
                    <p style="font-size: 0.8rem;">And Availability Factor accounts for leave, training, and administrative duties (typically 0.80 to 0.90)</p>
                    <p style="margin-top: 0.5rem; font-size: 0.8rem;"><strong>Example:</strong> 6 technicians x 160 hrs/month x 0.25 wrench time x 0.85 availability = <strong>204 effective hours/month</strong></p>
                </div>

                <h3>5.5 Friction Reduction Strategies</h3>
                <p>The following strategies, drawn from lean maintenance principles and direct operational experience, have demonstrated measurable friction reduction:</p>

                <ul>
                    <li><strong>Zone-based task allocation:</strong> Assign tasks by physical location rather than system type, reducing travel time by 30-50%</li>
                    <li><strong>Distributed tool kits:</strong> Place standardized tool sets at each major equipment zone, eliminating centralized store trips</li>
                    <li><strong>Mobile-first documentation:</strong> Enable photo capture, QR scanning, and voice-to-text from handheld devices at the point of work</li>
                    <li><strong>Parallel approval:</strong> Route approvals in parallel rather than sequential chains; auto-approve low-criticality WOs</li>
                    <li><strong>Pre-staged materials:</strong> Kit parts for upcoming PMs during planning phase, placed at work location before execution date</li>
                </ul>

                <!-- Section 6: Evidence Engineering -->
                <h2 id="section-6"><span class="section-number">6</span> Evidence Engineering</h2>

                <p>Evidence engineering is the deliberate design of evidence capture processes so that documenting work completion is integrated into the work sequence rather than appended to it. The distinction is critical: in traditional approaches, evidence is an afterthought -- something a technician must remember to create after the physical work is done. In an engineered approach, evidence capture is embedded within each step of the work procedure, making it impossible to complete the task without simultaneously creating the evidence.</p>

                <h3>6.1 Photo Standards</h3>
                <p>Unstructured photo requirements ("take a photo of the work") produce inconsistent, often useless evidence. Engineered photo standards specify: the exact subject (e.g., "filter housing after replacement, showing new filter label"), the required angle and framing, the inclusion of date-stamped reference objects, and the minimum count per task type. For critical <span class="term-tooltip" data-tooltip="Heating, Ventilation, and Air Conditioning: Climate control systems in data centers">HVAC</span> maintenance, a standardized photo protocol might require: before-photo of filter condition, photo of replacement filter model number, after-photo of installed filter, and photo of differential pressure gauge reading post-installation.</p>

                <h3>6.2 Digital Signatures and Timestamps</h3>
                <p>Paper-based sign-off is a compliance liability. Digital signatures linked to technician identity provide non-repudiable evidence of who performed the work and when. Combined with GPS or beacon-based location verification, digital signatures can confirm that the technician was physically at the asset location when the WO was closed -- eliminating "desk closures" where WOs are completed administratively without physical verification.</p>

                <h3>6.3 Sensor Auto-Verification</h3>
                <p>For tasks where the acceptance criterion is a measurable parameter (temperature within range, pressure differential below threshold, voltage within tolerance), integration between the <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> and <span class="term-tooltip" data-tooltip="Building Management System: Centralized system for monitoring building infrastructure">BMS</span>/<span class="term-tooltip" data-tooltip="Data Center Infrastructure Management: Software for monitoring and managing data center physical infrastructure">DCIM</span> can automate evidence capture. When a technician marks a <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> task as complete, the system automatically captures the relevant sensor reading at that timestamp. This eliminates manual reading transcription errors and provides tamper-proof evidence of post-maintenance condition. ASHRAE TC 9.9<a href="#ref-11" class="cite">[11]</a> provides reference thresholds for environmental monitoring in data center environments.</p>

                <h3>6.4 QR-Linked Checklists</h3>
                <p><span class="term-tooltip" data-tooltip="QR Code: Quick Response code used for rapid asset identification and task linking">QR</span> codes affixed to equipment provide a direct link between the physical asset and its digital maintenance record. Scanning the QR code at the asset location opens the specific checklist for the current PM task, pre-populated with asset details, previous readings, and acceptance criteria. This eliminates the need to search for the correct WO in the CMMS, navigate to the right asset, and locate the applicable checklist -- saving 3-8 minutes per task and ensuring the technician is working on the correct asset.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Evidence Method</th>
                                <th>Time per Task</th>
                                <th>Reliability</th>
                                <th>Fraud Resistance</th>
                                <th>Implementation Cost</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Paper checklist</td>
                                <td>8-15 min</td>
                                <td>Low</td>
                                <td>Very Low</td>
                                <td>Minimal</td>
                            </tr>
                            <tr>
                                <td>Generic CMMS form</td>
                                <td>5-10 min</td>
                                <td>Medium</td>
                                <td>Low</td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>Structured photo protocol</td>
                                <td>3-6 min</td>
                                <td>High</td>
                                <td>Medium</td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>QR-linked checklist</td>
                                <td>2-5 min</td>
                                <td>High</td>
                                <td>High</td>
                                <td>Medium</td>
                            </tr>
                            <tr>
                                <td>Sensor auto-verification</td>
                                <td>0-1 min</td>
                                <td>Very High</td>
                                <td>Very High</td>
                                <td>High</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>6.5 Evidence Proportionality</h3>
                <p>A common mistake is applying the same evidence rigor to all tasks regardless of criticality. Changing a light bulb in a corridor does not require the same evidence depth as servicing a <span class="term-tooltip" data-tooltip="Uninterruptible Power Supply: Battery-backed system providing emergency power">UPS</span> static switch. Evidence requirements should be proportional to asset criticality and failure consequence. A three-tier model works well in practice:</p>

                <ul>
                    <li><strong>Tier A (Critical):</strong> <span class="term-tooltip" data-tooltip="Uninterruptible Power Supply: Battery-backed system providing emergency power">UPS</span>, <span class="term-tooltip" data-tooltip="Automatic Transfer Switch: Device that automatically transfers power between sources">ATS</span>, generators, <span class="term-tooltip" data-tooltip="Power Distribution Unit: Device distributing electric power to rack-mounted equipment">PDU</span>s, chillers -- Full photo protocol, sensor auto-capture, supervisor sign-off, digital timestamp</li>
                    <li><strong>Tier B (Important):</strong> <span class="term-tooltip" data-tooltip="Computer Room Air Handler: Precision cooling unit for data center environments">CRAH</span> units, pumps, fire suppression -- Photo protocol, technician sign-off, sensor capture where available</li>
                    <li><strong>Tier C (Standard):</strong> Lighting, minor valves, non-critical sensors -- Completion confirmation, optional photo, technician sign-off only</li>
                </ul>

                <!-- Section 7: Escalation Architecture -->
                <h2 id="section-7"><span class="section-number">7</span> Escalation Architecture</h2>

                <p>Escalation architecture is the structured framework that determines what happens when a maintenance task cannot be completed as scheduled. In the absence of explicit escalation rules, blocked tasks enter a gray zone where no one is accountable for resolution, and the task simply ages until it appears on an overdue report -- by which point the context has been lost and the risk exposure may have already materialized.</p>

                <p>HSE HSG65<a href="#ref-10" class="cite">[10]</a> establishes the principle that risk controls must include defined escalation pathways proportional to the consequence of control failure. Applied to maintenance compliance, this means that the escalation response to an overdue <span class="term-tooltip" data-tooltip="Uninterruptible Power Supply: Battery-backed system providing emergency power">UPS</span> battery test must be fundamentally different from the escalation response to an overdue corridor light replacement. The 4-tier model below implements this principle.</p>

                <h3>7.1 The 4-Tier Escalation Model</h3>

                <div class="escalation-grid">
                    <div class="escalation-card tier-1">
                        <div class="escalation-tier">T1</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">Pre-emptive Alert (T-7 days)</h4>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;"><strong>Trigger:</strong> PM due date approaching, task not yet started. <strong>Action:</strong> Automated CMMS notification to assigned technician and shift lead. Dashboard highlighting of upcoming due dates. No management involvement required. <strong>Owner:</strong> Shift Lead. <strong>Escalation window:</strong> 7 days before due date.</p>
                        </div>
                    </div>
                    <div class="escalation-card tier-2">
                        <div class="escalation-tier">T2</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">Active Intervention (T-3 days)</h4>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;"><strong>Trigger:</strong> Task not started and due within 3 days, OR task blocked with no resolution plan. <strong>Action:</strong> Supervisor reviews blocker, reassigns if needed, arranges parts/access/vendor. Documented blocker reason in CMMS. <strong>Owner:</strong> Maintenance Supervisor. <strong>Escalation window:</strong> 3 days before due date.</p>
                        </div>
                    </div>
                    <div class="escalation-card tier-3">
                        <div class="escalation-tier">T3</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">Management Override (T+1 day overdue)</h4>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;"><strong>Trigger:</strong> Task overdue by 24+ hours AND asset criticality is Tier A or B. <strong>Action:</strong> Operations Manager receives escalation with risk assessment. Decision required: expedite, defer with risk acceptance, or invoke emergency maintenance window. Documented risk acceptance if deferred. <strong>Owner:</strong> Operations Manager. <strong>Escalation window:</strong> 24 hours after due date.</p>
                        </div>
                    </div>
                    <div class="escalation-card tier-4">
                        <div class="escalation-tier">T4</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">Executive Risk Review (T+7 days overdue)</h4>
                            <p style="margin: 0; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;"><strong>Trigger:</strong> Tier A task overdue by 7+ days, OR cumulative backlog exceeds 15% of monthly <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> volume. <strong>Action:</strong> Facility Director / VP of Operations briefing. Systemic blocker analysis required. May trigger resource reallocation, vendor escalation, or temporary operating restrictions. <strong>Owner:</strong> Facility Director. <strong>Escalation window:</strong> Weekly leadership review.</p>
                        </div>
                    </div>
                </div>

                <h3>7.2 Escalation as a Learning System</h3>
                <p>Beyond its immediate function of ensuring task completion, the escalation architecture serves as a learning system. By requiring documented blocker reasons at Tier 2 and risk acceptance decisions at Tier 3, the organization builds a dataset of systemic constraints. Monthly analysis of escalation patterns reveals recurring blockers -- vendor reliability issues, parts availability gaps, access scheduling conflicts -- that can be addressed through process improvement rather than repeated escalation. IEEE 3007.2<a href="#ref-12" class="cite">[12]</a> recommends this approach for reliability improvement in critical power systems maintenance.</p>

                <p>Gulati and Smith<a href="#ref-13" class="cite">[13]</a> emphasize that escalation systems should be designed to surface systemic issues rather than merely accelerate individual task completion. The most effective escalation architectures produce monthly reports that answer: "What are the top 5 recurring reasons that <span class="term-tooltip" data-tooltip="Preventive Maintenance: Scheduled tasks to prevent equipment failure">PM</span> tasks are blocked, and what structural changes would eliminate these blockers?"</p>

                <!-- Section 8: Case Context -->
                <h2 id="section-8"><span class="section-number">8</span> Case Context</h2>

                <p>The following case context describes a real operational environment where the principles discussed in Sections 2-7 were applied. Details have been generalized to protect confidentiality while preserving the analytical integrity of the example.</p>

                <h3>8.1 Facility Profile</h3>
                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>IT Load Capacity</td><td>15 MW</td></tr>
                            <tr><td>Topology</td><td>Concurrently Maintainable (N+1 / 2N)</td></tr>
                            <tr><td>Data Halls</td><td>4 (3 operational, 1 commissioning)</td></tr>
                            <tr><td>Maintenance Technicians</td><td>6 (2 per shift, 3 shifts)</td></tr>
                            <tr><td>Monthly PM Tasks</td><td>~1,200 (auto-generated from CMMS)</td></tr>
                            <tr><td>Backlog at Baseline</td><td>~85 overdue tasks</td></tr>
                            <tr><td>CMMS Maturity at Baseline</td><td>Level 2 (Scheduled)</td></tr>
                            <tr><td>Baseline Compliance</td><td>74%</td></tr>
                            <tr><td><span class="term-tooltip" data-tooltip="Service Level Agreement: Contractual performance commitment">SLA</span> Target</td><td>95% PM compliance</td></tr>
                        </tbody>
                    </table>
                </div>

                <h3>8.2 Baseline Condition Analysis</h3>
                <p>At 74% compliance, approximately 312 of the 1,200 monthly PM tasks were either not completed on schedule, completed without adequate evidence, or still open from previous periods. The backlog of 85 overdue tasks represented approximately one week of total team capacity, creating a chronic deficit that made achieving the 95% <span class="term-tooltip" data-tooltip="Service Level Agreement: Contractual performance commitment">SLA</span> mathematically impossible without systemic change.</p>

                <p>Root cause analysis using the five-factor framework (Section 3) revealed the following distribution:</p>
                <ul>
                    <li><strong>Workflow friction (35%):</strong> Excessive travel time between zones, centralized tool stores, desktop-only CMMS access</li>
                    <li><strong>CMMS usability (25%):</strong> 18 mandatory fields per WO closure, no mobile interface, generic templates</li>
                    <li><strong>Evidence burden (20%):</strong> Unclear evidence requirements, paper-based supplementary checklists, manual reading transcription</li>
                    <li><strong>Scheduling conflicts (12%):</strong> PMs scheduled during customer maintenance windows, no vendor pre-coordination</li>
                    <li><strong>Escalation gaps (8%):</strong> No formal escalation pathway, blocked tasks visible only on monthly overdue report</li>
                </ul>

                <h3>8.3 Capacity Analysis</h3>
                <p>Using the effective capacity formula from Section 5:</p>

                <div class="formula-box">
                    <div class="formula-box-title">Baseline Capacity Assessment</div>
                    <p>Raw Capacity = 6 technicians x 160 hrs/month = <strong>960 hrs/month</strong></p>
                    <p>Effective Capacity (High Friction) = 960 x 0.55 = <strong>528 hrs/month</strong></p>
                    <p>Total Demand = (1,200 tasks x 1.5 hrs) + (85 backlog x 1.5 hrs x 0.3) = <strong>1,838 hrs/month</strong></p>
                    <p style="margin-top: 0.5rem;"><strong>Capacity Ratio = 528 / 1,838 = 28.7%</strong> -- Severe structural understaffing when friction is high</p>
                </div>

                <p>This analysis revealed a critical insight: at the prevailing friction level, even doubling the headcount would not achieve 95% compliance. The constraint was not headcount -- it was system design. Reducing friction from "High" to "Low" would transform the same 6 technicians from 528 to 816 effective hours, a 55% capacity increase without adding a single person.</p>

                <!-- Section 9: The Intervention -->
                <h2 id="section-9"><span class="section-number">9</span> The Intervention: 74% to 97.2%</h2>

                <p>The intervention was designed as an 8-step systems redesign program executed over 18 weeks. Critically, no headcount was added and no personnel changes were made. Every improvement was achieved through workflow engineering, <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> configuration, and process architecture changes.</p>

                <div class="step-grid">
                    <div class="step-card">
                        <div class="step-card-number">1</div>
                        <div class="step-card-title">CMMS Template Redesign</div>
                        <div class="step-card-desc">Replaced 18-field generic template with asset-specific templates (5-7 fields). Embedded photo checklists and acceptance criteria per PM type. Reduced WO closure time from 12 min to 4 min.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">2</div>
                        <div class="step-card-title">Mobile CMMS Deployment</div>
                        <div class="step-card-desc">Deployed mobile CMMS on ruggedized tablets with offline capability. Enabled point-of-work photo capture, QR asset scanning, and digital signature. Eliminated desktop return trips.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">3</div>
                        <div class="step-card-title">Zone-Based Task Allocation</div>
                        <div class="step-card-desc">Restructured PM scheduling from system-based (all UPS tasks, then all HVAC tasks) to zone-based (all tasks in Zone A, then Zone B). Reduced travel time by 40%.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">4</div>
                        <div class="step-card-title">Distributed Tool Kits</div>
                        <div class="step-card-desc">Placed standardized tool kits in each major plant zone (4 locations). Eliminated 85% of centralized store trips. Saved 45-60 min per tech per shift.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">5</div>
                        <div class="step-card-title">Evidence Tiering</div>
                        <div class="step-card-desc">Implemented 3-tier evidence model (Critical/Important/Standard). Reduced documentation burden on routine tasks by 60% while increasing evidence depth on critical assets.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">6</div>
                        <div class="step-card-title">4-Tier Escalation</div>
                        <div class="step-card-desc">Deployed automated escalation triggers at T-7, T-3, T+1, and T+7 thresholds. Linked to asset criticality tiers. Supervisor review of all T2 escalations within 4 hours.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">7</div>
                        <div class="step-card-title">Shift Handover Protocol</div>
                        <div class="step-card-desc">Mandatory 15-min handover with structured checklist: open WOs, blocked tasks, upcoming due dates, risk exposures. Digital handover log in CMMS.</div>
                    </div>
                    <div class="step-card">
                        <div class="step-card-number">8</div>
                        <div class="step-card-title">Backlog Burn-Down Sprint</div>
                        <div class="step-card-desc">Dedicated 3-week sprint to clear 85-task backlog using overtime and vendor support. Reduced chronic overdue from 85 to 12 tasks, enabling steady-state compliance.</div>
                    </div>
                </div>

                <h3>9.1 Implementation Timeline</h3>
                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Phase</th>
                                <th>Weeks</th>
                                <th>Steps</th>
                                <th>Expected Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Foundation</td>
                                <td>1-4</td>
                                <td>Steps 1, 2, 8</td>
                                <td>Backlog reduction, mobile enablement</td>
                            </tr>
                            <tr>
                                <td>Optimization</td>
                                <td>5-10</td>
                                <td>Steps 3, 4, 5</td>
                                <td>Friction reduction, evidence clarity</td>
                            </tr>
                            <tr>
                                <td>Institutionalization</td>
                                <td>11-18</td>
                                <td>Steps 6, 7</td>
                                <td>Sustained compliance, systemic learning</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 10: Results & Verification -->
                <h2 id="section-10"><span class="section-number">10</span> Results &amp; Verification</h2>

                <p>The 8-step intervention produced measurable results across all five root cause dimensions. The following before/after comparison documents the changes observed over the 18-week implementation period, verified through independent audit sampling.</p>

                <h3>10.1 Before vs After Comparison</h3>
                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Before (Baseline)</th>
                                <th>After (Week 18)</th>
                                <th>Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>PM Compliance Rate</td>
                                <td>74.0%</td>
                                <td>97.2%</td>
                                <td style="color: #10b981; font-weight: 700;">+23.2 pp</td>
                            </tr>
                            <tr>
                                <td>Evidence Completeness</td>
                                <td>52%</td>
                                <td>94%</td>
                                <td style="color: #10b981; font-weight: 700;">+42 pp</td>
                            </tr>
                            <tr>
                                <td>Overdue Backlog</td>
                                <td>85 tasks</td>
                                <td>8 tasks</td>
                                <td style="color: #10b981; font-weight: 700;">-91%</td>
                            </tr>
                            <tr>
                                <td>Avg WO Closure Time</td>
                                <td>12.4 min</td>
                                <td>4.2 min</td>
                                <td style="color: #10b981; font-weight: 700;">-66%</td>
                            </tr>
                            <tr>
                                <td>Wrench Time Factor</td>
                                <td>0.22</td>
                                <td>0.34</td>
                                <td style="color: #10b981; font-weight: 700;">+55%</td>
                            </tr>
                            <tr>
                                <td>Effective Capacity (hrs/month)</td>
                                <td>528</td>
                                <td>816</td>
                                <td style="color: #10b981; font-weight: 700;">+55%</td>
                            </tr>
                            <tr>
                                <td>Escalation-to-Completion Rate</td>
                                <td>N/A (no system)</td>
                                <td>92%</td>
                                <td style="color: #10b981; font-weight: 700;">New metric</td>
                            </tr>
                            <tr>
                                <td>Audit Findings (PM-related)</td>
                                <td>14 findings</td>
                                <td>2 findings</td>
                                <td style="color: #10b981; font-weight: 700;">-86%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <!-- Before / After Comparison Chart -->
                <div class="chart-wrap" style="margin-top:1.5rem;">
                    <div class="chart-title"><i class="fas fa-chart-bar" style="color:#10b981;margin-right:6px;"></i>Before vs After &mdash; 18-Week Systems Redesign Impact</div>
                    <canvas id="beforeAfterChart"></canvas>
                    <p style="font-size:0.72rem;color:#334155;margin-top:0.5rem;text-align:center;">All improvements achieved through systems engineering. Zero headcount added, zero personnel changes.</p>
                </div>

                <h3>10.2 Verification Methodology</h3>
                <p>To ensure results reflected genuine operational improvement rather than metric gaming, the following verification methods were applied:</p>
                <ul>
                    <li><strong>Random WO sampling:</strong> Weekly random audit of 20 closed WOs, checking evidence completeness against asset-specific requirements. Pass rate improved from 48% to 91%.</li>
                    <li><strong>Physical spot-checks:</strong> Monthly unannounced verification of 10 "completed" PM tasks by cross-checking physical asset condition against WO evidence. Discrepancy rate dropped from 22% to 3%.</li>
                    <li><strong>Rework rate tracking:</strong> Monitoring <span class="term-tooltip" data-tooltip="Corrective Maintenance: Unplanned maintenance to restore equipment after failure">CM</span> incidents within 30 days of PM completion for the same asset. Rate decreased from 8.5% to 2.1%, indicating genuine maintenance quality improvement, not just documentation improvement.</li>
                    <li><strong><span class="term-tooltip" data-tooltip="Mean Time Between Failures: Average time between equipment failures">MTBF</span> trend analysis:</strong> 6-month trailing MTBF for critical assets showed 15% improvement, correlating with improved PM quality and reduced backlog.</li>
                </ul>

                <div class="info-box">
                    <div class="info-box-title">Key Verification Finding</div>
                    <p>The rework rate reduction (8.5% to 2.1%) was the strongest evidence that compliance improvement was substantive rather than cosmetic. When PM tasks are genuinely completed to standard, the incidence of related corrective maintenance decreases measurably. This metric is resistant to gaming because it correlates with actual equipment condition rather than documentation completeness.</p>
                </div>


    <!-- Section 10b: Monte Carlo Compliance Simulation -->
    <section class="mc-section" id="sec10mc" style="max-width:900px;margin:3rem auto;">
        <div class="mc-header">
            <div class="mc-icon">&#127922;</div>
            <div>
                <div class="mc-title">Monte Carlo Compliance Simulation</div>
                <div class="mc-subtitle">Section 10b &mdash; 10,000 iterations with randomized inputs &rarr; probability distributions for compliance outcomes</div>
            </div>
        </div>
        <p style="color:#64748b;font-size:0.85rem;line-height:1.6;margin-bottom:1rem;">The Compliance Predictor gives a single-point estimate. Reality is uncertain. This simulation varies each input parameter within your specified uncertainty range, runs 10,000 scenarios, and reveals the <strong style="color:#a78bfa;">P10 / P50 / P90</strong> envelope &mdash; the range within which 80% of real-world outcomes fall.</p>

        <div class="mc-controls">
            <div class="mc-control">
                <label>Monthly PM Tasks <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Monthly PM Tasks</div><div class="tooltip-desc">Total scheduled preventive maintenance work orders per month across all asset classes.</div><div class="tooltip-formula">Typical: 50-500 tasks/mo depending on facility size</div></span></span></label>
                <input type="number" id="mc3Tasks" value="1200" min="50" max="50000">
            </div>
            <div class="mc-control">
                <label>Technicians <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Available Technicians</div><div class="tooltip-desc">Number of maintenance technicians available for PM execution. Does not include contractors or supervisors.</div></span></span></label>
                <input type="number" id="mc3Techs" value="6" min="1" max="50">
            </div>
            <div class="mc-control">
                <label>Avg Task Duration (hrs) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Monte Carlo — Task Duration</div><div class="tooltip-desc">Baseline average PM task duration for simulation. Varies around this mean using the selected uncertainty range.</div></span></span></label>
                <input type="number" id="mc3Duration" value="1.5" min="0.25" max="8" step="0.25">
            </div>
            <div class="mc-control">
                <label>Uncertainty Range <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Monte Carlo — Uncertainty</div><div class="tooltip-desc">How much simulation inputs vary around their mean. Higher uncertainty = wider confidence intervals.</div><div class="tooltip-formula">&pm;10% verified data &middot; &pm;20% typical &middot; &pm;50% rough</div></span></span></label>
                <select id="mc3Uncertainty">
                    <option value="0.1">&pm;10% (high confidence)</option>
                    <option value="0.2" selected>&pm;20% (typical)</option>
                    <option value="0.3">&pm;30% (uncertain)</option>
                    <option value="0.5">&pm;50% (highly uncertain)</option>
                </select>
            </div>
        </div>

        <button class="mc-run-btn" id="mc3RunBtn" onclick="runMC3()"><i class="fas fa-play"></i> Run 10,000 Simulations</button>

        <div id="mc3Progress" style="display:none;align-items:center;gap:8px;margin:0.5rem 0;">
            <div style="flex:1;height:6px;background:rgba(30,58,95,0.5);border-radius:3px;overflow:hidden;">
                <div id="mc3ProgressFill" style="width:0%;height:100%;background:linear-gradient(90deg,#7c3aed,#a855f7);transition:width 0.1s;"></div>
            </div>
            <span id="mc3ProgressText" style="font-size:0.7rem;color:#94a3b8;white-space:nowrap;">0 / 10,000</span>
        </div>

        <div id="mc3ResultsGrid" class="mc-results-grid" style="display:none;">
            <div class="mc-stat"><div class="mc-stat-label">Compliance %</div><div class="mc-stat-value" id="mc3CompP50">--</div><div class="mc-stat-range" id="mc3CompRange">P10 -- P90</div></div>
            <div class="mc-stat"><div class="mc-stat-label">Capacity Ratio</div><div class="mc-stat-value" id="mc3CapP50">--</div><div class="mc-stat-range" id="mc3CapRange">P10 -- P90</div></div>
            <div class="mc-stat"><div class="mc-stat-label">Backlog Growth/mo</div><div class="mc-stat-value" id="mc3BlP50">--</div><div class="mc-stat-range" id="mc3BlRange">P10 -- P90</div></div>
            <div class="mc-stat"><div class="mc-stat-label">P(&gt;95% compliance)</div><div class="mc-stat-value" id="mc3Prob95">--</div><div class="mc-stat-range">Probability of meeting target</div></div>
        </div>

        <div id="mc3ChartWrap" style="display:none;margin-top:1rem;">
            <canvas id="mc3HistChart" style="max-height:240px;"></canvas>
        </div>
    </section>

    <!-- Section 10c: Interactive Sankey Diagram -->
    <section class="sankey-section" id="sec10sk" style="max-width:900px;margin:3rem auto;">
        <div>
            <div class="sankey-title">PM Task Flow &mdash; Where Do Tasks Get Blocked?</div>
            <div class="sankey-subtitle">Section 10c &mdash; Interactive Sankey &mdash; How 1,200 monthly PM tasks flow through the maintenance system. Hover for details.</div>
        </div>
        <svg id="sankeyChart3"></svg>
    </section>

                <!-- Section 11: Interactive Compliance Canvas -->
                <h2 id="section-11"><span class="section-number">11</span> Interactive: Compliance Canvas</h2>

                <p>The interactive chart below demonstrates how workflow friction and evidence standard clarity affect maintenance compliance outcomes over a 12-week period. The simulation models the transition from an un-engineered system (weeks 1-6) to an engineered system (weeks 7-12). Adjust the sliders to explore the relationship between system design parameters and compliance outcomes.</p>

                <!-- Interactive Dashboard -->
                <div class="dashboard-container">
                    <div class="dashboard-title">Maintenance Compliance Trend: Before vs After</div>
                    <div class="dashboard-subtitle">Interactive simulation -- adjust parameters to see compliance impact</div>

                    <div class="chart-wrapper">
                        <canvas id="complianceChart" class="chart-canvas" width="800" height="400"></canvas>
                    </div>

                    <div class="controls-grid">
                        <div class="control-card">
                            <div class="control-label">
                                <span class="control-label-icon friction">!</span>
                                Workflow Friction Level
                            </div>
                            <input type="range" id="frictionSlider" class="control-slider friction" min="0" max="100" value="65">
                            <div class="control-value">
                                <span>Low (Streamlined)</span>
                                <span class="current-val" id="frictionVal">65%</span>
                                <span>High (Complex)</span>
                            </div>
                        </div>
                        <div class="control-card">
                            <div class="control-label">
                                <span class="control-label-icon evidence">+</span>
                                Evidence Standard Clarity
                            </div>
                            <input type="range" id="evidenceSlider" class="control-slider evidence" min="0" max="100" value="40">
                            <div class="control-value">
                                <span>Undefined</span>
                                <span class="current-val" id="evidenceVal">40%</span>
                                <span>Well-Defined</span>
                            </div>
                        </div>
                    </div>

                    <div class="legend-row">
                        <div class="legend-item">
                            <span class="legend-dot compliance"></span>
                            PM Compliance Rate (%)
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot evidence"></span>
                            Evidence Quality Score (%)
                        </div>
                    </div>

                    <div class="callout-cards">
                        <div class="callout-card">
                            <div class="callout-label">Before Avg</div>
                            <div class="callout-value amber" id="beforeAvg">58%</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">After Avg</div>
                            <div class="callout-value green" id="afterAvg">89%</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Improvement</div>
                            <div class="callout-value blue" id="improvement">+31pp</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Variance Reduction</div>
                            <div class="callout-value green" id="varianceReduction">-62%</div>
                        </div>
                    </div>
                </div>

                <!-- Tooltip Container (must exist in DOM for JS tooltips) -->
                <div id="maint-tooltip-container"></div>

                <!-- Section 12: Calculator -->
                <h2 id="section-12"><span class="section-number">12</span> Maintenance Compliance Predictor</h2>

                <p>The calculator below implements the Maintenance Compliance Predictor model discussed throughout this article. Input your facility's parameters to estimate predicted compliance, identify capacity gaps, and model the impact of system improvements. The model uses the friction, CMMS maturity, and evidence clarity modifiers derived from the analysis framework.</p>

                <div class="calculator-section">
                    <h3 class="calculator-title">Maintenance Compliance Predictor</h3>
                    <p class="calculator-subtitle">Model your facility's compliance potential based on system design parameters</p>

                    <!-- Mode Toggle + Action Buttons -->
                    <div class="maint-toolbar-row">
                        <div class="maint-mode-bar">
                            <button class="maint-mode-btn active" id="maintModeFree" data-mode="free" onclick="switchMaintMode('free')"><i class="fas fa-chart-simple"></i> Free Assessment</button>
                            <button class="maint-mode-btn" id="maintModePro" data-mode="pro" onclick="switchMaintMode('pro')"><i class="fas fa-microscope"></i> Pro Analysis <span class="gated-badge" id="maintProBadge">PRO</span></button>
                        </div>
                        <div class="maint-toolbar-actions">
                            <button class="maint-action-btn" onclick="maintResetDefaults()" style="padding:8px 14px;font-size:0.78rem;"><i class="fas fa-rotate-left"></i> Reset</button>
                            <button class="maint-action-btn primary" id="maintBtnPdf" onclick="maintShowLogin()" style="padding:8px 14px;font-size:0.78rem;"><i class="fas fa-file-pdf"></i> Export PDF</button>
                        </div>
                    </div>

                    <!-- Free Inputs -->
                    <div class="calc-grid">
                        <div class="calc-input-group">
                            <label class="calc-label">PM Tasks / Month <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">PM Task Volume</div><div class="tooltip-desc">Total scheduled preventive maintenance tasks per month. Industry benchmark: 50-80 tasks per technician per month for data center facilities.</div><div class="tooltip-formula">Ref: Palmer (2006) Maintenance Planning Handbook</div></span></span></label>
                            <input type="number" id="calcTasks" class="calc-input" value="400" min="1">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Available Technicians <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Available Technicians</div><div class="tooltip-desc">Number of qualified maintenance technicians available for task assignment.</div></span></span></label>
                            <input type="number" id="calcTechs" class="calc-input" value="6" min="1">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Current Backlog (tasks) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Current Backlog</div><div class="tooltip-desc">Outstanding PM tasks that are overdue or deferred. Growing backlog indicates insufficient capacity.</div><div class="tooltip-formula">Healthy: &lt;10% of monthly tasks</div></span></span></label>
                            <input type="number" id="calcBacklog" class="calc-input" value="85" min="0">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Avg Task Duration (hrs) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Average Task Duration</div><div class="tooltip-desc">Mean time to complete one PM task including setup, execution, and documentation. Does NOT include travel or admin overhead (those are Pro inputs).</div><div class="tooltip-formula">Typical DC PM: 0.5-3.0 hrs depending on system complexity</div></span></span></label>
                            <input type="number" id="calcDuration" class="calc-input" value="1.5" min="0.1" step="0.1">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Hours / Tech / Month <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Hours per Tech per Month</div><div class="tooltip-desc">Available working hours per technician per month, before wrench time adjustments.</div><div class="tooltip-formula">Standard: 160-176 hrs/mo (40-44 hrs/wk)</div></span></span></label>
                            <input type="number" id="calcHours" class="calc-input" value="160" min="1">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">CMMS Maturity Level <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">CMMS Maturity Scale</div><div class="tooltip-desc">L1 Reactive: paper/spreadsheet. L2 Scheduled: basic CMMS. L3 Managed: full CMMS with KPIs. L4 Optimized: predictive integration. L5 Autonomous: AI-driven scheduling.</div><div class="tooltip-formula">Modifier: L1=0.70, L2=0.80, L3=0.90, L4=0.97, L5=1.00</div></span></span></label>
                            <select id="calcCMMS" class="calc-select">
                                <option value="1">Level 1 - Reactive</option>
                                <option value="2" selected>Level 2 - Scheduled</option>
                                <option value="3">Level 3 - Managed</option>
                                <option value="4">Level 4 - Optimized</option>
                                <option value="5">Level 5 - Autonomous</option>
                            </select>
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Workflow Friction <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Workflow Friction</div><div class="tooltip-desc">Level of administrative overhead and process inefficiency that reduces productive maintenance time.</div></span></span></label>
                            <select id="calcFriction" class="calc-select">
                                <option value="High">High (55% efficiency)</option>
                                <option value="Medium" selected>Medium (70% efficiency)</option>
                                <option value="Low">Low (85% efficiency)</option>
                            </select>
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Evidence Clarity <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Evidence Clarity</div><div class="tooltip-desc">Quality of maintenance records and documentation. Higher clarity improves audit readiness and compliance tracking.</div></span></span></label>
                            <select id="calcEvidence" class="calc-select">
                                <option value="Unclear">Unclear (85% modifier)</option>
                                <option value="Adequate" selected>Adequate (92% modifier)</option>
                                <option value="Excellent">Excellent (98% modifier)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Pro Inputs (hidden) -->
                    <div id="maintProInputs">
                        <div class="pro-input-section-title"><i class="fas fa-sliders"></i> Advanced Parameters</div>
                        <div class="calc-grid">
                            <div class="calc-input-group">
                                <label class="calc-label">Wrench Time % <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Wrench Time Percentage</div><div class="tooltip-desc">Percentage of available time technicians spend doing actual maintenance work (vs travel, admin, waiting).</div><div class="tooltip-formula">Best practice: &gt;55% &middot; Industry avg: 25-35%</div></span></span></label>
                                <input type="number" id="calcWrench" class="calc-input" value="35" min="10" max="80">
                            </div>
                            <div class="calc-input-group">
                                <label class="calc-label">Travel & Admin Overhead % <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Travel & Admin Overhead</div><div class="tooltip-desc">Percentage of time lost to travel between locations, paperwork, parts procurement, and administrative tasks.</div></span></span></label>
                                <input type="number" id="calcOverhead" class="calc-input" value="25" min="0" max="60">
                            </div>
                            <div class="calc-input-group">
                                <label class="calc-label">Task Duration Variability <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Task Duration Variability</div><div class="tooltip-desc">Coefficient of variation in task completion times. High variability makes scheduling less predictable.</div></span></span></label>
                                <select id="calcVariability" class="calc-select">
                                    <option value="Low">Low (CV 0.15)</option>
                                    <option value="Medium" selected>Medium (CV 0.30)</option>
                                    <option value="High">High (CV 0.50)</option>
                                </select>
                            </div>
                            <div class="calc-input-group">
                                <label class="calc-label">Critical Asset PM % <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Critical Asset PM Coverage</div><div class="tooltip-desc">Percentage of PM tasks allocated to critical/high-priority assets. Should be prioritized.</div><div class="tooltip-formula">Target: &ge;95% completion for critical assets</div></span></span></label>
                                <input type="number" id="calcCritical" class="calc-input" value="30" min="0" max="100">
                            </div>
                            <div class="calc-input-group">
                                <label class="calc-label">SLA Target % <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">SLA Target</div><div class="tooltip-desc">Required PM completion rate specified in service level agreements.</div><div class="tooltip-formula">Typical: 85-95% compliance target</div></span></span></label>
                                <input type="number" id="calcSLA" class="calc-input" value="95" min="80" max="100">
                            </div>
                            <div class="calc-input-group">
                                <label class="calc-label">Backlog Age (avg weeks) <span class="tooltip-trigger">?<span class="tooltip-content"><div class="tooltip-title">Average Backlog Age</div><div class="tooltip-desc">Mean age of overdue tasks in weeks. Older backlog = higher risk of asset failure.</div></span></span></label>
                                <input type="number" id="calcBacklogAge" class="calc-input" value="4" min="0" max="52">
                            </div>
                        </div>
                    </div>

                    <!-- Free Output Cards -->
                    <div class="calc-results" id="calcResults">
                        <div class="calc-result-item"><div class="calc-result-value" id="resultCapacity">--</div><div class="calc-result-label">Effective Capacity (hrs) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Effective Capacity</div><div class="rtd">Productive maintenance hours available per month after accounting for wrench time, travel, and admin overhead.</div><span class="rtf">Wrench time &times; available hours</span></span></span></div></div>
                        <div class="calc-result-item"><div class="calc-result-value" id="resultCompliance">--</div><div class="calc-result-label">Predicted Compliance <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Predicted Compliance</div><div class="rtd">Forecasted PM completion rate based on capacity vs demand. The primary KPI for maintenance effectiveness.</div><span class="rtf">Target: &ge;90% for critical assets</span></span></span></div></div>
                        <div class="calc-result-item"><div class="calc-result-value" id="resultBacklogBurn">--</div><div class="calc-result-label">Backlog Burn Rate (tasks/mo) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Backlog Burn Rate</div><div class="rtd">Net rate of backlog reduction per month. Positive = clearing backlog, negative = backlog growing.</div></span></span></div></div>
                        <div class="calc-result-item"><div class="calc-result-value" id="resultRisk">--</div><div class="calc-result-label">Risk Score (0-100) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Maintenance Risk Score</div><div class="rtd">Composite risk score (0-100) combining compliance gap, backlog age, criticality exposure, and CMMS maturity.</div><span class="rtf">&lt;30 Good &middot; 30-60 Warning &middot; &gt;60 Critical</span></span></span></div></div>
                        <div class="calc-result-item"><div class="calc-result-value" id="resultStaffing">--</div><div class="calc-result-label">Recommended Techs (SLA) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Recommended Technicians</div><div class="rtd">Minimum technician count required to meet the SLA compliance target.</div></span></span></div></div>
                        <div class="calc-result-item"><div class="calc-result-value" id="resultMonths">--</div><div class="calc-result-label">Months to Target <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Months to Target</div><div class="rtd">Estimated months to reach SLA compliance target given current staffing and backlog.</div></span></span></div></div>
                    </div>

                    <!-- Pro Output Panels -->
                    <div id="maintProPanels" style="display:none;">
                        <!-- Panel 1: Capacity & Utilization -->
                        <div class="pro-panel"><div class="pro-panel-inner">
                            <div class="pro-panel-title"><i class="fas fa-gauge-high"></i> Capacity & Utilization</div>
                            <div class="calc-results" id="proCapGrid">
                                <div class="calc-result-item"><div class="calc-result-value" id="proRawCap">--</div><div class="calc-result-label">Raw Capacity (hrs/mo) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Raw Capacity</div><div class="rtd">Total scheduled maintenance hours per month before efficiency adjustments.</div><span class="rtf">Techs &times; hours/month</span></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proWrenchCap">--</div><div class="calc-result-label">Wrench-Time Adjusted <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Wrench-Time Adjusted</div><div class="rtd">Capacity after wrench time factor — percentage of time actually spent on maintenance tasks.</div><span class="rtf">Industry avg wrench time: 25-35%</span></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proTotalDemand">--</div><div class="calc-result-label">Total Demand (hrs/mo) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Total Demand</div><div class="rtd">Monthly hours required to complete all scheduled PM tasks plus backlog reduction.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proUtilization">--</div><div class="calc-result-label">Utilization Rate <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Utilization Rate</div><div class="rtd">Ratio of maintenance demand to available capacity. Over 100% means demand exceeds capacity.</div><span class="rtf">80-90% optimal &middot; &gt;100% understaffed</span></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proMargin">--</div><div class="calc-result-label">Capacity Margin <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Capacity Margin</div><div class="rtd">Surplus or deficit of maintenance hours. Negative margin indicates understaffing.</div></span></span></div></div>
                            </div>
                        </div><div class="gated-overlay" onclick="maintShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Unlock 24 advanced KPIs + PDF export</div></div></div>

                        <!-- Panel 2: Compliance Deep Dive -->
                        <div class="pro-panel"><div class="pro-panel-inner">
                            <div class="pro-panel-title"><i class="fas fa-clipboard-check"></i> Compliance Deep Dive</div>
                            <div class="calc-results" id="proCompGrid">
                                <div class="calc-result-item"><div class="calc-result-value" id="proCompPct">--</div><div class="calc-result-label">Predicted Compliance <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Predicted Compliance</div><div class="rtd">Forecasted PM completion rate based on capacity vs demand. The primary KPI for maintenance effectiveness.</div><span class="rtf">Target: &ge;90% for critical assets</span></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proConfBand">--</div><div class="calc-result-label">90% Confidence Band <span class="res-tip">?<span class="res-tip-body"><div class="rtt">90% Confidence Band</div><div class="rtd">Monte Carlo simulation range — 90% of outcomes fall within this band.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proCritComp">--</div><div class="calc-result-label">Critical Asset Compliance <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Critical Asset Compliance</div><div class="rtd">PM completion rate specifically for critical/high-priority assets.</div><span class="rtf">Target: &ge;95% for critical assets</span></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proGap">--</div><div class="calc-result-label">Gap to SLA Target <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Gap to SLA Target</div><div class="rtd">Percentage points between current predicted compliance and the SLA target.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proPercentile">--</div><div class="calc-result-label">Industry Percentile <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Industry Percentile</div><div class="rtd">Where this facility ranks compared to industry benchmarks for maintenance compliance.</div></span></span></div></div>
                            </div>
                        </div><div class="gated-overlay" onclick="maintShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Monte Carlo confidence intervals</div></div></div>

                        <!-- Panel 3: Backlog & Risk -->
                        <div class="pro-panel"><div class="pro-panel-inner">
                            <div class="pro-panel-title"><i class="fas fa-triangle-exclamation"></i> Backlog & Risk</div>
                            <div class="calc-results" id="proRiskGrid">
                                <div class="calc-result-item"><div class="calc-result-value" id="proBurnRate">--</div><div class="calc-result-label">Burn Rate (tasks/mo) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Backlog Burn Rate</div><div class="rtd">Net tasks cleared from backlog per month.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proClearTime">--</div><div class="calc-result-label">Time-to-Clear Backlog <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Backlog Clear Time</div><div class="rtd">Projected months to eliminate current maintenance backlog.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proGrowthRisk">--</div><div class="calc-result-label">Backlog Growth Risk <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Backlog Growth Risk</div><div class="rtd">Probability that backlog will grow rather than shrink under current conditions.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proWeightedRisk">--</div><div class="calc-result-label">Weighted Risk Score <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Weighted Risk Score</div><div class="rtd">Risk score weighted by asset criticality — critical asset failures weighted 3x.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proSlaMiss">--</div><div class="calc-result-label">SLA Miss Probability <span class="res-tip">?<span class="res-tip-body"><div class="rtt">SLA Miss Probability</div><div class="rtd">Monte Carlo probability of failing to meet SLA target.</div></span></span></div></div>
                            </div>
                        </div><div class="gated-overlay" onclick="maintShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Backlog trajectory modeling</div></div></div>

                        <!-- Panel 4: Workforce Optimization -->
                        <div class="pro-panel"><div class="pro-panel-inner">
                            <div class="pro-panel-title"><i class="fas fa-users-gear"></i> Workforce Optimization</div>
                            <div class="calc-results" id="proWorkGrid">
                                <div class="calc-result-item"><div class="calc-result-value" id="proReqTechs">--</div><div class="calc-result-label">Techs for SLA Target <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Techs for SLA Target</div><div class="rtd">Optimal technician count to achieve SLA compliance with 90% confidence.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proOptUtil">--</div><div class="calc-result-label">Optimal Utilization <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Optimal Utilization</div><div class="rtd">Target utilization rate that balances efficiency with buffer capacity.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proOvertime">--</div><div class="calc-result-label">Overtime Needed (hrs/mo) <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Overtime Required</div><div class="rtd">Monthly overtime hours needed if current staffing is insufficient.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proMarginal">--</div><div class="calc-result-label">Marginal Tech Impact <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Marginal Tech Impact</div><div class="rtd">Compliance improvement from adding one additional technician.</div></span></span></div></div>
                            </div>
                        </div><div class="gated-overlay" onclick="maintShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">Staffing optimization model</div></div></div>

                        <!-- Panel 5: Scenario Sensitivity -->
                        <div class="pro-panel"><div class="pro-panel-inner">
                            <div class="pro-panel-title"><i class="fas fa-arrow-trend-up"></i> Scenario Sensitivity</div>
                            <div class="calc-results" id="proScenGrid">
                                <div class="calc-result-item"><div class="calc-result-value" id="proScen1">--</div><div class="calc-result-label">+1 Technician <span class="res-tip">?<span class="res-tip-body"><div class="rtt">+1 Technician</div><div class="rtd">Projected compliance if one more technician is added.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proScen2">--</div><div class="calc-result-label">CMMS +1 Level <span class="res-tip">?<span class="res-tip-body"><div class="rtt">CMMS Upgrade</div><div class="rtd">Projected improvement from upgrading CMMS maturity by one level.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proScen3">--</div><div class="calc-result-label">Friction → Low <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Friction Reduction</div><div class="rtd">Impact of reducing workflow friction to low level.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proScen4">--</div><div class="calc-result-label">Evidence → Excellent <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Evidence Improvement</div><div class="rtd">Impact of improving evidence clarity to excellent level.</div></span></span></div></div>
                                <div class="calc-result-item"><div class="calc-result-value" id="proScen5">--</div><div class="calc-result-label">-20% Task Duration <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Duration Reduction</div><div class="rtd">Impact of 20% reduction in average task duration through process improvement.</div></span></span></div></div>
                            </div>
                        </div><div class="gated-overlay" onclick="maintShowLogin()"><div class="gated-icon"><i class="fas fa-lock"></i></div><div class="gated-text">Pro Analysis Required</div><div class="gated-sub">What-if scenario modeling</div></div></div>
                    </div>

                    <div class="privacy-badge" style="margin-top:0.5rem;">
                        <i class="fas fa-shield-halved"></i> PDF generated in your browser — no data is sent to any server
                    </div>
                    <div class="benchmark-meta">
                        <span class="benchmark-meta-tag"><i class="fas fa-code-branch"></i> Model v1.0</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-calendar"></i> Updated Feb 2026</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-book"></i> Sources: Palmer (2006), Smith &amp; Hinchcliffe (2004), RCM III</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-info-circle"></i> Capacity model with friction, CMMS &amp; evidence modifiers</span>
                    </div>
                </div>

                <!-- Section 13: Conclusion -->
                <h2 id="section-13"><span class="section-number">13</span> Conclusion</h2>

                <p>Maintenance compliance is not a technician problem. It is not a training problem. It is not a motivation problem. It is a systems design problem -- and it has a systems design solution.</p>

                <p>The evidence presented across this article, supported by maintenance engineering literature<a href="#ref-1" class="cite">[1]</a><a href="#ref-3" class="cite">[3]</a><a href="#ref-4" class="cite">[4]</a>, industry benchmarking data<a href="#ref-5" class="cite">[5]</a><a href="#ref-6" class="cite">[6]</a>, and an applied case study, demonstrates that compliance above 95% is achievable in any staffed facility when five systemic conditions are concurrently addressed: workflow friction is minimized, <span class="term-tooltip" data-tooltip="Computerized Maintenance Management System: Software for managing maintenance operations">CMMS</span> maturity is at Level 3+, evidence standards are clear and proportionate, scheduling conflicts are resolved proactively, and escalation architecture is calibrated to asset criticality.</p>

                <p>The case study facility moved from 74% to 97.2% compliance in 18 weeks without adding headcount. The intervention increased effective maintenance capacity by 55% through friction reduction alone. Evidence completeness improved from 52% to 94%. Corrective maintenance rework dropped from 8.5% to 2.1%, confirming that the improvement was substantive rather than cosmetic.</p>

                <div class="info-box">
                    <div class="info-box-title">The Compliance Equation</div>
                    <p>Sustained compliance = Low friction + Mature CMMS + Clear evidence standards + Proactive scheduling + Calibrated escalation. Remove any one element and compliance reverts to its natural equilibrium of 70-85%. Address all five simultaneously and compliance becomes self-sustaining -- not because technicians are working harder, but because the system makes compliance the path of least resistance.</p>
                </div>

                <p>The Maintenance Compliance Predictor model provides a quantitative framework for diagnosing compliance constraints and modeling the impact of interventions before implementation. By inputting facility-specific parameters, operations leaders can identify whether their compliance gap is driven by capacity constraints, workflow friction, CMMS limitations, or evidence burden -- and prioritize interventions accordingly.</p>

                <p>For the data center industry, where a single maintenance oversight can cascade into a multi-million-dollar outage, the investment in maintenance systems engineering is not optional. It is a direct investment in facility reliability, customer trust, and organizational credibility. The question is not whether to make this investment, but how quickly the transition from behavioral pressure to systems engineering can be accomplished.</p>

                <p>When the system is right, good people succeed naturally. When the system is wrong, even the best technicians will fail predictably. The choice, as always, is about where to direct the engineering effort.</p>

                <!-- References -->
                <div class="references-section">
                    <h3 class="references-title">References</h3>
                    <div class="references-list">
                        <div class="reference-item" id="ref-1">
                            <span class="reference-number">[1]</span>
                            <span class="reference-text">EN 13306:2017. Maintenance -- Maintenance Terminology. European Committee for Standardization (CEN).</span>
                        </div>
                        <div class="reference-item" id="ref-2">
                            <span class="reference-number">[2]</span>
                            <span class="reference-text">ISO 55001:2014. Asset Management -- Management Systems -- Requirements. International Organization for Standardization.</span>
                        </div>
                        <div class="reference-item" id="ref-3">
                            <span class="reference-number">[3]</span>
                            <span class="reference-text">Moubray, J. (1997). Reliability-Centered Maintenance (2nd ed.). Industrial Press Inc.</span>
                        </div>
                        <div class="reference-item" id="ref-4">
                            <span class="reference-number">[4]</span>
                            <span class="reference-text">Smith, R. &amp; Hinchcliffe, G. (2004). RCM -- Gateway to World Class Maintenance. Elsevier Butterworth-Heinemann.</span>
                        </div>
                        <div class="reference-item" id="ref-5">
                            <span class="reference-number">[5]</span>
                            <span class="reference-text">Uptime Institute. (2023). Annual Data Center Survey Results. Uptime Institute LLC.</span>
                        </div>
                        <div class="reference-item" id="ref-6">
                            <span class="reference-number">[6]</span>
                            <span class="reference-text">Uptime Institute. (2024). Data Center Resiliency: Outage Trends and Best Practices. Uptime Institute LLC.</span>
                        </div>
                        <div class="reference-item" id="ref-7">
                            <span class="reference-number">[7]</span>
                            <span class="reference-text">Uptime Institute. (2022). Data Center Staffing: Challenges and Emerging Solutions. Uptime Institute LLC.</span>
                        </div>
                        <div class="reference-item" id="ref-8">
                            <span class="reference-number">[8]</span>
                            <span class="reference-text">Palmer, R. D. (2006). Maintenance Planning and Scheduling Handbook (2nd ed.). McGraw-Hill.</span>
                        </div>
                        <div class="reference-item" id="ref-9">
                            <span class="reference-number">[9]</span>
                            <span class="reference-text">Levitt, J. (2011). Complete Guide to Preventive and Predictive Maintenance (2nd ed.). Industrial Press Inc.</span>
                        </div>
                        <div class="reference-item" id="ref-10">
                            <span class="reference-number">[10]</span>
                            <span class="reference-text">HSE. (2013). HSG65: Managing for Health and Safety (3rd ed.). Health and Safety Executive, UK.</span>
                        </div>
                        <div class="reference-item" id="ref-11">
                            <span class="reference-number">[11]</span>
                            <span class="reference-text">ASHRAE TC 9.9. (2021). Thermal Guidelines for Data Processing Environments (5th ed.). ASHRAE.</span>
                        </div>
                        <div class="reference-item" id="ref-12">
                            <span class="reference-number">[12]</span>
                            <span class="reference-text">IEEE 3007.2-2010. Recommended Practice for the Maintenance of Industrial and Commercial Power Systems. IEEE.</span>
                        </div>
                        <div class="reference-item" id="ref-13">
                            <span class="reference-number">[13]</span>
                            <span class="reference-text">Gulati, R. &amp; Smith, R. (2009). Maintenance and Reliability Best Practices. Industrial Press Inc.</span>
                        </div>
                    </div>
                </div>

                <!-- Newsletter Signup -->
                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new articles on data center operations and engineering excellence are published.</p>
                    <form class="newsletter-form" onsubmit="return subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
                </div>

                <!-- Author Bio -->
                <div class="author-bio">
                    <div class="author-bio-image">
                        <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana">
                    </div>
                    <div class="author-bio-content">
                        <h4>Bagus Dwi Permana</h4>
                        <p class="author-bio-title">Engineering Operations Manager | Ahli K3 Listrik</p>
                        <p>12+ years professional experience in critical infrastructure and operations. CDFOM certified. Transforming operations through systematic excellence and safety-first engineering.</p>
                        <div class="author-bio-links">
                            <a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </a>
                            <a href="https://github.com/baguspermana7-cpu" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                GitHub
                            </a>
                            <a href="mailto:baguspermana7@gmail.com">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="related-articles">
                    <h3>Continue Reading</h3>
                    <div class="related-grid">
                        <a href="article-2.html" class="related-card">
                            <div class="related-card-number">02</div>
                            <div class="related-card-content">
                                <h4>Alarm Fatigue Is Not a Human Problem — It Is a System Design Failure</h4>
                                <p>Understanding alarm management in critical facilities</p>
                            </div>
                        </a>
                        <a href="article-4.html" class="related-card">
                            <div class="related-card-number">04</div>
                            <div class="related-card-content">
                                <h4>In-House Capability Is a Reliability Strategy</h4>
                                <p>Building internal technical excellence</p>
                            </div>
                        </a>
                        <a href="article-5.html" class="related-card">
                            <div class="related-card-number">05</div>
                            <div class="related-card-content">
                                <h4>Technical Debt Is Operational Risk</h4>
                                <p>Why deferred maintenance becomes systemic risk</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Article Navigation -->
                <div class="article-nav">
                    <a href="article-2.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                        Previous Article
                    </a>
                    <a href="article-4.html">
                        Next Article
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>

            </div>
        </div>
    </article>

    </main>

    <!-- Footer -->
    <footer class="footer footer-enhanced">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <p class="footer-tagline-main">BUILT FOR MISSION CRITICAL INFRASTRUCTURE<br>MANAGEMENT // 2026</p>
                    <p class="footer-tagline-sub">ALL OPERATIONAL DATASETS PRESERVED.</p>
                    <p class="footer-copyright">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p>
                </div>
                <div class="footer-nav">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home Dashboard</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="index.html#case-studies">Case Studies</a></li>
                        <li><a href="datacenter-solutions.html">DC Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4 class="footer-heading">CONNECT</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank" rel="noopener">LinkedIn Profile</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="mailto:baguspermana7@gmail.com">Direct Contact</a></li>
                        <li><a href="https://github.com/baguspermana7-cpu" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="maintLoginModal" style="display:none;">
        <div style="background:#fff;border-radius:20px;padding:2.5rem;max-width:400px;width:90%;position:relative;box-shadow:0 25px 60px rgba(0,0,0,.3);">
            <button onclick="maintCloseLogin()" style="position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:#94a3b8;cursor:pointer;">&times;</button>
            <div style="text-align:center;margin-bottom:1.5rem;">
                <div style="width:56px;height:56px;background:linear-gradient(135deg,#10b981,#059669);border-radius:16px;display:inline-flex;align-items:center;justify-content:center;margin-bottom:1rem;">
                    <i class="fas fa-wrench" style="color:#fff;font-size:1.4rem;"></i>
                </div>
                <h3 style="margin:0 0 .25rem;color:#1e293b;font-size:1.2rem;">Unlock Maintenance Pro</h3>
                <p style="margin:0;color:#64748b;font-size:.85rem;">Access 24 advanced KPIs, Monte Carlo analysis & PDF export</p>
            </div>
            <div style="margin-bottom:1rem;">
                <label style="display:block;font-size:.8rem;font-weight:600;color:#475569;margin-bottom:4px;">Email</label>
                <input type="email" id="maintLoginEmail" placeholder="you@company.com" style="width:100%;padding:10px 14px;border:1px solid #e2e8f0;border-radius:10px;font-size:.9rem;box-sizing:border-box;outline:none;transition:border .2s;background:#f1f5f9;color:#1e293b;" onfocus="this.style.borderColor='#10b981'" onblur="this.style.borderColor='#e2e8f0'">
            </div>
            <div style="margin-bottom:1.5rem;">
                <label style="display:block;font-size:.8rem;font-weight:600;color:#475569;margin-bottom:4px;">Password</label>
                <input type="password" id="maintLoginPass" placeholder="Enter password" style="width:100%;padding:10px 14px;border:1px solid #e2e8f0;border-radius:10px;font-size:.9rem;box-sizing:border-box;outline:none;transition:border .2s;background:#f1f5f9;color:#1e293b;" onfocus="this.style.borderColor='#10b981'" onblur="this.style.borderColor='#e2e8f0'" onkeydown="if(event.key==='Enter')maintDoLogin()">
            </div>
            <button onclick="maintDoLogin()" style="width:100%;padding:12px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:transform .2s;" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='none'">Sign In</button>
            <div id="maintLoginError" style="display:none;margin-top:.75rem;padding:8px 12px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:.8rem;text-align:center;"></div>
            <div style="margin-top:1rem;padding:12px;background:#f0fdf4;border-radius:10px;text-align:center;">
                <p style="margin:0;font-size:.78rem;color:#166534;"><i class="fas fa-flask" style="margin-right:4px;"></i> <strong>Demo access:</strong> demo@resistancezero.com / demo2026</p>
            </div>
            <div style="text-align:center;margin-top:6px;"><a href="https://bagus-dwi-permana.myr.id/membership/resistancezero-pro" target="_blank" rel="noopener" style="font-size:0.62rem;color:#64748b;text-decoration:none;">Unlock Pro Mode &rarr;</a></div>
                <p style="text-align:center;font-size:0.68rem;color:#64748b;margin-top:8px;line-height:1.5;">By clicking Login, you agree to our <a href="terms.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Terms of Service</a> and <a href="privacy.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Privacy Policy</a>.</p>
        </div>
    </div>

    <!-- Share Buttons - Floating Sidebar -->
    <aside class="share-buttons" id="shareButtons" aria-label="Share this article">
        <span class="share-label">Share</span>
        <button class="share-btn linkedin" data-tooltip="Share on LinkedIn" onclick="shareLinkedIn()" aria-label="Share on LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </button>
        <button class="share-btn twitter" data-tooltip="Share on X" onclick="shareTwitter()" aria-label="Share on X"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></button>
        <button class="share-btn whatsapp" data-tooltip="Share on WhatsApp" onclick="shareWhatsApp()" aria-label="Share on WhatsApp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></button>
        <button class="share-btn copy" data-tooltip="Copy link" onclick="copyLink()" aria-label="Copy article link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="copy-icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="check-icon" style="display:none"><polyline points="20 6 9 17 4 12"></polyline></svg>
        </button>
    </aside>

    <script src="script.js"></script>

    <!-- Share Buttons Functions -->
    <script>
    (function(){const s=document.getElementById('shareButtons'),h=document.querySelector('.article-hero');if(s&&h){document.body.classList.add('has-share-buttons');new IntersectionObserver(e=>e.forEach(x=>s.classList.toggle('visible',!x.isIntersecting)),{threshold:.1}).observe(h)}})();
    function getShareData(){return{title:document.querySelector('meta[property="og:title"]')?.content||document.title,url:window.location.href}}
    function shareLinkedIn(){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(getShareData().url)}`,'_blank','width=600,height=600')}
    function shareTwitter(){const d=getShareData();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(d.title+' by @BagusDPermana')}&url=${encodeURIComponent(d.url)}`,'_blank','width=600,height=400')}
    function shareWhatsApp(){const d=getShareData();window.open(`https://wa.me/?text=${encodeURIComponent(d.title+'\n\n'+d.url)}`,'_blank')}
    function copyLink(){const b=document.querySelector('.share-btn.copy'),c=b.querySelector('.copy-icon'),k=b.querySelector('.check-icon');navigator.clipboard.writeText(window.location.href).then(()=>{b.classList.add('copied');c.style.display='none';k.style.display='block';b.setAttribute('data-tooltip','Copied!');setTimeout(()=>{b.classList.remove('copied');c.style.display='block';k.style.display='none';b.setAttribute('data-tooltip','Copy link')},2000)})}
    </script>

    <!-- Maintenance Compliance Pro Engine -->
    <script>
    (function(){
    /* ===== STATE ===== */
    var maintMode = 'free';
    var maintIsPremium = false;
    var MAINT_USERS = {
        'demo@resistancezero.com': {pw:'demo2026',name:'Demo User',tier:'pro'},
        'admin@resistancezero.com': {pw:'admin2026',name:'Admin',tier:'pro'},
        'baguspermana7@gmail.com': {pw:'rzpro2026',name:'Bagus Permana',tier:'pro'}
    };

    /* ===== MATH HELPERS ===== */
    var FF = {High:0.55, Medium:0.70, Low:0.85};
    var CM = {1:0.70, 2:0.80, 3:0.90, 4:0.97, 5:1.0};
    var EM = {Unclear:0.85, Adequate:0.92, Excellent:0.98};
    var DV = {Low:0.10, Medium:0.20, High:0.35};

    function getInputs(){
        var t=parseFloat(document.getElementById('calcTasks').value)||400;
        var n=parseFloat(document.getElementById('calcTechs').value)||6;
        var b=parseFloat(document.getElementById('calcBacklog').value)||0;
        var d=parseFloat(document.getElementById('calcDuration').value)||1.5;
        var h=parseFloat(document.getElementById('calcHours').value)||160;
        var c=parseInt(document.getElementById('calcCMMS').value)||2;
        var f=document.getElementById('calcFriction').value||'Medium';
        var e=document.getElementById('calcEvidence').value||'Adequate';
        // Pro inputs
        var wt=parseFloat(document.getElementById('calcWrench')?.value)||35;
        var oh=parseFloat(document.getElementById('calcOverhead')?.value)||25;
        var dv=document.getElementById('calcVariability')?.value||'Medium';
        var cp=parseFloat(document.getElementById('calcCritical')?.value)||30;
        var st=parseFloat(document.getElementById('calcSLA')?.value)||95;
        var ba=parseFloat(document.getElementById('calcBacklogAge')?.value)||4;
        return {tasks:t,techs:n,backlog:b,duration:d,hrsPerMonth:h,cmms:c,friction:f,evidence:e,
                wrenchPct:wt/100,overheadPct:oh/100,durVar:dv,criticalPct:cp/100,slaTarget:st/100,backlogAge:ba};
    }

    function calcEffCap(p){
        var raw=p.techs*p.hrsPerMonth;
        var ff=FF[p.friction]||0.70;
        if(maintMode==='pro') return raw*ff*p.wrenchPct*(1-p.overheadPct);
        return raw*ff;
    }
    function calcDemand(p){
        var backlogWeight=Math.min(0.5, 0.3+p.backlogAge*0.02);
        return (p.tasks*p.duration)+(p.backlog*p.duration*backlogWeight);
    }
    function calcCompliance(cap,dem,c,e){
        var raw=Math.min(100,(cap/Math.max(1,dem))*100);
        return Math.min(100, raw*(CM[c]||0.80)*(EM[e]||0.92));
    }
    function calcComplianceFromParams(p){
        return calcCompliance(calcEffCap(p),calcDemand(p),p.cmms,p.evidence);
    }

    function monteCarloCompliance(p, iters){
        iters=iters||5000;
        var results=[];
        var cv=DV[p.durVar]||0.20;
        for(var i=0;i<iters;i++){
            var dJitter=p.duration*(1+cv*(Math.random()+Math.random()+Math.random()-1.5)*0.8165);
            var fJitter=FF[p.friction]*(0.95+Math.random()*0.10);
            var wJitter=p.wrenchPct*(0.92+Math.random()*0.16);
            var rawCap=p.techs*p.hrsPerMonth*fJitter*wJitter*(1-p.overheadPct);
            var dem=(p.tasks*dJitter)+(p.backlog*dJitter*0.3);
            var comp=Math.min(100,(rawCap/Math.max(1,dem))*100*(CM[p.cmms]||0.80)*(EM[p.evidence]||0.92));
            results.push(comp);
        }
        results.sort(function(a,b){return a-b});
        return {p5:results[Math.floor(iters*0.05)],median:results[Math.floor(iters*0.5)],p95:results[Math.floor(iters*0.95)]};
    }

    function calcRisk(p,compliance,margin){
        var backlogRisk=Math.min(40, p.backlog*0.4*Math.pow(1.015,p.backlog/10));
        var compRisk=(100-compliance)*0.4;
        var capRisk=margin<0?Math.min(30,Math.abs(margin)/10):0;
        var critRisk=p.criticalPct>0.4?10:p.criticalPct>0.25?5:0;
        return Math.min(100, backlogRisk+compRisk+capRisk+critRisk);
    }

    function findTechsForTarget(p,target){
        for(var t=1;t<=100;t++){
            var pp=Object.assign({},p,{techs:t});
            if(calcComplianceFromParams(pp)>=target*100) return t;
        }
        return 100;
    }

    /* ===== MAIN CALCULATOR ===== */
    function updateMaintCalculator(){
        var p=getInputs();
        var ff=FF[p.friction]||0.70;
        var rawCap=p.techs*p.hrsPerMonth;
        var effCap=calcEffCap(p);
        var demand=calcDemand(p);
        var compliance=calcComplianceFromParams(p);
        var surplus=Math.max(0,effCap-(p.tasks*p.duration));
        var burnRate=Math.floor(surplus/Math.max(0.1,p.duration));
        var riskScore=calcRisk(p,compliance,effCap-demand);
        var reqTechs=findTechsForTarget(p,p.slaTarget);
        var monthsToTarget=compliance>=p.slaTarget*100?0:Math.ceil((p.slaTarget*100-compliance)/3.5);

        /* Free outputs */
        var el;
        el=document.getElementById('resultCapacity');
        if(el){el.textContent=Math.round(effCap)+' / '+Math.round(demand);el.className='calc-result-value'+(effCap<demand?' danger':'');}
        el=document.getElementById('resultCompliance');
        if(el){el.textContent=compliance.toFixed(1)+'%';el.className='calc-result-value'+(compliance<80?' danger':compliance<95?' warning':'');}
        el=document.getElementById('resultBacklogBurn');
        if(el){el.textContent=burnRate>0?burnRate+' tasks':'Deficit';el.className='calc-result-value'+(burnRate<=0?' danger':'');}
        el=document.getElementById('resultRisk');
        if(el){el.textContent=Math.round(riskScore);el.className='calc-result-value'+(riskScore>60?' danger':riskScore>30?' warning':'');}
        el=document.getElementById('resultStaffing');
        if(el){el.textContent=reqTechs+' techs';el.className='calc-result-value'+(reqTechs>p.techs?' warning':'');}
        el=document.getElementById('resultMonths');
        if(el){el.textContent=monthsToTarget===0?'Already met':monthsToTarget+' months';el.className='calc-result-value'+(monthsToTarget>6?' warning':'');}

        /* Pro outputs */
        if(maintMode==='pro'&&maintIsPremium){
            var mc=monteCarloCompliance(p);
            var utilRate=Math.min(100,(demand/Math.max(1,effCap))*100);
            var margin=effCap-demand;
            var clearTime=p.backlog>0&&burnRate>0?Math.ceil(p.backlog/burnRate):p.backlog>0?999:0;
            var growthRisk=margin<0?'Growing':'Stable';
            var slaMiss=Math.max(0,Math.min(100,100-mc.p5));
            var critComp=compliance*(1-p.criticalPct*0.15);
            var gap=p.slaTarget*100-compliance;
            var percentile=compliance>=97?95:compliance>=95?85:compliance>=90?70:compliance>=85?50:compliance>=80?30:compliance>=70?15:5;
            var optUtil=utilRate>=75&&utilRate<=85?'In Range':utilRate<75?'Under-utilized':'Over-utilized';
            var overtime=margin<0?Math.abs(margin):0;
            // Marginal tech impact
            var ppPlus=Object.assign({},p,{techs:p.techs+1});
            var compPlus1=calcComplianceFromParams(ppPlus);
            var marginal=compPlus1-compliance;

            setText('proRawCap',Math.round(rawCap)+' hrs');
            setText('proWrenchCap',Math.round(effCap)+' hrs');
            setText('proTotalDemand',Math.round(demand)+' hrs');
            setText('proUtilization',utilRate.toFixed(1)+'%');
            setTextColor('proUtilization',utilRate>90?'danger':utilRate>80?'warning':'');
            setText('proMargin',(margin>=0?'+':'')+Math.round(margin)+' hrs');
            setTextColor('proMargin',margin<0?'danger':'');
            setText('proCompPct',compliance.toFixed(1)+'%');
            setTextColor('proCompPct',compliance<80?'danger':compliance<95?'warning':'');
            setText('proConfBand',mc.p5.toFixed(1)+'% - '+mc.p95.toFixed(1)+'%');
            setText('proCritComp',critComp.toFixed(1)+'%');
            setTextColor('proCritComp',critComp<90?'warning':'');
            setText('proGap',gap>0?'-'+gap.toFixed(1)+'pp':'Met');
            setTextColor('proGap',gap>0?'warning':'');
            setText('proPercentile','P'+percentile);
            setText('proBurnRate',burnRate>0?burnRate+' tasks/mo':'Deficit');
            setTextColor('proBurnRate',burnRate<=0?'danger':'');
            setText('proClearTime',clearTime===0?'No backlog':clearTime>24?'>24 mo':clearTime+' months');
            setTextColor('proClearTime',clearTime>12?'danger':clearTime>6?'warning':'');
            setText('proGrowthRisk',growthRisk);
            setTextColor('proGrowthRisk',growthRisk==='Growing'?'danger':'');
            setText('proWeightedRisk',Math.round(riskScore)+'/100');
            setTextColor('proWeightedRisk',riskScore>60?'danger':riskScore>30?'warning':'');
            setText('proSlaMiss',slaMiss.toFixed(1)+'%');
            setTextColor('proSlaMiss',slaMiss>20?'danger':slaMiss>10?'warning':'');
            setText('proReqTechs',reqTechs+' techs');
            setTextColor('proReqTechs',reqTechs>p.techs?'warning':'');
            setText('proOptUtil',optUtil);
            setTextColor('proOptUtil',optUtil==='Over-utilized'?'danger':optUtil==='Under-utilized'?'warning':'');
            setText('proOvertime',overtime>0?Math.round(overtime)+' hrs':'None');
            setTextColor('proOvertime',overtime>0?'warning':'');
            setText('proMarginal','+'+marginal.toFixed(1)+'pp');

            // Scenario deltas
            var scens=[
                {mod:{techs:p.techs+1}},
                {mod:{cmms:Math.min(5,p.cmms+1)}},
                {mod:{friction:'Low'}},
                {mod:{evidence:'Excellent'}},
                {mod:{duration:p.duration*0.8}}
            ];
            for(var i=0;i<scens.length;i++){
                var sp=Object.assign({},p,scens[i].mod);
                var sc=calcComplianceFromParams(sp);
                var delta=sc-compliance;
                setText('proScen'+(i+1),(delta>=0?'+':'')+delta.toFixed(1)+'pp');
                setTextColor('proScen'+(i+1),delta>5?'':'warning');
            }
        }

        window._maintData={params:p,compliance:compliance,effCap:effCap,demand:demand,burnRate:burnRate,riskScore:riskScore,reqTechs:reqTechs,monthsToTarget:monthsToTarget};
    }

    function setText(id,v){var e=document.getElementById(id);if(e)e.textContent=v;}
    function setTextColor(id,cls){var e=document.getElementById(id);if(e)e.className='calc-result-value'+(cls?' '+cls:'');}

    /* ===== MODE & GATING ===== */
    window.switchMaintMode=function(mode){
        maintMode=mode;
        document.querySelectorAll('.maint-mode-btn').forEach(function(b){b.classList.toggle('active',b.dataset.mode===mode);});
        var proPanels=document.getElementById('maintProPanels');
        var proInputs=document.getElementById('maintProInputs');
        if(mode==='pro'){
            if(!maintIsPremium){maintShowLogin();return;}
            if(proPanels)proPanels.style.display='block';
            if(proInputs)proInputs.style.display='block';
        }else{
            if(proPanels)proPanels.style.display='none';
            if(proInputs)proInputs.style.display='none';
        }
        applyMaintGating();
        updateMaintCalculator();
    };

    function applyMaintGating(){
        document.querySelectorAll('.gated-overlay').forEach(function(o){o.style.display=maintIsPremium?'none':'flex';});
        var pdf=document.getElementById('maintBtnPdf');
        if(pdf){
            if(maintIsPremium){pdf.onclick=function(){exportMaintPDF();};pdf.style.opacity='1';}
            else{pdf.onclick=function(){maintShowLogin();};pdf.style.opacity='0.7';}
        }
    }

    /* ===== AUTH ===== */
    window.maintShowLogin=function(){document.getElementById('maintLoginModal').style.display='flex';};
    window.maintCloseLogin=function(){document.getElementById('maintLoginModal').style.display='none';document.getElementById('maintLoginError').style.display='none';};
    window.maintDoLogin=function(){
        var email=document.getElementById('maintLoginEmail').value.trim().toLowerCase();
        var pass=document.getElementById('maintLoginPass').value;
        var user=MAINT_USERS[email];
        if(user&&user.pw===pass){
            maintIsPremium=true;
            var exp=new Date();exp.setDate(exp.getDate()+30);localStorage.setItem('rz_premium_session',JSON.stringify({email:email,tier:user.tier,expires:exp.toISOString()}));
            maintCloseLogin();
            maintMode='pro';
            document.querySelectorAll('.maint-mode-btn').forEach(function(b){b.classList.toggle('active',b.dataset.mode==='pro');});
            var pp=document.getElementById('maintProPanels');if(pp)pp.style.display='block';
            var pi=document.getElementById('maintProInputs');if(pi)pi.style.display='block';
            applyMaintGating();
            maintUpdateNavAuth(user.name);
            updateMaintCalculator();
        }else{
            var err=document.getElementById('maintLoginError');err.textContent='Invalid credentials. Try demo@resistancezero.com / demo2026';err.style.display='block';
        }
    };
    window.maintLogout=function(){
        maintIsPremium=false;maintMode='free';
        localStorage.removeItem('rz_premium_session');
        document.querySelectorAll('.maint-mode-btn').forEach(function(b){b.classList.toggle('active',b.dataset.mode==='free');});
        var pp=document.getElementById('maintProPanels');if(pp)pp.style.display='none';
        var pi=document.getElementById('maintProInputs');if(pi)pi.style.display='none';
        applyMaintGating();
        maintUpdateNavAuth(null);
        updateMaintCalculator();
    };
    window.maintToggleDropdown=function(){
        var d=document.getElementById('maintNavDropdown');if(d)d.style.display=d.style.display==='block'?'none':'block';
    };
    function maintUpdateNavAuth(name){
        var lb=document.getElementById('maintNavLoginBtn'),ub=document.getElementById('maintNavUserBtn'),dd=document.getElementById('maintNavDropdown');
        if(name){if(lb)lb.style.display='none';if(ub){ub.style.display='inline-flex';ub.querySelector('span').textContent=name;}}
        else{if(lb)lb.style.display='inline-flex';if(ub)ub.style.display='none';if(dd)dd.style.display='none';}
    }

    /* ===== RESET ===== */
    window.maintResetDefaults=function(){
        var defs={calcTasks:400,calcTechs:6,calcBacklog:0,calcDuration:1.5,calcHours:160,calcCMMS:2,calcFriction:'Medium',calcEvidence:'Adequate',calcWrench:35,calcOverhead:25,calcVariability:'Medium',calcCritical:30,calcSLA:95,calcBacklogAge:4};
        for(var k in defs){var e=document.getElementById(k);if(e)e.value=defs[k];}
        updateMaintCalculator();
    };

    /* ===== PDF EXPORT ===== */
    function exportMaintPDF(){
        var d=window._maintData;if(!d)return;
        var p=d.params;
        var grade=d.compliance>=97?'A':d.compliance>=93?'A-':d.compliance>=90?'B+':d.compliance>=85?'B':d.compliance>=80?'B-':d.compliance>=75?'C+':d.compliance>=70?'C':d.compliance>=60?'D':'F';
        var gradeColor=d.compliance>=90?'#10b981':d.compliance>=80?'#f59e0b':d.compliance>=70?'#f97316':'#ef4444';
        var riskLevel=d.riskScore<=20?'LOW':d.riskScore<=40?'MODERATE':d.riskScore<=60?'ELEVATED':'HIGH';
        var riskColor=d.riskScore<=20?'#10b981':d.riskScore<=40?'#f59e0b':d.riskScore<=60?'#f97316':'#ef4444';
        var mc=monteCarloCompliance(p);
        var utilRate=Math.min(100,(d.demand/Math.max(1,d.effCap))*100);
        var margin=d.effCap-d.demand;
        var clearTime=p.backlog>0&&d.burnRate>0?Math.ceil(p.backlog/d.burnRate):p.backlog>0?999:0;
        var today=new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});

        var cellS='padding:8px 12px;border:1px solid #e2e8f0;font-size:11px;';
        var hdrS=cellS+'background:#f8fafc;font-weight:600;color:#334155;';

        var actions=[];
        if(d.compliance<p.slaTarget*100) actions.push({pri:'CRITICAL',text:'Compliance ('+d.compliance.toFixed(1)+'%) is below SLA target ('+Math.round(p.slaTarget*100)+'%). Prioritize capacity and friction reduction.'});
        if(margin<0) actions.push({pri:'CRITICAL',text:'Capacity deficit of '+Math.abs(Math.round(margin))+' hrs/mo. Add '+Math.max(1,d.reqTechs-p.techs)+' technician(s) or reduce task duration.'});
        if(p.cmms<=2) actions.push({pri:'HIGH',text:'CMMS maturity is Level '+p.cmms+'. Upgrade to Level 3+ for 10-20% compliance improvement.'});
        if(p.friction==='High') actions.push({pri:'HIGH',text:'High workflow friction reduces effective capacity by 45%. Implement SOPs, mobile CMMS, parts staging.'});
        if(p.evidence==='Unclear') actions.push({pri:'MEDIUM',text:'Evidence standards are unclear, causing 15% compliance drag. Define clear, proportionate evidence requirements.'});
        if(p.backlog>50) actions.push({pri:'MEDIUM',text:'Backlog of '+p.backlog+' tasks creating compounding risk. Schedule dedicated backlog sprints.'});
        if(utilRate>90) actions.push({pri:'HIGH',text:'Utilization at '+utilRate.toFixed(0)+'% — no buffer for emergencies. Target 75-85% utilization.'});
        if(actions.length===0) actions.push({pri:'LOW',text:'System is well-optimized. Continue monitoring and maintain current practices.'});

        var priColor={CRITICAL:'#dc2626',HIGH:'#f97316',MEDIUM:'#f59e0b',LOW:'#10b981'};

        var html='<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Maintenance Compliance Pro Report</title>';
        html+='<style>body{font-family:Segoe UI,system-ui,sans-serif;margin:0;padding:0;color:#1e293b;font-size:12px;line-height:1.5;}';
        html+='.page{max-width:800px;margin:0 auto;padding:30px 40px;}';
        html+='table{width:100%;border-collapse:collapse;margin:8px 0;}';
        html+='h2{font-size:13px;color:#0f172a;border-bottom:2px solid #10b981;padding-bottom:4px;margin:16px 0 8px;}';
        html+='h3{font-size:12px;color:#334155;margin:12px 0 6px;}';
        html+='@media print{.page{padding:20px 30px;}}</style></head><body><div class="page">';

        // Header - compact single line
        html+='<div style="display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid #10b981;padding-bottom:10px;margin-bottom:12px;">';
        html+='<div><div style="font-size:20px;font-weight:800;color:#0f172a;">Maintenance Compliance</div><div style="font-size:12px;font-weight:600;color:#10b981;">Pro Assessment Report &middot; '+today+'</div></div>';
        html+='<div style="text-align:center;"><div style="width:56px;height:56px;border-radius:50%;background:'+gradeColor+';color:#fff;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:800;margin:0 auto;">'+grade+'</div><div style="font-size:9px;color:#64748b;margin-top:3px;">Compliance Grade</div></div>';
        html+='</div>';

        // Key Metrics Summary Row
        html+='<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:12px;">';
        html+='<div style="background:'+gradeColor+'12;border:1px solid '+gradeColor+'33;border-radius:8px;padding:8px;text-align:center;"><div style="font-size:16px;font-weight:800;color:'+gradeColor+';">'+d.compliance.toFixed(1)+'%</div><div style="font-size:8px;color:#6b7280;text-transform:uppercase;">Compliance</div></div>';
        html+='<div style="background:'+riskColor+'12;border:1px solid '+riskColor+'33;border-radius:8px;padding:8px;text-align:center;"><div style="font-size:16px;font-weight:800;color:'+riskColor+';">'+riskLevel+'</div><div style="font-size:8px;color:#6b7280;text-transform:uppercase;">Risk ('+Math.round(d.riskScore)+')</div></div>';
        html+='<div style="background:#f0f9ff;border:1px solid #bae6fd;border-radius:8px;padding:8px;text-align:center;"><div style="font-size:16px;font-weight:800;color:#0284c7;">'+(margin>=0?'+':'')+Math.round(margin)+'</div><div style="font-size:8px;color:#6b7280;text-transform:uppercase;">Capacity hrs</div></div>';
        html+='<div style="background:#f5f3ff;border:1px solid #c4b5fd;border-radius:8px;padding:8px;text-align:center;"><div style="font-size:16px;font-weight:800;color:#7c3aed;">'+mc.p5.toFixed(0)+'%-'+mc.p95.toFixed(0)+'%</div><div style="font-size:8px;color:#6b7280;text-transform:uppercase;">90% CI Band</div></div>';
        html+='<div style="background:#f0fdf4;border:1px solid #bbf7d0;border-radius:8px;padding:8px;text-align:center;"><div style="font-size:16px;font-weight:800;color:#16a34a;">'+d.reqTechs+'</div><div style="font-size:8px;color:#6b7280;text-transform:uppercase;">Req Techs</div></div>';
        html+='</div>';

        // Executive Summary
        html+='<div style="background:#f8fafc;padding:10px 14px;border-radius:8px;border-left:4px solid '+riskColor+';margin:0 0 12px;">';
        html+='<p style="margin:0;font-size:11px;">This facility operates at <strong>'+d.compliance.toFixed(1)+'%</strong> compliance with <strong>'+p.techs+'</strong> technicians managing <strong>'+p.tasks+'</strong> PM tasks/month. ';
        if(margin>=0) html+='Capacity surplus of '+Math.round(margin)+' hrs/mo.';
        else html+='Capacity <strong style="color:#dc2626;">deficit</strong> of '+Math.abs(Math.round(margin))+' hrs/mo.';
        html+=' MC (5K iter): <strong>'+mc.p5.toFixed(1)+'% - '+mc.p95.toFixed(1)+'%</strong>.</p></div>';

        // Configuration + KPI Performance side by side
        html+='<div style="display:flex;gap:12px;margin-bottom:12px;">';
        html+='<div style="flex:1;"><h2 style="margin-top:0;">System Configuration</h2>';
        html+='<table>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">PM Tasks/Month</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.tasks+'</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Technicians</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.techs+'</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Backlog</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.backlog+' tasks</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Task Duration</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.duration+' hrs</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Hrs/Tech/Month</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.hrsPerMonth+'</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">CMMS Level</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.cmms+'/5</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Friction</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.friction+'</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;">Evidence</td><td style="'+cellS+'padding:4px 8px;font-weight:600;">'+p.evidence+'</td></tr>';
        html+='</table></div>';
        html+='<div style="flex:1;"><h2 style="margin-top:0;">Pro Parameters</h2>';
        html+='<table>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;">Wrench Time</td><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;font-weight:600;">'+Math.round(p.wrenchPct*100)+'%</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;">Overhead</td><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;font-weight:600;">'+Math.round(p.overheadPct*100)+'%</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;">Duration Var</td><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;font-weight:600;">'+p.durVar+'</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;">Critical PM %</td><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;font-weight:600;">'+Math.round(p.criticalPct*100)+'%</td></tr>';
        html+='<tr><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;">SLA Target</td><td style="'+cellS+'padding:4px 8px;background:#f0fdf4;font-weight:600;">'+Math.round(p.slaTarget*100)+'%</td></tr>';
        html+='</table></div></div>';

        // KPI Performance
        html+='<h2>KPI Performance Summary</h2>';
        html+='<table><tr><td style="'+hdrS+'">KPI</td><td style="'+hdrS+'">Value</td><td style="'+hdrS+'">Benchmark</td><td style="'+hdrS+'">Status</td></tr>';
        var kpis=[
            ['Predicted Compliance',d.compliance.toFixed(1)+'%','>=95%',d.compliance>=95?'PASS':'GAP'],
            ['Utilization Rate',utilRate.toFixed(1)+'%','75-85%',utilRate>=75&&utilRate<=85?'OPTIMAL':utilRate>85?'HIGH':'LOW'],
            ['Capacity Margin',(margin>=0?'+':'')+Math.round(margin)+' hrs','> 0',''+((margin>=0)?'PASS':'DEFICIT')],
            ['Backlog Burn Rate',d.burnRate>0?d.burnRate+' tasks/mo':'Deficit','> 0',d.burnRate>0?'PASS':'DEFICIT'],
            ['Risk Score',Math.round(d.riskScore)+'/100','< 30',d.riskScore<30?'LOW':d.riskScore<60?'MODERATE':'HIGH'],
            ['Confidence Band (90%)',mc.p5.toFixed(1)+'% - '+mc.p95.toFixed(1)+'%','Narrow range',mc.p95-mc.p5<15?'NARROW':'WIDE']
        ];
        for(var i=0;i<kpis.length;i++){
            var sc=kpis[i][3]==='PASS'||kpis[i][3]==='OPTIMAL'||kpis[i][3]==='LOW'||kpis[i][3]==='NARROW'?'#10b981':'#ef4444';
            html+='<tr><td style="'+cellS+'font-weight:600;">'+kpis[i][0]+'</td><td style="'+cellS+'">'+kpis[i][1]+'</td><td style="'+cellS+'color:#64748b;">'+kpis[i][2]+'</td><td style="'+cellS+'color:'+sc+';font-weight:700;">'+kpis[i][3]+'</td></tr>';
        }
        html+='</table>';

        // Capacity Analysis
        html+='<h2>Capacity Analysis</h2>';
        html+='<p>Raw capacity is <strong>'+Math.round(p.techs*p.hrsPerMonth)+' hrs/mo</strong> ('+p.techs+' technicians x '+p.hrsPerMonth+' hrs/mo). ';
        html+='After accounting for workflow friction ('+p.friction+': '+Math.round(FF[p.friction]*100)+'% efficiency), wrench time ('+Math.round(p.wrenchPct*100)+'%), and overhead ('+Math.round(p.overheadPct*100)+'%), ';
        html+='effective capacity is <strong>'+Math.round(d.effCap)+' hrs/mo</strong>. ';
        html+='Total demand including PM tasks and weighted backlog is <strong>'+Math.round(d.demand)+' hrs/mo</strong>. ';
        if(margin>=0) html+='This leaves a <strong>surplus of '+Math.round(margin)+' hrs/mo</strong> available for corrective and project work.</p>';
        else html+='This creates a <strong style="color:#dc2626;">deficit of '+Math.abs(Math.round(margin))+' hrs/mo</strong>, meaning scheduled PM tasks are being deferred.</p>';

        // Backlog Risk
        html+='<h2>Backlog Risk Assessment</h2>';
        if(p.backlog===0) html+='<p>No current backlog. Continue proactive scheduling to maintain this status.</p>';
        else{
            html+='<p>Current backlog of <strong>'+p.backlog+' tasks</strong> (avg age: '+p.backlogAge+' weeks). ';
            if(d.burnRate>0) html+='At current surplus capacity, backlog will clear in approximately <strong>'+clearTime+' months</strong>. ';
            else html+='With current capacity deficit, backlog is <strong style="color:#dc2626;">growing</strong> and will not clear without intervention. ';
            html+='Backlog compounds compliance risk: aged tasks increase failure probability and may cascade into corrective emergencies.</p>';
        }

        // Workforce
        html+='<h2>Workforce Optimization</h2>';
        html+='<p>To achieve '+Math.round(p.slaTarget*100)+'% compliance target, the model recommends <strong>'+d.reqTechs+' technicians</strong>. ';
        if(d.reqTechs<=p.techs) html+='Current staffing of '+p.techs+' is sufficient. ';
        else html+='This represents a gap of <strong>'+(d.reqTechs-p.techs)+' additional technician(s)</strong>. ';
        html+='Each additional technician adds approximately <strong>+'+((calcComplianceFromParams(Object.assign({},p,{techs:p.techs+1}))-d.compliance)).toFixed(1)+' percentage points</strong> to compliance.</p>';

        // Actions
        html+='<h2>Prioritized Action Items</h2>';
        for(var i=0;i<actions.length;i++){
            html+='<div style="display:flex;gap:10px;align-items:flex-start;margin:8px 0;padding:10px;background:#f8fafc;border-radius:6px;border-left:3px solid '+priColor[actions[i].pri]+';">';
            html+='<span style="background:'+priColor[actions[i].pri]+';color:#fff;font-size:9px;font-weight:700;padding:2px 8px;border-radius:4px;white-space:nowrap;">'+actions[i].pri+'</span>';
            html+='<span style="font-size:11px;">'+actions[i].text+'</span></div>';
        }

        // Scenario Deltas
        html+='<h2>Scenario Sensitivity Analysis</h2>';
        html+='<table><tr><td style="'+hdrS+'">Scenario</td><td style="'+hdrS+'">Compliance Delta</td></tr>';
        var scenLabels=['+1 Technician','CMMS +1 Level','Friction to Low','Evidence to Excellent','-20% Task Duration'];
        var scenMods=[{techs:p.techs+1},{cmms:Math.min(5,p.cmms+1)},{friction:'Low'},{evidence:'Excellent'},{duration:p.duration*0.8}];
        for(var i=0;i<scenLabels.length;i++){
            var sc=calcComplianceFromParams(Object.assign({},p,scenMods[i]));
            var delta=sc-d.compliance;
            html+='<tr><td style="'+cellS+'">'+scenLabels[i]+'</td><td style="'+cellS+'color:'+(delta>0?'#10b981':'#64748b')+';font-weight:600;">'+(delta>=0?'+':'')+delta.toFixed(1)+' pp</td></tr>';
        }
        html+='</table>';

        // Footer
        html+='<div style="margin-top:30px;padding-top:16px;border-top:2px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center;">';
        html+='<div style="font-size:10px;color:#94a3b8;">Generated by ResistanceZero Maintenance Pro | '+today+'</div>';
        html+='<div style="display:flex;gap:4px;">';
        var barKpis=[{l:'Compliance',v:d.compliance,c:gradeColor},{l:'Risk',v:100-d.riskScore,c:riskColor},{l:'Capacity',v:Math.min(100,margin>0?100:Math.max(0,(d.effCap/Math.max(1,d.demand))*100)),c:margin>=0?'#10b981':'#ef4444'}];
        for(var i=0;i<barKpis.length;i++){
            html+='<div style="text-align:center;"><div style="width:50px;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden;"><div style="width:'+Math.min(100,barKpis[i].v)+'%;height:100%;background:'+barKpis[i].c+';border-radius:3px;"></div></div><div style="font-size:8px;color:#94a3b8;margin-top:2px;">'+barKpis[i].l+'</div></div>';
        }
        html+='</div></div>';

        html+='
<!-- ═══ Feature 22: Reading Progress Bar ═══ -->
<script>
(function() {
    var bar = document.getElementById('scrollProgress');
    if (!bar) return;
    var ticking = false;
    function updateProgress() {
        var scrollTop = window.scrollY || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - window.innerHeight;
        var pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
        bar.style.width = Math.min(pct, 100) + '%';
        ticking = false;
    }
    window.addEventListener('scroll', function() {
        if (!ticking) { requestAnimationFrame(updateProgress); ticking = true; }
    }, { passive: true });
    updateProgress();
})();
</script>

<!-- ═══ Feature 23: TOC Sidebar ═══ -->
<script>
(function() {
    // Find H2s with IDs first, then fallback to auto-generating IDs
    var sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    if (!sections.length) {
        var allH2s = document.querySelectorAll('.article-body h2, .article-content h2');
        allH2s.forEach(function(h2, i) {
            if (!h2.id) h2.id = 'toc-section-' + (i + 1);
        });
        sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    }
    if (!sections.length) return;

    var sidebarList = document.getElementById('tocSidebarList');
    var mobileList = document.getElementById('tocMobileList');
    var sidebar = document.getElementById('tocSidebar');
    var tocToggle = document.getElementById('tocMobileToggle');
    var tocDrawer = document.getElementById('tocMobileDrawer');
    var tocBackdrop = document.getElementById('tocMobileBackdrop');
    var tocClose = document.getElementById('tocDrawerClose');

    var tocData = [];
    sections.forEach(function(h2, i) {
        var id = h2.getAttribute('id');
        var numMatch = id.match(/\d+/);
        var num = numMatch ? numMatch[0] : String(i + 1);
        var text = h2.textContent.replace(/^\s*\d+[\.\s]*/, '').trim();
        tocData.push({ id: id, num: num, text: text });
    });

    function buildList(container, isMobile) {
        tocData.forEach(function(item) {
            var li = document.createElement('li');
            if (!isMobile) li.className = 'toc-sidebar-item';
            var a = document.createElement('a');
            a.href = '#' + item.id;
            a.setAttribute('data-section', item.id);
            if (isMobile) {
                a.textContent = item.num + '. ' + item.text;
            } else {
                a.className = 'toc-sidebar-link';
                a.innerHTML = '<span class="toc-sidebar-num">' + item.num + '</span>' + item.text;
            }
            a.addEventListener('click', function(e) {
                e.preventDefault();
                var target = document.getElementById(item.id);
                if (target) window.scrollTo({ top: target.offsetTop - 80, behavior: 'smooth' });
                if (isMobile) closeMobileDrawer();
            });
            li.appendChild(a);
            container.appendChild(li);
        });
    }

    buildList(sidebarList, false);
    buildList(mobileList, true);

    var currentSection = null;
    var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                currentSection = entry.target.getAttribute('id');
                highlightActive(currentSection);
            }
        });
    }, { rootMargin: '-80px 0px -70% 0px', threshold: 0 });

    sections.forEach(function(s) { observer.observe(s); });

    function highlightActive(sectionId) {
        sidebarList.querySelectorAll('.toc-sidebar-link').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
        mobileList.querySelectorAll('a').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
    }

    var articleContent = document.querySelector('.article-content');
    if (articleContent && sidebar) {
        var sidebarObserver = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                sidebar.classList.toggle('visible', entry.isIntersecting);
            });
        }, { rootMargin: '0px', threshold: 0.01 });
        sidebarObserver.observe(articleContent);
    }

    function openMobileDrawer() {
        tocDrawer.classList.add('active');
        tocBackdrop.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    function closeMobileDrawer() {
        tocDrawer.classList.remove('active');
        tocBackdrop.classList.remove('active');
        document.body.style.overflow = '';
    }

    if (tocToggle) tocToggle.addEventListener('click', openMobileDrawer);
    if (tocClose) tocClose.addEventListener('click', closeMobileDrawer);
    if (tocBackdrop) tocBackdrop.addEventListener('click', closeMobileDrawer);
})();
</script>

<!-- ═══ Feature 21: Global Search ═══ -->
<script>
(function() {
    var searchBtn = document.getElementById('navSearchBtn');
    var overlay = document.getElementById('searchOverlay');
    var modal = document.getElementById('searchModal');
    var input = document.getElementById('searchInput');
    var resultsEl = document.getElementById('searchResults');
    var fuse = null;
    var searchData = null;
    var focusedIdx = -1;

    function openSearch() {
        overlay.classList.add('active');
        modal.classList.add('active');
        input.value = '';
        input.focus();
        focusedIdx = -1;
        resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
        if (!searchData) {
            fetch('search-index.json')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    searchData = data;
                    fuse = new Fuse(data, {
                        keys: [
                            { name: 'title', weight: 0.4 },
                            { name: 'description', weight: 0.25 },
                            { name: 'keywords', weight: 0.25 },
                            { name: 'category', weight: 0.1 }
                        ],
                        threshold: 0.35,
                        includeScore: true,
                        minMatchCharLength: 2
                    });
                })
                .catch(function() {});
        }
    }

    function closeSearch() {
        overlay.classList.remove('active');
        modal.classList.remove('active');
        input.blur();
    }

    function getIconClass(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calc';
        if (cat === 'tool') return 'tool';
        return '';
    }

    function getIconLabel(item) {
        if (item.url && item.url.indexOf('article-') === 0) {
            return item.url.replace('article-', '').replace('.html', '').padStart(2, '0');
        }
        var cat = (item.category || '').toLowerCase();
        if (cat === 'calculator') return '&#9889;';
        if (cat === 'tool') return '&#9881;';
        return '&#9733;';
    }

    function renderResults(results) {
        if (!results.length) {
            resultsEl.innerHTML = '<div class="search-empty">No results found</div>';
            focusedIdx = -1;
            return;
        }
        var html = '';
        results.slice(0, 8).forEach(function(r, i) {
            var item = r.item;
            var iconCls = getIconClass(item.category);
            html += '<a href="' + item.url + '" class="search-result-item" data-idx="' + i + '">'
                + '<div class="search-result-icon ' + iconCls + '">' + getIconLabel(item) + '</div>'
                + '<div class="search-result-info">'
                + '<div class="search-result-category">' + (item.category || '') + '</div>'
                + '<div class="search-result-title">' + item.title + '</div>'
                + '<div class="search-result-desc">' + item.description + '</div>'
                + '</div></a>';
        });
        resultsEl.innerHTML = html;
        focusedIdx = -1;
    }

    function updateFocus() {
        var items = resultsEl.querySelectorAll('.search-result-item');
        items.forEach(function(el, i) {
            el.classList.toggle('focused', i === focusedIdx);
            if (i === focusedIdx) el.scrollIntoView({ block: 'nearest' });
        });
    }

    if (searchBtn) searchBtn.addEventListener('click', openSearch);
    if (overlay) overlay.addEventListener('click', closeSearch);

    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            if (modal.classList.contains('active')) closeSearch();
            else openSearch();
            return;
        }
        if (!modal.classList.contains('active')) return;
        if (e.key === 'Escape') { closeSearch(); return; }
        var items = resultsEl.querySelectorAll('.search-result-item');
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            focusedIdx = Math.min(focusedIdx + 1, items.length - 1);
            updateFocus();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            focusedIdx = Math.max(focusedIdx - 1, 0);
            updateFocus();
        } else if (e.key === 'Enter' && focusedIdx >= 0 && items[focusedIdx]) {
            e.preventDefault();
            items[focusedIdx].click();
        }
    });

    if (input) {
        input.addEventListener('input', function() {
            var query = input.value.trim();
            if (query.length < 2 || !fuse) {
                resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
                focusedIdx = -1;
                return;
            }
            var results = fuse.search(query);
            renderResults(results);
        });
    }
})();
</script>

</body></html>';

        var w=window.open('','_blank');
        if(w){w.document.write(html);w.document.close();setTimeout(function(){w.print();},500);}
    }
    window.exportMaintPDF=exportMaintPDF;

    /* ===== TOOLTIPS ===== */
    function initMaintTooltips(){
        var tc=document.getElementById('maint-tooltip-container');
        if(!tc) return;
        document.querySelectorAll('.tooltip-trigger').forEach(function(t){
            t.addEventListener('mouseenter',function(ev){
                var content=t.querySelector('.tooltip-content');
                if(!content) return;
                tc.innerHTML=content.innerHTML;
                var r=t.getBoundingClientRect();
                var left=r.right+12;
                var top=r.top+r.height/2;
                if(left+320>window.innerWidth-20) left=r.left-332;
                if(left<20) left=20;
                var th=tc.offsetHeight||150;
                top=top-th/2;
                if(top<20) top=20;
                if(top+th>window.innerHeight-20) top=window.innerHeight-th-20;
                tc.style.top=top+'px';
                tc.style.left=left+'px';
                tc.classList.add('visible');
            });
            t.addEventListener('mouseleave',function(){tc.classList.remove('visible');});
        });
    }

    /* ===== INIT ===== */
    // Event listeners
    ['calcTasks','calcTechs','calcBacklog','calcDuration','calcHours'].forEach(function(id){
        var e=document.getElementById(id);if(e)e.addEventListener('input',updateMaintCalculator);
    });
    ['calcCMMS','calcFriction','calcEvidence'].forEach(function(id){
        var e=document.getElementById(id);if(e)e.addEventListener('change',updateMaintCalculator);
    });
    ['calcWrench','calcOverhead','calcCritical','calcSLA','calcBacklogAge'].forEach(function(id){
        var e=document.getElementById(id);if(e)e.addEventListener('input',updateMaintCalculator);
    });
    var dvEl=document.getElementById('calcVariability');if(dvEl)dvEl.addEventListener('change',updateMaintCalculator);

    // Session restore
    try{
        var sess=JSON.parse(localStorage.getItem('rz_premium_session'));
        var valid=false;
        if(sess&&sess.email){
            if(sess.expires){ valid=new Date(sess.expires)>new Date(); }
            else if(sess.ts){ valid=(Date.now()-sess.ts)<30*86400000; }
        }
        if(valid){
            maintIsPremium=true;maintMode='pro';
            document.querySelectorAll('.maint-mode-btn').forEach(function(b){b.classList.toggle('active',b.dataset.mode==='pro');});
            var pp=document.getElementById('maintProPanels');if(pp)pp.style.display='block';
            var pi=document.getElementById('maintProInputs');if(pi)pi.style.display='block';
            applyMaintGating();
        }
    }catch(ex){}

    initMaintTooltips();
    updateMaintCalculator();
    })();
    </script>

    <!-- Interactive Compliance Dashboard -->
    <script>
    (function() {
        const canvas = document.getElementById('complianceChart');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const frictionSlider = document.getElementById('frictionSlider');
        const evidenceSlider = document.getElementById('evidenceSlider');
        const frictionVal = document.getElementById('frictionVal');
        const evidenceVal = document.getElementById('evidenceVal');
        const beforeAvg = document.getElementById('beforeAvg');
        const afterAvg = document.getElementById('afterAvg');
        const improvementEl = document.getElementById('improvement');
        const varianceReduction = document.getElementById('varianceReduction');

        // Handle high DPI displays
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';

        const W = rect.width;
        const H = rect.height;
        const padding = { top: 40, right: 60, bottom: 50, left: 70 };
        const chartW = W - padding.left - padding.right;
        const chartH = H - padding.top - padding.bottom;

        function clamp(v, min, max) { return Math.max(min, Math.min(max, v)); }

        function simulateSeries(friction, evidence) {
            const weeks = 12;
            var comp = [], evq = [];
            const fr = friction / 100;
            const ev = evidence / 100;

            for (var w = 0; w < weeks; w++) {
                var phase = w < 6 ? 0 : 1;

                // Compliance
                var baseBefore = 62 - 18 * fr;
                var baseAfter = 85 - 10 * fr + 8 * (1 - fr);
                var base = phase === 0 ? baseBefore : baseAfter;
                var varAmp = (phase === 0 ? 14 : 7) * (0.4 + fr);
                var noise = (Math.sin((w + 1) * 1.7) + Math.cos((w + 2) * 1.1)) * 0.5 * varAmp;
                var v = clamp(base + noise + (phase === 1 ? 8 * (1 - fr) : 0), 20, 98);
                comp.push(v);

                // Evidence quality
                var evBase = 35 + 40 * ev + (phase === 1 ? 15 : 0) - 10 * fr;
                var evNoise = Math.sin((w + 3) * 1.3) * 6 * (1 - 0.4 * ev);
                evq.push(clamp(evBase + evNoise, 10, 98));
            }
            return { comp: comp, evq: evq };
        }

        function drawChart(friction, evidence) {
            ctx.clearRect(0, 0, W, H);

            // Background
            ctx.fillStyle = 'rgba(15, 23, 42, 0.3)';
            ctx.fillRect(0, 0, W, H);

            // Grid lines
            ctx.strokeStyle = 'rgba(148, 163, 184, 0.15)';
            ctx.lineWidth = 1;
            for (var i = 0; i <= 5; i++) {
                var y = padding.top + (chartH / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(W - padding.right, y);
                ctx.stroke();
            }

            // Y-axis labels
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            ctx.font = '12px Inter, system-ui, sans-serif';
            ctx.textAlign = 'right';
            for (var i = 0; i <= 5; i++) {
                var y = padding.top + (chartH / 5) * i;
                var val = 100 - i * 20;
                ctx.fillText(val + '%', padding.left - 10, y + 4);
            }

            // Y-axis title
            ctx.save();
            ctx.translate(20, H / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.font = '11px Inter, system-ui, sans-serif';
            ctx.fillText('Performance (%)', 0, 0);
            ctx.restore();

            // X-axis labels
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            for (var i = 0; i < 12; i++) {
                var x = padding.left + (chartW / 11) * i;
                ctx.fillText('W' + (i + 1), x, H - padding.bottom + 25);
            }

            // X-axis title
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Weeks', W / 2, H - 10);

            // Phase divider
            var xMid = padding.left + (chartW / 11) * 5.5;
            ctx.strokeStyle = 'rgba(16, 185, 129, 0.4)';
            ctx.setLineDash([6, 6]);
            ctx.beginPath();
            ctx.moveTo(xMid, padding.top);
            ctx.lineTo(xMid, H - padding.bottom);
            ctx.stroke();
            ctx.setLineDash([]);

            // Phase labels
            ctx.fillStyle = 'rgba(239, 68, 68, 0.8)';
            ctx.font = 'bold 11px Inter, system-ui, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('BEFORE (System Not Engineered)', padding.left + chartW * 0.22, padding.top - 15);
            ctx.fillStyle = 'rgba(16, 185, 129, 0.8)';
            ctx.fillText('AFTER (Workflow Engineered)', padding.left + chartW * 0.77, padding.top - 15);

            // Get data
            var data = simulateSeries(friction, evidence);
            var comp = data.comp;
            var evqArr = data.evq;

            // Draw lines
            function drawLine(series, color, lw) {
                ctx.strokeStyle = color;
                ctx.lineWidth = lw;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.beginPath();
                for (var j = 0; j < series.length; j++) {
                    var xx = padding.left + (chartW / 11) * j;
                    var yy = padding.top + chartH - (series[j] / 100) * chartH;
                    if (j === 0) ctx.moveTo(xx, yy);
                    else ctx.lineTo(xx, yy);
                }
                ctx.stroke();
            }

            // Draw area fill for compliance
            ctx.beginPath();
            ctx.fillStyle = 'rgba(16, 185, 129, 0.1)';
            for (var j = 0; j < comp.length; j++) {
                var xx = padding.left + (chartW / 11) * j;
                var yy = padding.top + chartH - (comp[j] / 100) * chartH;
                if (j === 0) ctx.moveTo(xx, yy);
                else ctx.lineTo(xx, yy);
            }
            ctx.lineTo(padding.left + chartW, H - padding.bottom);
            ctx.lineTo(padding.left, H - padding.bottom);
            ctx.closePath();
            ctx.fill();

            drawLine(evqArr, 'rgba(148, 163, 184, 0.7)', 2);
            drawLine(comp, '#10b981', 3);

            // Draw points
            function drawPoints(series, color) {
                ctx.fillStyle = color;
                for (var j = 0; j < series.length; j++) {
                    var xx = padding.left + (chartW / 11) * j;
                    var yy = padding.top + chartH - (series[j] / 100) * chartH;
                    ctx.beginPath();
                    ctx.arc(xx, yy, 4, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            drawPoints(comp, '#10b981');
            drawPoints(evqArr, '#94a3b8');

            // End point labels
            ctx.font = 'bold 12px Inter, system-ui, sans-serif';
            var lastComp = comp[comp.length - 1];
            var lastEvq = evqArr[evqArr.length - 1];
            var lastX = padding.left + chartW;

            ctx.fillStyle = '#10b981';
            ctx.textAlign = 'left';
            ctx.fillText(Math.round(lastComp) + '%', lastX + 8, padding.top + chartH - (lastComp / 100) * chartH + 4);

            ctx.fillStyle = '#94a3b8';
            ctx.fillText(Math.round(lastEvq) + '%', lastX + 8, padding.top + chartH - (lastEvq / 100) * chartH + 4);

            // Update callout values
            var beforeCompAvg = comp.slice(0, 6).reduce(function(a, b) { return a + b; }, 0) / 6;
            var afterCompAvg = comp.slice(6).reduce(function(a, b) { return a + b; }, 0) / 6;
            var beforeVar = Math.sqrt(comp.slice(0, 6).reduce(function(sum, v) { return sum + Math.pow(v - beforeCompAvg, 2); }, 0) / 6);
            var afterVar = Math.sqrt(comp.slice(6).reduce(function(sum, v) { return sum + Math.pow(v - afterCompAvg, 2); }, 0) / 6);
            var varRed = beforeVar > 0 ? ((beforeVar - afterVar) / beforeVar * 100) : 0;

            beforeAvg.textContent = Math.round(beforeCompAvg) + '%';
            afterAvg.textContent = Math.round(afterCompAvg) + '%';
            improvementEl.textContent = '+' + Math.round(afterCompAvg - beforeCompAvg) + 'pp';
            varianceReduction.textContent = '-' + Math.round(varRed) + '%';
        }

        function refresh() {
            var fr = parseInt(frictionSlider.value);
            var ev = parseInt(evidenceSlider.value);
            frictionVal.textContent = fr + '%';
            evidenceVal.textContent = ev + '%';
            drawChart(fr, ev);
        }

        frictionSlider.addEventListener('input', refresh);
        evidenceSlider.addEventListener('input', refresh);

        // Initial draw
        refresh();

        // Redraw on resize
        window.addEventListener('resize', function() {
            var newRect = canvas.getBoundingClientRect();
            canvas.width = newRect.width * dpr;
            canvas.height = newRect.height * dpr;
            ctx.scale(dpr, dpr);
            refresh();
        });
    })();
    </script>

<script>
// ═══════════════════════════════════════════════════════════════════════════
//  CHART.JS — Wrench Time / Friction Breakdown
// ═══════════════════════════════════════════════════════════════════════════
(function initFrictionChart() {
    var canvas = document.getElementById('frictionChart');
    if (!canvas || typeof Chart === 'undefined') return;

    new Chart(canvas, {
        type: 'bar',
        data: {
            labels: ['Before Redesign', 'After Redesign'],
            datasets: [
                { label: 'Actual Maintenance (Wrench Time)', data: [22, 34], backgroundColor: 'rgba(16,185,129,0.7)', borderRadius: 4 },
                { label: 'Travel & Transit', data: [25, 10], backgroundColor: 'rgba(239,68,68,0.6)', borderRadius: 4 },
                { label: 'Tool Retrieval', data: [12, 3], backgroundColor: 'rgba(249,115,22,0.6)', borderRadius: 4 },
                { label: 'CMMS / Documentation', data: [18, 8], backgroundColor: 'rgba(139,92,246,0.6)', borderRadius: 4 },
                { label: 'Approval / Waiting', data: [10, 5], backgroundColor: 'rgba(245,158,11,0.6)', borderRadius: 4 },
                { label: 'Other (breaks, handover)', data: [13, 40], backgroundColor: 'rgba(100,116,139,0.5)', borderRadius: 4 }
            ]
        },
        options: {
            responsive: true,
            indexAxis: 'y',
            scales: {
                x: { stacked: true, max: 100, ticks: { color: '#334155', callback: function(v) { return v + '%'; } }, grid: { color: 'rgba(0,0,0,0.08)' }, title: { display: true, text: '% of Paid Hours', color: '#334155', font: { size: 10 } } },
                y: { stacked: true, ticks: { color: '#64748b', font: { size: 11, weight: 'bold' } }, grid: { display: false } }
            },
            plugins: {
                legend: { labels: { color: '#64748b', font: { size: 10 }, boxWidth: 12 } },
                tooltip: { callbacks: { label: function(ctx) { return ctx.dataset.label + ': ' + ctx.raw + '%'; } } }
            }
        }
    });
})();

// ═══════════════════════════════════════════════════════════════════════════
//  CHART.JS — Before / After Comparison
// ═══════════════════════════════════════════════════════════════════════════
(function initBeforeAfterChart() {
    var canvas = document.getElementById('beforeAfterChart');
    if (!canvas || typeof Chart === 'undefined') return;

    new Chart(canvas, {
        type: 'bar',
        data: {
            labels: ['PM Compliance (%)', 'Evidence Complete (%)', 'Wrench Time (x10)', 'Backlog (tasks)', 'WO Closure (min)', 'Audit Findings'],
            datasets: [
                {
                    label: 'Before (Baseline)',
                    data: [74, 52, 2.2, 85, 12.4, 14],
                    backgroundColor: 'rgba(239,68,68,0.6)',
                    borderColor: 'rgba(239,68,68,0.9)',
                    borderWidth: 2,
                    borderRadius: 6,
                },
                {
                    label: 'After (Week 18)',
                    data: [97.2, 94, 3.4, 8, 4.2, 2],
                    backgroundColor: 'rgba(16,185,129,0.6)',
                    borderColor: 'rgba(16,185,129,0.9)',
                    borderWidth: 2,
                    borderRadius: 6,
                }
            ]
        },
        options: {
            responsive: true,
            interaction: { mode: 'index', intersect: false },
            plugins: {
                legend: { labels: { color: '#64748b', font: { size: 11 } } },
                tooltip: {
                    callbacks: {
                        label: function(ctx) {
                            var units = ['%', '%', '', ' tasks', ' min', ' findings'];
                            var realBefore = [74, 52, 0.22, 85, 12.4, 14];
                            var realAfter = [97.2, 94, 0.34, 8, 4.2, 2];
                            var idx = ctx.dataIndex;
                            var real = ctx.datasetIndex === 0 ? realBefore[idx] : realAfter[idx];
                            return ctx.dataset.label + ': ' + real + (units[idx] || '');
                        }
                    }
                }
            },
            scales: {
                x: { ticks: { color: '#334155', font: { size: 9 }, maxRotation: 15 }, grid: { color: 'rgba(0,0,0,0.08)' } },
                y: { ticks: { color: '#334155' }, grid: { color: 'rgba(0,0,0,0.08)' } }
            }
        }
    });
})();

// ═══════════════════════════════════════════════════════════════════════════
//  MONTE CARLO COMPLIANCE SIMULATION — 10,000 iterations
// ═══════════════════════════════════════════════════════════════════════════
var mc3HistChart = null;

function normalSample3(mean, stdDev) {
    var u1 = Math.random(), u2 = Math.random();
    return mean + stdDev * Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
}

function clamp3(v, lo, hi) { return Math.max(lo, Math.min(hi, v)); }

function runMC3() {
    var btn = document.getElementById('mc3RunBtn');
    var progress = document.getElementById('mc3Progress');
    var fill = document.getElementById('mc3ProgressFill');
    var pText = document.getElementById('mc3ProgressText');

    var tasks = parseFloat(document.getElementById('mc3Tasks').value) || 1200;
    var techs = parseInt(document.getElementById('mc3Techs').value) || 6;
    var dur = parseFloat(document.getElementById('mc3Duration').value) || 1.5;
    var unc = parseFloat(document.getElementById('mc3Uncertainty').value) || 0.2;

    btn.disabled = true;
    progress.style.display = 'flex';
    document.getElementById('mc3ResultsGrid').style.display = 'none';
    document.getElementById('mc3ChartWrap').style.display = 'none';

    var N = 10000;
    var results = { comp: [], cap: [], bl: [] };
    var done = 0;
    var batch = 500;

    function runBatch() {
        var end = Math.min(done + batch, N);
        for (var i = done; i < end; i++) {
            var sTasks = clamp3(normalSample3(tasks, tasks * unc), 50, tasks * 3);
            var sTechs = clamp3(Math.round(normalSample3(techs, techs * unc * 0.5)), 1, 50);
            var sDur = clamp3(normalSample3(dur, dur * unc), 0.25, 8);
            var sFriction = clamp3(normalSample3(0.65, 0.1), 0.3, 0.95);

            var rawCap = sTechs * 160;
            var effCap = rawCap * sFriction;
            var demand = sTasks * sDur;
            var capRatio = effCap / demand;
            var compliance = clamp3(capRatio * 100, 0, 100);
            var backlogGrowth = Math.max(0, sTasks - (effCap / sDur));

            results.comp.push(compliance);
            results.cap.push(capRatio);
            results.bl.push(backlogGrowth);
        }
        done = end;
        fill.style.width = (done / N * 100).toFixed(0) + '%';
        pText.textContent = done.toLocaleString() + ' / ' + N.toLocaleString();

        if (done < N) { setTimeout(runBatch, 0); }
        else { finalizeMC3(results, N); btn.disabled = false; progress.style.display = 'none'; }
    }
    setTimeout(runBatch, 10);
}

function percentile3(arr, p) {
    var s = arr.slice().sort(function(a, b) { return a - b; });
    return s[Math.min(Math.floor(p / 100 * s.length), s.length - 1)];
}

function finalizeMC3(r, N) {
    function setStat(pre, arr, fmt) {
        var p10 = percentile3(arr, 10), p50 = percentile3(arr, 50), p90 = percentile3(arr, 90);
        document.getElementById(pre + 'P50').textContent = fmt(p50);
        document.getElementById(pre + 'Range').textContent = 'P10: ' + fmt(p10) + ' \u2014 P90: ' + fmt(p90);
    }
    setStat('mc3Comp', r.comp, function(v) { return v.toFixed(1) + '%'; });
    setStat('mc3Cap', r.cap, function(v) { return v.toFixed(2); });
    setStat('mc3Bl', r.bl, function(v) { return Math.round(v).toLocaleString(); });
    document.getElementById('mc3Prob95').textContent = (r.comp.filter(function(v) { return v >= 95; }).length / N * 100).toFixed(1) + '%';
    document.getElementById('mc3ResultsGrid').style.display = 'grid';

    // Histogram
    var bins = 20, bd = new Array(bins).fill(0), bl = [];
    var bSize = 100 / bins;
    for (var i = 0; i < bins; i++) bl.push((i * bSize).toFixed(0) + '%');
    r.comp.forEach(function(v) { bd[Math.min(bins - 1, Math.floor(v / bSize))]++; });

    var colors = bl.map(function(l) {
        var mid = parseFloat(l) + bSize / 2;
        if (mid < 70) return 'rgba(239,68,68,0.7)';
        if (mid < 95) return 'rgba(245,158,11,0.6)';
        return 'rgba(16,185,129,0.7)';
    });

    if (mc3HistChart) mc3HistChart.destroy();
    document.getElementById('mc3ChartWrap').style.display = 'block';
    mc3HistChart = new Chart(document.getElementById('mc3HistChart'), {
        type: 'bar',
        data: {
            labels: bl,
            datasets: [{ label: 'Scenarios', data: bd, backgroundColor: colors, borderRadius: 3, barPercentage: 1.0, categoryPercentage: 1.0 }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                tooltip: { callbacks: { label: function(ctx) { return ctx.raw + ' scenarios (' + (ctx.raw / N * 100).toFixed(1) + '%)'; } } }
            },
            scales: {
                x: { ticks: { color: '#334155', font: { size: 9 }, maxRotation: 0 }, grid: { display: false } },
                y: { ticks: { color: '#334155' }, grid: { color: 'rgba(0,0,0,0.08)' }, title: { display: true, text: 'Scenarios (of 10,000)', color: '#334155', font: { size: 10 } } }
            }
        }
    });
}

// ═══════════════════════════════════════════════════════════════════════════
//  D3-SANKEY — PM Task Flow Diagram
// ═══════════════════════════════════════════════════════════════════════════
(function initSankey3() {
    if (typeof d3 === 'undefined' || typeof d3.sankey === 'undefined') return;
    var container = document.getElementById('sankeyChart3');
    if (!container) return;

    var isMobile = window.innerWidth < 600;
    var W = Math.min(container.parentElement.clientWidth - 40, 860);
    var H = isMobile ? 500 : 440;
    var margin = { top: 20, right: 140, bottom: 20, left: 140 };

    var svg = d3.select('#sankeyChart3').attr('width', W).attr('height', H);

    var sankey = d3.sankey()
        .nodeWidth(18)
        .nodePadding(12)
        .extent([[margin.left, margin.top], [W - margin.right, H - margin.bottom]]);

    var nodeColors = {
        'Scheduled PMs': '#10b981',
        'Reactive / CM': '#ef4444',
        'Backlog Carry': '#f59e0b',
        'Completed On-Time': '#10b981',
        'Completed Late': '#f97316',
        'Blocked (Parts)': '#ef4444',
        'Blocked (Access)': '#dc2626',
        'Blocked (Friction)': '#7c3aed',
        'Rolled to Next Month': '#64748b',
        'Evidence Complete': '#06b6d4',
        'Evidence Partial': '#eab308',
    };

    var data = {
        nodes: [
            { name: 'Scheduled PMs' },
            { name: 'Reactive / CM' },
            { name: 'Backlog Carry' },
            { name: 'Completed On-Time' },
            { name: 'Completed Late' },
            { name: 'Blocked (Parts)' },
            { name: 'Blocked (Access)' },
            { name: 'Blocked (Friction)' },
            { name: 'Rolled to Next Month' },
            { name: 'Evidence Complete' },
            { name: 'Evidence Partial' },
        ],
        links: [
            { source: 0, target: 3, value: 620 },
            { source: 0, target: 4, value: 268 },
            { source: 0, target: 5, value: 72 },
            { source: 0, target: 6, value: 48 },
            { source: 0, target: 7, value: 192 },
            { source: 1, target: 3, value: 140 },
            { source: 1, target: 4, value: 85 },
            { source: 2, target: 3, value: 35 },
            { source: 2, target: 8, value: 50 },
            { source: 5, target: 8, value: 72 },
            { source: 6, target: 8, value: 48 },
            { source: 7, target: 4, value: 120 },
            { source: 7, target: 8, value: 72 },
            { source: 3, target: 9, value: 520 },
            { source: 3, target: 10, value: 275 },
            { source: 4, target: 10, value: 473 },
        ]
    };

    try {
        var graph = sankey({
            nodes: data.nodes.map(function(d) { return Object.assign({}, d); }),
            links: data.links.map(function(d) { return Object.assign({}, d); })
        });
    } catch(e) { console.warn('Sankey3 error:', e); return; }

    var defs = svg.append('defs');
    graph.links.forEach(function(link, i) {
        var id = 'lg3_' + i;
        var grad = defs.append('linearGradient').attr('id', id)
            .attr('gradientUnits', 'userSpaceOnUse')
            .attr('x1', link.source.x1).attr('x2', link.target.x0);
        grad.append('stop').attr('offset', '0%').attr('stop-color', nodeColors[link.source.name] || '#64748b').attr('stop-opacity', 0.6);
        grad.append('stop').attr('offset', '100%').attr('stop-color', nodeColors[link.target.name] || '#64748b').attr('stop-opacity', 0.6);
    });

    svg.append('g').selectAll('path')
        .data(graph.links).enter().append('path')
        .attr('d', d3.sankeyLinkHorizontal())
        .attr('stroke', function(d, i) { return 'url(#lg3_' + i + ')'; })
        .attr('stroke-width', function(d) { return Math.max(1, d.width); })
        .attr('fill', 'none').attr('opacity', 0.55)
        .on('mouseover', function() { d3.select(this).attr('opacity', 0.85); })
        .on('mouseout', function() { d3.select(this).attr('opacity', 0.55); })
        .append('title')
        .text(function(d) { return d.source.name + ' \u2192 ' + d.target.name + ': ' + d.value + ' tasks/month'; });

    var node = svg.append('g').selectAll('g')
        .data(graph.nodes).enter().append('g');

    node.append('rect')
        .attr('x', function(d) { return d.x0; }).attr('y', function(d) { return d.y0; })
        .attr('height', function(d) { return d.y1 - d.y0; }).attr('width', function(d) { return d.x1 - d.x0; })
        .attr('fill', function(d) { return nodeColors[d.name] || '#64748b'; }).attr('rx', 3)
        .append('title').text(function(d) { return d.name + ': ' + d.value + ' tasks'; });

    node.append('text')
        .attr('x', function(d) { return d.x0 < W / 2 ? d.x1 + 8 : d.x0 - 8; })
        .attr('y', function(d) { return (d.y0 + d.y1) / 2; })
        .attr('dy', '0.35em')
        .attr('text-anchor', function(d) { return d.x0 < W / 2 ? 'start' : 'end'; })
        .attr('font-size', isMobile ? 9 : 11).attr('fill', '#94a3b8')
        .text(function(d) { return d.name; });

    node.append('text')
        .attr('x', function(d) { return d.x0 < W / 2 ? d.x1 + 8 : d.x0 - 8; })
        .attr('y', function(d) { return (d.y0 + d.y1) / 2 + 13; })
        .attr('dy', '0.35em')
        .attr('text-anchor', function(d) { return d.x0 < W / 2 ? 'start' : 'end'; })
        .attr('font-size', isMobile ? 8 : 10).attr('fill', '#475569')
        .text(function(d) { return d.value + ' tasks'; });
})();
</script>
<script src="auth.js"></script>
<script src="rz-tracker.js"></script>
</body>
</html>
