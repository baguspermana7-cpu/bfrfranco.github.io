<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GED7FX8RTV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GED7FX8RTV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <title>Post-Incident RCA Fails Without Design | ResistanceZero</title>
    <meta name="description" content="Why post-incident RCA fails without design authority. Organizational learning barriers and the gap between findings and system-level change.">
    <meta name="keywords" content="Root Cause Analysis, RCA, Design Authority, Post-Incident Review, STAMP, FRAM, FTA, Fishbone, Incident Management, Data Center Operations, Organizational Learning, Safety-II, Resilience Engineering">
    <meta name="author" content="Bagus Dwi Permana">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#06b6d4">
    <link rel="canonical" href="https://resistancezero.com/article-6.html">

    <link rel="alternate" hreflang="en" href="https://resistancezero.com/article-6.html">

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://resistancezero.com/article-6.html">
    <meta property="og:title" content="Why Post-Incident RCA Fails Without Design Authority">
    <meta property="og:description" content="Transform RCA from ritual to learning engine. Comprehensive analysis of RCA methodologies, design authority integration, and effectiveness measurement for critical infrastructure.">
    <meta property="og:image" content="https://resistancezero.com/assets/article-6-cover.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Why Post-Incident RCA Fails Without Design Authority - Root Cause Analysis Article">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Bagus Dwi Permana Portfolio">
    <meta property="article:author" content="Bagus Dwi Permana">
    <meta property="article:published_time" content="2025-11-15T00:00:00Z">
    <meta property="article:modified_time" content="2026-02-17T00:00:00Z">
    <meta property="article:section" content="Root Cause Analysis">
    <meta property="article:tag" content="RCA">
    <meta property="article:tag" content="Design Authority">
    <meta property="article:tag" content="Incident Learning">
    <meta property="article:tag" content="STAMP">
    <meta property="article:tag" content="FRAM">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BagusDPermana">
    <meta name="twitter:creator" content="@BagusDPermana">
    <meta name="twitter:title" content="Why Post-Incident RCA Fails Without Design Authority">
    <meta name="twitter:description" content="Transform RCA from ritual to learning engine with effective post-incident reviews and design authority integration.">
    <meta name="twitter:image" content="https://resistancezero.com/assets/article-6-cover.jpg">
    <meta name="twitter:image:alt" content="Root Cause Analysis Beyond the Obvious in Data Centers">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <link rel="apple-touch-icon" href="assets/Favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preload" as="image" href="assets/article-6-cover.jpg">

    <!-- Structured Data - TechnicalArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechnicalArticle",
        "headline": "Why Post-Incident RCA Fails Without Design Authority",
        "description": "Comprehensive analysis of why root cause analysis fails without design authority. Covers 5-Why, Fishbone, FTA, STAMP, FRAM, RCA-to-design pipelines, effectiveness scorecards, and organizational learning.",
        "image": "https://resistancezero.com/assets/article-6-cover.jpg",
        "author": {
            "@type": "Person",
            "name": "Bagus Dwi Permana",
            "jobTitle": "Engineering Operations Manager",
            "url": "https://resistancezero.com/"
        },
        "datePublished": "2025-11-15",
        "dateModified": "2025-12-18",
        "wordCount": "8000",
        "publisher": {
            "@type": "Person",
            "name": "Bagus Dwi Permana"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://resistancezero.com/article-6.html"
        },
        "articleSection": "Root Cause Analysis",
        "keywords": ["RCA", "Design Authority", "STAMP", "FRAM", "Incident Learning", "Safety-II", "Resilience Engineering"]
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://resistancezero.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Articles",
                "item": "https://resistancezero.com/articles.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Why Post-Incident RCA Fails Without Design Authority"
            }
        ]
    }
    </script>

    <!-- Structured Data - FAQPage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Why does root cause analysis fail in data centers?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "RCA fails when organizations lack design authority to implement systemic changes. Findings get documented but the gap between investigation results and actual system-level improvements remains unaddressed."
                }
            },
            {
                "@type": "Question",
                "name": "What is design authority in root cause analysis?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Design authority is the organizational mandate to modify systems, processes, and infrastructure based on RCA findings. Without it, investigations produce reports but no meaningful change."
                }
            },
            {
                "@type": "Question",
                "name": "How do you improve organizational learning from incidents?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "By closing the gap between RCA findings and implementation through design authority, cross-functional review boards, tracked corrective actions, and measuring learning outcomes not just investigation completion."
                }
            }
        ]
    }
    </script>

    <style>
        :root {
            --primary-blue: #1e3a5f;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-emerald: #10b981;
            --accent-red: #ef4444;
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --card-border: #e2e8f0;
            --section-bg: #f8fafc;
            --table-stripe: #f8fafc;
        }

        /* Hero Section */
        .article-hero {
            background: linear-gradient(135deg, #0b1220 0%, #064e5e 50%, #06b6d4 100%);
            padding: 7rem 2rem 3.5rem;
            color: #fff;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .article-hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L32 15 L42 17 L32 19 L30 29 L28 19 L18 17 L28 15 Z' fill='%2306b6d4' fill-opacity='0.03'/%3E%3C/svg%3E");
            z-index: 0;
        }

        .article-hero > * { position: relative; z-index: 1; }
        .article-hero .container { max-width: 1000px; margin: 0 auto; }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(6, 182, 212, 0.2);
            color: #67e8f9;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .article-title {
            font-size: clamp(1.6rem, 3.2vw, 2.35rem);
            font-weight: 800;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            color: #fff;
            letter-spacing: -0.01em;
        }

        .article-subtitle {
            font-size: clamp(0.95rem, 1.6vw, 1.15rem);
            color: #94a3b8;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .article-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .article-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Table of Contents */
        .toc-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 3rem 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .toc-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .toc-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.625rem;
        }

        .toc-item {
            background: #fff;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-cyan);
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .toc-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .toc-item-number {
            font-size: 0.75rem;
            color: var(--accent-cyan);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .toc-item-title {
            font-weight: 600;
            font-size: 0.88rem;
        }

        /* Article Content */
        .article-content {
            padding: 4rem 2rem;
            background: #fff;
        }

        .article-content .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-cyan);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .article-body h2 .section-number {
            background: var(--accent-cyan);
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .article-body h3 {
            font-size: 1.1rem;
            color: #334155;
            margin: 1.5rem 0 0.5rem;
        }

        .article-body h4 {
            font-size: 0.9rem;
            color: #475569;
            margin: 1rem 0 0.5rem;
        }

        .article-body ul, .article-body ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .article-body li {
            margin-bottom: 0.35rem;
            font-size: 0.9rem;
        }

        /* Tooltip */
        .tip {
            border-bottom: 1px dashed var(--accent-cyan);
            cursor: help;
            position: relative;
            font-weight: 500;
        }

        .tip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: #e2e8f0;
            padding: 0.6rem 0.9rem;
            border-radius: 8px;
            font-size: 0.78rem;
            font-weight: 400;
            font-style: normal;
            line-height: 1.5;
            width: max-content;
            max-width: 300px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            white-space: normal;
        }

        .tip:hover::after {
            opacity: 1;
        }

        /* Source References */
        .src-ref {
            font-size: 0.7rem;
            vertical-align: super;
            color: var(--accent-cyan);
            text-decoration: none;
            font-weight: 700;
            cursor: pointer;
        }
        .src-ref:hover { text-decoration: underline; }

        /* Key Insight Box */
        .key-insight {
            background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%);
            border-left: 4px solid var(--accent-cyan);
            padding: 1.25rem 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .key-insight strong {
            color: #0e7490;
            display: block;
            margin-bottom: 0.25rem;
        }

        .key-insight p {
            margin: 0;
            color: #155e75;
            font-weight: 500;
        }

        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid var(--accent-cyan);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left-color: var(--accent-amber);
        }

        .info-box.critical {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left-color: var(--accent-red);
        }

        .info-box.success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: var(--accent-emerald);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-box p { margin: 0; }

        /* Formula Box */
        .formula-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #c4b5fd;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .formula-box-title {
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 0.75rem;
            font-family: 'Inter', sans-serif;
        }

        .formula-box .formula {
            font-size: 0.95rem;
            font-weight: 600;
            margin: 0.5rem 0;
            color: #5b21b6;
        }

        .formula-box .formula-label {
            font-size: 0.8rem;
            color: #7c3aed;
            font-family: 'Inter', sans-serif;
        }

        /* Data Tables */
        .data-table-wrapper {
            overflow-x: auto;
            margin: 1.5rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table thead {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #2d5a87 100%);
            color: #fff;
        }

        .data-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            white-space: nowrap;
        }

        .data-table td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Conclusion Box */
        .conclusion-box {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            color: #fff;
            padding: 2.5rem;
            border-radius: 16px;
            margin: 2rem 0;
        }

        .conclusion-box h3 {
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .conclusion-box p {
            color: #cbd5e1;
            line-height: 1.7;
        }

        .conclusion-box ul {
            color: #cbd5e1;
            margin: 1rem 0;
            padding-left: 1.25rem;
        }

        .conclusion-box li { margin-bottom: 0.5rem; }

        /* Interactive Calculator */
        .calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            margin: 3rem 0;
            color: #fff;
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .calculator-subtitle {
            color: #94a3b8;
            text-align: center;
            margin-bottom: 2rem;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-label {
            font-size: 0.85rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .calc-input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .calc-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .calc-result-item {
            text-align: center;
            padding: 1rem;
        }

        .calc-result-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent-cyan);
        }

        .calc-result-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Score Gauge */
        .score-gauge {
            width: 180px;
            height: 180px;
            margin: 0 auto 1.5rem;
            position: relative;
        }

        .score-gauge svg {
            transform: rotate(-90deg);
        }

        .score-gauge .gauge-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .score-gauge .gauge-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent-cyan);
            display: block;
        }

        .score-gauge .gauge-grade {
            font-size: 1rem;
            font-weight: 700;
            display: block;
            margin-top: 0.25rem;
        }

        .grade-A { color: #10b981; }
        .grade-B { color: #06b6d4; }
        .grade-C { color: #f59e0b; }
        .grade-D { color: #f97316; }
        .grade-F { color: #ef4444; }

        /* Dimension Bars */
        .dimension-bars {
            display: grid;
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .dimension-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .dimension-bar-label {
            font-size: 0.8rem;
            color: #94a3b8;
            width: 120px;
            flex-shrink: 0;
        }

        .dimension-bar-track {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .dimension-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            background: var(--accent-cyan);
        }

        .dimension-bar-value {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent-cyan);
            width: 45px;
            text-align: right;
            flex-shrink: 0;
        }

        /* Recommendations */
        .calc-recommendations {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .calc-recommendations h4 {
            color: #67e8f9;
            margin: 0 0 0.75rem;
            font-size: 0.95rem;
        }

        .calc-recommendations li {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        /* Interactive Canvas (Chart) */
        .chart-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .chart-title {
            text-align: center;
            color: #fff;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .chart-subtitle {
            text-align: center;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .chart-wrapper {
            background: rgba(2, 6, 23, 0.5);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .control-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .control-slider {
            width: 200px;
            height: 8px;
            border-radius: 4px;
            background: rgba(148, 163, 184, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #06b6d4;
            cursor: pointer;
        }

        .control-value {
            background: rgba(6, 182, 212, 0.2);
            color: #67e8f9;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.9rem;
            min-width: 50px;
            text-align: center;
        }

        .callout-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .callout-card {
            background: rgba(30, 58, 95, 0.3);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(6, 182, 212, 0.15);
        }

        .callout-label {
            color: #94a3b8;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .callout-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: #06b6d4;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .flow-box {
            background: rgba(6, 182, 212, 0.2);
            border: 1px solid rgba(6, 182, 212, 0.4);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            white-space: nowrap;
        }

        .flow-arrow {
            color: var(--accent-cyan);
            font-size: 1.2rem;
        }

        /* Architecture Diagram */
        .architecture-diagram {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            color: #e2e8f0;
            overflow-x: auto;
        }

        .architecture-title {
            color: #fff;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        /* References */
        .ref-list {
            list-style: none;
            padding: 0;
            counter-reset: ref-counter;
        }

        .ref-list li {
            counter-increment: ref-counter;
            padding: 0.75rem 0 0.75rem 2.5rem;
            border-bottom: 1px solid var(--card-border);
            font-size: 0.88rem;
            line-height: 1.7;
            position: relative;
        }

        .ref-list li::before {
            content: "[" counter(ref-counter) "]";
            color: var(--accent-cyan);
            font-weight: 700;
            font-size: 0.8rem;
            position: absolute;
            left: 0;
            top: 0.75rem;
        }

        .ref-list a {
            color: var(--accent-cyan);
            text-decoration: none;
            word-break: break-all;
        }

        .ref-list a:hover { text-decoration: underline; }

        /* Author Bio — styled via styles.css */

        /* Article Nav */
        .article-nav {
            display: flex;
            justify-content: space-between;
            padding: 2rem 0;
            border-top: 1px solid var(--card-border);
            margin-top: 3rem;
        }

        .article-nav a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-blue);
            font-weight: 600;
            transition: color 0.3s ease;
            text-decoration: none;
        }

        .article-nav a:hover { color: var(--accent-cyan); }

        /* TOC Calculator Highlight */
        .toc-item.toc-calculator {
            background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%);
            border-left-color: #06b6d4;
            border-left-width: 5px;
        }
        .toc-item.toc-calculator .toc-item-number { display: flex; align-items: center; gap: 6px; }
        .toc-item.toc-calculator .toc-calc-badge {
            font-size: 0.6rem; background: #06b6d4; color: #fff; padding: 1px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px;
        }
        [data-theme="dark"] .toc-item.toc-calculator {
            background: linear-gradient(135deg, rgba(6,182,212,0.15) 0%, rgba(6,182,212,0.08) 100%);
        }

        /* Evidence Block */
        .evidence-block {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px; padding: 2rem; margin: 2rem 0;
            border: 1px solid rgba(6,182,212,0.2);
        }
        .evidence-block-title {
            color: #67e8f9; font-size: 0.75rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 1.5px; margin-bottom: 1.25rem; display: flex; align-items: center; gap: 8px;
        }
        .evidence-block-title i { font-size: 0.85rem; }
        .evidence-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1rem;
        }
        .evidence-card {
            background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.25rem 1rem; text-align: center;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .evidence-value { font-size: 1.6rem; font-weight: 800; color: #06b6d4; line-height: 1.2; }
        .evidence-label { font-size: 0.75rem; color: #94a3b8; margin-top: 0.3rem; line-height: 1.3; }
        .evidence-sub { font-size: 0.65rem; color: #64748b; margin-top: 0.2rem; }
        .evidence-source { font-size: 0.65rem; color: #475569; margin-top: 1rem; text-align: right; }

        /* RCA Mode Toggle & Toolbar */
        .rca-mode-bar {
            display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0;
        }
        .rca-mode-bar .mode-toggle {
            display: flex; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.15);
        }
        .rca-mode-bar .mode-btn {
            padding: 8px 18px; font-size: 0.8rem; font-weight: 600; cursor: pointer; border: none;
            background: transparent; color: #94a3b8; transition: all 0.3s; font-family: inherit;
        }
        .rca-mode-bar .mode-btn.active { background: linear-gradient(135deg, #06b6d4, #0891b2); color: #fff; box-shadow: 0 4px 15px rgba(6,182,212,0.4), 0 0 20px rgba(6,182,212,0.2); border-color: #06b6d4; font-weight: 700; }
        .rca-toolbar-row {
            display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;
            gap: 0.75rem; margin-bottom: 1.5rem;
        }
        .rca-toolbar-actions { display: flex; gap: 0.5rem; align-items: center; }
        .rca-toolbar-actions button {
            padding: 8px 16px; border-radius: 8px; border: none; font-size: 0.78rem;
            font-weight: 600; cursor: pointer; font-family: inherit; display: flex; align-items: center; gap: 6px;
        }
        .rca-btn-reset { background: rgba(255,255,255,0.1); color: #94a3b8; }
        .rca-btn-reset:hover { background: rgba(255,255,255,0.15); }
        .rca-btn-pdf { background: linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1)); color: #f87171; border: 1px solid rgba(239,68,68,0.3) !important; }
        .rca-btn-pdf:hover { background: linear-gradient(135deg, rgba(239,68,68,0.3), rgba(220,38,38,0.15)); }

        /* Pro Panels */
        .rca-pro-panel {
            position: relative; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);
            border-radius: 14px; padding: 1.5rem; margin-top: 1.5rem;
        }
        .rca-pro-panel.gated { filter: blur(3px); pointer-events: none; user-select: none; }
        .rca-pro-panel .panel-title {
            font-size: 0.95rem; font-weight: 700; color: #e2e8f0; margin-bottom: 0.75rem;
            display: flex; align-items: center; gap: 8px;
        }
        .rca-pro-panel .panel-title i { color: #8b5cf6; }
        .rca-gate-overlay {
            position: absolute; inset: 0; background: rgba(15,23,42,0.85); border-radius: 14px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 0.5rem; z-index: 5; cursor: pointer;
        }
        .rca-gate-overlay i { font-size: 1.5rem; color: #8b5cf6; }
        .rca-gate-overlay span { font-size: 0.8rem; color: #94a3b8; font-weight: 600; }
        .rca-kpi-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.75rem;
        }
        .rca-kpi-card {
            background: rgba(255,255,255,0.05); border-radius: 10px; padding: 1rem; text-align: center;
            border: 1px solid rgba(255,255,255,0.06);
        }
        .rca-kpi-value { font-size: 1.4rem; font-weight: 800; color: #8b5cf6; }
        .rca-kpi-label { font-size: 0.72rem; color: #94a3b8; margin-top: 0.25rem; }

        /* Login Modal */
        .rca-login-overlay {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); backdrop-filter: blur(8px);
            z-index: 9999; align-items: center; justify-content: center;
        }
        .rca-login-overlay.active { display: flex; }
        .rca-login-box {
            background: #0f172a; border-radius: 16px; padding: 2.5rem; max-width: 380px; width: 90%;
            border: 1px solid rgba(139,92,246,0.3); box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .rca-login-box h3 { color: #e2e8f0; margin: 0 0 0.5rem; font-size: 1.1rem; }
        .rca-login-box p { color: #64748b; font-size: 0.8rem; margin: 0 0 1.5rem; }
        .rca-login-box input {
            width: 100%; padding: 0.75rem 1rem; background: #1e293b; border: 1px solid #334155;
            border-radius: 8px; color: #e2e8f0; font-size: 0.9rem; margin-bottom: 0.75rem; box-sizing: border-box;
        }
        .rca-login-box input:focus { outline: none; border-color: #8b5cf6; }
        .rca-login-box button.login-submit {
            width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: #fff;
            border: none; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 0.9rem; margin-top: 0.5rem;
        }
        .rca-login-box .demo-hint { font-size: 0.7rem; color: #64748b; margin-top: 0.75rem; text-align: center; }
        .rca-login-box .demo-hint code { background: rgba(139,92,246,0.15); padding: 1px 5px; border-radius: 3px; color: #a78bfa; }
        .rca-login-close {
            position: absolute; top: 12px; right: 16px; background: none; border: none;
            color: #64748b; font-size: 1.2rem; cursor: pointer;
        }
        [data-theme="light"] .rca-login-box { background: #ffffff; border-color: #e2e8f0; }
        [data-theme="light"] .rca-login-box h3 { color: #1e293b; }
        [data-theme="light"] .rca-login-box p { color: #64748b; }
        [data-theme="light"] .rca-login-box input { background: #f1f5f9; border-color: #e2e8f0; color: #1e293b; }

        /* Privacy Badge + Benchmark Meta */
        .privacy-badge { display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.72rem; color: #64748b; margin-top: 0.5rem; padding: 6px 0; }
        .privacy-badge i { color: #10b981; font-size: 0.8rem; }
        .benchmark-meta { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.08); }
        .benchmark-meta-tag { font-size: 0.65rem; color: #64748b; background: rgba(255,255,255,0.04); padding: 3px 8px; border-radius: 4px; display: flex; align-items: center; gap: 4px; }
        .benchmark-meta-tag i { font-size: 0.6rem; }

        /* Calculator Input Tooltips */
        .tooltip-trigger { display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;background:rgba(6,182,212,0.15);color:#06b6d4;font-size:0.65rem;font-weight:700;cursor:help;margin-left:6px;vertical-align:middle;position:relative; }
        .tooltip-content { display:none;position:fixed;width:280px;background:#1e293b;border:1px solid rgba(6,182,212,0.3);border-radius:10px;padding:14px;z-index:9999;box-shadow:0 8px 30px rgba(0,0,0,0.4);pointer-events:none; }
        .tooltip-trigger:hover .tooltip-content { display:block; }
        .tooltip-title { font-size:0.82rem;font-weight:700;color:#06b6d4;margin-bottom:6px; }
        .tooltip-desc { font-size:0.78rem;color:#cbd5e1;line-height:1.5;margin-bottom:8px; }
        .tooltip-formula { font-size:0.72rem;color:#94a3b8;padding-top:6px;border-top:1px solid rgba(255,255,255,0.1);font-style:italic; }

        /* Sensitivity Tornado Bars */
        .rca-sensitivity-bar { margin-bottom:8px; }
        .rca-sensitivity-label { font-size:0.75rem;color:#94a3b8;margin-bottom:2px;display:flex;justify-content:space-between; }
        .rca-sensitivity-track { height:12px;background:rgba(255,255,255,0.05);border-radius:6px;overflow:hidden; }
        .rca-sensitivity-fill { height:100%;border-radius:6px;background:linear-gradient(90deg,#06b6d4,#22d3ee);transition:width 0.6s; }
        .rca-sensitivity-value { font-size:0.7rem;color:#cbd5e1; }

        @media (max-width: 600px) {
            .rca-toolbar-row { flex-direction: column; align-items: stretch; }
            .rca-toolbar-actions { justify-content: center; }
            .evidence-grid { grid-template-columns: repeat(2, 1fr); }
        }

        /* Print Styles */
        @media print {
            .navbar, .calculator-section, .toc-section, .share-buttons, .chart-container { display: none !important; }
            .article-hero { padding: 1.5rem 1rem; background: #064e5e !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .article-hero .article-badge, .article-hero .article-meta { display: none; }
            .article-content { padding: 1rem; }
            body { font-size: 10pt; color: #000; }
            .key-insight, .formula-box, .conclusion-box, .info-box { break-inside: avoid; }
            .article-body h2 { break-after: avoid; }
            a { color: inherit; text-decoration: none; }
            footer { display: none !important; }
        }

        /* ═══ DARK MODE ENHANCEMENTS ═══ */
        [data-theme="dark"] .article-content { background: #0f172a; }
        [data-theme="dark"] .article-body { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body h2 { color: #93c5fd; }
        [data-theme="dark"] .article-body h3 { color: #cbd5e1; }
        [data-theme="dark"] .article-body p { color: #cbd5e1; }
        [data-theme="dark"] .article-body blockquote { background: rgba(30,58,95,0.3); border-color: rgba(96,165,250,0.4); color: #cbd5e1; }
        [data-theme="dark"] .article-body .info-box,
        [data-theme="dark"] .article-body .key-insight { background: rgba(15,23,42,0.8); border-color: rgba(255,255,255,0.1); color: #cbd5e1; }
        [data-theme="dark"] .article-body table th { background: #0f172a; color: #e2e8f0; }
        [data-theme="dark"] .article-body table td { color: #cbd5e1; border-color: rgba(255,255,255,0.1); }
        [data-theme="dark"] .article-body ul li,
        [data-theme="dark"] .article-body ol li { color: #cbd5e1; }
        [data-theme="dark"] .article-body a { color: #60a5fa; }
        [data-theme="dark"] .article-body strong { color: #f1f5f9; }

        /* Responsive */
        @media (max-width: 900px) {
            .calc-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .article-hero { padding: 6rem 1rem 3rem; }
            .article-content { padding: 2rem 1rem; }
            .toc-grid { grid-template-columns: 1fr; }
            .calc-grid { grid-template-columns: 1fr; }
            .flow-diagram { flex-direction: column; }
            .flow-arrow { transform: rotate(90deg); }
            .article-nav { flex-direction: column; gap: 1rem; }
        }
    
        /* Result Card Tooltip System */
        .res-tip {
            display: inline-flex; align-items: center; justify-content: center;
            width: 14px; height: 14px;
            background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.3);
            border-radius: 50%; font-size: 0.6rem; font-weight: 700;
            color: #fbbf24; margin-left: 4px; cursor: help;
            position: relative; flex-shrink: 0; vertical-align: middle;
            line-height: 1;
        }
        .res-tip:hover { background: rgba(245,158,11,0.3); transform: scale(1.15); }
        .res-tip .res-tip-body {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: calc(100% + 8px); left: 50%;
            transform: translateX(-50%);
            background: #1e293b; color: #e2e8f0;
            padding: 0.7rem 0.9rem; border-radius: 8px;
            font-size: 0.72rem; font-weight: 400; line-height: 1.5;
            width: 260px; z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(245,158,11,0.2);
            transition: opacity 0.2s ease; pointer-events: none;
            text-transform: none; letter-spacing: normal;
        }
        .res-tip:hover .res-tip-body { visibility: visible; opacity: 1; }
        .res-tip-body .rtt { font-weight: 700; color: #fbbf24; margin-bottom: 3px; font-size: 0.75rem; }
        .res-tip-body .rtd { color: #cbd5e1; }
        .res-tip-body .rtf {
            font-family: 'JetBrains Mono', monospace; font-size: 0.68rem;
            background: rgba(0,0,0,0.3); padding: 3px 7px; border-radius: 4px;
            color: #67e8f9; margin-top: 4px; display: block;
        }
</style>
    <link rel="preload" as="image" href="assets/article-6-cover.jpg">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0" defer></script>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Search Overlay & Modal -->
    <div class="search-overlay" id="searchOverlay"></div>
    <div class="search-modal" id="searchModal">
        <div class="search-input-wrap">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Search articles, calculators, tools..." autocomplete="off">
            <kbd class="search-kbd">ESC</kbd>
        </div>
        <div class="search-results" id="searchResults">
            <div class="search-empty">Type to search across all content</div>
        </div>
        <div class="search-footer">
            <span><kbd class="search-kbd">&uarr;&darr;</kbd> Navigate</span>
            <span><kbd class="search-kbd">Enter</kbd> Open</span>
        </div>
    </div>

    <!-- TOC Sidebar (desktop, wide screens) -->
    <nav class="toc-sidebar" id="tocSidebar" aria-label="Table of Contents">
        <div class="toc-sidebar-label">On this page</div>
        <ul class="toc-sidebar-list" id="tocSidebarList"></ul>
    </nav>

    <!-- TOC Mobile Toggle -->
    <button class="toc-mobile-toggle" id="tocMobileToggle" aria-label="Table of contents">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
    </button>
    <div class="toc-mobile-backdrop" id="tocMobileBackdrop"></div>
    <div class="toc-mobile-drawer" id="tocMobileDrawer">
        <div class="toc-drawer-header">
            <span class="toc-drawer-title">Table of Contents</span>
            <button class="toc-drawer-close" id="tocDrawerClose" aria-label="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <ul class="toc-mobile-list" id="tocMobileList"></ul>
    </div>


    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana" class="nav-avatar">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-dropdown">
                    <a href="datacenter-solutions.html" class="nav-link">
                        DC Solutions
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="datacenter-solutions.html" style="color: #06b6d4; font-weight: 600;">DC Solutions Hub</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="datahallAI.html" style="color: #8b5cf6;">DC AI/HPC</a></li>
                        <li><a href="dc-conventional.html">DC Conventional</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="capex-calculator.html" style="color: #f59e0b;">CAPEX Calculator</a></li>
                        <li><a href="opex-calculator.html" style="color: #10b981;">OPEX Calculator</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="dcmoc/" style="color: #ef4444; font-weight: 600;">DC MOC</a></li>
                    </ul>
                </li>
                <li class="nav-dropdown">
                    <a href="articles.html" class="nav-link">
                        Insights
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="articles.html" style="color: #06b6d4; font-weight: 600;">Engineering Journal</a></li>
                        <li><a href="geopolitics.html" style="color: #ef4444;">Global Analysis</a></li>
                        <li style="border-bottom: 1px solid rgba(255,255,255,0.1); margin: 4px 0;"></li>
                        <li><a href="insights.html" style="color: #64748b; font-size: 0.85rem;">All Insights</a></li>
                    </ul>
                </li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
                        <button class="nav-search-btn" id="navSearchBtn" aria-label="Search" title="Search (Ctrl+K)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
            <button class="hamburger" aria-label="Open navigation menu" aria-expanded="false">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero Section -->
    <section class="article-hero">
        <div class="container">
            <a href="articles.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Back to Engineering Journal
            </a>

            <span class="article-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 11l3 3L22 4"/>
                    <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
                </svg>
                Incident Learning &amp; RCA
            </span>

            <h1 class="article-title">Why Post-Incident RCA Fails<br>Without Design Authority</h1>

            <p class="article-subtitle">
                Root cause analysis is the most widely practiced post-incident discipline in critical infrastructure, yet recurrence rates remain stubbornly high. This paper argues that the structural failure is not analytical but organizational: RCA without design authority produces documentation, not system change. We examine five RCA methodologies, propose an RCA-to-design pipeline, and introduce an effectiveness scorecard with interactive calculator.
            </p>

            <div class="article-meta">
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    November 15, 2025
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    25 min read
                </span>
                <span class="article-meta-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    ~8,000 words
                </span>
            </div>
        </div>
    </section>
    <!-- Series Navigation -->
    <div class="series-nav" style="margin-top: 1rem;">
        <div class="series-badge">
            <span class="series-badge-icon">06</span>
            Engineering Journal &mdash; Article 6 of 18
        </div>
        <span class="series-title"></span>
        <div class="series-links">
            <a href="article-5.html" class="series-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>Prev</a>
            <a href="article-7.html" class="series-link">Next<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></a>
        </div>
    </div>


    <!-- Featured Image -->
    <figure style="margin: 2rem 0; text-align: center;">
        <img src="Article/Article_6 02.02.26/6.1.jpg" alt="Redundancy architecture and concurrent maintainability design for data center critical systems" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
    </figure>

    <!-- Table of Contents -->
    <section class="toc-section">
        <div class="toc-container">
            <h2 class="toc-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
                Table of Contents
            </h2>
            <div class="toc-grid">
                <a href="#section-1" class="toc-item">
                    <div class="toc-item-number">SECTION 1</div>
                    <div class="toc-item-title">Abstract</div>
                </a>
                <a href="#section-2" class="toc-item">
                    <div class="toc-item-number">SECTION 2</div>
                    <div class="toc-item-title">The RCA Effectiveness Crisis</div>
                </a>
                <a href="#section-3" class="toc-item">
                    <div class="toc-item-number">SECTION 3</div>
                    <div class="toc-item-title">The Missing Design Authority</div>
                </a>
                <a href="#section-4" class="toc-item">
                    <div class="toc-item-number">SECTION 4</div>
                    <div class="toc-item-title">RCA Methods Review</div>
                </a>
                <a href="#section-5" class="toc-item">
                    <div class="toc-item-number">SECTION 5</div>
                    <div class="toc-item-title">The Design Authority Concept</div>
                </a>
                <a href="#section-6" class="toc-item">
                    <div class="toc-item-number">SECTION 6</div>
                    <div class="toc-item-title">Case Context</div>
                </a>
                <a href="#section-7" class="toc-item">
                    <div class="toc-item-number">SECTION 7</div>
                    <div class="toc-item-title">The RCA-to-Design Pipeline</div>
                </a>
                <a href="#section-8" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 8 <span class="toc-calc-badge">Interactive</span></div>
                    <div class="toc-item-title">Interactive: RCA Authority Canvas</div>
                </a>
                <a href="#section-9" class="toc-item">
                    <div class="toc-item-number">SECTION 9</div>
                    <div class="toc-item-title">Measuring RCA Effectiveness</div>
                </a>
                <a href="#section-10" class="toc-item toc-calculator">
                    <div class="toc-item-number">SECTION 10 <span class="toc-calc-badge">Interactive</span></div>
                    <div class="toc-item-title">Calculator: RCA Effectiveness Scorecard</div>
                </a>
                <a href="#section-11" class="toc-item">
                    <div class="toc-item-number">SECTION 11</div>
                    <div class="toc-item-title">Organizational Learning</div>
                </a>
                <a href="#section-12" class="toc-item">
                    <div class="toc-item-number">SECTION 12</div>
                    <div class="toc-item-title">Conclusion</div>
                </a>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="article-content">
        <div class="container">
            <div class="article-body">

                <!-- Section 1: Abstract -->
                <h2 id="section-1"><span class="section-number">1</span> Abstract</h2>

                <p><span class="tip" data-tip="Root Cause Analysis: A systematic process for identifying the fundamental causes of incidents or problems">RCA</span> is the most widely practiced post-incident discipline in data center operations. Every major framework, from <span class="tip" data-tip="International Organization for Standardization 27001: Information security management">ISO 27001</span> to Uptime Institute Tier Standards, mandates some form of incident investigation and corrective action. Yet across the industry, recurrence rates for similar incident patterns remain stubbornly high, often exceeding 30% within 12 months of a completed RCA.<a href="#ref1" class="src-ref">[1]</a></p>

                <p>This paper argues that the primary failure mode is not analytical quality but organizational structure. When RCA teams lack the authority to modify system design, change architectural constraints, alter decision boundaries, or mandate process redesigns, the RCA output becomes documentation rather than transformation. The investigation is technically correct, the recommendations are operationally sound, and the system remains unchanged.</p>

                <div class="key-insight">
                    <strong>Core Thesis</strong>
                    <p>RCA without design authority is organizational theater. It satisfies audit requirements, produces reports, and changes nothing. When RCA gains the power to redesign, learning becomes real and recurrence declines.</p>
                </div>

                <p>We examine five established RCA methodologies (5-Why, Fishbone/Ishikawa, <span class="tip" data-tip="Fault Tree Analysis: A top-down deductive failure analysis using Boolean logic">FTA</span>, <span class="tip" data-tip="Systems-Theoretic Accident Model and Processes: A systems engineering approach to safety by Nancy Leveson">STAMP</span>, and <span class="tip" data-tip="Functional Resonance Analysis Method: A method by Erik Hollnagel that models everyday performance variability">FRAM</span>), evaluate their structural limitations, and propose a formal RCA-to-design pipeline. We also introduce an interactive RCA Effectiveness Scorecard that quantifies the gap between analytical effort and system change.</p>

                <!-- Evidence Block -->
                <div class="evidence-block">
                    <div class="evidence-block-title"><i class="fas fa-chart-line"></i> Key Evidence at a Glance</div>
                    <div class="evidence-grid">
                        <div class="evidence-card">
                            <div class="evidence-value">30%+</div>
                            <div class="evidence-label">Incident Recurrence</div>
                            <div class="evidence-sub">Within 12 months of completed RCA</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-value">60%</div>
                            <div class="evidence-label">Findings Unaddressed</div>
                            <div class="evidence-sub">Contributing factors already identified</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-value">6&times;</div>
                            <div class="evidence-label">Faster Learning</div>
                            <div class="evidence-sub">With design authority integration</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-value">97%</div>
                            <div class="evidence-label">False Alarm Reduction</div>
                            <div class="evidence-sub">RCA-driven system redesign case</div>
                        </div>
                        <div class="evidence-card">
                            <div class="evidence-value">$40-50K</div>
                            <div class="evidence-label">Annual OPEX Savings</div>
                            <div class="evidence-sub">Achieved through design authority</div>
                        </div>
                    </div>
                    <div class="evidence-source">Sources: Uptime Institute 2023, DOE-HDBK-1208-2012, Reason 1997</div>
                </div>

                <!-- CTA Block -->
                <div style="background: linear-gradient(135deg, rgba(6,182,212,0.12), rgba(6,182,212,0.04)); border: 1.5px solid rgba(6,182,212,0.3); border-radius: 14px; padding: 1.5rem 2rem; margin: 1.5rem 0; text-align: center;">
                    <p style="font-size: 1.05rem; font-weight: 700; color: var(--primary-blue); margin: 0 0 0.5rem;">Is Your RCA Process Creating Reports or Driving Real Change?</p>
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0 0 1rem;">Use the interactive scorecard to measure your organization's RCA effectiveness across six dimensions.</p>
                    <a href="#section-10" style="display: inline-block; background: linear-gradient(135deg, #06b6d4, #0891b2); color: #fff; padding: 0.65rem 2rem; border-radius: 10px; font-weight: 700; font-size: 0.85rem; text-decoration: none; transition: opacity 0.3s;">Calculate Your RCA Score</a>
                </div>

                <!-- Section 2: RCA Effectiveness Crisis -->
                <h2 id="section-2"><span class="section-number">2</span> The RCA Effectiveness Crisis</h2>

                <p>The data center industry has invested heavily in incident management processes. <span class="tip" data-tip="Computerized Maintenance Management System: Software for maintenance operations management">CMMS</span> platforms, ticketing systems, and structured RCA templates are now standard. Incident timelines are well-documented, fishbone diagrams are professionally rendered, and corrective actions are logged with owners and deadlines.<a href="#ref7" class="src-ref">[7]</a></p>

                <p>Yet the evidence of effectiveness is troubling. According to Uptime Institute's 2023 annual survey, approximately 60% of significant data center incidents have a contributing factor that was identified in a previous RCA but not effectively addressed.<a href="#ref7" class="src-ref">[7]</a> The U.S. Department of Energy's analysis of recurring events in high-reliability facilities shows that "same cause, different incident" patterns account for roughly 40% of all classified events.<a href="#ref5" class="src-ref">[5]</a></p>

                <h3>2.1 The Paradox of Analytical Quality</h3>

                <p>Analysis quality has improved dramatically. Modern RCA practitioners use structured methodologies, cross-functional teams, and evidence-based timelines. The analytical output is often excellent. The paradox is this: RCA quality increases, but system behavior does not change. The reports improve while the incidents recur.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Industry Average</th>
                                <th>Best Practice</th>
                                <th>Gap</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>RCA Completion Rate</td>
                                <td>65%</td>
                                <td>95%</td>
                                <td style="color: var(--accent-red);">-30%</td>
                            </tr>
                            <tr>
                                <td>Recommendation Implementation</td>
                                <td>45%</td>
                                <td>90%</td>
                                <td style="color: var(--accent-red);">-45%</td>
                            </tr>
                            <tr>
                                <td>12-Month Recurrence Rate</td>
                                <td>35%</td>
                                <td>&lt;10%</td>
                                <td style="color: var(--accent-red);">+25%</td>
                            </tr>
                            <tr>
                                <td>Time to Close (days)</td>
                                <td>45</td>
                                <td>14</td>
                                <td style="color: var(--accent-red);">+31 days</td>
                            </tr>
                            <tr>
                                <td>Design Authority Involvement</td>
                                <td>20%</td>
                                <td>85%</td>
                                <td style="color: var(--accent-red);">-65%</td>
                            </tr>
                            <tr>
                                <td>Verification Rate</td>
                                <td>30%</td>
                                <td>95%</td>
                                <td style="color: var(--accent-red);">-65%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>2.2 Symptoms of Ritual RCA</h3>

                <p>When RCA becomes ritualized, several observable patterns emerge across the organization:</p>

                <ul>
                    <li><strong>Template compliance without insight:</strong> Teams complete RCA forms with thoroughness but no originality. Every fishbone diagram looks the same. The categories are filled because they must be, not because the analysis demands them.</li>
                    <li><strong>Recommendations that mirror previous findings:</strong> "Retrain the operator," "Update the procedure," "Improve communication" appear in more than 70% of RCA reports across the industry.<a href="#ref8" class="src-ref">[8]</a></li>
                    <li><strong>No escalation mechanism:</strong> When a finding requires architectural change, there is no pathway to escalate. The RCA boundary is the documentation boundary.</li>
                    <li><strong>Closure without verification:</strong> RCA tickets are closed when the recommendation is assigned, not when the system change is verified effective.</li>
                    <li><strong>Time-to-close as the primary metric:</strong> Organizations measure how quickly they close RCAs, not whether the changes prevent recurrence.</li>
                </ul>

                <div class="info-box critical">
                    <div class="info-box-title">The Compliance Trap</div>
                    <p>Organizations that measure RCA by completion rate incentivize speed over depth. A 95% completion rate with 45% implementation and 35% recurrence means the organization is completing analyses that change nothing. This is compliance, not learning.</p>
                </div>

                <!-- Section 3: Missing Design Authority -->
                <h2 id="section-3"><span class="section-number">3</span> The Missing Design Authority</h2>

                <p>James Reason's Swiss Cheese Model, first published in 1990 and elaborated in <em>Managing the Risks of Organizational Accidents</em> (1997), established that accidents result from the alignment of latent conditions across multiple organizational layers.<a href="#ref1" class="src-ref">[1]</a> The model revolutionized incident analysis by shifting focus from individual error to systemic conditions. But it also created an unintended consequence: organizations understood the model intellectually while failing to act on its structural implications.</p>

                <h3>3.1 The Authority Gap</h3>

                <p>Design authority is the organizational power to modify system constraints: architecture, interfaces, decision rights, control logic, and operating standards. In most data center operations, this authority is distributed across engineering, facilities, IT, and management teams, but it is rarely embedded in the RCA process itself.</p>

                <p>Without design authority, the RCA process encounters predictable failure modes:</p>

                <ul>
                    <li><strong>Findings are downgraded to recommendations:</strong> The investigation identifies that the <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> alarm logic caused delayed response, but the recommendation says "review alarm settings" rather than "redesign alarm hierarchy."</li>
                    <li><strong>Systemic issues are reframed as human error:</strong> When the system made failure likely, the report concludes that the operator should have recognized the warning signs earlier.</li>
                    <li><strong>Corrective actions focus on retraining:</strong> Procedure updates and retraining are the default because they require no design authority. They change documentation, not systems.</li>
                    <li><strong>Temporal drift:</strong> Recommendations that require design changes enter a backlog where they compete with operational priorities. By the time resources are allocated, the urgency has faded and the next incident has already occurred.</li>
                </ul>

                <h3>3.2 Structural vs. Analytical Failure</h3>

                <p>Dekker (2011) distinguishes between two failure modes in safety investigation: analytical failure, where the investigation methodology is flawed, and structural failure, where the investigation is correct but the organization cannot act on its findings.<a href="#ref4" class="src-ref">[4]</a> The data center industry's RCA problem is overwhelmingly structural. The analyses are sound. The authority to act on them is absent.</p>

                <div class="formula-box">
                    <div class="formula-box-title">The RCA Authority Equation</div>
                    <div class="formula">RCA Effectiveness = f(Analytical Quality x Design Authority x Verification)</div>
                    <div class="formula-label">If any factor approaches zero, effectiveness collapses regardless of the others</div>
                </div>

                <p>This equation reveals why analytically excellent RCA can produce zero system improvement. A perfect analysis multiplied by zero design authority still equals zero change. The multiplication, not addition, is deliberate: these are enabling conditions, not additive contributions.</p>

                <!-- Section 4: RCA Methods Review -->
                <h2 id="section-4"><span class="section-number">4</span> RCA Methods Review</h2>

                <p>Five established RCA methodologies dominate practice in critical infrastructure. Each has distinct strengths, but all share a common limitation when deployed without design authority: they can identify causes but cannot mandate system change.</p>

                <h3>4.1 The 5-Why Method</h3>

                <p>Originally developed within Toyota's manufacturing system, the 5-Why technique asks "why?" iteratively until a root cause is reached. Its strength lies in simplicity and accessibility. Any team member can participate without specialized training.</p>

                <p>In data center operations, a typical 5-Why analysis might proceed as follows: the <span class="tip" data-tip="Uninterruptible Power Supply: Device providing emergency power when the primary source fails">UPS</span> tripped on overload. Why? The load exceeded the rated capacity. Why? A new rack was provisioned without updating the load calculation. Why? The provisioning process does not include electrical load verification. Why? Electrical capacity management sits in a different team with no integration point. Why? The organization separates IT provisioning from electrical engineering.</p>

                <div class="info-box warning">
                    <div class="info-box-title">5-Why Limitation</div>
                    <p>The 5-Why method produces a linear causal chain. Real incidents in complex systems involve multiple interacting factors. A single "root cause" is often an organizational convenience rather than an engineering reality. The method also provides no mechanism to verify whether the identified cause is actually the primary contributor.</p>
                </div>

                <h3>4.2 Fishbone (Ishikawa) Diagram</h3>

                <p>Kaoru Ishikawa's cause-and-effect diagram organizes potential causes into categories: typically People, Process, Equipment, Environment, Materials, and Management. The visual structure helps teams avoid tunnel vision by forcing consideration of multiple factor categories.</p>

                <p>For data center incidents, the fishbone diagram excels at capturing the breadth of contributing factors. A cooling system failure, for example, might reveal contributing factors across equipment (chiller valve stuck), process (no verification after maintenance), people (single operator on night shift), and management (no <span class="tip" data-tip="Management of Change: A systematic approach to managing all changes that could impact safety or operations">MoC</span> requirement for valve work).</p>

                <p>However, the fishbone diagram categorizes causes without ranking their contribution or modeling their interactions. In a data center environment where multiple systems interact through <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span>, <span class="tip" data-tip="Data Center Infrastructure Management: Software for monitoring, measuring, and managing data center resources">DCIM</span>, and control systems, the interactions between categories are often more important than the causes within any single category.</p>

                <h3>4.3 Fault Tree Analysis (FTA)</h3>

                <p><span class="tip" data-tip="Fault Tree Analysis: A top-down deductive failure analysis using Boolean logic">FTA</span> uses Boolean logic (AND/OR gates) to model the combinations of events that can lead to a top-level undesired event. Developed in 1962 at Bell Laboratories for the Minuteman missile launch control system, FTA remains the gold standard for analyzing hardware reliability in safety-critical systems.</p>

                <p>In data center applications, FTA is particularly valuable for analyzing power distribution failures. A data hall outage (top event) might require BOTH utility failure AND generator failure AND <span class="tip" data-tip="Uninterruptible Power Supply: Device providing emergency power when the primary source fails">UPS</span> battery depletion (an AND gate), or might result from a single <span class="tip" data-tip="Automatic Transfer Switch: Electrical switch that automatically transfers power from primary to secondary source">ATS</span> failure in a non-redundant path (an OR gate).</p>

                <p>FTA's limitation is its focus on component failure combinations. It models what can fail, not why the system made failure likely. Organizational factors, management decisions, and design trade-offs exist outside the fault tree's scope. When the root cause is "the system was designed to tolerate single failures, but the incident involved a common-cause failure across redundant paths," FTA identifies the failure combination but cannot interrogate the design decision that created the vulnerability.</p>

                <h3>4.4 STAMP (Systems-Theoretic Accident Model and Processes)</h3>

                <p>Nancy Leveson's <span class="tip" data-tip="Systems-Theoretic Accident Model and Processes: A systems engineering approach to safety by Nancy Leveson">STAMP</span> framework, detailed in <em>Engineering a Safer World</em> (2011), represents a fundamental paradigm shift.<a href="#ref13" class="src-ref">[13]</a> Rather than modeling accidents as chains of failures, STAMP treats safety as a control problem. Accidents occur when safety constraints are inadequately enforced, not simply when components fail.</p>

                <p>The associated analysis method, <span class="tip" data-tip="System-Theoretic Process Analysis: A hazard analysis technique based on STAMP for identifying causal scenarios">STPA</span> (System-Theoretic Process Analysis), identifies unsafe control actions and their causal factors. For data center operations, STPA is transformative because it explicitly models the control structure: who has authority over what decisions, what feedback loops exist, and where control gaps allow unsafe states to develop.</p>

                <p>Consider a cooling failure in a data hall. Traditional RCA might identify "chiller pump failed" as the root cause. STPA would analyze the control structure: Did the <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> provide adequate feedback? Did the control algorithm have authority to activate backup cooling? Was there a human controller in the loop, and did they have adequate information to act? Were the safety constraints (temperature limits, flow rate minimums) properly defined and enforced?</p>

                <div class="key-insight">
                    <strong>STAMP's Structural Advantage</strong>
                    <p>STAMP is the only widely-used RCA methodology that explicitly models organizational control structures. It treats the absence of adequate control as a causal factor, not an afterthought. This makes it uniquely suited to identifying design authority gaps.</p>
                </div>

                <h3>4.5 FRAM (Functional Resonance Analysis Method)</h3>

                <p>Erik Hollnagel's <span class="tip" data-tip="Functional Resonance Analysis Method: A method by Erik Hollnagel that models everyday performance variability">FRAM</span>, introduced in <em>Safety-I and Safety-II</em> (2014), represents another paradigm shift by examining how normal performance variability can combine to produce unexpected outcomes.<a href="#ref2" class="src-ref">[2]</a> Rather than asking "what went wrong?", FRAM asks "how do things usually go right, and what changed?"</p>

                <p>FRAM models functions (not components) and their couplings through six aspects: Input, Output, Precondition, Resource, Control, and Time. By mapping how everyday performance varies, FRAM can identify how small, individually acceptable variations can resonate to produce larger effects, a phenomenon Hollnagel calls "functional resonance."</p>

                <p>For data center operations, FRAM is particularly valuable in analyzing incidents where no single component failed. A capacity-related outage, for example, might result from the resonance of individually acceptable variations: slightly higher ambient temperature (within limits), slightly higher IT load (within provisioned capacity), maintenance on one of two redundant cooling units (within standard practice), and a <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> polling interval that delays alarm activation by 90 seconds (within configured parameters). No rule was broken. No component failed. The system was operating within its design envelope at every point. Yet the combination of normal variations exceeded the system's actual (not designed) tolerance.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Method</th>
                                <th>Strength</th>
                                <th>Limitation</th>
                                <th>Design Authority Need</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>5-Why</strong></td>
                                <td>Simple, accessible</td>
                                <td>Linear, single-cause bias</td>
                                <td>Low (stops at symptoms)</td>
                            </tr>
                            <tr>
                                <td><strong>Fishbone</strong></td>
                                <td>Multi-category breadth</td>
                                <td>No interaction modeling</td>
                                <td>Medium (identifies categories)</td>
                            </tr>
                            <tr>
                                <td><strong>FTA</strong></td>
                                <td>Boolean logic, quantifiable</td>
                                <td>Hardware-centric, no org factors</td>
                                <td>Medium (failure combinations)</td>
                            </tr>
                            <tr>
                                <td><strong>STAMP/STPA</strong></td>
                                <td>Control structure modeling</td>
                                <td>Complex, requires training</td>
                                <td>High (control redesign)</td>
                            </tr>
                            <tr>
                                <td><strong>FRAM</strong></td>
                                <td>Normal variability analysis</td>
                                <td>Difficult to scope, time-intensive</td>
                                <td>High (system coupling redesign)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Article Image 2 -->
                <figure style="margin: 2rem 0; text-align: center;">
                    <img src="Article/Article_6 02.02.26/6.2.jpg" alt="Design authority concept and root cause analysis methods for redundant data center systems" loading="lazy" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" decoding="async">
                </figure>

                <!-- Section 5: Design Authority Concept -->
                <h2 id="section-5"><span class="section-number">5</span> The Design Authority Concept</h2>

                <p>Design authority in critical infrastructure is not a new concept. The nuclear industry has operated with formal design authority structures for decades, codified in <span class="tip" data-tip="International Atomic Energy Agency: International organization that seeks to promote the peaceful use of nuclear energy">IAEA</span> GSR Part 2 (2016) which mandates that "the operating organization shall have the overall responsibility for safety and shall establish a design authority function."<a href="#ref12" class="src-ref">[12]</a> The aerospace industry similarly embeds design authority in its safety management systems, as documented by NASA's Columbia Accident Investigation Board (2003).<a href="#ref6" class="src-ref">[6]</a></p>

                <h3>5.1 Defining Design Authority for Data Centers</h3>

                <p>For data center operations, design authority encompasses five distinct powers:</p>

                <ol>
                    <li><strong>Architecture modification:</strong> The ability to change system topology, redundancy schemes, and distribution paths. When an RCA identifies that the N+1 cooling configuration is inadequate for the actual load profile, design authority means the RCA team can mandate a redesign, not just recommend it.</li>
                    <li><strong>Control logic alteration:</strong> The power to modify <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> alarm thresholds, <span class="tip" data-tip="Data Center Infrastructure Management: Software for monitoring, measuring, and managing data center resources">DCIM</span> integration parameters, and automated response sequences. When the incident was caused by an alarm that activated 90 seconds too late, design authority means changing the alarm logic, not writing a procedure about manual monitoring.</li>
                    <li><strong>Decision boundary redesign:</strong> The authority to redefine who can make what decisions under what conditions. When the RCA reveals that the operator lacked authority to activate emergency cooling without management approval, design authority means changing the authorization matrix.</li>
                    <li><strong>Process architecture:</strong> The power to restructure operational workflows, not just update procedures. When the investigation shows that the maintenance and operations handover process creates information gaps, design authority means redesigning the handover architecture, not adding a checklist item.</li>
                    <li><strong>Standard modification:</strong> The ability to change internal engineering standards when they prove inadequate. When a <span class="tip" data-tip="Failure Mode and Effects Analysis: A systematic technique for failure analysis">FMEA</span> reveals that the accepted cable routing standard creates common-cause failure paths, design authority means changing the standard.</li>
                </ol>

                <h3>5.2 The Nuclear Industry Precedent</h3>

                <p>IAEA GSR Part 2 (2016) establishes that the design authority function must have "the competence and organizational position to make and enforce decisions regarding design changes."<a href="#ref12" class="src-ref">[12]</a> This is not advisory. The design authority does not recommend changes; it makes them. The organizational reporting structure ensures that design authority cannot be overridden by operational convenience or commercial pressure without explicit, documented escalation.</p>

                <p>The UK Health and Safety Executive's HSG245 (2004) similarly mandates that investigations of major incidents must lead to "demonstrable changes in the management system, not merely recommendations for improvement."<a href="#ref14" class="src-ref">[14]</a> The emphasis on "demonstrable changes" distinguishes between documentation and system modification.</p>

                <h3>5.3 Why Data Centers Lack Design Authority in RCA</h3>

                <p>Several organizational factors explain why data center RCA typically operates without design authority:</p>

                <ul>
                    <li><strong>Separation of design and operations:</strong> The team that designed the facility is rarely involved in operational incident investigation. Engineering and operations are different departments, often different companies — a structural gap that <a href="article-4.html">in-house capability building</a> can help bridge.</li>
                    <li><strong>Commercial pressure:</strong> Design changes require investment. RCA recommendations that require capital expenditure compete with revenue-generating projects in the same budget cycle.</li>
                    <li><strong><span class="tip" data-tip="Service Level Agreement: A commitment between a service provider and a client defining the level of service expected">SLA</span> time pressure:</strong> Operators are measured on availability and <span class="tip" data-tip="Mean Time to Repair: Average time to repair a failed component and return it to operation">MTTR</span>. The incentive is to restore service quickly, not to investigate deeply and redesign thoroughly.</li>
                    <li><strong>Organizational hierarchy:</strong> RCA teams typically report to operations management, not engineering leadership. Their findings are recommendations to a different organizational function, not directives within their own authority.</li>
                </ul>

                <!-- Section 6: Case Context -->
                <h2 id="section-6"><span class="section-number">6</span> Case Context</h2>

                <p>To illustrate the structural failure of RCA without design authority, consider a composite case drawn from patterns observed across multiple data center operations. The specifics are anonymized, but the structural dynamics are representative.</p>

                <h3>6.1 The Incident Pattern</h3>

                <p>A mid-tier colocation provider experiences a cooling system failure in one of its data halls. The <span class="tip" data-tip="Heating, Ventilation, and Air Conditioning: Technology for indoor environmental comfort">HVAC</span> system consists of four <span class="tip" data-tip="Computer Room Air Handling unit: Precision cooling unit designed for data center environments">CRAH</span> units in an N+1 configuration. During a routine maintenance window on CRAH-3, the <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> fails to redistribute the load correctly across the remaining three units. CRAH-1 reaches 95% capacity, and a thermal excursion occurs in two cabinet rows, with inlet temperatures exceeding 35 degrees Celsius for 18 minutes before the operator manually intervenes.</p>

                <h3>6.2 The RCA Process</h3>

                <p>The operations team conducts a thorough RCA using Fishbone analysis. They identify multiple contributing factors:</p>

                <div class="architecture-diagram">
                    <div class="architecture-title">Fishbone Analysis: Data Hall Thermal Excursion</div>
                    <div class="flow-diagram">
                        <span class="flow-box">BMS Config Error</span>
                        <span class="flow-arrow">+</span>
                        <span class="flow-box">No Load Redistribution Test</span>
                        <span class="flow-arrow">+</span>
                        <span class="flow-box">Single Operator Shift</span>
                        <span class="flow-arrow">+</span>
                        <span class="flow-box">No Pre-Maintenance Verification</span>
                        <span class="flow-arrow">=</span>
                        <span class="flow-box" style="background: rgba(239,68,68,0.2); border-color: rgba(239,68,68,0.4);">Thermal Excursion</span>
                    </div>
                </div>

                <h3>6.3 The Recommendations</h3>

                <p>The RCA produces five recommendations:</p>

                <ol>
                    <li>Update the <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> configuration to properly redistribute load during single-unit maintenance (assigned to BMS vendor)</li>
                    <li>Create a pre-maintenance checklist that includes load redistribution verification (assigned to operations manager)</li>
                    <li>Retrain operators on thermal monitoring during maintenance windows (assigned to training coordinator)</li>
                    <li>Review staffing levels for maintenance windows (assigned to operations director)</li>
                    <li>Implement automated <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> failover testing as part of quarterly validation (assigned to engineering team)</li>
                </ol>

                <h3>6.4 What Actually Happens</h3>

                <p>Six months later, the RCA tracking system shows:</p>

                <ul>
                    <li>Recommendation 1: Vendor has been contacted. A change request is in the queue. Not yet implemented.</li>
                    <li>Recommendation 2: Checklist created and issued. Compliance is inconsistent.</li>
                    <li>Recommendation 3: Training completed. Operators signed attendance sheets.</li>
                    <li>Recommendation 4: Staffing review conducted. No change approved due to budget constraints.</li>
                    <li>Recommendation 5: Deferred to next budget cycle. Estimated cost for automated testing: $45,000.</li>
                </ul>

                <p>Nine months after the original incident, a similar thermal excursion occurs during CRAH-2 maintenance. The same <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> configuration issue is present. The operator on duty was not the one who received the retraining. The pre-maintenance checklist was completed but the load redistribution step was marked "N/A: per previous configuration."</p>

                <div class="info-box critical">
                    <div class="info-box-title">The Recurrence Pattern</div>
                    <p>This case illustrates the fundamental problem: the RCA was analytically sound. Every contributing factor was correctly identified. The recommendations were operationally reasonable. But without design authority, only the lowest-authority recommendations (procedure updates, retraining) were implemented. The systemic issues (BMS logic, staffing model, automated testing) required organizational authority the RCA team did not possess. The system was unchanged. The recurrence was predictable.</p>
                </div>

                <!-- Section 7: RCA-to-Design Pipeline -->
                <h2 id="section-7"><span class="section-number">7</span> The RCA-to-Design Pipeline</h2>

                <p><a href="article-7.html">Resilient organizations</a> do not rely on RCA teams having inherent design authority. Instead, they formalize the transition from investigation to redesign through a structured pipeline. Peter Senge's <em>The Fifth Discipline</em> (1990) introduced the concept of organizational learning loops, distinguishing between single-loop learning (correcting errors within existing rules) and double-loop learning (questioning and modifying the rules themselves).<a href="#ref3" class="src-ref">[3]</a></p>

                <p>The RCA-to-design pipeline transforms single-loop RCA (identify cause, recommend fix) into double-loop RCA (identify cause, question system design, modify constraints). This requires four structural elements:</p>

                <h3>7.1 Finding Classification</h3>

                <p>Every RCA finding must be explicitly classified by its scope of required change:</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Classification</th>
                                <th>Scope</th>
                                <th>Authority Required</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Level 1: Local</strong></td>
                                <td>Single procedure or setting</td>
                                <td>Operations team</td>
                                <td>Update alarm threshold</td>
                            </tr>
                            <tr>
                                <td><strong>Level 2: Process</strong></td>
                                <td>Cross-functional workflow</td>
                                <td>Operations management</td>
                                <td>Redesign maintenance handover</td>
                            </tr>
                            <tr>
                                <td><strong>Level 3: Architectural</strong></td>
                                <td>System design or topology</td>
                                <td>Engineering authority</td>
                                <td>Modify redundancy scheme</td>
                            </tr>
                            <tr>
                                <td><strong>Level 4: Organizational</strong></td>
                                <td>Decision rights, governance</td>
                                <td>Senior management</td>
                                <td>Restructure authority matrix</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <p>The classification prevents the most common failure mode: treating all findings as Level 1 (local) when they actually require Level 3 or Level 4 changes. When every recommendation is "update the procedure," the classification system has failed.</p>

                <h3>7.2 Pre-Approved Redesign Scopes</h3>

                <p>For Level 3 and Level 4 findings, the pipeline defines pre-approved redesign scopes. These are categories of system change that have been pre-authorized for post-incident implementation, subject to safety review but not budget approval cycles. Examples include:</p>

                <ul>
                    <li><span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span> alarm logic modifications within defined safety parameters</li>
                    <li>Control sequence updates for redundancy failover scenarios</li>
                    <li>Authorization matrix changes for emergency response decisions</li>
                    <li>Maintenance procedure restructuring within existing resource allocation</li>
                    <li>Monitoring and instrumentation additions up to a pre-defined budget threshold</li>
                </ul>

                <h3>7.3 Design Review Ownership</h3>

                <p>Each Level 3 or Level 4 finding is assigned to a design review owner, not an action owner. The distinction is critical. An action owner implements a recommendation. A design review owner evaluates whether the recommendation is sufficient, whether the finding requires broader system change, and whether the proposed change introduces new risks.</p>

                <h3>7.4 Change Authority Embedding</h3>

                <p>The pipeline embeds <span class="tip" data-tip="Management of Change: A systematic approach to managing all changes that could impact safety or operations">MoC</span> authority directly in the RCA process. When a finding requires system modification, the RCA team initiates the <span class="tip" data-tip="Management of Change: A systematic approach to managing all changes that could impact safety or operations">MoC</span> process as part of the investigation, not as a separate downstream activity. This prevents the temporal drift that kills most RCA recommendations.</p>

                <div class="architecture-diagram">
                    <div class="architecture-title">RCA-to-Design Pipeline</div>
                    <div class="flow-diagram">
                        <span class="flow-box">Incident</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box">RCA Investigation</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box">Finding Classification</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box">Design Review</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box">MoC Integration</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box" style="background: rgba(16,185,129,0.2); border-color: rgba(16,185,129,0.4);">System Change</span>
                        <span class="flow-arrow">&rarr;</span>
                        <span class="flow-box" style="background: rgba(16,185,129,0.2); border-color: rgba(16,185,129,0.4);">Verification</span>
                    </div>
                </div>

                <div class="key-insight">
                    <strong>Pipeline Principle</strong>
                    <p>RCA becomes input to the design process, not an endpoint. The investigation does not conclude with recommendations; it concludes with verified system changes. The pipeline closes when the change is confirmed effective, not when the recommendation is assigned.</p>
                </div>

                <!-- Section 8: Interactive Canvas -->
                <h2 id="section-8"><span class="section-number">8</span> Interactive: RCA Authority Canvas</h2>

                <p>The following interactive visualization demonstrates the relationship between design authority level and incident recurrence probability. As design authority increases, the RCA process gains the power to implement systemic changes, reducing recurrence rates and accelerating organizational learning velocity.</p>

                <p>Adjust the slider to observe how different levels of design authority affect recurrence rates across a sequence of incidents. At low authority levels (&lt;30%), recurrence remains high because only procedural fixes are implemented. At moderate authority (30-70%), some systemic changes reduce recurrence. At high authority (&gt;70%), the organization enters a genuine learning loop where each incident produces lasting system improvement.</p>

                <div class="chart-container">
                    <div class="chart-title">RCA Design Authority vs Incident Recurrence</div>
                    <div class="chart-subtitle">Higher authority enables systemic fixes and reduces recurrence probability</div>

                    <div class="chart-wrapper">
                        <canvas id="rcaChart" class="chart-canvas" width="800" height="380"></canvas>
                    </div>

                    <div class="control-row">
                        <span class="control-label">Design Authority Level:</span>
                        <input type="range" id="authSlider" class="control-slider" min="0" max="100" value="30">
                        <span class="control-value" id="authValue">30%</span>
                    </div>

                    <div class="callout-row">
                        <div class="callout-card">
                            <div class="callout-label">Avg Recurrence</div>
                            <div class="callout-value" id="avgRecurrence">65%</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">RCA Effectiveness</div>
                            <div class="callout-value" id="rcaEffectiveness">Low</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">Learning Velocity</div>
                            <div class="callout-value" id="learningVelocity">Slow</div>
                        </div>
                        <div class="callout-card">
                            <div class="callout-label">System Change Rate</div>
                            <div class="callout-value" id="systemChangeRate">15%</div>
                        </div>
                    </div>
                </div>

                <p>The visualization reveals a critical threshold effect. Below approximately 40% design authority, increasing analytical quality produces diminishing returns because the organization cannot act on its findings. Above 60%, each increment of design authority produces accelerating improvement because systemic changes compound across incident types. The lesson is structural: investing in better analysis without investing in design authority is a misallocation of resources.</p>

                <!-- Section 9: Measuring RCA Effectiveness -->
                <h2 id="section-9"><span class="section-number">9</span> Measuring RCA Effectiveness</h2>

                <p>Traditional <span class="tip" data-tip="Key Performance Indicator: A measurable value demonstrating how effectively objectives are being achieved">KPI</span> frameworks for RCA measure the wrong things: completion rates, time-to-close, and number of recommendations generated. These metrics incentivize throughput over effectiveness. A comprehensive measurement framework must capture six dimensions:</p>

                <h3>9.1 The Six Dimensions</h3>

                <h4>Dimension 1: Completion Rate (Weight: 20%)</h4>
                <p>The ratio of completed RCAs to total qualifying incidents. While necessary, this metric alone is insufficient. A 95% completion rate means nothing if the completed RCAs produce no system change. The weight of 20% reflects its role as a prerequisite, not a measure of effectiveness.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Completion Score</div>
                    <div class="formula">Completion Score = (RCAs Completed / Annual Incidents) x 100 x 0.20</div>
                    <div class="formula-label">Maximum contribution: 20 points</div>
                </div>

                <h4>Dimension 2: Implementation Rate (Weight: 25%)</h4>
                <p>The percentage of RCA recommendations that are actually implemented (not just assigned). This is the highest-weighted dimension because implementation is the point where analysis meets action. An implementation rate below 50% indicates that the RCA process is generating recommendations the organization cannot or will not act on.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Implementation Score</div>
                    <div class="formula">Implementation Score = Implementation Rate (%) x 0.25</div>
                    <div class="formula-label">Maximum contribution: 25 points</div>
                </div>

                <h4>Dimension 3: Recurrence Rate (Weight: 20%)</h4>
                <p>The percentage of incidents that recur within 12 months with the same or similar root cause. This is the ultimate outcome metric, but it is lagging and subject to external factors. The inverse formulation (100 minus recurrence rate) ensures that lower recurrence produces a higher score.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Recurrence Score</div>
                    <div class="formula">Recurrence Score = (100 - Recurrence Rate %) x 0.20</div>
                    <div class="formula-label">Maximum contribution: 20 points</div>
                </div>

                <h4>Dimension 4: Time-to-Close (Weight: 15%)</h4>
                <p>The average number of days from incident to verified RCA closure. Faster closure is better, but only when closure means verified system change, not ticket closure. The formula normalizes against a 90-day benchmark, with a floor of zero for RCAs that exceed 90 days.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Time Score</div>
                    <div class="formula">Time Score = max(0, (1 - Days / 90)) x 100 x 0.15</div>
                    <div class="formula-label">Maximum contribution: 15 points. Zero if time exceeds 90 days.</div>
                </div>

                <h4>Dimension 5: Design Authority Involvement (Weight: 10%)</h4>
                <p>The percentage of RCAs that include design authority review, defined as involvement of engineering personnel with the authority to approve system modifications. This leading indicator predicts the quality of system change.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Design Authority Score</div>
                    <div class="formula">DA Score = Design Authority Involvement (%) x 0.10</div>
                    <div class="formula-label">Maximum contribution: 10 points</div>
                </div>

                <h4>Dimension 6: Verification Rate (Weight: 10%)</h4>
                <p>The percentage of implemented recommendations that are verified effective through testing, measurement, or subsequent incident analysis. Verification closes the learning loop by confirming that the change actually addresses the identified cause.</p>

                <div class="formula-box">
                    <div class="formula-box-title">Verification Score</div>
                    <div class="formula">Verification Score = Verification Rate (%) x 0.10</div>
                    <div class="formula-label">Maximum contribution: 10 points</div>
                </div>

                <h3>9.2 Total Score and Grading</h3>

                <p>The total RCA Effectiveness Score is the sum of all six dimensions, ranging from 0 to 100. The grading scale reflects the compounding nature of effectiveness: organizations must perform well across all dimensions, not just one or two.</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Grade</th>
                                <th>Score Range</th>
                                <th>Interpretation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong style="color: #10b981;">A</strong></td>
                                <td>85-100</td>
                                <td>Excellent: RCA is a genuine learning engine with design authority integration</td>
                            </tr>
                            <tr>
                                <td><strong style="color: #06b6d4;">B</strong></td>
                                <td>70-84</td>
                                <td>Good: Strong analytical capability with partial design authority</td>
                            </tr>
                            <tr>
                                <td><strong style="color: #f59e0b;">C</strong></td>
                                <td>55-69</td>
                                <td>Adequate: Basic RCA process present but limited system change</td>
                            </tr>
                            <tr>
                                <td><strong style="color: #f97316;">D</strong></td>
                                <td>40-54</td>
                                <td>Poor: RCA is primarily ritualistic with minimal effectiveness</td>
                            </tr>
                            <tr>
                                <td><strong style="color: #ef4444;">F</strong></td>
                                <td>0-39</td>
                                <td>Failing: RCA process exists on paper but produces no measurable improvement</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Section 10: Calculator -->
                <h2 id="section-10"><span class="section-number">10</span> Calculator: RCA Effectiveness Scorecard</h2>

                <p>Use this interactive calculator to assess your organization's RCA effectiveness. Enter your operational data to receive a scored assessment across all six dimensions, a learning rate calculation, predicted recurrence, and prioritized recommendations.</p>

                <div class="calculator-section">
                    <!-- Toolbar Row: Mode Toggle + Actions -->
                    <div class="rca-toolbar-row">
                        <div class="rca-mode-bar">
                            <div class="mode-toggle">
                                <button class="mode-btn active" onclick="switchRcaMode('free')">Free</button>
                                <button class="mode-btn" onclick="switchRcaMode('pro')">Pro Analysis</button>
                            </div>
                        </div>
                        <div class="rca-toolbar-actions">
                            <button class="rca-btn-reset" onclick="rcaResetDefaults()"><i class="fas fa-undo"></i> Reset</button>
                            <button class="rca-btn-pdf" onclick="exportRcaPDF()"><i class="fas fa-file-pdf"></i> Export PDF</button>
                        </div>
                    </div>

                    <h3 class="calculator-title">RCA Effectiveness Scorecard</h3>
                    <p class="calculator-subtitle">Enter your metrics to calculate your organization's RCA maturity score</p>

                    <div class="calc-grid">
                        <div class="calc-input-group">
                            <label class="calc-label">Annual Incidents <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Annual Incidents</span><span class="tooltip-desc">Total reportable incidents per year requiring root cause investigation. Includes all severity levels (P1-P4). Higher counts may indicate systemic issues rather than random failures.</span><span class="tooltip-formula">Benchmark: Tier III avg 30-50/yr (Uptime Institute 2023)</span></span></span></label>
                            <input type="number" class="calc-input" id="calcIncidents" value="48" min="1" max="999">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">RCAs Completed <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">RCAs Completed</span><span class="tooltip-desc">Number of formal root cause analyses completed. RCA Coverage Ratio = RCAs/Incidents. Below 70% indicates investigation bottleneck or triage gaps. Each skipped RCA is a missed learning opportunity.</span><span class="tooltip-formula">Benchmark: Target &ge;80% coverage for P1-P2 incidents</span></span></span></label>
                            <input type="number" class="calc-input" id="calcRCAs" value="30" min="0" max="999">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Recommendations per RCA <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Recommendations per RCA</span><span class="tooltip-desc">Average corrective actions identified per investigation. Too few (&lt;3) suggests shallow analysis (fixing symptoms). Too many (&gt;8) may indicate scope creep or lack of root cause isolation.</span><span class="tooltip-formula">Benchmark: 3-5 per RCA (DOE-HDBK-1208)</span></span></span></label>
                            <input type="number" class="calc-input" id="calcRecsPerRCA" value="4" min="1" max="20">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Implementation Rate (%) <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Implementation Rate</span><span class="tooltip-desc">Percentage of RCA recommendations actually implemented within 90 days. The single most critical effectiveness metric &mdash; unimplemented findings mean repeated failures. Industry average is shockingly low at 40-50%.</span><span class="tooltip-formula">Benchmark: Target &ge;75% (Safety-II organizations achieve &gt;85%)</span></span></span></label>
                            <input type="number" class="calc-input" id="calcImplRate" value="45" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Recurrence Rate (%) <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Recurrence Rate</span><span class="tooltip-desc">Percentage of incidents that are repeat occurrences of previously investigated root causes. High recurrence = RCA program producing analysis without driving change. Target &lt;15% for mature programs.</span><span class="tooltip-formula">Benchmark: &lt;15% = Mature, 15-30% = Developing, &gt;30% = Reactive</span></span></span></label>
                            <input type="number" class="calc-input" id="calcRecurRate" value="35" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Time to Close (days) <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Time to Close</span><span class="tooltip-desc">Average days from incident to RCA completion and recommendation implementation. Speed matters &mdash; Leveson's STAMP research shows corrective action effectiveness degrades 8% per week of delay.</span><span class="tooltip-formula">Benchmark: Target &lt;30 days (DOE standard), Critical &lt;14 days</span></span></span></label>
                            <input type="number" class="calc-input" id="calcDays" value="45" min="1" max="365">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Design Authority Involvement (%) <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Design Authority Involvement</span><span class="tooltip-desc">Percentage of RCAs involving a Design Authority review. DA ensures root causes in design/specification layers are identified, not just operational symptoms. Low DA involvement correlates with 2.3x higher recurrence.</span><span class="tooltip-formula">Benchmark: Target &ge;60% for P1-P2, 100% for design-related incidents</span></span></span></label>
                            <input type="number" class="calc-input" id="calcDA" value="20" min="0" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label class="calc-label">Verification Rate (%) <span class="tooltip-trigger">?<span class="tooltip-content"><span class="tooltip-title">Verification Rate</span><span class="tooltip-desc">Percentage of implemented recommendations that are formally verified effective (post-implementation review). Without verification, organizations assume fixes work without evidence.</span><span class="tooltip-formula">Benchmark: Target &ge;70% (ISO 45001 requirement for high-risk)</span></span></span></label>
                            <input type="number" class="calc-input" id="calcVerify" value="30" min="0" max="100">
                        </div>
                    </div>

                    <button onclick="calculateRCA()" style="display: block; margin: 0 auto 2rem; background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: #fff; border: none; padding: 1rem 3rem; border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer; transition: all 0.3s ease;">Calculate Scorecard</button>

                    <!-- Score Gauge -->
                    <div class="score-gauge" id="scoreGauge">
                        <svg width="180" height="180" viewBox="0 0 180 180">
                            <circle cx="90" cy="90" r="78" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="12"/>
                            <circle cx="90" cy="90" r="78" fill="none" stroke="#06b6d4" stroke-width="12" stroke-dasharray="490" stroke-dashoffset="490" stroke-linecap="round" id="gaugeArc"/>
                        </svg>
                        <div class="gauge-text">
                            <span class="gauge-value" id="gaugeScore">0</span>
                            <span class="gauge-grade" id="gaugeGrade">--</span>
                        </div>
                    </div>

                    <!-- Dimension Bars -->
                    <div class="dimension-bars" id="dimensionBars">
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Completion</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barCompletion" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valCompletion">0</span>
                        </div>
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Implementation</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barImplementation" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valImplementation">0</span>
                        </div>
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Recurrence</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barRecurrence" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valRecurrence">0</span>
                        </div>
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Time-to-Close</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barTime" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valTime">0</span>
                        </div>
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Design Authority</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barDA" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valDA">0</span>
                        </div>
                        <div class="dimension-bar">
                            <span class="dimension-bar-label">Verification</span>
                            <div class="dimension-bar-track"><div class="dimension-bar-fill" id="barVerify" style="width: 0%"></div></div>
                            <span class="dimension-bar-value" id="valVerify">0</span>
                        </div>
                    </div>

                    <!-- Derived Metrics -->
                    <div class="calc-results" id="derivedMetrics">
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resLearningRate">0%</div>
                            <div class="calc-result-label">Learning Rate <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Organizational Learning Rate</div><div class="rtd">Rate at which the organization learns from incidents. Higher = fewer repeat failures.</div><span class="rtf">Target: &gt;80% implementation of RCA recommendations</span></span></span></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resPredRecurrence">0</div>
                            <div class="calc-result-label">Predicted Recurrence <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Predicted Recurrence</div><div class="rtd">Forecasted number of recurring incidents based on current RCA completion and implementation rates.</div></span></span></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resDAGap">0%</div>
                            <div class="calc-result-label">DA Gap <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Design Authority Gap</div><div class="rtd">Percentage gap between actual Design Authority involvement and the recommended level.</div><span class="rtf">Best practice: DA involved in &gt;80% of RCAs</span></span></span></div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-value" id="resTotalRecs">0</div>
                            <div class="calc-result-label">Total Recommendations <span class="res-tip">?<span class="res-tip-body"><div class="rtt">Total Recommendations</div><div class="rtd">Cumulative corrective actions generated from all completed RCAs.</div></span></span></div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="calc-recommendations" id="calcRecommendations">
                        <h4>Top 3 Recommendations</h4>
                        <ol id="recList">
                            <li>Enter your data and click Calculate to see recommendations.</li>
                        </ol>
                    </div>

                    <!-- Pro Analysis Panels -->
                    <div id="rcaProPanels" style="display: none;">

                        <!-- Panel 1: Organizational Maturity Deep Dive -->
                        <div class="rca-pro-panel gated" id="rcaPanel1">
                            <div class="panel-title"><i class="fas fa-layer-group"></i> Organizational Maturity Deep Dive</div>
                            <div class="rca-kpi-grid">
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMaturityLevel">--</div><div class="rca-kpi-label">Maturity Level (1-5)</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proLoopType">--</div><div class="rca-kpi-label">Learning Loop Type</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proCulturalGap">--</div><div class="rca-kpi-label">Cultural Gap Score</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proSafetyParadigm">--</div><div class="rca-kpi-label">Safety Paradigm</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proCAPAScore">--</div><div class="rca-kpi-label">CAPA Effectiveness</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proReadiness">--</div><div class="rca-kpi-label">DA Readiness</div></div>
                            </div>
                            <canvas id="rcaRadarChart" width="400" height="300" style="width:100%;max-width:400px;margin:1rem auto;display:block;"></canvas>
                            <div class="rca-gate-overlay" onclick="rcaShowLogin()"><i class="fas fa-lock"></i><span>Unlock Pro Analysis</span></div>
                        </div>

                        <!-- Panel 2: Cost Impact Analysis -->
                        <div class="rca-pro-panel gated" id="rcaPanel2">
                            <div class="panel-title"><i class="fas fa-dollar-sign"></i> Cost Impact Analysis</div>
                            <div class="rca-kpi-grid">
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proRecurCost">--</div><div class="rca-kpi-label">Annual Recurrence Cost</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proDAROI">--</div><div class="rca-kpi-label">DA Investment ROI</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proCostPerIncident">--</div><div class="rca-kpi-label">Cost per Incident</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proSavings12m">--</div><div class="rca-kpi-label">12-Month Savings</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proPaybackMonths">--</div><div class="rca-kpi-label">Payback Period</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proRiskExposure">--</div><div class="rca-kpi-label">Risk Exposure $/yr</div></div>
                            </div>
                            <div class="rca-gate-overlay" onclick="rcaShowLogin()"><i class="fas fa-lock"></i><span>Unlock Pro Analysis</span></div>
                        </div>

                        <!-- Panel 3: Methodology Effectiveness + Sensitivity -->
                        <div class="rca-pro-panel gated" id="rcaPanel3">
                            <div class="panel-title"><i class="fas fa-microscope"></i> Methodology Effectiveness Matrix</div>
                            <div class="rca-kpi-grid">
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proBestMethod">--</div><div class="rca-kpi-label">Recommended Method</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMethodFit">--</div><div class="rca-kpi-label">Method Fit Score</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proComplexity">--</div><div class="rca-kpi-label">Complexity Class</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proTeamSize">--</div><div class="rca-kpi-label">Optimal Team Size</div></div>
                            </div>
                            <div style="margin-top:1.25rem;">
                                <div style="font-size:0.85rem;font-weight:700;color:#e2e8f0;margin-bottom:0.75rem;"><i class="fas fa-arrows-alt-h" style="color:#06b6d4;margin-right:6px;"></i>Sensitivity Tornado Analysis</div>
                                <div id="rcaTornadoBars" style="margin-top:0.5rem;"></div>
                            </div>
                            <div class="rca-gate-overlay" onclick="rcaShowLogin()"><i class="fas fa-lock"></i><span>Unlock Pro Analysis</span></div>
                        </div>

                        <!-- Panel 4: Predictive Analytics + Monte Carlo -->
                        <div class="rca-pro-panel gated" id="rcaPanel4">
                            <div class="panel-title"><i class="fas fa-chart-bar"></i> Predictive Analytics &amp; Monte Carlo Simulation</div>
                            <div class="rca-kpi-grid">
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proPredNext6">--</div><div class="rca-kpi-label">Predicted Incidents (6mo)</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proTrendDir">--</div><div class="rca-kpi-label">Trend Direction</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proBreakevenDA">--</div><div class="rca-kpi-label">Breakeven DA Level</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proTimeToA">--</div><div class="rca-kpi-label">Time to Grade A</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMCMean">--</div><div class="rca-kpi-label">MC Mean Score</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMCStdDev">--</div><div class="rca-kpi-label">MC Std Dev</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMCP5">--</div><div class="rca-kpi-label">P5 (Worst Case)</div></div>
                                <div class="rca-kpi-card"><div class="rca-kpi-value" id="proMCP95">--</div><div class="rca-kpi-label">P95 (Best Case)</div></div>
                            </div>
                            <canvas id="rcaMCHistogram" width="800" height="280" style="width:100%;margin:1rem 0;display:block;"></canvas>
                            <div class="rca-gate-overlay" onclick="rcaShowLogin()"><i class="fas fa-lock"></i><span>Unlock Pro Analysis</span></div>
                        </div>

                        <!-- Executive Narrative Assessment -->
                        <div id="rcaNarrativeBox" style="display:none;background:rgba(6,182,212,0.05);border:1px solid rgba(6,182,212,0.2);border-radius:12px;padding:20px;margin-top:1rem;">
                            <h4 style="color:#06b6d4;margin:0 0 1rem;font-size:0.95rem;"><i class="fas fa-file-alt"></i> Executive RCA Assessment</h4>
                            <div id="rcaNarrativeContent" style="font-size:0.85rem;color:#cbd5e1;line-height:1.7;"></div>
                        </div>

                    </div>

                    <!-- Privacy Badge + Benchmark Meta -->
                    <div class="privacy-badge">
                        <i class="fas fa-shield-alt"></i> PDF generated in your browser &mdash; no data is sent to any server
                    </div>
                    <div class="benchmark-meta">
                        <span class="benchmark-meta-tag"><i class="fas fa-code-branch"></i> Model v2.0</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-calendar"></i> Updated Feb 2026</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-book"></i> Sources: Uptime 2023, DOE-HDBK-1208, Leveson STAMP 2011, ISO 45001</span>
                        <span class="benchmark-meta-tag"><i class="fas fa-info-circle"></i> 6-dimension weighted scorecard, 10K Monte Carlo, sensitivity tornado</span>
                    </div>

                </div>

                <!-- Login Modal -->
                <div class="rca-login-overlay" id="rcaLoginOverlay">
                    <div class="rca-login-box" style="position: relative;">
                        <button class="rca-login-close" onclick="rcaHideLogin()">&times;</button>
                        <h3><i class="fas fa-lock" style="color: #8b5cf6;"></i> Pro Analysis Access</h3>
                        <p>Enter your credentials to unlock advanced RCA analytics including maturity assessment, cost impact, methodology recommendations, and predictive modeling.</p>
                        <input type="email" id="rcaLoginEmail" placeholder="Email address">
                        <input type="password" id="rcaLoginPass" placeholder="Password">
                        <div id="rcaLoginError" style="color: #ef4444; font-size: 0.78rem; margin-bottom: 0.5rem; display: none;"></div>
                        <button class="login-submit" onclick="rcaHandleLogin()">Unlock Pro Analysis</button>
                        <div class="demo-hint">Demo: <code>demo@resistancezero.com</code> / <code>demo2026</code></div>
                        <div style="text-align:center;margin-top:6px;"><a href="https://bagus-dwi-permana.myr.id/membership/resistancezero-pro" target="_blank" rel="noopener" style="font-size:0.62rem;color:#64748b;text-decoration:none;">Unlock Pro Mode &rarr;</a></div>
                <p style="text-align:center;font-size:0.68rem;color:#64748b;margin-top:8px;line-height:1.5;">By clicking Login, you agree to our <a href="terms.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Terms of Service</a> and <a href="privacy.html" target="_blank" style="color:#8b5cf6;text-decoration:underline;">Privacy Policy</a>.</p>
                    </div>
                </div>

                <!-- Section 11: Organizational Learning -->
                <h2 id="section-11"><span class="section-number">11</span> Organizational Learning</h2>

                <p>The connection between RCA effectiveness and organizational learning is not merely metaphorical. Senge (1990) identified five disciplines of organizational learning: systems thinking, personal mastery, mental models, shared vision, and team learning.<a href="#ref3" class="src-ref">[3]</a> RCA with design authority activates all five in ways that ritual RCA cannot.</p>

                <h3>11.1 Single-Loop vs. Double-Loop Learning</h3>

                <p>Chris Argyris and Donald Schon distinguished between single-loop learning (adjusting actions within existing frameworks) and double-loop learning (questioning and modifying the frameworks themselves). Traditional RCA operates in single-loop mode: the incident occurred because a rule was broken, so we reinforce the rule. Double-loop RCA asks: why did the system make it rational to break the rule? What structural conditions created the deviation? How must the system change to make compliance the natural, easy behavior?</p>

                <p>David Woods (2010) extends this concept with "graceful extensibility," the ability of a system to extend its capacity to handle unexpected situations.<a href="#ref11" class="src-ref">[11]</a> RCA with design authority creates graceful extensibility by modifying the system's boundaries, not just its procedures. When an incident reveals that the operating envelope is narrower than assumed, design authority allows the organization to either widen the envelope or redesign the system to operate safely within its actual limits.</p>

                <h3>11.2 Safety-II and Learning from Success</h3>

                <p>Hollnagel's <a href="article-8.html">Safety-II framework</a> proposes that organizations should learn from successful performance, not just failures.<a href="#ref2" class="src-ref">[2]</a> In traditional Safety-I thinking, safety is the absence of accidents. In Safety-II, safety is the presence of successful adaptations. This paradigm shift has profound implications for RCA.</p>

                <p>When RCA has design authority, it can conduct <span class="tip" data-tip="Post-Incident Review: A structured assessment conducted after an incident to identify lessons and improvements">PIR</span> (Post-Incident Reviews) that examine not just what went wrong, but what went right. How did the operator's manual intervention prevent a more severe outcome? What informal knowledge did they use that is not captured in procedures? How can the system be redesigned to support and amplify these successful adaptations rather than treating them as deviations from protocol?</p>

                <h3>11.3 Normal Accidents and Organizational Complexity</h3>

                <p>Charles Perrow's <em>Normal Accidents</em> (1999) argued that in tightly coupled, complex systems, accidents are inevitable regardless of safety measures.<a href="#ref10" class="src-ref">[10]</a> While Perrow's thesis has been debated extensively, his insight about tight coupling remains relevant: in systems where components interact in unexpected ways, RCA must have the authority to modify coupling relationships, not just individual components.</p>

                <p>Modern data centers are tightly coupled systems. Electrical, mechanical, and control systems interact through <span class="tip" data-tip="Building Management System: Centralized system for monitoring and controlling building mechanical and electrical equipment">BMS</span>, <span class="tip" data-tip="Data Center Infrastructure Management: Software for monitoring, measuring, and managing data center resources">DCIM</span>, and network management platforms. An incident in one domain often has contributing factors in another. RCA without design authority cannot address cross-domain coupling because it lacks jurisdiction beyond its own functional area.</p>

                <h3>11.4 The Learning Organization Maturity Model</h3>

                <p>Organizations progress through identifiable stages of learning maturity in their RCA practice:</p>

                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Level</th>
                                <th>Name</th>
                                <th>Characteristics</th>
                                <th>DA Integration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>1</strong></td>
                                <td>Reactive</td>
                                <td>RCA after major incidents only; blame-focused</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><strong>2</strong></td>
                                <td>Compliant</td>
                                <td>RCA for all qualifying incidents; template-driven</td>
                                <td>Advisory only</td>
                            </tr>
                            <tr>
                                <td><strong>3</strong></td>
                                <td>Proactive</td>
                                <td>Structured methodology; cross-functional teams</td>
                                <td>Consulted</td>
                            </tr>
                            <tr>
                                <td><strong>4</strong></td>
                                <td>Integrated</td>
                                <td>RCA-to-design pipeline; finding classification</td>
                                <td>Embedded</td>
                            </tr>
                            <tr>
                                <td><strong>5</strong></td>
                                <td>Generative</td>
                                <td>Learning from success and failure; continuous redesign</td>
                                <td>Full authority</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <p>Most data center operations operate at Level 2 (Compliant) or Level 3 (Proactive). The transition to Level 4 (Integrated) requires the structural changes described in this paper: finding classification, pre-approved redesign scopes, design review ownership, and embedded change authority. Level 5 (Generative) requires a cultural transformation where learning is valued over compliance and system redesign is the expected outcome of investigation, not the exceptional one.</p>

                <div class="info-box success">
                    <div class="info-box-title">The Learning Rate Formula</div>
                    <p>Organizations can estimate their learning rate as: Learning Rate = (Implementation Rate / 100) x (1 - Recurrence Rate / 100) x (DA Involvement / 100). A learning rate above 0.25 indicates the organization is genuinely improving. Below 0.10, the organization is performing analysis without learning. The industry average is approximately 0.06, which means that only 6% of analytical effort translates into lasting system improvement.</p>
                </div>

                <h3>11.5 Building a <span class="tip" data-tip="Corrective and Preventive Action: A structured process for identifying, correcting, and preventing quality issues">CAPA</span> Culture</h3>

                <p>A mature <span class="tip" data-tip="Corrective and Preventive Action: A structured process for identifying, correcting, and preventing quality issues">CAPA</span> culture integrates corrective and preventive actions into every level of the organization. The corrective component addresses the immediate incident. The preventive component, which requires design authority, addresses the systemic conditions that made the incident possible. Without both components, the organization oscillates between incidents and partial fixes indefinitely.</p>

                <p>The NASA Columbia Accident Investigation Board (2003) identified this pattern explicitly: "The organizational causes of this accident are rooted in the Space Shuttle Program's history and culture, including the original compromises that were required to gain approval for the Shuttle, subsequent years of resource constraints, fluctuating priorities, schedule pressures, mischaracterization of the Shuttle as operational rather than developmental, and lack of an agreed-upon national vision for human spaceflight."<a href="#ref6" class="src-ref">[6]</a> The report demonstrates that even the highest-profile incidents can be traced to organizational structures that separate investigation from redesign authority.</p>

                <!-- Section 12: Conclusion -->
                <h2 id="section-12"><span class="section-number">12</span> Conclusion</h2>

                <div class="conclusion-box">
                    <h3>RCA Does Not Fail Because Teams Are Incompetent</h3>
                    <p>The central argument of this paper is structural, not analytical. RCA fails because organizations separate analysis from authority. When the team that understands why an incident occurred lacks the power to change the system that produced it, the investigation becomes documentation. The reports accumulate. The knowledge is captured. The system remains unchanged. And the incidents recur.</p>
                    <p>The solution is not better analytical methods, though STAMP and FRAM represent significant improvements over traditional approaches. The solution is organizational: embed design authority in the RCA process. Create formal pipelines from investigation to redesign. Classify findings by the scope of change they require. Pre-approve redesign scopes for post-incident implementation. Measure effectiveness by system change, not report completion.</p>
                    <ul>
                        <li><strong>Finding classification</strong> ensures that systemic issues are not treated as local fixes</li>
                        <li><strong>Pre-approved redesign scopes</strong> remove the budget delay that kills most recommendations</li>
                        <li><strong>Design review ownership</strong> assigns accountability for system change, not just action items</li>
                        <li><strong>MoC integration</strong> embeds change authority directly in the investigation process</li>
                        <li><strong>Verification</strong> closes the learning loop by confirming that changes are effective</li>
                    </ul>
                    <p>When RCA gains the power to redesign, learning becomes real and recurrence declines. The transformation is not analytical; it is organizational. The question for every data center operator is not "how well do we analyze incidents?" but "when we understand why an incident occurred, do we have the authority to change the system that produced it?"</p>
                </div>

                <!-- References -->
                <div style="margin-top: 3rem;">
                    <h2 style="font-size: 1.25rem; color: var(--primary-blue); margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 3px solid var(--accent-cyan);">References</h2>
                    <ol class="ref-list">
                        <li id="ref1">Reason, J. (1997). <em>Managing the Risks of Organizational Accidents</em>. Ashgate Publishing. The foundational text on organizational accident causation and the Swiss Cheese Model.</li>
                        <li id="ref2">Hollnagel, E. (2014). <em>Safety-I and Safety-II: The Past and Future of Safety Management</em>. Ashgate Publishing. Introduces the paradigm shift from failure-focused to success-focused safety analysis.</li>
                        <li id="ref3">Senge, P.M. (1990). <em>The Fifth Discipline: The Art and Practice of the Learning Organization</em>. Doubleday. Foundational framework for organizational learning and systems thinking.</li>
                        <li id="ref4">Dekker, S. (2011). <em>Drift into Failure: From Hunting Broken Components to Understanding Complex Systems</em>. Ashgate Publishing. Analysis of how safe systems gradually drift toward failure.</li>
                        <li id="ref5">U.S. Department of Energy. (2012). <em>DOE-HDBK-1208-2012: Guide to Good Practices for Occurrence Reporting and Processing of Operations Information</em>. U.S. DOE. Federal guidance on incident investigation and recurrence prevention.</li>
                        <li id="ref6">Columbia Accident Investigation Board. (2003). <em>Report of the Columbia Accident Investigation Board, Volume 1</em>. NASA. Critical analysis of organizational causes of the Space Shuttle Columbia disaster.</li>
                        <li id="ref7">Uptime Institute. (2023). <em>Annual Outage Analysis 2023</em>. Uptime Institute Intelligence. Industry data on data center incident patterns and recurrence.</li>
                        <li id="ref8">Uptime Institute. (2024). <em>Data Center Resiliency Survey 2024</em>. Uptime Institute Intelligence. Updated analysis of operational practices and incident management effectiveness.</li>
                        <li id="ref9">ISO/IEC 27001:2022. <em>Information Security Management Systems</em>. International Organization for Standardization. Requirements for incident management and corrective action processes.</li>
                        <li id="ref10">Perrow, C. (1999). <em>Normal Accidents: Living with High-Risk Technologies</em> (Updated edition). Princeton University Press. Analysis of system complexity and inevitable accidents in tightly coupled systems.</li>
                        <li id="ref11">Woods, D.D. (2010). Escaping Failures of Foresight. <em>Safety Science</em>, 48(6), 715-722. Framework for graceful extensibility and adaptive capacity in complex systems.</li>
                        <li id="ref12">IAEA. (2016). <em>GSR Part 2: Leadership and Management for Safety</em>. International Atomic Energy Agency. Requirements for design authority functions in nuclear facilities.</li>
                        <li id="ref13">Leveson, N.G. (2011). <em>Engineering a Safer World: Systems Thinking Applied to Safety</em>. MIT Press. Introduces STAMP and STPA for systems-theoretic safety analysis.</li>
                        <li id="ref14">HSE. (2004). <em>HSG245: Investigating Accidents and Incidents</em>. UK Health and Safety Executive. Guidance on investigation methodology and demonstrable system change requirements.</li>
                    </ol>
                </div>

                <!-- Newsletter Signup -->
                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new articles on data center operations and engineering excellence are published.</p>
                    <form class="newsletter-form" onsubmit="return subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                    <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
                </div>

                <!-- Author Bio -->
                <div class="author-bio">
                    <div class="author-bio-image">
                        <img loading="lazy" src="assets/profile-photo.jpg" alt="Bagus Dwi Permana">
                    </div>
                    <div class="author-bio-content">
                        <h4>Bagus Dwi Permana</h4>
                        <p class="author-bio-title">Engineering Operations Manager | Ahli K3 Listrik</p>
                        <p>12+ years professional experience in critical infrastructure and operations. CDFOM certified. Transforming operations through systematic excellence and safety-first engineering.</p>
                        <div class="author-bio-links">
                            <a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </a>
                            <a href="https://github.com/baguspermana7-cpu" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                                GitHub
                            </a>
                            <a href="mailto:baguspermana7@gmail.com">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="related-articles">
                    <h3>Continue Reading</h3>
                    <div class="related-grid">
                        <a href="article-5.html" class="related-card">
                            <div class="related-card-number">05</div>
                            <div class="related-card-content">
                                <h4>Technical Debt in Live Data Centers Is Operational Risk</h4>
                                <p>Managing accumulated technical compromises</p>
                            </div>
                        </a>
                        <a href="article-7.html" class="related-card">
                            <div class="related-card-number">07</div>
                            <div class="related-card-content">
                                <h4>From Reliability to Resilience: Why Tier Ratings Stop at Design</h4>
                                <p>Beyond design ratings to operational resilience</p>
                            </div>
                        </a>
                        <a href="article-8.html" class="related-card">
                            <div class="related-card-number">08</div>
                            <div class="related-card-content">
                                <h4>Why "No Incident" Is Not Evidence of Safety</h4>
                                <p>Leading vs lagging safety indicators</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Article Navigation -->
                <div class="article-nav">
                    <a href="article-5.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Previous Article
                    </a>
                    <a href="article-7.html">
                        Next Article
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>

            </div>
        </div>
    </article>

    </main>

    <!-- Footer -->
    <footer class="footer footer-enhanced">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <p class="footer-tagline-main">BUILT FOR MISSION CRITICAL INFRASTRUCTURE<br>MANAGEMENT // 2026</p>
                    <p class="footer-tagline-sub">ALL OPERATIONAL DATASETS PRESERVED.</p>
                    <p class="footer-copyright">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p>
                </div>
                <div class="footer-nav">
                    <h4 class="footer-heading">NAVIGATION</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home Dashboard</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="index.html#case-studies">Case Studies</a></li>
                        <li><a href="datacenter-solutions.html">DC Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4 class="footer-heading">CONNECT</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.linkedin.com/in/bagus-dwi-permana-ba90b092" target="_blank" rel="noopener">LinkedIn Profile</a></li>
                        <li><a href="articles.html">Technical Journal</a></li>
                        <li><a href="mailto:baguspermana7@gmail.com">Direct Contact</a></li>
                        <li><a href="https://github.com/baguspermana7-cpu" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Share Buttons - Floating Sidebar -->
    <aside class="share-buttons" id="shareButtons" aria-label="Share this article">
        <span class="share-label">Share</span>
        <button class="share-btn linkedin" data-tooltip="Share on LinkedIn" onclick="shareLinkedIn()" aria-label="Share on LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </button>
        <button class="share-btn twitter" data-tooltip="Share on X" onclick="shareTwitter()" aria-label="Share on X"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></button>
        <button class="share-btn whatsapp" data-tooltip="Share on WhatsApp" onclick="shareWhatsApp()" aria-label="Share on WhatsApp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></button>
        <button class="share-btn copy" data-tooltip="Copy link" onclick="copyLink()" aria-label="Copy article link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="copy-icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="check-icon" style="display:none"><polyline points="20 6 9 17 4 12"></polyline></svg>
        </button>
    </aside>

    <script src="script.js"></script>

    <!-- Share Buttons JS -->
    <script>
    (function(){const s=document.getElementById('shareButtons'),h=document.querySelector('.article-hero');if(s&&h){document.body.classList.add('has-share-buttons');new IntersectionObserver(e=>e.forEach(x=>s.classList.toggle('visible',!x.isIntersecting)),{threshold:.1}).observe(h)}})();
    function getShareData(){return{title:document.querySelector('meta[property="og:title"]')?.content||document.title,url:window.location.href}}
    function shareLinkedIn(){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(getShareData().url)}`,'_blank','width=600,height=600')}
    function shareTwitter(){const d=getShareData();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(d.title+' by @BagusDPermana')}&url=${encodeURIComponent(d.url)}`,'_blank','width=600,height=400')}
    function shareWhatsApp(){const d=getShareData();window.open(`https://wa.me/?text=${encodeURIComponent(d.title+'\n\n'+d.url)}`,'_blank')}
    function copyLink(){const b=document.querySelector('.share-btn.copy'),c=b.querySelector('.copy-icon'),k=b.querySelector('.check-icon');navigator.clipboard.writeText(window.location.href).then(()=>{b.classList.add('copied');c.style.display='none';k.style.display='block';b.setAttribute('data-tooltip','Copied!');setTimeout(()=>{b.classList.remove('copied');c.style.display='block';k.style.display='none';b.setAttribute('data-tooltip','Copy link')},2000)})}
    </script>

    <!-- RCA Effectiveness Calculator JS -->
    <script>
    function calculateRCA() {
        const incidents = parseFloat(document.getElementById('calcIncidents').value) || 48;
        const rcas = parseFloat(document.getElementById('calcRCAs').value) || 30;
        const recsPerRCA = parseFloat(document.getElementById('calcRecsPerRCA').value) || 4;
        const implRate = parseFloat(document.getElementById('calcImplRate').value) || 45;
        const recurRate = parseFloat(document.getElementById('calcRecurRate').value) || 35;
        const days = parseFloat(document.getElementById('calcDays').value) || 45;
        const daInvolve = parseFloat(document.getElementById('calcDA').value) || 20;
        const verifyRate = parseFloat(document.getElementById('calcVerify').value) || 30;

        // Dimension scores
        const completionScore = Math.min((rcas / incidents) * 100, 100) * 0.20;
        const implementationScore = implRate * 0.25;
        const recurrenceScore = (100 - recurRate) * 0.20;
        const timeScore = Math.max(0, (1 - days / 90)) * 100 * 0.15;
        const daScore = daInvolve * 0.10;
        const verifyScore = verifyRate * 0.10;

        const totalScore = completionScore + implementationScore + recurrenceScore + timeScore + daScore + verifyScore;

        // Grade
        let grade, gradeClass;
        if (totalScore >= 85) { grade = 'A'; gradeClass = 'grade-A'; }
        else if (totalScore >= 70) { grade = 'B'; gradeClass = 'grade-B'; }
        else if (totalScore >= 55) { grade = 'C'; gradeClass = 'grade-C'; }
        else if (totalScore >= 40) { grade = 'D'; gradeClass = 'grade-D'; }
        else { grade = 'F'; gradeClass = 'grade-F'; }

        // Derived metrics
        const learningRate = (implRate / 100) * (1 - recurRate / 100) * (daInvolve / 100);
        const predictedRecurrence = Math.round(incidents * (recurRate / 100) * (1 - daInvolve / 200));
        const daGap = 85 - daInvolve;
        const totalRecs = Math.round(rcas * recsPerRCA);

        // Update gauge
        const circumference = 2 * Math.PI * 78;
        const offset = circumference - (totalScore / 100) * circumference;
        document.getElementById('gaugeArc').setAttribute('stroke-dasharray', circumference);
        document.getElementById('gaugeArc').setAttribute('stroke-dashoffset', offset);

        // Color the gauge based on grade
        const gradeColors = { A: '#10b981', B: '#06b6d4', C: '#f59e0b', D: '#f97316', F: '#ef4444' };
        document.getElementById('gaugeArc').setAttribute('stroke', gradeColors[grade]);

        document.getElementById('gaugeScore').textContent = Math.round(totalScore);
        document.getElementById('gaugeScore').style.color = gradeColors[grade];
        const gradeEl = document.getElementById('gaugeGrade');
        gradeEl.textContent = 'Grade ' + grade;
        gradeEl.className = 'gauge-grade ' + gradeClass;

        // Update dimension bars
        const maxScores = { Completion: 20, Implementation: 25, Recurrence: 20, Time: 15, DA: 10, Verify: 10 };
        const scores = { Completion: completionScore, Implementation: implementationScore, Recurrence: recurrenceScore, Time: timeScore, DA: daScore, Verify: verifyScore };

        Object.keys(scores).forEach(key => {
            const pct = (scores[key] / maxScores[key]) * 100;
            document.getElementById('bar' + key).style.width = Math.min(pct, 100) + '%';
            document.getElementById('val' + key).textContent = scores[key].toFixed(1);

            // Color based on performance
            const bar = document.getElementById('bar' + key);
            if (pct >= 75) bar.style.background = '#10b981';
            else if (pct >= 50) bar.style.background = '#06b6d4';
            else if (pct >= 25) bar.style.background = '#f59e0b';
            else bar.style.background = '#ef4444';
        });

        // Update derived metrics
        document.getElementById('resLearningRate').textContent = (learningRate * 100).toFixed(1) + '%';
        document.getElementById('resPredRecurrence').textContent = predictedRecurrence;
        document.getElementById('resDAGap').textContent = Math.max(0, daGap) + '%';
        document.getElementById('resTotalRecs').textContent = totalRecs;

        // Color the learning rate
        const lrEl = document.getElementById('resLearningRate');
        if (learningRate >= 0.25) lrEl.style.color = '#10b981';
        else if (learningRate >= 0.10) lrEl.style.color = '#f59e0b';
        else lrEl.style.color = '#ef4444';

        // Generate recommendations
        const recs = [];
        const dimPerformance = [
            { name: 'Implementation Rate', pct: implRate, target: 85, rec: 'Increase recommendation implementation rate. Establish a dedicated RCA follow-up owner with weekly tracking cadence. Target: >85% implementation within 30 days.' },
            { name: 'Design Authority', pct: daInvolve, target: 80, rec: 'Embed design authority in the RCA process. Ensure engineering personnel with system modification authority participate in every investigation. Target: >80% DA involvement.' },
            { name: 'Verification', pct: verifyRate, target: 90, rec: 'Implement systematic verification of corrective actions. Every recommendation should be tested against the original failure mode. Target: >90% verified effective.' },
            { name: 'Recurrence', pct: 100 - recurRate, target: 90, rec: 'Reduce recurrence by shifting from procedural to architectural fixes. Classify findings by change scope and prioritize systemic modifications. Target: <10% recurrence.' },
            { name: 'Completion', pct: (rcas/incidents)*100, target: 90, rec: 'Increase RCA completion rate by reducing investigation scope for minor incidents while maintaining full investigation for significant events. Target: >90% completion.' },
            { name: 'Time-to-Close', pct: Math.max(0,(1-days/90))*100, target: 70, rec: 'Reduce time-to-close by pre-approving common redesign scopes and embedding MoC in the investigation process. Target: <30 days average.' }
        ];

        dimPerformance.sort((a, b) => (a.pct / a.target) - (b.pct / b.target));
        for (let i = 0; i < Math.min(3, dimPerformance.length); i++) {
            if (dimPerformance[i].pct < dimPerformance[i].target) {
                recs.push(dimPerformance[i].rec);
            }
        }

        if (recs.length === 0) recs.push('All dimensions are performing at or above target. Focus on maintaining current performance and transitioning to Safety-II learning practices.');

        const recList = document.getElementById('recList');
        recList.innerHTML = recs.map(r => '<li>' + r + '</li>').join('');
    }

    // Initial calculation
    calculateRCA();
    </script>

    <!-- Interactive Chart JS -->
    <script>
    (function() {
        const canvas = document.getElementById('rcaChart');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const authSlider = document.getElementById('authSlider');
        const authValueEl = document.getElementById('authValue');
        const avgRecurrenceEl = document.getElementById('avgRecurrence');
        const rcaEffectivenessEl = document.getElementById('rcaEffectiveness');
        const learningVelocityEl = document.getElementById('learningVelocity');
        const systemChangeRateEl = document.getElementById('systemChangeRate');

        const dpr = window.devicePixelRatio || 1;
        let W, H;

        function resize() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            W = rect.width;
            H = rect.height;
        }

        resize();
        const padding = { top: 50, right: 60, bottom: 60, left: 80 };

        function simulate(authority) {
            let recurrence = [];
            let base = 85 - authority * 0.65;
            for (let i = 0; i < 12; i++) {
                let decay = authority > 50 ? (i * authority * 0.008) : (i * authority * 0.002);
                let risk = Math.max(5, base - decay + Math.sin(i * 0.8) * (8 - authority * 0.06));
                recurrence.push(Math.min(95, Math.max(5, risk)));
            }
            return recurrence;
        }

        function drawChart(authority) {
            const chartW = W - padding.left - padding.right;
            const chartH = H - padding.top - padding.bottom;
            ctx.clearRect(0, 0, W, H);

            // Background
            ctx.fillStyle = 'rgba(2, 6, 23, 0.5)';
            ctx.fillRect(0, 0, W, H);

            // Grid
            ctx.strokeStyle = 'rgba(148, 163, 184, 0.15)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(W - padding.right, y);
                ctx.stroke();
            }

            // Y-axis labels
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            ctx.font = '12px Inter, system-ui, sans-serif';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                const val = 100 - i * 20;
                ctx.fillText(val + '%', padding.left - 10, y + 4);
            }

            // Y-axis title
            ctx.save();
            ctx.translate(25, H / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Recurrence Probability (%)', 0, 0);
            ctx.restore();

            // X-axis labels
            ctx.textAlign = 'center';
            ctx.fillStyle = 'rgba(148, 163, 184, 0.9)';
            for (let i = 0; i < 12; i++) {
                const x = padding.left + (chartW / 11) * i;
                ctx.fillText('M' + (i + 1), x, H - padding.bottom + 25);
            }

            // X-axis title
            ctx.fillStyle = 'rgba(148, 163, 184, 0.7)';
            ctx.fillText('Months After RCA Implementation', W / 2, H - 15);

            // Danger zone
            ctx.fillStyle = 'rgba(239, 68, 68, 0.05)';
            ctx.fillRect(padding.left, padding.top, chartW, chartH * 0.4);

            // Get data
            const recurrence = simulate(authority);

            // Draw area fill
            ctx.beginPath();
            ctx.fillStyle = authority > 60 ? 'rgba(16, 185, 129, 0.15)' : authority > 30 ? 'rgba(6, 182, 212, 0.15)' : 'rgba(239, 68, 68, 0.15)';
            for (let i = 0; i < recurrence.length; i++) {
                const x = padding.left + (chartW / 11) * i;
                const y = padding.top + chartH - (recurrence[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.lineTo(padding.left + chartW, H - padding.bottom);
            ctx.lineTo(padding.left, H - padding.bottom);
            ctx.closePath();
            ctx.fill();

            // Draw line
            const lineColor = authority > 60 ? '#10b981' : authority > 30 ? '#06b6d4' : '#ef4444';
            ctx.strokeStyle = lineColor;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            for (let i = 0; i < recurrence.length; i++) {
                const x = padding.left + (chartW / 11) * i;
                const y = padding.top + chartH - (recurrence[i] / 100) * chartH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw points
            ctx.fillStyle = lineColor;
            ctx.font = 'bold 11px Inter, system-ui, sans-serif';
            ctx.textAlign = 'center';
            for (let i = 0; i < recurrence.length; i++) {
                const x = padding.left + (chartW / 11) * i;
                const y = padding.top + chartH - (recurrence[i] / 100) * chartH;
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                if (i % 2 === 0) {
                    ctx.fillText(Math.round(recurrence[i]) + '%', x, y - 12);
                }
            }

            // Update callouts
            const avg = recurrence.reduce((a, b) => a + b, 0) / recurrence.length;
            avgRecurrenceEl.textContent = Math.round(avg) + '%';
            avgRecurrenceEl.style.color = lineColor;

            const changeRate = Math.min(95, Math.round(authority * 0.85 + 5));
            systemChangeRateEl.textContent = changeRate + '%';
            systemChangeRateEl.style.color = lineColor;

            if (authority >= 70) {
                rcaEffectivenessEl.textContent = 'High';
                rcaEffectivenessEl.style.color = '#10b981';
                learningVelocityEl.textContent = 'Fast';
                learningVelocityEl.style.color = '#10b981';
            } else if (authority >= 40) {
                rcaEffectivenessEl.textContent = 'Medium';
                rcaEffectivenessEl.style.color = '#f59e0b';
                learningVelocityEl.textContent = 'Moderate';
                learningVelocityEl.style.color = '#f59e0b';
            } else {
                rcaEffectivenessEl.textContent = 'Low';
                rcaEffectivenessEl.style.color = '#ef4444';
                learningVelocityEl.textContent = 'Slow';
                learningVelocityEl.style.color = '#ef4444';
            }
        }

        function refresh() {
            const auth = parseInt(authSlider.value);
            authValueEl.textContent = auth + '%';
            drawChart(auth);
        }

        authSlider.addEventListener('input', refresh);
        refresh();

        window.addEventListener('resize', function() {
            resize();
            refresh();
        });
    })();
    </script>
<script>
function subscribeNewsletter(e){e.preventDefault();var email=e.target.querySelector('input[type="email"]').value.trim();if(!email)return false;var subs=JSON.parse(localStorage.getItem('rz_newsletter_subscribers')||'[]');if(subs.find(function(s){return s.email===email})){alert('Already subscribed!');return false}subs.push({email:email,date:new Date().toISOString(),source:location.pathname.split('/').pop(),status:'active'});localStorage.setItem('rz_newsletter_subscribers',JSON.stringify(subs));e.target.innerHTML='<p style="color:#fff;font-weight:600;">✓ Subscribed successfully!</p>';return false}
</script>
<script src="auth.js"></script>
<script src="rz-tracker.js"></script>

<!-- RCA Pro Mode JS -->
<script>
(function() {
    let rcaMode = 'free';
    let rcaProUnlocked = false;
    var lastMCData = null;
    var lastSensitivity = null;
    var lastNarrative = '';

    // Check existing session
    function checkRcaSession() {
        try {
            const s = JSON.parse(localStorage.getItem('rz_premium_session'));
            if (s && s.tier === 'pro' && new Date(s.expires) > new Date()) {
                rcaProUnlocked = true;
                unlockRcaPanels();
            }
        } catch(e) {}
    }

    // Listen for auth changes from other articles / auth.js
    window.addEventListener('rz-auth-change', function(e) {
        if (e.detail && e.detail.tier === 'pro') {
            rcaProUnlocked = true;
            unlockRcaPanels();
        }
    });

    window.switchRcaMode = function(mode) {
        rcaMode = mode;
        document.querySelectorAll('.rca-mode-bar .mode-btn').forEach(function(b) { b.classList.remove('active'); });
        if (mode === 'pro') {
            document.querySelectorAll('.rca-mode-bar .mode-btn')[1].classList.add('active');
            document.getElementById('rcaProPanels').style.display = 'block';
            if (rcaProUnlocked) updateProPanels();
        } else {
            document.querySelectorAll('.rca-mode-bar .mode-btn')[0].classList.add('active');
            document.getElementById('rcaProPanels').style.display = 'none';
            var nb = document.getElementById('rcaNarrativeBox');
            if (nb) nb.style.display = 'none';
        }
    };

    function unlockRcaPanels() {
        document.querySelectorAll('.rca-pro-panel').forEach(function(p) {
            p.classList.remove('gated');
            var ov = p.querySelector('.rca-gate-overlay');
            if (ov) ov.style.display = 'none';
        });
        if (rcaMode === 'pro') updateProPanels();
    }

    function getInputs() {
        return {
            incidents: parseFloat(document.getElementById('calcIncidents').value) || 48,
            rcas: parseFloat(document.getElementById('calcRCAs').value) || 30,
            recsPerRCA: parseFloat(document.getElementById('calcRecsPerRCA').value) || 4,
            implRate: parseFloat(document.getElementById('calcImplRate').value) || 45,
            recurRate: parseFloat(document.getElementById('calcRecurRate').value) || 35,
            days: parseFloat(document.getElementById('calcDays').value) || 45,
            daInvolve: parseFloat(document.getElementById('calcDA').value) || 20,
            verifyRate: parseFloat(document.getElementById('calcVerify').value) || 30
        };
    }

    function computeScore(inp) {
        var completionScore = Math.min((inp.rcas / inp.incidents) * 100, 100) * 0.20;
        var implementationScore = inp.implRate * 0.25;
        var recurrenceScore = (100 - inp.recurRate) * 0.20;
        var timeScore = Math.max(0, (1 - inp.days / 90)) * 100 * 0.15;
        var daScore = inp.daInvolve * 0.10;
        var verifyScore = inp.verifyRate * 0.10;
        return completionScore + implementationScore + recurrenceScore + timeScore + daScore + verifyScore;
    }

    // ===== MONTE CARLO SIMULATION (10,000 iterations) =====
    function runRcaMonteCarlo(inp) {
        var N = 10000;
        var scores = [];
        for (var i = 0; i < N; i++) {
            var varied = {
                incidents: inp.incidents * (0.85 + Math.random() * 0.30),
                rcas: inp.rcas * (0.85 + Math.random() * 0.30),
                recsPerRCA: inp.recsPerRCA * (0.85 + Math.random() * 0.30),
                implRate: Math.min(100, Math.max(0, inp.implRate * (0.85 + Math.random() * 0.30))),
                recurRate: Math.min(100, Math.max(0, inp.recurRate * (0.85 + Math.random() * 0.30))),
                days: Math.max(1, inp.days * (0.85 + Math.random() * 0.30)),
                daInvolve: Math.min(100, Math.max(0, inp.daInvolve * (0.85 + Math.random() * 0.30))),
                verifyRate: Math.min(100, Math.max(0, inp.verifyRate * (0.85 + Math.random() * 0.30)))
            };
            scores.push(Math.max(0, Math.min(100, computeScore(varied))));
        }
        scores.sort(function(a, b) { return a - b; });
        var sum = 0, sumSq = 0;
        for (var j = 0; j < N; j++) { sum += scores[j]; sumSq += scores[j] * scores[j]; }
        var mean = sum / N;
        var stdDev = Math.sqrt(sumSq / N - mean * mean);
        return {
            scores: scores,
            mean: mean,
            stdDev: stdDev,
            p5: scores[Math.floor(N * 0.05)],
            p25: scores[Math.floor(N * 0.25)],
            p50: scores[Math.floor(N * 0.50)],
            p75: scores[Math.floor(N * 0.75)],
            p95: scores[Math.floor(N * 0.95)]
        };
    }

    // ===== SENSITIVITY TORNADO ANALYSIS =====
    function runRcaSensitivity(inp) {
        var dims = [
            { key: 'incidents', label: 'Annual Incidents', min: 10, max: 120 },
            { key: 'rcas', label: 'RCAs Completed', min: 5, max: 100 },
            { key: 'recsPerRCA', label: 'Recs per RCA', min: 1, max: 12 },
            { key: 'implRate', label: 'Implementation Rate', min: 10, max: 95 },
            { key: 'recurRate', label: 'Recurrence Rate', min: 5, max: 60 },
            { key: 'days', label: 'Time to Close', min: 7, max: 90 },
            { key: 'daInvolve', label: 'DA Involvement', min: 5, max: 95 },
            { key: 'verifyRate', label: 'Verification Rate', min: 5, max: 95 }
        ];
        var results = [];
        for (var i = 0; i < dims.length; i++) {
            var d = dims[i];
            var lowInp = {}; var highInp = {};
            for (var k in inp) { lowInp[k] = inp[k]; highInp[k] = inp[k]; }
            lowInp[d.key] = d.min;
            highInp[d.key] = d.max;
            var scoreLow = computeScore(lowInp);
            var scoreHigh = computeScore(highInp);
            results.push({
                label: d.label,
                key: d.key,
                low: Math.min(scoreLow, scoreHigh),
                high: Math.max(scoreLow, scoreHigh),
                range: Math.abs(scoreHigh - scoreLow)
            });
        }
        results.sort(function(a, b) { return b.range - a.range; });
        return results;
    }

    // ===== NARRATIVE GENERATOR =====
    function generateRcaNarrative(inp, score, grade) {
        var matNames = ['','Reactive','Compliant','Proactive','Integrated','Generative'];
        var learningRate = (inp.implRate / 100) * (1 - inp.recurRate / 100) * (inp.daInvolve / 100);
        var matLevel = 1;
        if (learningRate >= 0.25 && inp.daInvolve >= 80) matLevel = 5;
        else if (learningRate >= 0.15 && inp.daInvolve >= 60) matLevel = 4;
        else if (inp.implRate >= 60 && inp.daInvolve >= 30) matLevel = 3;
        else if (inp.rcas / inp.incidents >= 0.7) matLevel = 2;
        var maturity = matNames[matLevel];

        // Identify strengths and weaknesses
        var dims = [
            { name: 'Coverage', val: Math.min(inp.rcas / inp.incidents * 100, 100), target: 90 },
            { name: 'Implementation', val: inp.implRate, target: 85 },
            { name: 'Recurrence Prevention', val: 100 - inp.recurRate, target: 85 },
            { name: 'Speed (Time-to-Close)', val: Math.max(0, (1 - inp.days / 90)) * 100, target: 70 },
            { name: 'Design Authority', val: inp.daInvolve, target: 80 },
            { name: 'Verification', val: inp.verifyRate, target: 90 }
        ];
        dims.sort(function(a, b) { return (a.val / a.target) - (b.val / b.target); });
        var weaknesses = dims.slice(0, 2);
        var sorted2 = dims.slice().sort(function(a, b) { return (b.val / b.target) - (a.val / a.target); });
        var strengths = sorted2.slice(0, 2);

        var paragraphs = [];

        // Paragraph 1: Current state
        paragraphs.push('<p><strong>Current State:</strong> Your organization operates at <strong>' + maturity + '</strong> maturity (Level ' + matLevel + '/5) with an overall RCA effectiveness score of <strong>' + Math.round(score) + '/100 (Grade ' + grade + ')</strong>. The learning rate of ' + (learningRate * 100).toFixed(1) + '% indicates that ' + (learningRate < 0.10 ? 'the vast majority of analytical effort is not translating into lasting system improvement. This is characteristic of ritual RCA.' : learningRate < 0.25 ? 'some analytical effort drives change, but significant gaps remain in the feedback loop.' : 'the organization is effectively converting incident analysis into system-level improvements.') + ' Your strongest dimensions are <strong>' + strengths[0].name + '</strong> and <strong>' + strengths[1].name + '</strong>.</p>');

        // Paragraph 2: Risk assessment
        var recurCost = Math.round(inp.incidents * (inp.recurRate / 100) * 75000);
        paragraphs.push('<p><strong>Risk Assessment:</strong> With a ' + inp.recurRate + '% recurrence rate across ' + inp.incidents + ' annual incidents, your organization faces an estimated <strong>$' + (recurCost / 1000).toFixed(0) + 'K annual cost exposure</strong> from recurring incidents. The primary vulnerabilities are <strong>' + weaknesses[0].name + '</strong> (currently ' + Math.round(weaknesses[0].val) + '% vs target ' + weaknesses[0].target + '%) and <strong>' + weaknesses[1].name + '</strong> (currently ' + Math.round(weaknesses[1].val) + '% vs target ' + weaknesses[1].target + '%). ' + (inp.daInvolve < 40 ? 'The critically low Design Authority involvement of ' + inp.daInvolve + '% means most RCA findings remain recommendations rather than system modifications.' : '') + '</p>');

        // Paragraph 3: Detect paradoxes
        var paradox = '';
        if (inp.implRate >= 60 && inp.recurRate >= 30) {
            paradox = '<p><strong>Technical-Execution Paradox Detected:</strong> Your implementation rate (' + inp.implRate + '%) is moderate-to-strong, yet recurrence remains high at ' + inp.recurRate + '%. This pattern indicates that recommendations are being implemented but are not addressing actual root causes. Common causes include: shallow analysis that fixes symptoms rather than systems, recommendations that target procedures rather than architecture, and closure verification that checks completion rather than effectiveness. Consider shifting from procedural to architectural corrective actions and implementing rigorous post-fix validation.</p>';
        }
        if (inp.rcas / inp.incidents >= 0.8 && inp.verifyRate < 30) {
            paradox += '<p><strong>Analysis-Without-Learning Pattern:</strong> High RCA coverage (' + Math.round(inp.rcas / inp.incidents * 100) + '%) combined with low verification (' + inp.verifyRate + '%) suggests the organization is investing heavily in investigation but not closing the learning loop. Without verification, there is no evidence that any corrective action is actually effective.</p>';
        }
        if (paradox) paragraphs.push(paradox);

        // Paragraph 4: Recommendations
        paragraphs.push('<p><strong>Priority Recommendations:</strong> To advance from ' + maturity + ' to ' + matNames[Math.min(5, matLevel + 1)] + ' maturity, focus on: (1) Increase ' + weaknesses[0].name + ' from ' + Math.round(weaknesses[0].val) + '% toward ' + weaknesses[0].target + '% by ' + getRecommendation(weaknesses[0].name) + '. (2) Improve ' + weaknesses[1].name + ' from ' + Math.round(weaknesses[1].val) + '% toward ' + weaknesses[1].target + '% by ' + getRecommendation(weaknesses[1].name) + '. Based on Monte Carlo analysis, these improvements could shift your score range from the current ' + (lastMCData ? lastMCData.p5.toFixed(0) + '-' + lastMCData.p95.toFixed(0) : 'N/A') + ' band upward by an estimated 10-20 points.</p>');

        return paragraphs.join('');
    }

    function getRecommendation(dimName) {
        var map = {
            'Coverage': 'reducing investigation scope for minor incidents while mandating full RCA for P1-P2 events',
            'Implementation': 'establishing dedicated RCA follow-up owners with weekly tracking and pre-approved redesign budgets',
            'Recurrence Prevention': 'classifying findings by change scope (Level 1-4) and prioritizing architectural over procedural fixes',
            'Speed (Time-to-Close)': 'embedding MoC authority in the investigation process and pre-approving common redesign scopes',
            'Design Authority': 'embedding engineering personnel with system modification authority in every RCA team',
            'Verification': 'implementing post-implementation reviews that test fixes against the original failure mode'
        };
        return map[dimName] || 'addressing systemic gaps in this dimension';
    }

    // ===== RADAR CHART =====
    function drawRcaRadar(canvas, dims, benchmarks) {
        if (!canvas) return;
        var ctx = canvas.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        var W = rect.width, H = rect.height;
        var cx = W / 2, cy = H / 2;
        var R = Math.min(cx, cy) - 40;
        var n = dims.length;

        ctx.clearRect(0, 0, W, H);

        // Background rings
        for (var ring = 1; ring <= 5; ring++) {
            var rr = R * (ring / 5);
            ctx.beginPath();
            for (var i = 0; i <= n; i++) {
                var angle = (Math.PI * 2 / n) * i - Math.PI / 2;
                var x = cx + rr * Math.cos(angle);
                var y = cy + rr * Math.sin(angle);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.strokeStyle = 'rgba(148,163,184,0.15)';
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        // Axes
        for (var i = 0; i < n; i++) {
            var angle = (Math.PI * 2 / n) * i - Math.PI / 2;
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(cx + R * Math.cos(angle), cy + R * Math.sin(angle));
            ctx.strokeStyle = 'rgba(148,163,184,0.2)';
            ctx.stroke();
        }

        // Benchmark polygon
        ctx.beginPath();
        for (var i = 0; i <= n; i++) {
            var idx = i % n;
            var angle = (Math.PI * 2 / n) * idx - Math.PI / 2;
            var val = benchmarks[idx] / 100;
            var x = cx + R * val * Math.cos(angle);
            var y = cy + R * val * Math.sin(angle);
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.fillStyle = 'rgba(148,163,184,0.08)';
        ctx.fill();
        ctx.strokeStyle = 'rgba(148,163,184,0.4)';
        ctx.lineWidth = 1.5;
        ctx.setLineDash([4, 4]);
        ctx.stroke();
        ctx.setLineDash([]);

        // Actual polygon
        ctx.beginPath();
        for (var i = 0; i <= n; i++) {
            var idx = i % n;
            var angle = (Math.PI * 2 / n) * idx - Math.PI / 2;
            var val = Math.min(dims[idx].val / 100, 1);
            var x = cx + R * val * Math.cos(angle);
            var y = cy + R * val * Math.sin(angle);
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.fillStyle = 'rgba(6,182,212,0.15)';
        ctx.fill();
        ctx.strokeStyle = '#06b6d4';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Points + labels
        ctx.font = '11px Inter, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        for (var i = 0; i < n; i++) {
            var angle = (Math.PI * 2 / n) * i - Math.PI / 2;
            var val = Math.min(dims[i].val / 100, 1);
            var px = cx + R * val * Math.cos(angle);
            var py = cy + R * val * Math.sin(angle);
            ctx.beginPath();
            ctx.arc(px, py, 4, 0, Math.PI * 2);
            ctx.fillStyle = '#06b6d4';
            ctx.fill();

            // Label
            var lx = cx + (R + 25) * Math.cos(angle);
            var ly = cy + (R + 25) * Math.sin(angle);
            ctx.fillStyle = '#94a3b8';
            ctx.fillText(dims[i].name, lx, ly);
        }

        // Legend
        ctx.font = '10px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#06b6d4';
        ctx.fillRect(10, H - 20, 10, 3);
        ctx.fillText('Your Score', 50, H - 18);
        ctx.strokeStyle = 'rgba(148,163,184,0.4)';
        ctx.setLineDash([4, 4]);
        ctx.beginPath();
        ctx.moveTo(90, H - 18);
        ctx.lineTo(100, H - 18);
        ctx.stroke();
        ctx.setLineDash([]);
        ctx.fillStyle = '#94a3b8';
        ctx.fillText('Benchmark', 130, H - 18);
    }

    // ===== MONTE CARLO HISTOGRAM =====
    function drawRcaHistogram(canvas, mcData) {
        if (!canvas || !mcData) return;
        var ctx = canvas.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        var W = rect.width, H = rect.height;
        var pad = { top: 30, right: 30, bottom: 40, left: 50 };
        var chartW = W - pad.left - pad.right;
        var chartH = H - pad.top - pad.bottom;

        ctx.clearRect(0, 0, W, H);

        // Build histogram bins
        var numBins = 30;
        var minVal = Math.floor(mcData.scores[0]);
        var maxVal = Math.ceil(mcData.scores[mcData.scores.length - 1]);
        var range = Math.max(maxVal - minVal, 1);
        var binWidth = range / numBins;
        var bins = new Array(numBins).fill(0);
        for (var i = 0; i < mcData.scores.length; i++) {
            var bi = Math.min(numBins - 1, Math.floor((mcData.scores[i] - minVal) / binWidth));
            bins[bi]++;
        }
        var maxBin = Math.max.apply(null, bins);

        // Grade colors
        function gradeColor(val) {
            if (val >= 85) return 'rgba(16,185,129,0.7)';
            if (val >= 70) return 'rgba(6,182,212,0.7)';
            if (val >= 55) return 'rgba(245,158,11,0.7)';
            if (val >= 40) return 'rgba(249,115,22,0.7)';
            return 'rgba(239,68,68,0.7)';
        }

        // Draw bars
        var barW = chartW / numBins - 1;
        for (var i = 0; i < numBins; i++) {
            var barH = (bins[i] / maxBin) * chartH;
            var x = pad.left + i * (chartW / numBins);
            var y = pad.top + chartH - barH;
            var midVal = minVal + (i + 0.5) * binWidth;
            ctx.fillStyle = gradeColor(midVal);
            ctx.fillRect(x, y, barW, barH);
        }

        // Axes
        ctx.strokeStyle = 'rgba(148,163,184,0.3)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(pad.left, pad.top);
        ctx.lineTo(pad.left, pad.top + chartH);
        ctx.lineTo(pad.left + chartW, pad.top + chartH);
        ctx.stroke();

        // X labels
        ctx.font = '10px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'center';
        for (var i = 0; i <= 5; i++) {
            var val = minVal + (range / 5) * i;
            var x = pad.left + (chartW / 5) * i;
            ctx.fillText(Math.round(val), x, pad.top + chartH + 15);
        }
        ctx.fillText('RCA Effectiveness Score', W / 2, H - 5);

        // Y label
        ctx.save();
        ctx.translate(15, H / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.textAlign = 'center';
        ctx.fillText('Frequency', 0, 0);
        ctx.restore();

        // Dashed percentile lines
        var percentiles = [
            { val: mcData.p5, label: 'P5', color: '#ef4444' },
            { val: mcData.p50, label: 'P50', color: '#f59e0b' },
            { val: mcData.p95, label: 'P95', color: '#10b981' }
        ];
        for (var p = 0; p < percentiles.length; p++) {
            var px = pad.left + ((percentiles[p].val - minVal) / range) * chartW;
            ctx.beginPath();
            ctx.setLineDash([4, 3]);
            ctx.strokeStyle = percentiles[p].color;
            ctx.lineWidth = 1.5;
            ctx.moveTo(px, pad.top);
            ctx.lineTo(px, pad.top + chartH);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.fillStyle = percentiles[p].color;
            ctx.font = 'bold 10px Inter, system-ui, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(percentiles[p].label + ': ' + percentiles[p].val.toFixed(1), px, pad.top - 8);
        }

        // Title
        ctx.font = 'bold 12px Inter, system-ui, sans-serif';
        ctx.fillStyle = '#e2e8f0';
        ctx.textAlign = 'left';
        ctx.fillText('Monte Carlo Distribution (n=10,000)', pad.left, 15);
    }

    // ===== TORNADO BARS RENDERER =====
    function renderTornadoBars(sensitivity) {
        var container = document.getElementById('rcaTornadoBars');
        if (!container || !sensitivity) return;
        var maxRange = sensitivity[0] ? sensitivity[0].range : 1;
        var html = '';
        for (var i = 0; i < sensitivity.length; i++) {
            var s = sensitivity[i];
            var pct = Math.round((s.range / maxRange) * 100);
            html += '<div class="rca-sensitivity-bar">' +
                '<div class="rca-sensitivity-label"><span>' + s.label + '</span><span class="rca-sensitivity-value">' + s.range.toFixed(1) + ' pts</span></div>' +
                '<div class="rca-sensitivity-track"><div class="rca-sensitivity-fill" style="width:' + pct + '%"></div></div>' +
                '</div>';
        }
        container.innerHTML = html;
    }

    // ===== MAIN updateProPanels =====
    function updateProPanels() {
        var inp = getInputs();
        var learningRate = (inp.implRate / 100) * (1 - inp.recurRate / 100) * (inp.daInvolve / 100);

        // Panel 1: Organizational Maturity
        var matLevel = 1;
        if (learningRate >= 0.25 && inp.daInvolve >= 80) matLevel = 5;
        else if (learningRate >= 0.15 && inp.daInvolve >= 60) matLevel = 4;
        else if (inp.implRate >= 60 && inp.daInvolve >= 30) matLevel = 3;
        else if (inp.rcas / inp.incidents >= 0.7) matLevel = 2;
        var matNames = ['','Reactive','Compliant','Proactive','Integrated','Generative'];
        document.getElementById('proMaturityLevel').textContent = matLevel + ' \u2014 ' + matNames[matLevel];
        document.getElementById('proLoopType').textContent = matLevel >= 4 ? 'Double-Loop' : 'Single-Loop';
        document.getElementById('proCulturalGap').textContent = Math.max(0, Math.round(100 - (matLevel / 5) * 100)) + '%';
        document.getElementById('proSafetyParadigm').textContent = matLevel >= 4 ? 'Safety-II' : 'Safety-I';
        var capaEff = Math.round(inp.implRate * inp.verifyRate / 100);
        document.getElementById('proCAPAScore').textContent = capaEff + '%';
        document.getElementById('proReadiness').textContent = inp.daInvolve >= 70 ? 'High' : inp.daInvolve >= 40 ? 'Medium' : 'Low';

        // Radar chart data
        var radarDims = [
            { name: 'Coverage', val: Math.min(inp.rcas / inp.incidents * 100, 100) },
            { name: 'Implementation', val: inp.implRate },
            { name: 'Verification', val: inp.verifyRate },
            { name: 'Speed', val: Math.max(0, (1 - inp.days / 90)) * 100 },
            { name: 'DA Integration', val: inp.daInvolve },
            { name: 'Learning Rate', val: Math.min(learningRate * 400, 100) }
        ];
        var benchmarks = [90, 85, 90, 70, 80, 75];
        drawRcaRadar(document.getElementById('rcaRadarChart'), radarDims, benchmarks);

        // Panel 2: Cost Impact
        var costPerIncident = 75000;
        var recurCost = Math.round(inp.incidents * (inp.recurRate / 100) * costPerIncident);
        var daInvestment = 120000;
        var savingsWithDA = Math.round(recurCost * (inp.daInvolve >= 50 ? 0.6 : 0.3));
        var payback = savingsWithDA > 0 ? Math.round(daInvestment / savingsWithDA * 12) : 999;
        document.getElementById('proRecurCost').textContent = '$' + (recurCost / 1000).toFixed(0) + 'K';
        document.getElementById('proDAROI').textContent = savingsWithDA > 0 ? ((savingsWithDA / daInvestment * 100)).toFixed(0) + '%' : 'N/A';
        document.getElementById('proCostPerIncident').textContent = '$75K';
        document.getElementById('proSavings12m').textContent = '$' + (savingsWithDA / 1000).toFixed(0) + 'K';
        document.getElementById('proPaybackMonths').textContent = payback < 99 ? payback + ' mo' : '>8 yr';
        document.getElementById('proRiskExposure').textContent = '$' + (recurCost / 1000).toFixed(0) + 'K';

        // Panel 3: Methodology
        var bestMethod = 'STAMP';
        var methodFit = 85;
        var complexity = 'High';
        var teamSize = '5-7';
        if (inp.incidents < 20 && inp.recurRate < 20) {
            bestMethod = '5-Why'; methodFit = 92; complexity = 'Low'; teamSize = '2-3';
        } else if (inp.incidents < 40 && inp.daInvolve < 40) {
            bestMethod = 'Fishbone'; methodFit = 78; complexity = 'Medium'; teamSize = '3-5';
        } else if (inp.daInvolve >= 60 && inp.verifyRate >= 50) {
            bestMethod = 'FRAM'; methodFit = 90; complexity = 'High'; teamSize = '4-6';
        }
        document.getElementById('proBestMethod').textContent = bestMethod;
        document.getElementById('proMethodFit').textContent = methodFit + '%';
        document.getElementById('proComplexity').textContent = complexity;
        document.getElementById('proTeamSize').textContent = teamSize;

        // Sensitivity analysis
        lastSensitivity = runRcaSensitivity(inp);
        renderTornadoBars(lastSensitivity);

        // Panel 4: Predictive + Monte Carlo
        var monthlyRate = inp.incidents / 12;
        var pred6 = Math.round(monthlyRate * 6 * (1 - learningRate * 0.5));
        var trendDir = learningRate >= 0.15 ? 'Improving' : learningRate >= 0.08 ? 'Stable' : 'Declining';
        var breakevenDA = Math.min(100, Math.round(60 + (100 - inp.implRate) * 0.3));
        var gapToA = 85 - (parseFloat(document.getElementById('gaugeScore')?.textContent) || 0);
        var timeToA = gapToA <= 0 ? 'Already A' : Math.round(gapToA / 3) + ' mo';
        document.getElementById('proPredNext6').textContent = pred6;
        document.getElementById('proTrendDir').textContent = trendDir;
        document.getElementById('proTrendDir').style.color = trendDir === 'Improving' ? '#10b981' : trendDir === 'Stable' ? '#f59e0b' : '#ef4444';
        document.getElementById('proBreakevenDA').textContent = breakevenDA + '%';
        document.getElementById('proTimeToA').textContent = timeToA;

        // Monte Carlo
        lastMCData = runRcaMonteCarlo(inp);
        document.getElementById('proMCMean').textContent = lastMCData.mean.toFixed(1);
        document.getElementById('proMCStdDev').textContent = lastMCData.stdDev.toFixed(1);
        document.getElementById('proMCP5').textContent = lastMCData.p5.toFixed(1);
        document.getElementById('proMCP95').textContent = lastMCData.p95.toFixed(1);
        drawRcaHistogram(document.getElementById('rcaMCHistogram'), lastMCData);

        // Narrative
        var score = parseFloat(document.getElementById('gaugeScore').textContent) || 0;
        var gradeText = (document.getElementById('gaugeGrade').textContent || '--').replace('Grade ', '');
        lastNarrative = generateRcaNarrative(inp, score, gradeText);
        var nb = document.getElementById('rcaNarrativeBox');
        var nc = document.getElementById('rcaNarrativeContent');
        if (nb && nc) {
            nc.innerHTML = lastNarrative;
            nb.style.display = 'block';
        }
    }

    // Hook into calculateRCA
    var origCalc = window.calculateRCA;
    window.calculateRCA = function() {
        origCalc();
        if (rcaProUnlocked && rcaMode === 'pro') updateProPanels();
    };

    window.rcaShowLogin = function() {
        document.getElementById('rcaLoginOverlay').classList.add('active');
    };
    window.rcaHideLogin = function() {
        document.getElementById('rcaLoginOverlay').classList.remove('active');
        document.getElementById('rcaLoginError').style.display = 'none';
    };
    window.rcaHandleLogin = function() {
        var email = document.getElementById('rcaLoginEmail').value.trim();
        var pass = document.getElementById('rcaLoginPass').value;
        if (email === 'demo@resistancezero.com' && pass === 'demo2026') {
            var session = { email: email, tier: 'pro', expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() };
            localStorage.setItem('rz_premium_session', JSON.stringify(session));
            rcaProUnlocked = true;
            unlockRcaPanels();
            rcaHideLogin();
            window.dispatchEvent(new CustomEvent('rz-auth-change', { detail: session }));
        } else {
            var err = document.getElementById('rcaLoginError');
            err.textContent = 'Invalid credentials. Use the demo account below.';
            err.style.display = 'block';
        }
    };
    window.rcaResetDefaults = function() {
        document.getElementById('calcIncidents').value = 48;
        document.getElementById('calcRCAs').value = 30;
        document.getElementById('calcRecsPerRCA').value = 4;
        document.getElementById('calcImplRate').value = 45;
        document.getElementById('calcRecurRate').value = 35;
        document.getElementById('calcDays').value = 45;
        document.getElementById('calcDA').value = 20;
        document.getElementById('calcVerify').value = 30;
        calculateRCA();
    };

    // ===== GOLD-STANDARD PDF EXPORT =====
    window.exportRcaPDF = function() {
        var inp = getInputs();
        var score = parseFloat(document.getElementById('gaugeScore').textContent) || 0;
        var gradeText = document.getElementById('gaugeGrade').textContent || '--';
        var gradeChar = gradeText.replace('Grade ', '');
        var lr = (inp.implRate / 100) * (1 - inp.recurRate / 100) * (inp.daInvolve / 100);
        var pred = Math.round(inp.incidents * (inp.recurRate / 100) * (1 - inp.daInvolve / 200));
        var daGap = Math.max(0, 85 - inp.daInvolve);
        var totalRecs = Math.round(inp.rcas * inp.recsPerRCA);
        var now = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

        var gradeColors = { A: '#10b981', B: '#06b6d4', C: '#f59e0b', D: '#f97316', F: '#ef4444' };
        var gc = gradeColors[gradeChar] || '#06b6d4';
        var cellS = 'padding:8px 12px;border-bottom:1px solid #e5e7eb;font-size:12px;color:#1f2937;';

        // SVG Radar chart
        var radarDims = [
            { name: 'Coverage', val: Math.min(inp.rcas / inp.incidents * 100, 100) },
            { name: 'Implementation', val: inp.implRate },
            { name: 'Verification', val: inp.verifyRate },
            { name: 'Speed', val: Math.max(0, (1 - inp.days / 90)) * 100 },
            { name: 'DA Integration', val: inp.daInvolve },
            { name: 'Learning Rate', val: Math.min(lr * 400, 100) }
        ];
        var benchmarks = [90, 85, 90, 70, 80, 75];
        var svgR = 90, svgCx = 150, svgCy = 120;
        var svgRadar = '<svg width="300" height="260" xmlns="http://www.w3.org/2000/svg" style="display:block;margin:0 auto;">';
        // Rings
        for (var ring = 1; ring <= 5; ring++) {
            var rr = svgR * (ring / 5);
            var pts = '';
            for (var j = 0; j < 6; j++) {
                var a = (Math.PI * 2 / 6) * j - Math.PI / 2;
                pts += (svgCx + rr * Math.cos(a)).toFixed(1) + ',' + (svgCy + rr * Math.sin(a)).toFixed(1) + ' ';
            }
            svgRadar += '<polygon points="' + pts + '" fill="none" stroke="#e5e7eb" stroke-width="0.5"/>';
        }
        // Benchmark polygon
        var bmPts = '';
        for (var j = 0; j < 6; j++) {
            var a = (Math.PI * 2 / 6) * j - Math.PI / 2;
            bmPts += (svgCx + svgR * (benchmarks[j] / 100) * Math.cos(a)).toFixed(1) + ',' + (svgCy + svgR * (benchmarks[j] / 100) * Math.sin(a)).toFixed(1) + ' ';
        }
        svgRadar += '<polygon points="' + bmPts + '" fill="rgba(200,200,200,0.1)" stroke="#9ca3af" stroke-width="1" stroke-dasharray="4,3"/>';
        // Actual polygon
        var actPts = '';
        for (var j = 0; j < 6; j++) {
            var a = (Math.PI * 2 / 6) * j - Math.PI / 2;
            var v = Math.min(radarDims[j].val / 100, 1);
            actPts += (svgCx + svgR * v * Math.cos(a)).toFixed(1) + ',' + (svgCy + svgR * v * Math.sin(a)).toFixed(1) + ' ';
        }
        svgRadar += '<polygon points="' + actPts + '" fill="rgba(6,182,212,0.15)" stroke="#06b6d4" stroke-width="2"/>';
        // Labels
        for (var j = 0; j < 6; j++) {
            var a = (Math.PI * 2 / 6) * j - Math.PI / 2;
            var lx = svgCx + (svgR + 20) * Math.cos(a);
            var ly = svgCy + (svgR + 20) * Math.sin(a);
            svgRadar += '<text x="' + lx.toFixed(1) + '" y="' + ly.toFixed(1) + '" text-anchor="middle" font-size="9" fill="#6b7280">' + radarDims[j].name + '</text>';
        }
        svgRadar += '<text x="50" y="250" font-size="8" fill="#06b6d4">&#9644; Your Score</text>';
        svgRadar += '<text x="140" y="250" font-size="8" fill="#9ca3af">- - - Benchmark</text>';
        svgRadar += '</svg>';

        // SVG bar chart
        var dimScores = [
            { name: 'Completion', val: parseFloat(document.getElementById('valCompletion').textContent), max: 20 },
            { name: 'Implementation', val: parseFloat(document.getElementById('valImplementation').textContent), max: 25 },
            { name: 'Recurrence', val: parseFloat(document.getElementById('valRecurrence').textContent), max: 20 },
            { name: 'Time-to-Close', val: parseFloat(document.getElementById('valTime').textContent), max: 15 },
            { name: 'Design Auth', val: parseFloat(document.getElementById('valDA').textContent), max: 10 },
            { name: 'Verification', val: parseFloat(document.getElementById('valVerify').textContent), max: 10 }
        ];
        var svgBars = '<svg width="500" height="160" xmlns="http://www.w3.org/2000/svg" style="display:block;margin:0 auto;">';
        for (var j = 0; j < dimScores.length; j++) {
            var y = j * 25 + 5;
            var pct = dimScores[j].val / dimScores[j].max;
            var bColor = pct >= 0.75 ? '#10b981' : pct >= 0.5 ? '#06b6d4' : pct >= 0.25 ? '#f59e0b' : '#ef4444';
            svgBars += '<text x="85" y="' + (y + 13) + '" text-anchor="end" font-size="10" fill="#4b5563">' + dimScores[j].name + '</text>';
            svgBars += '<rect x="90" y="' + (y + 3) + '" width="320" height="14" rx="3" fill="#f1f5f9"/>';
            svgBars += '<rect x="90" y="' + (y + 3) + '" width="' + (320 * Math.min(pct, 1)).toFixed(0) + '" height="14" rx="3" fill="' + bColor + '"/>';
            svgBars += '<text x="' + (95 + 320 * Math.min(pct, 1)).toFixed(0) + '" y="' + (y + 14) + '" font-size="9" fill="#4b5563"> ' + dimScores[j].val.toFixed(1) + '/' + dimScores[j].max + '</text>';
        }
        svgBars += '</svg>';

        // Recommendations with priority
        var recItems = document.querySelectorAll('#recList li');
        var recHTML = '';
        var priorities = ['P1-Critical', 'P2-High', 'P3-Medium'];
        var priColors = ['#ef4444', '#f59e0b', '#06b6d4'];
        for (var j = 0; j < recItems.length; j++) {
            var pri = priorities[j] || 'P3-Medium';
            var pc = priColors[j] || '#06b6d4';
            recHTML += '<div style="margin-bottom:10px;padding:10px;background:#f8fafc;border-radius:6px;border-left:3px solid ' + pc + ';">' +
                '<span style="font-size:10px;font-weight:700;color:' + pc + ';background:' + pc + '15;padding:2px 6px;border-radius:3px;">' + pri + '</span>' +
                '<p style="font-size:11px;color:#374151;margin:6px 0 0;line-height:1.6;">' + recItems[j].textContent + '</p></div>';
        }

        // Pro section
        var proHTML = '';
        if (rcaProUnlocked && lastMCData) {
            proHTML = '<div style="margin-top:24px;page-break-before:auto;">' +
                '<h2 style="font-size:14px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:12px;">Pro Analysis: Monte Carlo &amp; Sensitivity</h2>' +
                '<div style="display:flex;gap:16px;margin-bottom:16px;">' +
                '<div style="flex:1;background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:22px;font-weight:800;color:#06b6d4;">' + lastMCData.mean.toFixed(1) + '</div><div style="font-size:10px;color:#6b7280;">MC Mean (n=10,000)</div></div>' +
                '<div style="flex:1;background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:22px;font-weight:800;color:#94a3b8;">' + lastMCData.stdDev.toFixed(1) + '</div><div style="font-size:10px;color:#6b7280;">Std Deviation</div></div>' +
                '<div style="flex:1;background:#fef2f2;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:22px;font-weight:800;color:#ef4444;">' + lastMCData.p5.toFixed(1) + '</div><div style="font-size:10px;color:#6b7280;">P5 (Worst)</div></div>' +
                '<div style="flex:1;background:#f0fdf4;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:22px;font-weight:800;color:#10b981;">' + lastMCData.p95.toFixed(1) + '</div><div style="font-size:10px;color:#6b7280;">P95 (Best)</div></div>' +
                '</div>';

            // Sensitivity table
            if (lastSensitivity && lastSensitivity.length > 0) {
                proHTML += '<h3 style="font-size:12px;color:#1e3a5f;margin:16px 0 8px;">Sensitivity Analysis (sorted by impact)</h3>' +
                    '<table style="width:100%;border-collapse:collapse;font-size:11px;">' +
                    '<tr style="background:#1e3a5f;color:white;"><th style="' + cellS + 'text-align:left;color:white;">Parameter</th><th style="' + cellS + 'text-align:center;color:white;">Low Score</th><th style="' + cellS + 'text-align:center;color:white;">High Score</th><th style="' + cellS + 'text-align:center;color:white;">Impact Range</th></tr>';
                for (var j = 0; j < lastSensitivity.length; j++) {
                    var s = lastSensitivity[j];
                    proHTML += '<tr><td style="' + cellS + '">' + s.label + '</td><td style="' + cellS + 'text-align:center;">' + s.low.toFixed(1) + '</td><td style="' + cellS + 'text-align:center;">' + s.high.toFixed(1) + '</td><td style="' + cellS + 'text-align:center;font-weight:700;color:#06b6d4;">' + s.range.toFixed(1) + '</td></tr>';
                }
                proHTML += '</table>';
            }

            // Cost impact summary
            var recurCost = Math.round(inp.incidents * (inp.recurRate / 100) * 75000);
            var matLvl = 1;
            if (lr >= 0.25 && inp.daInvolve >= 80) matLvl = 5;
            else if (lr >= 0.15 && inp.daInvolve >= 60) matLvl = 4;
            else if (inp.implRate >= 60 && inp.daInvolve >= 30) matLvl = 3;
            else if (inp.rcas / inp.incidents >= 0.7) matLvl = 2;
            var mNames = ['','Reactive','Compliant','Proactive','Integrated','Generative'];
            proHTML += '<div style="display:flex;gap:16px;margin-top:16px;">' +
                '<div style="flex:1;background:#fff7ed;border-radius:8px;padding:12px;border-left:3px solid #f59e0b;">' +
                '<div style="font-size:10px;color:#6b7280;">Annual Risk Exposure</div><div style="font-size:18px;font-weight:800;color:#f59e0b;">$' + (recurCost / 1000).toFixed(0) + 'K</div></div>' +
                '<div style="flex:1;background:#f0f9ff;border-radius:8px;padding:12px;border-left:3px solid #06b6d4;">' +
                '<div style="font-size:10px;color:#6b7280;">Maturity Level</div><div style="font-size:18px;font-weight:800;color:#06b6d4;">' + matLvl + ' \u2014 ' + mNames[matLvl] + '</div></div></div>';

            proHTML += '</div>';
        }

        // Narrative
        var narrativeHTML = '';
        if (rcaProUnlocked && lastNarrative) {
            narrativeHTML = '<div style="margin-top:24px;page-break-before:auto;">' +
                '<h2 style="font-size:14px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:12px;">Executive Assessment</h2>' +
                '<div style="font-size:11px;color:#374151;line-height:1.7;">' + lastNarrative + '</div></div>';
        }

        var html = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>RCA Effectiveness Scorecard Report \u2014 ' + now + '</title>' +
            '<style>@media print{body{-webkit-print-color-adjust:exact;print-color-adjust:exact;}@page{margin:15mm;}}</style></head>' +
            '<body style="font-family:Arial,Helvetica,sans-serif;max-width:820px;margin:0 auto;padding:36px;color:#1f2937;">' +

            // Header
            '<div style="display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid #1e3a5f;padding-bottom:14px;margin-bottom:24px;">' +
            '<div><h1 style="font-size:20px;color:#1e3a5f;margin:0;">RCA Effectiveness Scorecard Report</h1>' +
            '<p style="font-size:11px;color:#6b7280;margin:4px 0 0;">Generated ' + now + ' &middot; resistancezero.com</p></div>' +
            '<div style="text-align:right;"><div style="font-size:48px;font-weight:800;color:' + gc + ';">' + Math.round(score) + '</div>' +
            '<div style="display:inline-block;padding:4px 14px;border-radius:6px;background:' + gc + ';color:white;font-size:13px;font-weight:700;">' + gradeText + '</div></div></div>' +

            // Radar + bar charts
            '<div style="display:flex;gap:20px;margin-bottom:24px;">' +
            '<div style="flex:1;">' + svgRadar + '</div>' +
            '<div style="flex:1.5;padding-top:10px;">' + svgBars + '</div></div>' +

            // Input + derived
            '<div style="display:flex;gap:16px;margin-bottom:24px;">' +
            '<div style="flex:1;"><h2 style="font-size:13px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:10px;">Input Parameters</h2>' +
            '<table style="width:100%;font-size:12px;">' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Annual Incidents</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.incidents + '</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">RCAs Completed</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.rcas + '</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Recs per RCA</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.recsPerRCA + '</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Implementation Rate</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.implRate + '%</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Recurrence Rate</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.recurRate + '%</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Time to Close</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.days + ' days</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">DA Involvement</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.daInvolve + '%</td></tr>' +
            '<tr><td style="padding:4px 0;color:#6b7280;">Verification Rate</td><td style="padding:4px 0;font-weight:600;color:#1f2937;">' + inp.verifyRate + '%</td></tr>' +
            '</table></div>' +

            '<div style="flex:1.5;"><h2 style="font-size:13px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:10px;">Derived Metrics</h2>' +
            '<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;">' +
            '<div style="background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:18px;font-weight:800;color:#06b6d4;">' + (lr * 100).toFixed(1) + '%</div><div style="font-size:10px;color:#6b7280;">Learning Rate</div></div>' +
            '<div style="background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:18px;font-weight:800;color:#f59e0b;">' + pred + '</div><div style="font-size:10px;color:#6b7280;">Predicted Recurrence</div></div>' +
            '<div style="background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:18px;font-weight:800;color:#ef4444;">' + daGap + '%</div><div style="font-size:10px;color:#6b7280;">DA Gap</div></div>' +
            '<div style="background:#f0f9ff;border-radius:8px;padding:12px;text-align:center;"><div style="font-size:18px;font-weight:800;color:#8b5cf6;">' + totalRecs + '</div><div style="font-size:10px;color:#6b7280;">Total Recs</div></div>' +
            '</div></div></div>' +

            // Dimension breakdown
            '<div style="margin-top:24px;"><h2 style="font-size:13px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:10px;">Dimension Breakdown</h2>' +
            '<table style="width:100%;border-collapse:collapse;">' +
            '<tr style="background:#1e3a5f;color:white;"><th style="' + cellS + 'text-align:left;color:white;">Dimension</th><th style="' + cellS + 'text-align:center;color:white;">Weight</th><th style="' + cellS + 'text-align:center;color:white;">Score</th><th style="' + cellS + 'text-align:center;color:white;">Max</th></tr>' +
            '<tr><td style="' + cellS + '">Completion</td><td style="' + cellS + 'text-align:center;">20%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valCompletion').textContent) + '</td><td style="' + cellS + 'text-align:center;">20</td></tr>' +
            '<tr><td style="' + cellS + '">Implementation</td><td style="' + cellS + 'text-align:center;">25%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valImplementation').textContent) + '</td><td style="' + cellS + 'text-align:center;">25</td></tr>' +
            '<tr><td style="' + cellS + '">Recurrence</td><td style="' + cellS + 'text-align:center;">20%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valRecurrence').textContent) + '</td><td style="' + cellS + 'text-align:center;">20</td></tr>' +
            '<tr><td style="' + cellS + '">Time-to-Close</td><td style="' + cellS + 'text-align:center;">15%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valTime').textContent) + '</td><td style="' + cellS + 'text-align:center;">15</td></tr>' +
            '<tr><td style="' + cellS + '">Design Authority</td><td style="' + cellS + 'text-align:center;">10%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valDA').textContent) + '</td><td style="' + cellS + 'text-align:center;">10</td></tr>' +
            '<tr><td style="' + cellS + '">Verification</td><td style="' + cellS + 'text-align:center;">10%</td><td style="' + cellS + 'text-align:center;font-weight:600;">' + (document.getElementById('valVerify').textContent) + '</td><td style="' + cellS + 'text-align:center;">10</td></tr>' +
            '<tr style="background:#1e3a5f;color:white;font-weight:700;"><td style="padding:10px 12px;color:white;">TOTAL</td><td style="padding:10px 12px;text-align:center;color:white;">100%</td><td style="padding:10px 12px;text-align:center;color:white;">' + Math.round(score) + '</td><td style="padding:10px 12px;text-align:center;color:white;">100</td></tr>' +
            '</table></div>' +

            // Recommendations
            '<div style="margin-top:24px;"><h2 style="font-size:13px;color:#1e3a5f;border-bottom:2px solid #06b6d4;padding-bottom:5px;margin-bottom:10px;">Prioritized Recommendations</h2>' +
            recHTML + '</div>' +

            // Pro sections
            proHTML +
            narrativeHTML +

            // Methodology
            '<div style="margin-top:24px;padding:16px;background:#f8fafc;border-radius:8px;border:1px solid #e2e8f0;">' +
            '<p style="font-size:11px;color:#6b7280;margin:0;"><strong>Methodology:</strong> 6-dimension weighted scorecard, 10,000 Monte Carlo iterations, Leveson STAMP framework. Sources: DOE-HDBK-1208, Uptime Institute 2023, ISO 45001. Scores normalized against industry benchmarks (90-day closure, 85% DA target). Sensitivity analysis varies each parameter across its full reasonable range.</p></div>' +

            // Footer
            '<div style="margin-top:36px;padding-top:14px;border-top:1px solid #e5e7eb;font-size:10px;color:#9ca3af;text-align:center;">' +
            '<p>resistancezero.com | Generated ' + now + ' | Client-side calculations</p>' +
            '<p style="margin-top:4px;">This report is a general-purpose assessment. Actual RCA effectiveness depends on organizational structure, culture, and operational context.</p>' +
            '<p style="margin-top:4px;">&copy; 2026 Bagus Dwi Permana. All rights reserved.</p></div>' +
        '
<!-- ═══ Feature 22: Reading Progress Bar ═══ -->
<script>
(function() {
    var bar = document.getElementById('scrollProgress');
    if (!bar) return;
    var ticking = false;
    function updateProgress() {
        var scrollTop = window.scrollY || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - window.innerHeight;
        var pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
        bar.style.width = Math.min(pct, 100) + '%';
        ticking = false;
    }
    window.addEventListener('scroll', function() {
        if (!ticking) { requestAnimationFrame(updateProgress); ticking = true; }
    }, { passive: true });
    updateProgress();
})();
</script>

<!-- ═══ Feature 23: TOC Sidebar ═══ -->
<script>
(function() {
    // Find H2s with IDs first, then fallback to auto-generating IDs
    var sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    if (!sections.length) {
        var allH2s = document.querySelectorAll('.article-body h2, .article-content h2');
        allH2s.forEach(function(h2, i) {
            if (!h2.id) h2.id = 'toc-section-' + (i + 1);
        });
        sections = document.querySelectorAll('.article-body h2[id], .article-content h2[id]');
    }
    if (!sections.length) return;

    var sidebarList = document.getElementById('tocSidebarList');
    var mobileList = document.getElementById('tocMobileList');
    var sidebar = document.getElementById('tocSidebar');
    var tocToggle = document.getElementById('tocMobileToggle');
    var tocDrawer = document.getElementById('tocMobileDrawer');
    var tocBackdrop = document.getElementById('tocMobileBackdrop');
    var tocClose = document.getElementById('tocDrawerClose');

    var tocData = [];
    sections.forEach(function(h2, i) {
        var id = h2.getAttribute('id');
        var numMatch = id.match(/\d+/);
        var num = numMatch ? numMatch[0] : String(i + 1);
        var text = h2.textContent.replace(/^\s*\d+[\.\s]*/, '').trim();
        tocData.push({ id: id, num: num, text: text });
    });

    function buildList(container, isMobile) {
        tocData.forEach(function(item) {
            var li = document.createElement('li');
            if (!isMobile) li.className = 'toc-sidebar-item';
            var a = document.createElement('a');
            a.href = '#' + item.id;
            a.setAttribute('data-section', item.id);
            if (isMobile) {
                a.textContent = item.num + '. ' + item.text;
            } else {
                a.className = 'toc-sidebar-link';
                a.innerHTML = '<span class="toc-sidebar-num">' + item.num + '</span>' + item.text;
            }
            a.addEventListener('click', function(e) {
                e.preventDefault();
                var target = document.getElementById(item.id);
                if (target) window.scrollTo({ top: target.offsetTop - 80, behavior: 'smooth' });
                if (isMobile) closeMobileDrawer();
            });
            li.appendChild(a);
            container.appendChild(li);
        });
    }

    buildList(sidebarList, false);
    buildList(mobileList, true);

    var currentSection = null;
    var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                currentSection = entry.target.getAttribute('id');
                highlightActive(currentSection);
            }
        });
    }, { rootMargin: '-80px 0px -70% 0px', threshold: 0 });

    sections.forEach(function(s) { observer.observe(s); });

    function highlightActive(sectionId) {
        sidebarList.querySelectorAll('.toc-sidebar-link').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
        mobileList.querySelectorAll('a').forEach(function(a) {
            a.classList.toggle('active', a.getAttribute('data-section') === sectionId);
        });
    }

    var articleContent = document.querySelector('.article-content');
    if (articleContent && sidebar) {
        var sidebarObserver = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                sidebar.classList.toggle('visible', entry.isIntersecting);
            });
        }, { rootMargin: '0px', threshold: 0.01 });
        sidebarObserver.observe(articleContent);
    }

    function openMobileDrawer() {
        tocDrawer.classList.add('active');
        tocBackdrop.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    function closeMobileDrawer() {
        tocDrawer.classList.remove('active');
        tocBackdrop.classList.remove('active');
        document.body.style.overflow = '';
    }

    if (tocToggle) tocToggle.addEventListener('click', openMobileDrawer);
    if (tocClose) tocClose.addEventListener('click', closeMobileDrawer);
    if (tocBackdrop) tocBackdrop.addEventListener('click', closeMobileDrawer);
})();
</script>

<!-- ═══ Feature 21: Global Search ═══ -->
<script>
(function() {
    var searchBtn = document.getElementById('navSearchBtn');
    var overlay = document.getElementById('searchOverlay');
    var modal = document.getElementById('searchModal');
    var input = document.getElementById('searchInput');
    var resultsEl = document.getElementById('searchResults');
    var fuse = null;
    var searchData = null;
    var focusedIdx = -1;

    function openSearch() {
        overlay.classList.add('active');
        modal.classList.add('active');
        input.value = '';
        input.focus();
        focusedIdx = -1;
        resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
        if (!searchData) {
            fetch('search-index.json')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    searchData = data;
                    fuse = new Fuse(data, {
                        keys: [
                            { name: 'title', weight: 0.4 },
                            { name: 'description', weight: 0.25 },
                            { name: 'keywords', weight: 0.25 },
                            { name: 'category', weight: 0.1 }
                        ],
                        threshold: 0.35,
                        includeScore: true,
                        minMatchCharLength: 2
                    });
                })
                .catch(function() {});
        }
    }

    function closeSearch() {
        overlay.classList.remove('active');
        modal.classList.remove('active');
        input.blur();
    }

    function getIconClass(cat) {
        cat = (cat || '').toLowerCase();
        if (cat === 'calculator') return 'calc';
        if (cat === 'tool') return 'tool';
        return '';
    }

    function getIconLabel(item) {
        if (item.url && item.url.indexOf('article-') === 0) {
            return item.url.replace('article-', '').replace('.html', '').padStart(2, '0');
        }
        var cat = (item.category || '').toLowerCase();
        if (cat === 'calculator') return '&#9889;';
        if (cat === 'tool') return '&#9881;';
        return '&#9733;';
    }

    function renderResults(results) {
        if (!results.length) {
            resultsEl.innerHTML = '<div class="search-empty">No results found</div>';
            focusedIdx = -1;
            return;
        }
        var html = '';
        results.slice(0, 8).forEach(function(r, i) {
            var item = r.item;
            var iconCls = getIconClass(item.category);
            html += '<a href="' + item.url + '" class="search-result-item" data-idx="' + i + '">'
                + '<div class="search-result-icon ' + iconCls + '">' + getIconLabel(item) + '</div>'
                + '<div class="search-result-info">'
                + '<div class="search-result-category">' + (item.category || '') + '</div>'
                + '<div class="search-result-title">' + item.title + '</div>'
                + '<div class="search-result-desc">' + item.description + '</div>'
                + '</div></a>';
        });
        resultsEl.innerHTML = html;
        focusedIdx = -1;
    }

    function updateFocus() {
        var items = resultsEl.querySelectorAll('.search-result-item');
        items.forEach(function(el, i) {
            el.classList.toggle('focused', i === focusedIdx);
            if (i === focusedIdx) el.scrollIntoView({ block: 'nearest' });
        });
    }

    if (searchBtn) searchBtn.addEventListener('click', openSearch);
    if (overlay) overlay.addEventListener('click', closeSearch);

    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            if (modal.classList.contains('active')) closeSearch();
            else openSearch();
            return;
        }
        if (!modal.classList.contains('active')) return;
        if (e.key === 'Escape') { closeSearch(); return; }
        var items = resultsEl.querySelectorAll('.search-result-item');
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            focusedIdx = Math.min(focusedIdx + 1, items.length - 1);
            updateFocus();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            focusedIdx = Math.max(focusedIdx - 1, 0);
            updateFocus();
        } else if (e.key === 'Enter' && focusedIdx >= 0 && items[focusedIdx]) {
            e.preventDefault();
            items[focusedIdx].click();
        }
    });

    if (input) {
        input.addEventListener('input', function() {
            var query = input.value.trim();
            if (query.length < 2 || !fuse) {
                resultsEl.innerHTML = '<div class="search-empty">Type to search across all content</div>';
                focusedIdx = -1;
                return;
            }
            var results = fuse.search(query);
            renderResults(results);
        });
    }
})();
</script>

</body></html>';

        var w = window.open('', '_blank');
        w.document.write(html);
        w.document.close();
        w.focus();
        setTimeout(function() { w.print(); }, 500);
    };

    // Tooltip positioning JS
    document.querySelectorAll('.tooltip-trigger').forEach(function(trigger) {
        trigger.addEventListener('mouseenter', function() {
            var content = this.querySelector('.tooltip-content');
            if (!content) return;
            content.style.display = 'block';
            var rect = this.getBoundingClientRect();
            var cRect = content.getBoundingClientRect();
            var top = rect.bottom + 8;
            var left = rect.left - cRect.width / 2 + rect.width / 2;
            if (left < 8) left = 8;
            if (left + cRect.width > window.innerWidth - 8) left = window.innerWidth - cRect.width - 8;
            if (top + cRect.height > window.innerHeight - 8) top = rect.top - cRect.height - 8;
            content.style.top = top + 'px';
            content.style.left = left + 'px';
        });
        trigger.addEventListener('mouseleave', function() {
            var content = this.querySelector('.tooltip-content');
            if (content) content.style.display = 'none';
        });
    });

    checkRcaSession();
})();
</script>

<!-- Cookie Consent Banner -->
<div class="cookie-banner hidden" id="cookieBanner">
    <p>We use cookies for analytics to improve your experience. <a href="privacy.html">Learn more</a></p>
    <div class="cookie-actions">
        <button class="cookie-accept" id="cookieAccept">Accept</button>
        <button class="cookie-decline" id="cookieDecline">Decline</button>
    </div>
</div>

<!-- Scroll to Top -->
<button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg>
</button>

<script>
(function(){
    // Cookie Banner
    var cb = document.getElementById('cookieBanner');
    var consent = localStorage.getItem('rz_cookie_consent');
    if (!consent && cb) {
        cb.classList.remove('hidden');
    }
    var acceptBtn = document.getElementById('cookieAccept');
    var declineBtn = document.getElementById('cookieDecline');
    if (acceptBtn) acceptBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'accepted');
        cb.classList.add('hidden');
    });
    if (declineBtn) declineBtn.addEventListener('click', function(){
        localStorage.setItem('rz_cookie_consent', 'declined');
        cb.classList.add('hidden');
        // Disable GA
        window['ga-disable-G-GED7FX8RTV'] = true;
    });

    // Scroll to Top
    var sBtn = document.getElementById('scrollTopBtn');
    if (sBtn) {
        var ticking = false;
        window.addEventListener('scroll', function(){
            if (!ticking) {
                window.requestAnimationFrame(function(){
                    if (window.scrollY > 500) {
                        sBtn.classList.add('visible');
                    } else {
                        sBtn.classList.remove('visible');
                    }
                    ticking = false;
                });
                ticking = true;
            }
        });
        sBtn.addEventListener('click', function(){
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
})();
</script>

</body>
</html>