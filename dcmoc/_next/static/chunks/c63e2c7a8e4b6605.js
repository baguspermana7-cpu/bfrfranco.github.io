(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32526,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isUnsafeProperty=function(e){return"__proto__"===e}},49187,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},88256,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},85038,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");let a=String(t);return"0"===a&&Object.is(Number(t),-0)?"-0":a}},49609,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(85038),n=e.r(88256);a.toPath=function(e){if(Array.isArray(e))return e.map(n.toKey);if("symbol"==typeof e)return[e];e=r.toString(e);let t=[],a=e.length;if(0===a)return t;let s=0,i="",l="",o=!1;for(46===e.charCodeAt(0)&&(t.push(""),s++);s<a;){let r=e[s];l?"\\"===r&&s+1<a?i+=e[++s]:r===l?l="":i+=r:o?'"'===r||"'"===r?l=r:"]"===r?(o=!1,t.push(i),i=""):i+=r:"["===r?(o=!0,i&&(t.push(i),i="")):"."===r?i&&(t.push(i),i=""):i+=r,s++}return i&&t.push(i),t}},75569,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(32526),n=e.r(49187),s=e.r(88256),i=e.r(49609);a.get=function e(t,a,l){if(null==t)return l;switch(typeof a){case"string":{if(r.isUnsafeProperty(a))return l;let s=t[a];if(void 0===s)if(n.isDeepKey(a))return e(t,i.toPath(a),l);else return l;return s}case"number":case"symbol":{"number"==typeof a&&(a=s.toKey(a));let e=t[a];if(void 0===e)return l;return e}default:{if(Array.isArray(a)){var o=t,c=a,d=l;if(0===c.length)return d;let e=o;for(let t=0;t<c.length;t++){if(null==e||r.isUnsafeProperty(c[t]))return d;e=e[c[t]]}return void 0===e?d:e}if(a=Object.is(a?.valueOf(),-0)?"-0":String(a),r.isUnsafeProperty(a))return l;let e=t[a];if(void 0===e)return l;return e}}}},45654,(e,t,a)=>{t.exports=e.r(75569).get},61885,(e,t,a)=>{"use strict";var r=e.r(61333),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useSyncExternalStore,i=r.useRef,l=r.useEffect,o=r.useMemo,c=r.useDebugValue;a.useSyncExternalStoreWithSelector=function(e,t,a,r,d){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var x=s(e,(u=o(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return i=t}return i=e}if(t=i,n(s,e))return t;var a=r(e);return void 0!==d&&d(t,a)?(s=e,t):(s=e,i=a)}var s,i,l=!1,o=void 0===a?null:a;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,a,r,d]))[0],u[1]);return l(function(){m.hasValue=!0,m.value=x},[x]),c(x),x}},11603,(e,t,a)=>{"use strict";t.exports=e.r(61885)},74805,(e,t,a)=>{"use strict";var r=e.r(61333),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,i=r.useEffect,l=r.useLayoutEffect,o=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!n(e,a)}catch(e){return!0}}var d="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=s({inst:{value:a,getSnapshot:t}}),n=r[0].inst,d=r[1];return l(function(){n.value=a,n.getSnapshot=t,c(n)&&d({inst:n})},[e,a,t]),i(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),o(a),a};a.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},44338,(e,t,a)=>{"use strict";t.exports=e.r(74805)},35403,(e,t,a)=>{"use strict";var r=e.r(61333),n=e.r(44338),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,l=r.useRef,o=r.useEffect,c=r.useMemo,d=r.useDebugValue;a.useSyncExternalStoreWithSelector=function(e,t,a,r,n){var u=l(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var x=i(e,(u=c(function(){function e(e){if(!o){if(o=!0,i=e,e=r(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return l=t}return l=e}if(t=l,s(i,e))return t;var a=r(e);return void 0!==n&&n(t,a)?(i=e,t):(i=e,l=a)}var i,l,o=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,r,n]))[0],u[1]);return o(function(){m.hasValue=!0,m.value=x},[x]),d(x),x}},14192,(e,t,a)=>{"use strict";t.exports=e.r(35403)},94985,(e,t,a)=>{"use strict";function r(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:4*(e!=e)}Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.compareValues=(e,t,a)=>{if(e!==t){let n=r(e),s=r(t);if(n===s&&0===n){if(e<t)return"desc"===a?1:-1;if(e>t)return"desc"===a?-1:1}return"desc"===a?s-n:n-s}return 0}},12485,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}},66712,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(12485),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;a.isKey=function(e,t){return!Array.isArray(e)&&(!!("number"==typeof e||"boolean"==typeof e||null==e||r.isSymbol(e))||"string"==typeof e&&(s.test(e)||!n.test(e))||null!=t&&Object.hasOwn(t,e))}},54,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(94985),n=e.r(66712),s=e.r(49609);a.orderBy=function(e,t,a,i){if(null==e)return[];a=i?void 0:a,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(a)||(a=null==a?[]:[a]),a=a.map(e=>String(e));let l=(e,t)=>{let a=e;for(let e=0;e<t.length&&null!=a;++e)a=a[t[e]];return a},o=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||n.isKey(e))?e:{key:e,path:s.toPath(e)});return e.map(e=>({original:e,criteria:o.map(t=>{var a,r;return a=t,null==(r=e)||null==a?r:"object"==typeof a&&"key"in a?Object.hasOwn(r,a.key)?r[a.key]:l(r,a.path):"function"==typeof a?a(r):Array.isArray(a)?l(r,a):"object"==typeof r?r[a]:r})})).slice().sort((e,t)=>{for(let n=0;n<o.length;n++){let s=r.compareValues(e.criteria[n],t.criteria[n],a[n]);if(0!==s)return s}return 0}).map(e=>e.original)}},93561,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.flatten=function(e,t=1){let a=[],r=Math.floor(t),n=(e,t)=>{for(let s=0;s<e.length;s++){let i=e[s];Array.isArray(i)&&t<r?n(i,t+1):a.push(i)}};return n(e,0),a}},88681,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=/^(?:0|[1-9]\d*)$/;a.isIndex=function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},65855,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},58407,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(65855);a.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&r.isLength(e.length)}},45793,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},70649,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isEqualsSameValueZero=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},36194,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(88681),n=e.r(58407),s=e.r(45793),i=e.r(70649);a.isIterateeCall=function(e,t,a){return!!s.isObject(a)&&(!!("number"==typeof t&&n.isArrayLike(a)&&r.isIndex(t))&&t<a.length||"string"==typeof t&&t in a)&&i.isEqualsSameValueZero(a[t],e)}},6053,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(54),n=e.r(93561),s=e.r(36194);a.sortBy=function(e,...t){let a=t.length;return a>1&&s.isIterateeCall(e,t[0],t[1])?t=[]:a>2&&s.isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),r.orderBy(e,n.flatten(t),["asc"])}},78164,(e,t,a)=>{t.exports=e.r(6053).sortBy},19290,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.debounce=function(e,t,{signal:a,edges:r}={}){let n,s=null,i=null!=r&&r.includes("leading"),l=null==r||r.includes("trailing"),o=()=>{null!==s&&(e.apply(n,s),n=void 0,s=null)},c=null,d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,l&&o(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,s=null},m=function(...e){if(a?.aborted)return;n=this,s=e;let t=null==c;d(),i&&t&&o()};return m.schedule=d,m.cancel=u,m.flush=()=>{o()},a?.addEventListener("abort",u,{once:!0}),m}},27695,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(19290);a.debounce=function(e,t=0,a={}){let n;"object"!=typeof a&&(a={});let{leading:s=!1,trailing:i=!0,maxWait:l}=a,o=[,,];s&&(o[0]="leading"),i&&(o[1]="trailing");let c=null,d=r.debounce(function(...t){n=e.apply(this,t),c=null},t,{edges:o}),u=function(...t){return null!=l&&(null===c&&(c=Date.now()),Date.now()-c>=l)?(n=e.apply(this,t),c=Date.now(),d.cancel(),d.schedule(),n):(d.apply(this,t),n)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),n),u}},89141,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(27695);a.throttle=function(e,t=0,a={}){let{leading:n=!0,trailing:s=!0}=a;return r.debounce(e,t,{leading:n,maxWait:t,trailing:s})}},89031,(e,t,a)=>{t.exports=e.r(89141).throttle},69369,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(12485);a.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},93822,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(69369);a.toFinite=function(e){return e?(e=r.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}},39888,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(36194),n=e.r(93822);a.range=function(e,t,a){a&&"number"!=typeof a&&r.isIterateeCall(e,t,a)&&(t=a=void 0),e=n.toFinite(e),void 0===t?(t=e,e=0):t=n.toFinite(t),a=void 0===a?e<t?1:-1:n.toFinite(a);let s=Math.max(Math.ceil((t-e)/(a||1)),0),i=Array(s);for(let t=0;t<s;t++)i[t]=e,e+=a;return i}},79191,(e,t,a)=>{t.exports=e.r(39888).range},17133,(e,t,a)=>{!function(a){"use strict";var r,n={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,i="[DecimalError] ",l=i+"Invalid argument: ",o=i+"Exponent out of range: ",c=Math.floor,d=Math.pow,u=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=c(1286742750677284.5),x={};function h(e,t){var a,r,n,i,l,o,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),s?N(t,m):t;if(c=e.d,d=t.d,l=e.e,n=t.e,c=c.slice(),i=l-n){for(i<0?(r=c,i=-i,o=d.length):(r=d,n=l,o=c.length),i>(o=(l=Math.ceil(m/7))>o?l+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=c.length)-(i=d.length)<0&&(i=o,r=d,d=c,c=r),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/1e7|0,c[i]%=1e7;for(a&&(c.unshift(a),++n),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=n,s?N(t,m):t}function p(e,t,a){if(e!==~~e||e<t||e>a)throw Error(l+e)}function f(e){var t,a,r,n=e.length-1,s="",i=e[0];if(n>0){for(s+=i,t=1;t<n;t++)(a=7-(r=e[t]+"").length)&&(s+=j(a)),s+=r;(a=7-(r=(i=e[t])+"").length)&&(s+=j(a))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,a,r,n;if(e=new this.constructor(e),this.s!==e.s)return this.s||-e.s;if(this.e!==e.e)return this.e>e.e^this.s<0?1:-1;for(t=0,a=(r=this.d.length)<(n=e.d.length)?r:n;t<a;++t)if(this.d[t]!==e.d[t])return this.d[t]>e.d[t]^this.s<0?1:-1;return r===n?0:r>n^this.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this.d.length-1,t=(e-this.e)*7;if(e=this.d[e])for(;e%10==0;e/=10)t--;return t<0?0:t},x.dividedBy=x.div=function(e){return b(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return N(b(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return y(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return 0>this.cmp(e)},x.lessThanOrEqualTo=x.lte=function(e){return 1>this.cmp(e)},x.logarithm=x.log=function(e){var t,a=this.constructor,n=a.precision,l=n+5;if(void 0===e)e=new a(10);else if((e=new a(e)).s<1||e.eq(r))throw Error(i+"NaN");if(this.s<1)throw Error(i+(this.s?"NaN":"-Infinity"));return this.eq(r)?new a(0):(s=!1,t=b(k(this,l),k(e,l),l),s=!0,N(t,n))},x.minus=x.sub=function(e){return e=new this.constructor(e),this.s==e.s?C(this,e):h(this,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,a=this.constructor,r=a.precision;if(!(e=new a(e)).s)throw Error(i+"NaN");return this.s?(s=!1,t=b(this,e,0,1).times(e),s=!0,this.minus(t)):N(new a(this),r)},x.naturalExponential=x.exp=function(){return g(this)},x.naturalLogarithm=x.ln=function(){return k(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){return e=new this.constructor(e),this.s==e.s?h(this,e):C(this,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,a,r;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(l+e);if(t=y(this)+1,a=7*(r=this.d.length-1)+1,r=this.d[r]){for(;r%10==0;r/=10)a--;for(r=this.d[0];r>=10;r/=10)a++}return e&&t>a?t:a},x.squareRoot=x.sqrt=function(){var e,t,a,r,n,l,o,d=this.constructor;if(this.s<1){if(!this.s)return new d(0);throw Error(i+"NaN")}for(e=y(this),s=!1,0==(n=Math.sqrt(+this))||n==1/0?(((t=f(this.d)).length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=c((e+1)/2)-(e<0||e%2),r=new d(t=n==1/0?"5e"+e:(t=n.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new d(n.toString()),n=o=(a=d.precision)+3;;)if(r=(l=r).plus(b(this,l,o+2)).times(.5),f(l.d).slice(0,o)===(t=f(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&"4999"==t){if(N(l,a+1,0),l.times(l).eq(this)){r=l;break}}else if("9999"!=t)break;o+=4}return s=!0,N(r,a)},x.times=x.mul=function(e){var t,a,r,n,i,l,o,c,d,u=this.constructor,m=this.d,x=(e=new u(e)).d;if(!this.s||!e.s)return new u(0);for(e.s*=this.s,a=this.e+e.e,(c=m.length)<(d=x.length)&&(i=m,m=x,x=i,l=c,c=d,d=l),i=[],r=l=c+d;r--;)i.push(0);for(r=d;--r>=0;){for(t=0,n=c+r;n>r;)o=i[n]+x[r]*m[n-r-1]+t,i[n--]=o%1e7|0,t=o/1e7|0;i[n]=(i[n]+t)%1e7|0}for(;!i[--l];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,s?N(e,u.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var a=this,r=a.constructor;return(a=new r(a),void 0===e)?a:(p(e,0,1e9),void 0===t?t=r.rounding:p(t,0,8),N(a,e+y(a)+1,t))},x.toExponential=function(e,t){var a,r=this,n=r.constructor;return void 0===e?a=S(r,!0):(p(e,0,1e9),void 0===t?t=n.rounding:p(t,0,8),a=S(r=N(new n(r),e+1,t),!0,e+1)),a},x.toFixed=function(e,t){var a,r,n=this.constructor;return void 0===e?S(this):(p(e,0,1e9),void 0===t?t=n.rounding:p(t,0,8),a=S((r=N(new n(this),e+y(this)+1,t)).abs(),!1,e+y(r)+1),this.isneg()&&!this.isZero()?"-"+a:a)},x.toInteger=x.toint=function(){var e=this.constructor;return N(new e(this),y(this)+1,e.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,a,n,l,o,d,u=this,m=u.constructor,x=+(e=new m(e));if(!e.s)return new m(r);if(!(u=new m(u)).s){if(e.s<1)throw Error(i+"Infinity");return u}if(u.eq(r))return u;if(n=m.precision,e.eq(r))return N(u,n);if(d=(t=e.e)>=(a=e.d.length-1),o=u.s,d){if((a=x<0?-x:x)<=0x1fffffffffffff){for(l=new m(r),t=Math.ceil(n/7+4),s=!1;a%2&&P((l=l.times(u)).d,t),0!==(a=c(a/2));)P((u=u.times(u)).d,t);return s=!0,e.s<0?new m(r).div(l):N(l,n)}}else if(o<0)throw Error(i+"NaN");return o=o<0&&1&e.d[Math.max(t,a)]?-1:1,u.s=1,s=!1,l=e.times(k(u,n+12)),s=!0,(l=g(l)).s=o,l},x.toPrecision=function(e,t){var a,r,n=this,s=n.constructor;return void 0===e?(a=y(n),r=S(n,a<=s.toExpNeg||a>=s.toExpPos)):(p(e,1,1e9),void 0===t?t=s.rounding:p(t,0,8),a=y(n=N(new s(n),e,t)),r=S(n,e<=a||a<=s.toExpNeg,e)),r},x.toSignificantDigits=x.tosd=function(e,t){var a=this.constructor;return void 0===e?(e=a.precision,t=a.rounding):(p(e,1,1e9),void 0===t?t=a.rounding:p(t,0,8)),N(new a(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=y(this),t=this.constructor;return S(this,e<=t.toExpNeg||e>=t.toExpPos)};var b=function(){function e(e,t){var a,r=0,n=e.length;for(e=e.slice();n--;)a=e[n]*t+r,e[n]=a%1e7|0,r=a/1e7|0;return r&&e.unshift(r),e}function t(e,t,a,r){var n,s;if(a!=r)s=a>r?1:-1;else for(n=s=0;n<a;n++)if(e[n]!=t[n]){s=e[n]>t[n]?1:-1;break}return s}function a(e,t,a){for(var r=0;a--;)e[a]-=r,r=+(e[a]<t[a]),e[a]=1e7*r+e[a]-t[a];for(;!e[0]&&e.length>1;)e.shift()}return function(r,n,s,l){var o,c,d,u,m,x,h,p,f,b,g,v,j,k,w,C,S,P,M=r.constructor,O=r.s==n.s?1:-1,E=r.d,A=n.d;if(!r.s)return new M(r);if(!n.s)throw Error(i+"Division by zero");for(d=0,c=r.e-n.e,S=A.length,w=E.length,p=(h=new M(O)).d=[];A[d]==(E[d]||0);)++d;if(A[d]>(E[d]||0)&&--c,(v=null==s?s=M.precision:l?s+(y(r)-y(n))+1:s)<0)return new M(0);if(v=v/7+2|0,d=0,1==S)for(u=0,A=A[0],v++;(d<w||u)&&v--;d++)j=1e7*u+(E[d]||0),p[d]=j/A|0,u=j%A|0;else{for((u=1e7/(A[0]+1)|0)>1&&(A=e(A,u),E=e(E,u),S=A.length,w=E.length),k=S,b=(f=E.slice(0,S)).length;b<S;)f[b++]=0;(P=A.slice()).unshift(0),C=A[0],A[1]>=1e7/2&&++C;do u=0,(o=t(A,f,S,b))<0?(g=f[0],S!=b&&(g=1e7*g+(f[1]||0)),(u=g/C|0)>1?(u>=1e7&&(u=1e7-1),x=(m=e(A,u)).length,b=f.length,1==(o=t(m,f,x,b))&&(u--,a(m,S<x?P:A,x))):(0==u&&(o=u=1),m=A.slice()),(x=m.length)<b&&m.unshift(0),a(f,m,b),-1==o&&(b=f.length,(o=t(A,f,S,b))<1&&(u++,a(f,S<b?P:A,b))),b=f.length):0===o&&(u++,f=[0]),p[d++]=u,o&&f[0]?f[b++]=E[k]||0:(f=[E[k]],b=1);while((k++<w||void 0!==f[0])&&v--)}return p[0]||p.shift(),h.e=c,N(h,l?s+y(h)+1:s)}}();function g(e,t){var a,n,i,l,c,u=0,m=0,x=e.constructor,h=x.precision;if(y(e)>16)throw Error(o+y(e));if(!e.s)return new x(r);for(null==t?(s=!1,c=h):c=t,l=new x(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(c+=Math.log(d(2,m))/Math.LN10*2+5|0,a=n=i=new x(r),x.precision=c;;){if(n=N(n.times(e),c),a=a.times(++u),f((l=i.plus(b(n,a,c))).d).slice(0,c)===f(i.d).slice(0,c)){for(;m--;)i=N(i.times(i),c);return x.precision=h,null==t?(s=!0,N(i,h)):i}i=l}}function y(e){for(var t=7*e.e,a=e.d[0];a>=10;a/=10)t++;return t}function v(e,t,a){if(t>e.LN10.sd())throw s=!0,a&&(e.precision=a),Error(i+"LN10 precision limit exceeded");return N(new e(e.LN10),t)}function j(e){for(var t="";e--;)t+="0";return t}function k(e,t){var a,n,l,o,c,d,u,m,x,h=1,p=e,g=p.d,j=p.constructor,w=j.precision;if(p.s<1)throw Error(i+(p.s?"NaN":"-Infinity"));if(p.eq(r))return new j(0);if(null==t?(s=!1,m=w):m=t,p.eq(10))return null==t&&(s=!0),v(j,m);if(j.precision=m+=10,n=(a=f(g)).charAt(0),!(15e14>Math.abs(o=y(p))))return u=v(j,m+2,w).times(o+""),p=k(new j(n+"."+a.slice(1)),m-10).plus(u),j.precision=w,null==t?(s=!0,N(p,w)):p;for(;n<7&&1!=n||1==n&&a.charAt(1)>3;)n=(a=f((p=p.times(e)).d)).charAt(0),h++;for(o=y(p),n>1?(p=new j("0."+a),o++):p=new j(n+"."+a.slice(1)),d=c=p=b(p.minus(r),p.plus(r),m),x=N(p.times(p),m),l=3;;){if(c=N(c.times(x),m),f((u=d.plus(b(c,new j(l),m))).d).slice(0,m)===f(d.d).slice(0,m))return d=d.times(2),0!==o&&(d=d.plus(v(j,m+2,w).times(o+""))),d=b(d,new j(h),m),j.precision=w,null==t?(s=!0,N(d,w)):d;d=u,l+=2}}function w(e,t){var a,r,n;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(a<0&&(a=r),a+=+t.slice(r+1),t=t.substring(0,r)):a<0&&(a=t.length),r=0;48===t.charCodeAt(r);)++r;for(n=t.length;48===t.charCodeAt(n-1);)--n;if(t=t.slice(r,n)){if(n-=r,e.e=c((a=a-r-1)/7),e.d=[],r=(a+1)%7,a<0&&(r+=7),r<n){for(r&&e.d.push(+t.slice(0,r)),n-=7;r<n;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=n;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>m||e.e<-m))throw Error(o+a)}else e.s=0,e.e=0,e.d=[0];return e}function N(e,t,a){var r,n,i,l,u,x,h,p,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if((r=t-l)<0)r+=7,n=t,h=f[p=0];else{if((p=Math.ceil((r+1)/7))>=(i=f.length))return e;for(l=1,h=i=f[p];i>=10;i/=10)l++;r%=7,n=r-7+l}if(void 0!==a&&(u=h/(i=d(10,l-n-1))%10|0,x=t<0||void 0!==f[p+1]||h%i,x=a<4?(u||x)&&(0==a||a==(e.s<0?3:2)):u>5||5==u&&(4==a||x||6==a&&(r>0?n>0?h/d(10,l-n):0:f[p-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return x?(i=y(e),f.length=1,t=t-i-1,f[0]=d(10,(7-t%7)%7),e.e=c(-t/7)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(0==r?(f.length=p,i=1,p--):(f.length=p+1,i=d(10,7-r),f[p]=n>0?(h/d(10,l-n)%d(10,n)|0)*i:0),x)for(;;)if(0==p){1e7==(f[0]+=i)&&(f[0]=1,++e.e);break}else{if(f[p]+=i,1e7!=f[p])break;f[p--]=0,i=1}for(r=f.length;0===f[--r];)f.pop();if(s&&(e.e>m||e.e<-m))throw Error(o+y(e));return e}function C(e,t){var a,r,n,i,l,o,c,d,u,m,x=e.constructor,h=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),s?N(t,h):t;if(c=e.d,m=t.d,r=t.e,d=e.e,c=c.slice(),l=d-r){for((u=l<0)?(a=c,l=-l,o=m.length):(a=m,r=d,o=c.length),l>(n=Math.max(Math.ceil(h/7),o)+2)&&(l=n,a.length=1),a.reverse(),n=l;n--;)a.push(0);a.reverse()}else{for((u=(n=c.length)<(o=m.length))&&(o=n),n=0;n<o;n++)if(c[n]!=m[n]){u=c[n]<m[n];break}l=0}for(u&&(a=c,c=m,m=a,t.s=-t.s),o=c.length,n=m.length-o;n>0;--n)c[o++]=0;for(n=m.length;n>l;){if(c[--n]<m[n]){for(i=n;i&&0===c[--i];)c[i]=1e7-1;--c[i],c[n]+=1e7}c[n]-=m[n]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?N(t,h):t):new x(0)}function S(e,t,a){var r,n=y(e),s=f(e.d),i=s.length;return t?(a&&(r=a-i)>0?s=s.charAt(0)+"."+s.slice(1)+j(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n<0?"e":"e+")+n):n<0?(s="0."+j(-n-1)+s,a&&(r=a-i)>0&&(s+=j(r))):n>=i?(s+=j(n+1-i),a&&(r=a-n-1)>0&&(s=s+"."+j(r))):((r=n+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),a&&(r=a-i)>0&&(n+1===i&&(s+="."),s+=j(r))),e.s<0?"-"+s:s}function P(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!=typeof e)throw Error(i+"Object expected");var t,a,r,n=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if(void 0!==(r=e[a=n[t]]))if(c(r)===r&&r>=n[t+1]&&r<=n[t+2])this[a]=r;else throw Error(l+a+": "+r);if(void 0!==(r=e[a="LN10"]))if(r==Math.LN10)this[a]=new this(r);else throw Error(l+a+": "+r);return this}if((n=function e(t){var a,r,n;function s(e){if(!(this instanceof s))return new s(e);if(this.constructor=s,e instanceof s){this.s=e.s,this.e=e.e,this.d=(e=e.d)?e.slice():e;return}if("number"==typeof e){if(0*e!=0)throw Error(l+e);if(e>0)this.s=1;else if(e<0)e=-e,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(e===~~e&&e<1e7){this.e=0,this.d=[e];return}return w(this,e.toString())}if("string"!=typeof e)throw Error(l+e);if(45===e.charCodeAt(0)?(e=e.slice(1),this.s=-1):this.s=1,u.test(e))w(this,e);else throw Error(l+e)}if(s.prototype=x,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=M,void 0===t&&(t={}),t)for(a=0,n=["precision","rounding","toExpNeg","toExpPos","LN10"];a<n.length;)t.hasOwnProperty(r=n[a++])||(t[r]=this[r]);return s.config(t),s}(n)).default=n.Decimal=n,r=new n(1),"function"==typeof define&&define.amd){let t;e.r,void 0!==(t=n)&&e.v(t)}else t.exports?t.exports=n:(a||(a="u">typeof self&&self&&self.self==self?self:Function("return this")()),a.Decimal=n)}(e.e)},19072,(e,t,a)=>{"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function i(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function l(e,t,a,r,s){if("function"!=typeof a)throw TypeError("The listener must be a function");var l=new i(a,r||e,s),o=n?n+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],l]:e._events[o].push(l):(e._events[o]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function c(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1)),c.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)r.call(e,t)&&a.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},c.prototype.listeners=function(e){var t=n?n+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var r=0,s=a.length,i=Array(s);r<s;r++)i[r]=a[r].fn;return i},c.prototype.listenerCount=function(e){var t=n?n+e:e,a=this._events[t];return a?a.fn?1:a.length:0},c.prototype.emit=function(e,t,a,r,s,i){var l=n?n+e:e;if(!this._events[l])return!1;var o,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,r),!0;case 5:return d.fn.call(d.context,t,a,r,s),!0;case 6:return d.fn.call(d.context,t,a,r,s,i),!0}for(c=1,o=Array(u-1);c<u;c++)o[c-1]=arguments[c];d.fn.apply(d.context,o)}else{var m,x=d.length;for(c=0;c<x;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,a);break;case 4:d[c].fn.call(d[c].context,t,a,r);break;default:if(!o)for(m=1,o=Array(u-1);m<u;m++)o[m-1]=arguments[m];d[c].fn.apply(d[c].context,o)}}return!0},c.prototype.on=function(e,t,a){return l(this,e,t,a,!1)},c.prototype.once=function(e,t,a){return l(this,e,t,a,!0)},c.prototype.removeListener=function(e,t,a,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var i=this._events[s];if(i.fn)i.fn!==t||r&&!i.once||a&&i.context!==a||o(this,s);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||r&&!i[l].once||a&&i[l].context!==a)&&c.push(i[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},28427,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.last=function(e){return e[e.length-1]}},51136,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},44454,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(28427),n=e.r(51136),s=e.r(58407);a.last=function(e){if(s.isArrayLike(e))return r.last(n.toArray(e))}},36572,(e,t,a)=>{t.exports=e.r(44454).last},31595,(e,t,a)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,m=r?Symbol.for("react.concurrent_mode"):60111,x=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,j=r?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case m:case i:case o:case l:case h:return e;default:switch(e=e&&e.$$typeof){case d:case x:case b:case f:case c:return e;default:return t}}case s:return t}}}function w(e){return k(e)===m}a.AsyncMode=u,a.ConcurrentMode=m,a.ContextConsumer=d,a.ContextProvider=c,a.Element=n,a.ForwardRef=x,a.Fragment=i,a.Lazy=b,a.Memo=f,a.Portal=s,a.Profiler=o,a.StrictMode=l,a.Suspense=h,a.isAsyncMode=function(e){return w(e)||k(e)===u},a.isConcurrentMode=w,a.isContextConsumer=function(e){return k(e)===d},a.isContextProvider=function(e){return k(e)===c},a.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},a.isForwardRef=function(e){return k(e)===x},a.isFragment=function(e){return k(e)===i},a.isLazy=function(e){return k(e)===b},a.isMemo=function(e){return k(e)===f},a.isPortal=function(e){return k(e)===s},a.isProfiler=function(e){return k(e)===o},a.isStrictMode=function(e){return k(e)===l},a.isSuspense=function(e){return k(e)===h},a.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===m||e===o||e===l||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===f||e.$$typeof===c||e.$$typeof===d||e.$$typeof===x||e.$$typeof===y||e.$$typeof===v||e.$$typeof===j||e.$$typeof===g)},a.typeOf=k},52769,(e,t,a)=>{"use strict";t.exports=e.r(31595)},97018,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isPlainObject=function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},54091,(e,t,a)=>{t.exports=e.r(97018).isPlainObject},63359,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.uniqBy=function(e,t){let a=new Map;for(let r=0;r<e.length;r++){let n=e[r],s=t(n,r,e);a.has(s)||a.set(s,n)}return Array.from(a.values())}},22981,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.ary=function(e,t){return function(...a){return e.apply(this,a.slice(0,t))}}},61734,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.identity=function(e){return e}},33918,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isObjectLike=function(e){return"object"==typeof e&&null!==e}},94227,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(58407),n=e.r(33918);a.isArrayLikeObject=function(e){return n.isObjectLike(e)&&r.isArrayLike(e)}},6803,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(75569);a.property=function(e){return function(t){return r.get(t,e)}}},98294,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}},5211,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(45793),n=e.r(98294),s=e.r(70649);function i(e,t,a,c){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,a,r){if(null==t)return!0;if(Array.isArray(t))return l(e,t,a,r);if(t instanceof Map){var s=e,i=t,c=a,d=r;if(0===i.size)return!0;if(!(s instanceof Map))return!1;for(let[e,t]of i.entries())if(!1===c(s.get(e),t,e,s,i,d))return!1;return!0}if(t instanceof Set)return o(e,t,a,r);let u=Object.keys(t);if(null==e||n.isPrimitive(e))return 0===u.length;if(0===u.length)return!0;if(r?.has(t))return r.get(t)===e;r?.set(t,e);try{for(let s=0;s<u.length;s++){let i=u[s];if(!n.isPrimitive(e)&&!(i in e)||void 0===t[i]&&void 0!==e[i]||null===t[i]&&null!==e[i]||!a(e[i],t[i],i,e,t,r))return!1}return!0}finally{r?.delete(t)}}(e,t,a,c);case"function":if(Object.keys(t).length>0)return i(e,{...t},a,c);return s.isEqualsSameValueZero(e,t);default:if(!r.isObject(e))return s.isEqualsSameValueZero(e,t);if("string"==typeof t)return""===t;return!0}}function l(e,t,a,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;let n=new Set;for(let s=0;s<t.length;s++){let i=t[s],l=!1;for(let o=0;o<e.length;o++){if(n.has(o))continue;let c=e[o],d=!1;if(a(c,i,s,e,t,r)&&(d=!0),d){n.add(o),l=!0;break}}if(!l)return!1}return!0}function o(e,t,a,r){return 0===t.size||e instanceof Set&&l([...e],[...t],a,r)}a.isMatchWith=function e(t,a,r){return"function"!=typeof r?e(t,a,()=>void 0):i(t,a,function e(t,a,n,s,l,o){let c=r(t,a,n,s,l,o);return void 0!==c?!!c:i(t,a,e,o)},new Map)},a.isSetMatch=o},79856,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(5211);a.isMatch=function(e,t){return r.isMatchWith(e,t,()=>void 0)}},55170,(e,t,a)=>{var r={675:function(e,t){"use strict";t.byteLength=function(e){var t=o(e),a=t[0],r=t[1];return(a+r)*3/4-r},t.toByteArray=function(e){var t,a,s=o(e),i=s[0],l=s[1],c=new n((i+l)*3/4-l),d=0,u=l>0?i-4:i;for(a=0;a<u;a+=4)t=r[e.charCodeAt(a)]<<18|r[e.charCodeAt(a+1)]<<12|r[e.charCodeAt(a+2)]<<6|r[e.charCodeAt(a+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===l&&(t=r[e.charCodeAt(a)]<<2|r[e.charCodeAt(a+1)]>>4,c[d++]=255&t),1===l&&(t=r[e.charCodeAt(a)]<<10|r[e.charCodeAt(a+1)]<<4|r[e.charCodeAt(a+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],i=0,l=r-n;i<l;i+=16383)s.push(function(e,t,r){for(var n,s=[],i=t;i<r;i+=3)n=(e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(a[n>>18&63]+a[n>>12&63]+a[n>>6&63]+a[63&n]);return s.join("")}(e,i,i+16383>l?l:i+16383));return 1===n?s.push(a[(t=e[r-1])>>2]+a[t<<4&63]+"=="):2===n&&s.push(a[(t=(e[r-2]<<8)+e[r-1])>>10]+a[t>>4&63]+a[t<<2&63]+"="),s.join("")};for(var a=[],r=[],n="u">typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=s.length;i<l;++i)a[i]=s[i],r[s.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");-1===a&&(a=t);var r=a===t?0:4-a%4;return[a,r]}r[45]=62,r[95]=63},72:function(e,t,a){"use strict";var r=a(675),n=a(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,a){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return o(e,t,a)}function o(e,t,a){if("string"==typeof e){var r=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!l.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|x(r,n),o=i(s),c=o.write(r,n);return c!==s&&(o=o.slice(0,c)),o}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(O(e,SharedArrayBuffer)||e&&O(e.buffer,SharedArrayBuffer)))return function(e,t,a){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(a||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===a?new Uint8Array(e):void 0===a?new Uint8Array(e,t):new Uint8Array(e,t,a),l.prototype),r}(e,t,a);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var d=e.valueOf&&e.valueOf();if(null!=d&&d!==e)return l.from(d,t,a);var h=function(e){if(l.isBuffer(e)){var t=0|m(e.length),a=i(t);return 0===a.length||e.copy(a,0,0,t),a}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?i(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(h)return h;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,a);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),i(e<0?0:0|m(e))}function u(e){for(var t=e.length<0?0:0|m(e.length),a=i(t),r=0;r<t;r+=1)a[r]=255&e[r];return a}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!l.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,a){return o(e,t,a)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,a){return(c(e),e<=0)?i(e):void 0!==t?"string"==typeof a?i(e).fill(t,a):i(e).fill(t):i(e)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)};function m(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function x(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var a=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===a)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return P(e).length;default:if(n)return r?-1:C(e).length;t=(""+t).toLowerCase(),n=!0}}function h(e,t,a){var n,s,i,l=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===a||a>this.length)&&(a=this.length),a<=0||(a>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,a){var r=e.length;(!t||t<0)&&(t=0),(!a||a<0||a>r)&&(a=r);for(var n="",s=t;s<a;++s)n+=E[e[s]];return n}(this,t,a);case"utf8":case"utf-8":return g(this,t,a);case"ascii":return function(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,a);case"latin1":case"binary":return function(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(e[n]);return r}(this,t,a);case"base64":return n=this,s=t,i=a,0===s&&i===n.length?r.fromByteArray(n):r.fromByteArray(n.slice(s,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,a){for(var r=e.slice(t,a),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,t,a);default:if(l)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),l=!0}}function p(e,t,a){var r=e[t];e[t]=e[a],e[a]=r}function f(e,t,a,r,n){var s;if(0===e.length)return -1;if("string"==typeof a?(r=a,a=0):a>0x7fffffff?a=0x7fffffff:a<-0x80000000&&(a=-0x80000000),(s=a*=1)!=s&&(a=n?0:e.length-1),a<0&&(a=e.length+a),a>=e.length)if(n)return -1;else a=e.length-1;else if(a<0)if(!n)return -1;else a=0;if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,a,r,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,a);else return Uint8Array.prototype.lastIndexOf.call(e,t,a);return b(e,[t],a,r,n)}throw TypeError("val must be string, number or Buffer")}function b(e,t,a,r,n){var s,i=1,l=e.length,o=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;i=2,l/=2,o/=2,a/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var d=-1;for(s=a;s<l;s++)if(c(e,s)===c(t,-1===d?0:s-d)){if(-1===d&&(d=s),s-d+1===o)return d*i}else -1!==d&&(s-=s-d),d=-1}else for(a+o>l&&(a=l-o),s=a;s>=0;s--){for(var u=!0,m=0;m<o;m++)if(c(e,s+m)!==c(t,m)){u=!1;break}if(u)return s}return -1}l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(O(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var a=e.length,r=t.length,n=0,s=Math.min(a,r);n<s;++n)if(e[n]!==t[n]){a=e[n],r=t[n];break}return a<r?-1:+(r<a)},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(a=0,t=0;a<e.length;++a)t+=e[a].length;var a,r=l.allocUnsafe(t),n=0;for(a=0;a<e.length;++a){var s=e[a];if(O(s,Uint8Array)&&(s=l.from(s)),!l.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},l.byteLength=x,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?g(this,0,e):h.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",a=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,a,r,n){if(O(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||a>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=a)return 0;if(r>=n)return -1;if(t>=a)return 1;if(t>>>=0,a>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var s=n-r,i=a-t,o=Math.min(s,i),c=this.slice(r,n),d=e.slice(t,a),u=0;u<o;++u)if(c[u]!==d[u]){s=c[u],i=d[u];break}return s<i?-1:+(i<s)},l.prototype.includes=function(e,t,a){return -1!==this.indexOf(e,t,a)},l.prototype.indexOf=function(e,t,a){return f(this,e,t,a,!0)},l.prototype.lastIndexOf=function(e,t,a){return f(this,e,t,a,!1)};function g(e,t,a){a=Math.min(e.length,a);for(var r=[],n=t;n<a;){var s,i,l,o,c=e[n],d=null,u=c>239?4:c>223?3:c>191?2:1;if(n+u<=a)switch(u){case 1:c<128&&(d=c);break;case 2:(192&(s=e[n+1]))==128&&(o=(31&c)<<6|63&s)>127&&(d=o);break;case 3:s=e[n+1],i=e[n+2],(192&s)==128&&(192&i)==128&&(o=(15&c)<<12|(63&s)<<6|63&i)>2047&&(o<55296||o>57343)&&(d=o);break;case 4:s=e[n+1],i=e[n+2],l=e[n+3],(192&s)==128&&(192&i)==128&&(192&l)==128&&(o=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&l)>65535&&o<1114112&&(d=o)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),n+=u}var m=r,x=m.length;if(x<=4096)return String.fromCharCode.apply(String,m);for(var h="",p=0;p<x;)h+=String.fromCharCode.apply(String,m.slice(p,p+=4096));return h}function y(e,t,a){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>a)throw RangeError("Trying to access beyond buffer length")}function v(e,t,a,r,n,s){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(a+r>e.length)throw RangeError("Index out of range")}function j(e,t,a,r,n,s){if(a+r>e.length||a<0)throw RangeError("Index out of range")}function k(e,t,a,r,s){return t*=1,a>>>=0,s||j(e,t,a,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,a,r,23,4),a+4}function w(e,t,a,r,s){return t*=1,a>>>=0,s||j(e,t,a,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,a,r,52,8),a+8}l.prototype.write=function(e,t,a,r){if(void 0===t)r="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)r=t,a=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(a)?(a>>>=0,void 0===r&&(r="utf8")):(r=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,i,l,o,c,d,u,m=this.length-t;if((void 0===a||a>m)&&(a=m),e.length>0&&(a<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var x=!1;;)switch(r){case"hex":return function(e,t,a,r){a=Number(a)||0;var n=e.length-a;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;r>s/2&&(r=s/2);for(var i=0;i<r;++i){var l,o=parseInt(t.substr(2*i,2),16);if((l=o)!=l)break;e[a+i]=o}return i}(this,e,t,a);case"utf8":case"utf-8":return n=t,s=a,M(C(e,this.length-n),this,n,s);case"ascii":return i=t,l=a,M(S(e),this,i,l);case"latin1":case"binary":return function(e,t,a,r){return M(S(t),e,a,r)}(this,e,t,a);case"base64":return o=t,c=a,M(P(e),this,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,u=a,M(function(e,t){for(var a,r,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(a=e.charCodeAt(s))>>8,n.push(a%256),n.push(r);return n}(e,this.length-d),this,d,u);default:if(x)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),x=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){var a=this.length;e=~~e,t=void 0===t?a:~~t,e<0?(e+=a)<0&&(e=0):e>a&&(e=a),t<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUIntLE=function(e,t,a){e>>>=0,t>>>=0,a||y(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},l.prototype.readUIntBE=function(e,t,a){e>>>=0,t>>>=0,a||y(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},l.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,a){e>>>=0,t>>>=0,a||y(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,a){e>>>=0,t>>>=0,a||y(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return(e>>>=0,t||y(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?0xffff0000|a:a},l.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?0xffff0000|a:a},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,a,r){if(e*=1,t>>>=0,a>>>=0,!r){var n=Math.pow(2,8*a)-1;v(this,e,t,a,n,0)}var s=1,i=0;for(this[t]=255&e;++i<a&&(s*=256);)this[t+i]=e/s&255;return t+a},l.prototype.writeUIntBE=function(e,t,a,r){if(e*=1,t>>>=0,a>>>=0,!r){var n=Math.pow(2,8*a)-1;v(this,e,t,a,n,0)}var s=a-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+a},l.prototype.writeUInt8=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUInt16BE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUInt32LE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUInt32BE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,a,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*a-1);v(this,e,t,a,n-1,-n)}var s=0,i=1,l=0;for(this[t]=255&e;++s<a&&(i*=256);)e<0&&0===l&&0!==this[t+s-1]&&(l=1),this[t+s]=(e/i|0)-l&255;return t+a},l.prototype.writeIntBE=function(e,t,a,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*a-1);v(this,e,t,a,n-1,-n)}var s=a-1,i=1,l=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===l&&0!==this[t+s+1]&&(l=1),this[t+s]=(e/i|0)-l&255;return t+a},l.prototype.writeInt8=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,a){return e*=1,t>>>=0,a||v(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,a){return k(this,e,t,!0,a)},l.prototype.writeFloatBE=function(e,t,a){return k(this,e,t,!1,a)},l.prototype.writeDoubleLE=function(e,t,a){return w(this,e,t,!0,a)},l.prototype.writeDoubleBE=function(e,t,a){return w(this,e,t,!1,a)},l.prototype.copy=function(e,t,a,r){if(!l.isBuffer(e))throw TypeError("argument should be a Buffer");if(a||(a=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<a&&(r=a),r===a||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-a&&(r=e.length-t+a);var n=r-a;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,a,r);else if(this===e&&a<t&&t<r)for(var s=n-1;s>=0;--s)e[s+t]=this[s+a];else Uint8Array.prototype.set.call(e,this.subarray(a,r),t);return n},l.prototype.fill=function(e,t,a,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,a=this.length):"string"==typeof a&&(r=a,a=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<a)throw RangeError("Out of range index");if(a<=t)return this;if(t>>>=0,a=void 0===a?this.length:a>>>0,e||(e=0),"number"==typeof e)for(n=t;n<a;++n)this[n]=e;else{var i=l.isBuffer(e)?e:l.from(e,r),o=i.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<a-t;++n)this[n+t]=i[n%o]}return this};var N=/[^+/0-9A-Za-z-_]/g;function C(e,t){t=t||1/0;for(var a,r=e.length,n=null,s=[],i=0;i<r;++i){if((a=e.charCodeAt(i))>55295&&a<57344){if(!n){if(a>56319||i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=a;continue}if(a<56320){(t-=3)>-1&&s.push(239,191,189),n=a;continue}a=(n-55296<<10|a-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,a<128){if((t-=1)<0)break;s.push(a)}else if(a<2048){if((t-=2)<0)break;s.push(a>>6|192,63&a|128)}else if(a<65536){if((t-=3)<0)break;s.push(a>>12|224,a>>6&63|128,63&a|128)}else if(a<1114112){if((t-=4)<0)break;s.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}else throw Error("Invalid code point")}return s}function S(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function P(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,a,r){for(var n=0;n<r&&!(n+a>=t.length)&&!(n>=e.length);++n)t[n+a]=e[n];return n}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var E=function(){for(var e="0123456789abcdef",t=Array(256),a=0;a<16;++a)for(var r=16*a,n=0;n<16;++n)t[r+n]=e[a]+e[n];return t}()},783:function(e,t){t.read=function(e,t,a,r,n){var s,i,l=8*n-r-1,o=(1<<l)-1,c=o>>1,d=-7,u=a?n-1:0,m=a?-1:1,x=e[t+u];for(u+=m,s=x&(1<<-d)-1,x>>=-d,d+=l;d>0;s=256*s+e[t+u],u+=m,d-=8);for(i=s&(1<<-d)-1,s>>=-d,d+=r;d>0;i=256*i+e[t+u],u+=m,d-=8);if(0===s)s=1-c;else{if(s===o)return i?NaN:1/0*(x?-1:1);i+=Math.pow(2,r),s-=c}return(x?-1:1)*i*Math.pow(2,s-r)},t.write=function(e,t,a,r,n,s){var i,l,o,c=8*s-n-1,d=(1<<c)-1,u=d>>1,m=5960464477539062e-23*(23===n),x=r?0:s-1,h=r?1:-1,p=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(l=+!!isNaN(t),i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-i))<1&&(i--,o*=2),i+u>=1?t+=m/o:t+=m*Math.pow(2,1-u),t*o>=2&&(i++,o/=2),i+u>=d?(l=0,i=d):i+u>=1?(l=(t*o-1)*Math.pow(2,n),i+=u):(l=t*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;e[a+x]=255&l,x+=h,l/=256,n-=8);for(i=i<<n|l,c+=n;c>0;e[a+x]=255&i,x+=h,i/=256,c-=8);e[a+x-h]|=128*p}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}},i=!0;try{r[e](a,a.exports,s),i=!1}finally{i&&delete n[e]}return a.exports}s.ab="/ROOT/dcmoc/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},57707,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},73355,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},21095,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.argumentsTag="[object Arguments]",a.arrayBufferTag="[object ArrayBuffer]",a.arrayTag="[object Array]",a.bigInt64ArrayTag="[object BigInt64Array]",a.bigUint64ArrayTag="[object BigUint64Array]",a.booleanTag="[object Boolean]",a.dataViewTag="[object DataView]",a.dateTag="[object Date]",a.errorTag="[object Error]",a.float32ArrayTag="[object Float32Array]",a.float64ArrayTag="[object Float64Array]",a.functionTag="[object Function]",a.int16ArrayTag="[object Int16Array]",a.int32ArrayTag="[object Int32Array]",a.int8ArrayTag="[object Int8Array]",a.mapTag="[object Map]",a.numberTag="[object Number]",a.objectTag="[object Object]",a.regexpTag="[object RegExp]",a.setTag="[object Set]",a.stringTag="[object String]",a.symbolTag="[object Symbol]",a.uint16ArrayTag="[object Uint16Array]",a.uint32ArrayTag="[object Uint32Array]",a.uint8ArrayTag="[object Uint8Array]",a.uint8ClampedArrayTag="[object Uint8ClampedArray]"},51236,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},16147,(e,t,a)=>{"use strict";var r=e.i(55170);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let n=e.r(57707),s=e.r(73355),i=e.r(21095),l=e.r(98294),o=e.r(51236);function c(e,t,a,n=new Map,u){let m=u?.(e,t,a,n);if(void 0!==m)return m;if(l.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){let t=Array(e.length);n.set(e,t);for(let r=0;r<e.length;r++)t[r]=c(e[r],r,a,n,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[r,s]of(n.set(e,t),e))t.set(r,c(s,r,a,n,u));return t}if(e instanceof Set){let t=new Set;for(let r of(n.set(e,t),e))t.add(c(r,void 0,a,n,u));return t}if(void 0!==r.Buffer&&r.Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);n.set(e,t);for(let r=0;r<e.length;r++)t[r]=c(e[r],r,a,n,u);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),d(t,e,a,n,u),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return n.set(e,t),d(t,e,a,n,u),t}if("u">typeof Blob&&e instanceof Blob){let t=new Blob([e],{type:e.type});return n.set(e,t),d(t,e,a,n,u),t}if(e instanceof Error){let t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,d(t,e,a,n,u),t}if(e instanceof Boolean){let t=new Boolean(e.valueOf());return n.set(e,t),d(t,e,a,n,u),t}if(e instanceof Number){let t=new Number(e.valueOf());return n.set(e,t),d(t,e,a,n,u),t}if(e instanceof String){let t=new String(e.valueOf());return n.set(e,t),d(t,e,a,n,u),t}if("object"==typeof e&&function(e){switch(s.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),d(t,e,a,n,u),t}return e}function d(e,t,a=e,r,s){let i=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<i.length;n++){let l=i[n],o=Object.getOwnPropertyDescriptor(e,l);(null==o||o.writable)&&(e[l]=c(t[l],l,a,r,s))}}a.cloneDeepWith=function(e,t){return c(e,void 0,e,new Map,t)},a.cloneDeepWithImpl=c,a.copyProperties=d},92603,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(16147);a.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},43768,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(79856),n=e.r(92603);a.matches=function(e){return e=n.cloneDeep(e),t=>r.isMatch(t,e)}},29934,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(16147),n=e.r(73355),s=e.r(21095);a.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(a,i,l,o)=>{let c=t?.(a,i,l,o);if(void 0!==c)return c;if("object"==typeof e){if(n.getTag(e)===s.objectTag&&"function"!=typeof e.constructor){let t={};return o.set(e,t),r.copyProperties(t,e,l,o),t}switch(Object.prototype.toString.call(e)){case s.numberTag:case s.stringTag:case s.booleanTag:{let t=new e.constructor(e?.valueOf());return r.copyProperties(t,e),t}case s.argumentsTag:{let t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}})}},87618,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(29934);a.cloneDeep=function(e){return r.cloneDeepWith(e)}},63310,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(73355);a.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===r.getTag(e)}},49457,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(49187),n=e.r(88681),s=e.r(63310),i=e.r(49609);a.has=function(e,t){let a;if(0===(a=Array.isArray(t)?t:"string"==typeof t&&r.isDeepKey(t)&&e?.[t]==null?i.toPath(t):[t]).length)return!1;let l=e;for(let e=0;e<a.length;e++){let t=a[e];if((null==l||!Object.hasOwn(l,t))&&!((Array.isArray(l)||s.isArguments(l))&&n.isIndex(t)&&t<l.length))return!1;l=l[t]}return!0}},9746,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(79856),n=e.r(88256),s=e.r(87618),i=e.r(75569),l=e.r(49457);a.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=n.toKey(e)}return t=s.cloneDeep(t),function(a){let n=i.get(a,e);return void 0===n?l.has(a,e):void 0===t?void 0===n:r.isMatch(n,t)}}},10546,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(61734),n=e.r(6803),s=e.r(43768),i=e.r(9746);a.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":if(Array.isArray(e)&&2===e.length)return i.matchesProperty(e[0],e[1]);return s.matches(e);case"string":case"symbol":case"number":return n.property(e)}}},1845,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(63359),n=e.r(22981),s=e.r(61734),i=e.r(94227),l=e.r(10546);a.uniqBy=function(e,t=s.identity){return i.isArrayLikeObject(e)?r.uniqBy(Array.from(e),n.ary(l.iteratee(t),1)):[]}},30721,(e,t,a)=>{t.exports=e.r(1845).uniqBy},32302,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.maxBy=function(e,t){if(0===e.length)return;let a=e[0],r=t(a,0,e);for(let n=1;n<e.length;n++){let s=e[n],i=t(s,n,e);i>r&&(r=i,a=s)}return a}},95376,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(32302),n=e.r(61734),s=e.r(10546);a.maxBy=function(e,t){if(null!=e)return r.maxBy(Array.from(e),s.iteratee(t??n.identity))}},40105,(e,t,a)=>{t.exports=e.r(95376).maxBy},91329,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a.minBy=function(e,t){if(0===e.length)return;let a=e[0],r=t(a,0,e);for(let n=1;n<e.length;n++){let s=e[n],i=t(s,n,e);i<r&&(r=i,a=s)}return a}},38113,(e,t,a)=>{"use strict";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});let r=e.r(91329),n=e.r(61734),s=e.r(10546);a.minBy=function(e,t){if(null!=e)return r.minBy(Array.from(e),s.iteratee(t??n.identity))}},74373,(e,t,a)=>{t.exports=e.r(38113).minBy},85763,e=>{"use strict";var t,a,r,n,s,i,l,o,c,d,u,m,x,h,p,f,b,g,y,v,j,k,w,N,C,S,P,M,O,E,A,T,I,R,D,L,_,F=e.i(52118),$=e.i(44924),z=e.i(61333);let q={"shift-lead":"Team Leaders",engineer:"Engineers",technician:"Technicians",admin:"Supervisor",supervisor:"Supervisor",janitor:"Facility Staff"},W={"4on4off":{id:"4on4off",label:"4-on / 4-off (12h)",shortLabel:"4on/4off",shiftHours:12,breakMinutes:60,effectiveHours:11,cycleDays:8,workDays:4,offDays:4,teamsRequired:4,avgWeeklyScheduled:42,avgWeeklyEffective:38.5,overtimeHours:0,description:"4-team compressed schedule. 4 consecutive 12h shifts then 4 days off. Zero overtime. Best work-life balance. Effective weekly hours ~38.5h (<40h)."},"4on3off":{id:"4on3off",label:"4-on / 3-off (12h)",shortLabel:"4on/3off",shiftHours:12,breakMinutes:120,effectiveHours:10,cycleDays:7,workDays:4,offDays:3,teamsRequired:4,avgWeeklyScheduled:48/7*7,avgWeeklyEffective:40/7*7,overtimeHours:0,description:"4-team compressed schedule. 4 consecutive 12h shifts (2h mandatory breaks) then 3 days off. Exactly 40h effective/week. Optimal work-life balance with full productivity."},"continental-8h":{id:"continental-8h",label:"Continental 3-Shift (8h)",shortLabel:"Continental",shiftHours:8,breakMinutes:30,effectiveHours:7.5,cycleDays:8,workDays:6,offDays:2,teamsRequired:4,avgWeeklyScheduled:42,avgWeeklyEffective:39.375,overtimeHours:1.5,description:"4-team rotation: 2 Morning  2 Afternoon  2 Night  2 Off. Standard 8-day cycle. Minor handover OT. Traditional DC model."}},B=(e,t,a,r,n=!0,s,i,l="in-house",o=.5)=>{var c;let d=((e,t)=>{switch(e){case"supervisor":return Math.max(1.3*t.labor.baseSalary_ShiftLead,t.labor.minimumWage);case"shift-lead":return Math.max(t.labor.baseSalary_ShiftLead,t.labor.minimumWage);case"engineer":return Math.max(t.labor.baseSalary_Engineer,t.labor.minimumWage);case"technician":return Math.max(t.labor.baseSalary_Technician,t.labor.minimumWage);case"admin":return Math.max(t.labor.baseSalary_Admin,t.labor.minimumWage);case"janitor":return Math.max(t.labor.baseSalary_Janitor,t.labor.minimumWage);default:return t.labor.minimumWage}})(e,r),u=(c=i??r.environment.baselineAQI)&&!(c<=50)?1+(Math.min(c,300)-50)/250*.15:1,m="in-house"===l?1:"hybrid"===l?Math.max(.1,o):.1,x=s||("12h"===a?"4on3off":"continental-8h"),h=W[x];if(!n){let a=Math.ceil(t*m),n=a*d,s=n*("ID"===r.id?.04:.06),i=.05*n*u;return{role:e,headcount:a,onShiftCount:a,monthlyCost:n+s+i,breakdown:{baseSalaries:n,overtime:0,allowances:i,socialSecurity:s,shiftAllowance:0},metrics:{weeklyHoursScheduled:40,weeklyHoursEffective:37.5,overtimeHoursPerPerson:0,shrinkageHeads:0,utilizationRate:.85,costPerFTE:n/a+s/a+i/a},is24x7:!1,schedule:{pattern:"Mon-Fri 08:00-17:00",patternId:x,cycleLength:7,workDaysPerCycle:5,hoursPerShift:8,effectiveHoursPerShift:7.5,breakMinutes:30,teamsRequired:1},operatingModel:l}}let p=h.teamsRequired,f=Math.ceil(t*m),b=Math.max(1,Math.ceil(t/p*m)),g=Math.ceil(f*(r.labor.shrinkageFactor*("4on4off"===x?.5:"4on3off"===x?.6:1))),y=f+g,v=h.avgWeeklyScheduled,j=h.avgWeeklyEffective,k=h.overtimeHours,w=y*d,N=w*("continental-8h"===x?.07:.1),C=w*("ID"===r.id?.04:.06),S=w*("continental-8h"===x?.06:.08)*u,P=k>0?1.5*k*(d/173)*4.33*y:0,M=w+N+C+S+P;return{role:e,headcount:y,onShiftCount:b,monthlyCost:M,breakdown:{baseSalaries:w,overtime:P,allowances:S,socialSecurity:C,shiftAllowance:N},metrics:{weeklyHoursScheduled:v,weeklyHoursEffective:j,overtimeHoursPerPerson:k,shrinkageHeads:g,utilizationRate:h.workDays/h.cycleDays,costPerFTE:M/y},is24x7:!0,schedule:{pattern:h.label,patternId:x,cycleLength:h.cycleDays,workDaysPerCycle:h.workDays,hoursPerShift:h.shiftHours,effectiveHoursPerShift:h.effectiveHours,breakMinutes:h.breakMinutes,teamsRequired:p},operatingModel:l}},U=(e,t,a,r=!0,n="in-house",s=.5)=>{let i=B(e,t,"8h",a,r,"continental-8h",null,n,s),l=B(e,t,"12h",a,r,"4on4off",null,n,s),o=B(e,t,"12h",a,r,"4on3off",null,n,s),c=[{id:"4on4off",cost:l.monthlyCost},{id:"4on3off",cost:o.monthlyCost},{id:"continental-8h",cost:i.monthlyCost}].sort((e,t)=>e.cost-t.cost)[0].id,d="";return d="4on4off"===c?"4on/4off delivers lowest cost with zero overtime and best work-life balance (4 consecutive days off). Effective hours ~38.5h/week. Ideal for sites prioritizing retention and fatigue management.":"4on3off"===c?"4on/3off meets the 40h/week effective target while maintaining 12h compressed benefits. Good balance between productivity and employee wellbeing.":"Continental 8h is most cost-effective. Traditional model with shorter shifts. Consider for regulatory environments that restrict 12h shifts.",{model8h:i,model12h_4on4off:l,model12h_4on3off:o,cheapest:c,recommendation:d}};function K(e,t,a,r,n,s,i=.5){let l=e/1e3,o=4===t?1.2:3===t?1:.85,c="in-house"===r?1:"hybrid"===r?.6:.3,d="in-house"===n?1:"hybrid"===n?Math.max(.2,i):.2,u="predictive"===s?1.15:"planned"===s?1:.9,m="8h"===a?1.1:1,x=W["12h"===a?"4on3off":"continental-8h"].teamsRequired,h={},p={};for(let[e,i]of Object.entries({"shift-lead":.4,engineer:.5,technician:.2,admin:.1,janitor:.2})){let f=i*l,b=[`${i}/MW x ${l.toFixed(1)}MW = ${f.toFixed(1)}`];if(("shift-lead"===e||"engineer"===e)&&(f*=m,1!==m&&b.push(`x${m} (${a} shift)`),f*=o,1!==o&&b.push(`x${o} (T${t})`)),f*=c,1!==c&&b.push(`x${c} (${r})`),"technician"===e&&(f*=d,1!==d&&b.push(`x${d} (maint: ${n})`)),"engineer"===e&&(f*=u,1!==u&&b.push(`x${u} (${s})`)),"shift-lead"===e||"engineer"===e){let e=Math.round(f);f=Math.max(f,x),e<x&&b.push(`min ${x} (1/team)`)}h[e]=Math.max(1,Math.round(f)),p[e]=b.join("  ")+`  ${h[e]}`}let f=Object.values(h).reduce((e,t)=>e+t,0);return{headcounts:h,rationale:p,totalFTE:f}}function H(){let{inputs:e,selectedCountry:t}=(0,$.useSimulationStore)();return(0,z.useMemo)(()=>{if(!e.staffingAutoMode)return e;let t=K(e.itLoad,e.tierLevel,e.shiftModel,"outsourced"===e.staffingModel?"outsourced":e.staffingModel,e.maintenanceModel,e.maintenanceStrategy,e.hybridRatio??.5);return{...e,headcount_ShiftLead:t.headcounts["shift-lead"],headcount_Engineer:t.headcounts.engineer,headcount_Technician:t.headcounts.technician,headcount_Admin:t.headcounts.admin,headcount_Janitor:t.headcounts.janitor}},[e,t])}let V=(e,t,a=new Date(e,0,1))=>{let r=[],n=e%4==0&&e%100!=0||e%400==0?366:365,s=0;for(let a=0;a<n;a++){let n=new Date(e,0,1+a),i="Off",l="None",o=0;if("4on-4off"===t){let e=s%8;e<2?(i="Work",l="Day",o=12):e<4?(i="Work",l="Night",o=12):(i="Off",o=0),s++}else if("4on-3off"===t){let e=s%7;e<2?(i="Work",l="Day",o=12):e<4?(i="Work",l="Night",o=12):(i="Off",o=0),s++}else if("3shift-8h"===t){let e=s%8;e<2?(i="Work",l="Morning",o=8):e<4?(i="Work",l="Afternoon",o=8):e<6?(i="Work",l="Night",o=8):(i="Off",l="None",o=0),s++}let c=200*(o>0);r.push({date:n,dayType:i,shiftType:l,team:"Team A",isPublicHoliday:!1,hours:o,dailyCost:c})}return r},G=(e,t,a,r,n)=>{let s=t*("ID"===a.id?1.5:.5),i=12*t*.15+("USD"===a.currency?330:5e6),l=("ID"===a.id?"USD"===a.currency?1e3:15e6:2500)+.5*t,o=+t+.75*t*2+.25*t*3,c=s+i+l+o;return{separationCost:s,replacementCost:i,trainingCost:l,productivityLoss:o,totalCostPerHire:c,totalAnnualCost:c*Math.ceil(n*r)}};var Y=e.i(10419),X=e.i(33415);let Z=(0,X.default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]),J=(0,X.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Q=(0,X.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var ee=e.i(34118);let et=(0,X.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ea=(0,X.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),er=(0,X.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var en=e.i(78501);let es=(0,X.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ei=({content:e})=>{let[t,a]=(0,z.useState)(!1);return(0,F.jsxs)("div",{className:"relative inline-block ml-1",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[(0,F.jsx)(es,{className:"w-3 h-3 text-slate-500 hover:text-cyan-400 cursor-help"}),t&&(0,F.jsxs)("div",{className:"absolute z-50 w-64 p-2.5 mt-2 -ml-32 text-sm text-slate-900 dark:text-white bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 animate-in fade-in zoom-in-95 duration-200",children:[e,(0,F.jsx)("div",{className:"absolute w-2 h-2 bg-white dark:bg-slate-800 transform rotate-45 -top-1 left-1/2 -ml-1 border-t border-l border-slate-200 dark:border-slate-700"})]})]})},el=(e,t=0)=>new Intl.NumberFormat("en-US",{maximumFractionDigits:t}).format(e),eo=e=>{let t=Math.abs(e),a=e<0?"-":"";return t>=1e9?`${a}$${(t/1e9).toFixed(2)}B`:t>=1e6?`${a}$${(t/1e6).toFixed(1)}M`:t>=1e3?`${a}$${(t/1e3).toFixed(0)}K`:`${a}$${t.toFixed(0)}`},ec=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),ed=e=>{let t=Math.abs(e),a=e<0?"-":"";return t>=1e9?`${a}${(t/1e9).toFixed(2)}B`:t>=1e6?`${a}${(t/1e6).toFixed(1)}M`:t>=1e4?`${a}${(t/1e3).toFixed(0)}K`:e.toLocaleString("en-US")},eu=(e,t)=>`${ed(e)} ${t}`,em=(e,t=1)=>`${e.toFixed(t)}%`,ex=e=>e>=1e3?`${(e/1e3).toFixed(1)} MW`:`${e} kW`;var eh=e.i(21292);let ep=(0,X.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ef=(0,X.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),eb=(0,X.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),eg={purple:{card:"bg-purple-950/30 border-purple-800",icon:"bg-purple-500/20 text-purple-400"},slate:{card:"bg-slate-800/30 border-slate-700",icon:"bg-slate-500/20 text-slate-400"},cyan:{card:"bg-cyan-950/30 border-cyan-800",icon:"bg-cyan-500/20 text-cyan-400"},blue:{card:"bg-blue-950/30 border-blue-800",icon:"bg-blue-500/20 text-blue-400"},emerald:{card:"bg-emerald-950/30 border-emerald-800",icon:"bg-emerald-500/20 text-emerald-400"},amber:{card:"bg-amber-950/30 border-amber-800",icon:"bg-amber-500/20 text-amber-400"}},ey=({role:e,count:t,color:a,salary:r,turnoverRate:n,utilization:s,children:i})=>{let[l,o]=(0,z.useState)(!1);return(0,F.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,F.jsx)("div",{className:"h-6 w-px bg-slate-300 dark:bg-slate-700"}),(0,F.jsxs)("div",{className:(0,eh.default)("p-3 rounded-xl border w-52 transition-all hover:scale-105 hover:shadow-lg hover:shadow-cyan-900/20 z-10 cursor-pointer",eg[a]?.card),onClick:()=>o(!l),role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&o(!l),children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:`p-1.5 rounded-lg ${eg[a]?.icon}`,children:(0,F.jsx)(ep,{className:"w-4 h-4"})}),(0,F.jsx)("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wide",children:e})]}),(r||n)&&(l?(0,F.jsx)(eb,{className:"w-3.5 h-3.5 text-slate-500"}):(0,F.jsx)(ef,{className:"w-3.5 h-3.5 text-slate-500"}))]}),(0,F.jsxs)("div",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-baseline gap-1",children:[t," ",(0,F.jsx)("span",{className:"text-xs text-slate-500 font-normal",children:"FTEs"})]}),l&&(r||n||s)&&(0,F.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700/50 space-y-1 text-xs",children:[void 0!==r&&(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-500",children:"Avg Salary"}),(0,F.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-mono",children:[r>=1e3?`$${(r/1e3).toFixed(1)}K`:`$${r.toFixed(0)}`,"/mo"]})]}),void 0!==n&&(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-500",children:"Turnover"}),(0,F.jsxs)("span",{className:(0,eh.default)("font-mono",n>.2?"text-red-600 dark:text-red-400":"text-slate-700 dark:text-slate-300"),children:[(100*n).toFixed(0),"%"]})]}),void 0!==s&&(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-500",children:"Utilization"}),(0,F.jsxs)("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:[(100*s).toFixed(0),"%"]})]})]})]}),i&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"h-6 w-px bg-slate-700"}),(0,F.jsxs)("div",{className:"relative",children:[z.default.Children.count(i)>1&&(0,F.jsx)("div",{className:"absolute top-0 h-px bg-slate-700",style:{left:"104px",right:"104px"}}),(0,F.jsx)("div",{className:"flex gap-8 items-start",children:i})]})]})]})};function ev({staffing:e,countryName:t}){let a=t=>e.find(e=>e.role===t)?.headcount||0,r=t=>e.find(e=>e.role===t)?.monthlyCost?e.find(e=>e.role===t).monthlyCost/Math.max(1,e.find(e=>e.role===t).headcount):void 0,n=a("shift-lead"),s=a("engineer"),i=a("technician"),l=a("admin"),o=a("janitor");return(0,F.jsxs)("div",{className:"p-8 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-x-auto",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-8 flex items-center gap-2",children:[(0,F.jsx)(Y.Users,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),"Organization Structure (",t,")"]}),(0,F.jsx)("div",{className:"flex flex-col items-center min-w-[800px]",children:(0,F.jsx)(ey,{role:"Facility Manager",count:1,color:"purple",salary:r("shift-lead")?1.5*r("shift-lead"):void 0,utilization:.95,children:(0,F.jsxs)(ey,{role:q.admin,count:l,color:"slate",salary:r("admin"),utilization:.8,children:[(0,F.jsx)(ey,{role:q["shift-lead"],count:n,color:"cyan",salary:r("shift-lead"),turnoverRate:.1,utilization:.9,children:(0,F.jsx)(ey,{role:q.engineer,count:s,color:"blue",salary:r("engineer"),turnoverRate:.15,utilization:.85})}),(0,F.jsx)(ey,{role:q.technician,count:i,color:"emerald",salary:r("technician"),turnoverRate:.2,utilization:.8}),(0,F.jsx)(ey,{role:q.janitor,count:o,color:"amber",salary:r("janitor"),turnoverRate:.25,utilization:.7})]})})}),(0,F.jsx)("p",{className:"text-center text-xs text-slate-500 mt-8 max-w-2xl mx-auto",children:"Click any node to see detailed salary, turnover, and utilization data. Hierarchy assumes standard Tier III operational structure."})]})}function ej({roster:e,year:t,shiftModel:a,staffingResults:r}){let n,s,i,l,o,c,d,u,m,x,h,p,f,b,g,y,[v,j]=z.default.useState("team-a"),k=z.default.useMemo(()=>(e.reduce((e,t)=>12===t.hours?e+10:8===t.hours?e+7.5:e,0)/52).toFixed(1),[e]);return(0,F.jsxs)("div",{className:"p-6 bg-slate-900/50 border border-slate-800 rounded-xl",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-5 h-5 text-cyan-400"}),"Annual Shift Pattern (",t,")"]}),(0,F.jsxs)("div",{className:"flex items-center gap-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-950 border border-slate-800 rounded-lg",children:[(0,F.jsx)(Z,{className:"w-4 h-4 text-emerald-400"}),(0,F.jsx)("span",{className:"text-slate-400 text-sm",children:"Avg:"}),(0,F.jsxs)("span",{className:"text-white font-mono font-bold",children:[k,"h / week"]})]}),(0,F.jsxs)("select",{className:"bg-slate-950 border border-slate-700 text-white text-sm rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-cyan-500 outline-none",value:v,onChange:e=>j(e.target.value),children:[(0,F.jsx)("option",{value:"team-a",children:"Team A"}),(0,F.jsx)("option",{value:"team-b",children:"Team B"}),(0,F.jsx)("option",{value:"team-c",children:"Team C"}),(0,F.jsx)("option",{value:"team-d",children:"Team D"})]})]})]}),(0,F.jsxs)("div",{className:"flex gap-4 mb-4 text-sm",children:["8h"===a?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-cyan-500 rounded"}),(0,F.jsx)("span",{className:"text-slate-300",children:"Morning (06-14)"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-blue-600 rounded"}),(0,F.jsx)("span",{className:"text-slate-300",children:"Afternoon (14-22)"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-indigo-600 rounded"}),(0,F.jsx)("span",{className:"text-slate-300",children:"Night (22-06)"})]})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-cyan-500 rounded"}),(0,F.jsx)("span",{className:"text-slate-300",children:"Day (06-18)"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-indigo-600 rounded"}),(0,F.jsx)("span",{className:"text-slate-300",children:"Night (18-06)"})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 bg-slate-800 border border-slate-700 rounded"}),(0,F.jsx)("span",{className:"text-slate-500",children:"Off Duty"})]})]}),(0,F.jsx)("div",{className:"overflow-x-auto pb-4",children:(0,F.jsx)("div",{className:"min-w-[1200px] grid grid-rows-12 gap-1",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((a,r)=>{let n=e.filter(e=>e.date.getMonth()===r);return(0,F.jsxs)("div",{className:"grid grid-cols-[60px_1fr] gap-2 items-center",children:[(0,F.jsx)("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider text-right pr-2",children:a}),(0,F.jsx)("div",{className:"flex gap-px h-12 bg-slate-950/50 rounded-md overflow-hidden border border-slate-800/50",children:n.map((a,r)=>{var n;let s,i,l,o=(n=a.date,s=0,"team-b"===v&&(s=2),"team-c"===v&&(s=4),"team-d"===v&&(s=6),l=((i=Math.floor((n.getTime()-new Date(t,0,0).getTime())/1e3/60/60/24)-1)+s)%e.length,e[l]||e[i]);return(0,F.jsx)("div",{className:(0,eh.default)("flex-1 relative group transition-colors",(e=>{switch(e){case"Morning":case"Day":return"bg-cyan-500/80 hover:bg-cyan-400";case"Afternoon":return"bg-blue-600/80 hover:bg-blue-500";case"Night":return"bg-indigo-600/80 hover:bg-indigo-500";case"Swing":return"bg-amber-500/80 hover:bg-amber-400";case"None":return"bg-slate-800/50 hover:bg-slate-800";default:return"bg-slate-800/50"}})(o.shiftType)),children:(0,F.jsxs)("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-900 text-xs p-2 rounded border border-slate-700 whitespace-nowrap hidden group-hover:block z-50 shadow-xl",children:[(0,F.jsx)("div",{className:"font-bold text-white",children:o.date.toDateString()}),(0,F.jsx)("div",{className:"text-cyan-400",children:"None"===o.shiftType?"OFF":o.shiftType+" Shift"}),(0,F.jsxs)("div",{className:"text-slate-500 pt-1 border-t border-slate-800 mt-1",children:["Hours: ",o.hours," | Cost: $",o.dailyCost?.toFixed(0)]})]})},r)})})]},a)})})}),(0,F.jsxs)("p",{className:"text-xs text-slate-500 mt-2 text-center",children:["Visualizing schedule for ",(0,F.jsx)("span",{className:"text-white font-medium",children:v.toUpperCase().replace("-"," ")}),". Each team = 1 Team Leader + 1 Engineer (2 pax/shift).","12h"===a?" 7":" 8","-day cycle."]}),r&&(n=(r.find(e=>"shift-lead"===e.role)?.headcount||0)+(r.find(e=>"engineer"===e.role)?.headcount||0),i=Math.max(1,Math.ceil(n/(s=r.find(e=>e.is24x7)?.schedule.teamsRequired||4))),o=i*(l="12h"===a?2:3)*("12h"===a?12:8),c=i*l*("12h"===a?10:7.5),d=r.find(e=>"technician"===e.role)?.headcount||0,u=r.find(e=>"admin"===e.role)?.headcount||0,h=8*(x=d+u+(m=r.find(e=>"janitor"===e.role)?.headcount||0)),p=7.5*x,f=o+h,b=c+p,g=261*f+104*o,y=261*b+104*c,(0,F.jsxs)("div",{className:"mt-6 p-5 bg-slate-950/50 border border-slate-800 rounded-xl",children:[(0,F.jsxs)("h4",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-cyan-400"}),"Man-Hours Summary"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mb-4 px-3 py-2 bg-slate-900/50 rounded-lg border border-slate-800/50",children:[(0,F.jsx)("span",{className:"text-cyan-400 font-medium",children:"Shift (24/7):"})," ",s," teams  ",i," pax (1 TL + 1 Eng) = ",n," FTE |",(0,F.jsx)("span",{className:"text-emerald-400 font-medium",children:"Day (M-F):"})," ",d," Tech + ",u," Supervisor + ",m," Facility = ",x," FTE"]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[(0,F.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Weekday (Mon-Fri)"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-cyan-400 font-mono",children:[b.toFixed(1),"h"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600",children:"effective / day"}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 mt-1",children:["Shift: ",c,"h + Day: ",p,"h"]})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Weekend (Sat-Sun)"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-indigo-400 font-mono",children:[c.toFixed(1),"h"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600",children:"effective / day"}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 mt-1",children:["Shift only: ",c,"h (no day staff)"]})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Scheduled / Day"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-amber-400 font-mono",children:[f.toFixed(0),"h"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600",children:"weekday (before breaks)"}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 mt-1",children:[o.toFixed(0),"h weekend"]})]}),(0,F.jsxs)("div",{className:"bg-cyan-950/30 rounded-lg p-3 border border-cyan-800/50",children:[(0,F.jsx)("div",{className:"text-[10px] text-cyan-500 uppercase font-bold",children:"Annual Total"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-white font-mono",children:[(y/1e3).toFixed(1),"K"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600",children:"effective man-hours / year"}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 mt-1",children:[(g/1e3).toFixed(1),"K scheduled"]})]})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"text-slate-500 uppercase font-bold border-b border-slate-800",children:[(0,F.jsx)("th",{className:"py-2 text-left",children:"Component"}),(0,F.jsx)("th",{className:"py-2 text-center",children:"Staff"}),(0,F.jsx)("th",{className:"py-2 text-right",children:"Hours/Day"}),(0,F.jsx)("th",{className:"py-2 text-right",children:"Days/Year"}),(0,F.jsx)("th",{className:"py-2 text-right",children:"Man-Hours/Year"})]})}),(0,F.jsxs)("tbody",{className:"divide-y divide-slate-800/50",children:[(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{className:"py-2 text-slate-300",children:"Shift Staff (24/7)"}),(0,F.jsx)("td",{className:"py-2 text-center text-cyan-400 font-mono",children:i*l}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:c.toFixed(1)}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:"365"}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-white font-bold",children:(365*c).toLocaleString()})]}),(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{className:"py-2 text-slate-300",children:"Day Staff (Mon-Fri)"}),(0,F.jsx)("td",{className:"py-2 text-center text-emerald-400 font-mono",children:x}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:p.toFixed(1)}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:261}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-white font-bold",children:(261*p).toLocaleString()})]}),(0,F.jsxs)("tr",{className:"border-t border-slate-700 font-bold",children:[(0,F.jsx)("td",{className:"py-2 text-white",children:"TOTAL"}),(0,F.jsx)("td",{className:"py-2 text-center text-cyan-400 font-mono",children:n+x}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:""}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-400",children:""}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-cyan-400",children:y.toLocaleString()})]})]})]})})]}))]})}function ek({staffing:e,currency:t,trainingCostMonthly:a=0,turnoverCostMonthly:r=0,vendorCostMonthly:n=0}){let s=e.reduce((e,t)=>e+t.breakdown.baseSalaries,0),i=e.reduce((e,t)=>e+t.breakdown.overtime,0),l=e.reduce((e,t)=>e+t.breakdown.socialSecurity,0),o=e.reduce((e,t)=>e+t.breakdown.allowances,0),c=e.reduce((e,t)=>e+t.headcount,0),d=.15*i,u=a||.03*s,m=r||.05*s,x=[{label:"Base Salary",value:s,color:"bg-blue-500",text:"text-blue-400",desc:"Core monthly salaries for all FTEs."},{label:"Overtime / Loading",value:i,color:"bg-amber-500",text:"text-amber-400",desc:"Variable costs from shift patterns & holidays."},{label:"Social Security",value:l,color:"bg-purple-500",text:"text-purple-400",desc:"Pension, Healthcare, BPJS contributions."},{label:"Allowances",value:o,color:"bg-emerald-500",text:"text-emerald-400",desc:"Transport, Meal, Housing allowances."},{label:"Shift Differential",value:d,color:"bg-cyan-500",text:"text-cyan-400",desc:"Night/weekend shift premium (est. 15% of OT)."},{label:"Training",value:u,color:"bg-teal-500",text:"text-teal-400",desc:"Ongoing certification & skills development."},{label:"Turnover Cost",value:m,color:"bg-rose-500",text:"text-rose-400",desc:"Recruitment, onboarding & lost productivity."},{label:"Vendor / Outsource",value:n,color:"bg-orange-500",text:"text-orange-400",desc:"External contractor & managed service fees."}].filter(e=>e.value>0),h=x.reduce((e,t)=>e+t.value,0),p=c>0?h/c:0,f=e=>h>0?e/h*100:0,b=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e),g=0;return(0,F.jsxs)("div",{className:"p-6 bg-slate-900/50 border border-slate-800 rounded-xl h-full flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,F.jsx)(J,{className:"w-5 h-5 text-emerald-400"}),"Cost Structure Decomposition"]}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsxs)("div",{className:"text-xs bg-slate-800 border border-slate-700 rounded px-2 py-1",children:[(0,F.jsx)("span",{className:"text-slate-400",children:"Per FTE: "}),(0,F.jsx)("span",{className:"text-emerald-400 font-bold",children:b(p)})]}),p>0&&(0,F.jsxs)("div",{className:`text-xs px-2 py-1 rounded ${p<=8500?"bg-emerald-950/30 text-emerald-400":"bg-amber-950/30 text-amber-400"}`,children:[p<=8500?"":""," vs $",8500..toLocaleString()," benchmark"]})]})]}),(0,F.jsxs)("div",{className:"flex-1 flex gap-1 items-end min-h-[280px] border-b border-slate-700 pb-0 relative",children:[(0,F.jsxs)("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between text-xs text-slate-600",children:[(0,F.jsx)("div",{className:"border-t border-slate-800/50 w-full pt-1",children:"100%"}),(0,F.jsx)("div",{className:"border-t border-slate-800/50 w-full pt-1",children:"75%"}),(0,F.jsx)("div",{className:"border-t border-slate-800/50 w-full pt-1",children:"50%"}),(0,F.jsx)("div",{className:"border-t border-slate-800/50 w-full pt-1",children:"25%"}),(0,F.jsx)("div",{className:"border-t border-slate-800/50 w-full pt-1",children:"0%"})]}),(0,F.jsxs)("div",{className:"w-16 mx-1 relative z-20 flex flex-col justify-end h-full",children:[x.map((e,t)=>(0,F.jsx)("div",{className:`w-full ${e.color} hover:opacity-80 transition-opacity relative group`,style:{height:`${f(e.value)}%`},children:(0,F.jsxs)("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-slate-900 border border-slate-700 p-2 rounded z-50 hidden group-hover:block w-36",children:[(0,F.jsx)("div",{className:"text-xs text-slate-400",children:e.label}),(0,F.jsx)("div",{className:"font-bold text-white",children:b(e.value)})]})},t)),(0,F.jsxs)("div",{className:"text-center mt-2 text-[10px] font-bold text-white leading-tight",children:["Total",(0,F.jsx)("br",{}),(0,F.jsx)("span",{className:"text-emerald-400 text-xs",children:b(h)})]})]}),x.map((e,t)=>{let a=g;g+=e.value;let r=f(e.value),n=f(a);return(0,F.jsxs)("div",{className:"flex-1 flex flex-col h-full z-10 group",children:[(0,F.jsx)("div",{className:"flex-1"}),(0,F.jsx)("div",{className:"whitespace-nowrap text-[10px] font-bold w-full text-center text-white mb-1",children:b(e.value)}),(0,F.jsx)("div",{className:`w-full ${e.color} rounded-t-sm relative`,style:{height:`${r}%`}}),n>0&&(0,F.jsx)("div",{style:{height:`${n}%`},className:"relative",children:(0,F.jsx)("div",{className:"absolute top-0 left-0 w-full border-t border-dashed border-slate-600/50"})}),(0,F.jsx)("div",{className:"text-[10px] text-center text-slate-400 h-10 flex items-center justify-center leading-tight px-0.5",children:e.label})]},t)})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mt-4",children:x.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-start gap-2",children:[(0,F.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${e.color} mt-1 flex-shrink-0`}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:`text-xs font-bold ${e.text}`,children:e.label}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:e.desc}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 font-mono",children:[f(e.value).toFixed(1),"%"]})]})]},t))}),(0,F.jsxs)("div",{className:"mt-4 pt-3 border-t border-slate-800 flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[(0,F.jsx)(Y.Users,{className:"w-3 h-3"}),(0,F.jsxs)("span",{children:[c," FTEs"]}),(0,F.jsx)("span",{className:"text-slate-600",children:""}),(0,F.jsxs)("span",{children:[b(p)," per person/month"]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-3 h-3 text-slate-500"}),(0,F.jsx)("span",{className:"text-slate-500",children:"Annual: "}),(0,F.jsx)("span",{className:"text-white font-bold",children:b(12*h)})]})]})]})}var ew=e.i(82969),eN=e.i(60837);let eC=(e,t=new Date().getFullYear())=>{let a=[],r=(e,t)=>{switch(e){case"Monthly":return Array.from({length:12},(e,a)=>Math.min(52,Math.max(1,Math.round(4.33*a)+t)));case"Quarterly":return[2+t,15+t,28+t,41+t];case"Bi-Annual":return[10+t,36+t];case"Annual":return[20+t];default:return[]}};return e.forEach((e,t)=>{let n=eN.ASSETS.find(t=>t.id===e.assetId);if(n){e.count;for(let s=0;s<e.count;s++){let i=`${n.name} #${s+1}`,l=2*s;n.maintenanceTasks.forEach(n=>{r(n.frequency,(t+l)%4).forEach(t=>{let r="#94a3b8";"Statutory"===n.criticality&&(r="#ef4444"),"Optimal"===n.criticality&&(r="#3b82f6");let o=(t+l)%52;0===o&&(o=52),a.push({id:`${e.assetId}-${s}-${n.id}-${o}`,assetId:e.assetId,assetName:i,task:n,weekNumber:o,durationHours:n.standardHours,techniciansRequired:2*("Specialist"!==n.category),color:r})})})}}}),a.sort((e,t)=>e.weekNumber-t.weekNumber)},eS=(e,t,a,r,n="perimeter",s="2N")=>{let i=[],l=(e,t)=>"N+1"===t?e+1:"2N"===t?2*e:"2N+1"===t?2*e+1:e+1;return eN.ASSETS.forEach(o=>{let c=0;switch(o.id){case"gen-set":c=l(Math.ceil(1.5*e/2500),4===t&&"N+1"===s?"2N":s);break;case"ups-module":c=l(Math.ceil(e/450),4===t&&"N+1"===s?"2N":s);break;case"lv-switchgear":c=Math.ceil(e/2500)*("N+1"===s?1:2);break;case"transformer":c=l(Math.ceil(1.3*e/2500),"N+1"===s?"N+1":"2N");break;case"chiller-air":"air"===a&&"dlc"!==n&&(c=Math.ceil(1.3*e/1e3)+1);break;case"pac-unit":c="perimeter"===n?Math.ceil(1.2*Math.ceil(e/100)):"in-row"===n?Math.ceil(1.25*Math.ceil(e/40)):0;break;case"fcu":c=Math.ceil(.2*r/50);break;case"fire-suppression":c=Math.ceil(e/1e3);break;case"vesda":c=Math.ceil(.6*r/200);break;case"fire-panel":c=1,r>5e3&&(c+=1);break;case"fuel-polisher":(c=Math.ceil(e/5e3))<1&&(c=1);break;case"bulk-tank":c=Math.ceil(48*e*.25/2e4);break;case"sand-filter":case"ro-unit":c=2*("air"!==a);break;case"dosing-pump":c=4*("air"!==a);break;case"bms-server":c=1,4===t&&(c=2);break;case"cctv":c=Math.ceil(r/50);break;case"access-control":c=Math.ceil(r/100);break;case"boom-gate":c=2+Math.ceil(r/2e3);break;case"loading-dock":(c=Math.ceil(e/2500))<1&&(c=1);break;case"mewp":c=r>5e3?2:1;break;case"vent-fan":c=Math.ceil(r/200);break;default:c=0}c>0&&i.push({assetId:o.id,count:c,isManual:!1})}),i},eP=e=>{let t=[],a={supervisor:"Supervisor","shift-lead":"Team Leader",engineer:"Engineer",technician:"Technician",admin:"Admin",janitor:"Facility Staff"};return e.forEach(e=>{let r=a[e.role]||e.role,n=e.schedule.teamsRequired>1,s=e.schedule.teamsRequired;for(let a=0;a<e.headcount;a++){let i=a%s,l=s>1?`Team ${String.fromCharCode(65+i)}`:"Day Shift",o="shift-lead"===e.role?"TL":"engineer"===e.role?"ENG":"technician"===e.role?"TECH":"supervisor"===e.role?"SUP":"janitor"===e.role?"FAC":"ADM";t.push({personId:`${o}-${a+1}`,personName:`${r} ${a+1}`,role:e.role,team:l,is24x7:n})}}),t},eM=(0,X.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function eO(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),{inputs:a}=(0,ew.useCapexStore)(),[r,n]=(0,z.useState)("all"),[s,i]=(0,z.useState)(0),[l,o]=(0,z.useState)("summary"),c=(0,z.useMemo)(()=>{let a;if(!e)return null;let r="12h"===t.shiftModel?"4on4off":"continental-8h",n=[B("shift-lead",t.headcount_ShiftLead,t.shiftModel,e,!0,r),B("engineer",t.headcount_Engineer,t.shiftModel,e,!0,r),B("technician",t.headcount_Technician,t.shiftModel,e,!1),B("supervisor",t.headcount_Admin,t.shiftModel,e,!1),B("janitor",t.headcount_Janitor,t.shiftModel,e,!1)],s=.6*t.itLoad,i="liquid"===t.coolingType||"rdhx"===t.coolingType?"pumped":"air",l=eC(eS(t.itLoad,4===t.tierLevel?4:3,i,Math.ceil(s),t.coolingTopology,t.powerRedundancy)),o=((e,t,a="4on4off")=>{let r=eP(t),n=W[a],s=[],i=new Map;r.forEach(e=>{if(e.is24x7)i.set(e.personId,((e,t,a=52)=>{let r=new Set;if(W[t],"continental-8h"===t){let t=e.charCodeAt(e.length-1)-65;for(let e=1;e<=a;e++)(e+t)%4!=0&&r.add(e)}else{let t=e.includes("A")||"Day Shift"===e;for(let e=1;e<=a;e++){let a=Math.floor((e-1)/2)%2;(t?0===a:1===a)&&r.add(e)}}return r})(e.team,a));else{let t=new Set;for(let e=1;e<=52;e++)t.add(e);i.set(e.personId,t)}});let l=new Map;r.forEach(e=>l.set(e.personId,new Map));let o=e.map(e=>({id:e.id,assetName:e.assetName,taskName:e.task.name,taskId:e.task.id,category:e.task.category,criticality:e.task.criticality,durationHours:e.durationHours,techsRequired:e.techniciansRequired,weekNumber:e.weekNumber,color:e.color}));return o.forEach(e=>{if(0===e.techsRequired)return;let t="Specialist"===e.category?["engineer","shift-lead"]:["technician","engineer","shift-lead"],a=r.filter(a=>t.includes(a.role)&&i.get(a.personId)?.has(e.weekNumber));if(0===a.length)return;a.sort((t,a)=>(l.get(t.personId)?.get(e.weekNumber)||0)-(l.get(a.personId)?.get(e.weekNumber)||0));let n=a.slice(0,Math.min(e.techsRequired,a.length)),s=e.durationHours/n.length;n.forEach(t=>{let a=l.get(t.personId);a.set(e.weekNumber,(a.get(e.weekNumber)||0)+s)})}),r.forEach(e=>{let t=i.get(e.personId),a=l.get(e.personId),r=e.is24x7?n.workDays*n.effectiveHours/n.cycleDays*7:37.5;t.forEach(t=>{let n=a.get(t)||0,i=o.filter(a=>a.weekNumber===t&&0!==a.techsRequired&&("Specialist"===a.category?["engineer","shift-lead"]:["technician","engineer","shift-lead"]).includes(e.role)),l=r>0?n/r*100:0;s.push({personId:e.personId,personName:e.personName,role:e.role,team:e.team,weekNumber:t,workOrders:i,totalWOHours:n,shiftHoursAvailable:r,utilizationPercent:l,status:l>90?"overloaded":l>40?"normal":"underloaded"})})}),s.sort((e,t)=>e.weekNumber-t.weekNumber||e.personId.localeCompare(t.personId))})(l,n,r),c=(a=new Map,o.forEach(e=>{a.has(e.personId)||a.set(e.personId,{personId:e.personId,personName:e.personName,role:e.role,team:e.team,weeklySchedule:[],annualStats:{totalWOCount:0,totalWOHours:0,avgWeeklyWOHours:0,busiestWeek:0,busiestWeekHours:0,workWeeks:0}}),a.get(e.personId).weeklySchedule.push({weekNumber:e.weekNumber,isOnDuty:!0,shiftType:e.team,workOrders:e.workOrders,totalWOHours:e.totalWOHours,availableHours:e.shiftHoursAvailable})}),a.forEach(e=>{let t=e.weeklySchedule,a=t.reduce((e,t)=>e+t.workOrders.length,0),r=t.reduce((e,t)=>e+t.totalWOHours,0),n=t.reduce((e,t)=>t.totalWOHours>e.totalWOHours?t:e,t[0]||{weekNumber:0,totalWOHours:0});e.annualStats={totalWOCount:a,totalWOHours:r,avgWeeklyWOHours:t.length>0?r/t.length:0,busiestWeek:n?.weekNumber||0,busiestWeekHours:n?.totalWOHours||0,workWeeks:t.length}}),Array.from(a.values()));return{assignments:o,profiles:c,staffList:eP(n),schedule:l,staffResults:n}},[e,t,a]);if(!e||!c)return(0,F.jsx)("div",{className:"text-slate-400 p-8",children:"Select a country to view work orders."});let{profiles:d,staffList:u,assignments:m,schedule:x}=c,h="all"===r?d:d.filter(e=>e.personId===r),p=d.map(e=>({personId:e.personId,personName:e.personName,role:e.role,team:e.team,totalHours:e.annualStats.totalWOHours,totalWOs:e.annualStats.totalWOCount,avgWeekly:e.annualStats.avgWeeklyWOHours,busiestWeek:e.annualStats.busiestWeek,workWeeks:e.annualStats.workWeeks})).sort((e,t)=>t.totalHours-e.totalHours),f=Math.max(...p.map(e=>e.totalHours),1),b=(0,z.useMemo)(()=>{let e=[];for(let t of d){let a=m.filter(e=>e.personId===t.personId),r={};for(let e of a)r[e.weekNumber]=e.utilizationPercent;let n=0,s=0,i=0,l=0;for(let e=1;e<=52;e++)(r[e]||0)>80?(0===i&&(l=e),++i>n&&(n=i,s=l)):i=0;n>=4&&e.push({personName:t.personName,personId:t.personId,consecutiveWeeks:n,startWeek:s})}return e.sort((e,t)=>t.consecutiveWeeks-e.consecutiveWeeks)},[d,m]);return(0,F.jsxs)("div",{className:"space-y-6",children:[b.length>0&&(0,F.jsx)("div",{className:(0,eh.default)("border rounded-xl p-4",b.some(e=>e.consecutiveWeeks>=8)?"bg-red-950/40 border-red-700/60":"bg-amber-950/40 border-amber-700/60"),children:(0,F.jsxs)("div",{className:"flex items-start gap-3",children:[(0,F.jsx)(eM,{className:(0,eh.default)("w-5 h-5 flex-shrink-0 mt-0.5",b.some(e=>e.consecutiveWeeks>=8)?"text-red-400":"text-amber-400")}),(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsxs)("h4",{className:(0,eh.default)("text-sm font-bold uppercase tracking-wider mb-2",b.some(e=>e.consecutiveWeeks>=8)?"text-red-400":"text-amber-400"),children:["Workload Overload Alert",(0,F.jsx)(ei,{content:"Staff members with utilization exceeding 80% for 4+ consecutive weeks. Sustained overload increases error risk, safety incidents, and staff burnout."})]}),(0,F.jsx)("div",{className:"space-y-1.5",children:b.map(e=>(0,F.jsxs)("div",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-white/5 rounded px-2 py-1 -mx-2 transition-colors",onClick:()=>{n(e.personId),o("calendar")},children:[(0,F.jsx)("span",{className:(0,eh.default)("w-2 h-2 rounded-full flex-shrink-0",e.consecutiveWeeks>=8?"bg-red-500":"bg-amber-500")}),(0,F.jsxs)("span",{className:"text-slate-300",children:[(0,F.jsx)("span",{className:"text-white font-medium",children:e.personName})," "," Utilization has exceeded 80% for"," ",(0,F.jsxs)("span",{className:(0,eh.default)("font-bold",e.consecutiveWeeks>=8?"text-red-400":"text-amber-400"),children:[e.consecutiveWeeks," consecutive weeks"]})," ","(starting Week ",e.startWeek,")"]})]},e.personId))}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Sustained high utilization increases error risk and staff burnout. Consider redistributing workload or adding headcount."})]})]})}),(0,F.jsxs)("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-slate-900/50 border border-slate-800 rounded-xl",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)(Y.Users,{className:"w-4 h-4 text-cyan-400"}),(0,F.jsx)(ei,{content:"Filter work orders by staff member. Select a person to view their individual workload, calendar, and assigned tasks."}),(0,F.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"bg-slate-800 border border-slate-700 text-white text-sm rounded-lg p-2 focus:ring-cyan-500",children:[(0,F.jsxs)("option",{value:"all",children:["All Staff (",u.length," people)"]}),u.map(e=>(0,F.jsxs)("option",{value:e.personId,children:[e.personName," (",e.team,")"]},e.personId))]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-4 h-4 text-cyan-400"}),(0,F.jsx)(ei,{content:"Filter by specific week number (1-52) to inspect work order distribution and utilization for that period."}),(0,F.jsxs)("select",{value:s,onChange:e=>i(Number(e.target.value)),className:"bg-slate-800 border border-slate-700 text-white text-sm rounded-lg p-2 focus:ring-cyan-500",children:[(0,F.jsx)("option",{value:0,children:"All Weeks"}),Array.from({length:52},(e,t)=>t+1).map(e=>(0,F.jsxs)("option",{value:e,children:["Week ",e]},e))]})]}),(0,F.jsx)("div",{className:"flex items-center bg-slate-800 rounded-lg border border-slate-700 overflow-hidden ml-auto",children:["summary","load","calendar"].map(e=>(0,F.jsx)("button",{onClick:()=>o(e),className:(0,eh.default)("px-3 py-2 text-xs font-medium capitalize transition-colors",l===e?"bg-cyan-600 text-white":"text-slate-400 hover:text-white"),children:e},e))})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 uppercase mb-1",children:["Total WOs/Year",(0,F.jsx)(ei,{content:"Total number of scheduled and reactive work orders generated annually based on your asset inventory and maintenance intervals."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-white",children:x.length}),(0,F.jsxs)("div",{className:"text-xs text-slate-400",children:[(x.length/52).toFixed(1),"/week avg"]})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 uppercase mb-1",children:["Total WO Hours",(0,F.jsx)(ei,{content:"Cumulative labor hours required to complete all work orders in a year. Includes diagnosis, execution, and close-out time per task."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-white",children:[d.reduce((e,t)=>e+t.annualStats.totalWOHours,0).toFixed(0),"h"]}),(0,F.jsx)("div",{className:"text-xs text-slate-400",children:"maintenance labor"})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 uppercase mb-1",children:["Avg Load/Person",(0,F.jsx)(ei,{content:"Average weekly maintenance hours per staff member. Values above 20h/wk may indicate understaffing or uneven workload distribution."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-white",children:[d.length>0?(d.reduce((e,t)=>e+t.annualStats.avgWeeklyWOHours,0)/d.length).toFixed(1):0,"h/wk"]}),(0,F.jsx)("div",{className:"text-xs text-slate-400",children:"maintenance work"})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 uppercase mb-1",children:["Staff Count",(0,F.jsx)(ei,{content:"Total number of operations staff available for work order assignment across all roles and shift teams."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-white",children:u.length}),(0,F.jsxs)("div",{className:"text-xs text-slate-400",children:[d.filter(e=>e.annualStats.totalWOCount>0).length," with WOs"]})]})]}),"summary"===l&&(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden",children:[(0,F.jsxs)("div",{className:"px-6 py-4 border-b border-slate-800",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Person-Level Annual Summary",(0,F.jsx)(ei,{content:"Comprehensive breakdown of work order assignments per staff member for the full year. Click any row to drill into their weekly calendar."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Work order load distribution per staff member"})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-950/50",children:[(0,F.jsxs)("th",{className:"px-4 py-3 text-left text-xs text-slate-500 font-medium",children:["Person",(0,F.jsx)(ei,{content:"Staff member name. Click any row to view their detailed weekly calendar and work order breakdown."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-left text-xs text-slate-500 font-medium",children:["Role",(0,F.jsx)(ei,{content:"Operational role assigned to this staff member (e.g., Shift Lead, Engineer, Technician, Supervisor, Janitor)."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-left text-xs text-slate-500 font-medium",children:["Team",(0,F.jsx)(ei,{content:"Shift team assignment (e.g., Team A, Team B). Teams rotate based on the configured shift pattern."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-center text-xs text-slate-500 font-medium",children:["WOs/Year",(0,F.jsx)(ei,{content:"Total number of work orders assigned to this person annually. Includes preventive, corrective, and statutory tasks."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-center text-xs text-slate-500 font-medium",children:["Total Hours",(0,F.jsx)(ei,{content:"Cumulative maintenance labor hours for this person across the entire year. High values may indicate overloading."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-center text-xs text-slate-500 font-medium",children:["Avg hrs/wk",(0,F.jsx)(ei,{content:"Average weekly maintenance hours. Calculated as total annual hours divided by working weeks. Sustained values above 20h suggest redistribution needed."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-center text-xs text-slate-500 font-medium",children:["Busiest Week",(0,F.jsx)(ei,{content:"The week number with the highest work order load for this person. Useful for identifying scheduling peaks and potential conflicts."})]}),(0,F.jsxs)("th",{className:"px-4 py-3 text-left text-xs text-slate-500 font-medium",children:["Load",(0,F.jsx)(ei,{content:"Visual bar showing relative workload compared to the busiest staff member. Red indicates over 80% of max load, amber over 50%."})]})]})}),(0,F.jsx)("tbody",{children:h.map(e=>{let t=f>0?e.annualStats.totalWOHours/f*100:0;return(0,F.jsxs)("tr",{className:"border-t border-slate-800/50 hover:bg-slate-800/30 cursor-pointer",onClick:()=>{n(e.personId),o("calendar")},children:[(0,F.jsx)("td",{className:"px-4 py-3 text-white font-medium",children:e.personName}),(0,F.jsx)("td",{className:"px-4 py-3 text-slate-400 capitalize",children:q[e.role]||e.role}),(0,F.jsx)("td",{className:"px-4 py-3",children:(0,F.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-slate-800 text-slate-300",children:e.team})}),(0,F.jsx)("td",{className:"px-4 py-3 text-center font-mono text-cyan-400",children:e.annualStats.totalWOCount}),(0,F.jsx)("td",{className:"px-4 py-3 text-center font-mono text-white",children:e.annualStats.totalWOHours.toFixed(1)}),(0,F.jsx)("td",{className:"px-4 py-3 text-center font-mono text-slate-300",children:e.annualStats.avgWeeklyWOHours.toFixed(1)}),(0,F.jsxs)("td",{className:"px-4 py-3 text-center font-mono text-amber-400",children:["Wk ",e.annualStats.busiestWeek]}),(0,F.jsx)("td",{className:"px-4 py-3 w-32",children:(0,F.jsx)("div",{className:"w-full bg-slate-800 rounded-full h-2",children:(0,F.jsx)("div",{className:(0,eh.default)("h-2 rounded-full transition-all",t>80?"bg-red-500":t>50?"bg-amber-500":"bg-emerald-500"),style:{width:`${Math.max(2,t)}%`}})})})]},e.personId)})})]})})]}),"load"===l&&(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-white mb-4",children:["Annual WO Hours Distribution",(0,F.jsx)(ei,{content:"Horizontal bar chart ranking all staff by total annual maintenance hours. Red bars indicate over 80% of max load, amber over 50%. Helps identify uneven workload distribution."})]}),(0,F.jsx)("div",{className:"space-y-2",children:p.map(e=>{let t=f>0?e.totalHours/f*100:0;return(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)("div",{className:"w-32 text-sm text-slate-300 truncate",children:e.personName}),(0,F.jsx)("div",{className:"flex-1 bg-slate-800 rounded-full h-6 relative overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-6 rounded-full flex items-center justify-end px-2 transition-all",t>80?"bg-gradient-to-r from-red-600 to-red-500":t>50?"bg-gradient-to-r from-amber-600 to-amber-500":"bg-gradient-to-r from-emerald-600 to-cyan-500"),style:{width:`${Math.max(3,t)}%`},children:(0,F.jsxs)("span",{className:"text-xs text-white font-mono",children:[e.totalHours.toFixed(0),"h"]})})}),(0,F.jsxs)("div",{className:"w-20 text-xs text-slate-500 text-right",children:[e.totalWOs," WOs"]})]},e.personId)})})]}),"calendar"===l&&"all"!==r&&(0,F.jsx)(eE,{profile:h[0],assignments:m.filter(e=>e.personId===r),selectedWeek:s}),"calendar"===l&&"all"===r&&(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 text-center",children:[(0,F.jsx)(Y.Users,{className:"w-8 h-8 text-slate-600 mx-auto mb-2"}),(0,F.jsx)("p",{className:"text-slate-400",children:"Select a specific person to view their weekly calendar."}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Use the dropdown above or click a row in the Summary view."})]})]})}function eE({profile:e,assignments:t,selectedWeek:a}){if(!e)return null;let r=a>0?t.filter(e=>e.weekNumber===a):t.filter(e=>e.workOrders.length>0).slice(0,20);return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4 flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"text-lg font-bold text-white",children:e.personName}),(0,F.jsxs)("p",{className:"text-sm text-slate-400",children:[e.team,"  ",q[e.role]||e.role," "]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-xl font-bold text-cyan-400",children:e.annualStats.totalWOCount}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["WOs/Year",(0,F.jsx)(ei,{content:"Total work orders assigned to this person for the year, including preventive, corrective, and statutory maintenance tasks."})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-xl font-bold text-white",children:[e.annualStats.totalWOHours.toFixed(0),"h"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["Total Hours",(0,F.jsx)(ei,{content:"Cumulative maintenance labor hours across all 52 weeks. Includes task execution, documentation, and close-out time."})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-xl font-bold text-amber-400",children:[e.annualStats.avgWeeklyWOHours.toFixed(1),"h"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["Avg/Week",(0,F.jsx)(ei,{content:"Mean weekly maintenance hours for this person. Calculated as total hours divided by active working weeks in the shift pattern."})]})]})]})]}),0===r.length?(0,F.jsx)("div",{className:"text-center py-8 text-slate-500",children:a>0?`No work orders assigned in Week ${a}`:"No work orders assigned to this person"}):(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(e=>(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-4 h-4 text-cyan-400"}),(0,F.jsxs)("span",{className:"font-bold text-white",children:["Week ",e.weekNumber]})]}),(0,F.jsxs)("span",{className:(0,eh.default)("px-2 py-1 rounded text-xs font-medium","overloaded"===e.status?"bg-red-900/50 text-red-400":"normal"===e.status?"bg-emerald-900/50 text-emerald-400":"bg-slate-800 text-slate-400"),children:[e.totalWOHours.toFixed(1),"h / ",e.shiftHoursAvailable.toFixed(0),"h"]})]}),(0,F.jsx)("div",{className:"space-y-2",children:e.workOrders.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-slate-950/50 rounded-lg border border-slate-800/50",children:[(0,F.jsx)("div",{className:"w-2 h-8 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,F.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,F.jsx)("div",{className:"text-sm text-white font-medium truncate",children:e.assetName}),(0,F.jsx)("div",{className:"text-xs text-slate-400 truncate",children:e.taskName})]}),(0,F.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,F.jsxs)("div",{className:"text-sm font-mono text-cyan-400",children:[e.durationHours,"h"]}),(0,F.jsx)("div",{className:(0,eh.default)("text-xs","Statutory"===e.criticality?"text-red-400":"Optimal"===e.criticality?"text-blue-400":"text-slate-500"),children:e.criticality})]})]},`${e.id}-${t}`))}),(0,F.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,F.jsx)("div",{className:"flex-1 bg-slate-800 rounded-full h-1.5",children:(0,F.jsx)("div",{className:(0,eh.default)("h-1.5 rounded-full",e.utilizationPercent>90?"bg-red-500":e.utilizationPercent>60?"bg-amber-500":"bg-emerald-500"),style:{width:`${Math.min(100,Math.max(2,e.utilizationPercent))}%`}})}),(0,F.jsxs)("span",{className:"text-xs text-slate-500",children:[e.utilizationPercent.toFixed(0),"% util",(0,F.jsx)(ei,{content:"Weekly utilization: ratio of assigned WO hours to available shift hours. Above 90% is overloaded (red), 60-90% is moderate (amber)."})]})]})]},`${e.personId}-${e.weekNumber}`))})]})}let eA=(0,X.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),eT=(0,X.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function eI({onExport:e,isGenerating:t,label:a="Export PDF",className:r}){return(0,F.jsxs)("button",{onClick:e,disabled:t,className:(0,eh.default)("flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-500 hover:to-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-cyan-900/20 transition-all disabled:opacity-50",r),children:[t?(0,F.jsx)(eT,{className:"w-4 h-4 animate-spin"}):(0,F.jsx)(eA,{className:"w-4 h-4"}),t?"Generating...":a]})}function eR(){let t,a,r,n,s,{selectedCountry:i,inputs:l,actions:o}=(0,$.useSimulationStore)(),c=H(),[d,u]=(0,z.useState)("overview"),[m,x]=(0,z.useState)(!1),h=(0,z.useMemo)(()=>K(l.itLoad,l.tierLevel,l.shiftModel,"outsourced"===l.staffingModel?"outsourced":l.staffingModel,l.maintenanceModel,l.maintenanceStrategy,l.hybridRatio??.5),[l.itLoad,l.tierLevel,l.shiftModel,l.staffingModel,l.maintenanceModel,l.maintenanceStrategy,l.hybridRatio]),p=(0,z.useMemo)(()=>{if(!i)return null;let e=[{role:"shift-lead",qtyKey:"headcount_ShiftLead",is24x7:!0,label:"Team Leaders"},{role:"engineer",qtyKey:"headcount_Engineer",is24x7:!0,label:"Engineers"},{role:"technician",qtyKey:"headcount_Technician",is24x7:!1,label:"Technicians"},{role:"admin",qtyKey:"headcount_Admin",is24x7:!1,label:"Supervisor"},{role:"janitor",qtyKey:"headcount_Janitor",is24x7:!1,label:"Facility Staff"}],t=e.map(e=>{let t=c[e.qtyKey]||1,a="outsourced"===l.staffingModel?"vendor":l.staffingModel;return B(e.role,t,l.shiftModel,i,e.is24x7,void 0,void 0,a,l.hybridRatio??.5)}),a=t.reduce((e,t)=>e+t.headcount,0),r=t.reduce((e,t)=>e+t.monthlyCost,0),n=t.filter(e=>e.schedule.teamsRequired>1).reduce((e,t)=>e+t.onShiftCount,0),s=e.filter(e=>e.is24x7).map(e=>{let t=l[e.qtyKey]||1,a="outsourced"===l.staffingModel?"vendor":l.staffingModel;return{label:e.label,comparison:((e,t,a,r=!0,n="in-house")=>{let s=U(e,t,a,r,n);return{model8h:s.model8h,model12h:s.model12h_4on4off,savingsMonthly:s.model8h.monthlyCost-s.model12h_4on4off.monthlyCost,savingsPercent:s.model8h.monthlyCost>0?(s.model8h.monthlyCost-s.model12h_4on4off.monthlyCost)/s.model8h.monthlyCost*100:0,headcountDiff:s.model8h.headcount-s.model12h_4on4off.headcount,weeklyHoursDiff:s.model8h.metrics.weeklyHoursEffective-s.model12h_4on4off.metrics.weeklyHoursEffective,recommendation:s.recommendation}})(e.role,t,i,e.is24x7,a)}}),o=s.reduce((e,t)=>e+t.comparison.model8h.monthlyCost,0),d=s.reduce((e,t)=>e+t.comparison.model12h.monthlyCost,0),u=((e,t=.04)=>{let a=[],r=JSON.parse(JSON.stringify(e));for(let e=0;e<=5;e++){let n=2025+e,s=r.reduce((e,t)=>e+12*t.monthlyCost,0),i=r.reduce((e,t)=>e+t.headcount,0),l={};r.forEach(e=>{l[e.role]={count:e.headcount,cost:12*e.monthlyCost}}),a.push({year:n,totalHeadcount:i,totalAnnualCost:s,roles:l}),r=r.map(e=>({...e,monthlyCost:e.monthlyCost*(1+t)}))}return a})(t,i.economy?.laborEscalation??.04),m=G("Duty Engineer",r/a,i,l.turnoverRate||.15,a);return{staffingResults:t,totalHeadcount:a,totalMonthlyCost:r,totalOnShift:n,projections:u,turnoverImpact:m,roster:V(2025,"12h"===l.shiftModel?"4on-3off":"3shift-8h"),shiftComparisons:s,total8hCost:o,total12hCost:d,totalSavings:o-d,roleConfigs:e}},[i,l,c]);return i&&p?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl backdrop-blur-sm shadow-sm dark:shadow-none gap-4",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(Y.Users,{className:"w-5 h-5 text-cyan-500 dark:text-cyan-400"}),"Staffing & Shift Optimization"]}),(0,F.jsxs)("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:["Reference Model: ",(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:"10MW DC (80% In-House)"}),"",(0,F.jsxs)("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono font-bold",children:[l.shiftModel.toUpperCase()," SHIFT"]}),"",(0,F.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-mono font-bold",children:[p.totalHeadcount," FTEs"]})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-800 p-1 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("button",{onClick:()=>u("overview"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","overview"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Overview"}),(0,F.jsx)("button",{onClick:()=>u("comparison"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","comparison"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"8h Vs 12h"}),(0,F.jsx)("button",{onClick:()=>u("org"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","org"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Org Chart"}),(0,F.jsx)("button",{onClick:()=>u("roster"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","roster"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Roster"}),(0,F.jsx)("button",{onClick:()=>u("waterfall"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","waterfall"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Waterfall"}),(0,F.jsx)("button",{onClick:()=>u("workorders"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all","workorders"===d?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Work Orders"})]}),(0,F.jsx)("div",{className:"flex gap-2",children:(0,F.jsx)(eI,{isGenerating:m,label:"Export Full Report (PDF)",onExport:async()=>{if(i&&p){x(!0);try{let{generateStaffingPDF:t}=await e.A(28094);await t(i,l.shiftModel,p.staffingResults,p.roster,[{title:"Staffing Overview",description:"Detailed model representation.",category:"Operational",severity:"low",recommendation:""}],p.shiftComparisons)}catch(e){console.error("Staffing PDF export failed:",e),alert(`PDF export failed: ${e?.message||"Unknown error"}`)}finally{x(!1)}}}})})]}),(0,F.jsxs)("div",{className:"p-4 bg-slate-100 dark:bg-slate-900/30 border border-slate-200 dark:border-slate-800 rounded-lg space-y-3",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium uppercase tracking-wide",children:"Headcount Composition"}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("button",{onClick:()=>{l.staffingAutoMode&&o.setInputs({headcount_ShiftLead:h.headcounts["shift-lead"],headcount_Engineer:h.headcounts.engineer,headcount_Technician:h.headcounts.technician,headcount_Admin:h.headcounts.admin,headcount_Janitor:h.headcounts.janitor}),o.toggleStaffingAutoMode()},className:(0,eh.default)("px-3 py-1 text-xs font-medium rounded-md border transition-all",l.staffingAutoMode?"bg-cyan-50 dark:bg-cyan-950/30 border-cyan-300 dark:border-cyan-700 text-cyan-700 dark:text-cyan-400":"bg-amber-50 dark:bg-amber-950/30 border-amber-300 dark:border-amber-700 text-amber-700 dark:text-amber-400"),children:l.staffingAutoMode?"AUTO":"MANUAL"}),(0,F.jsx)(ei,{content:"Auto mode calculates optimal headcount based on IT load and shift model. Manual mode lets you override individual role counts."})]})]}),(0,F.jsx)("div",{className:"grid grid-cols-5 gap-4",children:p.roleConfigs.map(e=>{let t="admin"===e.role?"admin":e.role;return(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-xs text-slate-500 uppercase flex items-center gap-1",children:[e.label," (Direct HC) ",(0,F.jsx)(ei,{content:"shift-lead"===e.role?"Team leaders managing shift operations and handovers":"engineer"===e.role?"Engineers handling critical infrastructure systems":"technician"===e.role?"Technicians for day-shift maintenance tasks":"admin"===e.role?"Supervisors overseeing daily operations":"Facility support staff (cleaning, logistics)"})]}),l.staffingAutoMode?(0,F.jsx)("div",{className:"w-full text-sm bg-slate-200 dark:bg-slate-800 border border-cyan-300 dark:border-cyan-800 rounded p-1 text-slate-900 dark:text-white font-bold text-center cursor-not-allowed",children:c[e.qtyKey]}):(0,F.jsx)("input",{type:"number",min:"1",max:"50",className:"w-full text-sm bg-white dark:bg-slate-950 border border-slate-300 dark:border-slate-700 rounded p-1 text-slate-900 dark:text-white",value:l[e.qtyKey],onChange:t=>o.setInputs({[e.qtyKey]:Math.max(1,Number(t.target.value))})}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-600",children:e.is24x7?"24/7 Shift":"Day Shift (M-F)"}),l.staffingAutoMode&&h.rationale[t]&&(0,F.jsx)("div",{className:"text-[9px] text-cyan-600 dark:text-cyan-500 leading-tight",children:h.rationale[t]})]},e.role)})})]}),"overview"===d&&(0,F.jsxs)("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col",children:[(0,F.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,F.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",children:(0,F.jsx)(Y.Users,{className:"w-5 h-5"})}),(0,F.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:["Total Headcount ",(0,F.jsx)(ei,{content:"Total full-time equivalent employees across all roles and shifts"})]})]}),(0,F.jsxs)("div",{className:"mt-auto",children:[(0,F.jsxs)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[p.totalHeadcount," ",(0,F.jsx)("span",{className:"text-sm font-normal text-slate-500",children:"FTEs"})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[p.totalOnShift," on-shift at any time"]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col",children:[(0,F.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,F.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-600 dark:text-amber-400",children:(0,F.jsx)(J,{className:"w-5 h-5"})}),(0,F.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:["Monthly Payroll ",(0,F.jsx)(ei,{content:"Total monthly cost including base salary, shift allowances, overtime, and benefits"})]})]}),(0,F.jsxs)("div",{className:"mt-auto",children:[(0,F.jsx)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white truncate",title:eo(p.totalMonthlyCost),children:eo(p.totalMonthlyCost)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Year 1 Baseline (","8h"===l.shiftModel?"Continental":"4-on/3-off",")"]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col",children:[(0,F.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,F.jsx)("div",{className:"p-2 rounded-lg bg-cyan-500/10 text-cyan-600 dark:text-cyan-400",children:(0,F.jsx)(Z,{className:"w-5 h-5"})}),(0,F.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:["Avg Weekly Hours ",(0,F.jsx)(ei,{content:"Average scheduled hours per person per week including handover overlap"})]})]}),(0,F.jsxs)("div",{className:"mt-auto",children:[(0,F.jsxs)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["8h"===l.shiftModel?"42":"40","h ",(0,F.jsx)("span",{className:"text-sm font-normal text-slate-500",children:"eff./person"})]}),(0,F.jsx)("div",{className:"text-xs text-amber-500 mt-1",children:"8h"===l.shiftModel?"1.5h OT (handover)":"Zero OT (12h compressed)"})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col",children:[(0,F.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,F.jsx)("div",{className:"p-2 rounded-lg bg-indigo-500/10 text-indigo-600 dark:text-indigo-400",children:(0,F.jsx)(ee.TrendingUp,{className:"w-5 h-5"})}),(0,F.jsxs)("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:["5-Year TCO ",(0,F.jsx)(ei,{content:"Total Cost of Ownership over 5 years with labor escalation factored in"})]})]}),(0,F.jsxs)("div",{className:"mt-auto",children:[(0,F.jsx)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white truncate",title:eo(p.projections.reduce((e,t)=>e+t.totalAnnualCost,0)),children:eo(p.projections.reduce((e,t)=>e+t.totalAnnualCost,0))}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"2025-2030 Cumulative"})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-4 h-4 text-cyan-400"}),"Active Schedule Pattern"]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("dt",{className:"text-slate-600 dark:text-slate-500 text-xs uppercase flex items-center gap-1",children:["Pattern ",(0,F.jsx)(ei,{content:"The shift rotation pattern defining work/rest sequences. Determines coverage, fatigue risk, and overtime exposure."})]}),(0,F.jsx)("dd",{className:"text-slate-900 dark:text-white font-mono font-bold",children:p.staffingResults[0]?.schedule.pattern})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("dt",{className:"text-slate-600 dark:text-slate-500 text-xs uppercase flex items-center gap-1",children:["Cycle Length ",(0,F.jsx)(ei,{content:"Total days in one complete shift rotation cycle. 4-on/3-off = 7 days, Continental 3-shift = 8 days."})]}),(0,F.jsx)("dd",{className:"text-slate-900 dark:text-white font-mono font-bold",children:"8h"===l.shiftModel?"8 days":"7 days"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("dt",{className:"text-slate-600 dark:text-slate-500 text-xs uppercase flex items-center gap-1",children:["Work Days / Cycle ",(0,F.jsx)(ei,{content:"Number of working days within one rotation cycle. Fewer work days per cycle generally improves work-life balance."})]}),(0,F.jsx)("dd",{className:"text-slate-900 dark:text-white font-mono font-bold",children:"8h"===l.shiftModel?"6 days":"4 days"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("dt",{className:"text-slate-600 dark:text-slate-500 text-xs uppercase flex items-center gap-1",children:["Shift Duration ",(0,F.jsx)(ei,{content:"Length of each individual shift. 8h shifts require 3 rotations per day; 12h shifts require 2 rotations per day."})]}),(0,F.jsx)("dd",{className:"text-slate-900 dark:text-white font-mono font-bold",children:"8h"===l.shiftModel?"8h":"12h"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("dt",{className:"text-slate-600 dark:text-slate-500 text-xs uppercase flex items-center gap-1",children:["Teams Required ",(0,F.jsx)(ei,{content:"Minimum number of independent teams needed to provide continuous 24/7 coverage under this shift pattern."})]}),(0,F.jsx)("dd",{className:"text-slate-900 dark:text-white font-mono font-bold",children:"4"})]})]}),(0,F.jsxs)("div",{className:"mt-6",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase font-bold mb-2",children:"Shift Types"}),"8h"===l.shiftModel?(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-1 h-12 rounded-lg overflow-hidden",children:[(0,F.jsxs)("div",{className:"bg-amber-500/10 border-l-4 border-amber-500 flex items-center justify-center text-xs font-bold text-amber-600 dark:text-amber-500",title:"Morning shift: 06:00-14:00. Highest staffing density for planned maintenance windows.",children:[" Morning",(0,F.jsx)("span",{className:"block text-[9px] font-normal ml-2 opacity-70",children:"06:00  14:00"})]}),(0,F.jsxs)("div",{className:"bg-orange-500/10 border-l-4 border-orange-500 flex items-center justify-center text-xs font-bold text-orange-600 dark:text-orange-500",title:"Afternoon shift: 14:00-22:00. Overlap with morning shift enables handover briefings.",children:[" Afternoon",(0,F.jsx)("span",{className:"block text-[9px] font-normal ml-2 opacity-70",children:"14:00  22:00"})]}),(0,F.jsxs)("div",{className:"bg-indigo-500/10 border-l-4 border-indigo-500 flex items-center justify-center text-xs font-bold text-indigo-600 dark:text-indigo-500",title:"Night shift: 22:00-06:00. Skeleton crew for monitoring; attracts night-shift allowance.",children:[" Night",(0,F.jsx)("span",{className:"block text-[9px] font-normal ml-2 opacity-70",children:"22:00  06:00"})]})]}):(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-1 h-12 rounded-lg overflow-hidden",children:[(0,F.jsxs)("div",{className:"bg-cyan-500/10 border-l-4 border-cyan-500 flex items-center justify-center text-xs font-bold text-cyan-600 dark:text-cyan-500",title:"Day shift: 06:00-18:00. 12-hour compressed shift covering all daytime operations and maintenance.",children:[" Day",(0,F.jsx)("span",{className:"block text-[9px] font-normal ml-2 opacity-70",children:"06:00  18:00"})]}),(0,F.jsxs)("div",{className:"bg-indigo-500/10 border-l-4 border-indigo-500 flex items-center justify-center text-xs font-bold text-indigo-600 dark:text-indigo-500",title:"Night shift: 18:00-06:00. 12-hour overnight monitoring; attracts night-shift allowance.",children:[" Night",(0,F.jsx)("span",{className:"block text-[9px] font-normal ml-2 opacity-70",children:"18:00  06:00"})]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:(0,F.jsx)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:"Detailed Role Breakdown (Monthly)"})}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-500 uppercase font-bold",children:[(0,F.jsx)("th",{className:"px-4 py-3 text-left",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Role ",(0,F.jsx)(ei,{content:"Job function category (Engineers, Technicians, Security, Facilities, Management)."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-center",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Employed ",(0,F.jsx)(ei,{content:"Total headcount employed for this role across all shifts."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-center",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["On-Shift ",(0,F.jsx)(ei,{content:"Number of staff on duty per shift after accounting for rotation and shrinkage."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-left",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Schedule ",(0,F.jsx)(ei,{content:"Shift rotation pattern assigned to this role."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Base ",(0,F.jsx)(ei,{content:"Base monthly salary before shift allowances and overtime."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Shift Allow. ",(0,F.jsx)(ei,{content:"Additional pay for night shifts, weekends, and holiday coverage. Varies by country labor law."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["OT ",(0,F.jsx)(ei,{content:"Estimated monthly overtime cost based on average overtime hours and local overtime multiplier."})]})}),(0,F.jsx)("th",{className:"px-4 py-3 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Total ",(0,F.jsx)(ei,{content:"Total monthly cost per employee: base salary + shift allowance + overtime."})]})})]})}),(0,F.jsxs)("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700/50",children:[p.staffingResults.map((e,t)=>(0,F.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors",children:[(0,F.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-slate-200",children:q[e.role]||e.role}),(0,F.jsx)("td",{className:"px-4 py-3 text-center text-cyan-600 dark:text-cyan-400 font-bold",children:e.headcount}),(0,F.jsx)("td",{className:"px-4 py-3 text-center text-slate-500",children:e.onShiftCount}),(0,F.jsx)("td",{className:"px-4 py-3 text-slate-500",children:e.is24x7?"8h"===l.shiftModel?"Continental 3-Shift (8h)":"4-Team 12h (4on/3off)":"Mon-Fri 08:00-17:00"}),(0,F.jsx)("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:eo(e.breakdown.baseSalaries)}),(0,F.jsx)("td",{className:"px-4 py-3 text-right text-cyan-600 dark:text-cyan-400",children:eo(e.breakdown.shiftAllowance)}),(0,F.jsx)("td",{className:"px-4 py-3 text-right text-amber-600 dark:text-amber-500",children:e.breakdown.overtime>0?eo(e.breakdown.overtime):""}),(0,F.jsx)("td",{className:"px-4 py-3 text-right font-bold text-emerald-600 dark:text-emerald-400",children:eo(e.monthlyCost)})]},t)),(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-800/80 font-bold text-slate-900 dark:text-white border-t border-slate-300 dark:border-slate-600",children:[(0,F.jsx)("td",{className:"px-4 py-3",children:"TOTAL"}),(0,F.jsx)("td",{className:"px-4 py-3 text-center text-cyan-700 dark:text-cyan-400",children:p.totalHeadcount}),(0,F.jsx)("td",{className:"px-4 py-3 text-center",children:p.totalOnShift}),(0,F.jsx)("td",{className:"px-4 py-3"}),(0,F.jsx)("td",{className:"px-4 py-3 text-right",children:eo(p.staffingResults.reduce((e,t)=>e+t.breakdown.baseSalaries,0))}),(0,F.jsx)("td",{className:"px-4 py-3 text-right",children:eo(p.staffingResults.reduce((e,t)=>e+t.breakdown.shiftAllowance,0))}),(0,F.jsx)("td",{className:"px-4 py-3 text-right text-amber-600 dark:text-amber-500",children:eo(p.staffingResults.reduce((e,t)=>e+t.breakdown.overtime,0))}),(0,F.jsx)("td",{className:"px-4 py-3 text-right text-emerald-600 dark:text-emerald-400",children:eo(p.totalMonthlyCost)})]})]})]})})]}),(0,F.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-800/50 rounded-xl border border-slate-300 dark:border-slate-700 p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-4",children:"5-Year Cost Projection (USD)"}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"text-slate-500 font-bold uppercase border-b border-slate-300 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"py-2 text-left",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Year ",(0,F.jsx)(ei,{content:"Calendar year of the projection period."})]})}),(0,F.jsx)("th",{className:"py-2 text-left",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Headcount ",(0,F.jsx)(ei,{content:"Projected total full-time equivalents for each year."})]})}),(0,F.jsx)("th",{className:"py-2 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Annual Cost ",(0,F.jsx)(ei,{content:"Total projected annual staffing cost including all allowances and overtime."})]})}),(0,F.jsx)("th",{className:"py-2 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Escalation ",(0,F.jsx)(ei,{content:"Year-over-year percentage increase driven by labor cost escalation rates for the selected country."})]})})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-300 dark:divide-slate-700/50",children:p.projections.map((e,t)=>(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{className:"py-2 font-mono text-cyan-600 dark:text-cyan-400",children:e.year}),(0,F.jsxs)("td",{className:"py-2 text-slate-600 dark:text-slate-400",children:[e.headcount," FTEs"]}),(0,F.jsx)("td",{className:"py-2 text-right font-bold text-slate-900 dark:text-white",children:eo(e.totalAnnualCost)}),(0,F.jsx)("td",{className:"py-2 text-right text-slate-500",children:0===t?"-":`+${((e.totalAnnualCost/p.projections[t-1].totalAnnualCost-1)*100).toFixed(1)}%`})]},e.year))})]})})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-6 mt-6",children:[(0,F.jsxs)("h3",{className:"text-md font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(en.Activity,{className:"w-4 h-4 text-cyan-500 dark:text-cyan-400"}),"Efficiency Metrics"]}),(0,F.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:(p.staffingResults.reduce((e,t)=>e+t.headcount,0),t=p.staffingResults.reduce((e,t)=>e+t.monthlyCost,0),a=p.staffingResults.reduce((e,t)=>e+t.breakdown.overtime,0),r=i.labor?.shrinkageFactor??.15,(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["Utilization Rate ",(0,F.jsx)(ei,{content:"Net productive hours as a percentage of total scheduled hours, after accounting for shrinkage (breaks, training, admin)."})]}),(0,F.jsxs)("div",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:[((1-r)*100).toFixed(0),"%"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"Net productive hours"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["Cost per MW ",(0,F.jsx)(ei,{content:"Total monthly staffing cost divided by IT load in MW. Benchmark for comparing staffing efficiency across facilities."})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400",children:eo(t/1)}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"Staff cost / MW IT load"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["OT Ratio ",(0,F.jsx)(ei,{content:"Overtime cost as a percentage of total payroll. Values above 15% indicate potential scheduling issues."})]}),(0,F.jsxs)("div",{className:`text-xl font-bold ${t>0&&a/t>.15?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"}`,children:[t>0?(a/t*100).toFixed(1):0,"%"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"Overtime as % of total"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["Shrinkage Loss ",(0,F.jsx)(ei,{content:"Monthly cost impact of non-productive time including breaks, training, sick leave, and admin duties."})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-rose-600 dark:text-rose-400",children:eo(t*r)}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500",children:[(100*r).toFixed(0),"% factor"]})]})]}))})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-6 mt-6",children:[(0,F.jsxs)("h3",{className:"text-md font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),"Headcount Sensitivity Analysis",(0,F.jsx)(ei,{content:"Impact analysis showing how percentage changes in headcount affect monthly staffing costs."})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mb-3",children:"Impact of headcount changes on monthly staffing costs"}),(0,F.jsx)("div",{className:"space-y-2",children:(n=p.staffingResults.reduce((e,t)=>e+t.monthlyCost,0),s=p.staffingResults.reduce((e,t)=>e+t.headcount,0),[-20,-10,0,10,20].map(e=>{let t=n*(1+e/100),a=Math.round(s*(1+e/100)),r=0===e;return(0,F.jsxs)("div",{className:`flex items-center gap-3 px-3 py-2 rounded-lg ${r?"bg-cyan-50 dark:bg-cyan-950/30 border border-cyan-200 dark:border-cyan-800/50":"bg-white dark:bg-slate-800/30"}`,children:[(0,F.jsxs)("div",{className:`w-14 text-xs font-mono ${e<0?"text-emerald-600 dark:text-emerald-400":e>0?"text-rose-600 dark:text-rose-400":"text-cyan-600 dark:text-cyan-400"}`,children:[e>0?"+":"",e,"%"]}),(0,F.jsx)("div",{className:"flex-1 h-2 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:`h-full rounded-full ${e<0?"bg-emerald-500":e>0?"bg-rose-500":"bg-cyan-500"}`,style:{width:`${t/(1.25*n)*100}%`}})}),(0,F.jsx)("div",{className:"w-20 text-xs font-mono text-right text-slate-900 dark:text-white",children:eo(t)}),(0,F.jsxs)("div",{className:"w-16 text-[10px] text-slate-500 text-right",children:[a," FTEs"]})]},e)}))})]})]})," ","comparison"===d&&(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:(0,eh.default)("p-6 rounded-xl border",p.totalSavings>0?"bg-emerald-950/30 border-emerald-700":"bg-amber-950/30 border-amber-700"),children:[(0,F.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[p.totalSavings>0?(0,F.jsx)(et,{className:"w-6 h-6 text-emerald-400"}):(0,F.jsx)(ea,{className:"w-6 h-6 text-amber-400"}),(0,F.jsx)("h3",{className:"text-lg font-bold text-white",children:p.totalSavings>0?`12h (4on/4off) saves ${eo(p.totalSavings)}/month vs 8h`:`8h (Continental) is ${eo(Math.abs(p.totalSavings))}/month cheaper`})]}),(0,F.jsx)("p",{className:"text-sm text-slate-300",children:p.totalSavings>0?"The 4on/4off compressed schedule eliminates overtime entirely, requires fewer teams, and provides better work-life balance with 4 consecutive days off. This is the industry-standard model for 24/7 data center operations.":"The Continental 8h pattern distributes work across 4 teams with shorter daily exposure, which may be preferred for certain regulatory environments."})]}),(0,F.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden",children:[(0,F.jsx)("div",{className:"px-6 py-4 border-b border-slate-800",children:(0,F.jsxs)("h3",{className:"font-semibold text-slate-200 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-cyan-400"}),"Shift Model Comparison (24/7 Staff Only)"]})}),(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{className:"bg-slate-950/50 text-slate-400 uppercase text-xs",children:(0,F.jsxs)("tr",{children:[(0,F.jsx)("th",{className:"px-6 py-3 text-left",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Metric ",(0,F.jsx)(ei,{content:"Key performance indicator being compared across shift models."})]})}),(0,F.jsx)("th",{className:"px-6 py-3 text-center",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["8h (Continental) ",(0,F.jsx)(ei,{content:"Traditional 3-shift Continental pattern: Morning/Afternoon/Night with 4 teams rotating across 8-day cycles."})]})}),(0,F.jsx)("th",{className:"px-6 py-3 text-center",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["12h (4on/4off) ",(0,F.jsx)(ei,{content:"Compressed 12-hour schedule: 4 days on, 4 days off. Two shifts (Day/Night) with 2 teams each."})]})}),(0,F.jsx)("th",{className:"px-6 py-3 text-center",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Difference ",(0,F.jsx)(ei,{content:"Delta between 8h and 12h models. Green indicates the 12h model is more favorable."})]})})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-800",children:[{label:"Teams Required",v8:p.shiftComparisons[0]?.comparison.model8h.schedule.teamsRequired||4,v12:p.shiftComparisons[0]?.comparison.model12h.schedule.teamsRequired||2,fmt:e=>`${e} teams`},{label:"Schedule Pattern",v8:"2-2-2-2",v12:"4on/4off",fmt:e=>e},{label:"Weekly Hours/Person",v8:p.shiftComparisons[0]?.comparison.model8h.metrics.weeklyHoursScheduled||43.5,v12:p.shiftComparisons[0]?.comparison.model12h.metrics.weeklyHoursScheduled||42,fmt:e=>`${e}h`},{label:"Overtime Hours/Person",v8:p.shiftComparisons[0]?.comparison.model8h.metrics.overtimeHoursPerPerson||1.5,v12:p.shiftComparisons[0]?.comparison.model12h.metrics.overtimeHoursPerPerson||0,fmt:e=>0===e?" ZERO":`${e}h`},{label:"Total Monthly Cost (Shift Staff)",v8:p.total8hCost,v12:p.total12hCost,fmt:e=>eo(e)}].map(e=>(0,F.jsxs)("tr",{className:"hover:bg-slate-800/30",children:[(0,F.jsx)("td",{className:"px-6 py-3 text-slate-300 font-medium",children:e.label}),(0,F.jsx)("td",{className:"px-6 py-3 text-center font-mono text-slate-400",children:"function"==typeof e.fmt?e.fmt(e.v8):e.v8}),(0,F.jsx)("td",{className:"px-6 py-3 text-center font-mono text-cyan-400",children:"function"==typeof e.fmt?e.fmt(e.v12):e.v12}),(0,F.jsx)("td",{className:"px-6 py-3 text-center font-mono",children:"number"==typeof e.v8&&"number"==typeof e.v12?(0,F.jsx)("span",{className:e.v12<e.v8?"text-emerald-400":e.v12>e.v8?"text-red-400":"text-slate-500",children:e.v12<e.v8?` ${e.fmt(e.v8-e.v12)}`:e.v12>e.v8?` ${e.fmt(e.v12-e.v8)}`:""}):(0,F.jsx)("span",{className:"text-slate-500",children:""})})]},e.label))})]})]}),p.shiftComparisons.map(e=>(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsx)("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:e.label}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,F.jsxs)("div",{className:"p-3 bg-white dark:bg-slate-950/50 rounded-lg",children:[(0,F.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-500 uppercase mb-1",children:"8h Continental"}),(0,F.jsx)("div",{className:"text-lg font-mono text-slate-900 dark:text-white",children:eo(e.comparison.model8h.monthlyCost)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[e.comparison.model8h.headcount," FTEs, ",e.comparison.model8h.metrics.overtimeHoursPerPerson,"h OT/wk"]})]}),(0,F.jsxs)("div",{className:"p-3 bg-cyan-50 dark:bg-cyan-950/20 rounded-lg border border-cyan-200 dark:border-cyan-900/30",children:[(0,F.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-500 uppercase mb-1",children:"12h 4on/4off"}),(0,F.jsx)("div",{className:"text-lg font-mono text-cyan-600 dark:text-cyan-400",children:eo(e.comparison.model12h.monthlyCost)}),(0,F.jsxs)("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:[e.comparison.model12h.headcount," FTEs, Zero OT"]})]})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:e.comparison.recommendation})]},e.label))]})," ","org"===d&&(0,F.jsx)(ev,{staffing:p.staffingResults,countryName:i.name})," ","roster"===d&&(0,F.jsx)(ej,{roster:p.roster,year:2025,shiftModel:l.shiftModel,staffingResults:p.staffingResults})," ","waterfall"===d&&(0,F.jsx)("div",{className:"h-[600px]",children:(0,F.jsx)(ek,{staffing:p.staffingResults,currency:"USD"})})," ","workorders"===d&&(0,F.jsx)(eO,{})," "]}):(0,F.jsx)("div",{children:"Loading..."})}var eD=e.i(32505);let eL=e=>e?.risk?.downtimeCostPerMin??5e3,e_=(e,t,a,r,n="in-house",s=.5)=>{let i,l,o,c={internal:r?.labor?.laborRatePerHour??45,emergency:(r?.labor?.laborRatePerHour??45)*6.5},d=eL(r),u="in-house"===n?1:"hybrid"===n?Math.max(.1,s):.1,m=u+(1-u)*1.35,x=t.reduce((e,t)=>e+t.durationHours,0)*c.internal*m,h=(i=0,e.forEach(e=>{let t=eN.ASSETS.find(t=>t.id===e.assetId);t&&(t.consumables&&t.consumables.forEach(t=>{let a=12/t.baseLifeMonths;i+=a*t.costPerUnit*e.count}),t.criticalSpares&&t.criticalSpares.forEach(t=>{let a=Math.max(t.minStock,Math.ceil(e.count*t.stockPercent))*t.costPerUnit*e$,r=e.count*t.stockPercent*.3*t.costPerUnit;i+=a+r}))}),i),p=4===a?1.2:2.5,f=45*p*d*.01,b=x+h+f,g=3.5*p,y=90*g*d*.03,v=6*g*c.emergency*m,j=.6*h,k=2500*g,w=v+j+k+y,N=(l=0,e.forEach(e=>{let t=eN.ASSETS.find(t=>t.id===e.assetId);if(!t)return;let a=t.category;"Critical Power"===a?l+=3e3*e.count:"Cooling"===a?l+=2e3*e.count:"Fire Safety"===a?l+=500*e.count:l+=250*e.count}),l),C=.75*x,S=.85*h,P=.3*p,M=30*P*d*.005,O=C+S+M,E=(e,t=0)=>{let a=t;for(let t=0;t<5;t++)a+=e*Math.pow(1.03,t)/Math.pow(1.08,t+1);return a},A=[{id:"reactive",label:"Reactive (Run-to-Failure)",description:"No scheduled maintenance. Fix equipment only when it breaks. Lowest upfront cost but highest risk.",annualLaborCost:v,annualPartsCost:j+k,annualDowntimeCost:y,unplannedFailures:g,sensorCapex:0,totalAnnualCost:w,fiveYearNPV:E(w),taskReduction:-100,reliabilityIndex:35,color:"#ef4444"},{id:"planned",label:"Planned Preventive (SFG20)",description:"Industry-standard scheduled maintenance per SFG20/ASHRAE. Balanced cost and reliability.",annualLaborCost:x,annualPartsCost:h,annualDowntimeCost:f,unplannedFailures:p,sensorCapex:0,totalAnnualCost:b,fiveYearNPV:E(b),taskReduction:0,reliabilityIndex:72,color:"#3b82f6"},{id:"predictive",label:"Predictive (CBM)",description:"Condition-based monitoring with IoT sensors. Highest upfront cost, lowest long-term risk.",annualLaborCost:C,annualPartsCost:S,annualDowntimeCost:M,unplannedFailures:P,sensorCapex:N,totalAnnualCost:O,fiveYearNPV:E(O,N),taskReduction:25,reliabilityIndex:92,color:"#10b981"}],T=[...A].sort((e,t)=>e.fiveYearNPV-t.fiveYearNPV),I=T[0].id,R=T[T.length-1],D=T[0];return o="predictive"===I?`Predictive (CBM) saves ${eB(R.fiveYearNPV-D.fiveYearNPV)} over 5 years vs ${R.label}. Sensor CAPEX of ${eB(N)} pays back in ${(N/(b-O)).toFixed(1)} years.`:"planned"===I?`Planned Preventive is optimal for this configuration. CBM CAPEX of ${eB(N)} does not justify the marginal savings at current scale.`:"Reactive is only recommended for non-critical assets with full redundancy.",{strategies:A,recommended:I,recommendationReason:o,fiveYearSavings:R.fiveYearNPV-D.fiveYearNPV}},eF=(e,t,a)=>{let r=e.filter(e=>{let t=eN.ASSETS.find(t=>t.id===e.assetId);return t&&("Critical Power"===t.category||"Cooling"===t.category||"Fire Safety"===t.category)}).reduce((e,t)=>e+t.count,0),n=4===t?.8:2,s=a?.id==="US"?1.3:a?.id==="SG"?1.2:a?.id==="JP"?1.4:1,i=800*r*s,l=2200*r*s,o=4500*r*s,c=eL(a),d=960*n*c*.01,u=240*n*c*.01,m=120*n*c*.01,x=(l-i)/(720*n*.01),h=[{id:"nbd",label:"Next Business Day",responseTime:"8-24 hours",annualCost:i,coverageScope:"Parts replacement, remote diagnostics, business hours only",riskExposure:d,breakEvenDowntimeCost:0,netAnnualCost:i+d,recommended:!1},{id:"4hr",label:"4-Hour Response",responseTime:"4 hours (24/7)",annualCost:l,coverageScope:"Parts + on-site engineer, 24/7 critical spares cache",riskExposure:u,breakEvenDowntimeCost:x,netAnnualCost:l+u,recommended:!1},{id:"2hr",label:"2-Hour Response",responseTime:"2 hours (24/7)",annualCost:o,coverageScope:"Dedicated engineer, on-site spares locker, priority escalation",riskExposure:m,breakEvenDowntimeCost:(o-i)/(840*n*.01),netAnnualCost:o+m,recommended:!1}],p=[...h].sort((e,t)=>e.netAnnualCost-t.netAnnualCost);p[0].recommended=!0;let f=h.find(e=>e.id===p[0].id);return f&&(f.recommended=!0),{tiers:h,recommended:p[0].id,analysis:4===t?`For Tier IV operations, ${p[0].label} SLA provides the best balance of cost (${eB(p[0].annualCost)}/yr) and risk exposure (${eB(p[0].riskExposure)}/yr). The break-even downtime cost for upgrading from NBD to 4-Hour is ${eB(x)}/min.`:`For Tier III, the ${p[0].label} SLA is recommended. Upgrading to 4-Hour response is justified when downtime costs exceed ${eB(x)}/min.`}},e$=.15,ez={US:5,SG:7,JP:7,MY:14,ID:21,AU:10,IN:18,DE:7,GB:5},eq={"Critical Power":"Critical",Cooling:"Critical","Fire Safety":"Major","Fuel System":"Major","BMS & IT":"Minor",Security:"Minor","Water Treatment":"Minor",Civil:"Minor"},eW=(e,t,a)=>{let r=[],n=ez[a?.id||"US"]||14;e.forEach(e=>{let t=eN.ASSETS.find(t=>t.id===e.assetId);if(!t)return;let a=eq[t.category]||"Minor";t.consumables&&t.consumables.forEach(s=>{let i=12/s.baseLifeMonths*e.count,l=Math.ceil(i/12*("Critical"===a?3:"Major"===a?2:1)),o=Math.ceil(i/365*n)+l,c=Math.max(1,o+1),d=c*s.costPerUnit*e$,u=i*s.costPerUnit;r.push({assetId:t.id,assetName:t.name,partName:s.name,category:t.category,criticality:a,quantity:c,unitCost:s.costPerUnit,annualConsumption:Math.round(10*i)/10,holdingCost:Math.round(d),leadTimeDays:n,reorderPoint:o,totalAnnualCost:Math.round(u+d)})}),t.criticalSpares&&t.criticalSpares.forEach(a=>{let n=Math.max(a.minStock,Math.ceil(e.count*a.stockPercent)),s=n*a.costPerUnit*e$,i=Math.max(.1,e.count*a.stockPercent*.3);r.push({assetId:t.id,assetName:t.name,partName:`[SPARE] ${a.name}`,category:t.category,criticality:"Critical",quantity:n,unitCost:a.costPerUnit,annualConsumption:Math.round(10*i)/10,holdingCost:Math.round(s),leadTimeDays:7*a.leadTimeWeeks,reorderPoint:n,totalAnnualCost:Math.round(i*a.costPerUnit+s)})})});let s={Critical:0,Major:1,Minor:2};r.sort((e,t)=>s[e.criticality]-s[t.criticality]||t.totalAnnualCost-e.totalAnnualCost);let i=r.reduce((e,t)=>e+t.quantity*t.unitCost,0),l=r.reduce((e,t)=>e+t.annualConsumption*t.unitCost,0),o=r.reduce((e,t)=>e+t.holdingCost,0),c=r.filter(e=>"Critical"===e.criticality).length,d=[];n>14&&d.push(`Extended lead times (${n} days) in ${a?.name||"this region"} require higher safety stock. Consider establishing a regional spares cache.`),c>5&&d.push(`${c} critical spares identified. Consider a vendor-managed inventory (VMI) agreement to reduce holding costs by ~30%.`);let u=r.filter(e=>e.totalAnnualCost>5e3);return u.length>0&&d.push(`${u.length} items exceed $5K/year. Negotiate volume discounts or framework agreements for: ${u.map(e=>e.partName).join(", ")}.`),4===t&&d.push("Tier IV operations should maintain 2x safety stock for Critical Power and Cooling consumables to ensure concurrent maintainability."),{items:r,totalInventoryValue:Math.round(i),totalAnnualConsumptionCost:Math.round(l),totalHoldingCost:Math.round(o),totalAnnualSparesBudget:Math.round(l+o),criticalSpares:c,recommendations:d}};function eB(e){return e>=1e6?`$${(e/1e6).toFixed(2)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}var eU=e.i(51248);let eK=(0,X.default)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),eH=(0,X.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),eV=(0,X.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var eG=e.i(97702);let eY=(0,X.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),eX=(0,X.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),eZ=(0,X.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var eJ=e.i(14359);let eQ=(0,X.default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),e0=(e=new Map,t=null,a)=>({nextPart:e,validators:t,classGroupId:a}),e1=[],e2=(e,t,a)=>{if(0==e.length-t)return a.classGroupId;let r=e[t],n=a.nextPart.get(r);if(n){let a=e2(e,t+1,n);if(a)return a}let s=a.validators;if(null===s)return;let i=0===t?e.join("-"):e.slice(t).join("-"),l=s.length;for(let e=0;e<l;e++){let t=s[e];if(t.validator(i))return t.classGroupId}},e5=(e,t)=>{let a=e0();for(let r in e)e4(e[r],a,r,t);return a},e4=(e,t,a,r)=>{let n=e.length;for(let s=0;s<n;s++)e3(e[s],t,a,r)},e3=(e,t,a,r)=>{"string"==typeof e?e6(e,t,a):"function"==typeof e?e8(e,t,a,r):e9(e,t,a,r)},e6=(e,t,a)=>{(""===e?t:e7(t,e)).classGroupId=a},e8=(e,t,a,r)=>{te(e)?e4(e(r),t,a,r):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:a,validator:e}))},e9=(e,t,a,r)=>{let n=Object.entries(e),s=n.length;for(let e=0;e<s;e++){let[s,i]=n[e];e4(i,e7(t,s),a,r)}},e7=(e,t)=>{let a=e,r=t.split("-"),n=r.length;for(let e=0;e<n;e++){let t=r[e],n=a.nextPart.get(t);n||(n=e0(),a.nextPart.set(t,n)),a=n}return a},te=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,tt=[],ta=(e,t,a,r,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:a,maybePostfixModifierPosition:r,isExternal:n}),tr=/\s+/,tn=e=>{let t;if("string"==typeof e)return e;let a="";for(let r=0;r<e.length;r++)e[r]&&(t=tn(e[r]))&&(a&&(a+=" "),a+=t);return a},ts=[],ti=e=>{let t=t=>t[e]||ts;return t.isThemeGetter=!0,t},tl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,to=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tc=/^\d+\/\d+$/,td=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,th=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tp=e=>tc.test(e),tf=e=>!!e&&!Number.isNaN(Number(e)),tb=e=>!!e&&Number.isInteger(Number(e)),tg=e=>e.endsWith("%")&&tf(e.slice(0,-1)),ty=e=>td.test(e),tv=()=>!0,tj=e=>tu.test(e)&&!tm.test(e),tk=()=>!1,tw=e=>tx.test(e),tN=e=>th.test(e),tC=e=>!tP(e)&&!tD(e),tS=e=>tB(e,tV,tk),tP=e=>tl.test(e),tM=e=>tB(e,tG,tj),tO=e=>tB(e,tY,tf),tE=e=>tB(e,tZ,tv),tA=e=>tB(e,tX,tk),tT=e=>tB(e,tK,tk),tI=e=>tB(e,tH,tN),tR=e=>tB(e,tJ,tw),tD=e=>to.test(e),tL=e=>tU(e,tG),t_=e=>tU(e,tX),tF=e=>tU(e,tK),t$=e=>tU(e,tV),tz=e=>tU(e,tH),tq=e=>tU(e,tJ,!0),tW=e=>tU(e,tZ,!0),tB=(e,t,a)=>{let r=tl.exec(e);return!!r&&(r[1]?t(r[1]):a(r[2]))},tU=(e,t,a=!1)=>{let r=to.exec(e);return!!r&&(r[1]?t(r[1]):a)},tK=e=>"position"===e||"percentage"===e,tH=e=>"image"===e||"url"===e,tV=e=>"length"===e||"size"===e||"bg-size"===e,tG=e=>"length"===e,tY=e=>"number"===e,tX=e=>"family-name"===e,tZ=e=>"number"===e||"weight"===e,tJ=e=>"shadow"===e,tQ=((e,...t)=>{let a,r,n,s,i=e=>{let t=r(e);if(t)return t;let s=((e,t)=>{let{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:s}=t,i=[],l=e.trim().split(tr),o="";for(let e=l.length-1;e>=0;e-=1){let t=l[e],{isExternal:c,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:x}=a(t);if(c){o=t+(o.length>0?" "+o:o);continue}let h=!!x,p=r(h?m.substring(0,x):m);if(!p){if(!h||!(p=r(m))){o=t+(o.length>0?" "+o:o);continue}h=!1}let f=0===d.length?"":1===d.length?d[0]:s(d).join(":"),b=u?f+"!":f,g=b+p;if(i.indexOf(g)>-1)continue;i.push(g);let y=n(p,h);for(let e=0;e<y.length;++e){let t=y[e];i.push(b+t)}o=t+(o.length>0?" "+o:o)}return o})(e,a);return n(e,s),s};return s=l=>{var o;let c;return r=(a={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,a=Object.create(null),r=Object.create(null),n=(n,s)=>{a[n]=s,++t>e&&(t=0,r=a,a=Object.create(null))};return{get(e){let t=a[e];return void 0!==t?t:void 0!==(t=r[e])?(n(e,t),t):void 0},set(e,t){e in a?a[e]=t:n(e,t)}}})((o=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:a}=e,r=e=>{let t,a=[],r=0,n=0,s=0,i=e.length;for(let l=0;l<i;l++){let i=e[l];if(0===r&&0===n){if(":"===i){a.push(e.slice(s,l)),s=l+1;continue}if("/"===i){t=l;continue}}"["===i?r++:"]"===i?r--:"("===i?n++:")"===i&&n--}let l=0===a.length?e:e.slice(s),o=l,c=!1;return l.endsWith("!")?(o=l.slice(0,-1),c=!0):l.startsWith("!")&&(o=l.slice(1),c=!0),ta(a,c,o,t&&t>s?t-s:void 0)};if(t){let e=t+":",a=r;r=t=>t.startsWith(e)?a(t.slice(e.length)):ta(tt,!1,t,void 0,!0)}if(a){let e=r;r=t=>a({className:t,parseClassName:e})}return r})(o),sortModifiers:(c=new Map,o.orderSensitiveModifiers.forEach((e,t)=>{c.set(e,1e6+t)}),e=>{let t=[],a=[];for(let r=0;r<e.length;r++){let n=e[r],s="["===n[0],i=c.has(n);s||i?(a.length>0&&(a.sort(),t.push(...a),a=[]),t.push(n)):a.push(n)}return a.length>0&&(a.sort(),t.push(...a)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:a}=e;return e5(a,t)})(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var a;let t,r,n;return -1===(a=e).slice(1,-1).indexOf(":")?void 0:(r=(t=a.slice(1,-1)).indexOf(":"),(n=t.slice(0,r))?"arbitrary.."+n:void 0)}let r=e.split("-"),n=+(""===r[0]&&r.length>1);return e2(r,n,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=r[e],n=a[e];if(t){if(n){let e=Array(n.length+t.length);for(let t=0;t<n.length;t++)e[t]=n[t];for(let a=0;a<t.length;a++)e[n.length+a]=t[a];return e}return t}return n||e1}return a[e]||e1}}})(o)}).cache.get,n=a.cache.set,s=i,i(l)},(...e)=>s(((...e)=>{let t,a,r=0,n="";for(;r<e.length;)(t=e[r++])&&(a=tn(t))&&(n&&(n+=" "),n+=a);return n})(...e))})(()=>{let e=ti("color"),t=ti("font"),a=ti("text"),r=ti("font-weight"),n=ti("tracking"),s=ti("leading"),i=ti("breakpoint"),l=ti("container"),o=ti("spacing"),c=ti("radius"),d=ti("shadow"),u=ti("inset-shadow"),m=ti("text-shadow"),x=ti("drop-shadow"),h=ti("blur"),p=ti("perspective"),f=ti("aspect"),b=ti("ease"),g=ti("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...v(),tD,tP],k=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],N=()=>[tD,tP,o],C=()=>[tp,"full","auto",...N()],S=()=>[tb,"none","subgrid",tD,tP],P=()=>["auto",{span:["full",tb,tD,tP]},tb,tD,tP],M=()=>[tb,"auto",tD,tP],O=()=>["auto","min","max","fr",tD,tP],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],A=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...N()],I=()=>[tp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],R=()=>[e,tD,tP],D=()=>[...v(),tF,tT,{position:[tD,tP]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_=()=>["auto","cover","contain",t$,tS,{size:[tD,tP]}],F=()=>[tg,tL,tM],$=()=>["","none","full",c,tD,tP],z=()=>["",tf,tL,tM],q=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[tf,tg,tF,tT],U=()=>["","none",h,tD,tP],K=()=>["none",tf,tD,tP],H=()=>["none",tf,tD,tP],V=()=>[tf,tD,tP],G=()=>[tp,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ty],breakpoint:[ty],color:[tv],container:[ty],"drop-shadow":[ty],ease:["in","out","in-out"],font:[tC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ty],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ty],shadow:[ty],spacing:["px",tf],text:[ty],"text-shadow":[ty],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tp,tP,tD,f]}],container:["container"],columns:[{columns:[tf,tP,tD,l]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[tb,"auto",tD,tP]}],basis:[{basis:[tp,"full","auto",l,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tf,tp,"auto","initial","none",tP]}],grow:[{grow:["",tf,tD,tP]}],shrink:[{shrink:["",tf,tD,tP]}],order:[{order:[tb,"first","last","none",tD,tP]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...A(),"normal"]}],"justify-self":[{"justify-self":["auto",...A()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...A(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...A(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...A(),"baseline"]}],"place-self":[{"place-self":["auto",...A()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[l,"screen",...I()]}],"min-w":[{"min-w":[l,"screen","none",...I()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",a,tL,tM]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tW,tE]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tg,tP]}],"font-family":[{font:[t_,tA,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,tD,tP]}],"line-clamp":[{"line-clamp":[tf,"none",tD,tO]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",tD,tP]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tD,tP]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[tf,"from-font","auto",tD,tM]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[tf,"auto",tD,tP]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tD,tP]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tD,tP]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:D()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},tb,tD,tP],radial:["",tD,tP],conic:[tb,tD,tP]},tz,tI]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:z()}],"border-w-x":[{"border-x":z()}],"border-w-y":[{"border-y":z()}],"border-w-s":[{"border-s":z()}],"border-w-e":[{"border-e":z()}],"border-w-t":[{"border-t":z()}],"border-w-r":[{"border-r":z()}],"border-w-b":[{"border-b":z()}],"border-w-l":[{"border-l":z()}],"divide-x":[{"divide-x":z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tf,tD,tP]}],"outline-w":[{outline:["",tf,tL,tM]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,tq,tR]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",u,tq,tR]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[tf,tM]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":z()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",m,tq,tR]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[tf,tD,tP]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tf]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[tD,tP]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":v()}],"mask-image-conic-pos":[{"mask-conic":[tf]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:D()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tD,tP]}],filter:[{filter:["","none",tD,tP]}],blur:[{blur:U()}],brightness:[{brightness:[tf,tD,tP]}],contrast:[{contrast:[tf,tD,tP]}],"drop-shadow":[{"drop-shadow":["","none",x,tq,tR]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",tf,tD,tP]}],"hue-rotate":[{"hue-rotate":[tf,tD,tP]}],invert:[{invert:["",tf,tD,tP]}],saturate:[{saturate:[tf,tD,tP]}],sepia:[{sepia:["",tf,tD,tP]}],"backdrop-filter":[{"backdrop-filter":["","none",tD,tP]}],"backdrop-blur":[{"backdrop-blur":U()}],"backdrop-brightness":[{"backdrop-brightness":[tf,tD,tP]}],"backdrop-contrast":[{"backdrop-contrast":[tf,tD,tP]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tf,tD,tP]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tf,tD,tP]}],"backdrop-invert":[{"backdrop-invert":["",tf,tD,tP]}],"backdrop-opacity":[{"backdrop-opacity":[tf,tD,tP]}],"backdrop-saturate":[{"backdrop-saturate":[tf,tD,tP]}],"backdrop-sepia":[{"backdrop-sepia":["",tf,tD,tP]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tD,tP]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tf,"initial",tD,tP]}],ease:[{ease:["linear","initial",b,tD,tP]}],delay:[{delay:[tf,tD,tP]}],animate:[{animate:["none",g,tD,tP]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,tD,tP]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:K()}],"rotate-x":[{"rotate-x":K()}],"rotate-y":[{"rotate-y":K()}],"rotate-z":[{"rotate-z":K()}],scale:[{scale:H()}],"scale-x":[{"scale-x":H()}],"scale-y":[{"scale-y":H()}],"scale-z":[{"scale-z":H()}],"scale-3d":["scale-3d"],skew:[{skew:V()}],"skew-x":[{"skew-x":V()}],"skew-y":[{"skew-y":V()}],transform:[{transform:[tD,tP,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tD,tP]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tD,tP]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[tf,tL,tM,tO]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function t0(...e){return tQ((0,eh.clsx)(e))}let t1=z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("div",{ref:a,className:t0("rounded-xl border bg-card text-card-foreground shadow",e),...t}));t1.displayName="Card";let t2=z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("div",{ref:a,className:t0("flex flex-col space-y-1.5 p-6",e),...t}));t2.displayName="CardHeader";let t5=z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("h3",{ref:a,className:t0("font-semibold leading-none tracking-tight",e),...t}));t5.displayName="CardTitle";let t4=z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("p",{ref:a,className:t0("text-sm text-muted-foreground",e),...t}));t4.displayName="CardDescription";let t3=z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("div",{ref:a,className:t0("p-6 pt-0",e),...t}));t3.displayName="CardContent",z.forwardRef(({className:e,...t},a)=>(0,F.jsx)("div",{ref:a,className:t0("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.i(492);var t6=Symbol.for("immer-nothing"),t8=Symbol.for("immer-draftable"),t9=Symbol.for("immer-state");function t7(e){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ae=Object,at=ae.getPrototypeOf,aa="constructor",ar="prototype",an="configurable",as="enumerable",ai="writable",al="value",ao=e=>!!e&&!!e[t9];function ac(e){return!!e&&(am(e)||ag(e)||!!e[t8]||!!e[aa]?.[t8]||ay(e)||av(e))}var ad=ae[ar][aa].toString(),au=new WeakMap;function am(e){if(!e||!aj(e))return!1;let t=at(e);if(null===t||t===ae[ar])return!0;let a=ae.hasOwnProperty.call(t,aa)&&t[aa];if(a===Object)return!0;if(!ak(a))return!1;let r=au.get(a);return void 0===r&&(r=Function.toString.call(a),au.set(a,r)),r===ad}function ax(e,t,a=!0){0===ah(e)?(a?Reflect.ownKeys(e):ae.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((a,r)=>t(r,a,e))}function ah(e){let t=e[t9];return t?t.type_:ag(e)?1:ay(e)?2:3*!!av(e)}var ap=(e,t,a=ah(e))=>2===a?e.has(t):ae[ar].hasOwnProperty.call(e,t),af=(e,t,a=ah(e))=>2===a?e.get(t):e[t],ab=(e,t,a,r=ah(e))=>{2===r?e.set(t,a):3===r?e.add(a):e[t]=a},ag=Array.isArray,ay=e=>e instanceof Map,av=e=>e instanceof Set,aj=e=>"object"==typeof e,ak=e=>"function"==typeof e,aw=e=>e.modified_?e.copy_:e.base_;function aN(e,t){if(ay(e))return new Map(e);if(av(e))return new Set(e);if(ag(e))return Array[ar].slice.call(e);let a=am(e);if(!0!==t&&("class_only"!==t||a)){let t=at(e);if(null!==t&&a)return{...e};let r=ae.create(t);return ae.assign(r,e)}{let t=ae.getOwnPropertyDescriptors(e);delete t[t9];let a=Reflect.ownKeys(t);for(let r=0;r<a.length;r++){let n=a[r],s=t[n];!1===s[ai]&&(s[ai]=!0,s[an]=!0),(s.get||s.set)&&(t[n]={[an]:!0,[ai]:!0,[as]:s[as],[al]:e[n]})}return ae.create(at(e),t)}}function aC(e,t=!1){return aP(e)||ao(e)||!ac(e)||(ah(e)>1&&ae.defineProperties(e,{set:aS,add:aS,clear:aS,delete:aS}),ae.freeze(e),t&&ax(e,(e,t)=>{aC(t,!0)},!1)),e}var aS={[al]:function(){t7(2)}};function aP(e){return!(null!==e&&aj(e))||ae.isFrozen(e)}var aM="MapSet",aO="Patches",aE="ArrayMethods",aA={};function aT(e){let t=aA[e];return t||t7(0,e),t}var aI=e=>!!aA[e];function aR(e,t){t&&(e.patchPlugin_=aT(aO),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function aD(e){aL(e),e.drafts_.forEach(aF),e.drafts_=null}function aL(e){e===s&&(s=e.parent_)}var a_=e=>s={drafts_:[],parent_:s,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:aI(aM)?aT(aM):void 0,arrayMethodsPlugin_:aI(aE)?aT(aE):void 0};function aF(e){let t=e[t9];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function a$(e,t){t.unfinalizedDrafts_=t.drafts_.length;let a=t.drafts_[0];if(void 0!==e&&e!==a){a[t9].modified_&&(aD(t),t7(4)),ac(e)&&(e=az(t,e));let{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[t9].base_,e,t)}else e=az(t,a);return function(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aC(t,a)}(t,e,!0),aD(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==t6?e:void 0}function az(e,t){if(aP(t))return t;let a=t[t9];if(!a)return aH(t,e.handledSet_,e);if(!aW(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){let{callbacks_:t}=a;if(t)for(;t.length>0;)t.pop()(e);aK(a,e)}return a.copy_}function aq(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var aW=(e,t)=>e.scope_===t,aB=[];function aU(e,t,a,r){let n=e.copy_||e.base_,s=e.type_;if(void 0!==r&&af(n,r,s)===t)return void ab(n,r,a,s);if(!e.draftLocations_){let t=e.draftLocations_=new Map;ax(n,(e,a)=>{if(ao(a)){let r=t.get(a)||[];r.push(e),t.set(a,r)}})}for(let r of e.draftLocations_.get(t)??aB)ab(n,r,a,s)}function aK(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){let{patchPlugin_:a}=t;if(a){let r=a.getPath(e);r&&a.generatePatches_(e,r,t)}aq(e)}}function aH(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||ao(e)||t.has(e)||!ac(e)||aP(e)||(t.add(e),ax(e,(r,n)=>{if(ao(n)){let t=n[t9];aW(t,a)&&(ab(e,r,aw(t),e.type_),aq(t))}else ac(n)&&aH(n,t,a)})),e}var aV={get(e,t){let a;if(t===t9)return e;let r=e.scope_.arrayMethodsPlugin_,n=1===e.type_&&"string"==typeof t;if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);let s=e.copy_||e.base_;if(!ap(s,t,e.type_)){var i;let a;return i=e,(a=aX(s,t))?al in a?a[al]:a.get?.call(i.draft_):void 0}let l=s[t];if(e.finalized_||!ac(l)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&Number.isInteger(a=+t)&&String(a)===t)return l;if(l===aY(e.base_,t)){aJ(e);let a=1===e.type_?+t:t,r=aQ(e.scope_,l,e,a);return e.copy_[a]=r}return l},has:(e,t)=>t in(e.copy_||e.base_),ownKeys:e=>Reflect.ownKeys(e.copy_||e.base_),set(e,t,a){let r=aX(e.copy_||e.base_,t);if(r?.set)return r.set.call(e.draft_,a),!0;if(!e.modified_){let r=aY(e.copy_||e.base_,t),n=r?.[t9];if(n&&n.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if((a===r?0!==a||1/a==1/r:a!=a&&r!=r)&&(void 0!==a||ap(e.base_,t,e.type_)))return!0;aJ(e),aZ(e)}return!!(e.copy_[t]===a&&(void 0!==a||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=a,e.assigned_.set(t,!0),!function(e,t,a){let{scope_:r}=e;if(ao(a)){let n=a[t9];aW(n,r)&&n.callbacks_.push(function(){aJ(e),aU(e,a,aw(n),t)})}else ac(a)&&e.callbacks_.push(function(){let n=e.copy_||e.base_;3===e.type_?n.has(a)&&aH(a,r.handledSet_,r):af(n,t,e.type_)===a&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&aH(af(e.copy_,t,e.type_),r.handledSet_,r)})}(e,t,a),!0)},deleteProperty:(e,t)=>(aJ(e),void 0!==aY(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),aZ(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let a=e.copy_||e.base_,r=Reflect.getOwnPropertyDescriptor(a,t);return r?{[ai]:!0,[an]:1!==e.type_||"length"!==t,[as]:r[as],[al]:a[t]}:r},defineProperty(){t7(11)},getPrototypeOf:e=>at(e.base_),setPrototypeOf(){t7(12)}},aG={};for(let e in aV){let t=aV[e];aG[e]=function(){let e=arguments;return e[0]=e[0][0],t.apply(this,e)}}function aY(e,t){let a=e[t9];return(a?a.copy_||a.base_:e)[t]}function aX(e,t){if(!(t in e))return;let a=at(e);for(;a;){let e=Object.getOwnPropertyDescriptor(a,t);if(e)return e;a=at(a)}}function aZ(e){!e.modified_&&(e.modified_=!0,e.parent_&&aZ(e.parent_))}function aJ(e){e.copy_||(e.assigned_=new Map,e.copy_=aN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function aQ(e,t,a,r){let[n,i]=ay(t)?aT(aM).proxyMap_(t,a):av(t)?aT(aM).proxySet_(t,a):function(e,t){let a=ag(e),r={type_:+!!a,scope_:t?t.scope_:s,modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0},n=r,i=aV;a&&(n=[r],i=aG);let{revoke:l,proxy:o}=Proxy.revocable(n,i);return r.draft_=o,r.revoke_=l,[o,r]}(t,a);if((a?.scope_??s).drafts_.push(n),i.callbacks_=a?.callbacks_??[],i.key_=r,a&&void 0!==r)a.callbacks_.push(function(e){if(!i||!aW(i,e))return;e.mapSetPlugin_?.fixSetContents(i);let t=aw(i);aU(a,i.draft_??i,t,r),aK(i,e)});else i.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(i);let{patchPlugin_:t}=e;i.modified_&&t&&t.generatePatches_(i,[],e)});return n}function a0(e){return ao(e)||t7(10,e),function e(t){let a;if(!ac(t)||aP(t))return t;let r=t[t9],n=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,a=aN(t,r.scope_.immer_.useStrictShallowCopy_),n=r.scope_.immer_.shouldUseStrictIteration()}else a=aN(t,!0);return ax(a,(t,r)=>{ab(a,t,e(r))},n),r&&(r.finalized_=!1),a}(e)}aG.deleteProperty=function(e,t){return aG.set.call(this,e,t,void 0)},aG.set=function(e,t,a){return aV.set.call(this,e[0],t,a,e[0])};var a1=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{let r;if(ak(e)&&!ak(t)){let a=t;t=e;let r=this;return function(e=a,...n){return r.produce(e,e=>t.call(this,e,...n))}}if(ak(t)||t7(6),void 0===a||ak(a)||t7(7),ac(e)){let n=a_(this),s=aQ(n,e,void 0),i=!0;try{r=t(s),i=!1}finally{i?aD(n):aL(n)}return aR(n,a),a$(r,n)}if(e&&aj(e))t7(1,e);else{if(void 0===(r=t(e))&&(r=e),r===t6&&(r=void 0),this.autoFreeze_&&aC(r,!0),a){let t=[],n=[];aT(aO).generateReplacementPatches_(e,r,{patches_:t,inversePatches_:n}),a(t,n)}return r}},this.produceWithPatches=(e,t)=>{let a,r;return ak(e)?(t,...a)=>this.produceWithPatches(t,t=>e(t,...a)):[this.produce(e,t,(e,t)=>{a=e,r=t}),a,r]},(e=>"boolean"==typeof e)(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),(e=>"boolean"==typeof e)(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),(e=>"boolean"==typeof e)(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ac(e)||t7(8),ao(e)&&(e=a0(e));let t=a_(this),a=aQ(t,e,void 0);return a[t9].isManual_=!0,aL(t),a}finishDraft(e,t){let a=e&&e[t9];a&&a.isManual_||t7(9);let{scope_:r}=a;return aR(r,t),a$(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){let r=t[a];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}a>-1&&(t=t.slice(a+1));let r=aT(aO).applyPatches_;return ao(e)?r(e,t):this.produce(e,e=>r(e,t))}}().produce,a2=e=>Array.isArray(e)?e:[e],a5=0,a4=class{revision=a5;_value;_lastValue;_isEqual=a3;constructor(e,t=a3){this._value=this._lastValue=e,this._isEqual=t}get value(){return this._value}set value(e){this.value!==e&&(this._value=e,this.revision=++a5)}};function a3(e,t){return e===t}function a6(e){return e instanceof a4||console.warn("Not a valid cell! ",e),e.value}var a8=(e,t)=>!1;function a9(){return function(e,t=a3){return new a4(null,t)}(0,a8)}var a7=e=>{let t=e.collectionTag;null===t&&(t=e.collectionTag=a9()),a6(t)};Symbol();var re=0,rt=Object.getPrototypeOf({}),ra=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy(this,rr);tag=a9();tags={};children={};collectionTag=null;id=re++},rr={get:(e,t)=>(function(){let{value:a}=e,r=Reflect.get(a,t);if("symbol"==typeof t||t in rt)return r;if("object"==typeof r&&null!==r){var n;let a=e.children[t];return void 0===a&&(a=e.children[t]=Array.isArray(n=r)?new rn(n):new ra(n)),a.tag&&a6(a.tag),a.proxy}{let a=e.tags[t];return void 0===a&&((a=e.tags[t]=a9()).value=r),a6(a),r}})(),ownKeys:e=>(a7(e),Reflect.ownKeys(e.value)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e.value,t),has:(e,t)=>Reflect.has(e.value,t)},rn=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy([this],rs);tag=a9();tags={};children={};collectionTag=null;id=re++},rs={get:([e],t)=>("length"===t&&a7(e),rr.get(e,t)),ownKeys:([e])=>rr.ownKeys(e),getOwnPropertyDescriptor:([e],t)=>rr.getOwnPropertyDescriptor(e,t),has:([e],t)=>rr.has(e,t)},ri="u">typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function rl(){return{s:0,v:void 0,o:null,p:null}}function ro(e,t={}){let a,r=rl(),{resultEqualityCheck:n}=t,s=0;function i(){let t,i=r,{length:l}=arguments;for(let e=0;e<l;e++){let t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=i.o;null===e&&(i.o=e=new WeakMap);let a=e.get(t);void 0===a?(i=rl(),e.set(t,i)):i=a}else{let e=i.p;null===e&&(i.p=e=new Map);let a=e.get(t);void 0===a?(i=rl(),e.set(t,i)):i=a}}let o=i;if(1===i.s)t=i.v;else if(t=e.apply(null,arguments),s++,n){let e=a?.deref?.()??a;null!=e&&n(e,t)&&(t=e,0!==s&&s--),a="object"==typeof t&&null!==t||"function"==typeof t?new ri(t):t}return o.s=1,o.v=t,t}return i.clearCache=()=>{r=rl(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}var rc=function(e,...t){let a="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r,n=0,s=0,i={},l=e.pop();"object"==typeof l&&(i=l,l=e.pop()),function(e,t=`expected a function, instead received ${typeof e}`){if("function"!=typeof e)throw TypeError(t)}(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);let{memoize:o,memoizeOptions:c=[],argsMemoize:d=ro,argsMemoizeOptions:u=[],devModeChecks:m={}}={...a,...i},x=a2(c),h=a2(u),p=(!function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){let a=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw TypeError(`${t}[${a}]`)}}(t=Array.isArray(e[0])?e[0]:e,"createSelector expects all input-selectors to be functions, but received the following types: "),t),f=o(function(){return n++,l.apply(null,arguments)},...x);return Object.assign(d(function(){s++;let e=function(e,t){let a=[],{length:r}=e;for(let n=0;n<r;n++)a.push(e[n].apply(null,t));return a}(p,arguments);return r=f.apply(null,e)},...h),{resultFunc:l,memoizedResultFunc:f,dependencies:p,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:o,argsMemoize:d})};return Object.assign(r,{withTypes:()=>r}),r}(ro),rd=Object.assign((e,t=rc)=>{!function(e,t=`expected an object, instead received ${typeof e}`){if("object"!=typeof e)throw TypeError(t)}(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let a=Object.keys(e);return t(a.map(t=>e[t]),(...e)=>e.reduce((e,t,r)=>(e[a[r]]=t,e),{}))},{withTypes:()=>rd});function ru(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rm="function"==typeof Symbol&&Symbol.observable||"@@observable",rx=()=>Math.random().toString(36).substring(7).split("").join("."),rh={INIT:`@@redux/INIT${rx()}`,REPLACE:`@@redux/REPLACE${rx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${rx()}`};function rp(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function rf(e){let t,a=Object.keys(e),r={};for(let t=0;t<a.length;t++){let n=a[t];"function"==typeof e[n]&&(r[n]=e[n])}let n=Object.keys(r);try{Object.keys(r).forEach(e=>{let t=r[e];if(void 0===t(void 0,{type:rh.INIT}))throw Error(ru(12));if(void 0===t(void 0,{type:rh.PROBE_UNKNOWN_ACTION()}))throw Error(ru(13))})}catch(e){t=e}return function(e={},a){if(t)throw t;let s=!1,i={};for(let t=0;t<n.length;t++){let l=n[t],o=r[l],c=e[l],d=o(c,a);if(void 0===d)throw a&&a.type,Error(ru(14));i[l]=d,s=s||d!==c}return(s=s||n.length!==Object.keys(e).length)?i:e}}function rb(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...a)=>e(t(...a)))}function rg(e){return rp(e)&&"type"in e&&"string"==typeof e.type}function ry(e){return({dispatch:t,getState:a})=>r=>n=>"function"==typeof n?n(t,a,e):r(n)}var rv=ry(),rj="u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?rb:rb.apply(null,arguments)};function rk(e,t){function a(...r){if(t){let a=t(...r);if(!a)throw Error(nt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=t=>rg(t)&&t.type===e,a}"u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var rw=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function rN(e){return ac(e)?a1(e,()=>{}):e}function rC(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}var rS="RTK_autoBatch",rP=()=>e=>({payload:e,meta:{[rS]:!0}}),rM=e=>t=>{setTimeout(t,e)},rO=(e={type:"raf"})=>t=>(...a)=>{let r=t(...a),n=!0,s=!1,i=!1,l=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"u">typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:rM(10):"callback"===e.type?e.queueNotification:rM(e.timeout),c=()=>{i=!1,s&&(s=!1,l.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){let t=r.subscribe(()=>n&&e());return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return(s=!(n=!e?.meta?.[rS]))&&!i&&(i=!0,o(c)),r.dispatch(e)}finally{n=!0}}})};function rE(e){let t,a={},r=[],n={addCase(e,t){let r="string"==typeof e?e:e.type;if(!r)throw Error(nt(28));if(r in a)throw Error(nt(29));return a[r]=t,n},addAsyncThunk:(e,t)=>(t.pending&&(a[e.pending.type]=t.pending),t.rejected&&(a[e.rejected.type]=t.rejected),t.fulfilled&&(a[e.fulfilled.type]=t.fulfilled),t.settled&&r.push({matcher:e.settled,reducer:t.settled}),n),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),n),addDefaultCase:e=>(t=e,n)};return e(n),[a,r,t]}var rA=Symbol.for("rtk-slice-createasyncthunk"),rT=((a=rT||{}).reducer="reducer",a.reducerWithPrepare="reducerWithPrepare",a.asyncThunk="asyncThunk",a),rI=function({creators:e}={}){let t=e?.asyncThunk?.[rA];return function(e){let a,{name:r,reducerPath:n=r}=e;if(!r)throw Error(nt(11));let s=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(s),l={},o={},c={},d=[],u={addCase(e,t){let a="string"==typeof e?e:e.type;if(!a)throw Error(nt(12));if(a in o)throw Error(nt(13));return o[a]=t,u},addMatcher:(e,t)=>(d.push({matcher:e,reducer:t}),u),exposeAction:(e,t)=>(c[e]=t,u),exposeCaseReducer:(e,t)=>(l[e]=t,u)};function m(){let[t={},a=[],r]="function"==typeof e.extraReducers?rE(e.extraReducers):[e.extraReducers],n={...t,...o};return function(e,t){let a,[r,n,s]=rE(t);if("function"==typeof e)a=()=>rN(e());else{let t=rN(e);a=()=>t}function i(e=a(),t){let l=[r[t.type],...n.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===l.filter(e=>!!e).length&&(l=[s]),l.reduce((e,a)=>{if(a)if(ao(e)){let r=a(e,t);return void 0===r?e:r}else{if(ac(e))return a1(e,e=>a(e,t));let r=a(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return i.getInitialState=a,i}(e.initialState,e=>{for(let t in n)e.addCase(t,n[t]);for(let t of d)e.addMatcher(t.matcher,t.reducer);for(let t of a)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}i.forEach(a=>{let n=s[a],i={reducerName:a,type:`${r}/${a}`,createNotation:"function"==typeof e.reducers};"asyncThunk"===n._reducerDefinitionType?function({type:e,reducerName:t},a,r,n){if(!n)throw Error(nt(18));let{payloadCreator:s,fulfilled:i,pending:l,rejected:o,settled:c,options:d}=a,u=n(e,s,d);r.exposeAction(t,u),i&&r.addCase(u.fulfilled,i),l&&r.addCase(u.pending,l),o&&r.addCase(u.rejected,o),c&&r.addMatcher(u.settled,c),r.exposeCaseReducer(t,{fulfilled:i||rR,pending:l||rR,rejected:o||rR,settled:c||rR})}(i,n,u,t):function({type:e,reducerName:t,createNotation:a},r,n){let s,i;if("reducer"in r){if(a&&"reducerWithPrepare"!==r._reducerDefinitionType)throw Error(nt(17));s=r.reducer,i=r.prepare}else s=r;n.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?rk(e,i):rk(e))}(i,n,u)});let x=e=>e,h=new Map,p=new WeakMap;function f(e,t){return a||(a=m()),a(e,t)}function b(){return a||(a=m()),a.getInitialState()}function g(t,a=!1){function r(e){let n=e[t];return void 0===n&&a&&(n=rC(p,r,b)),n}function n(t=x){let r=rC(h,a,()=>new WeakMap);return rC(r,t,()=>{let r={};for(let[n,s]of Object.entries(e.selectors??{}))r[n]=function(e,t,a,r){function n(s,...i){let l=t(s);return void 0===l&&r&&(l=a()),e(l,...i)}return n.unwrapped=e,n}(s,t,()=>rC(p,t,b),a);return r})}return{reducerPath:t,getSelectors:n,get selectors(){return n(r)},selectSlice:r}}let y={name:r,reducer:f,actions:c,caseReducers:l,getInitialState:b,...g(n),injectInto(e,{reducerPath:t,...a}={}){let r=t??n;return e.inject({reducerPath:r,reducer:f},a),{...y,...g(r,!0)}}};return y}}();function rR(){}var rD="listener",rL="completed",r_="cancelled",rF=`task-${r_}`,r$=`task-${rL}`,rz=`${rD}-${r_}`,rq=`${rD}-${rL}`,rW=class{constructor(e){this.code=e,this.message=`task ${r_} (reason: ${e})`}name="TaskAbortError";message},rB=(e,t)=>{if("function"!=typeof e)throw TypeError(nt(32))},rU=()=>{},rK=(e,t=rU)=>(e.catch(t),e),rH=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),rV=e=>{if(e.aborted)throw new rW(e.reason)};function rG(e,t){let a=rU;return new Promise((r,n)=>{let s=()=>n(new rW(e.reason));e.aborted?s():(a=rH(e,s),t.finally(()=>a()).then(r,n))}).finally(()=>{a=rU})}var rY=async(e,t)=>{try{await Promise.resolve();let t=await e();return{status:"ok",value:t}}catch(e){return{status:e instanceof rW?"cancelled":"rejected",error:e}}finally{t?.()}},rX=e=>t=>rK(rG(e,t).then(t=>(rV(e),t))),rZ=e=>{let t=rX(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:rJ}=Object,rQ={},r0="listenerMiddleware",r1=e=>{let{type:t,actionCreator:a,matcher:r,predicate:n,effect:s}=e;if(t)n=rk(t).match;else if(a)t=a.type,n=a.match;else if(r)n=r;else if(n);else throw Error(nt(21));return rB(s,"options.listener"),{predicate:n,type:t,effect:s}},r2=rJ(e=>{let{type:t,predicate:a,effect:r}=r1(e);return{id:((e=21)=>{let t="",a=e;for(;a--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),effect:r,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw Error(nt(22))}}},{withTypes:()=>r2}),r5=(e,t)=>{let{type:a,effect:r,predicate:n}=r1(t);return Array.from(e.values()).find(e=>("string"==typeof a?e.type===a:e.predicate===n)&&e.effect===r)},r4=e=>{e.pending.forEach(e=>{e.abort(rz)})},r3=(e,t,a)=>{try{e(t,a)}catch(e){setTimeout(()=>{throw e},0)}},r6=rJ(rk(`${r0}/add`),{withTypes:()=>r6}),r8=rk(`${r0}/removeAll`),r9=rJ(rk(`${r0}/remove`),{withTypes:()=>r9}),r7=(...e)=>{console.error(`${r0}/error`,...e)},ne=(e={})=>{let t=new Map,a=new Map,{extra:r,onError:n=r7}=e;rB(n,"onError");let s=e=>{var a;return(a=r5(t,e)??r2(e)).unsubscribe=()=>t.delete(a.id),t.set(a.id,a),e=>{a.unsubscribe(),e?.cancelActive&&r4(a)}};rJ(s,{withTypes:()=>s});let i=e=>{let a=r5(t,e);return a&&(a.unsubscribe(),e.cancelActive&&r4(a)),!!a};rJ(i,{withTypes:()=>i});let l=async(e,i,l,o)=>{var c,d;let u,m=new AbortController,x=(c=m.signal,u=async(e,t)=>{rV(c);let a=()=>{},r=[new Promise((t,r)=>{let n=s({predicate:e,effect:(e,a)=>{a.unsubscribe(),t([e,a.getState(),a.getOriginalState()])}});a=()=>{n(),r()}})];null!=t&&r.push(new Promise(e=>setTimeout(e,t,null)));try{let e=await rG(c,Promise.race(r));return rV(c),e}finally{a()}},(e,t)=>rK(u(e,t))),h=[];try{let n;e.pending.add(m),n=a.get(e)??0,a.set(e,n+1),await Promise.resolve(e.effect(i,rJ({},l,{getOriginalState:o,condition:(e,t)=>x(e,t).then(Boolean),take:x,delay:rZ(m.signal),pause:rX(m.signal),extra:r,signal:m.signal,fork:(d=m.signal,(e,t)=>{rB(e,"taskExecutor");let a=new AbortController;rH(d,()=>a.abort(d.reason));let r=rY(async()=>{rV(d),rV(a.signal);let t=await e({pause:rX(a.signal),delay:rZ(a.signal),signal:a.signal});return rV(a.signal),t},()=>a.abort(r$));return t?.autoJoin&&h.push(r.catch(rU)),{result:rX(d)(r),cancel(){a.abort(rF)}}}),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,a)=>{e!==m&&(e.abort(rz),a.delete(e))})},cancel:()=>{m.abort(rz),e.pending.delete(m)},throwIfCancelled:()=>{rV(m.signal)}})))}catch(e){e instanceof rW||r3(n,e,{raisedBy:"effect"})}finally{let t;await Promise.all(h),m.abort(rq),1===(t=a.get(e)??1)?a.delete(e):a.set(e,t-1),e.pending.delete(m)}},o=()=>{for(let e of a.keys())r4(e);t.clear()};return{middleware:e=>a=>r=>{let c;if(!rg(r))return a(r);if(r6.match(r))return s(r.payload);if(r8.match(r))return void o();if(r9.match(r))return i(r.payload);let d=e.getState(),u=()=>{if(d===rQ)throw Error(nt(23));return d};try{if(c=a(r),t.size>0){let a=e.getState();for(let s of Array.from(t.values())){let t=!1;try{t=s.predicate(r,a,d)}catch(e){t=!1,r3(n,e,{raisedBy:"predicate"})}t&&l(s,r,e,u)}}}finally{d=rQ}return c},startListening:s,stopListening:i,clearListeners:o}};function nt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");var na=e.i(45654);function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=10**t,r=Math.round(e*a)/a;return Object.is(r,-0)?0:r}function nn(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return e.reduce((e,t,r)=>{var n=a[r-1];return"string"==typeof n?e+n+t:void 0!==n?e+nr(n)+t:e+t},"")}var ns=e=>0===e?0:e>0?1:-1,ni=e=>"number"==typeof e&&e!=+e,nl=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,no=e=>("number"==typeof e||e instanceof Number)&&!ni(e),nc=e=>no(e)||"string"==typeof e,nd=0,nu=e=>{var t=++nd;return"".concat(e||"").concat(t)},nm=function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!no(e)&&"string"!=typeof e)return r;if(nl(e)){if(null==t)return r;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return ni(a)&&(a=r),n&&null!=t&&a>t&&(a=t),a},nx=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},r=0;r<t;r++)if(a[String(e[r])])return!0;else a[String(e[r])]=!0;return!1};function nh(e,t,a){return no(e)&&no(t)?nr(e+a*(t-e)):t}function np(e,t,a){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):(0,na.default)(e,t))===a)}var nf=e=>null==e?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function nb(e){return null!=e}function ng(){}var ny=(e,t)=>{if(t&&Array.isArray(e)){var a=Number.parseInt(t,10);if(!ni(a))return e[a]}},nv=rI({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:()=>void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),nj=nv.reducer,{createEventEmitter:nk}=nv.actions,nw=(e.i(11603),{notify(){},get:()=>[]}),nN="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,nC="u">typeof navigator&&"ReactNative"===navigator.product,nS=nN||nC?z.useLayoutEffect:z.useEffect;function nP(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}var nM=Symbol.for("react-redux-context"),nO="u">typeof globalThis?globalThis:{},nE=function(){if(!z.createContext)return{};let e=nO[nM]??=new Map,t=e.get(z.createContext);return t||(t=z.createContext(null),e.set(z.createContext,t)),t}(),nA=function(e){let{children:t,context:a,serverState:r,store:n}=e,s=z.useMemo(()=>{let e=function(e,t){let a,r=nw,n=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function l(){if(n++,!a){let t,n;a=e.subscribe(i),t=null,n=null,r={clear(){t=null,n=null},notify(){let e=t;for(;e;)e.callback(),e=e.next},get(){let e=[],a=t;for(;a;)e.push(a),a=a.next;return e},subscribe(e){let a=!0,r=n={callback:e,next:null,prev:n};return r.prev?r.prev.next=r:t=r,function(){a&&null!==t&&(a=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}}function o(){n--,a&&0===n&&(a(),a=void 0,r.clear(),r=nw)}let c={addNestedSub:function(e){l();let t=r.subscribe(e),a=!1;return()=>{a||(a=!0,t(),o())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,l())},tryUnsubscribe:function(){s&&(s=!1,o())},getListeners:()=>r};return c}(n);return{store:n,subscription:e,getServerState:r?()=>r:void 0}},[n,r]),i=z.useMemo(()=>n.getState(),[n]);return nS(()=>{let{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==n.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,i]),z.createElement((a||nE).Provider,{value:s},t)};function nT(e=nE){return function(){return z.useContext(e)}}var nI=nT(),nR=Symbol.for("immer-nothing"),nD=Symbol.for("immer-draftable"),nL=Symbol.for("immer-state");function n_(e){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nF=Object.getPrototypeOf;function n$(e){return!!e&&!!e[nL]}function nz(e){return!!e&&(nB(e)||Array.isArray(e)||!!e[nD]||!!e.constructor?.[nD]||nG(e)||nY(e))}var nq=Object.prototype.constructor.toString(),nW=new WeakMap;function nB(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;let a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if("function"!=typeof a)return!1;let r=nW.get(a);return void 0===r&&(r=Function.toString.call(a),nW.set(a,r)),r===nq}function nU(e,t,a=!0){0===nK(e)?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((a,r)=>t(r,a,e))}function nK(e){let t=e[nL];return t?t.type_:Array.isArray(e)?1:nG(e)?2:3*!!nY(e)}function nH(e,t){return 2===nK(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nV(e,t,a){let r=nK(e);2===r?e.set(t,a):3===r?e.add(a):e[t]=a}function nG(e){return e instanceof Map}function nY(e){return e instanceof Set}function nX(e){return e.copy_||e.base_}function nZ(e,t){if(nG(e))return new Map(e);if(nY(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let a=nB(e);if(!0!==t&&("class_only"!==t||a)){let t=nF(e);return null!==t&&a?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[nL];let a=Reflect.ownKeys(t);for(let r=0;r<a.length;r++){let n=a[r],s=t[n];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[n]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[n]})}return Object.create(nF(e),t)}}function nJ(e,t=!1){return n0(e)||n$(e)||!nz(e)||(nK(e)>1&&Object.defineProperties(e,{set:nQ,add:nQ,clear:nQ,delete:nQ}),Object.freeze(e),t&&Object.values(e).forEach(e=>nJ(e,!0))),e}var nQ={value:function(){n_(2)}};function n0(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var n1={};function n2(e){let t=n1[e];return t||n_(0,e),t}function n5(e,t){t&&(n2("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function n4(e){n3(e),e.drafts_.forEach(n8),e.drafts_=null}function n3(e){e===i&&(i=e.parent_)}function n6(e){return i={drafts_:[],parent_:i,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function n8(e){let t=e[nL];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function n9(e,t){t.unfinalizedDrafts_=t.drafts_.length;let a=t.drafts_[0];return void 0!==e&&e!==a?(a[nL].modified_&&(n4(t),n_(4)),nz(e)&&(e=n7(t,e),t.parent_||st(t,e)),t.patches_&&n2("Patches").generateReplacementPatches_(a[nL].base_,e,t.patches_,t.inversePatches_)):e=n7(t,a,[]),n4(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nR?e:void 0}function n7(e,t,a){if(n0(t))return t;let r=e.immer_.shouldUseStrictIteration(),n=t[nL];if(!n)return nU(t,(r,s)=>se(e,n,t,r,s,a),r),t;if(n.scope_!==e)return t;if(!n.modified_)return st(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,s=t,i=!1;3===n.type_&&(s=new Set(t),t.clear(),i=!0),nU(s,(r,s)=>se(e,n,t,r,s,a,i),r),st(e,t,!1),a&&e.patches_&&n2("Patches").generatePatches_(n,a,e.patches_,e.inversePatches_)}return n.copy_}function se(e,t,a,r,n,s,i){if(null==n||"object"!=typeof n&&!i)return;let l=n0(n);if(!l||i){if(n$(n)){let i=n7(e,n,s&&t&&3!==t.type_&&!nH(t.assigned_,r)?s.concat(r):void 0);if(nV(a,r,i),!n$(i))return;e.canAutoFreeze_=!1}else i&&a.add(n);if(nz(n)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===n&&l)return;n7(e,n),(!t||!t.scope_.parent_)&&"symbol"!=typeof r&&(nG(a)?a.has(r):Object.prototype.propertyIsEnumerable.call(a,r))&&st(e,n)}}}function st(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nJ(t,a)}var sa={get(e,t){if(t===nL)return e;let a=nX(e);if(!nH(a,t)){var r;let n;return r=e,(n=ss(a,t))?"value"in n?n.value:n.get?.call(r.draft_):void 0}let n=a[t];return e.finalized_||!nz(n)?n:n===sn(e.base_,t)?(sl(e),e.copy_[t]=sc(n,e)):n},has:(e,t)=>t in nX(e),ownKeys:e=>Reflect.ownKeys(nX(e)),set(e,t,a){let r=ss(nX(e),t);if(r?.set)return r.set.call(e.draft_,a),!0;if(!e.modified_){let r=sn(nX(e),t),n=r?.[nL];if(n&&n.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if((a===r?0!==a||1/a==1/r:a!=a&&r!=r)&&(void 0!==a||nH(e.base_,t)))return!0;sl(e),si(e)}return!!(e.copy_[t]===a&&(void 0!==a||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=a,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==sn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,sl(e),si(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let a=nX(e),r=Reflect.getOwnPropertyDescriptor(a,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:a[t]}:r},defineProperty(){n_(11)},getPrototypeOf:e=>nF(e.base_),setPrototypeOf(){n_(12)}},sr={};function sn(e,t){let a=e[nL];return(a?nX(a):e)[t]}function ss(e,t){if(!(t in e))return;let a=nF(e);for(;a;){let e=Object.getOwnPropertyDescriptor(a,t);if(e)return e;a=nF(a)}}function si(e){!e.modified_&&(e.modified_=!0,e.parent_&&si(e.parent_))}function sl(e){e.copy_||(e.copy_=nZ(e.base_,e.scope_.immer_.useStrictShallowCopy_))}nU(sa,(e,t)=>{sr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sr.deleteProperty=function(e,t){return sr.set.call(this,e,t,void 0)},sr.set=function(e,t,a){return sa.set.call(this,e[0],t,a,e[0])};var so=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,a)=>{let r;if("function"==typeof e&&"function"!=typeof t){let a=t;t=e;let r=this;return function(e=a,...n){return r.produce(e,e=>t.call(this,e,...n))}}if("function"!=typeof t&&n_(6),void 0!==a&&"function"!=typeof a&&n_(7),nz(e)){let n=n6(this),s=sc(e,void 0),i=!0;try{r=t(s),i=!1}finally{i?n4(n):n3(n)}return n5(n,a),n9(r,n)}if(e&&"object"==typeof e)n_(1,e);else{if(void 0===(r=t(e))&&(r=e),r===nR&&(r=void 0),this.autoFreeze_&&nJ(r,!0),a){let t=[],n=[];n2("Patches").generateReplacementPatches_(e,r,t,n),a(t,n)}return r}},this.produceWithPatches=(e,t)=>{let a,r;return"function"==typeof e?(t,...a)=>this.produceWithPatches(t,t=>e(t,...a)):[this.produce(e,t,(e,t)=>{a=e,r=t}),a,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;nz(e)||n_(8),n$(e)&&(n$(t=e)||n_(10,t),e=function e(t){let a;if(!nz(t)||n0(t))return t;let r=t[nL],n=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,a=nZ(t,r.scope_.immer_.useStrictShallowCopy_),n=r.scope_.immer_.shouldUseStrictIteration()}else a=nZ(t,!0);return nU(a,(t,r)=>{nV(a,t,e(r))},n),r&&(r.finalized_=!1),a}(t));let a=n6(this),r=sc(e,void 0);return r[nL].isManual_=!0,n3(a),r}finishDraft(e,t){let a=e&&e[nL];a&&a.isManual_||n_(9);let{scope_:r}=a;return n5(r,t),n9(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){let r=t[a];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}a>-1&&(t=t.slice(a+1));let r=n2("Patches").applyPatches_;return n$(e)?r(e,t):this.produce(e,e=>r(e,t))}};function sc(e,t){let a=nG(e)?n2("MapSet").proxyMap_(e,t):nY(e)?n2("MapSet").proxySet_(e,t):function(e,t){let a=Array.isArray(e),r={type_:+!!a,scope_:t?t.scope_:i,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=r,s=sa;a&&(n=[r],s=sr);let{revoke:l,proxy:o}=Proxy.revocable(n,s);return r.draft_=o,r.revoke_=l,o}(e,t);return(t?t.scope_:i).drafts_.push(a),a}new so().produce;var sd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},su=rI({name:"tooltip",initialState:{itemInteraction:{click:sd,hover:sd},axisInteraction:{click:sd,hover:sd},keyboardInteraction:sd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:rP()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:r}=t.payload,n=a0(e).tooltipItemPayloads.indexOf(a);n>-1&&(e.tooltipItemPayloads[n]=r)},prepare:rP()},removeTooltipEntrySettings:{reducer(e,t){var a=a0(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:rP()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:sm,replaceTooltipEntrySettings:sx,removeTooltipEntrySettings:sh,setTooltipSettingsState:sp,setActiveMouseOverItemIndex:sf,mouseLeaveItem:sb,mouseLeaveChart:sg,setActiveClickItemIndex:sy,setMouseOverAxisIndex:sv,setMouseClickAxisIndex:sj,setSyncInteraction:sk,setKeyboardInteraction:sw}=su.actions,sN=su.reducer,sC=rI({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:r}=t.payload;null!=a&&(e.dataStartIndex=a),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:sS,setDataStartEndIndexes:sP,setComputedData:sM}=sC.actions,sO=sC.reducer,sE=rI({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,r,n,s;e.margin.top=null!=(a=t.payload.top)?a:0,e.margin.right=null!=(r=t.payload.right)?r:0,e.margin.bottom=null!=(n=t.payload.bottom)?n:0,e.margin.left=null!=(s=t.payload.left)?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:sA,setLayout:sT,setChartSize:sI,setScale:sR}=sE.actions,sD=sE.reducer,sL=e.i(14192),s_=(0,z.createContext)(null),sF=e=>e,s$=()=>{var e=(0,z.useContext)(s_);return e?e.store.dispatch:sF},sz=()=>{},sq=()=>sz,sW=(e,t)=>e===t;function sB(e){var t=(0,z.useContext)(s_),a=(0,z.useMemo)(()=>t?t=>{if(null!=t)return e(t)}:sz,[t,e]);return(0,sL.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:sq,t?t.store.getState:sz,t?t.store.getState:sz,a,sW)}var sU=e.i(78164),sK=e=>e.legend.settings,sH=rc([e=>e.legend.payload,sK],(e,t)=>{var{itemSorter:a}=t,r=e.flat(1);return a?(0,sU.default)(r,a):r});function sV(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function sG(e){return function(){return e}}function sY(e,t){if((n=e.length)>1)for(var a,r,n,s=1,i=e[t[0]],l=i.length;s<n;++s)for(r=i,i=e[t[s]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(r[a][1])?r[a][0]:r[a][1]}function sX(e){for(var t=e.length,a=Array(t);--t>=0;)a[t]=t;return a}function sZ(e,t){return e[t]}function sJ(e){let t=[];return t.key=e,t}function sQ(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function s0(e){return Number.isFinite(e)}function s1(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function s2(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function s5(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s2(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s2(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s4(e,t,a){return null==e||null==t?a:nc(t)?(0,na.default)(e,t,a):"function"==typeof t?t(e):a}Array.prototype.slice;var s3=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,s6=(e,t,a,r)=>{if(r)return e.map(e=>e.coordinate);var n,s,i=e.map(e=>(e.coordinate===t&&(n=!0),e.coordinate===a&&(s=!0),e.coordinate));return n||i.push(t),s||i.push(a),i},s8=(e,t,a)=>{if(!e)return null;var{duplicateDomain:r,type:n,range:s,scale:i,realScaleType:l,isCategorical:o,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:m,axisType:x}=e;if(!i)return null;var h="scaleBand"===l&&i.bandwidth?i.bandwidth()/2:2,p=(t||a)&&"category"===n&&i.bandwidth?i.bandwidth()/h:0;return(p="angleAxis"===x&&s&&s.length>=2?2*ns(s[0]-s[1])*p:p,t&&(u||m))?(u||m||[]).map((e,t)=>{var a=r?r.indexOf(e):e,n=i.map(a);return s0(n)?{coordinate:n+p,value:e,offset:p,index:t}:null}).filter(nb):o&&c?c.map((e,t)=>{var a=i.map(e);return s0(a)?{coordinate:a+p,value:e,index:t,offset:p}:null}).filter(nb):i.ticks&&!a&&null!=d?i.ticks(d).map((e,t)=>{var a=i.map(e);return s0(a)?{coordinate:a+p,value:e,index:t,offset:p}:null}).filter(nb):i.domain().map((e,t)=>{var a=i.map(e);return s0(a)?{coordinate:a+p,value:r?r[e]:e,index:t,offset:p}:null}).filter(nb)},s9={sign:e=>{var t,a=e.length;if(!(a<=0)){var r=null==(t=e[0])?void 0:t.length;if(null!=r&&!(r<=0))for(var n=0;n<r;++n)for(var s=0,i=0,l=0;l<a;++l){var o=e[l],c=null==o?void 0:o[n];if(null!=c){var d=c[1],u=c[0],m=ni(d)?u:d;m>=0?(c[0]=s,s+=m,c[1]=s):(c[0]=i,i+=m,c[1]=i)}}}},expand:function(e,t){if((r=e.length)>0){for(var a,r,n,s=0,i=e[0].length;s<i;++s){for(n=a=0;a<r;++a)n+=e[a][s][1]||0;if(n)for(a=0;a<r;++a)e[a][s][1]/=n}sY(e,t)}},none:sY,silhouette:function(e,t){if((a=e.length)>0){for(var a,r=0,n=e[t[0]],s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=e[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}sY(e,t)}},wiggle:function(e,t){if((n=e.length)>0&&(r=(a=e[t[0]]).length)>0){for(var a,r,n,s=0,i=1;i<r;++i){for(var l=0,o=0,c=0;l<n;++l){for(var d=e[t[l]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,x=0;x<l;++x){var h=e[t[x]];m+=(h[i][1]||0)-(h[i-1][1]||0)}o+=u,c+=m*u}a[i-1][1]+=a[i-1][0]=s,o&&(s-=c/o)}a[i-1][1]+=a[i-1][0]=s,sY(e,t)}},positive:e=>{var t,a=e.length;if(!(a<=0)){var r=null==(t=e[0])?void 0:t.length;if(null!=r&&!(r<=0))for(var n=0;n<r;++n)for(var s=0,i=0;i<a;++i){var l=e[i],o=null==l?void 0:l[n];if(null!=o){var c=ni(o[1])?o[0]:o[1];c>=0?(o[0]=s,s+=c,o[1]=s):(o[0]=0,o[1]=0)}}}}};function s7(e){return null==e?void 0:String(e)}function ie(e){var{axis:t,ticks:a,bandSize:r,entry:n,index:s,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&null!=n[t.dataKey]){var l=np(a,"value",n[t.dataKey]);if(l)return l.coordinate+r/2}return null!=a&&a[s]?a[s].coordinate+r/2:null}var o=s4(n,null==i?t.dataKey:i),c=t.scale.map(o);return no(c)?c:null}var it=e=>{var{axis:t,ticks:a,offset:r,bandSize:n,entry:s,index:i}=e;if("category"===t.type)return a[i]?a[i].coordinate+r:null;var l=s4(s,t.dataKey,t.scale.domain()[i]);if(null==l)return null;var o=t.scale.map(l);return no(o)?o-n/2+r:null},ia=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ir=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,is=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!a||r>0)return r}if(e&&t&&t.length>=2){for(var n=(0,sU.default)(t,e=>e.coordinate),s=1/0,i=1,l=n.length;i<l;i++){var o=n[i],c=n[i-1];s=Math.min(((null==o?void 0:o.coordinate)||0)-((null==c?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return a?void 0:0};function ii(e){var{tooltipEntrySettings:t,dataKey:a,payload:r,value:n,name:s}=e;return s5(s5({},t),{},{dataKey:a,payload:r,value:n,name:s})}function il(e,t){return e?String(e):"string"==typeof t?t:void 0}var io=e=>e.layout.width,ic=e=>e.layout.height,id=e=>e.layout.scale,iu=e=>e.layout.margin,im=rc(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ix=rc(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ih="data-recharts-item-index",ip="data-recharts-item-id";function ib(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ig(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ib(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ib(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var iy=rc([io,ic,iu,e=>e.brush.height,function(e){return ix(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return ix(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return im(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return im(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},sK,e=>e.legend.size],(e,t,a,r,n,s,i,l,o,c)=>{var d={left:(a.left||0)+n,right:(a.right||0)+s},u=ig(ig({},{top:(a.top||0)+i,bottom:(a.bottom||0)+l}),d),m=u.bottom;u.bottom+=r;var x=e-(u=((e,t,a)=>{if(t&&a){var{width:r,height:n}=a,{align:s,verticalAlign:i,layout:l}=t;if(("vertical"===l||"horizontal"===l&&"middle"===i)&&"center"!==s&&no(e[s]))return s5(s5({},e),{},{[s]:e[s]+(r||0)});if(("horizontal"===l||"vertical"===l&&"center"===s)&&"middle"!==i&&no(e[i]))return s5(s5({},e),{},{[i]:e[i]+(n||0)})}return e})(u,o,c)).left-u.right,h=t-u.top-u.bottom;return ig(ig({brushBottom:m},u),{},{width:Math.max(x,0),height:Math.max(h,0)})}),iv=rc(iy,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ij=rc(io,ic,(e,t)=>({x:0,y:0,width:e,height:t})),ik=(0,z.createContext)(null),iw=()=>null!=(0,z.useContext)(ik),iN=e=>e.brush,iC=rc([iN,iy,iu],(e,t,a)=>({height:e.height,x:no(e.x)?e.x:t.left,y:no(e.y)?e.y:t.top+t.height+t.brushBottom-((null==a?void 0:a.bottom)||0),width:no(e.width)?e.width:t.width})),iS=e.i(89031),iP=function(e,t){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];if("u">typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>r[s++]))}},iM="100%",iO="100%",iE={width:-1,height:-1},iA=(e,t,a)=>{var{width:r=iM,height:n=iO,aspect:s,maxHeight:i}=a,l=nl(r)?e:Number(r),o=nl(n)?t:Number(n);return s&&s>0&&(l?o=l/s:o&&(l=o*s),i&&null!=o&&o>i&&(o=i)),{calculatedWidth:l,calculatedHeight:o}},iT={width:0,height:0,overflow:"visible"},iI={width:0,overflowX:"visible"},iR={height:0,overflowY:"visible"},iD={};function iL(){return(iL=Object.assign.bind()).apply(null,arguments)}function i_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function iF(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i_(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var i$=(0,z.createContext)(iE);function iz(e){var{children:t,width:a,height:r}=e,n=(0,z.useMemo)(()=>({width:a,height:r}),[a,r]);return s1(n.width)&&s1(n.height)?z.createElement(i$.Provider,{value:n},t):null}var iq=()=>(0,z.useContext)(i$),iW=(0,z.forwardRef)((e,t)=>{var{aspect:a,initialDimension:r=iE,width:n,height:s,minWidth:i=0,minHeight:l,maxHeight:o,children:c,debounce:d=0,id:u,className:m,onResize:x,style:h={}}=e,p=(0,z.useRef)(null),f=(0,z.useRef)();f.current=x,(0,z.useImperativeHandle)(t,()=>p.current);var[b,g]=(0,z.useState)({containerWidth:r.width,containerHeight:r.height}),y=(0,z.useCallback)((e,t)=>{g(a=>{var r=Math.round(e),n=Math.round(t);return a.containerWidth===r&&a.containerHeight===n?a:{containerWidth:r,containerHeight:n}})},[]);(0,z.useEffect)(()=>{if(null==p.current||"u"<typeof ResizeObserver)return ng;var e=e=>{var t,a=e[0];if(null!=a){var{width:r,height:n}=a.contentRect;y(r,n),null==(t=f.current)||t.call(f,r,n)}};d>0&&(e=(0,iS.default)(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:a,height:r}=p.current.getBoundingClientRect();return y(a,r),t.observe(p.current),()=>{t.disconnect()}},[y,d]);var{containerWidth:v,containerHeight:j}=b;iP(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:k,calculatedHeight:w}=iA(v,j,{width:n,height:s,aspect:a,maxHeight:o});return iP(null!=k&&k>0||null!=w&&w>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",k,w,n,s,i,l,a),z.createElement("div",{id:u?"".concat(u):void 0,className:(0,eh.clsx)("recharts-responsive-container",m),style:iF(iF({},h),{},{width:n,height:s,minWidth:i,minHeight:l,maxHeight:o}),ref:p},z.createElement("div",{style:(e=>{var{width:t,height:a}=e,r=nl(t),n=nl(a);return r&&n?iT:r?iI:n?iR:iD})({width:n,height:s})},z.createElement(iz,{width:k,height:w},c)))}),iB=(0,z.forwardRef)((e,t)=>{var a=iq();if(s1(a.width)&&s1(a.height))return e.children;var{width:r,height:n}=function(e){var{width:t,height:a,aspect:r}=e,n=t,s=a;return void 0===n&&void 0===s?(n=iM,s=iO):void 0===n?n=r&&r>0?void 0:iM:void 0===s&&(s=r&&r>0?void 0:iO),{width:n,height:s}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:i}=iA(void 0,void 0,{width:r,height:n,aspect:e.aspect,maxHeight:e.maxHeight});return no(s)&&no(i)?z.createElement(iz,{width:s,height:i},e.children):z.createElement(iW,iL({},e,{width:r,height:n,ref:t}))});function iU(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var iK=()=>{var e,t=iw(),a=sB(iv),r=sB(iC),n=null==(e=sB(iN))?void 0:e.padding;return t&&r&&n?{width:r.width-n.left-n.right,height:r.height-n.top-n.bottom,x:n.left,y:n.top}:a},iH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iV=()=>{var e;return null!=(e=sB(iy))?e:iH},iG=e=>e.layout.layoutType,iY=()=>{var e=sB(iG);if("horizontal"===e||"vertical"===e)return e},iX=e=>{var t=e.layout.layoutType;if("centric"===t||"radial"===t)return t},iZ=e=>{var t=s$(),a=iw(),{width:r,height:n}=e,s=iq(),i=r,l=n;return s&&(i=s.width>0?s.width:r,l=s.height>0?s.height:n),(0,z.useEffect)(()=>{!a&&s1(i)&&s1(l)&&t(sI({width:i,height:l}))},[t,a,i,l]),null},iJ=e.i(79191);function iQ(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function i0(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}e.s([],89429),e.i(89429),e.s([],67136),e.i(67136);class i1 extends Map{constructor(e,t=i5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,a]of e)this.set(t,a)}get(e){return super.get(i2(this,e))}has(e){return super.has(i2(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):(e.set(r,a),a)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)&&(a=e.get(r),e.delete(r)),a}(this,e))}}function i2({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):a}function i5(e){return null!==e&&"object"==typeof e?e.valueOf():e}let i4=Symbol("implicit");function i3(){var e=new i1,t=[],a=[],r=i4;function n(n){let s=e.get(n);if(void 0===s){if(r!==i4)return r;e.set(n,s=t.push(n)-1)}return a[s%a.length]}return n.domain=function(a){if(!arguments.length)return t.slice();for(let r of(t=[],e=new i1,a))e.has(r)||e.set(r,t.push(r)-1);return n},n.range=function(e){return arguments.length?(a=Array.from(e),n):a.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return i3(t,a).unknown(r)},iQ.apply(n,arguments),n}function i6(){var e,t,a=i3().unknown(void 0),r=a.domain,n=a.range,s=0,i=1,l=!1,o=0,c=0,d=.5;function u(){var a=r().length,u=i<s,m=u?i:s,x=u?s:i;e=(x-m)/Math.max(1,a-o+2*c),l&&(e=Math.floor(e)),m+=(x-m-e*(a-o))*d,t=e*(1-o),l&&(m=Math.round(m),t=Math.round(t));var h=(function(e,t,a){e*=1,t*=1,a=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+a;for(var r=-1,n=0|Math.max(0,Math.ceil((t-e)/a)),s=Array(n);++r<n;)s[r]=e+r*a;return s})(a).map(function(t){return m+e*t});return n(u?h.reverse():h)}return delete a.unknown,a.domain=function(e){return arguments.length?(r(e),u()):r()},a.range=function(e){return arguments.length?([s,i]=e,s*=1,i*=1,u()):[s,i]},a.rangeRound=function(e){return[s,i]=e,s*=1,i*=1,l=!0,u()},a.bandwidth=function(){return t},a.step=function(){return e},a.round=function(e){return arguments.length?(l=!!e,u()):l},a.padding=function(e){return arguments.length?(o=Math.min(1,c=+e),u()):o},a.paddingInner=function(e){return arguments.length?(o=Math.min(1,e),u()):o},a.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},a.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},a.copy=function(){return i6(r(),[s,i]).round(l).paddingInner(o).paddingOuter(c).align(d)},iQ.apply(u(),arguments)}function i8(){return function e(t){var a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(a())},t}(i6.apply(null,arguments).paddingInner(1))}let i9=Math.sqrt(50),i7=Math.sqrt(10),le=Math.sqrt(2);function lt(e,t,a){let r,n,s,i=(t-e)/Math.max(0,a),l=Math.floor(Math.log10(i)),o=i/Math.pow(10,l),c=o>=i9?10:o>=i7?5:o>=le?2:1;return(l<0?(r=Math.round(e*(s=Math.pow(10,-l)/c)),n=Math.round(t*s),r/s<e&&++r,n/s>t&&--n,s=-s):(r=Math.round(e/(s=Math.pow(10,l)*c)),n=Math.round(t/s),r*s<e&&++r,n*s>t&&--n),n<r&&.5<=a&&a<2)?lt(e,t,2*a):[r,n,s]}function la(e,t,a){if(t*=1,e*=1,!((a*=1)>0))return[];if(e===t)return[e];let r=t<e,[n,s,i]=r?lt(t,e,a):lt(e,t,a);if(!(s>=n))return[];let l=s-n+1,o=Array(l);if(r)if(i<0)for(let e=0;e<l;++e)o[e]=-((s-e)/i);else for(let e=0;e<l;++e)o[e]=(s-e)*i;else if(i<0)for(let e=0;e<l;++e)o[e]=-((n+e)/i);else for(let e=0;e<l;++e)o[e]=(n+e)*i;return o}function lr(e,t,a){return lt(e*=1,t*=1,a*=1)[2]}function ln(e,t,a){t*=1,e*=1,a*=1;let r=t<e,n=r?lr(t,e,a):lr(e,t,a);return(r?-1:1)*(n<0?-(1/n):n)}function ls(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function li(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ll(e){let t,a,r;function n(e,r,s=0,i=e.length){if(s<i){if(0!==t(r,r))return i;do{let t=s+i>>>1;0>a(e[t],r)?s=t+1:i=t}while(s<i)}return s}return 2!==e.length?(t=ls,a=(t,a)=>ls(e(t),a),r=(t,a)=>e(t)-a):(t=e===ls||e===li?e:lo,a=e,r=e),{left:n,center:function(e,t,a=0,s=e.length){let i=n(e,t,a,s-1);return i>a&&r(e[i-1],t)>-r(e[i],t)?i-1:i},right:function(e,r,n=0,s=e.length){if(n<s){if(0!==t(r,r))return s;do{let t=n+s>>>1;0>=a(e[t],r)?n=t+1:s=t}while(n<s)}return n}}}function lo(){return 0}function lc(e){return null===e?NaN:+e}let ld=ll(ls),lu=ld.right;function lm(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function lx(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function lh(){}ld.left,ll(lc).center;var lp="\\s*([+-]?\\d+)\\s*",lf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lg=/^#([0-9a-f]{3,8})$/,ly=RegExp(`^rgb\\(${lp},${lp},${lp}\\)$`),lv=RegExp(`^rgb\\(${lb},${lb},${lb}\\)$`),lj=RegExp(`^rgba\\(${lp},${lp},${lp},${lf}\\)$`),lk=RegExp(`^rgba\\(${lb},${lb},${lb},${lf}\\)$`),lw=RegExp(`^hsl\\(${lf},${lb},${lb}\\)$`),lN=RegExp(`^hsla\\(${lf},${lb},${lb},${lf}\\)$`),lC={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function lS(){return this.rgb().formatHex()}function lP(){return this.rgb().formatRgb()}function lM(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=lg.exec(e))?(a=t[1].length,t=parseInt(t[1],16),6===a?lO(t):3===a?new lT(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===a?lE(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===a?lE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ly.exec(e))?new lT(t[1],t[2],t[3],1):(t=lv.exec(e))?new lT(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=lj.exec(e))?lE(t[1],t[2],t[3],t[4]):(t=lk.exec(e))?lE(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lw.exec(e))?lF(t[1],t[2]/100,t[3]/100,1):(t=lN.exec(e))?lF(t[1],t[2]/100,t[3]/100,t[4]):lC.hasOwnProperty(e)?lO(lC[e]):"transparent"===e?new lT(NaN,NaN,NaN,0):null}function lO(e){return new lT(e>>16&255,e>>8&255,255&e,1)}function lE(e,t,a,r){return r<=0&&(e=t=a=NaN),new lT(e,t,a,r)}function lA(e,t,a,r){var n;return 1==arguments.length?((n=e)instanceof lh||(n=lM(n)),n)?new lT((n=n.rgb()).r,n.g,n.b,n.opacity):new lT:new lT(e,t,a,null==r?1:r)}function lT(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}function lI(){return`#${l_(this.r)}${l_(this.g)}${l_(this.b)}`}function lR(){let e=lD(this.opacity);return`${1===e?"rgb(":"rgba("}${lL(this.r)}, ${lL(this.g)}, ${lL(this.b)}${1===e?")":`, ${e})`}`}function lD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lL(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function l_(e){return((e=lL(e))<16?"0":"")+e.toString(16)}function lF(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new lz(e,t,a,r)}function l$(e){if(e instanceof lz)return new lz(e.h,e.s,e.l,e.opacity);if(e instanceof lh||(e=lM(e)),!e)return new lz;if(e instanceof lz)return e;var t=(e=e.rgb()).r/255,a=e.g/255,r=e.b/255,n=Math.min(t,a,r),s=Math.max(t,a,r),i=NaN,l=s-n,o=(s+n)/2;return l?(i=t===s?(a-r)/l+(a<r)*6:a===s?(r-t)/l+2:(t-a)/l+4,l/=o<.5?s+n:2-s-n,i*=60):l=o>0&&o<1?0:i,new lz(i,l,o,e.opacity)}function lz(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}function lq(e){return(e=(e||0)%360)<0?e+360:e}function lW(e){return Math.max(0,Math.min(1,e||0))}function lB(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}function lU(e,t,a,r,n){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*a+(1+3*e+3*s-3*i)*r+i*n)/6}lm(lh,lM,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lS,formatHex:lS,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return l$(this).formatHsl()},formatRgb:lP,toString:lP}),lm(lT,lA,lx(lh,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new lT(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new lT(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lT(lL(this.r),lL(this.g),lL(this.b),lD(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lI,formatHex:lI,formatHex8:function(){return`#${l_(this.r)}${l_(this.g)}${l_(this.b)}${l_((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:lR,toString:lR})),lm(lz,function(e,t,a,r){return 1==arguments.length?l$(e):new lz(e,t,a,null==r?1:r)},lx(lh,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new lz(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new lz(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,n=2*a-r;return new lT(lB(e>=240?e-240:e+120,n,r),lB(e,n,r),lB(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new lz(lq(this.h),lW(this.s),lW(this.l),lD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=lD(this.opacity);return`${1===e?"hsl(":"hsla("}${lq(this.h)}, ${100*lW(this.s)}%, ${100*lW(this.l)}%${1===e?")":`, ${e})`}`}}));let lK=e=>()=>e;function lH(e,t){var a=t-e;return a?function(t){return e+t*a}:lK(isNaN(e)?t:e)}let lV=function e(t){var a,r=1==(a=+t)?lH:function(e,t){var r,n,s;return t-e?(r=e,n=t,r=Math.pow(r,s=a),n=Math.pow(n,s)-r,s=1/s,function(e){return Math.pow(r+e*n,s)}):lK(isNaN(e)?t:e)};function n(e,t){var a=r((e=lA(e)).r,(t=lA(t)).r),n=r(e.g,t.g),s=r(e.b,t.b),i=lH(e.opacity,t.opacity);return function(t){return e.r=a(t),e.g=n(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function lG(e){return function(t){var a,r,n=t.length,s=Array(n),i=Array(n),l=Array(n);for(a=0;a<n;++a)r=lA(t[a]),s[a]=r.r||0,i[a]=r.g||0,l[a]=r.b||0;return s=e(s),i=e(i),l=e(l),r.opacity=1,function(e){return r.r=s(e),r.g=i(e),r.b=l(e),r+""}}}function lY(e,t){return e*=1,t*=1,function(a){return e*(1-a)+t*a}}lG(function(e){var t=e.length-1;return function(a){var r=a<=0?a=0:a>=1?(a=1,t-1):Math.floor(a*t),n=e[r],s=e[r+1],i=r>0?e[r-1]:2*n-s,l=r<t-1?e[r+2]:2*s-n;return lU((a-r/t)*t,i,n,s,l)}}),lG(function(e){var t=e.length;return function(a){var r=Math.floor(((a%=1)<0?++a:a)*t),n=e[(r+t-1)%t],s=e[r%t],i=e[(r+1)%t],l=e[(r+2)%t];return lU((a-r/t)*t,n,s,i,l)}});var lX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lZ=RegExp(lX.source,"g");function lJ(e,t){var a,r,n=typeof t;return null==t||"boolean"===n?lK(t):("number"===n?lY:"string"===n?(r=lM(t))?(t=r,lV):function(e,t){var a,r,n,s,i,l=lX.lastIndex=lZ.lastIndex=0,o=-1,c=[],d=[];for(e+="",t+="";(n=lX.exec(e))&&(s=lZ.exec(t));)(i=s.index)>l&&(i=t.slice(l,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(s=s[0])?c[o]?c[o]+=s:c[++o]=s:(c[++o]=null,d.push({i:o,x:lY(n,s)})),l=lZ.lastIndex;return l<t.length&&(i=t.slice(l),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?(a=d[0].x,function(e){return a(e)+""}):(r=t,function(){return r}):(t=d.length,function(e){for(var a,r=0;r<t;++r)c[(a=d[r]).i]=a.x(e);return c.join("")})}:t instanceof lM?lV:t instanceof Date?function(e,t){var a=new Date;return e*=1,t*=1,function(r){return a.setTime(e*(1-r)+t*r),a}}:!ArrayBuffer.isView(a=t)||a instanceof DataView?Array.isArray(t)?function(e,t){var a,r=t?t.length:0,n=e?Math.min(r,e.length):0,s=Array(n),i=Array(r);for(a=0;a<n;++a)s[a]=lJ(e[a],t[a]);for(;a<r;++a)i[a]=t[a];return function(e){for(a=0;a<n;++a)i[a]=s[a](e);return i}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var a,r={},n={};for(a in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)a in e?r[a]=lJ(e[a],t[a]):n[a]=t[a];return function(e){for(a in r)n[a]=r[a](e);return n}}:lY:function(e,t){t||(t=[]);var a,r=e?Math.min(t.length,e.length):0,n=t.slice();return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}})(e,t)}function lQ(e,t){return e*=1,t*=1,function(a){return Math.round(e*(1-a)+t*a)}}function l0(e){return+e}var l1=[0,1];function l2(e){return e}function l5(e,t){var a;return(t-=e*=1)?function(a){return(a-e)/t}:(a=isNaN(t)?NaN:.5,function(){return a})}function l4(e,t,a){var r=e[0],n=e[1],s=t[0],i=t[1];return n<r?(r=l5(n,r),s=a(i,s)):(r=l5(r,n),s=a(s,i)),function(e){return s(r(e))}}function l3(e,t,a){var r=Math.min(e.length,t.length)-1,n=Array(r),s=Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)n[i]=l5(e[i],e[i+1]),s[i]=a(t[i],t[i+1]);return function(t){var a=lu(e,t,1,r)-1;return s[a](n[a](t))}}function l6(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l8(){var e,t,a,r,n,s,i=l1,l=l1,o=lJ,c=l2;function d(){var e,t,a,o=Math.min(i.length,l.length);return c!==l2&&(e=i[0],t=i[o-1],e>t&&(a=e,e=t,t=a),c=function(a){return Math.max(e,Math.min(t,a))}),r=o>2?l3:l4,n=s=null,u}function u(t){return null==t||isNaN(t*=1)?a:(n||(n=r(i.map(e),l,o)))(e(c(t)))}return u.invert=function(a){return c(t((s||(s=r(l,i.map(e),lY)))(a)))},u.domain=function(e){return arguments.length?(i=Array.from(e,l0),d()):i.slice()},u.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},u.rangeRound=function(e){return l=Array.from(e),o=lQ,d()},u.clamp=function(e){return arguments.length?(c=!!e||l2,d()):c!==l2},u.interpolate=function(e){return arguments.length?(o=e,d()):o},u.unknown=function(e){return arguments.length?(a=e,u):a},function(a,r){return e=a,t=r,d()}}function l9(){return l8()(l2,l2)}function l7(e,t){if(!isFinite(e)||0===e)return null;var a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+e.slice(a+1)]}function oe(e){return(e=l7(Math.abs(e)))?e[1]:NaN}var ot=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oa(e){var t;if(!(t=ot.exec(e)))throw Error("invalid format: "+e);return new or({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function or(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function on(e,t){var a=l7(e,t);if(!a)return e+"";var r=a[0],n=a[1];return n<0?"0."+Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+Array(n-r.length+2).join("0")}oa.prototype=or.prototype,or.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let os={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>on(100*e,t),r:on,s:function(e,t){var a=l7(e,t);if(!a)return l=void 0,e.toPrecision(t);var r=a[0],n=a[1],s=n-(l=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,i=r.length;return s===i?r:s>i?r+Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+Array(1-s).join("0")+l7(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oi(e){return e}var ol=Array.prototype.map,oo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function oc(e,t,a,r){var n,s,i=ln(e,t,a);switch((r=oa(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(s=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(oe(l)/3)))-oe(Math.abs(i))))||(r.precision=s),d(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(s=Math.max(0,oe(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(n=Math.abs(n=i)))-oe(n))+1)||(r.precision=s-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(s=Math.max(0,-oe(Math.abs(i))))||(r.precision=s-("%"===r.type)*2)}return c(r)}function od(e){var t=e.domain;return e.ticks=function(e){var a=t();return la(a[0],a[a.length-1],null==e?10:e)},e.tickFormat=function(e,a){var r=t();return oc(r[0],r[r.length-1],null==e?10:e,a)},e.nice=function(a){null==a&&(a=10);var r,n,s=t(),i=0,l=s.length-1,o=s[i],c=s[l],d=10;for(c<o&&(n=o,o=c,c=n,n=i,i=l,l=n);d-- >0;){if((n=lr(o,c,a))===r)return s[i]=o,s[l]=c,t(s);if(n>0)o=Math.floor(o/n)*n,c=Math.ceil(c/n)*n;else if(n<0)o=Math.ceil(o*n)/n,c=Math.floor(c*n)/n;else break;r=n}return e},e}function ou(){var e=l9();return e.copy=function(){return l6(e,ou())},iQ.apply(e,arguments),od(e)}function om(e){var t;function a(e){return null==e||isNaN(e*=1)?t:e}return a.invert=a,a.domain=a.range=function(t){return arguments.length?(e=Array.from(t,l0),a):e.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return om(e).unknown(t)},e=arguments.length?Array.from(e,l0):[0,1],od(a)}function ox(e,t){e=e.slice();var a,r=0,n=e.length-1,s=e[r],i=e[n];return i<s&&(a=r,r=n,n=a,a=s,s=i,i=a),e[r]=t.floor(s),e[n]=t.ceil(i),e}function oh(e){return Math.log(e)}function op(e){return Math.exp(e)}function of(e){return-Math.log(-e)}function ob(e){return-Math.exp(-e)}function og(e){return isFinite(e)?+("1e"+e):e<0?0:e}function oy(e){return(t,a)=>-e(-t,a)}function ov(e){let t,a,r=e(oh,op),n=r.domain,s=10;function i(){var i,l;return t=(i=s)===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i),a=10===(l=s)?og:l===Math.E?Math.exp:e=>Math.pow(l,e),n()[0]<0?(t=oy(t),a=oy(a),e(of,ob)):e(oh,op),r}return r.base=function(e){return arguments.length?(s=+e,i()):s},r.domain=function(e){return arguments.length?(n(e),i()):n()},r.ticks=e=>{let r,i,l=n(),o=l[0],c=l[l.length-1],d=c<o;d&&([o,c]=[c,o]);let u=t(o),m=t(c),x=null==e?10:+e,h=[];if(!(s%1)&&m-u<x){if(u=Math.floor(u),m=Math.ceil(m),o>0){for(;u<=m;++u)for(r=1;r<s;++r)if(!((i=u<0?r/a(-u):r*a(u))<o)){if(i>c)break;h.push(i)}}else for(;u<=m;++u)for(r=s-1;r>=1;--r)if(!((i=u>0?r/a(-u):r*a(u))<o)){if(i>c)break;h.push(i)}2*h.length<x&&(h=la(o,c,x))}else h=la(u,m,Math.min(m-u,x)).map(a);return d?h.reverse():h},r.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(s%1||null!=(n=oa(n)).precision||(n.trim=!0),n=c(n)),e===1/0)return n;let i=Math.max(1,s*e/r.ticks().length);return e=>{let r=e/a(Math.round(t(e)));return r*s<s-.5&&(r*=s),r<=i?n(e):""}},r.nice=()=>n(ox(n(),{floor:e=>a(Math.floor(t(e))),ceil:e=>a(Math.ceil(t(e)))})),r}function oj(){let e=ov(l8()).domain([1,10]);return e.copy=()=>l6(e,oj()).base(e.base()),iQ.apply(e,arguments),e}function ok(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ow(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oN(e){var t=1,a=e(ok(1),ow(t));return a.constant=function(a){return arguments.length?e(ok(t=+a),ow(t)):t},od(a)}function oC(){var e=oN(l8());return e.copy=function(){return l6(e,oC()).constant(e.constant())},iQ.apply(e,arguments)}function oS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oP(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function oM(e){return e<0?-e*e:e*e}function oO(e){var t=e(l2,l2),a=1;return t.exponent=function(t){return arguments.length?1==(a=+t)?e(l2,l2):.5===a?e(oP,oM):e(oS(a),oS(1/a)):a},od(t)}function oE(){var e=oO(l8());return e.copy=function(){return l6(e,oE()).exponent(e.exponent())},iQ.apply(e,arguments),e}function oA(){return oE.apply(null,arguments).exponent(.5)}function oT(e){return Math.sign(e)*e*e}function oI(){var e,t=l9(),a=[0,1],r=!1;function n(a){var n,s=Math.sign(n=t(a))*Math.sqrt(Math.abs(n));return isNaN(s)?e:r?Math.round(s):s}return n.invert=function(e){return t.invert(oT(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain()},n.range=function(e){return arguments.length?(t.range((a=Array.from(e,l0)).map(oT)),n):a.slice()},n.rangeRound=function(e){return n.range(e).round(!0)},n.round=function(e){return arguments.length?(r=!!e,n):r},n.clamp=function(e){return arguments.length?(t.clamp(e),n):t.clamp()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return oI(t.domain(),a).round(r).clamp(t.clamp()).unknown(e)},iQ.apply(n,arguments),od(n)}function oR(e,t){let a;if(void 0===t)for(let t of e)null!=t&&(a<t||void 0===a&&t>=t)&&(a=t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(a<n||void 0===a&&n>=n)&&(a=n)}return a}function oD(e,t){let a;if(void 0===t)for(let t of e)null!=t&&(a>t||void 0===a&&t>=t)&&(a=t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(a>n||void 0===a&&n>=n)&&(a=n)}return a}function oL(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function o_(e,t,a){let r=e[t];e[t]=e[a],e[a]=r}function oF(){var e,t=[],a=[],r=[];function n(){var e=0,n=Math.max(1,a.length);for(r=Array(n-1);++e<n;)r[e-1]=function(e,t,a=lc){if(!(!(r=e.length)||isNaN(t*=1))){if(t<=0||r<2)return+a(e[0],0,e);if(t>=1)return+a(e[r-1],r-1,e);var r,n=(r-1)*t,s=Math.floor(n),i=+a(e[s],s,e);return i+(a(e[s+1],s+1,e)-i)*(n-s)}}(t,e/n);return s}function s(t){return null==t||isNaN(t*=1)?e:a[lu(r,t)]}return s.invertExtent=function(e){var n=a.indexOf(e);return n<0?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();for(let a of(t=[],e))null==a||isNaN(a*=1)||t.push(a);return t.sort(ls),n()},s.range=function(e){return arguments.length?(a=Array.from(e),n()):a.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return oF().domain(t).range(a).unknown(e)},iQ.apply(s,arguments)}function o$(){var e,t=0,a=1,r=1,n=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[lu(n,t,0,r)]:e}function l(){var e=-1;for(n=Array(r);++e<r;)n[e]=((e+1)*a-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?([t,a]=e,t*=1,a*=1,l()):[t,a]},i.range=function(e){return arguments.length?(r=(s=Array.from(e)).length-1,l()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,n[0]]:i>=r?[n[r-1],a]:[n[i-1],n[i]]},i.unknown=function(t){return arguments.length&&(e=t),i},i.thresholds=function(){return n.slice()},i.copy=function(){return o$().domain([t,a]).range(s).unknown(e)},iQ.apply(od(i),arguments)}function oz(){var e,t=[.5],a=[0,1],r=1;function n(n){return null!=n&&n<=n?a[lu(t,n,0,r)]:e}return n.domain=function(e){return arguments.length?(r=Math.min((t=Array.from(e)).length,a.length-1),n):t.slice()},n.range=function(e){return arguments.length?(a=Array.from(e),r=Math.min(t.length,a.length-1),n):a.slice()},n.invertExtent=function(e){var r=a.indexOf(e);return[t[r-1],t[r]]},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return oz().domain(t).range(a).unknown(e)},iQ.apply(n,arguments)}c=(o=function(e){var t,a,r,n=void 0===e.grouping||void 0===e.thousands?oi:(t=ol.call(e.grouping,Number),a=e.thousands+"",function(e,r){for(var n=e.length,s=[],i=0,l=t[0],o=0;n>0&&l>0&&(o+l+1>r&&(l=Math.max(1,r-o)),s.push(e.substring(n-=l,n+l)),!((o+=l+1)>r));)l=t[i=(i+1)%t.length];return s.reverse().join(a)}),s=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?oi:(r=ol.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return r[+e]})}),d=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"":e.minus+"",m=void 0===e.nan?"NaN":e.nan+"";function x(e,t){var a=(e=oa(e)).fill,r=e.align,x=e.sign,h=e.symbol,p=e.zero,f=e.width,b=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(b=!0,v="g"):os[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===a&&"="===r)&&(p=!0,a="0",r="=");var j=(t&&void 0!==t.prefix?t.prefix:"")+("$"===h?s:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():""),k=("$"===h?i:/[%p]/.test(v)?d:"")+(t&&void 0!==t.suffix?t.suffix:""),w=os[v],N=/[defgprs%]/.test(v);function C(e){var t,s,i,d=j,h=k;if("c"===v)h=w(e)+h,e="";else{var C=(e*=1)<0||1/e<0;if(e=isNaN(e)?m:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,a=e.length,r=1,n=-1;r<a;++r)switch(e[r]){case".":n=t=r;break;case"0":0===n&&(n=r),t=r;break;default:if(!+e[r])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),C&&0==+e&&"+"!==x&&(C=!1),d=(C?"("===x?x:u:"-"===x||"("===x?"":x)+d,h=("s"!==v||isNaN(e)||void 0===l?"":oo[8+l/3])+h+(C&&"("===x?")":""),N){for(t=-1,s=e.length;++t<s;)if(48>(i=e.charCodeAt(t))||i>57){h=(46===i?o+e.slice(t+1):e.slice(t))+h,e=e.slice(0,t);break}}}b&&!p&&(e=n(e,1/0));var S=d.length+e.length+h.length,P=S<f?Array(f-S+1).join(a):"";switch(b&&p&&(e=n(P+e,P.length?f-h.length:1/0),P=""),r){case"<":e=d+e+h+P;break;case"=":e=d+P+e+h;break;case"^":e=P.slice(0,S=P.length>>1)+d+e+h+P.slice(S);break;default:e=P+d+e+h}return c(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),C.toString=function(){return e+""},C}return{format:x,formatPrefix:function(e,t){var a=3*Math.max(-8,Math.min(8,Math.floor(oe(t)/3))),r=Math.pow(10,-a),n=x(((e=oa(e)).type="f",e),{suffix:oo[8+a/3]});return function(e){return n(r*e)}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,d=o.formatPrefix;let oq=new Date,oW=new Date;function oB(e,t,a,r){function n(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return n.floor=t=>(e(t=new Date(+t)),t),n.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),n.round=e=>{let t=n(e),a=n.ceil(e);return e-t<a-e?t:a},n.offset=(e,a)=>(t(e=new Date(+e),null==a?1:Math.floor(a)),e),n.range=(a,r,s)=>{let i,l=[];if(a=n.ceil(a),s=null==s?1:Math.floor(s),!(a<r)||!(s>0))return l;do l.push(i=new Date(+a)),t(a,s),e(a);while(i<a&&a<r)return l},n.filter=a=>oB(t=>{if(t>=t)for(;e(t),!a(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!a(e););else for(;--r>=0;)for(;t(e,1),!a(e););}),a&&(n.count=(t,r)=>(oq.setTime(+t),oW.setTime(+r),e(oq),e(oW),Math.floor(a(oq,oW))),n.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?n.filter(r?t=>r(t)%e==0:t=>n.count(0,t)%e==0):n:null),n}let oU=oB(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oU.every=e=>isFinite(e=Math.floor(e))&&e>0?oB(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)}):null,oU.range;let oK=oB(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oK.every=e=>isFinite(e=Math.floor(e))&&e>0?oB(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)}):null,oK.range;let oH=oB(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oH.range;let oV=oB(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oV.range;function oG(e){return oB(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}let oY=oG(0),oX=oG(1),oZ=oG(2),oJ=oG(3),oQ=oG(4),o0=oG(5),o1=oG(6);function o2(e){return oB(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}oY.range,oX.range,oZ.range,oJ.range,oQ.range,o0.range,o1.range;let o5=o2(0),o4=o2(1),o3=o2(2),o6=o2(3),o8=o2(4),o9=o2(5),o7=o2(6);o5.range,o4.range,o3.range,o6.range,o8.range,o9.range,o7.range;let ce=oB(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1);ce.range;let ct=oB(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1);ct.range;let ca=oB(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5));ca.range;let cr=oB(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours());cr.range;let cn=oB(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours());cn.range;let cs=oB(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes());cs.range;let ci=oB(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes());ci.range;let cl=oB(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds());cl.range;let co=oB(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function cc(e,t,a,r,n,s){let i=[[cl,1,1e3],[cl,5,5e3],[cl,15,15e3],[cl,30,3e4],[s,1,6e4],[s,5,3e5],[s,15,9e5],[s,30,18e5],[n,1,36e5],[n,3,108e5],[n,6,216e5],[n,12,432e5],[r,1,864e5],[r,2,1728e5],[a,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function l(t,a,r){let n=Math.abs(a-t)/r,s=ll(([,,e])=>e).right(i,n);if(s===i.length)return e.every(ln(t/31536e6,a/31536e6,r));if(0===s)return co.every(Math.max(ln(t,a,r),1));let[l,o]=i[n/i[s-1][2]<i[s][2]/n?s-1:s];return l.every(o)}return[function(e,t,a){let r=t<e;r&&([e,t]=[t,e]);let n=a&&"function"==typeof a.range?a:l(e,t,a),s=n?n.range(e,+t+1):[];return r?s.reverse():s},l]}co.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?oB(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):co:null,co.range;let[cd,cu]=cc(oK,oV,o5,ca,cn,ci),[cm,cx]=cc(oU,oH,oY,ce,cr,cs);function ch(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cf(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}var cb={"-":"",_:" ",0:"0"},cg=/^\s*\d+/,cy=/^%/,cv=/[\\^$*+?|[\]().{}]/g;function cj(e,t,a){var r=e<0?"-":"",n=(r?-e:e)+"",s=n.length;return r+(s<a?Array(a-s+1).join(t)+n:n)}function ck(e){return e.replace(cv,"\\$&")}function cw(e){return RegExp("^(?:"+e.map(ck).join("|")+")","i")}function cN(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function cC(e,t,a){var r=cg.exec(t.slice(a,a+1));return r?(e.w=+r[0],a+r[0].length):-1}function cS(e,t,a){var r=cg.exec(t.slice(a,a+1));return r?(e.u=+r[0],a+r[0].length):-1}function cP(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.U=+r[0],a+r[0].length):-1}function cM(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.V=+r[0],a+r[0].length):-1}function cO(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.W=+r[0],a+r[0].length):-1}function cE(e,t,a){var r=cg.exec(t.slice(a,a+4));return r?(e.y=+r[0],a+r[0].length):-1}function cA(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function cT(e,t,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function cI(e,t,a){var r=cg.exec(t.slice(a,a+1));return r?(e.q=3*r[0]-3,a+r[0].length):-1}function cR(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.m=r[0]-1,a+r[0].length):-1}function cD(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.d=+r[0],a+r[0].length):-1}function cL(e,t,a){var r=cg.exec(t.slice(a,a+3));return r?(e.m=0,e.d=+r[0],a+r[0].length):-1}function c_(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.H=+r[0],a+r[0].length):-1}function cF(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.M=+r[0],a+r[0].length):-1}function c$(e,t,a){var r=cg.exec(t.slice(a,a+2));return r?(e.S=+r[0],a+r[0].length):-1}function cz(e,t,a){var r=cg.exec(t.slice(a,a+3));return r?(e.L=+r[0],a+r[0].length):-1}function cq(e,t,a){var r=cg.exec(t.slice(a,a+6));return r?(e.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function cW(e,t,a){var r=cy.exec(t.slice(a,a+1));return r?a+r[0].length:-1}function cB(e,t,a){var r=cg.exec(t.slice(a));return r?(e.Q=+r[0],a+r[0].length):-1}function cU(e,t,a){var r=cg.exec(t.slice(a));return r?(e.s=+r[0],a+r[0].length):-1}function cK(e,t){return cj(e.getDate(),t,2)}function cH(e,t){return cj(e.getHours(),t,2)}function cV(e,t){return cj(e.getHours()%12||12,t,2)}function cG(e,t){return cj(1+ce.count(oU(e),e),t,3)}function cY(e,t){return cj(e.getMilliseconds(),t,3)}function cX(e,t){return cY(e,t)+"000"}function cZ(e,t){return cj(e.getMonth()+1,t,2)}function cJ(e,t){return cj(e.getMinutes(),t,2)}function cQ(e,t){return cj(e.getSeconds(),t,2)}function c0(e){var t=e.getDay();return 0===t?7:t}function c1(e,t){return cj(oY.count(oU(e)-1,e),t,2)}function c2(e){var t=e.getDay();return t>=4||0===t?oQ(e):oQ.ceil(e)}function c5(e,t){return e=c2(e),cj(oQ.count(oU(e),e)+(4===oU(e).getDay()),t,2)}function c4(e){return e.getDay()}function c3(e,t){return cj(oX.count(oU(e)-1,e),t,2)}function c6(e,t){return cj(e.getFullYear()%100,t,2)}function c8(e,t){return cj((e=c2(e)).getFullYear()%100,t,2)}function c9(e,t){return cj(e.getFullYear()%1e4,t,4)}function c7(e,t){var a=e.getDay();return cj((e=a>=4||0===a?oQ(e):oQ.ceil(e)).getFullYear()%1e4,t,4)}function de(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cj(t/60|0,"0",2)+cj(t%60,"0",2)}function dt(e,t){return cj(e.getUTCDate(),t,2)}function da(e,t){return cj(e.getUTCHours(),t,2)}function dr(e,t){return cj(e.getUTCHours()%12||12,t,2)}function dn(e,t){return cj(1+ct.count(oK(e),e),t,3)}function ds(e,t){return cj(e.getUTCMilliseconds(),t,3)}function di(e,t){return ds(e,t)+"000"}function dl(e,t){return cj(e.getUTCMonth()+1,t,2)}function dc(e,t){return cj(e.getUTCMinutes(),t,2)}function dd(e,t){return cj(e.getUTCSeconds(),t,2)}function du(e){var t=e.getUTCDay();return 0===t?7:t}function dm(e,t){return cj(o5.count(oK(e)-1,e),t,2)}function dx(e){var t=e.getUTCDay();return t>=4||0===t?o8(e):o8.ceil(e)}function dh(e,t){return e=dx(e),cj(o8.count(oK(e),e)+(4===oK(e).getUTCDay()),t,2)}function dp(e){return e.getUTCDay()}function df(e,t){return cj(o4.count(oK(e)-1,e),t,2)}function db(e,t){return cj(e.getUTCFullYear()%100,t,2)}function dg(e,t){return cj((e=dx(e)).getUTCFullYear()%100,t,2)}function dy(e,t){return cj(e.getUTCFullYear()%1e4,t,4)}function dv(e,t){var a=e.getUTCDay();return cj((e=a>=4||0===a?o8(e):o8.ceil(e)).getUTCFullYear()%1e4,t,4)}function dj(){return"+0000"}function dk(){return"%"}function dw(e){return+e}function dN(e){return Math.floor(e/1e3)}function dC(e){return new Date(e)}function dS(e){return e instanceof Date?+e:+new Date(+e)}function dP(e,t,a,r,n,s,i,l,o,c){var d=l9(),u=d.invert,m=d.domain,x=c(".%L"),h=c(":%S"),p=c("%I:%M"),f=c("%I %p"),b=c("%a %d"),g=c("%b %d"),y=c("%B"),v=c("%Y");function j(e){return(o(e)<e?x:l(e)<e?h:i(e)<e?p:s(e)<e?f:r(e)<e?n(e)<e?b:g:a(e)<e?y:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,dS)):m().map(dC)},d.ticks=function(t){var a=m();return e(a[0],a[a.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var a=m();return e&&"function"==typeof e.range||(e=t(a[0],a[a.length-1],null==e?10:e)),e?m(ox(a,e)):d},d.copy=function(){return l6(d,dP(e,t,a,r,n,s,i,l,o,c))},d}function dM(){return iQ.apply(dP(cm,cx,oU,oH,oY,ce,cr,cs,cl,m).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dO(){return iQ.apply(dP(cd,cu,oK,oV,o5,ct,cn,ci,cl,x).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dE(){var e,t,a,r,n,s=0,i=1,l=l2,o=!1;function c(t){return null==t||isNaN(t*=1)?n:l(0===a?.5:(t=(r(t)-e)*a,o?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var a,r;return arguments.length?([a,r]=t,l=e(a,r),c):[l(0),l(1)]}}return c.domain=function(n){return arguments.length?([s,i]=n,e=r(s*=1),t=r(i*=1),a=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(o=!!e,c):o},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=d(lJ),c.rangeRound=d(lQ),c.unknown=function(e){return arguments.length?(n=e,c):n},function(n){return r=n,e=n(s),t=n(i),a=e===t?0:1/(t-e),c}}function dA(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dT(){var e=od(dE()(l2));return e.copy=function(){return dA(e,dT())},i0.apply(e,arguments)}function dI(){var e=ov(dE()).domain([1,10]);return e.copy=function(){return dA(e,dI()).base(e.base())},i0.apply(e,arguments)}function dR(){var e=oN(dE());return e.copy=function(){return dA(e,dR()).constant(e.constant())},i0.apply(e,arguments)}function dD(){var e=oO(dE());return e.copy=function(){return dA(e,dD()).exponent(e.exponent())},i0.apply(e,arguments)}function dL(){return dD.apply(null,arguments).exponent(.5)}function d_(){var e=[],t=l2;function a(a){if(null!=a&&!isNaN(a*=1))return t((lu(e,a,1)-1)/(e.length-1))}return a.domain=function(t){if(!arguments.length)return e.slice();for(let a of(e=[],t))null==a||isNaN(a*=1)||e.push(a);return e.sort(ls),a},a.interpolator=function(e){return arguments.length?(t=e,a):t},a.range=function(){return e.map((a,r)=>t(r/(e.length-1)))},a.quantiles=function(t){return Array.from({length:t+1},(a,r)=>(function(e,t,a){if(!(!(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(yield t);else{let a=-1;for(let r of e)null!=(r=t(r,++a,e))&&(r*=1)>=r&&(yield r)}}(e,void 0))).length)||isNaN(t*=1))){if(t<=0||r<2)return oD(e);if(t>=1)return oR(e);var r,n=(r-1)*t,s=Math.floor(n),i=oR((function e(t,a,r=0,n=1/0,s){if(a=Math.floor(a),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=a&&a<=n))return t;for(s=void 0===s?oL:function(e=ls){if(e===ls)return oL;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,a)=>{let r=e(t,a);return r||0===r?r:(0===e(a,a))-(0===e(t,t))}}(s);n>r;){if(n-r>600){let i=n-r+1,l=a-r+1,o=Math.log(i),c=.5*Math.exp(2*o/3),d=.5*Math.sqrt(o*c*(i-c)/i)*(l-i/2<0?-1:1),u=Math.max(r,Math.floor(a-l*c/i+d)),m=Math.min(n,Math.floor(a+(i-l)*c/i+d));e(t,a,u,m,s)}let i=t[a],l=r,o=n;for(o_(t,r,a),s(t[n],i)>0&&o_(t,r,n);l<o;){for(o_(t,l,o),++l,--o;0>s(t[l],i);)++l;for(;s(t[o],i)>0;)--o}0===s(t[r],i)?o_(t,r,o):o_(t,++o,n),o<=a&&(r=o+1),a<=o&&(n=o-1)}return t})(e,s).subarray(0,s+1));return i+(oD(e.subarray(s+1))-i)*(n-s)}})(e,r/t))},a.copy=function(){return d_(t).domain(e)},i0.apply(a,arguments)}function dF(){var e,t,a,r,n,s,i,l=0,o=.5,c=1,d=1,u=l2,m=!1;function x(e){return isNaN(e*=1)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?r:n),u(m?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var a,r,n;return arguments.length?([a,r,n]=t,u=function(e,t){void 0===t&&(t=e,e=lJ);for(var a=0,r=t.length-1,n=t[0],s=Array(r<0?0:r);a<r;)s[a]=e(n,n=t[++a]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return s[t](e-t)}}(e,[a,r,n]),x):[u(0),u(.5),u(1)]}}return x.domain=function(i){return arguments.length?([l,o,c]=i,e=s(l*=1),t=s(o*=1),a=s(c*=1),r=e===t?0:.5/(t-e),n=t===a?0:.5/(a-t),d=t<e?-1:1,x):[l,o,c]},x.clamp=function(e){return arguments.length?(m=!!e,x):m},x.interpolator=function(e){return arguments.length?(u=e,x):u},x.range=h(lJ),x.rangeRound=h(lQ),x.unknown=function(e){return arguments.length?(i=e,x):i},function(i){return s=i,e=i(l),t=i(o),a=i(c),r=e===t?0:.5/(t-e),n=t===a?0:.5/(a-t),d=t<e?-1:1,x}}function d$(){var e=od(dF()(l2));return e.copy=function(){return dA(e,d$())},i0.apply(e,arguments)}function dz(){var e=ov(dF()).domain([.1,1,10]);return e.copy=function(){return dA(e,dz()).base(e.base())},i0.apply(e,arguments)}function dq(){var e=oN(dF());return e.copy=function(){return dA(e,dq()).constant(e.constant())},i0.apply(e,arguments)}function dW(){var e=oO(dF());return e.copy=function(){return dA(e,dW()).exponent(e.exponent())},i0.apply(e,arguments)}function dB(){return dW.apply(null,arguments).exponent(.5)}m=(u=function(e){var t=e.dateTime,a=e.date,r=e.time,n=e.periods,s=e.days,i=e.shortDays,l=e.months,o=e.shortMonths,c=cw(n),d=cN(n),u=cw(s),m=cN(s),x=cw(i),h=cN(i),p=cw(l),f=cN(l),b=cw(o),g=cN(o),y={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return o[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:cK,e:cK,f:cX,g:c8,G:c7,H:cH,I:cV,j:cG,L:cY,m:cZ,M:cJ,p:function(e){return n[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:dw,s:dN,S:cQ,u:c0,U:c1,V:c5,w:c4,W:c3,x:null,X:null,y:c6,Y:c9,Z:de,"%":dk},v={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return o[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:dt,e:dt,f:di,g:dg,G:dv,H:da,I:dr,j:dn,L:ds,m:dl,M:dc,p:function(e){return n[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:dw,s:dN,S:dd,u:du,U:dm,V:dh,w:dp,W:df,x:null,X:null,y:db,Y:dy,Z:dj,"%":dk},j={a:function(e,t,a){var r=x.exec(t.slice(a));return r?(e.w=h.get(r[0].toLowerCase()),a+r[0].length):-1},A:function(e,t,a){var r=u.exec(t.slice(a));return r?(e.w=m.get(r[0].toLowerCase()),a+r[0].length):-1},b:function(e,t,a){var r=b.exec(t.slice(a));return r?(e.m=g.get(r[0].toLowerCase()),a+r[0].length):-1},B:function(e,t,a){var r=p.exec(t.slice(a));return r?(e.m=f.get(r[0].toLowerCase()),a+r[0].length):-1},c:function(e,a,r){return N(e,t,a,r)},d:cD,e:cD,f:cq,g:cA,G:cE,H:c_,I:c_,j:cL,L:cz,m:cR,M:cF,p:function(e,t,a){var r=c.exec(t.slice(a));return r?(e.p=d.get(r[0].toLowerCase()),a+r[0].length):-1},q:cI,Q:cB,s:cU,S:c$,u:cS,U:cP,V:cM,w:cC,W:cO,x:function(e,t,r){return N(e,a,t,r)},X:function(e,t,a){return N(e,r,t,a)},y:cA,Y:cE,Z:cT,"%":cW};function k(e,t){return function(a){var r,n,s,i=[],l=-1,o=0,c=e.length;for(a instanceof Date||(a=new Date(+a));++l<c;)37===e.charCodeAt(l)&&(i.push(e.slice(o,l)),null!=(n=cb[r=e.charAt(++l)])?r=e.charAt(++l):n="e"===r?" ":"0",(s=t[r])&&(r=s(a,n)),i.push(r),o=l+1);return i.push(e.slice(o,l)),i.join("")}}function w(e,t){return function(a){var r,n,s=cf(1900,void 0,1);if(N(s,e,a+="",0)!=a.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!t||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(n=(r=cp(cf(s.y,0,1))).getUTCDay())>4||0===n?o4.ceil(r):o4(r),r=ct.offset(r,(s.V-1)*7),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(r=(n=(r=ch(cf(s.y,0,1))).getDay())>4||0===n?oX.ceil(r):oX(r),r=ce.offset(r,(s.V-1)*7),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:+("W"in s)),n="Z"in s?cp(cf(s.y,0,1)).getUTCDay():ch(cf(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(n+5)%7:s.w+7*s.U-(n+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,cp(s)):ch(s)}}function N(e,t,a,r){for(var n,s,i=0,l=t.length,o=a.length;i<l;){if(r>=o)return -1;if(37===(n=t.charCodeAt(i++))){if(!(s=j[(n=t.charAt(i++))in cb?t.charAt(i++):n])||(r=s(e,a,r))<0)return -1}else if(n!=a.charCodeAt(r++))return -1}return r}return y.x=k(a,y),y.X=k(r,y),y.c=k(t,y),v.x=k(a,v),v.X=k(r,v),v.c=k(t,v),{format:function(e){var t=k(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,u.parse,x=u.utcFormat,u.utcParse,e.s(["scaleBand",()=>i6,"scaleDiverging",()=>d$,"scaleDivergingLog",()=>dz,"scaleDivergingPow",()=>dW,"scaleDivergingSqrt",()=>dB,"scaleDivergingSymlog",()=>dq,"scaleIdentity",()=>om,"scaleImplicit",0,i4,"scaleLinear",()=>ou,"scaleLog",()=>oj,"scaleOrdinal",()=>i3,"scalePoint",()=>i8,"scalePow",()=>oE,"scaleQuantile",()=>oF,"scaleQuantize",()=>o$,"scaleRadial",()=>oI,"scaleSequential",()=>dT,"scaleSequentialLog",()=>dI,"scaleSequentialPow",()=>dD,"scaleSequentialQuantile",()=>d_,"scaleSequentialSqrt",()=>dL,"scaleSequentialSymlog",()=>dR,"scaleSqrt",()=>oA,"scaleSymlog",()=>oC,"scaleThreshold",()=>oz,"scaleTime",()=>dM,"scaleUtc",()=>dO,"tickFormat",()=>oc],38208),e.i(38208),e.s(["scaleBand",()=>i6,"scaleDiverging",()=>d$,"scaleDivergingLog",()=>dz,"scaleDivergingPow",()=>dW,"scaleDivergingSqrt",()=>dB,"scaleDivergingSymlog",()=>dq,"scaleIdentity",()=>om,"scaleImplicit",0,i4,"scaleLinear",()=>ou,"scaleLog",()=>oj,"scaleOrdinal",()=>i3,"scalePoint",()=>i8,"scalePow",()=>oE,"scaleQuantile",()=>oF,"scaleQuantize",()=>o$,"scaleRadial",()=>oI,"scaleSequential",()=>dT,"scaleSequentialLog",()=>dI,"scaleSequentialPow",()=>dD,"scaleSequentialQuantile",()=>d_,"scaleSequentialSqrt",()=>dL,"scaleSequentialSymlog",()=>dR,"scaleSqrt",()=>oA,"scaleSymlog",()=>oC,"scaleThreshold",()=>oz,"scaleTime",()=>dM,"scaleUtc",()=>dO,"tickFormat",()=>oc],82029);var dU=e.i(82029),dK=e=>e.chartData,dH=rc([dK],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),dV=(e,t,a,r)=>r?dH(e):dK(e),dG=(e,t,a)=>a?dH(e):dK(e);function dY(e){if(Array.isArray(e)&&2===e.length){var[t,a]=e;if(s0(t)&&s0(a))return!0}return!1}function dX(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function dZ(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var a,r,[n,s]=e;if(s0(n))a=n;else if("function"==typeof n)return;if(s0(s))r=s;else if("function"==typeof s)return;var i=[a,r];if(dY(i))return i}}var dJ=e.i(17133);function dQ(e){return 0===e?1:Math.floor(new dJ.default(e).abs().log(10).toNumber())+1}function d0(e,t,a){for(var r=new dJ.default(e),n=0,s=[];r.lt(t)&&n<1e5;)s.push(r.toNumber()),r=r.add(a),n++;return s}var d1=e=>{var[t,a]=e,[r,n]=[t,a];return t>a&&([r,n]=[a,t]),[r,n]},d2=(e,t,a)=>{if(e.lte(0))return new dJ.default(0);var r=dQ(e.toNumber()),n=new dJ.default(10).pow(r),s=e.div(n),i=1!==r?.05:.1,l=new dJ.default(Math.ceil(s.div(i).toNumber())).add(a).mul(i).mul(n);return new dJ.default(t?l.toNumber():Math.ceil(l.toNumber()))},d5=function(e,t,a,r){var n,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(a-1)))return{step:new dJ.default(0),tickMin:new dJ.default(0),tickMax:new dJ.default(0)};var i=d2(new dJ.default(t).sub(e).div(a-1),r,s),l=Math.ceil((n=e<=0&&t>=0?new dJ.default(0):(n=new dJ.default(e).add(t).div(2)).sub(new dJ.default(n).mod(i))).sub(e).div(i).toNumber()),o=Math.ceil(new dJ.default(t).sub(n).div(i).toNumber()),c=l+o+1;return c>a?d5(e,t,a,r,s+1):(c<a&&(o=t>0?o+(a-c):o,l=t>0?l:l+(a-c)),{step:i,tickMin:n.sub(new dJ.default(l).mul(i)),tickMax:n.add(new dJ.default(o).mul(i))})},d4=function(e){var[t,a]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=Math.max(r,2),[i,l]=d1([t,a]);if(i===-1/0||l===1/0){var o=l===1/0?[i,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),l];return t>a?o.reverse():o}if(i===l)return((e,t,a)=>{var r=new dJ.default(1),n=new dJ.default(e);if(!n.isint()&&a){var s=Math.abs(e);s<1?(r=new dJ.default(10).pow(dQ(e)-1),n=new dJ.default(Math.floor(n.div(r).toNumber())).mul(r)):s>1&&(n=new dJ.default(Math.floor(e)))}else 0===e?n=new dJ.default(Math.floor((t-1)/2)):a||(n=new dJ.default(Math.floor(e)));for(var i=Math.floor((t-1)/2),l=[],o=0;o<t;o++)l.push(n.add(new dJ.default(o-i).mul(r)).toNumber());return l})(i,r,n);var{step:c,tickMin:d,tickMax:u}=d5(i,l,s,n,0),m=d0(d,u.add(new dJ.default(.1).mul(c)),c);return t>a?m.reverse():m},d3=function(e,t){var[a,r]=e,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[s,i]=d1([a,r]);if(s===-1/0||i===1/0)return[a,r];if(s===i)return[s];var l=Math.max(t,2),o=d2(new dJ.default(i).sub(s).div(l-1),n,0),c=[...d0(new dJ.default(s),new dJ.default(i),o),i];return!1===n&&(c=c.map(e=>Math.round(e))),a>r?c.reverse():c},d6=e=>e.rootProps.maxBarSize,d8=e=>e.rootProps.barCategoryGap,d9=e=>e.rootProps.stackOffset,d7=e=>e.rootProps.reverseStackOrder,ue=e=>e.options.chartName,ut=e=>e.rootProps.syncId,ua=e=>e.rootProps.syncMethod,ur=e=>e.options.eventEmitter;function un(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function us(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?un(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):un(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ui=Math.PI/180,ul=e=>e*Math.PI/180,uo=(e,t,a,r)=>({x:e+Math.cos(-ui*r)*a,y:t+Math.sin(-ui*r)*a}),uc=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(t-(a.top||0)-(a.bottom||0)))/2},ud={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},uu={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:ud.axis},um={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,tickLine:!0,type:"auto",zIndex:ud.axis},ux=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t};function uh(e,t,a){return"auto"!==a?a:null!=e?s3(e,t)?"category":"number":void 0}function up(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function uf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?up(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):up(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ub={allowDataOverflow:uu.allowDataOverflow,allowDecimals:uu.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uu.angleAxisId,includeHidden:!1,name:void 0,reversed:uu.reversed,scale:uu.scale,tick:uu.tick,tickCount:void 0,ticks:void 0,type:uu.type,unit:void 0},ug={allowDataOverflow:um.allowDataOverflow,allowDecimals:um.allowDecimals,allowDuplicatedCategory:um.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:um.radiusAxisId,includeHidden:um.includeHidden,name:void 0,reversed:um.reversed,scale:um.scale,tick:um.tick,tickCount:um.tickCount,ticks:void 0,type:um.type,unit:void 0},uy=rc([(e,t)=>{if(null!=t)return e.polarAxis.angleAxis[t]},iX],(e,t)=>{if(null!=e)return e;var a,r=null!=(a=uh(t,"angleAxis",ub.type))?a:"category";return uf(uf({},ub),{},{type:r})}),uv=rc([(e,t)=>e.polarAxis.radiusAxis[t],iX],(e,t)=>{if(null!=e)return e;var a,r=null!=(a=uh(t,"radiusAxis",ug.type))?a:"category";return uf(uf({},ug),{},{type:r})}),uj=e=>e.polarOptions,uk=rc([io,ic,iy],uc),uw=rc([uj,uk],(e,t)=>{if(null!=e)return nm(e.innerRadius,t,0)}),uN=rc([uj,uk],(e,t)=>{if(null!=e)return nm(e.outerRadius,t,.8*t)}),uC=rc([uj],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]}),uS=rc([uy,uC],ux),uP=rc([uk,uw,uN],(e,t,a)=>{if(null!=e&&null!=t&&null!=a)return[t,a]}),uM=rc([uv,uP],ux),uO=rc([iG,uj,uw,uN,io,ic],(e,t,a,r,n,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=a&&null!=r){var{cx:i,cy:l,startAngle:o,endAngle:c}=t;return{cx:nm(i,n,n/2),cy:nm(l,s,s/2),innerRadius:a,outerRadius:r,startAngle:o,endAngle:c,clockWise:!1}}}),uE=(e,t)=>t,uA=(e,t,a)=>a;function uT(e){return null==e?void 0:e.id}function uI(e,t,a){var{chartData:r=[]}=t,{allowDuplicatedCategory:n,dataKey:s}=a,i=new Map;return e.forEach(e=>{var t,a=null!=(t=e.data)?t:r;if(null!=a&&0!==a.length){var l=uT(e);a.forEach((t,a)=>{var r,o=null==s||n?a:String(s4(t,s,null)),c=s4(t,e.dataKey,0);Object.assign(r=i.has(o)?i.get(o):{},{[l]:c}),i.set(o,r)})}}),Array.from(i.values())}function uR(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var uD=(e,t)=>e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1];function uL(e,t){return!!(Array.isArray(e)&&Array.isArray(t))&&0===e.length&&0===t.length||e===t}var u_=e=>{var t=iG(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},uF=e=>e.tooltip.settings.axisId;function u$(e){var t=e.ticks,a=e.bandwidth,r=e.range(),n=[Math.min(...r),Math.max(...r)];return{domain:()=>e.domain(),range:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>n),rangeMin:()=>n[0],rangeMax:()=>n[1],isInRange(e){var t=n[0],a=n[1];return t<=a?e>=t&&e<=a:e>=a&&e<=t},bandwidth:a?()=>a.call(e):void 0,ticks:t?a=>t.call(e,a):void 0,map:(t,a)=>{var r=e(t);if(null!=r){if(e.bandwidth&&null!=a&&a.position){var n=e.bandwidth();switch(a.position){case"middle":r+=n/2;break;case"end":r+=n}}return r}}}}function uz(e,t,a){if("function"==typeof e)return u$(e.copy().domain(t).range(a));if(null!=e){var r=function(e){if(e in dU)return dU[e]();var t="scale".concat(nf(e));if(t in dU)return dU[t]()}(e);if(null!=r)return r.domain(t).range(a),u$(r)}}var uq=(e,t)=>{if(null!=t)if("linear"!==e)return t;else{if(!dY(t)){for(var a,r,n=0;n<t.length;n++){var s=t[n];s0(s)&&((void 0===a||s<a)&&(a=s),(void 0===r||s>r)&&(r=s))}return void 0!==a&&void 0!==r?[a,r]:void 0}return t}};function uW(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function uB(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uW(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var uU=[0,"auto"],uK={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uH=(e,t)=>e.cartesianAxis.xAxis[t],uV=(e,t)=>{var a=uH(e,t);return null==a?uK:a},uG={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:uU,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},uY=(e,t)=>e.cartesianAxis.yAxis[t],uX=(e,t)=>{var a=uY(e,t);return null==a?uG:a},uZ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},uJ=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return null==a?uZ:a},uQ=(e,t,a)=>{switch(t){case"xAxis":return uV(e,a);case"yAxis":return uX(e,a);case"zAxis":return uJ(e,a);case"angleAxis":return uy(e,a);case"radiusAxis":return uv(e,a);default:throw Error("Unexpected axis type: ".concat(t))}},u0=(e,t,a)=>{switch(t){case"xAxis":return uV(e,a);case"yAxis":return uX(e,a);case"angleAxis":return uy(e,a);case"radiusAxis":return uv(e,a);default:throw Error("Unexpected axis type: ".concat(t))}},u1=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function u2(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var u5=e=>e.graphicalItems.cartesianItems,u4=rc([uE,uA],u2),u3=(e,t,a)=>e.filter(a).filter(e=>(null==t?void 0:t.includeHidden)===!0||!e.hide),u6=rc([u5,uQ,u4],u3,{memoizeOptions:{resultEqualityCheck:uL}}),u8=rc([u6],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(uR)),u9=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),u7=rc([u6],u9),me=e=>e.map(e=>e.data).filter(Boolean).flat(1),mt=rc([u6],me,{memoizeOptions:{resultEqualityCheck:uL}}),ma=(e,t)=>{var{chartData:a=[],dataStartIndex:r,dataEndIndex:n}=t;return e.length>0?e:a.slice(r,n+1)},mr=rc([mt,dV],ma),mn=(e,t,a)=>(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:s4(e,t.dataKey)})):a.length>0?a.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:s4(e,t)}))):e.map(e=>({value:e})),ms=rc([mr,uQ,u6],mn);function mi(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function ml(e){if(nc(e)||e instanceof Date){var t=Number(e);if(s0(t))return t}}function mo(e){if(Array.isArray(e)){var t=[ml(e[0]),ml(e[1])];return dY(t)?t:void 0}var a=ml(e);if(null!=a)return[a,a]}function mc(e){return e.map(ml).filter(nb)}var md=e=>{var t=u_(e),a=uF(e);return u0(e,t,a)},mu=rc([md],e=>null==e?void 0:e.dataKey),mm=rc([u8,dV,md],uI),mx=(e,t,a,r)=>Object.fromEntries(Object.entries(t.reduce((e,t)=>{if(null==t.stackId)return e;var a=e[t.stackId];return null==a&&(a=[]),a.push(t),e[t.stackId]=a,e},{})).map(t=>{var n,s,i,[l,o]=t,c=r?[...o].reverse():o,d=c.map(uT);return[l,{stackedData:(s=null!=(n=s9[a])?n:sY,(i=(function(){var e=sG([]),t=sX,a=sY,r=sZ;function n(n){var s,i,l=Array.from(e.apply(this,arguments),sJ),o=l.length,c=-1;for(let e of n)for(s=0,++c;s<o;++s)(l[s][c]=[0,+r(e,l[s].key,c,n)]).data=e;for(s=0,i=sV(t(l));s<o;++s)l[i[s]].index=s;return a(l,i),l}return n.keys=function(t){return arguments.length?(e="function"==typeof t?t:sG(Array.from(t)),n):e},n.value=function(e){return arguments.length?(r="function"==typeof e?e:sG(+e),n):r},n.order=function(e){return arguments.length?(t=null==e?sX:"function"==typeof e?e:sG(Array.from(e)),n):t},n.offset=function(e){return arguments.length?(a=null==e?sY:e,n):a},n})().keys(d).value((e,t)=>Number(s4(e,t,0))).order(sX).offset(s)(e)).forEach((t,a)=>{t.forEach((t,r)=>{var n=s4(e[r],d[a],0);Array.isArray(n)&&2===n.length&&no(n[0])&&no(n[1])&&(t[0]=n[0],t[1]=n[1])})}),i),graphicalItems:c}]})),mh=rc([mm,u8,d9,d7],mx),mp=(e,t,a,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(null==r&&"zAxis"!==a){var i=((e,t,a)=>{if(null!=e){let r;return[(r=Object.keys(e).reduce((r,n)=>{var s=e[n];if(!s)return r;var{stackedData:i}=s,l=i.reduce((e,r)=>{var n,s=[Math.min(...n=sQ(r,t,a).flat(2).filter(no)),Math.max(...n)];return s0(s[0])&&s0(s[1])?[Math.min(e[0],s[0]),Math.max(e[1],s[1])]:e},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]}})(e,n,s);if(null==i||0!==i[0]||0!==i[1])return i}},mf=rc([uQ],e=>e.allowDataOverflow),mb=e=>{var t;if(null==e||!("domain"in e))return uU;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var a=mc(e.ticks);return[Math.min(...a),Math.max(...a)]}if("category"===e.type)return e.ticks.map(String)}return null!=(t=null==e?void 0:e.domain)?t:uU},mg=rc([uQ],mb),my=rc([mg,mf],dZ),mv=rc([mh,dK,uE,my],mp,{memoizeOptions:{resultEqualityCheck:uD}}),mj=e=>e.errorBars,mk=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t.filter(Boolean);if(0!==r.length){var n=r.flat();return[Math.min(...n),Math.max(...n)]}},mw=(e,t,a,r,n)=>{var s,i;if(a.length>0&&e.forEach(e=>{a.forEach(a=>{var l,o,c=null==(l=r[a.id])?void 0:l.filter(e=>mi(n,e)),d=s4(e,null!=(o=t.dataKey)?o:a.dataKey),u=!(!c||"number"!=typeof d||ni(d))&&c.length?mc(c.flatMap(t=>{var a,r,n=s4(e,t.dataKey);if(Array.isArray(n)?[a,r]=n:a=r=n,s0(a)&&s0(r))return[d-a,d+r]})):[];if(u.length>=2){var m=Math.min(...u),x=Math.max(...u);(null==s||m<s)&&(s=m),(null==i||x>i)&&(i=x)}var h=mo(d);null!=h&&(s=null==s?h[0]:Math.min(s,h[0]),i=null==i?h[1]:Math.max(i,h[1]))})}),(null==t?void 0:t.dataKey)!=null&&e.forEach(e=>{var a=mo(s4(e,t.dataKey));null!=a&&(s=null==s?a[0]:Math.min(s,a[0]),i=null==i?a[1]:Math.max(i,a[1]))}),s0(s)&&s0(i))return[s,i]},mN=rc([mr,uQ,u7,mj,uE],mw,{memoizeOptions:{resultEqualityCheck:uD}});function mC(e){var{value:t}=e;if(nc(t)||t instanceof Date)return t}var mS=e=>e.referenceElements.dots,mP=(e,t,a)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===a:e.yAxisId===a),mM=rc([mS,uE,uA],mP),mO=e=>e.referenceElements.areas,mE=rc([mO,uE,uA],mP),mA=e=>e.referenceElements.lines,mT=rc([mA,uE,uA],mP),mI=(e,t)=>{if(null!=e){var a=mc(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},mR=rc(mM,uE,mI),mD=(e,t)=>{if(null!=e){var a=mc(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},mL=rc([mE,uE],mD),m_=(e,t)=>{if(null!=e){var a=e.flatMap(e=>"xAxis"===t?function(e){if(null!=e.x)return mc([e.x]);var t,a=null==(t=e.segment)?void 0:t.map(e=>e.x);return null==a||0===a.length?[]:mc(a)}(e):function(e){if(null!=e.y)return mc([e.y]);var t,a=null==(t=e.segment)?void 0:t.map(e=>e.y);return null==a||0===a.length?[]:mc(a)}(e));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},mF=rc([mT,uE],m_),m$=rc(mR,mF,mL,(e,t,a)=>mk(e,a,t)),mz=(e,t,a,r,n,s,i,l)=>null!=a?a:function(e,t,a){if(a||null!=t){if("function"==typeof e&&null!=t)try{var r=e(t,a);if(dY(r))return dX(r,t,a)}catch(e){}if(Array.isArray(e)&&2===e.length){var n,s,[i,l]=e;if("auto"===i)null!=t&&(n=Math.min(...t));else if(no(i))n=i;else if("function"==typeof i)try{null!=t&&(n=i(null==t?void 0:t[0]))}catch(e){}else if("string"==typeof i&&ia.test(i)){var o=ia.exec(i);if(null==o||null==o[1]||null==t)n=void 0;else{var c=+o[1];n=t[0]-c}}else n=null==t?void 0:t[0];if("auto"===l)null!=t&&(s=Math.max(...t));else if(no(l))s=l;else if("function"==typeof l)try{null!=t&&(s=l(null==t?void 0:t[1]))}catch(e){}else if("string"==typeof l&&ir.test(l)){var d=ir.exec(l);if(null==d||null==d[1]||null==t)s=void 0;else{var u=+d[1];s=t[1]+u}}else s=null==t?void 0:t[1];var m=[n,s];if(dY(m))return null==t?m:dX(m,t,a)}}}(t,"vertical"===i&&"xAxis"===l||"horizontal"===i&&"yAxis"===l?mk(r,s,n):mk(s,n),e.allowDataOverflow),mq=rc([uQ,mg,my,mv,mN,m$,iG,uE],mz,{memoizeOptions:{resultEqualityCheck:uD}}),mW=[0,1],mB=(e,t,a,r,n,s,i)=>{if(null!=e&&null!=a&&0!==a.length||void 0!==i){var l,o,{dataKey:c,type:d}=e,u=s3(t,s);return u&&null==c?(0,iJ.default)(0,null!=(o=null==a?void 0:a.length)?o:0):"category"===d?(l=r.map(mC).filter(e=>null!=e),u&&(null==e.dataKey||e.allowDuplicatedCategory&&nx(l))?(0,iJ.default)(0,r.length):e.allowDuplicatedCategory?l:Array.from(new Set(l))):"expand"===n?mW:i}},mU=rc([uQ,iG,mr,ms,d9,uE,mq],mB),mK=(e,t,a)=>{if(null!=e){var{scale:r,type:n}=e;if("auto"===r)return"category"===n&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!t)?"point":"category"===n?"band":"linear";if("string"==typeof r){var s="scale".concat(nf(r));return s in dU?s:"point"}}},mH=rc([uQ,u1,ue],mK);function mV(e,t,a,r){if(null!=a&&null!=r)return"function"==typeof e.scale?uz(e.scale,a,r):uz(t,a,r)}var mG=(e,t,a)=>{var r=mb(t);if("auto"===a||"linear"===a){if(null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&dY(e))return d4(e,t.tickCount,t.allowDecimals);if(null!=t&&t.tickCount&&"number"===t.type&&dY(e))return d3(e,t.tickCount,t.allowDecimals)}},mY=rc([mU,u0,mH],mG),mX=(e,t,a,r)=>{if("angleAxis"!==r&&(null==e?void 0:e.type)==="number"&&dY(t)&&Array.isArray(a)&&a.length>0){var n,s;return[Math.min(t[0],null!=(n=a[0])?n:0),Math.max(t[1],null!=(s=a[a.length-1])?s:0)]}return t},mZ=rc([uQ,mU,mY,uE],mX),mJ=rc(ms,uQ,(e,t)=>{if(t&&"number"===t.type){var a=1/0,r=Array.from(mc(e.map(e=>e.value))).sort((e,t)=>e-t),n=r[0],s=r[r.length-1];if(null==n||null==s)return 1/0;var i=s-n;if(0===i)return 1/0;for(var l=0;l<r.length-1;l++){var o=r[l],c=r[l+1];null!=o&&null!=c&&(a=Math.min(a,c-o))}return a/i}}),mQ=rc(mJ,iG,d8,iy,(e,t,a,r,n)=>n,(e,t,a,r,n)=>{if(!s0(e))return 0;var s="vertical"===t?r.height:r.width;if("gap"===n)return e*s/2;if("no-gap"===n){var i=nm(a,e*s),l=e*s/2;return l-i-(l-i)/s*i}return 0}),m0=rc(uV,(e,t,a)=>{var r=uV(e,t);return null==r||"string"!=typeof r.padding?0:mQ(e,"xAxis",t,a,r.padding)},(e,t)=>{if(null==e)return{left:0,right:0};var a,r,{padding:n}=e;return"string"==typeof n?{left:t,right:t}:{left:(null!=(a=n.left)?a:0)+t,right:(null!=(r=n.right)?r:0)+t}}),m1=rc(uX,(e,t,a)=>{var r=uX(e,t);return null==r||"string"!=typeof r.padding?0:mQ(e,"yAxis",t,a,r.padding)},(e,t)=>{if(null==e)return{top:0,bottom:0};var a,r,{padding:n}=e;return"string"==typeof n?{top:t,bottom:t}:{top:(null!=(a=n.top)?a:0)+t,bottom:(null!=(r=n.bottom)?r:0)+t}}),m2=rc([iy,m0,iC,iN,(e,t,a)=>a],(e,t,a,r,n)=>{var{padding:s}=r;return n?[s.left,a.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),m5=rc([iy,iG,m1,iC,iN,(e,t,a)=>a],(e,t,a,r,n,s)=>{var{padding:i}=n;return s?[r.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),m4=(e,t,a,r)=>{var n;switch(t){case"xAxis":return m2(e,a,r);case"yAxis":return m5(e,a,r);case"zAxis":return null==(n=uJ(e,a))?void 0:n.range;case"angleAxis":return uC(e);case"radiusAxis":return uP(e,a);default:return}},m3=rc([uQ,m4],ux),m6=rc([mH,mZ],uq),m8=rc([uQ,mH,m6,m3],mV);function m9(e,t){return e.id<t.id?-1:+(e.id>t.id)}rc([u6,mj,uE],(e,t,a)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>mi(a,e)));var m7=(e,t)=>t,xe=(e,t,a)=>a,xt=rc(im,m7,xe,(e,t,a)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===a).sort(m9)),xa=rc(ix,m7,xe,(e,t,a)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===a).sort(m9)),xr=(e,t)=>({width:e.width,height:t.height}),xn=rc(iy,uV,xr),xs=rc(ic,iy,xt,m7,xe,(e,t,a,r,n)=>{var s,i={};return a.forEach(a=>{var l=xr(t,a);null==s&&(s=((e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}})(t,r,e));var o="top"===r&&!n||"bottom"===r&&n;i[a.id]=s-Number(o)*l.height,s+=(o?-1:1)*l.height}),i}),xi=rc(io,iy,xa,m7,xe,(e,t,a,r,n)=>{var s,i={};return a.forEach(a=>{var l={width:"number"==typeof a.width?a.width:60,height:t.height};null==s&&(s=((e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}})(t,r,e));var o="left"===r&&!n||"right"===r&&n;i[a.id]=s-Number(o)*l.width,s+=(o?-1:1)*l.width}),i}),xl=rc([iy,uV,(e,t)=>{var a=uV(e,t);if(null!=a)return xs(e,a.orientation,a.mirror)},(e,t)=>t],(e,t,a,r)=>{if(null!=t){var n=null==a?void 0:a[r];return null==n?{x:e.left,y:0}:{x:e.left,y:n}}}),xo=rc([iy,uX,(e,t)=>{var a=uX(e,t);if(null!=a)return xi(e,a.orientation,a.mirror)},(e,t)=>t],(e,t,a,r)=>{if(null!=t){var n=null==a?void 0:a[r];return null==n?{x:0,y:e.top}:{x:n,y:e.top}}}),xc=rc(iy,uX,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),xd=(e,t,a)=>{switch(t){case"xAxis":return xn(e,a).width;case"yAxis":return xc(e,a).height;default:return}},xu=(e,t,a,r)=>{if(null!=a){var{allowDuplicatedCategory:n,type:s,dataKey:i}=a,l=s3(e,r),o=t.map(e=>e.value);if(i&&l&&"category"===s&&n&&nx(o))return o}},xm=rc([iG,ms,uQ,uE],xu),xx=(e,t,a,r)=>{if(null!=a&&null!=a.dataKey){var{type:n,scale:s}=a;if(s3(e,r)&&("number"===n||"auto"!==s))return t.map(e=>e.value)}},xh=rc([iG,ms,u0,uE],xx),xp=rc([iG,(e,t,a)=>{switch(t){case"xAxis":return uV(e,a);case"yAxis":return uX(e,a);default:throw Error("Unexpected axis type: ".concat(t))}},mH,m8,xm,xh,m4,mY,uE],(e,t,a,r,n,s,i,l,o)=>{if(null!=t){var c=s3(e,o);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:o,categoricalDomain:s,duplicateDomain:n,isCategorical:c,niceTicks:l,range:i,realScaleType:a,scale:r}}}),xf=(e,t,a,r,n,s,i,l,o)=>{if(null!=t&&null!=r){var c=s3(e,o),{type:d,ticks:u,tickCount:m}=t,x="scaleBand"===a&&"function"==typeof r.bandwidth?r.bandwidth()/2:2,h="category"===d&&r.bandwidth?r.bandwidth()/x:0;h="angleAxis"===o&&null!=s&&s.length>=2?2*ns(s[0]-s[1])*h:h;var p=u||n;return p?p.map((e,t)=>{var a=i?i.indexOf(e):e,n=r.map(a);return s0(n)?{index:t,coordinate:n+h,value:e,offset:h}:null}).filter(nb):c&&l?l.map((e,t)=>{var a=r.map(e);return s0(a)?{coordinate:a+h,value:e,index:t,offset:h}:null}).filter(nb):r.ticks?r.ticks(m).map((e,t)=>{var a=r.map(e);return s0(a)?{coordinate:a+h,value:e,index:t,offset:h}:null}).filter(nb):r.domain().map((e,t)=>{var a=r.map(e);return s0(a)?{coordinate:a+h,value:i?i[e]:e,index:t,offset:h}:null}).filter(nb)}},xb=rc([iG,u0,mH,m8,mY,m4,xm,xh,uE],xf),xg=(e,t,a,r,n,s,i)=>{if(null!=t&&null!=a&&null!=r&&r[0]!==r[1]){var l=s3(e,i),{tickCount:o}=t,c=0;return(c="angleAxis"===i&&(null==r?void 0:r.length)>=2?2*ns(r[0]-r[1])*c:c,l&&s)?s.map((e,t)=>{var r=a.map(e);return s0(r)?{coordinate:r+c,value:e,index:t,offset:c}:null}).filter(nb):a.ticks?a.ticks(o).map((e,t)=>{var r=a.map(e);return s0(r)?{coordinate:r+c,value:e,index:t,offset:c}:null}).filter(nb):a.domain().map((e,t)=>{var r=a.map(e);return s0(r)?{coordinate:r+c,value:n?n[e]:e,index:t,offset:c}:null}).filter(nb)}},xy=rc([iG,u0,m8,m4,xm,xh,uE],xg),xv=rc(uQ,m8,(e,t)=>{if(null!=e&&null!=t)return uB(uB({},e),{},{scale:t})}),xj=rc([uQ,mH,mU,m3],mV),xk=rc((e,t,a)=>uJ(e,a),xj,(e,t)=>{if(null!=e&&null!=t)return uB(uB({},e),{},{scale:t})}),xw=rc([iG,im,ix],(e,t,a)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),xN=e=>e.options.defaultTooltipEventType,xC=e=>e.options.validateTooltipEventTypes;function xS(e,t,a){if(null==e)return t;var r=e?"axis":"item";return null==a?t:a.includes(r)?r:t}function xP(e,t){return xS(t,xN(e),xC(e))}var xM=(e,t)=>{var a,r=Number(t);if(!ni(r)&&null!=t)return r>=0?null==e||null==(a=e[r])?void 0:a.value:void 0};function xO(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function xE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xO(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xO(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var xA=(e,t,a,r)=>{if(null==t)return sd;var n,s,i,l=(n=e,s=t,i=a,"axis"===s?"click"===i?n.axisInteraction.click:n.axisInteraction.hover:"click"===i?n.itemInteraction.click:n.itemInteraction.hover);if(null==l)return sd;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=l.index){if(o)return xE(xE({},l),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return xE(xE({},sd),{},{coordinate:l.coordinate})},xT=(e,t,a,r)=>{var n=null==e?void 0:e.index;if(null==n)return null;var s=Number(n);if(!s0(s))return n;var i=Infinity;t.length>0&&(i=t.length-1);var l=Math.max(0,Math.min(s,i)),o=t[l];return null==o?String(l):!function(e,t,a){if(null==a||null==t)return!0;var r=s4(e,t);return!(null!=r&&dY(a))||function(e,t){var a=function(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}(e),r=t[0],n=t[1];if(void 0===a)return!1;var s=Math.min(r,n),i=Math.max(r,n);return a>=s&&a<=i}(r,a)}(o,a,r)?null:String(l)},xI=(e,t,a,r,n,s,i)=>{if(null!=s){var l=i[0],o=null==l?void 0:l.getPosition(s);if(null!=o)return o;var c=null==n?void 0:n[Number(s)];if(c)if("horizontal"===a)return{x:c.coordinate,y:(r.top+t)/2};else return{x:(r.left+e)/2,y:c.coordinate}}},xR=(e,t,a,r)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];if(null==(n="hover"===a?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=r){var n,s=e.tooltipItemPayloads[0];return null!=s?[s]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null==(t=e.settings)?void 0:t.graphicalItemId)===n})},xD=e=>e.options.tooltipPayloadSearcher,xL=e=>e.tooltip;function x_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function xF(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x_(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x$=(e,t,a,r,n,s,i)=>{if(null!=t&&null!=s){var{chartData:l,computedData:o,dataStartIndex:c,dataEndIndex:d}=a;return e.reduce((e,a)=>{var u,m,x,{dataDefinedOnItem:h,settings:p}=a,f=null!=h?h:l,b=Array.isArray(f)?sQ(f,c,d):f,g=null!=(u=null==p?void 0:p.dataKey)?u:r,y=null==p?void 0:p.nameKey;return Array.isArray(m=r&&Array.isArray(b)&&!Array.isArray(b[0])&&"axis"===i?np(b,r,n):s(b,t,o,y))?m.forEach(t=>{var a=xF(xF({},p),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(ii({tooltipEntrySettings:a,dataKey:t.dataKey,payload:t.payload,value:s4(t.payload,t.dataKey),name:t.name}))}):e.push(ii({tooltipEntrySettings:p,dataKey:g,payload:m,value:s4(m,g),name:null!=(x=s4(m,y))?x:null==p?void 0:p.name})),e},[])}},xz=rc([md,u1,ue],mK),xq=rc([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),xW=rc([u_,uF],u2),xB=rc([xq,md,xW],u3,{memoizeOptions:{resultEqualityCheck:uL}}),xU=rc([xB],e=>e.filter(uR)),xK=rc([xB],me,{memoizeOptions:{resultEqualityCheck:uL}}),xH=rc([xK,dK],ma),xV=rc([xU,dK,md],uI),xG=rc([xH,md,xB],mn),xY=rc([md],mb),xX=rc([md],e=>e.allowDataOverflow),xZ=rc([xY,xX],dZ),xJ=rc([xB],e=>e.filter(uR)),xQ=rc([xV,xJ,d9,d7],mx),x0=rc([xQ,dK,u_,xZ],mp),x1=rc([xB],u9),x2=rc([xH,md,x1,mj,u_],mw,{memoizeOptions:{resultEqualityCheck:uD}}),x5=rc([mS,u_,uF],mP),x4=rc([x5,u_],mI),x3=rc([mO,u_,uF],mP),x6=rc([x3,u_],mD),x8=rc([mA,u_,uF],mP),x9=rc([x8,u_],m_),x7=rc([x4,x9,x6],mk),he=rc([md,xY,xZ,x0,x2,x7,iG,u_],mz),ht=rc([md,iG,xH,xG,d9,u_,he],mB),ha=rc([ht,md,xz],mG),hr=rc([md,ht,ha,u_],mX),hn=e=>{var t=u_(e),a=uF(e);return m4(e,t,a,!1)},hs=rc([md,hn],ux),hi=rc([md,xz,hr,hs],mV),hl=rc([iG,xG,md,u_],xu),ho=rc([iG,xG,md,u_],xx),hc=rc([iG,md,xz,hi,hn,hl,ho,u_],(e,t,a,r,n,s,i,l)=>{if(t){var{type:o}=t,c=s3(e,l);if(r){var d="scaleBand"===a&&r.bandwidth?r.bandwidth()/2:2,u="category"===o&&r.bandwidth?r.bandwidth()/d:0;return(u="angleAxis"===l&&null!=n&&(null==n?void 0:n.length)>=2?2*ns(n[0]-n[1])*u:u,c&&i)?i.map((e,t)=>{var a=r.map(e);return s0(a)?{coordinate:a+u,value:e,index:t,offset:u}:null}).filter(nb):r.domain().map((e,t)=>{var a=r.map(e);return s0(a)?{coordinate:a+u,value:s?s[e]:e,index:t,offset:u}:null}).filter(nb)}}}),hd=rc([xN,xC,e=>e.tooltip.settings],(e,t,a)=>xS(a.shared,e,t)),hu=e=>e.tooltip.settings.trigger,hm=e=>e.tooltip.settings.defaultIndex,hx=rc([xL,hd,hu,hm],xA),hh=rc([hx,xH,mu,ht],xT),hp=rc([hc,hh],xM),hf=rc([hx],e=>{if(e)return e.dataKey}),hb=rc([hx],e=>{if(e)return e.graphicalItemId}),hg=rc([xL,hd,hu,hm],xR),hy=rc([io,ic,iG,iy,hc,hm,hg],xI),hv=rc([hx,hy],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),hj=rc([hx],e=>{var t;return null!=(t=null==e?void 0:e.active)&&t}),hk=rc([hg,hh,dK,mu,hp,xD,hd],x$),hw=rc([hk],e=>{if(null!=e)return Array.from(new Set(e.map(e=>e.payload).filter(e=>null!=e)))});function hN(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function hC(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hN(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hN(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var hS=(e,t,a,r,n)=>{var s=null!=(u=null==t?void 0:t.length)?u:0;if(s<=1||null==e)return 0;if("angleAxis"===r&&null!=n&&1e-6>=Math.abs(Math.abs(n[1]-n[0])-360))for(var i=0;i<s;i++){var l=i>0?null==(m=a[i-1])?void 0:m.coordinate:null==(x=a[s-1])?void 0:x.coordinate,o=null==(h=a[i])?void 0:h.coordinate,c=i>=s-1?null==(p=a[0])?void 0:p.coordinate:null==(f=a[i+1])?void 0:f.coordinate,d=void 0;if(null!=l&&null!=o&&null!=c)if(ns(o-l)!==ns(c-o)){var u,m,x,h,p,f,b,g=[];if(ns(c-o)===ns(n[1]-n[0])){d=c;var y=o+n[1]-n[0];g[0]=Math.min(y,(y+l)/2),g[1]=Math.max(y,(y+l)/2)}else{d=l;var v=c+n[1]-n[0];g[0]=Math.min(o,(v+o)/2),g[1]=Math.max(o,(v+o)/2)}var j=[Math.min(o,(d+o)/2),Math.max(o,(d+o)/2)];if(e>j[0]&&e<=j[1]||e>=g[0]&&e<=g[1])return null==(b=a[i])?void 0:b.index}else{var k,w=Math.min(l,c),N=Math.max(l,c);if(e>(w+o)/2&&e<=(N+o)/2)return null==(k=a[i])?void 0:k.index}}else if(t)for(var C=0;C<s;C++){var S=t[C];if(null!=S){var P=t[C+1],M=t[C-1];if(0===C&&null!=P&&e<=(S.coordinate+P.coordinate)/2||C===s-1&&null!=M&&e>(S.coordinate+M.coordinate)/2||C>0&&C<s-1&&null!=M&&null!=P&&e>(S.coordinate+M.coordinate)/2&&e<=(S.coordinate+P.coordinate)/2)return S.index}}return -1},hP=(e,t)=>t,hM=(e,t,a)=>a,hO=(e,t,a,r)=>r,hE=rc(hc,e=>(0,sU.default)(e,e=>e.coordinate)),hA=rc([xL,hP,hM,hO],xA),hT=rc([hA,xH,mu,ht],xT),hI=rc([xL,hP,hM,hO],xR),hR=rc([io,ic,iG,iy,hc,hO,hI],xI),hD=rc([hA,hR],(e,t)=>{var a;return null!=(a=e.coordinate)?a:t}),hL=rc([hc,hT],xM),h_=rc([hI,hT,dK,mu,hL,xD,hP],x$),hF=rc([hA,hT],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),h$=rc([(e,t)=>t,iG,uO,u_,hs,hc,hE,iy],(e,t,a,r,n,s,i,l)=>{if(e&&t&&r&&n&&s){if("horizontal"===t||"vertical"===t){if(!e||!r||!n||!s)return;if(function(e,t){var{chartX:a,chartY:r}=e;return a>=t.left&&a<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}(e,l)){var o=hS("horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0,i,s,r,n),c=((e,t,a,r)=>{var n=t.find(e=>e&&e.index===a);if(n){if("horizontal"===e)return{x:n.coordinate,y:r.chartY};if("vertical"===e)return{x:r.chartX,y:n.coordinate}}return{x:0,y:0}})(t,s,o,e);return{activeIndex:String(o),activeCoordinate:c}}return}if(e&&r&&n&&s&&a){var d=((e,t)=>{var a,{chartX:r,chartY:n}=e,{radius:s,angle:i}=((e,t)=>{var{x:a,y:r}=e,{cx:n,cy:s}=t,i=((e,t)=>{var{x:a,y:r}=e,{x:n,y:s}=t;return Math.sqrt((a-n)**2+(r-s)**2)})({x:a,y:r},{x:n,y:s});if(i<=0)return{radius:i,angle:0};var l=Math.acos((a-n)/i);return r>s&&(l=2*Math.PI-l),{radius:i,angle:180*l/Math.PI,angleInRadian:l}})({x:r,y:n},t),{innerRadius:l,outerRadius:o}=t;if(s<l||s>o||0===s)return null;var{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:a}=e,r=Math.min(Math.floor(t/360),Math.floor(a/360));return{startAngle:t-360*r,endAngle:a-360*r}})(t),u=i;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;a=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;a=u>=d&&u<=c}return a?us(us({},t),{},{radius:s,angle:((e,t)=>{var{startAngle:a,endAngle:r}=t;return e+360*Math.min(Math.floor(a/360),Math.floor(r/360))})(u,t)}):null})(e,a);if(d){var u=hS("centric"===t?d.angle:d.radius,i,s,r,n),m=((e,t,a,r)=>{var n=t.find(e=>e&&e.index===a);if(n){if("centric"===e){var s=n.coordinate,{radius:i}=r;return hC(hC(hC({},r),uo(r.cx,r.cy,i,s)),{},{angle:s,radius:i})}var l=n.coordinate,{angle:o}=r;return hC(hC(hC({},r),uo(r.cx,r.cy,l,o)),{},{angle:o,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,s,u,d);return{activeIndex:String(u),activeCoordinate:m}}return}}}),hz=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/r)}},hq=rk("mouseClick"),hW=ne();hW.startListening({actionCreator:hq,effect:(e,t)=>{var a=e.payload,r=h$(t.getState(),hz(a));(null==r?void 0:r.activeIndex)!=null&&t.dispatch(sj({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var hB=rk("mouseMove"),hU=ne(),hK=null;function hH(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"==typeof t&&null!==t?"<<CHILDREN>>":t}function hV(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function hG(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hV(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hV(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}hU.startListening({actionCreator:hB,effect:(e,t)=>{var a=e.payload;null!==hK&&cancelAnimationFrame(hK);var r=hz(a);hK=requestAnimationFrame(()=>{var e=t.getState();if("axis"===xP(e,e.tooltip.settings.shared)){var a=h$(e,r);(null==a?void 0:a.activeIndex)!=null?t.dispatch(sv({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(sg())}hK=null})}});var hY=rI({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:rP()},replaceXAxis:{reducer(e,t){var{prev:a,next:r}=t.payload;void 0!==e.xAxis[a.id]&&(a.id!==r.id&&delete e.xAxis[a.id],e.xAxis[r.id]=r)},prepare:rP()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:rP()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:rP()},replaceYAxis:{reducer(e,t){var{prev:a,next:r}=t.payload;void 0!==e.yAxis[a.id]&&(a.id!==r.id&&delete e.yAxis[a.id],e.yAxis[r.id]=r)},prepare:rP()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:rP()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:rP()},replaceZAxis:{reducer(e,t){var{prev:a,next:r}=t.payload;void 0!==e.zAxis[a.id]&&(a.id!==r.id&&delete e.zAxis[a.id],e.zAxis[r.id]=r)},prepare:rP()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:rP()},updateYAxisWidth(e,t){var{id:a,width:r}=t.payload,n=e.yAxis[a];if(n){var s,i=n.widthHistory||[];if(3===i.length&&i[0]===i[2]&&r===i[1]&&r!==n.width&&1>=Math.abs(r-(null!=(s=i[0])?s:0)))return;var l=[...i,r].slice(-3);e.yAxis[a]=hG(hG({},n),{},{width:r,widthHistory:l})}}}}),{addXAxis:hX,replaceXAxis:hZ,removeXAxis:hJ,addYAxis:hQ,replaceYAxis:h0,removeYAxis:h1,addZAxis:h2,replaceZAxis:h5,removeZAxis:h4,updateYAxisWidth:h3}=hY.actions,h6=hY.reducer,h8=rI({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:rP()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:r}=t.payload,n=a0(e).cartesianItems.indexOf(a);n>-1&&(e.cartesianItems[n]=r)},prepare:rP()},removeCartesianGraphicalItem:{reducer(e,t){var a=a0(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:rP()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:rP()},removePolarGraphicalItem:{reducer(e,t){var a=a0(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:rP()}}}),{addCartesianGraphicalItem:h9,replaceCartesianGraphicalItem:h7,removeCartesianGraphicalItem:pe,addPolarGraphicalItem:pt,removePolarGraphicalItem:pa}=h8.actions,pr=h8.reducer,pn=rI({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=a0(e).dots.findIndex(e=>e===t.payload);-1!==a&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=a0(e).areas.findIndex(e=>e===t.payload);-1!==a&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=a0(e).lines.findIndex(e=>e===t.payload);-1!==a&&e.lines.splice(a,1)}}}),{addDot:ps,removeDot:pi,addArea:pl,removeArea:po,addLine:pc,removeLine:pd}=pn.actions,pu=pn.reducer,pm={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},px=rI({name:"brush",initialState:pm,reducers:{setBrushSettings:(e,t)=>null==t.payload?pm:t.payload}}),{setBrushSettings:ph}=px.actions,pp=px.reducer,pf=rI({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:rP()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:r}=t.payload,n=a0(e).payload.indexOf(a);n>-1&&(e.payload[n]=r)},prepare:rP()},removeLegendPayload:{reducer(e,t){var a=a0(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:rP()}}}),{setLegendSize:pb,setLegendSettings:pg,addLegendPayload:py,replaceLegendPayload:pv,removeLegendPayload:pj}=pf.actions,pk=pf.reducer,pw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},pN=rI({name:"rootProps",initialState:pw,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!=(a=t.payload.barGap)?a:pw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),pC=pN.reducer,{updateOptions:pS}=pN.actions,pP=rI({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:pM,removeRadiusAxis:pO,addAngleAxis:pE,removeAngleAxis:pA}=pP.actions,pT=pP.reducer,pI=rI({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:pR}=pI.actions,pD=pI.reducer,pL=rk("keyDown"),p_=rk("focus"),pF=ne();pF.startListening({actionCreator:pL,effect:(e,t)=>{var a=t.getState();if(!1===a.rootProps.accessibilityLayer)return;var{keyboardInteraction:r}=a.tooltip,n=e.payload;if("ArrowRight"===n||"ArrowLeft"===n||"Enter"===n){var s=xT(r,xH(a),mu(a),ht(a)),i=null==s?-1:Number(s);if(Number.isFinite(i)&&!(i<0)){var l=hc(a);if("Enter"===n){var o=hR(a,"axis","hover",String(r.index));t.dispatch(sw({active:!r.active,activeIndex:r.index,activeCoordinate:o}));return}var c=i+("ArrowRight"===n?1:-1)*("left-to-right"===xw(a)?1:-1);if(null!=l&&!(c>=l.length)&&!(c<0)){var d=hR(a,"axis","hover",String(c));t.dispatch(sw({active:!0,activeIndex:c.toString(),activeCoordinate:d}))}}}}}),pF.startListening({actionCreator:p_,effect:(e,t)=>{var a=t.getState();if(!1!==a.rootProps.accessibilityLayer){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&null==r.index){var n=hR(a,"axis","hover",String("0"));t.dispatch(sw({active:!0,activeIndex:"0",activeCoordinate:n}))}}}});var p$=rk("externalEvent"),pz=ne(),pq=new Map;pz.startListening({actionCreator:p$,effect:(e,t)=>{var{handler:a,reactEvent:r}=e.payload;if(null!=a){r.persist();var n=r.type,s=pq.get(n);void 0!==s&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var e=t.getState(),s={activeCoordinate:hv(e),activeDataKey:hf(e),activeIndex:hh(e),activeLabel:hp(e),activeTooltipIndex:hh(e),isTooltipActive:hj(e)};a(s,r)}finally{pq.delete(n)}});pq.set(n,i)}}});var pW=rc([xL],e=>e.tooltipItemPayloads),pB=rc([pW,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{if(null!=t){var r=e.find(e=>e.settings.graphicalItemId===a);if(null!=r){var{getPosition:n}=r;if(null!=n)return n(t)}}}),pU=rk("touchMove"),pK=ne();pK.startListening({actionCreator:pU,effect:(e,t)=>{var a=e.payload;if(null!=a.touches&&0!==a.touches.length){var r=t.getState(),n=xP(r,r.tooltip.settings.shared);if("axis"===n){var s=a.touches[0];if(null==s)return;var i=h$(r,hz({clientX:s.clientX,clientY:s.clientY,currentTarget:a.currentTarget}));(null==i?void 0:i.activeIndex)!=null&&t.dispatch(sv({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if("item"===n){var l,o=a.touches[0];if(null==document.elementFromPoint||null==o)return;var c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(ih),u=null!=(l=c.getAttribute(ip))?l:void 0,m=xB(r).find(e=>e.id===u);if(null==d||null==m||null==u)return;var{dataKey:x}=m,h=pB(r,d,u);t.dispatch(sf({activeDataKey:x,activeIndex:d,activeCoordinate:h,activeGraphicalItemId:u}))}}}});var pH=rI({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:r}=t.payload;e[a]||(e[a]=[]),e[a].push(r)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:r,next:n}=t.payload;e[a]&&(e[a]=e[a].map(e=>e.dataKey===r.dataKey&&e.direction===r.direction?n:e))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:r}=t.payload;e[a]&&(e[a]=e[a].filter(e=>e.dataKey!==r.dataKey||e.direction!==r.direction))}}}),{addErrorBar:pV,replaceErrorBar:pG,removeErrorBar:pY}=pH.actions,pX=pH.reducer,pZ={devToolsEnabled:!0,isSsr:!("u">typeof window&&window.document&&window.document.createElement&&window.setTimeout)};function pJ(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function pQ(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pJ(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pJ(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p0={zIndexMap:Object.values(ud).reduce((e,t)=>pQ(pQ({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},p1=new Set(Object.values(ud)),p2=rI({name:"zIndex",initialState:p0,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:rP()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!p1.has(a)&&delete e.zIndexMap[a])},prepare:rP()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:r,isPanorama:n}=t.payload;e.zIndexMap[a]?n?e.zIndexMap[a].panoramaElement=r:e.zIndexMap[a].element=r:e.zIndexMap[a]={consumers:0,element:n?void 0:r,panoramaElement:n?r:void 0}},prepare:rP()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:rP()}}}),{registerZIndexPortal:p5,unregisterZIndexPortal:p4,registerZIndexPortalElement:p3,unregisterZIndexPortalElement:p6}=p2.actions,p8=rf({brush:pp,cartesianAxis:h6,chartData:sO,errorBars:pX,graphicalItems:pr,layout:sD,legend:pk,options:nj,polarAxis:pT,polarOptions:pD,referenceElements:pu,rootProps:pC,tooltip:sN,zIndex:p2.reducer}),p9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return function(e){let t,a,r,n=function(e){let{thunk:t=!0,immutableCheck:a=!0,serializableCheck:r=!0,actionCreatorCheck:n=!0}=e??{},s=new rw;return t&&("boolean"==typeof t?s.push(rv):s.push(ry(t.extraArgument))),s},{reducer:s,middleware:i,devTools:l=!0,duplicateMiddlewareCheck:o=!0,preloadedState:c,enhancers:d}=e||{};if("function"==typeof s)t=s;else if(rp(s))t=rf(s);else throw Error(nt(1));a="function"==typeof i?i(n):n();let u=rb;l&&(u=rj({trace:!1,..."object"==typeof l&&l}));let m=(r=function(...e){return t=>(a,r)=>{let n=t(a,r),s=()=>{throw Error(ru(15))},i={getState:n.getState,dispatch:(e,...t)=>s(e,...t)};return s=rb(...e.map(e=>e(i)))(n.dispatch),{...n,dispatch:s}}}(...a),function(e){let{autoBatch:t=!0}=e??{},a=new rw(r);return t&&a.push(rO("object"==typeof t?t:void 0)),a});return function e(t,a,r){if("function"!=typeof t)throw Error(ru(2));if("function"==typeof a&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(ru(0));if("function"==typeof a&&void 0===r&&(r=a,a=void 0),void 0!==r){if("function"!=typeof r)throw Error(ru(1));return r(e)(t,a)}let n=t,s=a,i=new Map,l=i,o=0,c=!1;function d(){l===i&&(l=new Map,i.forEach((e,t)=>{l.set(t,e)}))}function u(){if(c)throw Error(ru(3));return s}function m(e){if("function"!=typeof e)throw Error(ru(4));if(c)throw Error(ru(5));let t=!0;d();let a=o++;return l.set(a,e),function(){if(t){if(c)throw Error(ru(6));t=!1,d(),l.delete(a),i=null}}}function x(e){if(!rp(e))throw Error(ru(7));if(void 0===e.type)throw Error(ru(8));if("string"!=typeof e.type)throw Error(ru(17));if(c)throw Error(ru(9));try{c=!0,s=n(s,e)}finally{c=!1}return(i=l).forEach(e=>{e()}),e}return x({type:rh.INIT}),{dispatch:x,subscribe:m,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw Error(ru(10));n=e,x({type:rh.REPLACE})},[rm]:function(){return{subscribe(e){if("object"!=typeof e||null===e)throw Error(ru(11));function t(){e.next&&e.next(u())}return t(),{unsubscribe:m(t)}},[rm](){return this}}}}}(t,c,u(..."function"==typeof d?d(m):m()))}({reducer:p8,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([hW.middleware,hU.middleware,pF.middleware,pz.middleware,pK.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(rO({type:"raf"}))},devTools:pZ.devToolsEnabled&&{serialize:{replacer:hH},name:"recharts-".concat(t)}})};function p7(e){var{preloadedState:t,children:a,reduxStoreName:r}=e,n=iw(),s=(0,z.useRef)(null);return n?a:(null==s.current&&(s.current=p9(t,r)),z.createElement(nA,{context:s_,store:s.current},a))}var fe=e=>{var{chartData:t}=e,a=s$(),r=iw();return(0,z.useEffect)(()=>r?()=>{}:(a(sS(t)),()=>{a(sS(void 0))}),[t,a,r]),null},ft=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function fa(e,t){for(var a of new Set([...Object.keys(e),...Object.keys(t)]))if(ft.has(a)){if(null==e[a]&&null==t[a])continue;if(!function(e,t){if(nP(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!nP(e[a[r]],t[a[r]]))return!1;return!0}(e[a],t[a]))return!1}else{var r,n;if(r=e[a],n=t[a],(null!=r||null!=n)&&("number"==typeof r&&"number"==typeof n?r!==n&&(r==r||n==n):r!==n))return!1}return!0}var fr=(0,z.memo)(function(e){var{layout:t,margin:a}=e,r=s$(),n=iw();return(0,z.useEffect)(()=>{n||(r(sT(t)),r(sA(a)))},[r,n,t,a]),null},fa);function fn(e){var t=s$();return(0,z.useEffect)(()=>{t(pS(e))},[t,e]),null}var fs=()=>{var e;return null==(e=sB(e=>e.rootProps.accessibilityLayer))||e},fi=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function fl(e){return"string"==typeof e&&fi.includes(e)}var fo=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function fc(e){return"string"==typeof e&&fo.has(e)}function fd(e){return"string"==typeof e&&e.startsWith("data-")}function fu(e){if("object"!=typeof e||null===e)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(fc(a)||fd(a))&&(t[a]=e[a]);return t}function fm(e){return null==e?null:(0,z.isValidElement)(e)&&"object"==typeof e.props&&null!==e.props?fu(e.props):"object"!=typeof e||Array.isArray(e)?null:fu(e)}function fx(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(fc(a)||fd(a)||fl(a))&&(t[a]=e[a]);return t}var fh=["children","width","height","viewBox","className","style","title","desc"];function fp(){return(fp=Object.assign.bind()).apply(null,arguments)}var ff=(0,z.forwardRef)((e,t)=>{var{children:a,width:r,height:n,viewBox:s,className:i,style:l,title:o,desc:c}=e,d=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,fh),u=s||{width:r,height:n,x:0,y:0},m=(0,eh.clsx)("recharts-surface",i);return z.createElement("svg",fp({},fx(d),{className:m,width:r,height:n,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height),ref:t}),z.createElement("title",null,o),z.createElement("desc",null,c),a)}),fb=rc(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(null!=t){var r=e[t];if(null!=r)return a?r.panoramaElement:r.element}}),fg=rc(e=>e.zIndex.zIndexMap,e=>Array.from(new Set(Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(ud)))).sort((e,t)=>e-t),{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}}});function fy(e){var{zIndex:t,isPanorama:a}=e,r=(0,z.useRef)(null),n=s$();return(0,z.useLayoutEffect)(()=>(r.current&&n(p3({zIndex:t,element:r.current,isPanorama:a})),()=>{n(p6({zIndex:t,isPanorama:a}))}),[n,t,a]),z.createElement("g",{tabIndex:-1,ref:r})}function fv(e){var{children:t,isPanorama:a}=e,r=sB(fg);if(!r||0===r.length)return t;var n=r.filter(e=>e<0),s=r.filter(e=>e>0);return z.createElement(z.Fragment,null,n.map(e=>z.createElement(fy,{key:e,zIndex:e,isPanorama:a})),t,s.map(e=>z.createElement(fy,{key:e,zIndex:e,isPanorama:a})))}var fj=["children"];function fk(){return(fk=Object.assign.bind()).apply(null,arguments)}var fw={width:"100%",height:"100%",display:"block"},fN=(0,z.forwardRef)((e,t)=>{var a,r,n=sB(io),s=sB(ic),i=fs();if(!s1(n)||!s1(s))return null;var{children:l,otherAttributes:o,title:c,desc:d}=e;return null!=o&&(a="number"==typeof o.tabIndex?o.tabIndex:i?0:void 0,r="string"==typeof o.role?o.role:i?"application":void 0),z.createElement(ff,fk({},o,{title:c,desc:d,role:r,tabIndex:a,width:n,height:s,style:fw,ref:t}),l)}),fC=e=>{var{children:t}=e,a=sB(iC);if(!a)return null;var{width:r,height:n,y:s,x:i}=a;return z.createElement(ff,{width:r,height:n,x:i,y:s},t)},fS=(0,z.forwardRef)((e,t)=>{var{children:a}=e,r=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,fj);return iw()?z.createElement(fC,null,z.createElement(fv,{isPanorama:!0},a)):z.createElement(fN,fk({ref:t},r),z.createElement(fv,{isPanorama:!1},a))}),fP=new(e.i(19072)).default,fM="recharts.syncEvent.tooltip",fO="recharts.syncEvent.brush";function fE(e){return e.tooltip.syncInteraction}var fA=["x","y"];function fT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function fI(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fT(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var fR=(0,z.createContext)(null),fD=(0,z.createContext)(null);function fL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function f_(){return(f_=Object.assign.bind()).apply(null,arguments)}var fF=()=>{var e,t,a,r,n,s,i,l,o,c,d,u;return e=s$(),(0,z.useEffect)(()=>{e(nk())},[e]),t=sB(ut),a=sB(ur),r=s$(),n=sB(ua),s=sB(hc),i=sB(iG),l=iK(),o=sB(e=>e.rootProps.className),(0,z.useEffect)(()=>{if(null==t)return ng;var e=(e,o,c)=>{if(a!==c&&t===e){if("index"===n){if(l&&null!=o&&null!=(d=o.payload)&&d.coordinate&&o.payload.sourceViewBox){var d,u,m=o.payload.coordinate,{x:x,y:h}=m,p=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(m,fA),{x:f,y:b,width:g,height:y}=o.payload.sourceViewBox,v=fI(fI({},p),{},{x:l.x+(g?(x-f)/g:0)*l.width,y:l.y+(y?(h-b)/y:0)*l.height});r(fI(fI({},o),{},{payload:fI(fI({},o.payload),{},{coordinate:v})}))}else r(o);return}if(null!=s){if("function"==typeof n){var j=n(s,{activeTooltipIndex:null==o.payload.index?void 0:Number(o.payload.index),isTooltipActive:o.payload.active,activeIndex:null==o.payload.index?void 0:Number(o.payload.index),activeLabel:o.payload.label,activeDataKey:o.payload.dataKey,activeCoordinate:o.payload.coordinate});u=s[j]}else"value"===n&&(u=s.find(e=>String(e.value)===o.payload.label));var{coordinate:k}=o.payload;if(null==u||!1===o.payload.active||null==k||null==l)return void r(sk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));var{x:w,y:N}=k,C=Math.min(w,l.x+l.width),S=Math.min(N,l.y+l.height),P={x:"horizontal"===i?u.coordinate:C,y:"horizontal"===i?S:u.coordinate};r(sk({active:o.payload.active,coordinate:P,dataKey:o.payload.dataKey,index:String(u.index),label:o.payload.label,sourceViewBox:o.payload.sourceViewBox,graphicalItemId:o.payload.graphicalItemId}))}}};return fP.on(fM,e),()=>{fP.off(fM,e)}},[o,r,a,t,n,s,i,l]),c=sB(ut),d=sB(ur),u=s$(),(0,z.useEffect)(()=>{if(null==c)return ng;var e=(e,t,a)=>{d!==a&&c===e&&u(sP(t))};return fP.on(fO,e),()=>{fP.off(fO,e)}},[u,d,c]),null};function f$(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var fz=(0,z.forwardRef)((e,t)=>{var a,r,n=(0,z.useRef)(null),[s,i]=(0,z.useState)({containerWidth:f$(null==(a=e.style)?void 0:a.width),containerHeight:f$(null==(r=e.style)?void 0:r.height)}),l=(0,z.useCallback)((e,t)=>{i(a=>{var r=Math.round(e),n=Math.round(t);return a.containerWidth===r&&a.containerHeight===n?a:{containerWidth:r,containerHeight:n}})},[]),o=(0,z.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e&&"u">typeof ResizeObserver){var{width:a,height:r}=e.getBoundingClientRect();l(a,r);var s=new ResizeObserver(e=>{var t=e[0];if(null!=t){var{width:a,height:r}=t.contentRect;l(a,r)}});s.observe(e),n.current=s}},[t,l]);return(0,z.useEffect)(()=>()=>{var e=n.current;null!=e&&e.disconnect()},[l]),z.createElement(z.Fragment,null,z.createElement(iZ,{width:s.containerWidth,height:s.containerHeight}),z.createElement("div",f_({ref:o},e)))}),fq=(0,z.forwardRef)((e,t)=>{var{width:a,height:r}=e,[n,s]=(0,z.useState)({containerWidth:f$(a),containerHeight:f$(r)}),i=(0,z.useCallback)((e,t)=>{s(a=>{var r=Math.round(e),n=Math.round(t);return a.containerWidth===r&&a.containerHeight===n?a:{containerWidth:r,containerHeight:n}})},[]),l=(0,z.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e){var{width:a,height:r}=e.getBoundingClientRect();i(a,r)}},[t,i]);return z.createElement(z.Fragment,null,z.createElement(iZ,{width:n.containerWidth,height:n.containerHeight}),z.createElement("div",f_({ref:l},e)))}),fW=(0,z.forwardRef)((e,t)=>{var{width:a,height:r}=e;return z.createElement(z.Fragment,null,z.createElement(iZ,{width:a,height:r}),z.createElement("div",f_({ref:t},e)))}),fB=(0,z.forwardRef)((e,t)=>{var{width:a,height:r}=e;return"string"==typeof a||"string"==typeof r?z.createElement(fq,f_({},e,{ref:t})):"number"==typeof a&&"number"==typeof r?z.createElement(fW,f_({},e,{width:a,height:r,ref:t})):z.createElement(z.Fragment,null,z.createElement(iZ,{width:a,height:r}),z.createElement("div",f_({ref:t},e)))}),fU=(0,z.forwardRef)((e,t)=>{var{children:a,className:r,height:n,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:o,onMouseEnter:c,onMouseLeave:d,onMouseMove:u,onMouseUp:m,onTouchEnd:x,onTouchMove:h,onTouchStart:p,style:f,width:b,responsive:g,dispatchTouchEvents:y=!0}=e,v=(0,z.useRef)(null),j=s$(),[k,w]=(0,z.useState)(null),[N,C]=(0,z.useState)(null),S=function(){var e=s$(),[t,a]=(0,z.useState)(null),r=sB(id);return(0,z.useEffect)(()=>{if(null!=t){var a=t.getBoundingClientRect().width/t.offsetWidth;s0(a)&&a!==r&&e(sR(a))}},[t,e,r]),a}(),P=iq(),M=(null==P?void 0:P.width)>0?P.width:b,O=(null==P?void 0:P.height)>0?P.height:n,E=(0,z.useCallback)(e=>{S(e),"function"==typeof t&&t(e),w(e),C(e),null!=e&&(v.current=e)},[S,t,w,C]),A=(0,z.useCallback)(e=>{j(hq(e)),j(p$({handler:s,reactEvent:e}))},[j,s]),T=(0,z.useCallback)(e=>{j(hB(e)),j(p$({handler:c,reactEvent:e}))},[j,c]),I=(0,z.useCallback)(e=>{j(sg()),j(p$({handler:d,reactEvent:e}))},[j,d]),R=(0,z.useCallback)(e=>{j(hB(e)),j(p$({handler:u,reactEvent:e}))},[j,u]),D=(0,z.useCallback)(()=>{j(p_())},[j]),L=(0,z.useCallback)(e=>{j(pL(e.key))},[j]),_=(0,z.useCallback)(e=>{j(p$({handler:i,reactEvent:e}))},[j,i]),F=(0,z.useCallback)(e=>{j(p$({handler:l,reactEvent:e}))},[j,l]),$=(0,z.useCallback)(e=>{j(p$({handler:o,reactEvent:e}))},[j,o]),q=(0,z.useCallback)(e=>{j(p$({handler:m,reactEvent:e}))},[j,m]),W=(0,z.useCallback)(e=>{j(p$({handler:p,reactEvent:e}))},[j,p]),B=(0,z.useCallback)(e=>{y&&j(pU(e)),j(p$({handler:h,reactEvent:e}))},[j,y,h]),U=(0,z.useCallback)(e=>{j(p$({handler:x,reactEvent:e}))},[j,x]);return z.createElement(fR.Provider,{value:k},z.createElement(fD.Provider,{value:N},z.createElement(g?fz:fB,{width:null!=M?M:null==f?void 0:f.width,height:null!=O?O:null==f?void 0:f.height,className:(0,eh.clsx)("recharts-wrapper",r),style:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fL(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({position:"relative",cursor:"default",width:M,height:O},f),onClick:A,onContextMenu:_,onDoubleClick:F,onFocus:D,onKeyDown:L,onMouseDown:$,onMouseEnter:T,onMouseLeave:I,onMouseMove:R,onMouseUp:q,onTouchEnd:U,onTouchMove:B,onTouchStart:W,ref:E},z.createElement(fF,null),a)))}),fK=rc([iy],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),fH=rc([fK,io,ic],(e,t,a)=>{if(e&&null!=t&&null!=a)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),fV=(0,z.createContext)(void 0),fG=e=>{var{children:t}=e,[a]=(0,z.useState)("".concat(nu("recharts"),"-clip")),r=sB(fH);if(null==r)return null;var{x:n,y:s,width:i,height:l}=r;return z.createElement(fV.Provider,{value:a},z.createElement("defs",null,z.createElement("clipPath",{id:a},z.createElement("rect",{x:n,y:s,height:l,width:i}))),t)},fY=["width","height","responsive","children","className","style","compact","title","desc"],fX=(0,z.forwardRef)((e,t)=>{var{width:a,height:r,responsive:n,children:s,className:i,style:l,compact:o,title:c,desc:d}=e,u=fu(function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,fY));return o?z.createElement(z.Fragment,null,z.createElement(iZ,{width:a,height:r}),z.createElement(fS,{otherAttributes:u,title:c,desc:d},s)):z.createElement(fU,{className:i,style:l,width:a,height:r,responsive:null!=n&&n,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},z.createElement(fS,{otherAttributes:u,title:c,desc:d,ref:t},z.createElement(fG,null,s)))});function fZ(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function fJ(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fZ(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fZ(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e);return Object.keys(t).reduce((e,a)=>(void 0===e[a]&&void 0!==t[a]&&(e[a]=t[a]),e),a)}function fQ(){return(fQ=Object.assign.bind()).apply(null,arguments)}var f0={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},f1=(0,z.forwardRef)(function(e,t){var a,r=fJ(e.categoricalChartProps,f0),{chartName:n,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,categoricalChartProps:o}=e;return z.createElement(p7,{preloadedState:{options:{chartName:n,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,eventEmitter:void 0}},reduxStoreName:null!=(a=o.id)?a:n},z.createElement(fe,{chartData:o.data}),z.createElement(fr,{layout:r.layout,margin:r.margin}),z.createElement(fn,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),z.createElement(fX,fQ({},r,{ref:t})))}),f2=["axis"],f5=(0,z.forwardRef)((e,t)=>z.createElement(f1,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:f2,tooltipPayloadSearcher:ny,categoricalChartProps:e,ref:t})),f4=z,f3=["children","className"];function f6(){return(f6=Object.assign.bind()).apply(null,arguments)}var f8=z.forwardRef((e,t)=>{var{children:a,className:r}=e,n=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,f3),s=(0,eh.clsx)("recharts-layer",r);return z.createElement("g",f6({className:s},fx(n),{ref:t}),a)}),f9=e=>null;f9.displayName="Cell";var f7=e.i(36572);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var bt=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),ba=new class{constructor(e){!function(e,t,a){var r;(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;null!=a&&this.cache.delete(a)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(bt.cacheSize),br={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bn="recharts_measurement_span",bs=(e,t)=>{try{var a=document.getElementById(bn);a||((a=document.createElement("span")).setAttribute("id",bn),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,br,t),a.textContent="".concat(e);var r=a.getBoundingClientRect();return{width:r.width,height:r.height}}catch(e){return{width:0,height:0}}},bi=function(e){var t,a,r,n,s,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||pZ.isSsr)return{width:0,height:0};if(!bt.enableCache)return bs(e,l);var o=(t=l.fontSize||"",a=l.fontFamily||"",r=l.fontWeight||"",n=l.fontStyle||"",s=l.letterSpacing||"",i=l.textTransform||"","".concat(e,"|").concat(t,"|").concat(a,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i)),c=ba.get(o);if(c)return c;var d=bs(e,l);return ba.set(o,d),d},bl=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bo=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bc=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bd=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bu={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},bm=["cm","mm","pt","pc","in","Q","px"];class bx{static parse(e){var t,[,a,r]=null!=(t=bd.exec(e))?t:[];return null==a?bx.NaN:new bx(parseFloat(a),null!=r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,ni(e)&&(this.unit=""),""===t||bc.test(t)||(this.num=NaN,this.unit=""),function(e){return bm.includes(e)}(t)&&(this.num=function(e,t){return e*bu[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new bx(NaN,""):new bx(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new bx(NaN,""):new bx(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new bx(NaN,""):new bx(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new bx(NaN,""):new bx(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ni(this.num)}}function bh(e){if(null==e||e.includes("NaN"))return"NaN";for(var t=e;t.includes("*")||t.includes("/");){var a,[,r,n,s]=null!=(a=bl.exec(t))?a:[],i=bx.parse(null!=r?r:""),l=bx.parse(null!=s?s:""),o="*"===n?i.multiply(l):i.divide(l);if(o.isNaN())return"NaN";t=t.replace(bl,o.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,m]=null!=(c=bo.exec(t))?c:[],x=bx.parse(null!=d?d:""),h=bx.parse(null!=m?m:""),p="+"===u?x.add(h):x.subtract(h);if(p.isNaN())return"NaN";t=t.replace(bo,p.toString())}return t}r="NaN",n=new bx(NaN,""),(r="symbol"==typeof(t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?t:t+"")in bx?Object.defineProperty(bx,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):bx[r]=n;var bp=/\(([^()]*)\)/;function bf(e){var t=function(e){try{var t;return t=e.replace(/\s+/g,""),t=function(e){for(var t,a=e;null!=(t=bp.exec(a));){var[,r]=t;a=a.replace(bp,bh(r))}return a}(t),t=bh(t)}catch(e){return"NaN"}}(e.slice(5,-1));return"NaN"===t?"":t}var bb=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],bg=["dx","dy","angle","className","breakAll"];function by(){return(by=Object.assign.bind()).apply(null,arguments)}function bv(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var bj=/[ \f\n\r\t\v\u2028\u2029]+/,bk=e=>{var{children:t,breakAll:a,style:r}=e;try{var n=[];null!=t&&(n=a?t.toString().split(""):t.toString().split(bj));var s=n.map(e=>({word:e,width:bi(e,r).width})),i=a?0:bi("",r).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch(e){return null}},bw=(e,t,a,r)=>e.reduce((e,n)=>{var{word:s,width:i}=n,l=e[e.length-1];return l&&null!=i&&(null==t||r||l.width+i+a<Number(t))?(l.words.push(s),l.width+=i+a):e.push({words:[s],width:i}),e},[]),bN=e=>e.reduce((e,t)=>e.width>t.width?e:t),bC=(e,t,a,r,n,s,i,l)=>{var o=bk({breakAll:a,style:r,children:e.slice(0,t)+""});if(!o)return[!1,[]];var c=bw(o.wordsWithComputedWidth,s,i,l);return[c.length>n||bN(c).width>Number(s),c]},bS=e=>[{words:null==e?[]:e.toString().split(bj),width:void 0}],bP="#808080",bM={angle:0,breakAll:!1,capHeight:"0.71em",fill:bP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},bO=(0,z.forwardRef)((e,t)=>{var a,r=fJ(e,bM),{x:n,y:s,lineHeight:i,capHeight:l,fill:o,scaleToFit:c,textAnchor:d,verticalAnchor:u}=r,m=bv(r,bb),x=(0,z.useMemo)(()=>(e=>{var{width:t,scaleToFit:a,children:r,style:n,breakAll:s,maxLines:i}=e;if((t||a)&&!pZ.isSsr){var l=bk({breakAll:s,children:r,style:n});if(!l)return bS(r);var{wordsWithComputedWidth:o,spaceWidth:c}=l;return((e,t,a,r,n)=>{var s,{maxLines:i,children:l,style:o,breakAll:c}=e,d=no(i),u=String(l),m=bw(t,r,a,n);if(!d||n||!(m.length>i||bN(m).width>Number(r)))return m;for(var x=0,h=u.length-1,p=0;x<=h&&p<=u.length-1;){var f=Math.floor((x+h)/2),[b,g]=bC(u,f-1,c,o,i,r,a,n),[y]=bC(u,f,c,o,i,r,a,n);if(b||y||(x=f+1),b&&y&&(h=f-1),!b&&y){s=g;break}p++}return s||m})({breakAll:s,children:r,maxLines:i,style:n},o,c,t,!!a)}return bS(r)})({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:c,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,c,m.style,m.width]),{dx:h,dy:p,angle:f,className:b,breakAll:g}=m,y=bv(m,bg);if(!nc(n)||!nc(s)||0===x.length)return null;var v=Number(n)+(no(h)?h:0),j=Number(s)+(no(p)?p:0);if(!s0(v)||!s0(j))return null;switch(u){case"start":a=bf("calc(".concat(l,")"));break;case"middle":a=bf("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:a=bf("calc(".concat(x.length-1," * -").concat(i,")"))}var k=[],w=x[0];if(c&&null!=w){var N=w.width,{width:C}=m;k.push("scale(".concat(no(C)&&no(N)?C/N:1,")"))}return f&&k.push("rotate(".concat(f,", ").concat(v,", ").concat(j,")")),k.length&&(y.transform=k.join(" ")),z.createElement("text",by({},fx(y),{ref:t,x:v,y:j,className:(0,eh.clsx)("recharts-text",b),textAnchor:d,fill:o.includes("url")?bP:o}),x.map((e,t)=>{var r=e.words.join(g?"":" ");return z.createElement("tspan",{x:v,dy:0===t?a:i,key:"".concat(r,"-").concat(t)},r)}))});bO.displayName="Text";var bE=e.i(86656);function bA(e){var{zIndex:t,children:a}=e,r=void 0!==sB(iG)&&void 0!==t&&0!==t,n=iw(),s=s$();(0,z.useLayoutEffect)(()=>r?(s(p5({zIndex:t})),()=>{s(p4({zIndex:t}))}):ng,[s,t,r]);var i=sB(e=>fb(e,t,n));return r?i?(0,bE.createPortal)(a,i):null:a}function bT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function bI(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bT(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var bR=["labelRef"],bD=["content"];function bL(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function b_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function bF(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function b$(){return(b$=Object.assign.bind()).apply(null,arguments)}var bz=(0,z.createContext)(null),bq=e=>{var{x:t,y:a,upperWidth:r,lowerWidth:n,width:s,height:i,children:l}=e,o=(0,z.useMemo)(()=>({x:t,y:a,upperWidth:r,lowerWidth:n,width:s,height:i}),[t,a,r,n,s,i]);return z.createElement(bz.Provider,{value:o},l)},bW=()=>{var e=(0,z.useContext)(bz),t=iK();return e||(t?iU(t):void 0)},bB=(0,z.createContext)(null),bU=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:s,endAngle:i,clockWise:l,children:o}=e,c=(0,z.useMemo)(()=>({cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:s,endAngle:i,clockWise:l}),[t,a,r,n,s,i,l]);return z.createElement(bB.Provider,{value:c},o)},bK=()=>{var e=(0,z.useContext)(bB),t=sB(uO);return e||t},bH=e=>null!=e&&"function"==typeof e,bV=e=>null!=e&&"cx"in e&&no(e.cx),bG={angle:0,offset:5,zIndex:ud.label,position:"middle",textBreakAll:!1};function bY(e){var t,a,r,n,s=fJ(e,bG),{viewBox:i,parentViewBox:l,position:o,value:c,children:d,content:u,className:m="",textBreakAll:x,labelRef:h}=s,p=bK(),f=bW(),b=function(e){if(!bV(e))return e;var{cx:t,cy:a,outerRadius:r}=e,n=2*r;return{x:t-r,y:a-r,width:n,upperWidth:n,lowerWidth:n,height:n}}(a=null==i?"center"===o?f:null!=p?p:f:bV(i)?i:iU(i));if(!a||null==c&&null==d&&!(0,z.isValidElement)(u)&&"function"!=typeof u)return null;var g=bF(bF({},s),{},{viewBox:a});if((0,z.isValidElement)(u)){var{labelRef:y}=g,v=bL(g,bR);return(0,z.cloneElement)(u,v)}if("function"==typeof u){var{content:j}=g,k=bL(g,bD);if(r=(0,z.createElement)(u,k),(0,z.isValidElement)(r))return r}else r=(e=>{var{value:t,formatter:a}=e,r=null==e.children?t:e.children;return"function"==typeof a?a(r):r})(s);var w=fx(s);if(bV(a)){if("insideStart"===o||"insideEnd"===o||"end"===o)return((e,t,a,r,n)=>{var s,i,{offset:l,className:o}=e,{cx:c,cy:d,innerRadius:u,outerRadius:m,startAngle:x,endAngle:h,clockWise:p}=n,f=(u+m)/2,b=ns(h-x)*Math.min(Math.abs(h-x),360),g=b>=0?1:-1;switch(t){case"insideStart":s=x+g*l,i=p;break;case"insideEnd":s=h-g*l,i=!p;break;case"end":s=h+g*l,i=p;break;default:throw Error("Unsupported position ".concat(t))}i=b<=0?i:!i;var y=uo(c,d,f,s),v=uo(c,d,f,s+(i?1:-1)*359),j="M".concat(y.x,",").concat(y.y,"\n    A").concat(f,",").concat(f,",0,1,").concat(+!i,",\n    ").concat(v.x,",").concat(v.y),k=null==e.id?nu("recharts-radial-line-"):e.id;return z.createElement("text",b$({},r,{dominantBaseline:"central",className:(0,eh.clsx)("recharts-radial-bar-label",o)}),z.createElement("defs",null,z.createElement("path",{id:k,d:j})),z.createElement("textPath",{xlinkHref:"#".concat(k)},a))})(s,o,r,w,a);n=((e,t,a)=>{var{cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:l,endAngle:o}=e,c=(l+o)/2;if("outside"===a){var{x:d,y:u}=uo(r,n,i+t,c);return{x:d,y:u,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if("center"===a)return{x:r,y:n,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===a)return{x:r,y:n,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===a)return{x:r,y:n,textAnchor:"middle",verticalAnchor:"end"};var{x:m,y:x}=uo(r,n,(s+i)/2,c);return{x:m,y:x,textAnchor:"middle",verticalAnchor:"middle"}})(a,s.offset,s.position)}else{if(!b)return null;var N=(e=>{var{viewBox:t,position:a,offset:r=0,parentViewBox:n,clamp:s}=e,{x:i,y:l,height:o,upperWidth:c,lowerWidth:d}=iU(t),u=i+(c-d)/2,m=(i+u)/2,x=(c+d)/2,h=o>=0?1:-1,p=h*r,f=h>0?"end":"start",b=h>0?"start":"end",g=c>=0?1:-1,y=g*r,v=g>0?"end":"start",j=g>0?"start":"end";if("top"===a){var k={x:i+c/2,y:l-p,horizontalAnchor:"middle",verticalAnchor:f};return s&&n&&(k.height=Math.max(l-n.y,0),k.width=c),k}if("bottom"===a){var w={x:u+d/2,y:l+o+p,horizontalAnchor:"middle",verticalAnchor:b};return s&&n&&(w.height=Math.max(n.y+n.height-(l+o),0),w.width=d),w}if("left"===a){var N={x:m-y,y:l+o/2,horizontalAnchor:v,verticalAnchor:"middle"};return s&&n&&(N.width=Math.max(N.x-n.x,0),N.height=o),N}if("right"===a){var C={x:m+x+y,y:l+o/2,horizontalAnchor:j,verticalAnchor:"middle"};return s&&n&&(C.width=Math.max(n.x+n.width-C.x,0),C.height=o),C}var S=s&&n?{width:x,height:o}:{};return"insideLeft"===a?bI({x:m+y,y:l+o/2,horizontalAnchor:j,verticalAnchor:"middle"},S):"insideRight"===a?bI({x:m+x-y,y:l+o/2,horizontalAnchor:v,verticalAnchor:"middle"},S):"insideTop"===a?bI({x:i+c/2,y:l+p,horizontalAnchor:"middle",verticalAnchor:b},S):"insideBottom"===a?bI({x:u+d/2,y:l+o-p,horizontalAnchor:"middle",verticalAnchor:f},S):"insideTopLeft"===a?bI({x:i+y,y:l+p,horizontalAnchor:j,verticalAnchor:b},S):"insideTopRight"===a?bI({x:i+c-y,y:l+p,horizontalAnchor:v,verticalAnchor:b},S):"insideBottomLeft"===a?bI({x:u+y,y:l+o-p,horizontalAnchor:j,verticalAnchor:f},S):"insideBottomRight"===a?bI({x:u+d-y,y:l+o-p,horizontalAnchor:v,verticalAnchor:f},S):a&&"object"==typeof a&&(no(a.x)||nl(a.x))&&(no(a.y)||nl(a.y))?bI({x:i+nm(a.x,x),y:l+nm(a.y,o),horizontalAnchor:"end",verticalAnchor:"end"},S):bI({x:i+c/2,y:l+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},S)})({viewBox:b,position:o,offset:s.offset,parentViewBox:bV(l)?void 0:l,clamp:!0});n=bF(bF({x:N.x,y:N.y,textAnchor:N.horizontalAnchor,verticalAnchor:N.verticalAnchor},void 0!==N.width?{width:N.width}:{}),void 0!==N.height?{height:N.height}:{})}return z.createElement(bA,{zIndex:s.zIndex},z.createElement(bO,b$({ref:h,className:(0,eh.clsx)("recharts-label",m)},w,n,{textAnchor:"start"===(t=w.textAnchor)||"middle"===t||"end"===t||"inherit"===t?w.textAnchor:n.textAnchor,breakAll:x}),r))}bY.displayName="Label";var bX=(e,t,a)=>{if(!e)return null;var r={viewBox:t,labelRef:a};return!0===e?z.createElement(bY,b$({key:"label-implicit"},r)):nc(e)?z.createElement(bY,b$({key:"label-implicit",value:e},r)):(0,z.isValidElement)(e)?e.type===bY?(0,z.cloneElement)(e,bF({key:"label-implicit"},r)):z.createElement(bY,b$({key:"label-implicit",content:e},r)):bH(e)?z.createElement(bY,b$({key:"label-implicit",content:e},r)):e&&"object"==typeof e?z.createElement(bY,b$({},e,{key:"label-implicit"},r)):null};function bZ(e){var{label:t,labelRef:a}=e;return bX(t,bW(),a)||null}function bJ(e){var{label:t}=e;return bX(t,bK())||null}var bQ=["valueAccessor"],b0=["dataKey","clockWise","id","textBreakAll","zIndex"];function b1(){return(b1=Object.assign.bind()).apply(null,arguments)}function b2(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var b5=e=>Array.isArray(e.value)?(0,f7.default)(e.value):e.value,b4=(0,z.createContext)(void 0),b3=b4.Provider,b6=(0,z.createContext)(void 0),b8=b6.Provider;function b9(e){var{valueAccessor:t=b5}=e,a=b2(e,bQ),{dataKey:r,clockWise:n,id:s,textBreakAll:i,zIndex:l}=a,o=b2(a,b0),c=(0,z.useContext)(b4),d=(0,z.useContext)(b6),u=c||d;return u&&u.length?z.createElement(bA,{zIndex:null!=l?l:ud.label},z.createElement(f8,{className:"recharts-label-list"},u.map((e,n)=>{var l,c=null==r?t(e,n):s4(e.payload,r),d=null==s?{}:{id:"".concat(s,"-").concat(n)};return z.createElement(bY,b1({key:"label-".concat(n)},fx(e),o,d,{fill:null!=(l=a.fill)?l:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:i,viewBox:e.viewBox,index:n,zIndex:0}))}))):null}function b7(e){var{label:t}=e;return t?!0===t?z.createElement(b9,{key:"labelList-implicit"}):z.isValidElement(t)||bH(t)?z.createElement(b9,{key:"labelList-implicit",content:t}):"object"==typeof t?z.createElement(b9,b1({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}b9.displayName="LabelList";var ge=e.i(52769),gt=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",ga=null,gr=null,gn=e=>{if(e===ga&&Array.isArray(gr))return gr;var t=[];return z.Children.forEach(e,e=>{null!=e&&((0,ge.isFragment)(e)?t=t.concat(gn(e.props.children)):t.push(e))}),gr=t,ga=e,t};function gs(e,t){var a=[],r=[];return r=Array.isArray(t)?t.map(e=>gt(e)):[gt(t)],gn(e).forEach(e=>{var t=(0,na.default)(e,"type.displayName")||(0,na.default)(e,"type.name");t&&-1!==r.indexOf(t)&&a.push(e)}),a}var gi=e=>!e||"object"!=typeof e||!("clipDot"in e)||!!e.clipDot,gl=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,go=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var a=e;if((0,z.isValidElement)(e)&&(a=e.props),"object"!=typeof a&&"function"!=typeof a)return null;var r={};return Object.keys(a).forEach(e=>{fl(e)&&(r[e]=t||(t=>a[e](a,t)))}),r},gc=(e,t,a)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var r=null;return Object.keys(e).forEach(n=>{var s=e[n];fl(n)&&"function"==typeof s&&(r||(r={}),r[n]=e=>(s(t,a,e),null))}),r},gd=e.i(54091);function gu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gu(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var gx=(e,t,a)=>e.map(e=>"".concat(e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))," ").concat(t,"ms ").concat(a)).join(","),gh=(e,t)=>Object.keys(t).reduce((a,r)=>gm(gm({},a),{},{[r]:e(r,t[r])}),{});function gp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function gf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gp(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var gb=(e,t,a)=>e+(t-e)*a,gg=e=>{var{from:t,to:a}=e;return t!==a},gy=(e,t,a)=>{var r=gh((t,a)=>{if(gg(a)){var[r,n]=e(a.from,a.to,a.velocity);return gf(gf({},a),{},{from:r,velocity:n})}return a},t);return a<1?gh((e,t)=>gg(t)&&null!=r[e]?gf(gf({},t),{},{velocity:gb(t.velocity,r[e].velocity,a),from:gb(t.from,r[e].from,a)}):t,t):gy(e,r,a-1)},gv=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],gj=(e,t)=>e.map((e,a)=>e*t**a).reduce((e,t)=>e+t),gk=(e,t)=>a=>gj(gv(e,t),a),gw=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var r=(e=>{var t,a=e.split("(");if(2!==a.length||"cubic-bezier"!==a[0])return null;var r=null==(t=a[1])||null==(t=t.split(")")[0])?void 0:t.split(",");if(null==r||4!==r.length)return null;var n=r.map(e=>parseFloat(e));return[n[0],n[1],n[2],n[3]]})(t[0]);if(r)return r}return 4===t.length?t:[0,0,1,1]},gN=function(){return((e,t,a,r)=>{var n=gk(e,a),s=gk(t,r),i=t=>gj([...gv(e,a).map((e,t)=>e*t).slice(1),0],t),l=e=>e>1?1:e<0?0:e,o=e=>{for(var t=e>1?1:e,a=t,r=0;r<8;++r){var o=n(a)-t,c=i(a);if(1e-4>Math.abs(o-t)||c<1e-4)break;a=l(a-o/c)}return s(a)};return o.isStepper=!1,o})(...gw(...arguments))},gC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:a=8,dt:r=17}=e,n=(e,n,s)=>{var i=s+(-(e-n)*t-s*a)*r/1e3,l=s*r/1e3+e;return 1e-4>Math.abs(l-n)&&1e-4>Math.abs(i)?[n,0]:[l,i]};return n.isStepper=!0,n.dt=r,n};class gS{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=performance.now(),r=null,n=s=>{s-a>=t?e(s):"function"==typeof requestAnimationFrame&&(r=requestAnimationFrame(n))};return r=requestAnimationFrame(n),()=>{null!=r&&cancelAnimationFrame(r)}}}var gP=(0,z.createContext)(function(){var e,t,a,r,n;return e=new gS,t=()=>null,a=!1,r=null,n=s=>{if(!a){if(Array.isArray(s)){if(!s.length)return;var[i,...l]=s;if("number"==typeof i){r=e.setTimeout(n.bind(null,l),i);return}n(i),r=e.setTimeout(n.bind(null,l));return}"string"==typeof s&&t(s),"object"==typeof s&&t(s),"function"==typeof s&&s()}},{stop:()=>{a=!0},start:e=>{a=!1,r&&(r(),r=null),n(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}),gM={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},gO={t:0},gE={t:1};function gA(e){var t,a,r,n=fJ(e,gM),{isActive:s,canBegin:i,duration:l,easing:o,begin:c,onAnimationEnd:d,onAnimationStart:u,children:m}=n,x="auto"===s?!pZ.isSsr:s,h=(t=n.animationId,a=n.animationManager,r=(0,z.useContext)(gP),(0,z.useMemo)(()=>null!=a?a:r(t),[t,a,r])),[p,f]=(0,z.useState)(x?gO:gE),b=(0,z.useRef)(null);return(0,z.useEffect)(()=>{x||f(gE)},[x]),(0,z.useEffect)(()=>{if(!x||!i)return ng;var e=((e,t,a,r,n,s)=>{var i,l,o,c,d,u,m,x,h=[Object.keys(e),Object.keys(t)].reduce((e,t)=>e.filter(e=>t.includes(e)));return null==a?()=>(n(gf(gf({},e),t)),()=>{}):!0===a.isStepper?(l=h.reduce((a,r)=>gf(gf({},a),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),o=null,c=r=>{i||(i=r);var d=(r-i)/a.dt;l=gy(a,l,d),n(gf(gf(gf({},e),t),gh((e,t)=>t.from,l))),i=r,Object.values(l).filter(gg).length&&(o=s.setTimeout(c))},()=>(o=s.setTimeout(c),()=>{var e;null==(e=o)||e()})):(u=null,m=h.reduce((a,r)=>{var n=e[r],s=t[r];return null==n||null==s?a:gf(gf({},a),{},{[r]:[n,s]})},{}),x=i=>{d||(d=i);var l=(i-d)/r,o=gh((e,t)=>gb(...t,a(l)),m);if(n(gf(gf(gf({},e),t),o)),l<1)u=s.setTimeout(x);else{var c=gh((e,t)=>gb(...t,a(1)),m);n(gf(gf(gf({},e),t),c))}},()=>(u=s.setTimeout(x),()=>{var e;null==(e=u)||e()}))})(gO,gE,(e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gN(e);case"spring":return gC();default:if("cubic-bezier"===e.split("(")[0])return gN(e)}return"function"==typeof e?e:null})(o),l,f,h.getTimeoutController());return h.start([u,c,()=>{b.current=e()},l,d]),()=>{h.stop(),b.current&&b.current(),d()}},[x,i,l,o,c,u,d,h]),m(p.t)}function gT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",a=(0,z.useRef)(nu(t)),r=(0,z.useRef)(e);return r.current!==e&&(a.current=nu(t),r.current=e),a.current}var gI=["radius"],gR=["radius"];function gD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function gL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gD(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function g_(){return(g_=Object.assign.bind()).apply(null,arguments)}function gF(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function g$(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gz=(e,t,a,r,n)=>{var s=nr(a),i=nr(r),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),o=i>=0?1:-1,c=s>=0?1:-1,d=+(i>=0&&s>=0||i<0&&s<0);if(l>0&&Array.isArray(n)){for(var u=[0,0,0,0],m=0;m<4;m++){var x,N,C=null!=(N=n[m])?N:0;u[m]=C>l?l:C}x=nn(h||(h=g$(["M",",",""])),e,t+o*u[0]),u[0]>0&&(x+=nn(p||(p=g$(["A ",",",",0,0,",",",",",""])),u[0],u[0],d,e+c*u[0],t)),x+=nn(f||(f=g$(["L ",",",""])),e+a-c*u[1],t),u[1]>0&&(x+=nn(b||(b=g$(["A ",",",",0,0,",",\n        ",",",""])),u[1],u[1],d,e+a,t+o*u[1])),x+=nn(g||(g=g$(["L ",",",""])),e+a,t+r-o*u[2]),u[2]>0&&(x+=nn(y||(y=g$(["A ",",",",0,0,",",\n        ",",",""])),u[2],u[2],d,e+a-c*u[2],t+r)),x+=nn(v||(v=g$(["L ",",",""])),e+c*u[3],t+r),u[3]>0&&(x+=nn(j||(j=g$(["A ",",",",0,0,",",\n        ",",",""])),u[3],u[3],d,e,t+r-o*u[3])),x+="Z"}else if(l>0&&n===+n&&n>0){var S=Math.min(l,n);x=nn(k||(k=g$(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+o*S,S,S,d,e+c*S,t,e+a-c*S,t,S,S,d,e+a,t+o*S,e+a,t+r-o*S,S,S,d,e+a-c*S,t+r,e+c*S,t+r,S,S,d,e,t+r-o*S)}else x=nn(w||(w=g$(["M ",","," h "," v "," h "," Z"])),e,t,a,r,-a);return x},gq={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gW=e=>{var t=fJ(e,gq),a=(0,z.useRef)(null),[r,n]=(0,z.useState)(-1);(0,z.useEffect)(()=>{if(a.current&&a.current.getTotalLength)try{var e=a.current.getTotalLength();e&&n(e)}catch(e){}},[]);var{x:s,y:i,width:l,height:o,radius:c,className:d}=t,{animationEasing:u,animationDuration:m,animationBegin:x,isAnimationActive:h,isUpdateAnimationActive:p}=t,f=(0,z.useRef)(l),b=(0,z.useRef)(o),g=(0,z.useRef)(s),y=(0,z.useRef)(i),v=gT((0,z.useMemo)(()=>({x:s,y:i,width:l,height:o,radius:c}),[s,i,l,o,c]),"rectangle-");if(s!==+s||i!==+i||l!==+l||o!==+o||0===l||0===o)return null;var j=(0,eh.clsx)("recharts-rectangle",d);if(!p){var k=fx(t),{radius:w}=k,N=gF(k,gI);return z.createElement("path",g_({},N,{x:nr(s),y:nr(i),width:nr(l),height:nr(o),radius:"number"==typeof c?c:void 0,className:j,d:gz(s,i,l,o,c)}))}var C=f.current,S=b.current,P=g.current,M=y.current,O="0px ".concat(-1===r?1:r,"px"),E="".concat(r,"px 0px"),A=gx(["strokeDasharray"],m,"string"==typeof u?u:gq.animationEasing);return z.createElement(gA,{animationId:v,key:v,canBegin:r>0,duration:m,easing:u,isActive:p,begin:x},e=>{var r,n=nh(C,l,e),d=nh(S,o,e),u=nh(P,s,e),m=nh(M,i,e);a.current&&(f.current=n,b.current=d,g.current=u,y.current=m),r=h?e>0?{transition:A,strokeDasharray:E}:{strokeDasharray:O}:{strokeDasharray:E};var x=fx(t),{radius:p}=x,v=gF(x,gR);return z.createElement("path",g_({},v,{radius:"number"==typeof c?c:void 0,className:j,d:gz(u,m,n,d,c),ref:a,style:gL(gL({},r),t.style)}))})};function gB(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function gU(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gB(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gB(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function gK(){return(gK=Object.assign.bind()).apply(null,arguments)}function gH(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gV=(e,t,a,r,n)=>{var s=a-r;return nn(N||(N=gH(["M ",",",""])),e,t)+nn(C||(C=gH(["L ",",",""])),e+a,t)+nn(S||(S=gH(["L ",",",""])),e+a-s/2,t+n)+nn(P||(P=gH(["L ",",",""])),e+a-s/2-r,t+n)+nn(M||(M=gH(["L ",","," Z"])),e,t)},gG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gY=e=>{var t=fJ(e,gG),{x:a,y:r,upperWidth:n,lowerWidth:s,height:i,className:l}=t,{animationEasing:o,animationDuration:c,animationBegin:d,isUpdateAnimationActive:u}=t,m=(0,z.useRef)(null),[x,h]=(0,z.useState)(-1),p=(0,z.useRef)(n),f=(0,z.useRef)(s),b=(0,z.useRef)(i),g=(0,z.useRef)(a),y=(0,z.useRef)(r),v=gT(e,"trapezoid-");if((0,z.useEffect)(()=>{if(m.current&&m.current.getTotalLength)try{var e=m.current.getTotalLength();e&&h(e)}catch(e){}},[]),a!==+a||r!==+r||n!==+n||s!==+s||i!==+i||0===n&&0===s||0===i)return null;var j=(0,eh.clsx)("recharts-trapezoid",l);if(!u)return z.createElement("g",null,z.createElement("path",gK({},fx(t),{className:j,d:gV(a,r,n,s,i)})));var k=p.current,w=f.current,N=b.current,C=g.current,S=y.current,P="0px ".concat(-1===x?1:x,"px"),M="".concat(x,"px 0px"),O=gx(["strokeDasharray"],c,o);return z.createElement(gA,{animationId:v,key:v,canBegin:x>0,duration:c,easing:o,isActive:u,begin:d},e=>{var l=nh(k,n,e),o=nh(w,s,e),c=nh(N,i,e),d=nh(C,a,e),u=nh(S,r,e);m.current&&(p.current=l,f.current=o,b.current=c,g.current=d,y.current=u);var x=e>0?{transition:O,strokeDasharray:M}:{strokeDasharray:P};return z.createElement("path",gK({},fx(t),{className:j,d:gV(d,u,l,o,c),ref:m,style:gU(gU({},x),t.style)}))})};function gX(){return(gX=Object.assign.bind()).apply(null,arguments)}function gZ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gJ=e=>{var{cx:t,cy:a,radius:r,angle:n,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:o}=e,c=l*(i?1:-1)+r,d=Math.asin(l/c)/ui,u=o?n:n+s*d,m=uo(t,a,c,u);return{center:m,circleTangency:uo(t,a,r,u),lineTangency:uo(t,a,c*Math.cos(d*ui),o?n-s*d:n),theta:d}},gQ=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:s,endAngle:i}=e,l=ns(i-s)*Math.min(Math.abs(i-s),359.999),o=s+l,c=uo(t,a,n,s),d=uo(t,a,n,o),u=nn(O||(O=gZ(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,n,n,+(Math.abs(l)>180),+(s>o),d.x,d.y);if(r>0){var m=uo(t,a,r,s),x=uo(t,a,r,o);u+=nn(E||(E=gZ(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),x.x,x.y,r,r,+(Math.abs(l)>180),+(s<=o),m.x,m.y)}else u+=nn(A||(A=gZ(["L ",","," Z"])),t,a);return u},g0={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},g1=e=>{var t,a=fJ(e,g0),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u,className:m}=a;if(i<s||d===u)return null;var x=(0,eh.clsx)("recharts-sector",m),h=i-s,p=nm(l,h,0,!0);return t=p>0&&360>Math.abs(d-u)?(e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:n,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:o,endAngle:c}=e,d=ns(c-o),{circleTangency:u,lineTangency:m,theta:x}=gJ({cx:t,cy:a,radius:n,angle:o,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:h,lineTangency:p,theta:f}=gJ({cx:t,cy:a,radius:n,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=l?Math.abs(o-c):Math.abs(o-c)-x-f;if(b<0)return i?nn(T||(T=gZ(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),m.x,m.y,s,s,2*s,s,s,-(2*s)):gQ({cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:o,endAngle:c});var g=nn(I||(I=gZ(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),m.x,m.y,s,s,+(d<0),u.x,u.y,n,n,+(b>180),+(d<0),h.x,h.y,s,s,+(d<0),p.x,p.y);if(r>0){var{circleTangency:y,lineTangency:v,theta:j}=gJ({cx:t,cy:a,radius:r,angle:o,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:k,lineTangency:w,theta:N}=gJ({cx:t,cy:a,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),C=l?Math.abs(o-c):Math.abs(o-c)-j-N;if(C<0&&0===s)return"".concat(g,"L").concat(t,",").concat(a,"Z");g+=nn(R||(R=gZ(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),w.x,w.y,s,s,+(d<0),k.x,k.y,r,r,+(C>180),+(d>0),y.x,y.y,s,s,+(d<0),v.x,v.y)}else g+=nn(D||(D=gZ(["L",",","Z"])),t,a);return g})({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}):gQ({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),z.createElement("path",gX({},fx(a),{className:x,d:t}))};let g2=Math.PI,g5=2*g2,g4=g5-1e-6;function g3(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}class g6{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?g3:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return g3;let a=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*a)/a+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,a,r){this._append`Q${+e},${+t},${this._x1=+a},${this._y1=+r}`}bezierCurveTo(e,t,a,r,n,s){this._append`C${+e},${+t},${+a},${+r},${this._x1=+n},${this._y1=+s}`}arcTo(e,t,a,r,n){if(e*=1,t*=1,a*=1,r*=1,(n*=1)<0)throw Error(`negative radius: ${n}`);let s=this._x1,i=this._y1,l=a-e,o=r-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>1e-6)if(Math.abs(d*l-o*c)>1e-6&&n){let m=a-s,x=r-i,h=l*l+o*o,p=Math.sqrt(h),f=Math.sqrt(u),b=n*Math.tan((g2-Math.acos((h+u-(m*m+x*x))/(2*p*f)))/2),g=b/f,y=b/p;Math.abs(g-1)>1e-6&&this._append`L${e+g*c},${t+g*d}`,this._append`A${n},${n},0,0,${+(d*m>c*x)},${this._x1=e+y*l},${this._y1=t+y*o}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,a,r,n,s){if(e*=1,t*=1,a*=1,s=!!s,a<0)throw Error(`negative radius: ${a}`);let i=a*Math.cos(r),l=a*Math.sin(r),o=e+i,c=t+l,d=1^s,u=s?r-n:n-r;null===this._x1?this._append`M${o},${c}`:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-c)>1e-6)&&this._append`L${o},${c}`,a&&(u<0&&(u=u%g5+g5),u>g4?this._append`A${a},${a},0,1,${d},${e-i},${t-l}A${a},${a},0,1,${d},${this._x1=o},${this._y1=c}`:u>1e-6&&this._append`A${a},${a},0,${+(u>=g2)},${d},${this._x1=e+a*Math.cos(n)},${this._y1=t+a*Math.sin(n)}`)}rect(e,t,a,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${a*=1}v${+r}h${-a}Z`}toString(){return this._}}function g8(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(null==a)t=null;else{let e=Math.floor(a);if(!(e>=0))throw RangeError(`invalid digits: ${a}`);t=e}return e},()=>new g6(t)}g6.prototype;let g9=Math.cos,g7=Math.sin,ye=Math.sqrt,yt=Math.PI,ya=2*yt;ye(3);let yr={draw(e,t){let a=ye(t/yt);e.moveTo(a,0),e.arc(0,0,a,0,ya)}},yn=ye(1/3),ys=2*yn,yi=g7(yt/10)/g7(7*yt/10),yl=g7(ya/10)*yi,yo=-g9(ya/10)*yi,yc=ye(3);ye(3);let yd=ye(3)/2,yu=1/ye(12),ym=(yu/2+1)*3;var yx=["type","size","sizeType"];function yh(){return(yh=Object.assign.bind()).apply(null,arguments)}function yp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function yf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yp(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var yb={symbolCircle:yr,symbolCross:{draw(e,t){let a=ye(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},symbolDiamond:{draw(e,t){let a=ye(t/ys),r=a*yn;e.moveTo(0,-a),e.lineTo(r,0),e.lineTo(0,a),e.lineTo(-r,0),e.closePath()}},symbolSquare:{draw(e,t){let a=ye(t),r=-a/2;e.rect(r,r,a,a)}},symbolStar:{draw(e,t){let a=ye(.8908130915292852*t),r=yl*a,n=yo*a;e.moveTo(0,-a),e.lineTo(r,n);for(let t=1;t<5;++t){let s=ya*t/5,i=g9(s),l=g7(s);e.lineTo(l*a,-i*a),e.lineTo(i*r-l*n,l*r+i*n)}e.closePath()}},symbolTriangle:{draw(e,t){let a=-ye(t/(3*yc));e.moveTo(0,2*a),e.lineTo(-yc*a,-a),e.lineTo(yc*a,-a),e.closePath()}},symbolWye:{draw(e,t){let a=ye(t/ym),r=a/2,n=a*yu,s=a*yu+a,i=-r;e.moveTo(r,n),e.lineTo(r,s),e.lineTo(i,s),e.lineTo(-.5*r-yd*n,yd*r+-.5*n),e.lineTo(-.5*r-yd*s,yd*r+-.5*s),e.lineTo(-.5*i-yd*s,yd*i+-.5*s),e.lineTo(-.5*r+yd*n,-.5*n-yd*r),e.lineTo(-.5*r+yd*s,-.5*s-yd*r),e.lineTo(-.5*i+yd*s,-.5*s-yd*i),e.closePath()}}},yg=Math.PI/180,yy=e=>{var{type:t="circle",size:a=64,sizeType:r="area"}=e,n=yf(yf({},function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,yx)),{},{type:t,size:a,sizeType:r}),s="circle";"string"==typeof t&&(s=t);var{className:i,cx:l,cy:o}=n,c=fx(n);return no(l)&&no(o)&&no(a)?z.createElement("path",yh({},c,{className:(0,eh.clsx)("recharts-symbols",i),transform:"translate(".concat(l,", ").concat(o,")"),d:(()=>{var e,t=(e=s,yb["symbol".concat(nf(e))]||yr),n=(function(e,t){let a=null,r=g8(n);function n(){let n;if(a||(a=n=r()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),n)return a=null,n+""||null}return e="function"==typeof e?e:sG(e||yr),t="function"==typeof t?t:sG(void 0===t?64:+t),n.type=function(t){return arguments.length?(e="function"==typeof t?t:sG(t),n):e},n.size=function(e){return arguments.length?(t="function"==typeof e?e:sG(+e),n):t},n.context=function(e){return arguments.length?(a=null==e?null:e,n):a},n})().type(t).size(((e,t,a)=>{if("area"===t)return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*yg;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.tan(r)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(a,r,s))();if(null!==n)return n})()})):null};function yv(e){this._context=e}function yj(e){return new yv(e)}function yk(e){return e[0]}function yw(e){return e[1]}function yN(e,t){var a=sG(!0),r=null,n=yj,s=null,i=g8(l);function l(l){var o,c,d,u=(l=sV(l)).length,m=!1;for(null==r&&(s=n(d=i())),o=0;o<=u;++o)!(o<u&&a(c=l[o],o,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(c,o,l),+t(c,o,l));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?yk:sG(e),t="function"==typeof t?t:void 0===t?yw:sG(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:sG(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:sG(+e),l):t},l.defined=function(e){return arguments.length?(a="function"==typeof e?e:sG(!!e),l):a},l.curve=function(e){return arguments.length?(n=e,null!=r&&(s=n(r)),l):n},l.context=function(e){return arguments.length?(null==e?r=s=null:s=n(r=e),l):r},l}function yC(e,t,a){var r=null,n=sG(!0),s=null,i=yj,l=null,o=g8(c);function c(c){var d,u,m,x,h,p=(c=sV(c)).length,f=!1,b=Array(p),g=Array(p);for(null==s&&(l=i(h=o())),d=0;d<=p;++d){if(!(d<p&&n(x=c[d],d,c))===f)if(f=!f)u=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=d-1;m>=u;--m)l.point(b[m],g[m]);l.lineEnd(),l.areaEnd()}f&&(b[d]=+e(x,d,c),g[d]=+t(x,d,c),l.point(r?+r(x,d,c):b[d],a?+a(x,d,c):g[d]))}if(h)return l=null,h+""||null}function d(){return yN().defined(n).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?yk:sG(+e),t="function"==typeof t?t:void 0===t?sG(0):sG(+t),a="function"==typeof a?a:void 0===a?yw:sG(+a),c.x=function(t){return arguments.length?(e="function"==typeof t?t:sG(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:sG(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:sG(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:sG(+e),a=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:sG(+e),c):t},c.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:sG(+e),c):a},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(a)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(n="function"==typeof e?e:sG(!!e),c):n},c.curve=function(e){return arguments.length?(i=e,null!=s&&(l=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=l=null:l=i(s=e),c):s},c}function yS(){}function yP(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function yM(e){this._context=e}function yO(e){this._context=e}function yE(e){this._context=e}yy.registerSymbol=(e,t)=>{yb["symbol".concat(nf(e))]=t},yv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},yM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yP(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yP(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yO.prototype={areaStart:yS,areaEnd:yS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yP(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:yP(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class yA{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function yT(e){this._context=e}yT.prototype={areaStart:yS,areaEnd:yS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yI(e,t,a){var r=e._x1-e._x0,n=t-e._x1,s=(e._y1-e._y0)/(r||n<0&&-0),i=(a-e._y1)/(n||r<0&&-0);return((s<0?-1:1)+(i<0?-1:1))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs((s*n+i*r)/(r+n)))||0}function yR(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function yD(e,t,a){var r=e._x0,n=e._y0,s=e._x1,i=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,n+l*t,s-l,i-l*a,s,i)}function yL(e){this._context=e}function y_(e){this._context=new yF(e)}function yF(e){this._context=e}function y$(e){this._context=e}function yz(e){var t,a,r=e.length-1,n=Array(r),s=Array(r),i=Array(r);for(n[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=n[t]/s[t-1],s[t]-=a,i[t]-=a*i[t-1];for(n[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)n[t]=(i[t]-n[t+1])/s[t];for(t=0,s[r-1]=(e[r]+n[r-1])/2;t<r-1;++t)s[t]=2*e[t+1]-n[t+1];return[n,s]}function yq(e,t){this._context=e,this._t=t}function yW(){return(yW=Object.assign.bind()).apply(null,arguments)}function yB(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function yU(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yB(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yB(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}yL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yD(this,this._t0,yR(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yD(this,yR(this,a=yI(this,e,t)),a);break;default:yD(this,this._t0,a=yI(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}},(y_.prototype=Object.create(yL.prototype)).point=function(e,t){yL.prototype.point.call(this,t,e)},yF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,r,n,s){this._context.bezierCurveTo(t,e,r,a,s,n)}},y$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===a)this._context.lineTo(e[1],t[1]);else for(var r=yz(e),n=yz(t),s=0,i=1;i<a;++s,++i)this._context.bezierCurveTo(r[0][s],n[0][s],r[1][s],n[1][s],e[i],t[i]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}}this._x=e,this._y=t}};var yK={curveBasisClosed:function(e){return new yO(e)},curveBasisOpen:function(e){return new yE(e)},curveBasis:function(e){return new yM(e)},curveBumpX:function(e){return new yA(e,!0)},curveBumpY:function(e){return new yA(e,!1)},curveLinearClosed:function(e){return new yT(e)},curveLinear:yj,curveMonotoneX:function(e){return new yL(e)},curveMonotoneY:function(e){return new y_(e)},curveNatural:function(e){return new y$(e)},curveStep:function(e){return new yq(e,.5)},curveStepAfter:function(e){return new yq(e,1)},curveStepBefore:function(e){return new yq(e,0)}},yH=e=>s0(e.x)&&s0(e.y),yV=e=>null!=e.base&&yH(e.base)&&yH(e),yG=e=>e.x,yY=e=>e.y,yX=e=>{var{className:t,points:a,path:r,pathRef:n}=e,s=sB(iG);if((!a||!a.length)&&!r)return null;var i={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},l=a&&a.length?(e=>{var{type:t="linear",points:a=[],baseLine:r,layout:n,connectNulls:s=!1}=e,i=((e,t)=>{if("function"==typeof e)return e;var a="curve".concat(nf(e));if(("curveMonotone"===a||"curveBump"===a)&&t){var r=yK["".concat(a).concat("vertical"===t?"Y":"X")];if(r)return r}return yK[a]||yj})(t,n),l=s?a.filter(yH):a;if(Array.isArray(r)){var o=a.map((e,t)=>yU(yU({},e),{},{base:r[t]}));return("vertical"===n?yC().y(yY).x1(yG).x0(e=>e.base.x):yC().x(yG).y1(yY).y0(e=>e.base.y)).defined(yV).curve(i)(s?o.filter(yV):o)}return("vertical"===n&&no(r)?yC().y(yY).x1(yG).x0(r):no(r)?yC().x(yG).y1(yY).y0(r):yN().x(yG).y(yY)).defined(yH).curve(i)(l)})(i):r;return z.createElement("path",yW({},fu(e),go(e),{className:(0,eh.clsx)("recharts-curve",t),d:null===l?void 0:l,ref:n}))},yZ=["option","shapeType","activeClassName"];function yJ(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function yQ(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yJ(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yJ(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function y0(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return z.createElement(gW,a);case"trapezoid":return z.createElement(gY,a);case"sector":return z.createElement(g1,a);case"symbols":if("symbols"===t)return z.createElement(yy,a);break;case"curve":return z.createElement(yX,a);default:return null}}function y1(e){var t,{option:a,shapeType:r,activeClassName:n="recharts-active-shape"}=e,s=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,yZ);if((0,z.isValidElement)(a))t=(0,z.cloneElement)(a,yQ(yQ({},s),(0,z.isValidElement)(a)?a.props:a));else if("function"==typeof a)t=a(s,s.index);else if((0,gd.default)(a)&&"boolean"!=typeof a){var i=yQ(yQ({},s),a);t=z.createElement(y0,{shapeType:r,elementProps:i})}else t=z.createElement(y0,{shapeType:r,elementProps:s});return s.isActive?z.createElement(f8,{className:n},t):t}function y2(){return(y2=Object.assign.bind()).apply(null,arguments)}function y5(e){return z.createElement(y1,y2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var y4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a,r)=>{if(no(e))return e;var n=no(a)||null==a;return n?e(a,r):(n||function(e,t){if(!e)throw Error("Invariant failed")}(!1,"minPointSize callback function received a value with type of ".concat(typeof a,". Currently only numbers or null/undefined are supported.")),t)}},y3=(e,t,a)=>{var r=s$();return(n,s)=>i=>{null==e||e(n,s,i),r(sf({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},y6=e=>{var t=s$();return(a,r)=>n=>{null==e||e(a,r,n),t(sb())}},y8=(e,t,a)=>{var r=s$();return(n,s)=>i=>{null==e||e(n,s,i),r(sy({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}};function y9(e){var{tooltipEntrySettings:t}=e,a=s$(),r=iw(),n=(0,z.useRef)(null);return(0,z.useLayoutEffect)(()=>{r||(null===n.current?a(sm(t)):n.current!==t&&a(sx({prev:n.current,next:t})),n.current=t)},[t,a,r]),(0,z.useLayoutEffect)(()=>()=>{n.current&&(a(sh(n.current)),n.current=null)},[a]),null}var y7=["children"],ve=(0,z.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function vt(e){var{children:t}=e,a=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,y7);return z.createElement(ve.Provider,{value:a},t)}function va(e,t){var a,r,n=sB(t=>uV(t,e)),s=sB(e=>uX(e,t)),i=null!=(a=null==n?void 0:n.allowDataOverflow)?a:uK.allowDataOverflow,l=null!=(r=null==s?void 0:s.allowDataOverflow)?r:uG.allowDataOverflow;return{needClip:i||l,needClipX:i,needClipY:l}}function vr(e){var{xAxisId:t,yAxisId:a,clipPathId:r}=e,n=sB(fH),{needClipX:s,needClipY:i,needClip:l}=va(t,a);if(!l||!n)return null;var{x:o,y:c,width:d,height:u}=n;return z.createElement("clipPath",{id:"clipPath-".concat(r)},z.createElement("rect",{x:s?o:o-d/2,y:i?c:c-u/2,width:s?d:2*d,height:i?u:2*u}))}var vn=(e,t,a)=>{var r=null!=a?a:e;if(null!=r)return nm(r,t,0)};function vs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function vi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vs(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function vl(e,t){var a,r;return null!=(a=null==(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))?void 0:r.xAxisId)?a:0}function vo(e,t){var a,r;return null!=(a=null==(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))?void 0:r.yAxisId)?a:0}var vc=rc([u5,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),vd=rc([vc],e=>null==e?void 0:e.maxBarSize),vu=rc([iG,u5,vl,vo,(e,t,a)=>a],(e,t,a,r,n)=>t.filter(t=>"horizontal"===e?t.xAxisId===a:t.yAxisId===r).filter(e=>e.isPanorama===n).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),vm=rc([vu,e=>e.rootProps.barSize,(e,t)=>{var a=iG(e),r=vl(e,t),n=vo(e,t);if(null!=r&&null!=n)return"horizontal"===a?xd(e,"xAxis",r):xd(e,"yAxis",n)}],(e,t,a)=>{var r=e.filter(uR),n=e.filter(e=>null==e.stackId);return[...Object.entries(r.reduce((e,t)=>{var a=e[t.stackId];return null==a&&(a=[]),a.push(t),e[t.stackId]=a,e},{})).map(e=>{var r,[n,s]=e;return{stackId:n,dataKeys:s.map(e=>e.dataKey),barSize:vn(t,a,null==(r=s[0])?void 0:r.barSize)}}),...n.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:vn(t,a,e.barSize)}))]}),vx=(e,t,a)=>{var r,n,s=iG(e),i=vl(e,t),l=vo(e,t);if(null!=i&&null!=l)return"horizontal"===s?(r=xv(e,"xAxis",i,a),n=xy(e,"xAxis",i,a)):(r=xv(e,"yAxis",l,a),n=xy(e,"yAxis",l,a)),is(r,n)},vh=rc([vm,d6,e=>e.rootProps.barGap,d8,(e,t,a)=>{var r,n,s,i,l=vc(e,t);if(null==l)return 0;var o=vl(e,t),c=vo(e,t);if(null==o||null==c)return 0;var d=iG(e),u=d6(e),{maxBarSize:m}=l;return"horizontal"===d?(s=xv(e,"xAxis",o,a),i=xy(e,"xAxis",o,a)):(s=xv(e,"yAxis",c,a),i=xy(e,"yAxis",c,a)),null!=(r=null!=(n=is(s,i,!0))?n:null==m?u:m)?r:0},vx,vd],(e,t,a,r,n,s,i)=>{var l=function(e,t,a,r,n){var s,i,l=r.length;if(!(l<1)){var o=nm(e,a,0,!0),c=[];if(s0(null==(s=r[0])?void 0:s.barSize)){var d=!1,u=a/l,m=r.reduce((e,t)=>e+(t.barSize||0),0);(m+=(l-1)*o)>=a&&(m-=(l-1)*o,o=0),m>=a&&u>0&&(d=!0,u*=.9,m=l*u);var x={offset:((a-m)/2|0)-o,size:0};i=r.reduce((e,t)=>{var a,r={stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:null!=(a=t.barSize)?a:0}},n=[...e,r];return x=r.position,n},c)}else{var h=nm(t,a,0,!0);a-2*h-(l-1)*o<=0&&(o=0);var p=(a-2*h-(l-1)*o)/l;p>1&&(p>>=0);var f=s0(n)?Math.min(p,n):p;i=r.reduce((e,t,a)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h+(p+o)*a+(p-f)/2,size:f}}],c)}return i}}(a,r,n!==s?n:s,e,null==i?t:i);return n!==s&&null!=l&&(l=l.map(e=>vi(vi({},e),{},{position:vi(vi({},e.position),{},{offset:e.position.offset-n/2})}))),l}),vp=rc([vh,vc],(e,t)=>{if(null!=e&&null!=t){var a=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=a)return a.position}}),vf=rc([(e,t,a)=>{var r=iG(e),n=vl(e,t),s=vo(e,t);if(null!=n&&null!=s)return"horizontal"===r?mh(e,"yAxis",s,a):mh(e,"xAxis",n,a)},vc],(e,t)=>{var a=uT(t);if(!e||null==a||null==t)return;var{stackId:r}=t;if(null!=r){var n=e[r];if(n){var{stackedData:s}=n;if(s)return s.find(e=>e.key===a)}}}),vb=rc([iy,ij,(e,t,a)=>{var r=vl(e,t);if(null!=r)return xv(e,"xAxis",r,a)},(e,t,a)=>{var r=vo(e,t);if(null!=r)return xv(e,"yAxis",r,a)},(e,t,a)=>{var r=vl(e,t);if(null!=r)return xy(e,"xAxis",r,a)},(e,t,a)=>{var r=vo(e,t);if(null!=r)return xy(e,"yAxis",r,a)},vp,iG,dG,vx,vf,vc,(e,t,a,r)=>r],(e,t,a,r,n,s,i,l,o,c,d,u,m)=>{var x,{chartData:h,dataStartIndex:p,dataEndIndex:f}=o;if(null!=u&&null!=i&&null!=t&&("horizontal"===l||"vertical"===l)&&null!=a&&null!=r&&null!=n&&null!=s&&null!=c){var{data:b}=u;if(null!=(x=null!=b&&b.length>0?b:null==h?void 0:h.slice(p,f+1)))return function(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:n,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:o,yAxisTicks:c,stackedData:d,displayedData:u,offset:m,cells:x,parentViewBox:h,dataStartIndex:p}=e,f="horizontal"===t?l:i,b=d?f.scale.domain():null,g=(e=>{var{numericAxis:t}=e,a=t.scale.domain();if("number"===t.type){var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return r<=0&&n>=0?0:n<0?n:r}return a[0]})({numericAxis:f}),y=f.scale.map(g);return u.map((e,u)=>{if(d){var f=d[u+p];if(null==f)return null;j=((e,t)=>{if(!t||2!==t.length||!no(t[0])||!no(t[1]))return e;var a=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!no(e[0])||e[0]<a)&&(n[0]=a),(!no(e[1])||e[1]>r)&&(n[1]=r),n[0]>r&&(n[0]=r),n[1]<a&&(n[1]=a),n})(f,b)}else Array.isArray(j=s4(e,a))||(j=[g,j]);var v=y4(r,0)(j[1],u);if("horizontal"===t){var j,k,w,N,C,S,P,M=l.scale.map(j[0]),O=l.scale.map(j[1]);if(null==M||null==O)return null;k=it({axis:i,ticks:o,bandSize:s,offset:n.offset,entry:e,index:u}),w=null!=(P=null!=O?O:M)?P:void 0,N=n.size;var E=M-O;if(C=ni(E)?0:E,S={x:k,y:m.top,width:N,height:m.height},Math.abs(v)>0&&Math.abs(C)<Math.abs(v)){var A=ns(C||v)*(Math.abs(v)-Math.abs(C));w-=A,C+=A}}else{var T=i.scale.map(j[0]),I=i.scale.map(j[1]);if(null==T||null==I)return null;if(k=T,w=it({axis:l,ticks:c,bandSize:s,offset:n.offset,entry:e,index:u}),N=I-T,C=n.size,S={x:m.left,y:w,width:m.width,height:C},Math.abs(v)>0&&Math.abs(N)<Math.abs(v)){var R=ns(N||v)*(Math.abs(v)-Math.abs(N));N+=R}}return null==k||null==w||null==N||null==C?null:vq(vq({},e),{},{stackedBarStart:y,x:k,y:w,width:N,height:C,value:d?j:j[1],payload:e,background:S,tooltipPosition:{x:k+N/2,y:w+C/2},parentViewBox:h},x&&x[u]&&x[u].props)}).filter(Boolean)}({layout:l,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:d,displayedData:x,offset:e,cells:m,dataStartIndex:p})}});function vg(e){var{legendPayload:t}=e,a=s$(),r=iw(),n=(0,z.useRef)(null);return(0,z.useLayoutEffect)(()=>{r||(null===n.current?a(py(t)):n.current!==t&&a(pv({prev:n.current,next:t})),n.current=t)},[a,r,t]),(0,z.useLayoutEffect)(()=>()=>{n.current&&(a(pj(n.current)),n.current=null)},[a]),null}function vy(e){var{legendPayload:t}=e,a=s$(),r=sB(iG),n=(0,z.useRef)(null);return(0,z.useLayoutEffect)(()=>{("centric"===r||"radial"===r)&&(null===n.current?a(py(t)):n.current!==t&&a(pv({prev:n.current,next:t})),n.current=t)},[a,r,t]),(0,z.useLayoutEffect)(()=>()=>{n.current&&(a(pj(n.current)),n.current=null)},[a]),null}var vv=null!=(L=z["useId".toString()])?L:()=>{var[e]=z.useState(()=>nu("uid-"));return e},vj=(0,z.createContext)(void 0),vk=e=>{var t,a,r,{id:n,type:s,children:i}=e,l=(t="recharts-".concat(s),a=n,r=vv(),a||(t?"".concat(t,"-").concat(r):r));return z.createElement(vj.Provider,{value:l},i(l))},vw=(0,z.memo)(e=>{var t=s$(),a=(0,z.useRef)(null);return(0,z.useLayoutEffect)(()=>{null===a.current?t(h9(e)):a.current!==e&&t(h7({prev:a.current,next:e})),a.current=e},[t,e]),(0,z.useLayoutEffect)(()=>()=>{a.current&&(t(pe(a.current)),a.current=null)},[t]),null});function vN(e){var t=s$();return(0,z.useLayoutEffect)(()=>(t(pt(e)),()=>{t(pa(e))}),[t,e]),null}var vC=(e,t)=>t,vS=(e,t,a)=>a,vP=rc([vC,u5,vS],(e,t,a)=>t.filter(e=>"bar"===e.type).filter(t=>t.stackId===e).filter(e=>e.isPanorama===a).filter(e=>!e.hide)),vM=rc([vP],e=>e.map(e=>e.id)),vO=rc([e=>e,vC,vS],(e,t,a)=>{var r=vM(e,t,a),n=[];return r.forEach(t=>{var r=vb(e,t,a,void 0);null==r||r.forEach((e,t)=>{n[t]=((e,t)=>{if(!e)return t;if(!t)return e;var a=Math.min(e.x,e.x+e.width,t.x,t.x+t.width),r=Math.min(e.y,e.y+e.height,t.y,t.y+t.height);return{x:a,y:r,width:Math.max(e.x,e.x+e.width,t.x,t.x+t.width)-a,height:Math.max(e.y,e.y+e.height,t.y,t.y+t.height)-r}})(n[t],e)})}),n}),vE=["index"];function vA(){return(vA=Object.assign.bind()).apply(null,arguments)}var vT=(0,z.createContext)(void 0),vI=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),vR=e=>{var{index:t}=e,a=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,vE),r=(e=>{var t=(0,z.useContext)(vT);if(null!=t){var{stackId:a}=t;return"url(#".concat(vI(a,e),")")}})(t);return z.createElement(f8,vA({className:"recharts-bar-stack-layer",clipPath:r},a))},vD=["onMouseEnter","onMouseLeave","onClick"],vL=["value","background","tooltipPosition"],v_=["id"],vF=["onMouseEnter","onClick","onMouseLeave"];function v$(){return(v$=Object.assign.bind()).apply(null,arguments)}function vz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function vq(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vz(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function vW(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var vB=f4.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:n,name:s,hide:i,unit:l,tooltipType:o,id:c}=e,d={dataDefinedOnItem:void 0,getPosition:ng,settings:{stroke:a,strokeWidth:r,fill:n,dataKey:t,nameKey:void 0,name:il(s,t),hide:i,type:o,color:n,unit:l,graphicalItemId:c}};return f4.createElement(y9,{tooltipEntrySettings:d})});function vU(e){var t,a=sB(hh),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=vW(i,vD),u=y3(l,n,i.id),m=y6(o),x=y8(c,n,i.id);if(!s||null==r)return null;var h=fm(s);return f4.createElement(bA,{zIndex:(t=ud.barBackground,s&&"object"==typeof s&&"zIndex"in s&&"number"==typeof s.zIndex&&s0(s.zIndex)?s.zIndex:t)},r.map((e,t)=>{var{value:r,background:i,tooltipPosition:l}=e,o=vW(e,vL);if(!i)return null;var c=u(e,t),p=m(e,t),f=x(e,t),b=vq(vq(vq(vq(vq({option:s,isActive:String(t)===a},o),{},{fill:"#eee"},i),h),gc(d,e,t)),{},{onMouseEnter:c,onMouseLeave:p,onClick:f,dataKey:n,index:t,className:"recharts-bar-background-rectangle"});return f4.createElement(y5,v$({key:"background-bar-".concat(t)},b))}))}function vK(e){var{showLabels:t,children:a,rects:r}=e,n=null==r?void 0:r.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return vq(vq({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return f4.createElement(b3,{value:t?n:void 0},a)}function vH(e){var{shape:t,activeBar:a,baseProps:r,entry:n,index:s,dataKey:i}=e,l=sB(hh),o=sB(hf),c=a&&String(s)===l&&(null==o||i===o),d=c?a:t;return c?f4.createElement(bA,{zIndex:ud.activeBar},f4.createElement(vR,{index:s},f4.createElement(y5,v$({},r,{name:String(r.name)},n,{isActive:c,option:d,index:s,dataKey:i})))):f4.createElement(y5,v$({},r,{name:String(r.name)},n,{isActive:c,option:d,index:s,dataKey:i}))}function vV(e){var{shape:t,baseProps:a,entry:r,index:n,dataKey:s}=e;return f4.createElement(y5,v$({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:n,dataKey:s}))}function vG(e){var t,{data:a,props:r}=e,n=null!=(t=fu(r))?t:{},{id:s}=n,i=vW(n,v_),{shape:l,dataKey:o,activeBar:c}=r,{onMouseEnter:d,onClick:u,onMouseLeave:m}=r,x=vW(r,vF),h=y3(d,o,s),p=y6(m),f=y8(u,o,s);return a?f4.createElement(f4.Fragment,null,a.map((e,t)=>f4.createElement(vR,v$({index:t,key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},gc(x,e,t),{onMouseEnter:h(e,t),onMouseLeave:p(e,t),onClick:f(e,t)}),c?f4.createElement(vH,{shape:l,activeBar:c,baseProps:i,entry:e,index:t,dataKey:o}):f4.createElement(vV,{shape:l,baseProps:i,entry:e,index:t,dataKey:o})))):null}function vY(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:n,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:o,onAnimationEnd:c,onAnimationStart:d}=t,u=a.current,m=gT(t,"recharts-bar-"),[x,h]=(0,f4.useState)(!1),p=(0,f4.useCallback)(()=>{"function"==typeof c&&c(),h(!1)},[c]),f=(0,f4.useCallback)(()=>{"function"==typeof d&&d(),h(!0)},[d]);return f4.createElement(vK,{showLabels:!x,rects:r},f4.createElement(gA,{animationId:m,begin:i,duration:l,isActive:s,easing:o,onAnimationEnd:p,onAnimationStart:f,key:m},e=>{var s=1===e?r:null==r?void 0:r.map((t,a)=>{var r=u&&u[a];if(r)return vq(vq({},t),{},{x:nh(r.x,t.x,e),y:nh(r.y,t.y,e),width:nh(r.width,t.width,e),height:nh(r.height,t.height,e)});if("horizontal"===n){var s=nh(0,t.height,e),i=nh(t.stackedBarStart,t.y,e);return vq(vq({},t),{},{y:i,height:s})}var l=nh(0,t.width,e),o=nh(t.stackedBarStart,t.x,e);return vq(vq({},t),{},{width:l,x:o})});return(e>0&&(a.current=null!=s?s:null),null==s)?null:f4.createElement(f8,null,f4.createElement(vG,{props:t,data:s}))}),f4.createElement(b7,{label:t.label}),t.children)}function vX(e){var t=(0,f4.useRef)(null);return f4.createElement(vY,{previousRectanglesRef:t,props:e})}var vZ=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:s4(e,t)}};class vJ extends f4.PureComponent{render(){var{hide:e,data:t,dataKey:a,className:r,xAxisId:n,yAxisId:s,needClip:i,background:l,id:o}=this.props;if(e||null==t)return null;var c=(0,eh.clsx)("recharts-bar",r);return f4.createElement(f8,{className:c,id:o},i&&f4.createElement("defs",null,f4.createElement(vr,{clipPathId:o,xAxisId:n,yAxisId:s})),f4.createElement(f8,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(o,")"):void 0},f4.createElement(vU,{data:t,dataKey:a,background:l,allOtherBarProps:this.props}),f4.createElement(vX,this.props)))}}var vQ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0,zIndex:ud.bar};function v0(e){var t,{xAxisId:a,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:m}=va(a,r),x=sB(iG),h=iw(),p=gs(e.children,f9),f=sB(t=>vb(t,e.id,h,p));if("vertical"!==x&&"horizontal"!==x)return null;var b=null==f?void 0:f[0];return t=null==b||null==b.height||null==b.width?0:"vertical"===x?b.height/2:b.width/2,f4.createElement(vt,{xAxisId:a,yAxisId:r,data:f,dataPointFormatter:vZ,errorBarOffset:t},f4.createElement(vJ,v$({},e,{layout:x,needClip:m,data:f,xAxisId:a,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u})))}var v1=f4.memo(function(e){var t,a,r=fJ(e,vQ),n=(t=r.stackId,null!=(a=(0,z.useContext)(vT))?a.stackId:null!=t?s7(t):void 0),s=iw();return f4.createElement(vk,{id:r.id,type:"bar"},e=>f4.createElement(f4.Fragment,null,f4.createElement(vg,{legendPayload:(e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:il(a,t),payload:e}]})(r)}),f4.createElement(vB,{dataKey:r.dataKey,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:e}),f4.createElement(vw,{type:"bar",id:e,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:n,hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:s}),f4.createElement(bA,{zIndex:r.zIndex},f4.createElement(v0,v$({},r,{id:e})))))},fa);v1.displayName="Bar";var v2=z;function v5(){return(v5=Object.assign.bind()).apply(null,arguments)}var v4=e=>{var{cx:t,cy:a,r,className:n}=e,s=(0,eh.clsx)("recharts-dot",n);return no(t)&&no(a)&&no(r)?z.createElement("circle",v5({},fu(e),go(e),{className:s,cx:t,cy:a,r:r})):null},v3=["points"];function v6(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function v8(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v6(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v6(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function v9(){return(v9=Object.assign.bind()).apply(null,arguments)}function v7(e){var{option:t,dotProps:a,className:r}=e;if((0,z.isValidElement)(t))return(0,z.cloneElement)(t,a);if("function"==typeof t)return t(a);var n=(0,eh.clsx)(r,"boolean"!=typeof t?t.className:""),s=null!=a?a:{},{points:i}=s,l=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(s,v3);return z.createElement(v4,v9({},l,{className:n}))}function je(e){var{points:t,dot:a,className:r,dotClassName:n,dataKey:s,baseProps:i,needClip:l,clipPathId:o,zIndex:c=ud.scatter}=e;if(null==t||!a&&1!==t.length)return null;var d=gi(a),u=null==a?null:(0,z.isValidElement)(a)?fx(a.props):"object"!=typeof a||Array.isArray(a)?null:fx(a),m=t.map((e,r)=>{var l,o,c=v8(v8(v8({r:3},i),u),{},{index:r,cx:null!=(l=e.x)?l:void 0,cy:null!=(o=e.y)?o:void 0,dataKey:s,value:e.value,payload:e.payload,points:t});return z.createElement(v7,{key:"dot-".concat(r),option:a,dotProps:c,className:n})}),x={};return l&&null!=o&&(x.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(o,")")),z.createElement(bA,{zIndex:c},z.createElement(f8,v9({className:r},x),m))}function jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var jr=e=>{var t,{point:a,childIndex:r,mainColor:n,activeDot:s,dataKey:i,clipPath:l}=e;if(!1===s||null==a.x||null==a.y)return null;var o=ja(ja(ja({},{index:r,dataKey:i,cx:a.x,cy:a.y,r:4,fill:null!=n?n:"none",strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value}),fm(s)),go(s));return t=(0,z.isValidElement)(s)?(0,z.cloneElement)(s,o):"function"==typeof s?s(o):z.createElement(v4,o),z.createElement(f8,{className:"recharts-active-dot",clipPath:l},t)};function jn(e){var{points:t,mainColor:a,activeDot:r,itemDataKey:n,clipPath:s,zIndex:i=ud.activeDot}=e,l=sB(hh),o=sB(hw);if(null==t||null==o)return null;var c=t.find(e=>o.includes(e.payload));return null==c?null:z.createElement(bA,{zIndex:i},z.createElement(jr,{point:c,childIndex:Number(l),mainColor:a,dataKey:n,activeDot:r,clipPath:s}))}var js=(e,t,a,r)=>xv(e,"xAxis",t,r),ji=(e,t,a,r)=>xy(e,"xAxis",t,r),jl=(e,t,a,r)=>xv(e,"yAxis",a,r),jo=(e,t,a,r)=>xy(e,"yAxis",a,r),jc=rc([iG,js,jl,ji,jo],(e,t,a,r,n)=>s3(e,"xAxis")?is(t,r,!1):is(a,n,!1));function jd(e){return"line"===e.type}var ju=rc([u5,(e,t,a,r,n)=>n],(e,t)=>e.filter(jd).find(e=>e.id===t)),jm=rc([iG,js,jl,ji,jo,ju,jc,dV],(e,t,a,r,n,s,i,l)=>{var o,{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(null!=s&&null!=t&&null!=a&&null!=r&&null!=n&&0!==r.length&&0!==n.length&&null!=i&&("horizontal"===e||"vertical"===e)){var{dataKey:m,data:x}=s;if(null!=(o=null!=x&&x.length>0?x:null==c?void 0:c.slice(d,u+1)))return function(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:i,bandSize:l,displayedData:o}=e;return o.map((e,o)=>{var c=s4(e,i);if("horizontal"===t){var d=ie({axis:a,ticks:n,bandSize:l,entry:e,index:o}),u=null==c?null:r.scale.map(c);return{x:d,y:null!=u?u:null,value:c,payload:e}}var m=null==c?null:a.scale.map(c),x=ie({axis:r,ticks:s,bandSize:l,entry:e,index:o});return null==m||null==x?null:{x:m,y:x,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataKey:m,bandSize:i,displayedData:o})}});function jx(e){var t=fm(e);if(null!=t){var{r:a,strokeWidth:r}=t,n=Number(a),s=Number(r);return(Number.isNaN(n)||n<0)&&(n=3),(Number.isNaN(s)||s<0)&&(s=2),{r:n,strokeWidth:s}}return{r:3,strokeWidth:2}}var jh=["id"],jp=["type","layout","connectNulls","needClip","shape"],jf=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function jb(){return(jb=Object.assign.bind()).apply(null,arguments)}function jg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function jy(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jg(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function jv(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var jj=v2.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:a,getPosition:ng,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:il(i,t),hide:l,type:c,color:r,unit:o,graphicalItemId:d}};return v2.createElement(y9,{tooltipEntrySettings:u})}),jk=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function jw(e){var{clipPathId:t,points:a,props:r}=e,{dot:n,dataKey:s,needClip:i}=r,{id:l}=r,o=fu(jv(r,jh));return v2.createElement(je,{points:a,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:o,needClip:i,clipPathId:t})}function jN(e){var{showLabels:t,children:a,points:r}=e,n=(0,v2.useMemo)(()=>null==r?void 0:r.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return jy(jy({},r),{},{value:e.value,payload:e.payload,viewBox:r,parentViewBox:void 0,fill:void 0})}),[r]);return v2.createElement(b3,{value:t?n:void 0},a)}function jC(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:n,props:s}=e,{type:i,layout:l,connectNulls:o,needClip:c,shape:d}=s,u=jy(jy({},fx(jv(s,jp))),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:r,type:i,layout:l,connectNulls:o,strokeDasharray:null!=n?n:s.strokeDasharray});return v2.createElement(v2.Fragment,null,(null==r?void 0:r.length)>1&&v2.createElement(y1,jb({shapeType:"curve",option:d},u,{pathRef:a})),v2.createElement(jw,{points:r,clipPathId:t,props:s}))}function jS(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:n,longestAnimatedLengthRef:s}=e,{points:i,strokeDasharray:l,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:u,animateNewValues:m,width:x,height:h,onAnimationEnd:p,onAnimationStart:f}=a,b=n.current,g=gT(i,"recharts-line-"),y=(0,v2.useRef)(g),[v,j]=(0,v2.useState)(!1),k=(0,v2.useCallback)(()=>{"function"==typeof p&&p(),j(!1)},[p]),w=(0,v2.useCallback)(()=>{"function"==typeof f&&f(),j(!0)},[f]),N=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(r.current),C=(0,v2.useRef)(0);y.current!==g&&(C.current=s.current,y.current=g);var S=C.current;return v2.createElement(jN,{points:i,showLabels:!v},a.children,v2.createElement(gA,{animationId:g,begin:c,duration:d,isActive:o,easing:u,onAnimationEnd:k,onAnimationStart:w,key:g},e=>{var c,d=Math.min(nh(S,N+S,e),N);if(c=o?l?((e,t,a)=>{var r=a.reduce((e,t)=>e+t);if(!r)return jk(t,e);for(var n=Math.floor(e/r),s=e%r,i=t-e,l=[],o=0,c=0;o<a.length;c+=null!=(d=a[o])?d:0,++o){var d,u=a[o];if(null!=u&&c+u>s){l=[...a.slice(0,o),s-c];break}}var m=l.length%2==0?[0,i]:[i];return[...function(e,t){for(var a=e.length%2!=0?[...e,0]:e,r=[],n=0;n<t;++n)r=[...r,...a];return r}(a,n),...l,...m].map(e=>"".concat(e,"px")).join(", ")})(d,N,"".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e))):jk(N,d):null==l?void 0:String(l),e>0&&N>0&&(n.current=i,s.current=Math.max(s.current,d)),b){var u=b.length/i.length,p=1===e?i:i.map((t,a)=>{var r=Math.floor(a*u);if(b[r]){var n=b[r];return jy(jy({},t),{},{x:nh(n.x,t.x,e),y:nh(n.y,t.y,e)})}return m?jy(jy({},t),{},{x:nh(2*x,t.x,e),y:nh(h/2,t.y,e)}):jy(jy({},t),{},{x:t.x,y:t.y})});return n.current=p,v2.createElement(jC,{props:a,points:p,clipPathId:t,pathRef:r,strokeDasharray:c})}return v2.createElement(jC,{props:a,points:i,clipPathId:t,pathRef:r,strokeDasharray:c})}),v2.createElement(b7,{label:a.label}))}function jP(e){var{clipPathId:t,props:a}=e,r=(0,v2.useRef)(null),n=(0,v2.useRef)(0),s=(0,v2.useRef)(null);return v2.createElement(jS,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:n,pathRef:s})}var jM=(e,t)=>{var a,r;return{x:null!=(a=e.x)?a:void 0,y:null!=(r=e.y)?r:void 0,value:e.value,errorVal:s4(e.payload,t)}};class jO extends v2.Component{render(){var{hide:e,dot:t,points:a,className:r,xAxisId:n,yAxisId:s,top:i,left:l,width:o,height:c,id:d,needClip:u,zIndex:m}=this.props;if(e)return null;var x=(0,eh.clsx)("recharts-line",r),{r:h,strokeWidth:p}=jx(t),f=gi(t),b=2*h+p,g=u?"url(#clipPath-".concat(f?"":"dots-").concat(d,")"):void 0;return v2.createElement(bA,{zIndex:m},v2.createElement(f8,{className:x},u&&v2.createElement("defs",null,v2.createElement(vr,{clipPathId:d,xAxisId:n,yAxisId:s}),!f&&v2.createElement("clipPath",{id:"clipPath-dots-".concat(d)},v2.createElement("rect",{x:l-b/2,y:i-b/2,width:o+b,height:c+b}))),v2.createElement(vt,{xAxisId:n,yAxisId:s,data:a,dataPointFormatter:jM,errorBarOffset:0},v2.createElement(jP,{props:this.props,clipPathId:d}))),v2.createElement(jn,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:g}))}}var jE={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ud.line,type:"linear"};function jA(e){var t=fJ(e,jE),{activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:s,animationEasing:i,connectNulls:l,dot:o,hide:c,isAnimationActive:d,label:u,legendType:m,xAxisId:x,yAxisId:h,id:p}=t,f=jv(t,jf),{needClip:b}=va(x,h),g=sB(fH),y=sB(iG),v=iw(),j=sB(e=>jm(e,x,h,v,p));if("horizontal"!==y&&"vertical"!==y||null==j||null==g)return null;var{height:k,width:w,x:N,y:C}=g;return v2.createElement(jO,jb({},f,{id:p,connectNulls:l,dot:o,activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:s,animationEasing:i,isAnimationActive:d,hide:c,label:u,legendType:m,xAxisId:x,yAxisId:h,points:j,layout:y,height:k,width:w,left:N,top:C,needClip:b}))}var jT=v2.memo(function(e){var t=fJ(e,jE),a=iw();return v2.createElement(vk,{id:t.id,type:"line"},e=>v2.createElement(v2.Fragment,null,v2.createElement(vg,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:il(a,t),payload:e}]})(t)}),v2.createElement(jj,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),v2.createElement(vw,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),v2.createElement(jA,jb({},t,{id:e}))))},fa);jT.displayName="Line";var jI=function(e){var{width:t,height:a}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(r%180+180)%180*Math.PI/180,s=Math.atan(a/t);return Math.abs(n>s&&n<Math.PI-s?a/Math.sin(n):t/Math.cos(n))};function jR(e,t){if(t<1)return[];if(1===t)return e;for(var a=[],r=0;r<e.length;r+=t){var n=e[r];void 0!==n&&a.push(n)}return a}function jD(e,t,a,r,n){if(e*t<e*r||e*t>e*n)return!1;var s=a();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-n)<=0}function jL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function j_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jL(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function jF(e,t,a){var r,{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:u,angle:m}=e;if(!s||!s.length||!n)return[];if(no(c)||pZ.isSsr)return null!=(r=jR(s,(no(c)?c:0)+1))?r:[];var x="top"===o||"bottom"===o?"width":"height",h=u&&"width"===x?bi(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},p=(e,r)=>{var n,s="function"==typeof d?d(e.value,r):e.value;return"width"===x?(n=bi(s,{fontSize:t,letterSpacing:a}),jI({width:n.width+h.width,height:n.height+h.height},m)):bi(s,{fontSize:t,letterSpacing:a})[x]},f=s[0],b=s[1],g=s.length>=2&&null!=f&&null!=b?ns(b.coordinate-f.coordinate):1,y=function(e,t,a){var r="width"===a,{x:n,y:s,width:i,height:l}=e;return 1===t?{start:r?n:s,end:r?n+i:s+l}:{start:r?n+i:s+l,end:r?n:s}}(i,g,x);return"equidistantPreserveStart"===c?function(e,t,a,r,n){for(var s,i=(r||[]).slice(),{start:l,end:o}=t,c=0,d=1,u=l;d<=i.length;)if(s=function(){var t,s=null==r?void 0:r[c];if(void 0===s)return{v:jR(r,d)};var i=c,m=()=>(void 0===t&&(t=a(s,i)),t),x=s.coordinate,h=0===c||jD(e,x,m,u,o);h||(c=0,u=l,d+=1),h&&(u=x+e*(m()/2+n),c+=d)}())return s.v;return[]}(g,y,p,s,l):"equidistantPreserveEnd"===c?function(e,t,a,r,n){var s=(r||[]).slice().length;if(0===s)return[];for(var{start:i,end:l}=t,o=1;o<=s;o++){for(var c,d=(s-1)%o,u=i,m=!0,x=d;x<s&&(0===(c=function(){var t,s=r[x];if(null==s)return 0;var i=x,o=()=>(void 0===t&&(t=a(s,i)),t),c=s.coordinate,h=x===d||jD(e,c,o,u,l);if(!h)return m=!1,1;h&&(u=c+e*(o()/2+n))}())||1!==c);x+=o);if(m){for(var h=[],p=d;p<s;p+=o){var f=r[p];null!=f&&h.push(f)}return h}}return[]}(g,y,p,s,l):("preserveStart"===c||"preserveStartEnd"===c?function(e,t,a,r,n,s){var i=(r||[]).slice(),l=i.length,{start:o,end:c}=t;if(s){var d=r[l-1];if(null!=d){var u=a(d,l-1),m=e*(d.coordinate+e*u/2-c);i[l-1]=d=j_(j_({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),null!=d.tickCoord&&jD(e,d.tickCoord,()=>u,o,c)&&(c=d.tickCoord-e*(u/2+n),i[l-1]=j_(j_({},d),{},{isShow:!0}))}}for(var x=s?l-1:l,h=function(t){var r,s=i[t];if(null==s)return 1;var l=s,d=()=>(void 0===r&&(r=a(s,t)),r);if(0===t){var u=e*(l.coordinate-e*d()/2-o);i[t]=l=j_(j_({},l),{},{tickCoord:u<0?l.coordinate-u*e:l.coordinate})}else i[t]=l=j_(j_({},l),{},{tickCoord:l.coordinate});null!=l.tickCoord&&jD(e,l.tickCoord,d,o,c)&&(o=l.tickCoord+e*(d()/2+n),i[t]=j_(j_({},l),{},{isShow:!0}))},p=0;p<x;p++)if(h(p))continue;return i}(g,y,p,s,l,"preserveStartEnd"===c):function(e,t,a,r,n){for(var s=(r||[]).slice(),i=s.length,{start:l}=t,{end:o}=t,c=function(t){var r,c=s[t];if(null==c)return 1;var d=c,u=()=>(void 0===r&&(r=a(c,t)),r);if(t===i-1){var m=e*(d.coordinate+e*u()/2-o);s[t]=d=j_(j_({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate})}else s[t]=d=j_(j_({},d),{},{tickCoord:d.coordinate});null!=d.tickCoord&&jD(e,d.tickCoord,u,l,o)&&(o=d.tickCoord-e*(u()/2+n),s[t]=j_(j_({},d),{},{isShow:!0}))},d=i-1;d>=0;d--)if(c(d))continue;return s}(g,y,p,s,l)).filter(e=>e.isShow)}function j$(e){return e&&"object"==typeof e&&"className"in e&&"string"==typeof e.className?e.className:""}var jz=["axisLine","width","height","className","hide","ticks","axisType"];function jq(){return(jq=Object.assign.bind()).apply(null,arguments)}function jW(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function jB(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jW(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var jU={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ud.axis};function jK(e){var{x:t,y:a,width:r,height:n,orientation:s,mirror:i,axisLine:l,otherSvgProps:o}=e;if(!l)return null;var c=jB(jB(jB({},o),fu(l)),{},{fill:"none"});if("top"===s||"bottom"===s){var d=+("top"===s&&!i||"bottom"===s&&i);c=jB(jB({},c),{},{x1:t,y1:a+d*n,x2:t+r,y2:a+d*n})}else{var u=+("left"===s&&!i||"right"===s&&i);c=jB(jB({},c),{},{x1:t+u*r,y1:a,x2:t+u*r,y2:a+n})}return z.createElement("line",jq({},c,{className:(0,eh.clsx)("recharts-cartesian-axis-line",(0,na.default)(l,"className"))}))}function jH(e){var t,{option:a,tickProps:r,value:n}=e,s=(0,eh.clsx)(r.className,"recharts-cartesian-axis-tick-value");if(z.isValidElement(a))t=z.cloneElement(a,jB(jB({},r),{},{className:s}));else if("function"==typeof a)t=a(jB(jB({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!=typeof a&&(i=(0,eh.clsx)(i,j$(a))),t=z.createElement(bO,jq({},r,{className:i}),n)}return t}var jV=(0,z.forwardRef)((e,t)=>{var{ticks:a=[],tick:r,tickLine:n,stroke:s,tickFormatter:i,unit:l,padding:o,tickTextProps:c,orientation:d,mirror:u,x:m,y:x,width:h,height:p,tickSize:f,tickMargin:b,fontSize:g,letterSpacing:y,getTicksConfig:v,events:j,axisType:k}=e,w=jF(jB(jB({},v),{},{ticks:a}),g,y),N=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(d,u),C=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(d,u),S=fu(v),P=fm(r),M={};"object"==typeof n&&(M=n);var O=jB(jB({},S),{},{fill:"none"},M),E=w.map(e=>jB({entry:e},function(e,t,a,r,n,s,i,l,o){var c,d,u,m,x,h,p=l?-1:1,f=e.tickSize||i,b=no(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=d=e.coordinate,h=(u=(m=a+!l*n)-p*f)-p*o,x=b;break;case"left":u=m=e.coordinate,x=(c=(d=t+!l*r)-p*f)-p*o,h=b;break;case"right":u=m=e.coordinate,x=(c=(d=t+l*r)+p*f)+p*o,h=b;break;default:c=d=e.coordinate,h=(u=(m=a+l*n)+p*f)+p*o,x=b}return{line:{x1:c,y1:u,x2:d,y2:m},tick:{x:x,y:h}}}(e,m,x,h,p,d,f,u,b))),A=E.map(e=>{var{entry:t,line:a}=e;return z.createElement(f8,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},n&&z.createElement("line",jq({},O,a,{className:(0,eh.clsx)("recharts-cartesian-axis-tick-line",(0,na.default)(n,"className"))})))}),T=E.map((e,t)=>{var a,n,{entry:d,tick:u}=e,m=jB(jB(jB(jB({verticalAnchor:C},S),{},{textAnchor:N,stroke:"none",fill:s},u),{},{index:t,payload:d,visibleTicksCount:w.length,tickFormatter:i,padding:o},c),{},{angle:null!=(a=null!=(n=null==c?void 0:c.angle)?n:S.angle)?a:0}),x=jB(jB({},m),P);return z.createElement(f8,jq({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(d.value,"-").concat(d.coordinate,"-").concat(d.tickCoord)},gc(j,d,t)),r&&z.createElement(jH,{option:r,tickProps:x,value:"".concat("function"==typeof i?i(d.value,t):d.value).concat(l||"")}))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},T.length>0&&z.createElement(bA,{zIndex:ud.label},z.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},T)),A.length>0&&z.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},A))}),jG=(0,z.forwardRef)((e,t)=>{var{axisLine:a,width:r,height:n,className:s,hide:i,ticks:l,axisType:o}=e,c=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,jz),[d,u]=(0,z.useState)(""),[m,x]=(0,z.useState)(""),h=(0,z.useRef)(null);(0,z.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:a,labelGapWithTick:r=5,tickSize:n=0,tickMargin:s=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var l=a?a.getBoundingClientRect().width:0;return Math.round(i+(n+s)+l+(a?r:0))}return 0})({ticks:h.current,label:null==(t=e.labelRef)?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var p=(0,z.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");h.current=t;var a=t[0];if(a){var r=window.getComputedStyle(a),n=r.fontSize,s=r.letterSpacing;(n!==d||s!==m)&&(u(n),x(s))}}},[d,m]);return i||null!=r&&r<=0||null!=n&&n<=0?null:z.createElement(bA,{zIndex:e.zIndex},z.createElement(f8,{className:(0,eh.clsx)("recharts-cartesian-axis",s)},z.createElement(jK,{x:e.x,y:e.y,width:r,height:n,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:fu(e)}),z.createElement(jV,{ref:p,axisType:o,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:m,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),z.createElement(bq,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},z.createElement(bZ,{label:e.label,labelRef:e.labelRef}),e.children)))}),jY=z.forwardRef((e,t)=>{var a=fJ(e,jU);return z.createElement(jG,jq({},a,{ref:t}))});jY.displayName="CartesianAxis";var jX=["domain","range"],jZ=["domain","range"];function jJ(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jQ(e,t){return e===t||!!(Array.isArray(e)&&2===e.length&&Array.isArray(t))&&2===t.length&&e[0]===t[0]&&e[1]===t[1]}function j0(e,t){if(e===t)return!0;var{domain:a,range:r}=e,n=jJ(e,jX),{domain:s,range:i}=t,l=jJ(t,jZ);return!!jQ(a,s)&&!!jQ(r,i)&&fa(n,l)}var j1=["type"],j2=["dangerouslySetInnerHTML","ticks","scale"],j5=["id","scale"];function j4(){return(j4=Object.assign.bind()).apply(null,arguments)}function j3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function j6(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j3(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j3(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function j8(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function j9(e){var t=s$(),a=(0,z.useRef)(null),r=iY(),{type:n}=e,s=j8(e,j1),i=uh(r,"xAxis",n),l=(0,z.useMemo)(()=>{if(null!=i)return j6(j6({},s),{},{type:i})},[s,i]);return(0,z.useLayoutEffect)(()=>{null!=l&&(null===a.current?t(hX(l)):a.current!==l&&t(hZ({prev:a.current,next:l})),a.current=l)},[l,t]),(0,z.useLayoutEffect)(()=>()=>{a.current&&(t(hJ(a.current)),a.current=null)},[t]),null}var j7=e=>{var{xAxisId:t,className:a}=e,r=sB(ij),n=iw(),s="xAxis",i=sB(e=>xb(e,s,t,n)),l=sB(e=>xn(e,t)),o=sB(e=>xl(e,t)),c=sB(e=>uH(e,t));if(null==l||null==o||null==c)return null;var{dangerouslySetInnerHTML:d,ticks:u,scale:m}=e,x=j8(e,j2),{id:h,scale:p}=c,f=j8(c,j5);return z.createElement(jY,j4({},x,f,{x:o.x,y:o.y,width:l.width,height:l.height,className:(0,eh.clsx)("recharts-".concat(s," ").concat(s),a),viewBox:r,ticks:i,axisType:s}))},ke={allowDataOverflow:uK.allowDataOverflow,allowDecimals:uK.allowDecimals,allowDuplicatedCategory:uK.allowDuplicatedCategory,angle:uK.angle,axisLine:jU.axisLine,height:uK.height,hide:!1,includeHidden:uK.includeHidden,interval:uK.interval,label:!1,minTickGap:uK.minTickGap,mirror:uK.mirror,orientation:uK.orientation,padding:uK.padding,reversed:uK.reversed,scale:uK.scale,tick:uK.tick,tickCount:uK.tickCount,tickLine:jU.tickLine,tickSize:jU.tickSize,type:uK.type,xAxisId:0},kt=z.memo(e=>{var t=fJ(e,ke);return z.createElement(z.Fragment,null,z.createElement(j9,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),z.createElement(j7,t))},j0);kt.displayName="XAxis";var ka=["type"],kr=["dangerouslySetInnerHTML","ticks","scale"],kn=["id","scale"];function ks(){return(ks=Object.assign.bind()).apply(null,arguments)}function ki(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function kl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ki(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ko(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function kc(e){var t=s$(),a=(0,z.useRef)(null),r=iY(),{type:n}=e,s=ko(e,ka),i=uh(r,"yAxis",n),l=(0,z.useMemo)(()=>{if(null!=i)return kl(kl({},s),{},{type:i})},[i,s]);return(0,z.useLayoutEffect)(()=>{null!=l&&(null===a.current?t(hQ(l)):a.current!==l&&t(h0({prev:a.current,next:l})),a.current=l)},[l,t]),(0,z.useLayoutEffect)(()=>()=>{a.current&&(t(h1(a.current)),a.current=null)},[t]),null}function kd(e){var{yAxisId:t,className:a,width:r,label:n}=e,s=(0,z.useRef)(null),i=(0,z.useRef)(null),l=sB(ij),o=iw(),c=s$(),d="yAxis",u=sB(e=>xc(e,t)),m=sB(e=>xo(e,t)),x=sB(e=>xb(e,d,t,o)),h=sB(e=>uY(e,t));if((0,z.useLayoutEffect)(()=>{if(!("auto"!==r||!u||bH(n)||(0,z.isValidElement)(n))&&null!=h){var e=s.current;if(e){var a=e.getCalculatedWidth();Math.round(u.width)!==Math.round(a)&&c(h3({id:t,width:a}))}}},[x,u,c,n,t,r,h]),null==u||null==m||null==h)return null;var{dangerouslySetInnerHTML:p,ticks:f,scale:b}=e,g=ko(e,kr),{id:y,scale:v}=h,j=ko(h,kn);return z.createElement(jY,ks({},g,j,{ref:s,labelRef:i,x:m.x,y:m.y,tickTextProps:"auto"===r?{width:void 0}:{width:r},width:u.width,height:u.height,className:(0,eh.clsx)("recharts-".concat(d," ").concat(d),a),viewBox:l,ticks:x,axisType:d}))}var ku={allowDataOverflow:uG.allowDataOverflow,allowDecimals:uG.allowDecimals,allowDuplicatedCategory:uG.allowDuplicatedCategory,angle:uG.angle,axisLine:jU.axisLine,hide:!1,includeHidden:uG.includeHidden,interval:uG.interval,label:!1,minTickGap:uG.minTickGap,mirror:uG.mirror,orientation:uG.orientation,padding:uG.padding,reversed:uG.reversed,scale:uG.scale,tick:uG.tick,tickCount:uG.tickCount,tickLine:jU.tickLine,tickSize:jU.tickSize,type:uG.type,width:uG.width,yAxisId:0},km=z.memo(e=>{var t=fJ(e,ku);return z.createElement(z.Fragment,null,z.createElement(kc,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),z.createElement(kd,t))},j0);km.displayName="YAxis";var kx=["x1","y1","x2","y2","key"],kh=["offset"],kp=["xAxisId","yAxisId"],kf=["xAxisId","yAxisId"];function kb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function kg(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kb(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kb(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ky(){return(ky=Object.assign.bind()).apply(null,arguments)}function kv(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var kj=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:a,x:r,y:n,width:s,height:i,ry:l}=e;return z.createElement("rect",{x:r,y:n,ry:l,width:s,height:i,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function kk(e){var{option:t,lineItemProps:a}=e;if(z.isValidElement(t))r=z.cloneElement(t,a);else if("function"==typeof t)r=t(a);else{var r,n,{x1:s,y1:i,x2:l,y2:o,key:c}=a,d=null!=(n=fu(kv(a,kx)))?n:{},{offset:u}=d,m=kv(d,kh);r=z.createElement("line",ky({},m,{x1:s,y1:i,x2:l,y2:o,fill:"none",key:c}))}return r}function kw(e){var{x:t,width:a,horizontal:r=!0,horizontalPoints:n}=e;if(!r||!n||!n.length)return null;var{xAxisId:s,yAxisId:i}=e,l=kv(e,kp),o=n.map((e,n)=>{var s=kg(kg({},l),{},{x1:t,y1:e,x2:t+a,y2:e,key:"line-".concat(n),index:n});return z.createElement(kk,{key:"line-".concat(n),option:r,lineItemProps:s})});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kN(e){var{y:t,height:a,vertical:r=!0,verticalPoints:n}=e;if(!r||!n||!n.length)return null;var{xAxisId:s,yAxisId:i}=e,l=kv(e,kf),o=n.map((e,n)=>{var s=kg(kg({},l),{},{x1:e,y1:t,x2:e,y2:t+a,key:"line-".concat(n),index:n});return z.createElement(kk,{option:r,lineItemProps:s,key:"line-".concat(n)})});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function kC(e){var{horizontalFill:t,fillOpacity:a,x:r,y:n,width:s,height:i,horizontalPoints:l,horizontal:o=!0}=e;if(!o||!t||!t.length||null==l)return null;var c=l.map(e=>Math.round(e+n-n)).sort((e,t)=>e-t);n!==c[0]&&c.unshift(0);var d=c.map((e,l)=>{var o=c[l+1],d=null==o?n+i-e:o-e;if(d<=0)return null;var u=l%t.length;return z.createElement("rect",{key:"react-".concat(l),y:e,x:r,height:d,width:s,stroke:"none",fill:t[u],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function kS(e){var{vertical:t=!0,verticalFill:a,fillOpacity:r,x:n,y:s,width:i,height:l,verticalPoints:o}=e;if(!t||!a||!a.length)return null;var c=o.map(e=>Math.round(e+n-n)).sort((e,t)=>e-t);n!==c[0]&&c.unshift(0);var d=c.map((e,t)=>{var o=c[t+1],d=null==o?n+i-e:o-e;if(d<=0)return null;var u=t%a.length;return z.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:d,height:l,stroke:"none",fill:a[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var kP=(e,t)=>{var{xAxis:a,width:r,height:n,offset:s}=e;return s6(jF(kg(kg(kg({},jU),a),{},{ticks:s8(a,!0),viewBox:{x:0,y:0,width:r,height:n}})),s.left,s.left+s.width,t)},kM=(e,t)=>{var{yAxis:a,width:r,height:n,offset:s}=e;return s6(jF(kg(kg(kg({},jU),a),{},{ticks:s8(a,!0),viewBox:{x:0,y:0,width:r,height:n}})),s.top,s.top+s.height,t)},kO={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ud.grid};function kE(e){var t=sB(io),a=sB(ic),r=iV(),n=kg(kg({},fJ(e,kO)),{},{x:no(e.x)?e.x:r.left,y:no(e.y)?e.y:r.top,width:no(e.width)?e.width:r.width,height:no(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:i,x:l,y:o,width:c,height:d,syncWithTicks:u,horizontalValues:m,verticalValues:x}=n,h=iw(),p=sB(e=>xp(e,"xAxis",s,h)),f=sB(e=>xp(e,"yAxis",i,h));if(!s1(c)||!s1(d)||!no(l)||!no(o))return null;var b=n.verticalCoordinatesGenerator||kP,g=n.horizontalCoordinatesGenerator||kM,{horizontalPoints:y,verticalPoints:v}=n;if((!y||!y.length)&&"function"==typeof g){var j=m&&m.length,k=g({yAxis:f?kg(kg({},f),{},{ticks:j?m:f.ticks}):void 0,width:null!=t?t:c,height:null!=a?a:d,offset:r},!!j||u);iP(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(y=k)}if((!v||!v.length)&&"function"==typeof b){var w=x&&x.length,N=b({xAxis:p?kg(kg({},p),{},{ticks:w?x:p.ticks}):void 0,width:null!=t?t:c,height:null!=a?a:d,offset:r},!!w||u);iP(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(v=N)}return z.createElement(bA,{zIndex:n.zIndex},z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(kj,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),z.createElement(kC,ky({},n,{horizontalPoints:y})),z.createElement(kS,ky({},n,{verticalPoints:v})),z.createElement(kw,ky({},n,{offset:r,horizontalPoints:y,xAxis:p,yAxis:f})),z.createElement(kN,ky({},n,{offset:r,verticalPoints:v,xAxis:p,yAxis:f}))))}function kA(){return(kA=Object.assign.bind()).apply(null,arguments)}function kT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function kI(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kT(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function kR(e){return Array.isArray(e)&&nc(e[0])&&nc(e[1])?e.join(" ~ "):e}kE.displayName="CartesianGrid";var kD={margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},kL={display:"block",paddingTop:4,paddingBottom:4,color:"#000"},k_={},kF=e=>{var{separator:t=" : ",contentStyle:a,itemStyle:r,labelStyle:n=k_,payload:s,formatter:i,itemSorter:l,wrapperClassName:o,labelClassName:c,label:d,labelFormatter:u,accessibilityLayer:m=!1}=e,x=kI(kI({},kD),a),h=kI({margin:0},n),p=null!=d,f=p?d:"",b=(0,eh.clsx)("recharts-default-tooltip",o),g=(0,eh.clsx)("recharts-tooltip-label",c);return p&&u&&null!=s&&(f=u(d,s)),z.createElement("div",kA({className:b,style:x},m?{role:"status","aria-live":"assertive"}:{}),z.createElement("p",{className:g,style:h},z.isValidElement(f)?f:"".concat(f)),(()=>{if(s&&s.length){var e=(l?(0,sU.default)(s,l):s).map((e,a)=>{if("none"===e.type)return null;var n=e.formatter||i||kR,{value:l,name:o}=e,c=l,d=o,u=n(l,o,e,a,s);if(Array.isArray(u))[c,d]=u;else{if(null==u)return null;c=u}var m=kI(kI({},kL),{},{color:e.color||kL.color},r);return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(a),style:m},nc(d)?z.createElement("span",{className:"recharts-tooltip-item-name"},d):null,nc(d)?z.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,z.createElement("span",{className:"recharts-tooltip-item-value"},c),z.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},k$=z,kz="recharts-tooltip-wrapper",kq={visibility:"hidden"};function kW(e){var{allowEscapeViewBox:t,coordinate:a,key:r,offset:n,position:s,reverseDirection:i,tooltipDimension:l,viewBox:o,viewBoxDimension:c}=e;if(s&&no(s[r]))return s[r];var d=a[r]-l-(n>0?n:0),u=a[r]+n;if(t[r])return i[r]?d:u;var m=o[r];return null==m?0:i[r]?d<m?Math.max(u,m):Math.max(d,m):null==c?0:u+l>m+c?Math.max(d,m):Math.max(u,m)}function kB(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function kU(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kB(Object(a),!0).forEach(function(t){kK(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kB(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function kK(e,t,a){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class kH extends k$.PureComponent{constructor(){super(...arguments),kK(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),kK(this,"handleKeyDown",e=>{if("Escape"===e.key){var t,a,r,n;this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!=(t=null==(a=this.props.coordinate)?void 0:a.x)?t:0,y:null!=(r=null==(n=this.props.coordinate)?void 0:n.y)?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null==(e=this.props.coordinate)?void 0:e.x)!==this.state.dismissedAtCoordinate.x||(null==(t=this.props.coordinate)?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:a,animationEasing:r,children:n,coordinate:s,hasPayload:i,isAnimationActive:l,offset:o,position:c,reverseDirection:d,useTranslate3d:u,viewBox:m,wrapperStyle:x,lastBoundingBox:h,innerRef:p,hasPortalFromProps:f}=this.props,{cssClasses:b,cssProperties:g}=function(e){var t,a,r,{allowEscapeViewBox:n,coordinate:s,offsetTop:i,offsetLeft:l,position:o,reverseDirection:c,tooltipBox:d,useTranslate3d:u,viewBox:m}=e;return{cssProperties:t=d.height>0&&d.width>0&&s?function(e){var{translateX:t,translateY:a,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}({translateX:a=kW({allowEscapeViewBox:n,coordinate:s,key:"x",offset:l,position:o,reverseDirection:c,tooltipDimension:d.width,viewBox:m,viewBoxDimension:m.width}),translateY:r=kW({allowEscapeViewBox:n,coordinate:s,key:"y",offset:i,position:o,reverseDirection:c,tooltipDimension:d.height,viewBox:m,viewBoxDimension:m.height}),useTranslate3d:u}):kq,cssClasses:function(e){var{coordinate:t,translateX:a,translateY:r}=e;return(0,eh.clsx)(kz,{["".concat(kz,"-right")]:no(a)&&t&&no(t.x)&&a>=t.x,["".concat(kz,"-left")]:no(a)&&t&&no(t.x)&&a<t.x,["".concat(kz,"-bottom")]:no(r)&&t&&no(t.y)&&r>=t.y,["".concat(kz,"-top")]:no(r)&&t&&no(t.y)&&r<t.y})}({translateX:a,translateY:r,coordinate:s})}}({allowEscapeViewBox:t,coordinate:s,offsetLeft:"number"==typeof o?o:o.x,offsetTop:"number"==typeof o?o:o.y,position:c,reverseDirection:d,tooltipBox:{height:h.height,width:h.width},useTranslate3d:u,viewBox:m}),y=f?{}:kU(kU({transition:l&&e?"transform ".concat(a,"ms ").concat(r):void 0},g),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),v=kU(kU({},y),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},x);return k$.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:v,ref:p},n)}}var kV=e.i(30721);function kG(e,t,a){return!0===t?(0,kV.default)(e,a):"function"==typeof t?(0,kV.default)(e,t):e}function kY(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,a]=(0,z.useState)({height:0,left:0,top:0,width:0}),r=(0,z.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),n={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(n.height-t.height)>1||Math.abs(n.left-t.left)>1||Math.abs(n.top-t.top)>1||Math.abs(n.width-t.width)>1)&&a({height:n.height,left:n.left,top:n.top,width:n.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var kX=["x","y","top","left","width","height","className"];function kZ(){return(kZ=Object.assign.bind()).apply(null,arguments)}function kJ(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var kQ=e=>{var{x:t=0,y:a=0,top:r=0,left:n=0,width:s=0,height:i=0,className:l}=e,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kJ(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kJ(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({x:t,y:a,top:r,left:n,width:s,height:i},function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,kX));return no(t)&&no(a)&&no(s)&&no(i)&&no(r)&&no(n)?z.createElement("path",kZ({},fx(o),{className:(0,eh.clsx)("recharts-cross",l),d:"M".concat(t,",").concat(r,"v").concat(i,"M").concat(n,",").concat(a,"h").concat(s)})):null};function k0(e){var{cx:t,cy:a,radius:r,startAngle:n,endAngle:s}=e;return{points:[uo(t,a,r,n),uo(t,a,r,s)],cx:t,cy:a,radius:r,startAngle:n,endAngle:s}}function k1(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function k2(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k1(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k1(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function k5(){return(k5=Object.assign.bind()).apply(null,arguments)}function k4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function k3(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k4(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k4(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function k6(e){var{cursor:t,cursorComp:a,cursorProps:r}=e;return(0,z.isValidElement)(t)?(0,z.cloneElement)(t,r):(0,z.createElement)(a,r)}function k8(e){var t,a,r,n,s,{coordinate:i,payload:l,index:o,offset:c,tooltipAxisBandSize:d,layout:u,cursor:m,tooltipEventType:x,chartName:h}=e;if(!m||!i||"ScatterChart"!==h&&"axis"!==x)return null;if("ScatterChart"===h)r=i,n=kQ,s=ud.cursorLine;else if("BarChart"===h)t=d/2,r={stroke:"none",fill:"#ccc",x:"horizontal"===u?i.x-t:c.left+.5,y:"horizontal"===u?c.top+.5:i.y-t,width:"horizontal"===u?d:c.width-1,height:"horizontal"===u?c.height-1:d},n=gW,s=ud.cursorRectangle;else if("radial"===u&&gl(i)){var{cx:p,cy:f,radius:b,startAngle:g,endAngle:y}=k0(i);r={cx:p,cy:f,startAngle:g,endAngle:y,innerRadius:b,outerRadius:b},n=g1,s=ud.cursorLine}else r={points:function(e,t,a){if("horizontal"===e)return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if("vertical"===e)return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(gl(t)){if("centric"===e){var{cx:r,cy:n,innerRadius:s,outerRadius:i,angle:l}=t,o=uo(r,n,s,l),c=uo(r,n,i,l);return[{x:o.x,y:o.y},{x:c.x,y:c.y}]}return k0(t)}}(u,i,c)},n=yX,s=ud.cursorLine;var v="object"==typeof m&&"className"in m?m.className:void 0,j=k3(k3(k3(k3({stroke:"#ccc",pointerEvents:"none"},c),r),fm(m)),{},{payload:l,payloadIndex:o,className:(0,eh.clsx)("recharts-tooltip-cursor",v)});return z.createElement(bA,{zIndex:null!=(a=e.zIndex)?a:s},z.createElement(k6,{cursor:m,cursorComp:n,cursorProps:j}))}function k9(e){var t,a,r,n=(t=sB(md),a=sB(hc),r=sB(hi),t&&r?is(k2(k2({},t),{},{scale:r}),a):is(void 0,a)),s=iV(),i=sB(iG),l=sB(ue);return null==n||null==s||null==i||null==l?null:z.createElement(k8,k5({},e,{offset:s,layout:i,tooltipAxisBandSize:n,chartName:l}))}function k7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k7(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k7(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function wt(e){return e.dataKey}var wa=[],wr={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wn(e){var t,a,r,n,s,i,l,o,c,d,u=fJ(e,wr),{active:m,allowEscapeViewBox:x,animationDuration:h,animationEasing:p,content:f,filterNull:b,isAnimationActive:g,offset:y,payloadUniqBy:v,position:j,reverseDirection:k,useTranslate3d:w,wrapperStyle:N,cursor:C,shared:S,trigger:P,defaultIndex:M,portal:O,axisId:E}=u,A=s$(),T="number"==typeof M?String(M):M;(0,z.useEffect)(()=>{A(sp({shared:S,trigger:P,axisId:E,active:m,defaultIndex:T}))},[A,S,P,E,m,T]);var I=iK(),R=fs(),D=sB(e=>xP(e,S)),{activeIndex:L,isActive:_}=null!=(c=sB(e=>hF(e,D,P,T)))?c:{},F=sB(e=>h_(e,D,P,T)),$=sB(e=>hL(e,D,P,T)),q=sB(e=>hD(e,D,P,T)),W=(0,z.useContext)(fR),B=null!=(d=null!=m?m:_)&&d,[U,K]=kY([F,B]),H="axis"===D?$:void 0;t=sB(e=>((e,t,a)=>{if(null!=t){var r=xL(e);return"axis"===t?"hover"===a?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===a?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(e,D,P)),a=sB(ur),r=sB(ut),n=sB(ua),i=null==(s=sB(fE))?void 0:s.active,l=iK(),(0,z.useEffect)(()=>{if(!i&&null!=r&&null!=a){var e=sk({active:B,coordinate:q,dataKey:t,index:L,label:"number"==typeof H?String(H):H,sourceViewBox:l,graphicalItemId:void 0});fP.emit(fM,r,e,a)}},[i,q,t,L,H,a,r,n,B,l]);var V=null!=O?O:W;if(null==V||null==I||null==D)return null;var G=null!=F?F:wa;B||(G=wa),b&&G.length&&(G=kG(G.filter(e=>null!=e.value&&(!0!==e.hide||u.includeHidden)),v,wt));var Y=G.length>0,X=z.createElement(kH,{allowEscapeViewBox:x,animationDuration:h,animationEasing:p,isAnimationActive:g,active:B,coordinate:q,hasPayload:Y,offset:y,position:j,reverseDirection:k,useTranslate3d:w,viewBox:I,wrapperStyle:N,lastBoundingBox:U,innerRef:K,hasPortalFromProps:!!O},(o=we(we({},u),{},{payload:G,label:H,active:B,activeIndex:L,coordinate:q,accessibilityLayer:R}),z.isValidElement(f)?z.cloneElement(f,o):"function"==typeof f?z.createElement(f,o):z.createElement(kF,o)));return z.createElement(z.Fragment,null,(0,bE.createPortal)(X,V),B&&z.createElement(k9,{cursor:C,tooltipEventType:D,coordinate:q,payload:G,index:L}))}function ws(){return(ws=Object.assign.bind()).apply(null,arguments)}function wi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var wl={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function wo(e){var t,{data:a,iconType:r,inactiveColor:n}=e,s=32/6,i=32/3,l=a.inactive?n:a.color,o=null!=r?r:a.type;if("none"===o)return null;if("plainline"===o)return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:null==(t=a.payload)?void 0:t.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===o)return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(16,"h").concat(i,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(16,"\n            H").concat(32,"M").concat(2*i,",").concat(16,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(16),className:"recharts-legend-icon"});if("rect"===o)return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(z.isValidElement(a.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wi(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a);return delete c.legendIcon,z.cloneElement(a.legendIcon,c)}return z.createElement(yy,{fill:l,cx:16,cy:16,size:32,sizeType:"diameter",type:o})}function wc(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:s,iconType:i}=e,l={x:0,y:0,width:32,height:32},o={display:"horizontal"===r?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,r)=>{var d=t.formatter||n,u=(0,eh.clsx)({"recharts-legend-item":!0,["legend-item-".concat(r)]:!0,inactive:t.inactive});if("none"===t.type)return null;var m=t.inactive?s:t.color,x=d?d(t.value,t,r):t.value;return z.createElement("li",ws({className:u,style:o,key:"legend-item-".concat(r)},gc(e,t,r)),z.createElement(ff,{width:a,height:a,viewBox:l,style:c,"aria-label":"".concat(x," legend icon")},z.createElement(wo,{data:t,iconType:i,inactiveColor:s})),z.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},x))})}var wd=e=>{var t=fJ(e,wl),{payload:a,layout:r,align:n}=t;return a&&a.length?z.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===r?n:"left"}},z.createElement(wc,ws({},t,{payload:a}))):null},wu=["contextPayload"];function wm(){return(wm=Object.assign.bind()).apply(null,arguments)}function wx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function wh(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wx(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wx(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function wp(e){return e.value}function wf(e){var{contextPayload:t}=e,a=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,wu),r=kG(t,e.payloadUniqBy,wp),n=wh(wh({},a),{},{payload:r});return z.isValidElement(e.content)?z.cloneElement(e.content,n):"function"==typeof e.content?z.createElement(e.content,n):z.createElement(wd,n)}function wb(e){var t=s$();return(0,z.useEffect)(()=>{t(pg(e))},[t,e]),null}function wg(e){var t=s$();return(0,z.useEffect)(()=>(t(pb(e)),()=>{t(pb({width:0,height:0}))}),[t,e]),null}var wy={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function wv(e){var t,a=fJ(e,wy),r=sB(sH),n=(0,z.useContext)(fD),s=sB(e=>e.layout.margin),{width:i,height:l,wrapperStyle:o,portal:c}=a,[d,u]=kY([r]),m=sB(io),x=sB(ic);if(null==m||null==x)return null;var h=m-((null==s?void 0:s.left)||0)-((null==s?void 0:s.right)||0),p=(t=a.layout,"vertical"===t&&null!=l?{height:l}:"horizontal"===t?{width:i||h}:null),f=c?o:wh(wh({position:"absolute",width:(null==p?void 0:p.width)||i||"auto",height:(null==p?void 0:p.height)||l||"auto"},function(e,t,a,r,n,s){var i,l,{layout:o,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===c&&"vertical"===o?{left:((r||0)-s.width)/2}:"right"===c?{right:a&&a.right||0}:{left:a&&a.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(l="middle"===d?{top:((n||0)-s.height)/2}:"bottom"===d?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),wh(wh({},i),l)}(o,a,s,m,x,d)),o),b=null!=c?c:n;if(null==b||null==r)return null;var g=z.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:u},z.createElement(wb,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),!c&&z.createElement(wg,{width:d.width,height:d.height}),z.createElement(wf,wm({},a,p,{margin:s,chartWidth:m,chartHeight:x,contextPayload:r})));return(0,bE.createPortal)(g,b)}function wj(){let t,a,r,n,s,i,l,o,c,d,{selectedCountry:u,inputs:m,actions:x}=(0,$.useSimulationStore)(),{inputs:h}=(0,ew.useCapexStore)(),[p,f]=(0,z.useState)([]),[b,g]=(0,z.useState)(!1),[y,v]=(0,z.useState)("assets"),[j,k]=(0,z.useState)(!1),w=(0,z.useMemo)(()=>eC(p),[p]),N=(0,z.useMemo)(()=>u&&0!==p.length?e_(p,w,4===m.tierLevel?4:3,u,m.maintenanceModel,m.hybridRatio??.5):null,[p,w,m.tierLevel,u,m.maintenanceModel,m.hybridRatio]),C=(0,z.useMemo)(()=>u&&0!==p.length?eF(p,4===m.tierLevel?4:3,u):null,[p,m.tierLevel,u]),S=(0,z.useMemo)(()=>u&&0!==p.length?eW(p,4===m.tierLevel?4:3,u):null,[p,m.tierLevel,u]),P="liquid"===m.coolingType||"rdhx"===m.coolingType?"pumped":"air";if((0,z.useEffect)(()=>{if(!b){let e=1.5*m.itLoad;f(eS(m.itLoad,4===m.tierLevel?4:3,P,e,m.coolingTopology,m.powerRedundancy))}},[m.itLoad,m.tierLevel,m.coolingType,b,m.coolingTopology,m.powerRedundancy]),!u)return null;let M=m.aqiOverride??u.environment.baselineAQI,O=M>100,E=eN.ASSETS.filter(e=>{let t=p.find(t=>t.assetId===e.id);return t&&t.count>0}),A=Array.from({length:52},(e,t)=>t+1),T=w.reduce((e,t)=>e+t.durationHours,0),I=m.maintenanceStrategy||"planned",R=N?.strategies.find(e=>e.id===I)?.totalAnnualCost||0,D=N?.fiveYearSavings||0,L=[{id:"assets",label:"Assets",icon:(0,F.jsx)(eY,{className:"w-4 h-4"})},{id:"schedule",label:"Schedule",icon:(0,F.jsx)(Q,{className:"w-4 h-4"})},{id:"strategy",label:"Strategy",icon:(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4"})},{id:"sla",label:"SLA",icon:(0,F.jsx)(eX,{className:"w-4 h-4"})},{id:"spares",label:"Spares",icon:(0,F.jsx)(eZ,{className:"w-4 h-4"})}];return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl backdrop-blur-sm shadow-sm dark:shadow-none gap-4",children:[(0,F.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(eU.Wrench,{className:"w-5 h-5 text-cyan-500 dark:text-cyan-400"}),"Maintenance & Asset Lifecycle"]}),(0,F.jsxs)("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:["SFG20 regimes & strategy analysis for ",(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:u.name})]})]}),(0,F.jsx)(eI,{isGenerating:j,onExport:async()=>{if(u&&N&&C&&S&&w){k(!0);try{let{generateMaintenancePDF:t}=await e.A(28094),{generateMaintenanceNarrative:a}=await e.A(41449),r=a(N,C,S);await t(u,N,C,S,w,void 0,r)}finally{k(!1)}}},className:"w-fit"})]}),(0,F.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,F.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-950 p-1 rounded-lg border border-slate-200 dark:border-slate-800",children:["reactive","planned","predictive"].map(e=>(0,F.jsx)("button",{onClick:()=>x.setInputs({maintenanceStrategy:e}),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all capitalize",m.maintenanceStrategy===e?"bg-emerald-500 text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white dark:hover:bg-slate-800"),children:e},e))}),(0,F.jsx)("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700 mx-2"}),(0,F.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-950 p-1 rounded-lg border border-slate-200 dark:border-slate-800",children:["in-house","hybrid","vendor"].map(e=>(0,F.jsx)("button",{onClick:()=>x.setInputs({maintenanceModel:e}),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all capitalize",m.maintenanceModel===e?"bg-indigo-600 text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white dark:hover:bg-slate-800"),children:e},e))}),"hybrid"===m.maintenanceModel&&(0,F.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-950 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-800",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["In-House: ",(0,F.jsx)(ei,{content:"Percentage of maintenance work performed by in-house staff vs outsourced contractors. Higher in-house ratio reduces response time but increases fixed payroll cost."})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("input",{type:"range",min:"0",max:"100",step:"10",className:"w-20 accent-indigo-500",value:100*(m.hybridRatio||.3),onChange:e=>x.setInputs({hybridRatio:Number(e.target.value)/100})}),(0,F.jsxs)("span",{className:"text-xs font-mono font-bold text-indigo-600 dark:text-indigo-400",children:[(100*(m.hybridRatio||.3)).toFixed(0),"%"]})]})]}),(0,F.jsx)("div",{className:"hidden md:block h-8 w-px bg-slate-200 dark:bg-slate-700 mx-2"}),("assets"===y||"schedule"===y)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("button",{onClick:()=>g(!b),className:(0,eh.default)("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all border",b?"bg-indigo-50 dark:bg-indigo-600/20 border-indigo-200 dark:border-indigo-500 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:[b?(0,F.jsx)(eG.Save,{className:"w-4 h-4"}):(0,F.jsx)(eV,{className:"w-4 h-4"}),b?"Save":"Edit"]}),(0,F.jsx)("div",{className:"hidden md:block h-8 w-px bg-slate-200 dark:bg-slate-700 mx-2"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-4 bg-slate-100 dark:bg-slate-950 px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-800",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[(0,F.jsx)(eK,{className:(0,eh.default)("w-4 h-4",O?"text-amber-500":"text-emerald-500")}),"AQI: ",(0,F.jsx)(ei,{content:"Air Quality Index (0-300) at the facility location. Higher AQI accelerates filter degradation, increases HVAC maintenance frequency, and reduces equipment lifespan."})]}),(0,F.jsx)("input",{type:"range",min:"0",max:"500",value:M,className:"w-24 accent-cyan-500",onChange:e=>x.setAqiOverride(Number(e.target.value))}),(0,F.jsx)("span",{className:"font-mono font-bold text-slate-900 dark:text-white w-8 text-right",children:M})]})]})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Annual Maint Budget",value:eo(R),sub:{reactive:"Run-to-Failure",planned:"Planned Preventive",predictive:"Predictive (CBM)"}[I]||"Planned Preventive",icon:J,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-500/10",tip:"Total annual maintenance budget based on selected strategy (labor + parts + downtime risk)"},{label:"Maintenance Events",value:`${w.length}`,sub:`${T.toFixed(0)} total hours`,icon:eU.Wrench,color:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-500/10",tip:"Number of scheduled maintenance events per year based on SFG20 regimes"},{label:"Active Assets",value:`${p.reduce((e,t)=>e+t.count,0)}`,sub:`${E.length} asset types`,icon:eJ.Zap,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-500/10",tip:"Total physical assets requiring maintenance, auto-generated from CAPEX config"},{label:"5-Year Savings",value:eo(D),sub:"Optimal vs Worst",icon:ee.TrendingUp,color:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-500/10",tip:"Projected savings over 5 years comparing optimal vs worst maintenance strategy"}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-4 hover:border-slate-300 dark:hover:border-slate-700 transition-colors shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)("div",{className:(0,eh.default)("p-1.5 rounded-lg",e.bg),children:(0,F.jsx)(e.icon,{className:(0,eh.default)("w-4 h-4",e.color)})}),(0,F.jsxs)("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider flex items-center gap-1",children:[e.label," ",(0,F.jsx)(ei,{content:e.tip})]})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-slate-900 dark:text-white truncate",title:e.value.toString(),children:e.value}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:e.sub})]},t))}),(0,F.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-950 p-1 rounded-xl border border-slate-200 dark:border-slate-800 gap-1 overflow-x-auto",children:L.map(e=>(0,F.jsxs)("button",{onClick:()=>v(e.id),className:(0,eh.default)("flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all flex-1 justify-center whitespace-nowrap",y===e.id?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm border border-slate-200 dark:border-slate-700":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-900 border border-transparent"),children:[e.icon,e.label]},e.id))}),"assets"===y&&(0,F.jsx)(wk,{assets:E,assetCounts:p,isPencilMode:b,handleCountChange:(e,t)=>{f(a=>a.map(a=>a.assetId===e?{...a,count:t,isManual:!0}:a))},selectedCountry:u,currentAQI:M}),"schedule"===y&&(0,F.jsx)(ww,{assetCounts:p,schedule:w,weeks:A}),"strategy"===y&&N&&(0,F.jsx)(wN,{data:N,fmt:eo,activeStrat:m.maintenanceStrategy||"planned",onSelect:e=>x.setInputs({maintenanceStrategy:e})}),"sla"===y&&C&&(0,F.jsx)(wC,{data:C,fmt:eo}),"spares"===y&&S&&(0,F.jsx)(wS,{data:S,fmt:eo}),"schedule"===y&&w.length>0&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(eQ,{className:"w-4 h-4 text-orange-500 dark:text-orange-400"}),"Monthly Maintenance Density Heatmap ",(0,F.jsx)(ei,{content:"Visual heatmap showing maintenance task concentration across months. Darker cells indicate higher maintenance workload  helps identify peak periods for resource planning."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Event intensity by month  darker = more maintenance events"})]}),(0,F.jsx)("div",{className:"p-6",children:(t=Array(12).fill(0),w.forEach(e=>{let a=Math.min(11,Math.floor((e.weekNumber-1)/4.33));t[a]++}),a=Math.max(...t,1),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"grid grid-cols-12 gap-2 mb-4",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,r)=>{let n=t[r],s=n/a;return(0,F.jsxs)("div",{className:(0,eh.default)("flex flex-col items-center justify-center rounded-lg p-3 border transition-all hover:scale-105",0===s?"bg-slate-100 dark:bg-slate-800":s<.25?"bg-emerald-100 dark:bg-emerald-900/30":s<.5?"bg-amber-100 dark:bg-amber-900/30":s<.75?"bg-orange-200 dark:bg-orange-900/40":"bg-red-200 dark:bg-red-900/40",s>.5?"border-orange-300 dark:border-orange-800/50":"border-slate-200 dark:border-slate-700/50"),children:[(0,F.jsx)("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 uppercase",children:e}),(0,F.jsx)("span",{className:(0,eh.default)("text-lg font-bold font-mono mt-1",0===s?"text-slate-400 dark:text-slate-600":s<.5?"text-slate-700 dark:text-slate-300":"text-slate-900 dark:text-white"),children:n}),(0,F.jsx)("span",{className:"text-[9px] text-slate-400 dark:text-slate-500",children:"events"})]},e)})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-2 text-[10px] text-slate-500",children:[(0,F.jsx)("span",{children:"Low"}),(0,F.jsxs)("div",{className:"flex gap-0.5",children:[(0,F.jsx)("div",{className:"w-4 h-2 rounded-sm bg-slate-100 dark:bg-slate-800"}),(0,F.jsx)("div",{className:"w-4 h-2 rounded-sm bg-emerald-100 dark:bg-emerald-900/30"}),(0,F.jsx)("div",{className:"w-4 h-2 rounded-sm bg-amber-100 dark:bg-amber-900/30"}),(0,F.jsx)("div",{className:"w-4 h-2 rounded-sm bg-orange-200 dark:bg-orange-900/40"}),(0,F.jsx)("div",{className:"w-4 h-2 rounded-sm bg-red-200 dark:bg-red-900/40"})]}),(0,F.jsx)("span",{children:"High"}),(0,F.jsxs)("span",{className:"ml-4",children:["Total: ",w.length," events/year"]})]})]}))})]}),"spares"===y&&S&&S.items.length>0&&(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-violet-500 dark:text-violet-400"}),"Spare Parts ABC Pareto Analysis ",(0,F.jsx)(ei,{content:"ABC classification of spare parts by value: A-items (top 20% by cost, ~80% of value), B-items (next 30%), C-items (remaining 50%). Drives inventory investment strategy."})]})}),(0,F.jsx)(t3,{className:"p-4",children:(n=(r=[...S.items].sort((e,t)=>t.unitCost*t.quantity-e.unitCost*e.quantity)).reduce((e,t)=>e+t.unitCost*t.quantity,0),s=0,i=r.slice(0,15).map((e,t)=>{let a=e.unitCost*e.quantity;return s+=a,{name:e.partName.length>18?e.partName.slice(0,16)+"..":e.partName,cost:a,cumulativePct:n>0?s/n*100:0}}),(0,F.jsxs)("div",{children:[(0,F.jsx)(iB,{width:"100%",height:320,children:(0,F.jsxs)(f5,{data:i,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"name",stroke:"#64748b",fontSize:10,angle:-35,textAnchor:"end",height:70}),(0,F.jsx)(km,{yAxisId:"left",stroke:"#8b5cf6",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(km,{yAxisId:"right",orientation:"right",stroke:"#f59e0b",fontSize:11,domain:[0,100],tickFormatter:e=>`${e}%`}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>["cost"===t?eo(e):`${e.toFixed(1)}%`,"cost"===t?"Item Cost":"Cumulative %"]}),(0,F.jsx)(wv,{formatter:e=>"cost"===e?"Item Cost":"Cumulative %"}),(0,F.jsx)(v1,{yAxisId:"left",dataKey:"cost",fill:"#8b5cf6",radius:[4,4,0,0],barSize:24,name:"cost"}),(0,F.jsx)(jT,{yAxisId:"right",type:"monotone",dataKey:"cumulativePct",stroke:"#f59e0b",strokeWidth:2,dot:{r:3,fill:"#f59e0b"},name:"cumulativePct"})]})}),(0,F.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-3",children:(l=0,o=0,c=0,d=0,r.forEach(e=>{let t=e.unitCost*e.quantity;(l+=n>0?t/n*100:0)<=80?o++:l<=95?c++:d++}),[{label:"Class A (0-80%)",count:o,color:"text-red-500 dark:text-red-400",desc:"High-value, critical"},{label:"Class B (80-95%)",count:c,color:"text-amber-500 dark:text-amber-400",desc:"Medium-value"},{label:"Class C (95-100%)",count:d,color:"text-emerald-500 dark:text-emerald-400",desc:"Low-value, bulk"}].map((e,t)=>(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:e.label}),(0,F.jsx)("div",{className:(0,eh.default)("text-xl font-bold font-mono",e.color),children:e.count}),(0,F.jsx)("div",{className:"text-[10px] text-slate-400 mt-0.5",children:e.desc})]},t)))})]}))})]})]})}function wk({assets:e,assetCounts:t,isPencilMode:a,handleCountChange:r,selectedCountry:n,currentAQI:s}){return(0,F.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-20 animate-in fade-in zoom-in-95 duration-300",children:e.map(e=>{let i=t.find(t=>t.assetId===e.id),l=i?.count||0;return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700/50 rounded-xl overflow-hidden hover:border-slate-300 dark:hover:border-slate-600 transition-all group relative shadow-sm dark:shadow-none",children:[i?.isManual&&(0,F.jsx)("div",{className:"absolute top-0 right-0 p-1 bg-indigo-500/10 dark:bg-indigo-500/20 rounded-bl-lg border-b border-l border-indigo-200 dark:border-indigo-500/30",children:(0,F.jsx)(eV,{className:"w-3 h-3 text-indigo-500 dark:text-indigo-400"})}),(0,F.jsx)("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800/50 flex justify-between items-start bg-slate-50/50 dark:bg-transparent",children:(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsx)("div",{className:"flex justify-between items-start",children:(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-xs font-semibold text-cyan-600 dark:text-cyan-500 uppercase tracking-wider mb-1",children:e.category}),(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 group-hover:text-cyan-700 dark:group-hover:text-white transition-colors flex items-center gap-3",children:[e.name,a&&(0,F.jsxs)("div",{className:"flex items-center bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 px-1",children:[(0,F.jsx)("button",{onClick:()=>r(e.id,Math.max(0,l-1)),className:"px-2 py-0.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:"-"}),(0,F.jsx)("span",{className:"font-mono text-cyan-600 dark:text-cyan-400 px-2 min-w-[30px] text-center text-sm",children:l}),(0,F.jsx)("button",{onClick:()=>r(e.id,l+1),className:"px-2 py-0.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:"+"})]}),!a&&(0,F.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-sm font-mono text-cyan-600 dark:text-cyan-400 border border-slate-200 dark:border-slate-700",children:["x",l]})]})]})}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-2 flex gap-3",children:[(0,F.jsxs)("span",{children:["Redundancy: ",(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:e.defaultRedundancy})]}),(0,F.jsx)("span",{children:""}),(0,F.jsxs)("span",{children:["Total Annual Hours: ",(0,F.jsxs)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:[e.maintenanceTasks.reduce((e,t)=>e+t.standardHours*("Monthly"===t.frequency?12:"Quarterly"===t.frequency?4:"Bi-Annual"===t.frequency?2:1),0)*l," hrs"]})]})]})]})}),(0,F.jsxs)("div",{className:"p-5 space-y-4",children:[e.consumables?.map(t=>{let a=(0,eD.calculateEnvironmentalDegradation)(e.id,t.name,t.baseLifeMonths,n,s),r=((1-a.degradationFactor)*100).toFixed(0);return(0,F.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-950/30 rounded-lg p-3 text-sm border border-slate-100 dark:border-slate-800/50",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:t.name}),(0,F.jsxs)("span",{className:(0,eh.default)("font-mono font-bold",a.degradationFactor<.8?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"),children:[a.adjustedLifeMonths," Months"]})]}),(0,F.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-800 h-1.5 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded-full",a.degradationFactor<.6?"bg-red-500":a.degradationFactor<.8?"bg-amber-500":"bg-emerald-500"),style:{width:`${100*a.degradationFactor}%`}})}),a.degradationFactor<1&&(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-amber-600 dark:text-amber-500/80",children:[(0,F.jsx)(eM,{className:"w-3 h-3"}),"Life reduced by ",r,"% due to AQI"]})]},t.name)}),(0,F.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Key Maintenance Activities"}),(0,F.jsx)("div",{className:"space-y-2",children:e.maintenanceTasks.slice(0,3).map(e=>(0,F.jsxs)("div",{className:"flex justify-between text-xs items-center group/task",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400 group-hover/task:text-slate-900 dark:group-hover/task:text-slate-300",children:e.name}),(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsx)("span",{className:(0,eh.default)("px-1.5 py-0.5 rounded text-[10px] font-medium border","Statutory"===e.criticality?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-900/30":"Optimal"===e.criticality?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-900/30":"bg-slate-100 dark:bg-slate-800 text-slate-500 border-slate-200 dark:border-slate-700"),children:e.criticality}),(0,F.jsx)("span",{className:"text-slate-500 bg-white dark:bg-slate-800 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700",children:e.frequency})]})]},e.id))})]})]})]},e.id)})})}function ww({assetCounts:e,schedule:t,weeks:a}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden backdrop-blur-sm shadow-sm dark:shadow-none animate-in fade-in zoom-in-95 duration-300",children:[(0,F.jsxs)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800/50 flex justify-between items-center bg-slate-50/50 dark:bg-transparent",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-300",children:["Annual Maintenance Calendar (",new Date().getFullYear(),") ",(0,F.jsx)(ei,{content:"12-month schedule grid showing all planned maintenance events. Color-coded: statutory (legally required), optimal (manufacturer-recommended), discretionary (condition-based)."})]}),(0,F.jsxs)("div",{className:"flex gap-4 text-xs text-slate-700 dark:text-slate-300 font-medium",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500 border border-red-400"}),"Statutory ",(0,F.jsx)(ei,{content:"Legally required inspections and certifications  non-negotiable."})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500 border border-blue-400"}),"Optimal ",(0,F.jsx)(ei,{content:"Manufacturer-recommended maintenance intervals for optimal performance and warranty compliance."})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full bg-slate-500 border border-slate-400"}),"Discretionary ",(0,F.jsx)(ei,{content:"Condition-based maintenance triggered by sensor data, inspections, or degradation thresholds."})]})]})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("div",{className:"min-w-[1500px] p-4",children:[(0,F.jsxs)("div",{className:"flex mb-2",children:[(0,F.jsx)("div",{className:"w-48 flex-shrink-0 text-xs font-bold text-slate-700 dark:text-slate-300 uppercase",children:"Asset Name"}),(0,F.jsx)("div",{className:"flex-1 grid grid-cols-[repeat(52,minmax(20px,1fr))] gap-px",children:a.map(e=>(0,F.jsx)("div",{className:"text-[10px] text-center text-slate-500 dark:text-slate-600 border-l border-slate-200 dark:border-slate-800/30",children:e%4==0?e:""},e))})]}),e.filter(e=>e.count>0).map(e=>{let r=eN.ASSETS.find(t=>t.id===e.assetId);return r?Array.from({length:e.count}).map((n,s)=>{let i=`${r.name} #${s+1}`,l=t.filter(t=>t.assetId===e.assetId&&t.assetName===i);return(0,F.jsxs)("div",{className:"flex items-center hover:bg-slate-100 dark:hover:bg-slate-800/30 transition-colors py-1 group border-b border-slate-100 dark:border-slate-800/30",children:[(0,F.jsx)("div",{className:"w-48 flex-shrink-0 pl-2 text-xs text-slate-700 dark:text-slate-300 font-semibold truncate",children:i}),(0,F.jsx)("div",{className:"flex-1 grid grid-cols-[repeat(52,minmax(20px,1fr))] gap-px h-6 relative",children:a.map(e=>{let t=l.find(t=>t.weekNumber===e);if(!t)return(0,F.jsx)("div",{className:"border-l border-slate-100 dark:border-slate-800/10"},e);let a=new Date(new Date(new Date().getFullYear(),0,1).getTime()+(e-1)*6048e5),r=new Date(a.getTime()+5184e5),n=e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,F.jsx)("div",{className:"rounded-sm mx-0.5 cursor-help relative group/event shadow-sm",style:{backgroundColor:t.color,minWidth:"4px"},children:(0,F.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 p-3 rounded-lg shadow-xl z-20 hidden group-hover/event:block",children:[(0,F.jsx)("div",{className:"text-xs font-bold text-slate-900 dark:text-white mb-1.5",children:t.task.name}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Asset:"}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:t.assetName})]}),(0,F.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Duration:"}),(0,F.jsxs)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:[t.durationHours," hours"]})]}),(0,F.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Technicians:"}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:t.techniciansRequired})]}),(0,F.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400",children:["Week ",e,":"]}),(0,F.jsxs)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:[n(a),"  ",n(r)]})]}),(0,F.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Criticality:"}),(0,F.jsx)("span",{className:(0,eh.default)("font-medium px-1 py-0.5 rounded text-[9px]","Statutory"===t.task.criticality?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"Optimal"===t.task.criticality?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400"),children:t.task.criticality})]})]})]})},e)})})]},`${e.assetId}-${s}`)}):null})]})})]})}function wN({data:e,fmt:t,activeStrat:a,onSelect:r}){return(0,F.jsxs)("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[(0,F.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:e.strategies.map(n=>(0,F.jsxs)("div",{onClick:()=>r&&r(n.id),className:(0,eh.default)("bg-white dark:bg-slate-900/50 border rounded-xl overflow-hidden transition-all relative shadow-sm dark:shadow-none cursor-pointer",n.id===a?`ring-2 ring-offset-2 dark:ring-offset-slate-900 ${"reactive"===n.id?"ring-red-500 border-red-500/50":"planned"===n.id?"ring-blue-500 border-blue-500/50":"ring-emerald-500 border-emerald-500/50"}`:n.id===e.recommended?"border-emerald-500/50 ring-1 ring-emerald-500/20":"border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"),children:[n.id===e.recommended&&(0,F.jsx)("div",{className:"absolute top-3 right-3 bg-emerald-100 dark:bg-emerald-500/20 border border-emerald-200 dark:border-emerald-500/30 text-emerald-700 dark:text-emerald-400 text-[10px] font-bold uppercase px-2 py-0.5 rounded-full",children:"Recommended"}),(0,F.jsxs)("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800/50 bg-slate-50/50 dark:bg-transparent",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),(0,F.jsxs)("h3",{className:"text-base font-bold text-slate-900 dark:text-white capitalize",children:[n.label," ",(0,F.jsx)(ei,{content:"reactive"===n.id?"Run-to-Failure: No scheduled maintenance  repair only when equipment fails. Lowest upfront cost but highest downtime risk.":"planned"===n.id?"Planned Preventive: Time-based scheduled maintenance at fixed intervals regardless of condition.":"Predictive (CBM): Condition-based maintenance using sensor data and analytics to predict failures before they occur."})]})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mt-1 leading-relaxed",children:n.description})]}),(0,F.jsxs)("div",{className:"p-5 space-y-3",children:[[{label:"Annual Cost",value:t(n.totalAnnualCost),highlight:!0,tip:"Total annual maintenance cost including labor, parts, and estimated downtime losses for this strategy."},{label:"Labor",value:t(n.annualLaborCost),tip:"Annual cost of maintenance technicians, engineers, and overtime hours required by this strategy."},{label:"Parts & Materials",value:t(n.annualPartsCost),tip:"Annual spend on replacement parts, consumables, lubricants, and materials for scheduled and unscheduled repairs."},{label:"Downtime Risk",value:t(n.annualDowntimeCost),tip:"Estimated annual cost of unplanned downtime based on failure probability and revenue-at-risk per hour of outage."},{label:"Unplanned Failures",value:`${n.unplannedFailures.toFixed(1)}/yr`,tip:"Expected number of unplanned equipment failures per year. Lower values indicate better maintenance effectiveness."},{label:"5-Year NPV",value:t(n.fiveYearNPV),highlight:!0,tip:"Net Present Value of all maintenance costs over 5 years, discounted at WACC. Lower NPV = more cost-effective strategy."}].map((e,t)=>(0,F.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-slate-100 dark:border-slate-800/30 last:border-0",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[e.label," ",(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsx)("span",{className:(0,eh.default)("text-sm font-mono",e.highlight?"text-slate-900 dark:text-white font-bold":"text-slate-700 dark:text-slate-300"),children:e.value})]},t)),n.sensorCapex>0&&(0,F.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-slate-100 dark:border-slate-800/30",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Sensor CAPEX (one-time) ",(0,F.jsx)(ei,{content:"One-time capital cost for IoT sensors, vibration monitors, thermal cameras, and DCIM integration required for predictive maintenance."})]}),(0,F.jsx)("span",{className:"text-sm font-mono text-orange-600 dark:text-orange-400",children:t(n.sensorCapex)})]}),(0,F.jsxs)("div",{className:"mt-3 pt-2",children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,F.jsxs)("span",{className:"text-slate-500",children:["Reliability Index ",(0,F.jsx)(ei,{content:"Overall equipment reliability score (0-100) based on MTBF, failure rates, and maintenance effectiveness. Higher is better."})]}),(0,F.jsxs)("span",{className:"font-mono text-slate-900 dark:text-white",children:[n.reliabilityIndex,"/100"]})]}),(0,F.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-800 h-2 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${n.reliabilityIndex}%`,backgroundColor:n.color}})})]})]})]},n.id))}),(0,F.jsx)("div",{className:"bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800/50 rounded-xl p-6",children:(0,F.jsxs)("div",{className:"flex items-start gap-3",children:[(0,F.jsx)(eH,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400 mt-0.5 flex-shrink-0"}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 uppercase tracking-wider mb-1",children:["Strategy Recommendation ",(0,F.jsx)(ei,{content:"AI-recommended maintenance strategy based on cost-benefit analysis, considering your facility size, equipment mix, and risk tolerance."})]}),(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:e.recommendationReason}),(0,F.jsxs)("div",{className:"mt-3 px-3 py-2 bg-white dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-800 w-fit",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-500",children:["5-Year Savings (Optimal vs Worst): ",(0,F.jsx)(ei,{content:"Projected cost savings over 5 years by adopting the optimal strategy compared to the most expensive alternative."})]}),(0,F.jsx)("span",{className:"ml-2 font-mono font-bold text-emerald-600 dark:text-emerald-400",children:t(e.fiveYearSavings)})]})]})]})})]})}function wC({data:e,fmt:t}){return(0,F.jsxs)("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[(0,F.jsx)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950/50",children:[(0,F.jsx)("th",{className:"py-3 px-4 text-left text-xs text-slate-500 font-medium uppercase min-w-[120px]",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["SLA Tier ",(0,F.jsx)(ei,{content:"Service Level Agreement tier defining response time guarantees and coverage scope from the maintenance vendor."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-left text-xs text-slate-500 font-medium uppercase min-w-[120px]",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Response Time ",(0,F.jsx)(ei,{content:"Maximum guaranteed time from fault report to on-site technician arrival. Shorter response = higher SLA cost."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase min-w-[100px]",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Annual Cost ",(0,F.jsx)(ei,{content:"Annual fee paid to the vendor for this SLA tier, based on asset count and criticality."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase min-w-[100px]",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Risk Exposure ",(0,F.jsx)(ei,{content:"Estimated annual financial risk from downtime during the response window. Longer response = higher risk."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase min-w-[120px]",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Net Annual Cost ",(0,F.jsx)(ei,{content:"Total cost of the SLA tier: annual fee + estimated risk exposure. The true cost of each option."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase min-w-[120px]",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Break-Even ",(0,F.jsx)(ei,{content:"Downtime cost per minute at which upgrading to this SLA tier becomes financially justified over the cheaper option."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-left text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Coverage ",(0,F.jsx)(ei,{content:"Scope of equipment and services included in this SLA tier  what is covered and what requires additional contracts."})]})})]})}),(0,F.jsx)("tbody",{children:e.tiers.map(e=>(0,F.jsxs)("tr",{className:(0,eh.default)("border-b border-slate-100 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/20 transition-colors",e.recommended&&"bg-emerald-50/50 dark:bg-emerald-950/20"),children:[(0,F.jsx)("td",{className:"py-4 px-4",children:(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:e.label}),e.recommended&&(0,F.jsx)("span",{className:"bg-emerald-100 dark:bg-emerald-500/20 border border-emerald-200 dark:border-emerald-500/30 text-emerald-700 dark:text-emerald-400 text-[10px] font-bold uppercase px-1.5 py-0.5 rounded-full",children:"Best Value"})]})}),(0,F.jsx)("td",{className:"py-4 px-4",children:(0,F.jsx)("span",{className:"font-mono text-cyan-600 dark:text-cyan-400",children:e.responseTime})}),(0,F.jsx)("td",{className:"py-4 px-4 text-right font-mono text-slate-700 dark:text-slate-300",children:t(e.annualCost)}),(0,F.jsx)("td",{className:"py-4 px-4 text-right",children:(0,F.jsx)("span",{className:(0,eh.default)("font-mono",e.riskExposure>5e4?"text-red-500 dark:text-red-400":e.riskExposure>2e4?"text-amber-500 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"),children:t(e.riskExposure)})}),(0,F.jsx)("td",{className:"py-4 px-4 text-right font-mono text-slate-900 dark:text-white font-bold",children:t(e.netAnnualCost)}),(0,F.jsx)("td",{className:"py-4 px-4 text-right font-mono text-slate-500 dark:text-slate-400",children:"nbd"===e.id?"":`${t(e.breakEvenDowntimeCost)}/min`}),(0,F.jsx)("td",{className:"py-4 px-4 text-xs text-slate-500 dark:text-slate-400 max-w-[200px]",children:e.coverageScope})]},e.id))})]})})}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),"Cost vs Risk Exposure"]}),(0,F.jsxs)("div",{className:"space-y-4",children:[e.tiers.map(a=>{let r=Math.max(...e.tiers.map(e=>e.netAnnualCost)),n=a.annualCost/r*100,s=a.riskExposure/r*100;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,F.jsx)("span",{className:(0,eh.default)("font-medium",a.recommended?"text-emerald-600 dark:text-emerald-400":"text-slate-500 dark:text-slate-400"),children:a.label}),(0,F.jsx)("span",{className:"font-mono text-slate-500 dark:text-slate-400",children:t(a.netAnnualCost)})]}),(0,F.jsxs)("div",{className:"flex gap-0.5 h-5",children:[(0,F.jsx)("div",{className:"bg-blue-500/80 dark:bg-blue-500/60 rounded-l",style:{width:`${n}%`},title:"SLA Cost"}),(0,F.jsx)("div",{className:"bg-red-500/80 dark:bg-red-500/60 rounded-r",style:{width:`${s}%`},title:"Risk Exposure"})]})]},a.id)}),(0,F.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-1.5 bg-blue-500/80 dark:bg-blue-500/60 rounded"}),"SLA Cost"]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-1.5 bg-red-500/80 dark:bg-red-500/60 rounded"}),"Risk Exposure"]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,F.jsx)(es,{className:"w-4 h-4 text-cyan-500 dark:text-cyan-400"}),"Analysis"]}),(0,F.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mb-4",children:e.analysis}),(0,F.jsxs)("div",{className:"bg-amber-50 dark:bg-slate-950/50 rounded-lg p-4 border border-amber-200 dark:border-slate-800",children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 uppercase mb-2",children:"Key Insight"}),(0,F.jsxs)("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["Upgrading from NBD to 4-Hour response saves ",t(e.tiers[0].riskExposure-e.tiers[1].riskExposure),"/year in risk exposure, costing an additional ",t(e.tiers[1].annualCost-e.tiers[0].annualCost),"/year in SLA fees."]})]})]})]})]})}function wS({data:e,fmt:t}){return(0,F.jsxs)("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[(0,F.jsx)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950/50",children:[(0,F.jsx)("th",{className:"py-3 px-4 text-left text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Critical Spare Part ",(0,F.jsx)(ei,{content:"Name and associated asset for each spare part held in inventory. Critical spares prevent extended downtime during failures."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-center text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Criticality ",(0,F.jsx)(ei,{content:"Impact level if this part is unavailable: Critical (immediate outage risk), Major (degraded operation), Standard (convenience)."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Unit Cost ",(0,F.jsx)(ei,{content:"Purchase price per unit from the supplier, used to calculate total inventory investment and holding costs."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-center text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Lead Time ",(0,F.jsx)(ei,{content:"Number of days from order placement to delivery. Longer lead times require higher safety stock levels."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-center text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Reorder / Max ",(0,F.jsx)(ei,{content:"Reorder point (minimum stock triggering a new order) / Maximum quantity to hold. Based on lead time and consumption rate."})]})}),(0,F.jsx)("th",{className:"py-3 px-4 text-right text-xs text-slate-500 font-medium uppercase",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Holding Cost ",(0,F.jsx)(ei,{content:"Annual cost to store this spare: includes warehousing, insurance, depreciation, and opportunity cost of tied-up capital (~15-25% of unit cost)."})]})})]})}),(0,F.jsx)("tbody",{children:e.items.map((e,a)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/20 transition-colors",children:[(0,F.jsxs)("td",{className:"py-3 px-4 font-medium text-slate-800 dark:text-slate-200",children:[e.partName," ",(0,F.jsxs)("span",{className:"text-slate-400 font-normal",children:["(",e.assetName,")"]})]}),(0,F.jsx)("td",{className:"py-3 px-4 text-center",children:(0,F.jsx)("span",{className:(0,eh.default)("px-2 py-0.5 rounded text-[10px] uppercase font-bold","Critical"===e.criticality?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-900/30":"Major"===e.criticality?"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 border border-amber-200 dark:border-amber-900/30":"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 border border-blue-200 dark:border-blue-900/30"),children:e.criticality})}),(0,F.jsx)("td",{className:"py-3 px-4 text-right font-mono text-slate-600 dark:text-slate-400",children:t(e.unitCost)}),(0,F.jsxs)("td",{className:"py-3 px-4 text-center text-slate-600 dark:text-slate-400",children:[e.leadTimeDays," days"]}),(0,F.jsxs)("td",{className:"py-3 px-4 text-center text-slate-600 dark:text-slate-400",children:[e.reorderPoint," / ",e.quantity]}),(0,F.jsx)("td",{className:"py-3 px-4 text-right font-mono text-slate-600 dark:text-slate-400",children:t(e.holdingCost)})]},`${e.assetId}-${e.partName}-${a}`))})]})})}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Total Inventory Value",value:t(e.totalInventoryValue),desc:"Capital tied up in spares",color:"text-blue-600 dark:text-blue-400",tip:"Total capital investment tied up in spare parts inventory. Higher values increase working capital requirements but reduce downtime risk."},{label:"Annual Holding Cost",value:t(e.totalHoldingCost),desc:"Storage & depreciation",color:"text-purple-600 dark:text-purple-400",tip:"Annual cost of maintaining spare parts inventory: warehousing, insurance, depreciation, and opportunity cost of capital."},{label:"Annual Spares Budget",value:t(e.totalAnnualSparesBudget),desc:"Consumption + Holding",color:"text-emerald-600 dark:text-emerald-400",tip:"Total annual budget for spare parts: consumption (parts used in maintenance) plus holding costs (storage and depreciation)."}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:[e.label," ",(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsx)("div",{className:(0,eh.default)("text-2xl font-bold mb-1",e.color),children:e.value}),(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.desc})]},t))})]})}wv.displayName="Legend";var wP=e.i(13936),wM=e.i(32472),wO=e.i(26697);let wE=(e,t,a,r)=>{let n=e.headcount_Engineer+e.headcount_Technician+e.headcount_ShiftLead+2*(e.headcount_Engineer>0),s=(e.turnoverRate||.15)*n*t*3,i=e.maintenanceModel||"hybrid",l=e.hybridRatio??.5,o=50*e.itLoad*("in-house"===i?1:"vendor"===i?1.3:+l+(1-l)*1.3),c=r?.economy?.electricityRate??.1,d=(0,wO.getPUE)(e.coolingType??"air"),u=e.itLoad*d*8760*c,m=r?.economy?.taxRate??.3,x=e.itLoad*a,h=x*((e.designFee+e.pmFee)/100),p=x*(e.contingency/100),f=x+h+p;return n*t*12+s+o+u+(f/10-f/20*m)},wA=(e,t=.1,a=200,r=1e-7)=>{let n=t;for(let t=0;t<a;t++){let t=0,a=0;for(let r=0;r<e.length;r++){let s=Math.pow(1+n,r);t+=e[r]/s,r>0&&(a-=r*e[r]/Math.pow(1+n,r+1))}if(Math.abs(t)<r||1e-12>Math.abs(a))break;(n-=t/a)<-.99&&(n=-.5),n>5&&(n=2)}return n},wT=e=>{let t=[];for(let a=0;a<e;a++)0===a?t.push(.25):1===a?t.push(.5):2===a?t.push(.7):3===a?t.push(.85):t.push(Math.min(.95,.85+(a-3)*.025));return t},wI=e=>{let{totalCapex:t,annualOpex:a,revenuePerKwMonth:r,itLoadKw:n,discountRate:s,projectLifeYears:i,escalationRate:l,opexEscalation:o,occupancyRamp:c,taxRate:d,depreciationYears:u}=e,m=t/u,x=[],h=[-t],p=-t,f=-t/1,b=!1,g=!1,y=i,v=i,j=0,k=0;for(let e=0;e<i;e++){let t=12*r*n*(c[e]??.95)*Math.pow(1+l,e),i=a*Math.pow(1+o,e),w=e<u?m:0,N=t-i,C=Math.max(0,N-w),S=C*d,P=N-S;p+=P;let M=P/Math.pow(1+s,e+1);if(f+=M,j+=t,k+=P,!b&&p>=0){let t=p-P;y=e+(t<0?Math.abs(t)/P:0),b=!0}if(!g&&f>=0){let t=f-M;v=e+(t<0?Math.abs(t)/M:0),g=!0}x.push({year:e+1,revenue:t,opex:i,depreciation:w,ebitda:N,taxableIncome:C,tax:S,netIncome:P,freeCashflow:P,cumulativeCashflow:p,discountedCashflow:M,cumulativeDiscountedCashflow:f}),h.push(P)}let w=-t;for(let e=0;e<i;e++)w+=x[e].freeCashflow/Math.pow(1+s,e+1);let N=100*wA(h),C=(k-t)/t*100,S=(w+t)/t;return{npv:w,irr:N,roiPercent:C,paybackPeriodYears:Math.round(10*y)/10,discountedPaybackYears:Math.round(10*v)/10,profitabilityIndex:Math.round(100*S)/100,totalRevenue:j,totalProfit:k,cashflows:x,annualDepreciation:m,breakEvenOccupancy:Math.round(100*Math.min(1,a/(12*r*n)))}},wR=({data:e,maxItems:t=8})=>{var a;let r=e.slice(0,t);if(0===r.length)return null;let n=Math.max(...r.map(e=>Math.max(Math.abs(e.deltaLow),Math.abs(e.deltaHigh)))),s=n>0?100/n:1,i=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return(0,F.jsxs)("div",{className:"w-full",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-slate-300",children:"Sensitivity Analysis  Tornado Chart"}),(0,F.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-500",children:["20% perturbation on base TCO of ",(a=r[0]?.baseTCO||0)>=1e6?`$${(a/1e6).toFixed(1)}M`:a>=1e3?`$${(a/1e3).toFixed(0)}K`:`$${a.toFixed(0)}`,"/yr"]})]}),(0,F.jsxs)("div",{className:"flex items-center text-[10px] text-slate-600 dark:text-slate-500 uppercase mb-2 px-2",children:[(0,F.jsx)("div",{className:"w-36 text-right pr-3",children:"20% Impact"}),(0,F.jsx)("div",{className:"flex-1 text-center",children:"Parameter"}),(0,F.jsx)("div",{className:"w-36 pl-3",children:"+20% Impact"})]}),(0,F.jsx)("div",{className:"space-y-1.5",children:r.map((e,t)=>{let a=Math.abs(e.deltaLow)*s,r=Math.abs(e.deltaHigh)*s;return(0,F.jsxs)("div",{className:"flex items-center group hover:bg-slate-100 dark:hover:bg-slate-800/30 rounded px-2 py-1 transition-colors",children:[(0,F.jsxs)("div",{className:"w-36 flex justify-end items-center",children:[(0,F.jsx)("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mr-2",children:i(e.deltaLow)}),(0,F.jsx)("div",{className:"h-6 rounded-l transition-all duration-500 ease-out",style:{width:`${a}%`,backgroundColor:e.deltaLow<0?"#10b981":"#ef4444",opacity:.8+.2*(0===t)}})]}),(0,F.jsx)("div",{className:"flex-1 text-center px-2",children:(0,F.jsx)("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-300",children:e.label})}),(0,F.jsxs)("div",{className:"w-36 flex items-center",children:[(0,F.jsx)("div",{className:"h-6 rounded-r transition-all duration-500 ease-out",style:{width:`${r}%`,backgroundColor:e.deltaHigh>0?"#ef4444":"#10b981",opacity:.8+.2*(0===t)}}),(0,F.jsx)("span",{className:"text-[10px] text-red-600 dark:text-red-400 ml-2",children:i(e.deltaHigh)})]})]},e.parameter)})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4 text-xs text-slate-600 dark:text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded bg-emerald-500/80"}),(0,F.jsx)("span",{children:"Cost Decrease"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/80"}),(0,F.jsx)("span",{children:"Cost Increase"})]})]})]})},wD=e=>e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`,wL=({data:e,width:t=700,height:a=400})=>{let{nodePositions:r,linkPaths:n,nodeWidth:s}=(0,z.useMemo)(()=>((e,t,a,r,n=20,s=24)=>{let i=new Map;e.forEach(e=>{i.has(e.column)||i.set(e.column,[]),i.get(e.column).push(e)});let l=Math.max(...Array.from(i.keys())),o=l>0?(a-s)/l:a,c=new Map;i.forEach((e,t)=>{let a=e.reduce((e,t)=>e+t.value,0),s=r-(e.length-1)*n,i=t*o,l=0;e.forEach(e=>{let t=Math.max(20,e.value/a*s);c.set(e.id,{x:i,y:l,height:t,color:e.color,label:e.label,value:e.value}),l+=t+n})});let d=new Map,u=new Map,m=t.map(e=>{let a=c.get(e.source),r=c.get(e.target);if(!a||!r)return null;let n=t.filter(t=>t.source===e.source).reduce((e,t)=>e+t.value,0),i=t.filter(t=>t.target===e.target).reduce((e,t)=>e+t.value,0),l=e.value/n*a.height,o=e.value/i*r.height,m=d.get(e.source)||0,x=u.get(e.target)||0;d.set(e.source,m+l),u.set(e.target,x+o);let h=a.x+s,p=a.y+m,f=r.x,b=r.y+x,g=(h+f)/2;return{path:`M ${h},${p} 
                   C ${g},${p} ${g},${b} ${f},${b}
                   L ${f},${b+o}
                   C ${g},${b+o} ${g},${p+l} ${h},${p+l}
                   Z`,color:e.color||a.color,value:e.value,sourceLabel:a.label,targetLabel:r.label}}).filter(Boolean);return{nodePositions:c,linkPaths:m,nodeWidth:s}})(e.nodes,e.links,t,a),[e,t,a]),[i,l]=z.default.useState(null);return(0,F.jsx)("div",{className:"w-full overflow-x-auto",children:(0,F.jsxs)("svg",{viewBox:`-10 -10 ${t+20} ${a+20}`,className:"w-full",style:{maxHeight:a+20},children:[n.map((e,r)=>e&&(0,F.jsxs)("g",{children:[(0,F.jsx)("path",{d:e.path,fill:e.color,opacity:null===i?.5:i===r?.8:.15,className:"transition-opacity duration-200 cursor-pointer",onMouseEnter:()=>l(r),onMouseLeave:()=>l(null)}),i===r&&(0,F.jsxs)("text",{x:t/2,y:a+10,textAnchor:"middle",className:"fill-slate-600 dark:fill-slate-400",fontSize:11,children:[e.sourceLabel,"  ",e.targetLabel,": ",wD(e.value)]})]},r)),Array.from(r.entries()).map(([e,a])=>(0,F.jsxs)("g",{children:[(0,F.jsx)("rect",{x:a.x,y:a.y,width:s,height:a.height,rx:4,fill:a.color,opacity:.9}),a.height>12&&(0,F.jsx)("text",{x:a.x<t/2?a.x+s+6:a.x-6,y:a.y+a.height/2,textAnchor:a.x<t/2?"start":"end",dominantBaseline:"middle",className:"fill-slate-900 dark:fill-slate-200",fontSize:11,fontWeight:500,children:a.label}),a.height>20&&(0,F.jsx)("text",{x:a.x<t/2?a.x+s+6:a.x-6,y:a.y+a.height/2+14,textAnchor:a.x<t/2?"start":"end",dominantBaseline:"middle",className:"fill-slate-600 dark:fill-slate-400",fontSize:10,children:wD(a.value)})]},e))]})})};var w_=e.i(54644),wF=e.i(58257),w$=e.i(42821),wz=e.i(54462),wq=e.i(61480),wW=e.i(69012),wB=e.i(76285),wU=e.i(71051);let wK={2:{name:"Tier II",availability:99.741,downtimeMinutes:1361},3:{name:"Tier III",availability:99.982,downtimeMinutes:95},4:{name:"Tier IV",availability:99.995,downtimeMinutes:26}},wH=(e,t,a=4,r)=>{let n=wK[e],s=t??r?.risk?.downtimeCostPerMin??5e3,i=n.downtimeMinutes*s,l="Low";return 2===e&&(l="High"),3===e&&a<4&&(l="Medium"),4===e&&(l="Low"),{tier:e,availability:n.availability,expectedDowntimeMinutes:n.downtimeMinutes,financialImpact:i,slaBreachProbability:l,costPerMinute:s}},wV=e=>{let{country:t,totalCapex:a,annualRevenue:r,annualOpex:n,projectLifeYears:s,discountRate:i,equipmentCapexShare:l}=e,o=t.taxIncentives,c=t.economy.taxRate,d=o?.taxHolidayYears??0,u=o?.taxHolidayRate??c,m=o?.importDutyExemption??!1,x=o?.landSubsidy??!1,h=a/Math.min(20,s),p=[],f=[],b=[-a],g=[-a],y=-a,v=-a,j=0,k=0;for(let e=0;e<s;e++){let t=r*Math.pow(1.03,e),a=n*Math.pow(1.04,e),s=Math.max(0,t-a-h),l=e<d?u:c;f.push(l);let o=s*l,m=s*c,x=m-o;p.push(Math.round(x)),j+=o,k+=m;let w=t-a-o,N=t-a-m;b.push(w),g.push(N);let C=Math.pow(1+i,e+1);y+=w/C,v+=N/C}let w=m?Math.round(a*l*.05):0,N=x?Math.round(.08*a*.1):0,C=w+N;for(let e=0;e<s;e++)C+=p[e]/Math.pow(1+i,e+1);C=Math.round(C);let S=Math.round(1e3*wA(b))/10,P=Math.round(1e3*wA(g))/10,M=[];return d>0&&M.push(`${d}-year tax holiday at ${(100*u).toFixed(1)}% (vs ${(100*c).toFixed(1)}% standard)`),m&&M.push(`Import duty exemption on DC equipment (saving ~$${(w/1e3).toFixed(0)}K)`),x&&M.push(`Government land subsidy available (~$${(N/1e3).toFixed(0)}K)`),o?.incentivePrograms&&o.incentivePrograms.forEach(e=>M.push(e)),0===M.length&&M.push("No significant DC-specific incentives available"),{yearlyTaxSavings:p,totalIncentiveValue:C,effectiveTaxTimeline:f,ftzBenefits:w,landSubsidyValue:N,incentiveSummary:M,countryRanking:0,npvWithIncentives:Math.round(y),npvWithoutIncentives:Math.round(v),irrWithIncentives:S,irrWithoutIncentives:P,totalTaxPaidWithIncentives:Math.round(j),totalTaxPaidWithoutIncentives:Math.round(k)}},wG=e=>{let{country:t,totalCapex:a,itLoadKw:r,annualRevenue:n}=e,s=t.naturalDisaster,i=s?.seismicZone??1,l=s?.floodRisk??"low",o=s?.typhoonRisk??"none",c=s?.volcanoRisk??"none",d=s?.tsunamiRisk??"none";s?.compositeScore;let u=s?.insuranceMultiplier??1,m=s?.structuralReinforcement??0,x=25*i,h="extreme"===l?100:"high"===l?70:"moderate"===l?40:10,p="high"===o?100:"moderate"===o?60:25*("low"===o),f="moderate"===c?80:30*("low"===c),b="high"===d?100:"moderate"===d?60:25*("low"===d),g=Math.round(.3*x+.25*h+.2*p+.15*f+.1*b),y=Math.round(.0015*a*u),v=Math.round(a*m),j=Math.round(g/1e3*(.15*a+.25*n)),k=Math.round(.15*g),w=Math.round(n/365*k),N=[];if(i>=2){let e=.05*a;N.push({name:"Seismic Base Isolation",cost:Math.round(e),riskReduction:20,roi:Math.round(20*j/100*20/e*100)/100,description:"Base isolation system reduces seismic force transfer by 60-80%."})}if("high"===l||"extreme"===l){let e=.02*a;N.push({name:"Elevated Platform + Flood Barriers",cost:Math.round(e),riskReduction:15,roi:Math.round(15*j/100*20/e*100)/100,description:"Raise critical infrastructure 2m above flood plain with deployable barriers."})}if("moderate"===o||"high"===o){let e=.03*a;N.push({name:"Wind-Rated Envelope (Cat 5)",cost:Math.round(e),riskReduction:18,roi:Math.round(18*j/100*20/e*100)/100,description:"Reinforce roof and walls to withstand 250+ km/h winds."})}if(g>=30){let e=.01*a;N.push({name:"Geographic Redundancy (DR Site)",cost:Math.round(10*e),riskReduction:10,roi:Math.round(10*w/100/(10*e)*100)/100,description:"Active-passive DR site in low-risk location."})}return{compositeScore:g,riskCategory:g>=70?"Extreme":g>=45?"High":g>=20?"Moderate":"Low",annualInsuranceCost:y,structuralCostAdder:v,expectedAnnualLoss:j,businessInterruptionDays:k,revenueAtRisk:w,mitigationOptions:N,riskBreakdown:[{type:"Seismic",score:x,weight:30,impact:i>=3?"Critical":i>=2?"Moderate":"Low"},{type:"Flood",score:h,weight:25,impact:"extreme"===l||"high"===l?"Critical":"moderate"===l?"Moderate":"Low"},{type:"Typhoon/Cyclone",score:p,weight:20,impact:"high"===o?"Critical":"moderate"===o?"Moderate":"Low"},{type:"Volcano",score:f,weight:15,impact:"moderate"===c?"Critical":"low"===c?"Low":"None"},{type:"Tsunami",score:b,weight:10,impact:"high"===d?"Critical":"moderate"===d?"Moderate":"Low"}],totalRiskAdjustedCost:Math.round(y+j+v/20)}},wY=e=>{let{country:t,itLoadKw:a,tierLevel:r,coolingType:n}=e,s=t.gridReliability,i=s?.gridUptime??99.9,l=s?.voltageStability??"moderate",o=s?.brownoutFrequency??5,c=s?.averageOutageDuration??15,d=s?.gridTier??2,u=s?.backupFuelPremium??.05,m=s?.recommendedGenHours??48,x=s?.renewableReadiness??50,h=Math.round(.4*Math.max(0,Math.min(100,(i-95)/5*100))+.2*("stable"===l?100:"moderate"===l?50:10)+.2*Math.max(0,100-2*o)+.2*Math.max(0,Math.min(100,(120-c)/1.2))),p=o+Math.round((100-i)*365/100),f=p*c,b=Math.ceil(a*(0,wO.getPUE)(n)*(4===r?2:3===r?1.5:1.25)),g=Math.max(m,3===d?168:2===d?72:48),y=Math.round(b*(f/60+.1*g)*.36*(1+u)),v=Math.round(24*a*Math.min(2,1+.02*o)),j=d>=2||h<70||r>=3,k=j?Math.round(50*a):0,w=.4*y+.2*v;return{reliabilityScore:h,reliabilityGrade:h>=90?"A":h>=75?"B":h>=55?"C":h>=35?"D":"F",annualExpectedOutages:p,annualOutageMinutes:f,requiredGenCapacity:b,recommendedFuelHours:g,annualFuelCost:y,annualUpsReplacementCost:v,gridRiskAdjustedOpex:y+v+k,availabilityWithBackup:Math.min(99.999,(1-(100-i)/100*(1-(4===r?.999:3===r?.99:.95)))*100),dualFeedRecommendation:j,solarViabilityScore:x,batteryStorageROI:w>0?Math.round(.5*a*400/w*10)/10:99,costBreakdown:[{label:"Generator Fuel",value:y},{label:"UPS Battery Replacement",value:v},{label:"Dual Feed (Annualized)",value:k}],countryComparison:[]}},wX=e=>{let{country:t,totalFTE:a,annualStaffCost:r}=e,n=t.talentPool,s=n?.dcEngineerPool??"moderate",i=n?.universityPipeline??20,l=n?.hyperscalerPresence??3,o=n?.avgHiringDays??40,c=n?.salaryPremium??1.1;n?.talentScore;let d=n?.certifiedProfessionals??200,u="abundant"===s?100:"moderate"===s?60:"scarce"===s?30:10,m=Math.min(100,i/100*100),x=Math.round(.3*u+.2*m+.25*(l<=3?20*l:l<=7?60+(l-3)*8:Math.max(50,92-(l-7)*5))+.15*Math.max(0,Math.min(100,(90-o)/.7))+.1*Math.min(100,d/3e3*100)),h=Math.round(150*o*c),p=Math.max(1,Math.ceil(a/(o/30*2))),f=Math.round(a/p*10)/10,b=Math.round((.15+("very_scarce"===s?.12:"scarce"===s?.08:.03*("moderate"===s))+(l>5?.04:.02*(l>3)))*100)/100,g=Math.ceil(a*b),y=Math.round(3500*g*1.5),v=Math.round(r/a*.5*g),j=Math.round(r*c);return{talentScore:x,hiringDifficulty:x>=75?"Easy":x>=55?"Moderate":x>=35?"Difficult":"Very Difficult",adjustedSalaryMultiplier:c,recruitmentCostPerHire:h,totalRecruitmentCost:h*a,timeToFullStaff:f,adjustedTurnoverRate:b,annualTrainingCost:y,competitionIndex:Math.round(l*("scarce"===s||"very_scarce"===s?15:8)),annualTurnoverCost:v,adjustedAnnualStaffCost:j,talentBreakdown:[{metric:"DC Engineer Pool",value:s.replace("_"," "),impact:u>=60?"Positive":"Negative"},{metric:"University Pipeline",value:`${i}K grads/yr`,impact:m>=50?"Positive":"Neutral"},{metric:"Hyperscaler Presence",value:`${l} operators`,impact:l>5?"High Competition":"Manageable"},{metric:"Avg Hiring Time",value:`${o} days`,impact:o<=35?"Fast":o<=50?"Average":"Slow"},{metric:"Certified Professionals",value:`${d}`,impact:d>=500?"Strong":"Limited"},{metric:"Salary Premium",value:`${((c-1)*100).toFixed(0)}%`,impact:c<=1.05?"Low":c<=1.15?"Moderate":"High"}],countryComparison:[]}},wZ={small:[{id:"p1",label:"Phase 1",itLoadKw:1e3,startMonth:0,buildMonths:14,occupancyRamp:[.3,.6,.85,.95]},{id:"p2",label:"Phase 2",itLoadKw:2e3,startMonth:18,buildMonths:12,occupancyRamp:[.3,.6,.85,.95]},{id:"p3",label:"Phase 3",itLoadKw:5e3,startMonth:36,buildMonths:10,occupancyRamp:[.3,.6,.85,.95]}],medium:[{id:"p1",label:"Phase 1",itLoadKw:2e3,startMonth:0,buildMonths:18,occupancyRamp:[.3,.6,.85,.95]},{id:"p2",label:"Phase 2",itLoadKw:1e4,startMonth:20,buildMonths:14,occupancyRamp:[.3,.6,.85,.95]},{id:"p3",label:"Phase 3",itLoadKw:2e4,startMonth:40,buildMonths:12,occupancyRamp:[.3,.6,.85,.95]}],large:[{id:"p1",label:"Phase 1",itLoadKw:5e3,startMonth:0,buildMonths:22,occupancyRamp:[.3,.6,.85,.95]},{id:"p2",label:"Phase 2",itLoadKw:2e4,startMonth:24,buildMonths:16,occupancyRamp:[.3,.6,.85,.95]},{id:"p3",label:"Phase 3",itLoadKw:5e4,startMonth:48,buildMonths:14,occupancyRamp:[.3,.6,.85,.95]}]},wJ=e=>{let{phases:t,country:a,coolingType:r,tierLevel:n,shiftModel:s,maintenanceModel:i,hybridRatio:l,baseCapexPerKw:o}=e,c=4===n?1.35:3===n?1:.75,d="liquid"===r?1.25:"rdhx"===r?1.1:"inrow"===r?1:.85,u=a.constructionIndex??1,m=o??1e4,x=m*c*d*u,h=(0,wO.getPUE)(r),p=Math.min(Math.max(...t.map(e=>e.startMonth+e.buildMonths+48)),120),f=[],b=[],g=Array(p).fill(0),y=Array(p).fill(0),v=[],j=[],k=t.reduce((e,t)=>e+t.itLoadKw,0),w=Math.max(.85,1-k/1e5*.15);for(let e of t){let a=e.startMonth+e.buildMonths,r=t.indexOf(e),o=Math.round(x*w*Math.max(.9,1-.03*r)),c=o*e.itLoadKw,d=K(t.filter(e=>e.startMonth+e.buildMonths<=a).reduce((e,t)=>e+t.itLoadKw,0)+e.itLoadKw,n,s,"in-house",i,"planned",l),u=Math.round((h-Math.min(.08,.02*r))*100)/100;f.push({id:e.id,label:e.label,itLoadKw:e.itLoadKw,startMonth:e.startMonth,buildMonths:e.buildMonths,operationalMonth:a,capex:Math.round(c),capexPerKw:o,fte:d.totalFTE,pue:u}),b.push({phaseId:e.id,label:`${e.label} Build`,type:"build",startMonth:e.startMonth,endMonth:a}),b.push({phaseId:e.id,label:`${e.label} Operational`,type:"operational",startMonth:a,endMonth:Math.min(a+48,p)});for(let t=e.startMonth;t<Math.min(a,p);t++)y[t]+=c/e.buildMonths;for(let t=a;t<p;t++)g[t]+=e.itLoadKw}let N=0;for(let e=0;e<p;e++)N+=y[e],y[e]=Math.round(N);for(let e=0;e<p;e+=3){let t=g[e];if(t>0){let a=K(t,n,s,"in-house",i,"planned",l);v.push({month:e,fte:a.totalFTE})}else v.push({month:e,fte:0})}for(let e=0;e<p;e+=6){let t=g[e];if(t>0){let a=Math.min(.08,t/5e4*.08);j.push({month:e,pue:Math.round((h-a)*100)/100})}else j.push({month:e,pue:h})}let C=f.reduce((e,t)=>e+t.capex,0),S=f.reduce((e,t)=>e+t.itLoadKw,0),P=Math.round(.5*Math.max(0,100-C/S/200)+.3*(t.length>1?Math.min(100,(t[t.length-1].startMonth-t[0].startMonth)/(t.length-1)/24*100):50)+.2*Math.min(100,25*t.length)),M=Math.round(f.reduce((e,t)=>e+t.itLoadKw/S,0)/f.length*100),O=[];for(let e=0;e<p;e+=3){let a=g[e]??0,r=0;for(let a of t){let t=a.startMonth+a.buildMonths;if(e>=t){let n=Math.min(Math.floor((e-t)/12),a.occupancyRamp.length-1);r+=a.itLoadKw*(a.occupancyRamp[n]??.95)}}O.push({month:e,capacityKw:a,demandKw:Math.round(r),utilization:a>0?Math.round(r/a*100):0})}let E=f.map((e,a)=>{let s=t[a],i=Math.ceil(e.itLoadKw/8),l="liquid"===r?"Liquid cooling":"rdhx"===r?"Rear-door heat exchangers":"inrow"===r?"In-row cooling":"Raised-floor air cooling",o=12*(.95*e.itLoadKw*120),c=Math.round(e.capex/o*10)/10,d=[];e.itLoadKw>=2e4&&d.push("Large-scale commissioning complexity"),e.buildMonths>18&&d.push("Extended construction timeline"),a>0&&s.startMonth<t[a-1].startMonth+t[a-1].buildMonths&&d.push("Overlapping construction with prior phase"),"liquid"===r&&d.push("Liquid cooling supply chain lead times"),4===n&&d.push("Tier IV concurrent maintainability requirements"),0===d.length&&d.push("Standard construction risk profile");let u=Math.min(100,Math.round((e.itLoadKw>=2e4?25:10)+(e.buildMonths>18?20:5)+15*(a>0)+15*("liquid"===r)+(4===n?15:5)));return{id:e.id,label:e.label,description:`${e.label} deploys ${ex(e.itLoadKw)} IT capacity over ${e.buildMonths} months with ${l.toLowerCase()}, becoming operational at month ${e.operationalMonth}.`,infrastructureScope:[`${i} racks (~8 kW avg density)`,`${l}`,`Tier ${n} redundancy`,`${Math.ceil(e.itLoadKw/1e3)} \xd7 1 MW power modules`,`${e.fte} operations FTE at full capacity`],riskFactors:d,revenueEstimate:Math.round(o),roiYears:c,riskScore:u}}),A=[{category:"CAPEX",assumption:"Base cost per kW",value:`$${m.toLocaleString()}/kW`},{category:"CAPEX",assumption:"Tier multiplier",value:`${c}x (Tier ${n})`},{category:"CAPEX",assumption:"Cooling multiplier",value:`${d}x (${r})`},{category:"CAPEX",assumption:"Construction index",value:`${u}x (${a.name})`},{category:"CAPEX",assumption:"Scale discount",value:`${Math.round(100*w)}% of base at ${ex(k)} total`},{category:"Operations",assumption:"Shift model",value:"12h"===s?"12-hour shifts (2 crew)":"8-hour shifts (3 crew)"},{category:"Operations",assumption:"Maintenance model",value:`${i}${"hybrid"===i?` (${Math.round(100*l)}% in-house)`:""}`},{category:"Operations",assumption:"Base PUE",value:`${h} (${r} cooling)`},{category:"Revenue",assumption:"Avg revenue per kW",value:"$120/kW/month at 95% occupancy"},{category:"Revenue",assumption:"Occupancy ramp",value:"30%  60%  85%  95% (annual steps)"}],T=Math.round(C/S),I=f[f.length-1],R=I?.fte??0,D=j[j.length-1]?.pue??h,L=`This ${t.length}-phase capacity plan deploys ${ex(S)} of IT load across ${a.name} over ${p} months with a total CAPEX of ${eo(C)} (avg $${T.toLocaleString()}/kW). Phase 1 (${ex(f[0].itLoadKw)}) establishes the initial footprint at month ${f[0].operationalMonth}, while ${t.length>2?"subsequent phases scale":"Phase 2 scales"} capacity through economies of scale, reducing per-kW costs by ${Math.round((1-I.capexPerKw/f[0].capexPerKw)*100)}% by the final phase. The Tier ${n} design with ${r} cooling achieves a PUE of ${D} at full scale. Peak staffing reaches ${R} FTE under the ${i} maintenance model.`;return{phases:f,timeline:b,cumulativeItLoad:g,cumulativeCapex:y,totalCapex:C,totalItLoadKw:S,scalabilityScore:Math.min(100,P),phaseEfficiency:M,staffingRamp:v,pueEvolution:j,totalMonths:p,narrative:L,phaseDetails:E,assumptions:A,utilizationCurve:O}};var wQ=e.i(3201);function w0(e){let t,a,{country:r,itLoadKw:n,tierLevel:s,coolingType:i,coolingTopology:l,powerRedundancy:o,overrides:c,testingRegime:d}=e,u=d??"minimal",m=r.fuelDiesel,x=r.gridReliability,h=m?.dieselPricePerLiter??1.05,p=m?.fuelTaxRate??.05,f=m?.storageLimitLiters??5e4,b=m?.environmentalPermitRequired??!0,g=c?.dieselPricePerLiter??h,y=c?.genEfficiency??.27,v=c?.fuelStorageHours??(4===s?96:3===s?72:48),j=c?.monthlyTestHours??2,k=c?.annualFullLoadTestHours??4,w=n*(0,wO.getPUE)(i),N=o??"2N",C=eS(n,2===s?3:s,"liquid"===i||"rdhx"===i?"pumped":"air",Math.ceil(.6*n),l??"perimeter",N).find(e=>"gen-set"===e.assetId),S=C?.count??Math.ceil(w/2500),P=2500*S,M=w*y,O=Math.min(M*v,2*f),E=Math.ceil(O/2e4),A={totalLiters:Math.round(O),tankCount:E,daysOfAutonomy:Math.round(O/M/24*10)/10},T=15*S*.05,I=30*S*.05,R=S*j*1250*y,D=2*S*1875*y,L=S*k*2500*y,_="minimal"===u?{weeklyNoLoad:{frequency:"N/A",durationMin:0,fuelLiters:0},monthlyLoadBank:{frequency:"Monthly",durationHours:.5,fuelLiters:Math.round(I)},quarterlyFullLoad:{frequency:"N/A",durationHours:0,fuelLiters:0},annualOverhaul:{frequency:"Annual",durationHours:k,fuelLiters:Math.round(L)}}:{weeklyNoLoad:{frequency:"Weekly",durationMin:15,fuelLiters:Math.round(T)},monthlyLoadBank:{frequency:"Monthly",durationHours:j,fuelLiters:Math.round(R)},quarterlyFullLoad:{frequency:"Quarterly",durationHours:2,fuelLiters:Math.round(D)},annualOverhaul:{frequency:"Annual",durationHours:k,fuelLiters:Math.round(L)}};"minimal"===u?(t=12*I+L,a=I):(t=52*T+12*R+4*D+L,a=R);let F=(x?x.brownoutFrequency*x.averageOutageDuration/60:24)*w*y,$=.1*O*.12,z=t+F+$,q={monthlyTestLiters:Math.round(a),annualTestLiters:Math.round(t),annualOutageLiters:Math.round(F),annualPolishingLiters:Math.round($),totalLitersPerYear:Math.round(z),totalLitersPerMonth:Math.round(z/12)},W=g*(1+p),B=z*W,U=15e3*S+5*P,K=b?2500*S+5e3:0,H=2.68*z;return{generator:{count:S,capacityKw:2500,redundancyModel:N,totalCapacityKw:P},storage:A,consumption:q,cost:{monthlyFuelCostUsd:Math.round(B/12),annualFuelCostUsd:Math.round(B),annualMaintenanceUsd:Math.round(U),annualEnvironmentalComplianceUsd:Math.round(K),totalAnnualGenOpex:Math.round(B+U+K),dieselPriceWithTax:Math.round(100*W)/100},testing:_,testingRegime:u,co2EmissionsKgPerYear:Math.round(H),co2EmissionsTonsPerYear:Math.round(H/1e3*10)/10,countryComparison:Object.values(wQ.COUNTRIES).filter(e=>e.fuelDiesel).map(e=>{let t=e.fuelDiesel.dieselPricePerLiter*(1+e.fuelDiesel.fuelTaxRate);return{countryId:e.id,countryName:e.name,dieselPrice:Math.round(100*t)/100,annualCost:Math.round(z*t)}}).sort((e,t)=>e.dieselPrice-t.dieselPrice),editableParams:[{key:"dieselPricePerLiter",label:"Diesel Price",value:g,defaultValue:h,unit:"USD/L",min:.1,max:5,step:.05},{key:"genEfficiency",label:"Gen Efficiency",value:y,defaultValue:.27,unit:"L/kWh",min:.2,max:.4,step:.01},{key:"fuelStorageHours",label:"Fuel Storage",value:v,defaultValue:4===s?96:3===s?72:48,unit:"hours",min:24,max:168,step:12},{key:"monthlyTestHours",label:"Monthly Test",value:j,defaultValue:2,unit:"hours",min:1,max:8,step:.5},{key:"annualFullLoadTestHours",label:"Annual Full Load Test",value:k,defaultValue:4,unit:"hours",min:2,max:12,step:1}]}}var w1=e.i(51618);let w2=(0,X.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),w5=(0,X.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),w4=(0,X.default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),w3=(0,X.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),w6=(0,X.default)("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]),w8=(0,X.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w9=(0,X.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var w7=e.i(49455);let Ne=[{id:"kpis",label:"KPI Summary",icon:(0,F.jsx)(er,{className:"w-3.5 h-3.5"})},{id:"cost",label:"Cost Capitulation",icon:(0,F.jsx)(J,{className:"w-3.5 h-3.5"})},{id:"tco",label:"5-Year TCO Projection",icon:(0,F.jsx)(ee.TrendingUp,{className:"w-3.5 h-3.5"})},{id:"capex-shift",label:"CAPEX & Shift Summary",icon:(0,F.jsx)(w2,{className:"w-3.5 h-3.5"})},{id:"risk",label:"Risk Assessment",icon:(0,F.jsx)(eX,{className:"w-3.5 h-3.5"})},{id:"insights",label:"AI Insights",icon:(0,F.jsx)(eJ.Zap,{className:"w-3.5 h-3.5"})},{id:"maintStrategy",label:"Maintenance Strategy",icon:(0,F.jsx)(eU.Wrench,{className:"w-3.5 h-3.5"})},{id:"sensitivity",label:"Sensitivity Analysis",icon:(0,F.jsx)(er,{className:"w-3.5 h-3.5"})},{id:"sankey",label:"Cost Flow (Sankey)",icon:(0,F.jsx)(w4,{className:"w-3.5 h-3.5"})}];function Nt(){let e,t,a,r,n,s,i,l,{selectedCountry:o,inputs:c}=(0,$.useSimulationStore)(),{inputs:d}=(0,ew.useCapexStore)(),{scenarios:u}=(0,wM.useScenarioStore)(),[m,x]=(0,z.useState)(null),[h,p]=(0,z.useState)(2025),[f,b]=(0,z.useState)(null),[g,y]=(0,z.useState)(""),[v,j]=(0,z.useState)(""),[k,w]=(0,z.useState)(new Set(["kpis","cost","tco","capex-shift","risk","insights","maintStrategy","sensitivity","sankey"])),[N,C]=(0,z.useState)(""),[S,P]=(0,z.useState)(!1),[M,O]=(0,z.useState)({primaryColor:"#0891b2",secondaryColor:"#10b981",companyName:"DCMOC v2.0",logoBase64:""}),E=async e=>{if(A&&o){x(e),await new Promise(e=>setTimeout(e,800));try{let t={};if(k.has("sensitivity")){let e=document.getElementById("tornado-chart-container");if(e)try{t.tornado=(await (0,wP.default)(e,{scale:2,backgroundColor:null})).toDataURL("image/png")}catch(e){console.warn("Failed to capture tornado chart",e)}}if(k.has("sankey")){let e=document.getElementById("sankey-diagram-container");if(e)try{t.sankey=(await (0,wP.default)(e,{scale:2,backgroundColor:null})).toDataURL("image/png")}catch(e){console.warn("Failed to capture sankey chart",e)}}switch(e){case"detailed":case"simulation":let a={inputs:c,capex:A.capex,financial:{npv:A.financialNPV||15e6,irr:18.5,paybackPeriodYears:3.2,cashflows:A.fiveYearProjection.map((e,t)=>{let a=150*c.itLoad*12*Math.pow(1.02,t),r=a-e.totalAnnualCost;return{year:e.year,revenue:a,opex:e.totalAnnualCost,freeCashflow:r,cumulativeCashflow:r*(t+1)-A.capex.total}})},staffing:{results:A.allStaff},maintenance:{strategy:A.strategyData,sla:A.slaData,spares:A.sparesData},risk:{aggregation:A.riskData},insights:A.insights};await (0,wz.generateMasterReportPDF)(o,a,M,t);break;case"staffing":await (0,wq.generateStaffingPDF)(o,c.shiftModel,A.allStaff,V(2025,"12h"===c.shiftModel?"4on-4off":"3shift-8h"),A.insights,void 0,M);break;case"capex":await (0,wW.generateCapexPDF)(o,A.capex,"Generated via DCMOC v2.",d,M);break;case"maintenance":await (0,wB.generateMaintenancePDF)(o,A.strategyData,A.slaData,A.sparesData,A.schedule,void 0,N,M);break;case"country-intel":await (0,wz.generateCountryIntelPDF)(o,{taxResult:A.taxResult,disasterResult:A.disasterResult,gridResult:A.gridResult,talentResult:A.talentResult,itLoadKw:c.itLoad,totalCapex:A.capex.total,totalFTE:A.totalHeadcount,annualStaffCost:A.annualStaffCostForTalent},M);break;case"capacity-plan":await (0,wU.generateCapacityPlanPDF)(o,{capPlan:A.capPlan,phases:c.capacityPhases,itLoadKw:c.itLoad},M)}}catch(e){console.error(e),alert("Error generating PDF")}x(null)}},A=(0,z.useMemo)(()=>{if(!o)return null;let e="12h"===c.shiftModel?"4on4off":"continental-8h",t=B("shift-lead",c.headcount_ShiftLead,c.shiftModel,o,!0,e),a=B("engineer",c.headcount_Engineer,c.shiftModel,o,!0,e),r=B("technician",c.headcount_Technician,c.shiftModel,o,!1),n=B("supervisor",c.headcount_Admin,c.shiftModel,o,!1),s=B("janitor",c.headcount_Janitor,c.shiftModel,o,!1),i=[t,a,r,n,s],l=i.reduce((e,t)=>e+t.monthlyCost,0),u=i.reduce((e,t)=>e+t.headcount,0),m=(0,w_.calculateCapex)(d),x="liquid"===c.coolingType||"rdhx"===c.coolingType?"pumped":"air",p=1.5*c.itLoad,f=eS(c.itLoad,4===c.tierLevel?4:3,x,p,c.coolingTopology,c.powerRedundancy),b=eC(f),g=e_(f,b,4===c.tierLevel?4:3,o),y=eF(f,4===c.tierLevel?4:3,o),v=eW(f,4===c.tierLevel?4:3,o);o.risks;let j="reactive"===c.maintenanceStrategy?24:4,k=wH(c.tierLevel,void 0,j,o??void 0),w=12*l+(g.strategies.find(e=>e.id===c.maintenanceStrategy)?.totalAnnualCost||0),N=o?.economy?.taxRate??.3,C=wT(10),S=wI({totalCapex:m.total,annualOpex:w,revenuePerKwMonth:150,itLoadKw:c.itLoad,discountRate:.08,projectLifeYears:10,escalationRate:.03,opexEscalation:o?.economy?.inflationRate??.03,occupancyRamp:C,taxRate:N,depreciationYears:20}),P=(0,w$.generateExecutiveSummary)(o,{...c,projectLifeYears:10,discountRate:.08},m,S,{eng:a,tech:r},{strategy:g,sla:y}),M=(0,wF.generateStaffingNarrative)(o,{eng:a,tech:r},c.shiftModel),O=V(h,"12h"===c.shiftModel?"4on-4off":"3shift-8h"),E=U("engineer",c.headcount_Engineer,o),A=g.strategies.find(e=>e.id===c.maintenanceStrategy)?.totalAnnualCost||0,T=12*l+A+5e4+25e3,I=m.total,R=I/20,D=Array.from({length:6}).map((e,t)=>{let a=Math.pow(1.04,t),r=Math.pow(1.03,t);return{year:h+t,totalHeadcount:u,totalAnnualCost:12*l*a+A*r+75e3*r+R}}),L=D.reduce((e,t)=>e+t.totalAnnualCost,0),_=o.taxIncentives?wV({country:o,totalCapex:m.total,annualRevenue:150*c.itLoad*12,annualOpex:w,projectLifeYears:10,discountRate:.08,equipmentCapexShare:.65}):null,F=o.naturalDisaster?wG({country:o,totalCapex:m.total,itLoadKw:c.itLoad,annualRevenue:150*c.itLoad*12}):null,$=o.gridReliability?wY({country:o,itLoadKw:c.itLoad,tierLevel:c.tierLevel,coolingType:c.coolingType}):null,z=12*l,q=o.talentPool?wX({country:o,totalFTE:u,annualStaffCost:z}):null;return{allStaff:i,tlResults:t,engResults:a,techResults:r,supResults:n,janResults:s,totalMonthlyLabor:l,totalHeadcount:u,capex:m,assets:f,schedule:b,roster:O,riskData:k,insights:[{title:"Strong Financials",description:"Project NPV is positive with < 3 year payback.",category:"Financial",severity:"low",recommendation:"Proceed to design."},{title:"Staffing Risk",description:"Turnover in region is high. Recommend retention bonus.",category:"Operational",severity:"medium",recommendation:"Budget 5% for retention."}],shiftComparison:E,fiveYearProjection:D,annualConsumablesCost:25e3,annualVendorCost:5e4,annualOPEX:T,annualMaintCost:A,totalCAPEX:I,annualDepreciation:R,fiveYearTCO:L,annualTCO:T+A+R,dailyTasks:12,weeklyTasks:45,monthlyTasks:120,specialistTasks:5,patternId:e,strategyData:g,slaData:y,sparesData:v,execSummary:P,staffingNarrative:M,taxResult:_,disasterResult:F,gridResult:$,talentResult:q,capPlan:wJ({phases:c.capacityPhases,country:o,coolingType:c.coolingType,tierLevel:c.tierLevel,shiftModel:c.shiftModel,maintenanceModel:c.maintenanceModel,hybridRatio:c.hybridRatio}),annualStaffCostForTalent:z,fuelGenResult:w0({country:o,itLoadKw:c.itLoad,tierLevel:c.tierLevel,coolingType:c.coolingType,coolingTopology:c.coolingTopology,powerRedundancy:c.powerRedundancy})}},[o,c,d,h]);if(!o||!A)return(0,F.jsx)("div",{className:"p-10 text-center text-slate-400",children:"Loading Report Engine..."});let T=W[A.patternId];return(0,F.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[(0,F.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(w1.FileText,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),"Feasibility Report Builder"]}),(0,F.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Generate comprehensive PDF reports for stakeholders"})]}),(0,F.jsxs)("div",{className:"flex gap-3",children:[(0,F.jsxs)("button",{onClick:()=>P(!S),className:(0,eh.default)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors border",S?"bg-indigo-100 dark:bg-indigo-600/20 border-indigo-500 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"),children:[(0,F.jsx)(w3,{className:"w-4 h-4"}),S?"Hide Settings":"Branding & Settings"]}),(0,F.jsxs)("button",{onClick:()=>E("detailed"),disabled:!!m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-500 hover:to-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-cyan-900/20 transition-all disabled:opacity-50",children:["detailed"===m?(0,F.jsx)(eT,{className:"w-4 h-4 animate-spin"}):(0,F.jsx)(eA,{className:"w-4 h-4"}),"Generate Full Report"]})]})]}),S&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 grid grid-cols-1 md:grid-cols-3 gap-8 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(eX,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),"Branding Configuration"]}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Company Name"}),(0,F.jsx)("input",{type:"text",value:M.companyName,onChange:e=>O({...M,companyName:e.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950 border border-slate-300 dark:border-slate-700 rounded px-3 py-1.5 text-sm text-slate-900 dark:text-white focus:border-cyan-500 focus:outline-none"})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Primary Color"}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("input",{type:"color",value:M.primaryColor,onChange:e=>O({...M,primaryColor:e.target.value}),className:"h-8 w-8 bg-transparent border-0 cursor-pointer"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:M.primaryColor})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Company Logo"}),(0,F.jsxs)("label",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded cursor-pointer border border-slate-300 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300 transition-colors",children:[(0,F.jsx)(eA,{className:"w-3 h-3"}),M.logoBase64?"Change Logo":"Upload Logo",(0,F.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{O(t=>({...t,logoBase64:e.result}))},e.readAsDataURL(t)}},className:"hidden"})]})]})]})]})]}),(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(w8,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),"Report Sections"]}),(0,F.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Ne.map(e=>(0,F.jsxs)("button",{onClick:()=>{var t;return t=e.id,void w(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},className:(0,eh.default)("flex items-center gap-2 px-3 py-1.5 rounded text-xs font-medium transition-all text-left",k.has(e.id)?"bg-cyan-100 dark:bg-cyan-950/30 text-cyan-700 dark:text-cyan-300 border border-cyan-200 dark:border-cyan-800/50":"bg-slate-50 dark:bg-slate-950 text-slate-500 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-900"),children:[k.has(e.id)?(0,F.jsx)(eH,{className:"w-3 h-3"}):(0,F.jsx)("div",{className:"w-3 h-3 rounded-full border border-slate-400 dark:border-slate-600"}),e.label]},e.id))})]}),(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(w6,{className:"w-4 h-4 text-amber-500 dark:text-amber-400"}),"Analyst Notes"]}),(0,F.jsx)("textarea",{value:N,onChange:e=>C(e.target.value),placeholder:"Add custom executive commentary here...",className:"w-full h-32 bg-slate-50 dark:bg-slate-950 border border-slate-300 dark:border-slate-700 rounded-lg p-3 text-sm text-slate-900 dark:text-slate-300 focus:border-cyan-500 focus:outline-none resize-none"})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-950/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[(0,F.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"}),"Executive Summary"]}),(0,F.jsx)("span",{className:"text-xs text-slate-500",children:"Auto-generated based on simulation state"})]}),(0,F.jsx)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:A.execSummary.slice(0,4).map(e=>(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:e.title}),(0,F.jsx)("span",{className:(0,eh.default)("text-xs px-2 py-0.5 rounded-full font-medium","positive"===e.status?"bg-emerald-100 dark:bg-emerald-950 text-emerald-700 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-900":"negative"===e.status?"bg-rose-100 dark:bg-rose-950 text-rose-700 dark:text-rose-400 border border-rose-200 dark:border-rose-900":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700"),children:e.keyMetric})]}),(0,F.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:e.content})]},e.id))})]}),u.length>=2&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-950/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800",children:[(0,F.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-5 h-5 text-violet-500 dark:text-violet-400"}),"Scenario Comparison"]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Select two saved scenarios to compare side-by-side"})]}),(0,F.jsxs)("div",{className:"p-6",children:[(0,F.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,F.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,F.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-medium",children:"Scenario A"}),(0,F.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full bg-slate-50 dark:bg-slate-950 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-900 dark:text-white focus:border-cyan-500 focus:outline-none",children:[(0,F.jsx)("option",{value:"",children:"Select scenario..."}),u.map(e=>(0,F.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,F.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,F.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-medium",children:"Scenario B"}),(0,F.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full bg-slate-50 dark:bg-slate-950 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-900 dark:text-white focus:border-cyan-500 focus:outline-none",children:[(0,F.jsx)("option",{value:"",children:"Select scenario..."}),u.map(e=>(0,F.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(()=>{let e=u.find(e=>e.id===g),t=u.find(e=>e.id===v);if(!e||!t)return(0,F.jsx)("div",{className:"text-center text-sm text-slate-400 py-6",children:"Select two scenarios above to view comparison"});let a=t.summary.monthlyOpex-e.summary.monthlyOpex,r=t.summary.annualCapex-e.summary.annualCapex,n=t.summary.totalStaff-e.summary.totalStaff,s=t.summary.pue-e.summary.pue,i=[{label:"Monthly OPEX",a:eo(e.summary.monthlyOpex),b:eo(t.summary.monthlyOpex),delta:a,fmtDelta:eo(Math.abs(a))},{label:"Annual CAPEX",a:eo(e.summary.annualCapex),b:eo(t.summary.annualCapex),delta:r,fmtDelta:eo(Math.abs(r))},{label:"Total Staff",a:`${e.summary.totalStaff}`,b:`${t.summary.totalStaff}`,delta:n,fmtDelta:`${Math.abs(n)}`},{label:"PUE",a:e.summary.pue.toFixed(2),b:t.summary.pue.toFixed(2),delta:s,fmtDelta:Math.abs(s).toFixed(2)}];return(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"py-2 text-left text-xs text-slate-500 font-medium",children:"Metric"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-violet-600 dark:text-violet-400 font-medium",children:e.name}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-cyan-600 dark:text-cyan-400 font-medium",children:t.name}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Delta (B-A)"})]})}),(0,F.jsx)("tbody",{children:i.map((e,t)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800/50",children:[(0,F.jsx)("td",{className:"py-3 text-slate-700 dark:text-slate-300",children:e.label}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-600 dark:text-slate-400",children:e.a}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-600 dark:text-slate-400",children:e.b}),(0,F.jsx)("td",{className:"py-3 text-right font-mono",children:(0,F.jsxs)("span",{className:(0,eh.default)(e.delta>0?"text-red-500 dark:text-red-400":e.delta<0?"text-emerald-600 dark:text-emerald-400":"text-slate-500"),children:[e.delta>0?"+":e.delta<0?"-":"",e.fmtDelta]})})]},t))})]})})()]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,F.jsxs)("button",{onClick:()=>E("staffing"),disabled:!!m,className:"flex flex-col items-center justify-center gap-2 p-5 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 hover:border-cyan-500/50 hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-xl transition-all group shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-3 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-cyan-100 dark:group-hover:bg-cyan-950/50 text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-700 dark:group-hover:text-cyan-300 transition-colors",children:(0,F.jsx)(Y.Users,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:"Staffing Report"}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Headcount, Roster, Shifts"})]})]}),(0,F.jsxs)("button",{onClick:()=>E("capex"),disabled:!!m,className:"flex flex-col items-center justify-center gap-2 p-5 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 hover:border-emerald-500/50 hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-xl transition-all group shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-3 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-emerald-100 dark:group-hover:bg-emerald-950/50 text-emerald-600 dark:text-emerald-400 group-hover:text-emerald-700 dark:group-hover:text-emerald-300 transition-colors",children:(0,F.jsx)(w2,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:"CAPEX Report"}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Construction & Equipment"})]})]}),(0,F.jsxs)("button",{onClick:()=>E("maintenance"),disabled:!!m,className:"flex flex-col items-center justify-center gap-2 p-5 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 hover:border-amber-500/50 hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-xl transition-all group shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-3 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-amber-100 dark:group-hover:bg-amber-950/50 text-amber-600 dark:text-amber-400 group-hover:text-amber-700 dark:group-hover:text-amber-300 transition-colors",children:(0,F.jsx)(eU.Wrench,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:"Maintenance Plan"}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Strategy, SLA, Spares"})]})]}),(0,F.jsxs)("button",{onClick:()=>E("country-intel"),disabled:!!m,className:"flex flex-col items-center justify-center gap-2 p-5 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 hover:border-purple-500/50 hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-xl transition-all group shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-3 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-purple-100 dark:group-hover:bg-purple-950/50 text-purple-600 dark:text-purple-400 group-hover:text-purple-700 dark:group-hover:text-purple-300 transition-colors",children:(0,F.jsx)(w9,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:"Country Intel"}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Tax, Disaster, Grid, Talent"})]})]}),(0,F.jsxs)("button",{onClick:()=>E("capacity-plan"),disabled:!!m,className:"flex flex-col items-center justify-center gap-2 p-5 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 hover:border-indigo-500/50 hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-xl transition-all group shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"p-3 rounded-full bg-slate-100 dark:bg-slate-800 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-950/50 text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-700 dark:group-hover:text-indigo-300 transition-colors",children:(0,F.jsx)(w7.Layers,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-200",children:"Capacity Plan"}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Phases, Ramp, Finance"})]})]})]}),k.has("kpis")&&(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{label:"Total Headcount",value:`${A.totalHeadcount}`,sub:"FTE",icon:Y.Users,color:"text-cyan-600 dark:text-cyan-400"},{label:"Monthly OPEX",value:eo(A.totalMonthlyLabor),sub:"Labor + Staff",icon:J,color:"text-emerald-600 dark:text-emerald-400"},{label:"Annual TCO",value:eo(A.annualTCO),sub:"OPEX + Maint + Depr",icon:ee.TrendingUp,color:"text-amber-600 dark:text-amber-400"},{label:"5-Year TCO",value:eo(A.fiveYearTCO),sub:`${h}-${h+4}`,icon:er,color:"text-violet-600 dark:text-violet-400"},{label:"CAPEX $/kW",value:`$${A.capex.metrics?.perKw?.toLocaleString()||"0"}`,sub:`PUE ${A.capex.pue?.toFixed(2)||"N/A"}`,icon:eJ.Zap,color:"text-orange-600 dark:text-orange-400"},{label:"Availability",value:`${A.riskData?.availability?.toFixed(3)||"99.982"}%`,sub:`Tier ${c.tierLevel}`,icon:eX,color:"text-blue-600 dark:text-blue-400"}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-4 hover:border-slate-300 dark:hover:border-slate-700 transition-colors shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)(e.icon,{className:(0,eh.default)("w-4 h-4",e.color)}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:e.label})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.value}),(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:e.sub})]},t))}),k.has("cost")&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsxs)("button",{onClick:()=>b("cost"===f?null:"cost"),className:"w-full flex items-center justify-between px-6 py-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(J,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),"Annual Cost Capitulation"]}),(0,F.jsx)(ef,{className:(0,eh.default)("w-5 h-5 text-slate-400 transition-transform","cost"===f&&"rotate-180")})]}),("cost"===f||null===f)&&(0,F.jsx)("div",{className:"px-6 pb-6",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"py-2 text-left text-xs text-slate-500 font-medium",children:"Cost Category"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Monthly"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Annual"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"% of Total"})]})}),(0,F.jsxs)("tbody",{children:[[{cat:"Labor  Shift Staff",monthly:A.allStaff.filter(e=>e.schedule.teamsRequired>1).reduce((e,t)=>e+t.monthlyCost,0)},{cat:"Labor  Day Staff",monthly:A.allStaff.filter(e=>e.schedule.teamsRequired<=1).reduce((e,t)=>e+t.monthlyCost,0)},{cat:"Shift Allowances & OT",monthly:A.allStaff.reduce((e,t)=>e+t.breakdown.shiftAllowance+t.breakdown.overtime,0)},{cat:"Social Security / Benefits",monthly:A.allStaff.reduce((e,t)=>e+t.breakdown.socialSecurity,0)},{cat:"Maintenance Parts & Consumables",monthly:A.annualConsumablesCost/12},{cat:"Vendor / Specialist Services",monthly:A.annualVendorCost/12},{cat:"Fuel & Generator OPEX",monthly:A.fuelGenResult.cost.totalAnnualGenOpex/12},{cat:"CAPEX Depreciation (20yr)",monthly:A.annualDepreciation/12}].map((e,t)=>{let a=12*e.monthly,r=A.annualTCO>0?a/A.annualTCO*100:0;return(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/20",children:[(0,F.jsx)("td",{className:"py-3 text-slate-700 dark:text-slate-300",children:e.cat}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-600 dark:text-slate-400",children:ec(e.monthly)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-900 dark:text-white",children:ec(a)}),(0,F.jsx)("td",{className:"py-3 text-right",children:(0,F.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,F.jsx)("div",{className:"w-16 bg-slate-200 dark:bg-slate-800 rounded-full h-1.5",children:(0,F.jsx)("div",{className:"h-1.5 rounded-full bg-cyan-500",style:{width:`${Math.min(100,r)}%`}})}),(0,F.jsxs)("span",{className:"font-mono text-xs text-cyan-600 dark:text-cyan-400 w-10 text-right",children:[r.toFixed(1),"%"]})]})})]},t)}),(0,F.jsxs)("tr",{className:"bg-slate-50 dark:bg-slate-950/50 font-bold",children:[(0,F.jsx)("td",{className:"py-3 text-slate-900 dark:text-white",children:"TOTAL ANNUAL TCO"}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-cyan-600 dark:text-cyan-400",children:ec(A.annualTCO/12)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-cyan-600 dark:text-cyan-400",children:ec(A.annualTCO)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-cyan-600 dark:text-cyan-400",children:"100%"})]})]})]})})]}),k.has("tco")&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsxs)("button",{onClick:()=>b("tco"===f?null:"tco"),className:"w-full flex items-center justify-between px-6 py-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-5 h-5 text-amber-500 dark:text-amber-400"}),"5-Year Total Cost of Ownership"]}),(0,F.jsx)(ef,{className:(0,eh.default)("w-5 h-5 text-slate-400 transition-transform","tco"===f&&"rotate-180")})]}),("tco"===f||null===f)&&(0,F.jsx)("div",{className:"px-6 pb-6",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"py-2 text-left text-xs text-slate-500 font-medium",children:"Year"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Headcount"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Labor Cost"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Maintenance"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Depreciation"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Annual TCO"}),(0,F.jsx)("th",{className:"py-2 text-right text-xs text-slate-500 font-medium",children:"Cumulative"})]})}),(0,F.jsx)("tbody",{children:A.fiveYearProjection.map((e,t)=>{let a=A.annualMaintCost*Math.pow(1.03,t),r=e.totalAnnualCost+a+A.annualDepreciation,n=A.fiveYearProjection.slice(0,t+1).reduce((e,t)=>e+t.totalAnnualCost,0)+a*(t+1)+A.annualDepreciation*(t+1);return(0,F.jsxs)("tr",{className:(0,eh.default)("border-b border-slate-100 dark:border-slate-800/50",0===t&&"bg-cyan-50 dark:bg-cyan-950/20"),children:[(0,F.jsxs)("td",{className:"py-3 text-slate-900 dark:text-white font-medium",children:[e.year,0===t&&(0,F.jsx)("span",{className:"text-xs text-cyan-600 dark:text-cyan-400 ml-2",children:"Current"})]}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-600 dark:text-slate-300",children:e.totalHeadcount}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-600 dark:text-slate-300",children:ec(e.totalAnnualCost)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-500 dark:text-slate-400",children:ec(a)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-500 dark:text-slate-400",children:ec(A.annualDepreciation)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-slate-900 dark:text-white",children:ec(r)}),(0,F.jsx)("td",{className:"py-3 text-right font-mono text-amber-600 dark:text-amber-400",children:eo(n)})]},e.year)})})]})})]}),k.has("capex-shift")&&(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[(0,F.jsx)(w2,{className:"w-5 h-5 text-orange-500 dark:text-orange-400"}),"CAPEX Summary"]}),(0,F.jsxs)("div",{className:"space-y-3",children:[[{label:"Total CAPEX",value:eo(A.totalCAPEX),highlight:!0},{label:"Cost per kW",value:`$${A.capex.metrics?.perKw?.toLocaleString()||"N/A"}`},{label:"PUE",value:A.capex.pue?.toFixed(2)||"N/A"},{label:"Construction Timeline",value:`${A.capex.metrics?.timelineMonths||"N/A"} months`},{label:"Annual Depreciation",value:eo(A.annualDepreciation)}].map((e,t)=>(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-800/50",children:[(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.label}),(0,F.jsx)("span",{className:(0,eh.default)("font-mono text-sm",e.highlight?"text-slate-900 dark:text-white font-bold":"text-slate-600 dark:text-slate-300"),children:e.value})]},t)),(0,F.jsxs)("div",{className:"mt-4",children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 uppercase mb-2",children:"Top Cost Categories"}),Object.entries(A.capex.costs||{}).sort(([,e],[,t])=>t-e).slice(0,5).map(([e,t])=>{let a=A.totalCAPEX>0?t/A.totalCAPEX*100:0;return(0,F.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,F.jsx)("div",{className:"flex-1 text-xs text-slate-600 dark:text-slate-300 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),(0,F.jsx)("div",{className:"w-24 bg-slate-100 dark:bg-slate-800 rounded-full h-1.5",children:(0,F.jsx)("div",{className:"h-1.5 rounded-full bg-orange-500",style:{width:`${a}%`}})}),(0,F.jsx)("span",{className:"text-xs font-mono text-slate-500 dark:text-slate-400 w-14 text-right",children:eo(t)})]},e)})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[(0,F.jsx)(Z,{className:"w-5 h-5 text-violet-500 dark:text-violet-400"}),"Shift Model Analysis"]}),(0,F.jsx)("div",{className:"space-y-3",children:[{label:"Active Pattern",value:T.label},{label:"Shift Duration",value:`${T.shiftHours}h (${T.effectiveHours}h effective)`},{label:"Cycle",value:`${T.workDays} on / ${T.offDays} off (${T.cycleDays}-day cycle)`},{label:"Scheduled Hours/Week",value:`${T.avgWeeklyScheduled.toFixed(1)}h`},{label:"Effective Hours/Week",value:`${T.avgWeeklyEffective.toFixed(1)}h`,highlight:!0},{label:"Break per Shift",value:`${T.breakMinutes} min`},{label:"Teams Required",value:`${T.teamsRequired}`},{label:"Overtime",value:T.overtimeHours>0?`${T.overtimeHours}h/week`:" Zero Overtime"}].map((e,t)=>(0,F.jsxs)("div",{className:"flex justify-between items-center py-1.5 border-b border-slate-100 dark:border-slate-800/50",children:[(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.label}),(0,F.jsx)("span",{className:(0,eh.default)("text-sm font-mono",e.highlight?"text-cyan-600 dark:text-cyan-400 font-bold":"text-slate-600 dark:text-slate-300"),children:e.value})]},t))}),(0,F.jsxs)("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-950/50 rounded-lg border border-slate-200 dark:border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 uppercase mb-1",children:"Recommendation"}),(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:A.shiftComparison.recommendation})]})]})]}),k.has("risk")&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[(0,F.jsx)(eX,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),"Risk Assessment"]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-950/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Tier ",c.tierLevel]}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Redundancy Level"})]}),(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-950/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[A.riskData?.availability?.toFixed(3)||"99.982","%"]}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Expected Availability"})]}),(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-950/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("div",{className:"text-2xl font-bold text-amber-500 dark:text-amber-400",children:[A.riskData?.expectedDowntimeMinutes?.toFixed(0)||"9.5"," min"]}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Annual Downtime"})]}),(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-950/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A.schedule.length}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Maintenance Events/Year"})]})]})]}),k.has("maintStrategy")&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[(0,F.jsx)(eU.Wrench,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400"}),"Maintenance Strategy Overview"]}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:A.strategyData.strategies.map(e=>(0,F.jsxs)("div",{className:(0,eh.default)("bg-slate-50 dark:bg-slate-950/50 rounded-lg p-4 border transition-colors",e.id===A.strategyData.recommended?"border-emerald-500/30 dark:border-emerald-500/30 bg-emerald-50/50 dark:bg-emerald-950/10":"border-slate-200 dark:border-slate-800"),children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,F.jsx)("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.label}),e.id===A.strategyData.recommended&&(0,F.jsx)("span",{className:"text-[9px] bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 px-1.5 py-0.5 rounded-full font-bold",children:"REC"})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-y-1 text-xs",children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-500",children:"Annual Cost:"}),(0,F.jsx)("span",{className:"font-mono text-slate-900 dark:text-white text-right",children:eo(e.totalAnnualCost)}),(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-500",children:"5-Yr NPV:"}),(0,F.jsx)("span",{className:"font-mono text-slate-600 dark:text-slate-300 text-right",children:eo(e.fiveYearNPV)}),(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-500",children:"Reliability:"}),(0,F.jsxs)("span",{className:"font-mono text-slate-600 dark:text-slate-300 text-right",children:[e.reliabilityIndex,"/100"]})]})]},e.id))}),(0,F.jsx)("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800/30 rounded-lg p-3",children:(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:A.strategyData.recommendationReason})})]}),k.has("insights")&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800",children:(0,F.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"AI-Generated Insights & Recommendations"})}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:A.insights.map((e,t)=>(0,F.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-950/30 border border-slate-200 dark:border-slate-800/50 rounded-xl p-5 hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[(0,F.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,F.jsx)("div",{className:"px-2 py-1 rounded text-xs font-semibold uppercase tracking-wider bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400",children:e.category}),"high"===e.severity&&(0,F.jsx)(eM,{className:"w-5 h-5 text-red-500"}),"medium"===e.severity&&(0,F.jsx)(ee.TrendingUp,{className:"w-5 h-5 text-amber-500"}),"low"===e.severity&&(0,F.jsx)(eH,{className:"w-5 h-5 text-emerald-500"})]}),(0,F.jsx)("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-100 mb-2",children:e.title}),(0,F.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed mb-3",children:e.description}),(0,F.jsxs)("div",{className:"p-3 bg-white dark:bg-slate-950/50 rounded-lg border border-slate-200 dark:border-slate-800/50",children:[(0,F.jsx)("div",{className:"text-xs font-semibold text-cyan-600 dark:text-cyan-500 mb-1 uppercase",children:"Recommendation"}),(0,F.jsx)("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.recommendation})]})]},t))})]}),k.has("sensitivity")&&((e=o?((e,t=3e3,a=12e3,r=.2,n)=>{let s=wE(e,t,a,n),i=[];for(let l of[{key:"itLoad",label:"IT Load (kW)"},{key:"headcount_Engineer",label:"Engineers",minClamp:1},{key:"headcount_Technician",label:"Technicians",minClamp:1},{key:"headcount_ShiftLead",label:"Shift Leads",minClamp:1},{key:"contingency",label:"Contingency %",minClamp:0},{key:"designFee",label:"Design Fee %",minClamp:0},{key:"pmFee",label:"PM Fee %",minClamp:0},{key:"fuelHours",label:"Fuel Storage (hrs)",minClamp:12},{key:"hybridRatio",label:"In-house Ratio",minClamp:0},{key:"buildingSize",label:"Building Size (m)",minClamp:100}]){let o=e[l.key];if(null==o||0===o)continue;let c=Math.max(l.minClamp??0,o*(1-r)),d=o*(1+r),u={...e,[l.key]:c},m={...e,[l.key]:d},x=wE(u,t,a,n),h=wE(m,t,a,n);i.push({parameter:l.key,label:l.label,baseValue:o,lowValue:c,highValue:d,baseTCO:s,lowTCO:x,highTCO:h,deltaLow:(x-s)/s*100,deltaHigh:(h-s)/s*100,absoluteSpread:Math.abs(h-x)})}return i.sort((e,t)=>t.absoluteSpread-e.absoluteSpread)})({itLoad:c.itLoad,tierLevel:c.tierLevel,coolingType:c.coolingType,headcount_Engineer:c.headcount_Engineer,headcount_Technician:c.headcount_Technician,headcount_ShiftLead:c.headcount_ShiftLead,contingency:d.contingency,designFee:d.designFee,pmFee:d.pmFee,fuelHours:d.fuelHours,turnoverRate:c.turnoverRate,hybridRatio:c.hybridRatio,maintenanceModel:c.maintenanceModel,buildingSize:c.buildingSize},o.labor.baseSalary_Engineer,12e3,.2,o):[]).length>0?(0,F.jsx)("div",{id:"tornado-chart-container",className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:(0,F.jsx)(wR,{data:e})}):null),k.has("sankey")&&(t=o?(c.headcount_ShiftLead*o.labor.baseSalary_ShiftLead+c.headcount_Engineer*o.labor.baseSalary_Engineer+c.headcount_Technician*o.labor.baseSalary_Technician+c.headcount_Admin*o.labor.baseSalary_Admin+c.headcount_Janitor*o.labor.baseSalary_Janitor)*12:0,a=o?.economy?.electricityRate??.1,r=c.itLoad*(0,wO.getPUE)(c.coolingType)*8760*a,n=50*c.itLoad,i=[{id:"total",label:"Annual OPEX",value:t+r+n+(s=o?.compliance.annualComplianceCost||5e3),color:"#06b6d4",column:0},{id:"labor",label:"Labor",value:t,color:"#8b5cf6",column:1},{id:"energy",label:"Energy",value:r,color:"#f59e0b",column:1},{id:"maint",label:"Maintenance",value:n,color:"#10b981",column:1},{id:"compliance",label:"Compliance",value:s,color:"#ef4444",column:1},{id:"leads",label:"Shift Leads",value:(o?.labor.baseSalary_ShiftLead||0)*c.headcount_ShiftLead*12,color:"#a78bfa",column:2},{id:"engineers",label:"Engineers",value:(o?.labor.baseSalary_Engineer||0)*c.headcount_Engineer*12,color:"#a78bfa",column:2},{id:"techs",label:"Technicians",value:(o?.labor.baseSalary_Technician||0)*c.headcount_Technician*12,color:"#a78bfa",column:2},{id:"cooling_e",label:"Cooling Energy",value:.35*r,color:"#fbbf24",column:2},{id:"it_e",label:"IT Power",value:.65*r,color:"#fbbf24",column:2}],l=[{source:"total",target:"labor",value:t},{source:"total",target:"energy",value:r},{source:"total",target:"maint",value:n},{source:"total",target:"compliance",value:s},{source:"labor",target:"leads",value:(o?.labor.baseSalary_ShiftLead||0)*c.headcount_ShiftLead*12},{source:"labor",target:"engineers",value:(o?.labor.baseSalary_Engineer||0)*c.headcount_Engineer*12},{source:"labor",target:"techs",value:(o?.labor.baseSalary_Technician||0)*c.headcount_Technician*12},{source:"energy",target:"cooling_e",value:.35*r},{source:"energy",target:"it_e",value:.65*r}],(0,F.jsxs)("div",{id:"sankey-diagram-container",className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4",children:"Cost Flow Analysis  Sankey Diagram"}),(0,F.jsx)(wL,{data:{nodes:i,links:l}})]})),N.trim().length>0&&(0,F.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800/30 rounded-xl p-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider flex items-center gap-2 mb-3",children:[(0,F.jsx)(w6,{className:"w-4 h-4"}),"Analyst Notes"]}),(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:N})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(w5,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),"Export Reports"]}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{type:"simulation",label:"Full Simulation Report",desc:"OPEX, projections, insights",color:"from-cyan-600 to-blue-600"},{type:"staffing",label:"Staffing Analysis PDF",desc:"Roles, shifts, roster, 5yr projection",color:"from-violet-600 to-purple-600"},{type:"capex",label:"CAPEX Report PDF",desc:"Cost breakdown, timeline, PUE",color:"from-orange-600 to-red-600"},{type:"maintenance",label:"Maintenance Report PDF",desc:"Strategy, SLA, spares analysis",color:"from-emerald-600 to-teal-600"},{type:"country-intel",label:"Country Intelligence PDF",desc:"Tax, disaster, grid, talent index",color:"from-purple-600 to-indigo-600"},{type:"capacity-plan",label:"Capacity Planning PDF",desc:"Phased build, staffing ramp, finance",color:"from-indigo-600 to-blue-600"}].map(e=>(0,F.jsxs)("button",{onClick:()=>E(e.type),disabled:null!==m,className:(0,eh.default)("flex items-center gap-3 px-5 py-4 rounded-xl text-left transition-all",`bg-gradient-to-r ${e.color} hover:opacity-90`,"disabled:opacity-50 disabled:cursor-not-allowed text-white shadow-md"),children:[m===e.type?(0,F.jsx)(eT,{className:"w-5 h-5 animate-spin text-white"}):(0,F.jsx)(eA,{className:"w-5 h-5 text-white"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-white font-medium text-sm",children:e.label}),(0,F.jsx)("div",{className:"text-white/60 text-xs",children:e.desc})]})]},e.type))})]})]})}var Na=e.i(12933);let Nr=(0,X.default)("cloud-fog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]),Nn=(0,X.default)("earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ns=(0,X.default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ni=(0,X.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var Nl=e.i(11272);let No=(0,X.default)("fan",[["path",{d:"M10.827 16.379a6.082 6.082 0 0 1-8.618-7.002l5.412 1.45a6.082 6.082 0 0 1 7.002-8.618l-1.45 5.412a6.082 6.082 0 0 1 8.618 7.002l-5.412-1.45a6.082 6.082 0 0 1-7.002 8.618l1.45-5.412Z",key:"484a7f"}],["path",{d:"M12 12v.01",key:"u5ubse"}]]);function Nc({onComplete:e}){let{actions:t,inputs:a}=(0,$.useSimulationStore)(),{setInputs:r,runCalculation:n}=(0,ew.useCapexStore)(),[s,i]=(0,z.useState)("region"),l=e=>{t.setTierLevel(e),r({redundancy:4===e?"2n":3===e?"n1":"n"}),i("systems")},o=a=>{t.setInputs({maintenanceStrategy:a}),n(),e()};return(0,F.jsx)("div",{className:"fixed inset-0 z-50 bg-slate-950/90 backdrop-blur-sm flex items-center justify-center p-4",children:(0,F.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl max-w-3xl w-full flex overflow-hidden min-h-[500px]",children:[(0,F.jsxs)("div",{className:"w-1/3 bg-slate-950 p-6 border-r border-slate-800 hidden md:block",children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-white mb-8 flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-8 h-8 rounded bg-cyan-600 flex items-center justify-center",children:(0,F.jsx)(eU.Wrench,{className:"w-4 h-4 text-white"})}),"Setup"]}),(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsx)(Nu,{active:"region"===s,completed:"region"!==s,label:"Region & Location",icon:w9}),(0,F.jsx)(Nu,{active:"topology"===s,completed:"systems"===s||"strategy"===s||"complete"===s,label:"Reliability Tier",icon:Ns}),(0,F.jsx)(Nu,{active:"systems"===s,completed:"strategy"===s||"complete"===s,label:"Technical Systems",icon:eJ.Zap}),(0,F.jsx)(Nu,{active:"strategy"===s,completed:"complete"===s,label:"Maint. Strategy",icon:eU.Wrench})]})]}),(0,F.jsxs)("div",{className:"flex-1 p-8 overflow-y-auto",children:["region"===s&&(0,F.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[(0,F.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Select Region"}),(0,F.jsx)("p",{className:"text-slate-400 mb-6",children:"Where is this facility located? This determines labor laws, climate data, and cost baselines."}),(0,F.jsx)("div",{className:"grid grid-cols-1 gap-3",children:["APAC","AMER","EMEA"].map(e=>(0,F.jsxs)("button",{onClick:()=>{let a;return a="ID",void("APAC"===e&&(a="ID"),"AMER"===e&&(a="US"),"EMEA"===e&&(a="US"),t.selectCountry(a),r({location:"AMER"===e?"usa":"APAC"===e?"sea":"europe"}),i("topology"))},className:"flex items-center justify-between p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:border-cyan-500 transition-all group text-left",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"font-bold text-white",children:e}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"APAC"===e?"Asia Pacific (Indonesia, Singapore...)":"AMER"===e?"Americas (USA, Brazil...)":"Europe, Middle East, Africa"})]}),(0,F.jsx)(Ni,{className:"w-5 h-5 text-slate-600 group-hover:text-cyan-400"})]},e))})]}),"topology"===s&&(0,F.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[(0,F.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Reliability Tier"}),(0,F.jsx)("p",{className:"text-slate-400 mb-6",children:"Define the criticality level. This sets the baseline for redundancy and risk."}),(0,F.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,F.jsx)(Nm,{tier:2,label:"Tier II / Rated-2",desc:"Redundant Components (N+1). Single Path. ~99.7% Availability.",onClick:()=>l(2)}),(0,F.jsx)(Nm,{tier:3,label:"Tier III / Rated-3",desc:"Concurrent Maintainability. Dual Path. ~99.98% Availability.",onClick:()=>l(3)}),(0,F.jsx)(Nm,{tier:4,label:"Tier IV / Rated-4",desc:"Fault Tolerant. 2N+1. ~99.99% Availability.",onClick:()=>l(4)})]})]}),"systems"===s&&(0,F.jsx)(Nd,{onSelect:(e,a)=>{t.setInputs({coolingTopology:e,powerRedundancy:a}),r({coolingType:"perimeter"===e?"air":"in-row"===e?"inrow":"liquid",redundancy:"2N+1"===a?"2n1":"2N"===a?"2n":"n1"}),i("strategy")},tier:a.tierLevel}),"strategy"===s&&(0,F.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[(0,F.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Maintenance Strategy"}),(0,F.jsx)("p",{className:"text-slate-400 mb-6",children:"How aggressively do you maintain the facility?"}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("button",{onClick:()=>o("reactive"),className:"w-full p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:border-red-500 transition-all text-left",children:[(0,F.jsx)("div",{className:"font-bold text-white",children:"Statutory / Reactive"}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Min. compliance only. Lowest Cost. Higher Risk."})]}),(0,F.jsxs)("button",{onClick:()=>o("planned"),className:"w-full p-4 rounded-xl border border-cyan-500 bg-cyan-950/20 transition-all text-left ring-1 ring-cyan-500",children:[(0,F.jsx)("div",{className:"font-bold text-white",children:"Standard / Planned"}),(0,F.jsx)("div",{className:"text-xs text-cyan-200",children:"Industry Best Practice (SFG20). Balanced Risk/Cost."})]}),(0,F.jsxs)("button",{onClick:()=>o("predictive"),className:"w-full p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:border-purple-500 transition-all text-left",children:[(0,F.jsx)("div",{className:"font-bold text-white",children:"Ultimate / Predictive"}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:"Vendor Premium Support. Zero Downtime Goal. Highest Cost."})]})]})]})]})]})})}function Nd({onSelect:e,tier:t}){let[a,r]=(0,z.useState)("perimeter"),[n,s]=(0,z.useState)(4===t?"2N+1":3===t?"2N":"N+1");return(0,F.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[(0,F.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Technical Systems"}),(0,F.jsx)("p",{className:"text-slate-400 mb-6",children:"Configure specific topology choices."}),(0,F.jsxs)("div",{className:"mb-6",children:[(0,F.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase mb-3 block",children:"Cooling Topology"}),(0,F.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["perimeter","in-row","dlc"].map(e=>(0,F.jsxs)("button",{onClick:()=>r(e),className:(0,eh.default)("flex flex-col items-center p-3 rounded-lg border transition-all",a===e?"bg-cyan-950/50 border-cyan-500 text-cyan-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-500"),children:[(0,F.jsx)(No,{className:"w-5 h-5 mb-2"}),(0,F.jsx)("span",{className:"text-xs font-bold capitalize",children:"dlc"===e?"DLC":e.replace("-"," ")})]},e))})]}),(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase mb-3 block",children:"Power Redundancy"}),(0,F.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["N+1","2N","2N+1"].map(e=>(0,F.jsxs)("button",{onClick:()=>s(e),className:(0,eh.default)("flex flex-col items-center p-3 rounded-lg border transition-all",n===e?"bg-cyan-950/50 border-cyan-500 text-cyan-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-500"),children:[(0,F.jsx)(eJ.Zap,{className:"w-5 h-5 mb-2"}),(0,F.jsx)("span",{className:"text-xs font-bold",children:e})]},e))})]}),(0,F.jsxs)("button",{onClick:()=>e(a,n),className:"w-full py-4 rounded-xl bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold shadow-lg shadow-cyan-900/50 flex items-center justify-center gap-2",children:["Confirm Systems ",(0,F.jsx)(Ni,{className:"w-5 h-5"})]})]})}function Nu({active:e,completed:t,label:a,icon:r}){return(0,F.jsxs)("div",{className:(0,eh.default)("flex items-center gap-3",e?"text-cyan-400":t?"text-emerald-500":"text-slate-500"),children:[(0,F.jsx)("div",{className:(0,eh.default)("w-8 h-8 rounded-full flex items-center justify-center border",e?"border-cyan-400 bg-cyan-950/50":t?"border-emerald-500 bg-emerald-950/50":"border-slate-700 bg-slate-900"),children:t?(0,F.jsx)(Nl.Check,{className:"w-4 h-4"}):(0,F.jsx)(r,{className:"w-4 h-4"})}),(0,F.jsx)("span",{className:"text-sm font-medium",children:a})]})}function Nm({tier:e,label:t,desc:a,onClick:r}){return(0,F.jsxs)("button",{onClick:r,className:"flex flex-col p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:border-cyan-500 transition-all group text-left",children:[(0,F.jsx)("div",{className:"font-bold text-white group-hover:text-cyan-400 transition-colors",children:t}),(0,F.jsx)("div",{className:"text-xs text-slate-500",children:a})]})}let Nx=Object.values(wQ.COUNTRIES).reduce((e,t)=>(e[t.region]||(e[t.region]=[]),e[t.region].push(t),e),{}),Nh={APAC:" Asia Pacific",EMEA:" Europe",AMER:" Americas",MENA:" Middle East",AFR:" Africa",LATAM:" Latin America"};function Np(){let t,a,r,n,s,i,l,o,c,d,u,{selectedCountry:m,inputs:x,actions:h,isLoading:p}=(0,$.useSimulationStore)(),f=H(),[b,g]=(0,z.useState)("standard"),[y,v]=(0,z.useState)(x.aqiOverride??50),[j,k]=(0,z.useState)(x.turnoverRate??.09),[w,N]=(0,z.useState)(!1),[C,S]=(0,z.useState)(2025),[P,M]=(0,z.useState)(m?.region||"APAC");(0,z.useEffect)(()=>{h.setLoading(!0);let e=setTimeout(()=>{h.setLoading(!1)},800);return()=>clearTimeout(e)},[x.shiftModel,C]),(0,z.useEffect)(()=>{let e=setTimeout(()=>{h.setInputs({aqiOverride:y,turnoverRate:j})},500);return()=>clearTimeout(e)},[y,j]),(0,z.useEffect)(()=>{m&&m.region!==P&&M(m.region)},[m?.id]);let O=(0,z.useMemo)(()=>{if(!m)return null;let e=Math.max(0,C-2025),t=m.economy?.inflationRate??.03,a=Math.pow(1+(m.economy?.laborEscalation??.04),e),r=Math.pow(1+t,e),n="vendor"===x.maintenanceModel?"vendor":"hybrid"===x.maintenanceModel?"hybrid":"in-house",s=B("engineer",f.headcount_Engineer??4,x.shiftModel,m,!0,void 0,void 0,n,x.hybridRatio??.5),i=G("Duty Engineer",m.labor.baseSalary_Engineer,m,j,s.headcount),l=i.totalAnnualCost/12*a,o=eN.ASSETS.find(e=>"pac-unit"===e.id),c=o?.consumables?.find(e=>e.name.includes("Filter")),d=c?.baseLifeMonths??3,u=(0,eD.calculateEnvironmentalDegradation)("pac-unit","G4 Pre-Filters",d,m,y),h=u&&"number"==typeof u.adjustedLifeMonths&&!isNaN(u.adjustedLifeMonths)?Math.max(.5,u.adjustedLifeMonths):3,p=500*(3/h-1),b=(2500+(Number.isFinite(p)?p:0))*r,g=Math.max(0,12/h-4),v=0;y>100&&(v=Math.pow((y-100)/200,1.2),v=(y-100)*.0015,y>250&&(v+=.1));let k=wH(x.tierLevel,void 0,4,m??void 0),w=s.monthlyCost,N=1;if("vendor"===x.maintenanceModel&&(N=1.35),"hybrid"===x.maintenanceModel){let e=x.hybridRatio||.3;N=+e+(1-e)*1.3}let S=240*g/12*a+w*v*a,P=w*N*a+l+S,M=w*a;return{eng:s,coT:i,filterLife:u,risk:k,finalMonthlyStaffCost:P,aqiLaborPunishment:S,turnoverAmortizedMonthly:l,strategyMultiplier:N,partsCost:b,aqiConsumablePenalty:p,laborMultiplier:a,partsMultiplier:r,monthlyInternalCost:M,headcount:s.headcount,monthlyVendorCost:P-M-S-l,totalMonthlyConsumables:b,turnoverCost:l,aqiImpact:y/50,overtimeHours:s.metrics.overtimeHoursPerPerson,availability:k.availability,downtimeMinutes:k.expectedDowntimeMinutes,financialRisk:k.financialImpact}},[m,x.shiftModel,y,j,x.tierLevel,x.maintenanceModel,x.hybridRatio,C]);if(!m||!O)return null;let{eng:E,coT:A,filterLife:T,risk:I,finalMonthlyStaffCost:R,aqiLaborPunishment:D,turnoverAmortizedMonthly:L,strategyMultiplier:_,partsCost:q,aqiConsumablePenalty:W,laborMultiplier:U}=O;return(0,F.jsxs)(F.Fragment,{children:[w&&(0,F.jsx)(Nc,{onComplete:()=>N(!1)}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-[calc(100vh-140px)]",children:[(0,F.jsxs)("div",{className:"lg:col-span-4 bg-slate-100 dark:bg-slate-900/50 border-r border-slate-300 dark:border-slate-800 p-6 overflow-y-auto",children:[(0,F.jsxs)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6 flex items-center justify-between gap-2",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)(en.Activity,{className:"w-5 h-5 text-cyan-400"}),"Scenario Controls"]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsxs)("button",{onClick:async()=>{if(!O)return;let{generateSimulationPDF:t}=await e.A(28094),{generateSimulationNarrative:a}=await e.A(18433),r=a(m,y,O.risk,j);await t(m,C,{inputs:{...x,shiftModel:x.shiftModel,turnoverRate:j},results:O,insights:r})},className:"text-xs bg-cyan-100 dark:bg-cyan-900/50 text-cyan-700 dark:text-cyan-400 border border-cyan-300 dark:border-cyan-700 px-2 py-1 rounded hover:bg-cyan-200 dark:hover:bg-cyan-800 transition-colors flex items-center gap-1",children:[(0,F.jsx)(Y.Users,{className:"w-3 h-3"})," Export PDF"]}),(0,F.jsx)("button",{onClick:()=>N(!0),className:"text-xs bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-1 rounded hover:bg-slate-300 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white transition-colors",children:"Wizard"})]})]}),(0,F.jsxs)("div",{className:"mb-8 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[(0,F.jsx)(Nn,{className:"w-3 h-3"})," Region & Country",(0,F.jsx)(ei,{content:"Select datacenter location. Costs, regulations, and labor markets vary by country."})]}),(0,F.jsx)("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-700 rounded-md text-sm text-slate-900 dark:text-white bg-white dark:bg-slate-800 focus:ring-2 focus:ring-cyan-500 outline-none",value:P,onChange:e=>{let t=e.target.value;M(t);let a=Nx[t];a&&a.length>0&&h.selectCountry(a[0].id)},children:Object.keys(Nx).sort().map(e=>(0,F.jsx)("option",{value:e,children:Nh[e]||e},e))}),(0,F.jsx)("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-700 rounded-md text-sm text-slate-900 dark:text-white bg-white dark:bg-slate-800 focus:ring-2 focus:ring-cyan-500 outline-none",value:m?.id||"",onChange:e=>h.selectCountry(e.target.value),children:(Nx[P]||[]).map(e=>(0,F.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))})]}),(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Simulation Year ",(0,F.jsx)(ei,{content:`Projects costs into the future using inflation and yearly benefit escalation constants. Multiplier: x${U.toFixed(2)}`})]}),(0,F.jsx)("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-700 rounded-md text-sm text-slate-900 dark:text-white bg-white dark:bg-slate-800 focus:ring-2 focus:ring-cyan-500 outline-none",value:C,onChange:e=>S(Number(e.target.value)),children:Array.from({length:11},(e,t)=>2025+t).map(e=>(0,F.jsx)("option",{value:e,children:e},e))})]}),(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Shift Model",(0,F.jsx)(ei,{content:"Determines the shift pattern. 8-Hour (3 Shift) uses 3 teams rotating every 8 hours. 12-Hour (2 Shift) uses 2 teams rotating every 12 hours (Day/Night)."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("button",{onClick:()=>h.setInputs({shiftModel:"8h"}),className:(0,eh.default)("p-3 rounded-lg border text-sm font-medium transition-all","8h"===x.shiftModel?"bg-cyan-50 dark:bg-cyan-950/50 border-cyan-500 text-cyan-700 dark:text-cyan-200":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-400 dark:hover:border-slate-600"),children:["8-Hour (3 Shift) ",(0,F.jsx)(ei,{content:"8-Hour Continental: 3 shifts  8 hours, 4 teams. Provides 24/7 coverage with standard shift lengths."})]}),(0,F.jsxs)("button",{onClick:()=>h.setInputs({shiftModel:"12h"}),className:(0,eh.default)("p-3 rounded-lg border text-sm font-medium transition-all","12h"===x.shiftModel?"bg-cyan-50 dark:bg-cyan-950/50 border-cyan-500 text-cyan-700 dark:text-cyan-200":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-400 dark:hover:border-slate-600"),children:["12-Hour (2 Shift) ",(0,F.jsx)(ei,{content:"12-Hour 4on/3off: 2 shifts  12 hours, 2 teams. Fewer handovers but longer shifts  may require regulatory permits."})]})]}),"12h"===x.shiftModel&&"ID"===m.id&&(0,F.jsxs)("div",{className:"mt-2 text-xs text-amber-400 flex items-start gap-1 p-2 bg-amber-950/30 rounded",children:[(0,F.jsx)(eM,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),(0,F.jsx)("span",{children:'PP 35/2021 Warning: Requires "Long Shift Permit" or pays 14h OT/week.'})]})]}),(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Environmental Stress (AQI)",(0,F.jsx)(ei,{content:"Air Quality Index (AQI). Higher values indicate worse air quality. IMPACT: Increases Filter Replacement Frequency AND Labor Cost (more maintenance visits required)."})]}),(0,F.jsx)("input",{type:"range",min:"10",max:"300",value:y,onChange:e=>v(Number(e.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),(0,F.jsxs)("div",{className:"flex justify-between mt-2 text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 flex items-center",children:["Low (10) ",(0,F.jsx)(ei,{content:"AQI 0-50: Good air quality, minimal equipment impact. AQI 150-300: Hazardous  accelerated filter degradation, increased cooling load, potential facility shutdown."})]}),(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-bold",children:[y," AQI"]}),(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 flex items-center",children:["Hazardous (300) ",(0,F.jsx)(ei,{content:"AQI 0-50: Good air quality, minimal equipment impact. AQI 150-300: Hazardous  accelerated filter degradation, increased cooling load, potential facility shutdown."})]})]}),D>0&&(0,F.jsxs)("div",{className:"mt-2 text-xs text-red-400 bg-red-950/20 p-2 rounded flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-3 h-3"}),"+",ec(D)," (Hazard Pay & Freq. Maint.)"]})]}),(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-700 dark:text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Annual Turnover Rate",(0,F.jsx)(ei,{content:"Percentage of staff leaving per year. IMPACT: Adds hidden recruitment and training costs directly to the Monthly Staff Cost."})]}),(0,F.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:j,onChange:e=>k(Number(e.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),(0,F.jsxs)("div",{className:"flex justify-between mt-2 text-sm items-center",children:[(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 flex items-center text-xs",children:["0% ",(0,F.jsx)(ei,{content:"Annual employee turnover rate. Industry average 10-15%. Higher turnover increases recruitment costs and reduces operational continuity."})]}),(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-bold",children:[(100*j).toFixed(0),"%"]}),(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"50%"})]}),(0,F.jsxs)("div",{className:"mt-2 text-xs text-amber-400 bg-amber-950/20 p-2 rounded flex items-center gap-2",children:[(0,F.jsx)(J,{className:"w-3 h-3"}),"+",ec(L)," Monthly Hidden Loss"]})]})]}),(0,F.jsxs)("div",{className:"lg:col-span-8 p-8 overflow-y-auto",children:[(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col justify-between",children:[(0,F.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider flex items-center gap-1",children:["Internal Staff Cost",(0,F.jsx)(ei,{content:"Monthly base salary + allowances for FTEs"})]})}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white truncate",title:ec(O.monthlyInternalCost),children:eo(O.monthlyInternalCost)}),(0,F.jsxs)("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mt-1 flex items-center gap-1",children:[(0,F.jsx)(Y.Users,{className:"w-3 h-3"}),O.headcount," Internal FTEs"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col justify-between",children:[(0,F.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider flex items-center gap-1",children:["Vendor Labor Cost",(0,F.jsx)(ei,{content:"Outsourced specialist services (Security, Cleaning, MEP)"})]})}),(0,F.jsx)("div",{className:"text-2xl font-bold text-amber-500 dark:text-amber-400 truncate",title:ec(O.monthlyVendorCost),children:eo(O.monthlyVendorCost)}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:"Includes 35% Vendor Premium"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col justify-between",children:[(0,F.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider flex items-center gap-1",children:["Parts & Consumables",(0,F.jsx)(ei,{content:"Monthly maintenance consumables based on AQI impact"})]})}),(0,F.jsx)("div",{className:"text-2xl font-bold text-cyan-500 dark:text-cyan-400 truncate",title:ec(O.totalMonthlyConsumables),children:eo(O.totalMonthlyConsumables)}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 mt-1",children:["AQI Impact: ",O.aqiImpact>1?"High":"None"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none flex flex-col justify-between",children:[(0,F.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider flex items-center gap-1",children:["Hidden Turnover Loss",(0,F.jsx)(ei,{content:"Recruitment + Training + Lost Productivity"})]})}),(0,F.jsx)("div",{className:"text-2xl font-bold text-rose-500 dark:text-rose-400 truncate",title:ec(O.turnoverCost),children:eo(O.turnoverCost)}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 mt-1",children:["Rate: ",(100*j).toFixed(0),"% / Year"]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-700/50 rounded-xl p-6 border border-slate-300 dark:border-slate-600 mb-6",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 flex items-center gap-1",children:["Overtime & Regulatory Analysis (PP 35/2021) ",(0,F.jsx)(ei,{content:"Overtime cost calculation based on local labor law multipliers. First 1-2 hours typically at 1.5x, subsequent hours at 2x base rate."})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Weekly OT Hours/Person ",(0,F.jsx)(ei,{content:"Maximum overtime hours per person per week. Subject to local labor law limits (e.g., Indonesia max 14hrs/week, EU max 8hrs/week)."})]}),(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-mono font-bold",children:[O.overtimeHours.toFixed(1)," hrs"]})]}),(0,F.jsx)("div",{className:"h-2 bg-slate-300 dark:bg-slate-600 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full transition-all duration-500",O.overtimeHours>12?"bg-red-500":"bg-emerald-500"),style:{width:`${Math.min(100,O.overtimeHours/18*100)}%`}})}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 mt-2 leading-tight",children:["Legal limit for 12h shifts without permit is strict. ",">","18h/week incurs 4.0x multiplier penalty."]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs border-b border-slate-300 dark:border-slate-600/50 pb-1",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Base Salary ",(0,F.jsx)(ei,{content:"Overtime cost calculation based on local labor law multipliers. First 1-2 hours typically at 1.5x, subsequent hours at 2x base rate."})]}),(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-mono",children:["$","20000.00"]})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs font-bold text-amber-600 dark:text-amber-400",children:[(0,F.jsxs)("span",{className:"flex items-center",children:["Overtime Penalty ",(0,F.jsx)(ei,{content:"Overtime cost calculation based on local labor law multipliers. First 1-2 hours typically at 1.5x, subsequent hours at 2x base rate."})]}),(0,F.jsxs)("span",{className:"font-mono",children:["$","1126.30"]})]})]})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,F.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-700/50 rounded-xl p-6 border border-slate-300 dark:border-slate-600",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,F.jsx)(Nr,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}),(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 flex items-center gap-1",children:["Environmental Physics (Power Law) ",(0,F.jsx)(ei,{content:"Mathematical model of environmental impact on equipment: temperature derating, humidity corrosion factor, and particulate accumulation rates."})]})]}),(0,F.jsxs)("div",{className:"flex items-start gap-4",children:[(0,F.jsxs)("div",{className:"flex-1 bg-slate-300 dark:bg-slate-800/50 p-3 rounded-lg font-mono text-[10px] text-emerald-700 dark:text-emerald-400 border border-slate-400 dark:border-slate-700/50",children:[(0,F.jsx)("div",{className:"text-slate-500 dark:text-slate-500 mb-1",children:"Mathematical Formula"}),"Life_Actual = Life_Base  (AQI_Base / AQI_Actual)^1.5"]}),(0,F.jsxs)("div",{className:"w-24 text-right",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 font-bold mb-1",children:"Impact"}),(0,F.jsx)("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:y>150?"Severe Degradation":y>100?"Accelerated Wear":"Standard operation"})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-700/50 rounded-xl p-6 border border-slate-300 dark:border-slate-600",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,F.jsx)(Na.ShieldAlert,{className:"w-4 h-4 text-rose-500 dark:text-rose-400"}),(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:["Risk & Downtime Exposure (Tier ",x.tierLevel,")"]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 flex items-center gap-1",children:["Expected Availability ",(0,F.jsx)(ei,{content:"Percentage of time the facility is operational. Determined by tier level and redundancy design."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[O.availability.toFixed(3),"%"]}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500",children:["~",O.downtimeMinutes," mins downtime / year"]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 flex items-center gap-1",children:["Financial Exposure ",(0,F.jsx)(ei,{content:"Maximum estimated financial loss from downtime events over a year, calculated at $5K per minute."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-rose-500 dark:text-rose-400 truncate",title:ec(O.financialRisk),children:eo(O.financialRisk)}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"@ $5k/min business impact"})]})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-700/50 rounded-xl p-6 border border-slate-300 dark:border-slate-600 mb-6",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-orange-500 dark:text-amber-400"}),(0,F.jsx)("h3",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:"Power & Cooling Analytics"})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:(t=(0,wO.getPUE)(x.coolingType),a=Math.round(x.itLoad*(t-1)),r=Math.round((t-1)*100),s=Math.round(8760*(n=Math.round(x.itLoad*t))/1e3),l=Math.round(8760*n*(i=m?.economy?.electricityRate??.1)),o=t<=1.15?"Excellent":t<=1.25?"Very Good":t<=1.35?"Good":"Average",(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"bg-slate-300 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-400 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[9px] text-slate-600 dark:text-slate-400 font-bold uppercase mb-1 flex items-center gap-1",children:["PUE ",(0,F.jsx)(ei,{content:"Power Usage Effectiveness  ratio of total facility power to IT equipment power. Lower is better (1.0 = perfect)."})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-orange-600 dark:text-amber-400",children:t.toFixed(2)}),(0,F.jsx)("div",{className:"text-[9px] text-slate-500",children:o})]}),(0,F.jsxs)("div",{className:"bg-slate-300 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-400 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[9px] text-slate-600 dark:text-slate-400 font-bold uppercase mb-1 flex items-center gap-1",children:["Cooling Load ",(0,F.jsx)(ei,{content:"Power consumed by cooling systems in kW. Derived from IT load multiplied by (PUE - 1)."})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-cyan-600 dark:text-cyan-400",children:eu(a,"kW")}),(0,F.jsxs)("div",{className:"text-[9px] text-slate-500",children:[r,"% overhead"]})]}),(0,F.jsxs)("div",{className:"bg-slate-300 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-400 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[9px] text-slate-600 dark:text-slate-400 font-bold uppercase mb-1 flex items-center gap-1",children:["Total Facility ",(0,F.jsx)(ei,{content:"Total facility power consumption including IT load, cooling, lighting, UPS losses, and mechanical systems. Total = IT Load  PUE."})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:eu(n,"kW")}),(0,F.jsx)("div",{className:"text-[9px] text-slate-500",children:"IT + Cooling + Losses"})]}),(0,F.jsxs)("div",{className:"bg-slate-300 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-400 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[9px] text-slate-600 dark:text-slate-400 font-bold uppercase mb-1 flex items-center gap-1",children:["Annual Energy ",(0,F.jsx)(ei,{content:"Total facility energy consumption over a year in megawatt-hours."})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-violet-600 dark:text-purple-400 truncate",children:eu(s,"MWh")}),(0,F.jsxs)("div",{className:"text-[9px] text-slate-500",children:[eo(l)," @ $",i.toFixed(2)]})]})]}))}),(0,F.jsxs)("div",{className:"mt-4",children:[(0,F.jsx)("div",{className:"text-[9px] text-slate-500 font-bold uppercase mb-2",children:"Power Chain Efficiency"}),(0,F.jsxs)("div",{className:"flex items-center text-[10px] font-mono gap-1",children:[(0,F.jsx)("div",{className:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 px-2 py-1 rounded w-24 text-center",children:"Grid  98%"}),(0,F.jsx)("div",{className:"text-slate-400",children:""}),(0,F.jsx)("div",{className:"bg-blue-500/20 text-blue-700 dark:text-blue-400 px-2 py-1 rounded w-24 text-center",children:"UPS  94%"}),(0,F.jsx)("div",{className:"text-slate-400",children:""}),(0,F.jsx)("div",{className:"bg-purple-500/20 text-purple-700 dark:text-purple-400 px-2 py-1 rounded w-24 text-center",children:"PDU  97%"}),(0,F.jsx)("div",{className:"text-slate-400",children:""}),(0,F.jsx)("div",{className:"bg-cyan-500/20 text-cyan-700 dark:text-cyan-400 px-2 py-1 rounded w-24 text-center",children:"IT Load "})]})]})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-6 mt-6",children:[(0,F.jsxs)("h3",{className:"text-md font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(Nr,{className:"w-4 h-4 text-emerald-500"}),"Environmental Impact"]}),(0,F.jsx)("div",{className:"grid grid-cols-3 gap-4",children:(c=m.environment?.gridCarbonIntensity??.5,d=(0,wO.getPUE)(x.coolingType),u=x.itLoad*d*8760/1e3*c,(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 p-3 rounded-lg text-center border border-slate-200 dark:border-slate-800/50",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["Grid Carbon ",(0,F.jsx)(ei,{content:"Carbon intensity of the local electricity grid in kgCO2 per kWh consumed."})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-amber-500 dark:text-amber-400",children:c.toFixed(2)}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"kgCO/kWh"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 p-3 rounded-lg text-center border border-slate-200 dark:border-slate-800/50",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["Annual CO ",(0,F.jsx)(ei,{content:"Total Scope 2 carbon emissions from grid electricity consumption."})]}),(0,F.jsxs)("div",{className:"text-xl font-bold text-orange-500 dark:text-orange-400",children:[(u/1e3).toFixed(1),"k"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"tonnes/year"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-black/30 p-3 rounded-lg text-center border border-slate-200 dark:border-slate-800/50",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center gap-1",children:["WUE (est.) ",(0,F.jsx)(ei,{content:"Water Usage Effectiveness  liters of water consumed per kWh of IT energy. Lower is better."})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:(m.environment?.baselineAQI??50)>80?"1.8":"1.2"}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"L/kWh"})]})]}))})]})]})}var Nf=e.i(22771),Nb=e.i(10995);let Ng=(0,X.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var Ny=e.i(15575);let Nv=(0,X.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Nj=(0,X.default)("milestone",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]]),Nk=({phases:e,subPhases:t,totalMonths:a})=>{let[r,n]=(0,z.useState)(new Set(e.map(e=>e.name))),s=Array.from({length:a+1},(e,t)=>t),i=[{month:e.find(e=>"Design & Engineering"===e.name)?.end??0,label:"Design Complete",color:"#10b981"},{month:e.find(e=>"Permitting"===e.name)?.end??0,label:"Permits Secured",color:"#f59e0b"},{month:e.find(e=>"Civil Construction"===e.name)?.end??0,label:"Building Ready",color:"#3b82f6"},{month:e.find(e=>"MEP Installation"===e.name)?.end??0,label:"MEP Complete",color:"#8b5cf6"},{month:a,label:"Go-Live",color:"#ec4899"}];return(0,F.jsxs)("div",{className:"w-full",children:[(0,F.jsxs)("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-1",children:[(0,F.jsx)("div",{className:"w-44 min-w-[176px] shrink-0"}),(0,F.jsx)("div",{className:"flex-1 flex relative",children:s.map(e=>(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 text-center font-mono",style:{width:`${100/(a+1)}%`},children:["M",e]},e))})]}),(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsx)("div",{className:"absolute inset-0 flex pointer-events-none",style:{left:"176px",right:0},children:s.map(e=>(0,F.jsx)("div",{className:"border-l border-slate-100 dark:border-slate-800 h-full",style:{width:`${100/(a+1)}%`}},e))}),e.map(e=>{let s=r.has(e.name),i=t.filter(t=>t.parent===e.name),l=e.end-e.start;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group",onClick:()=>{var t;return t=e.name,void n(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},children:[(0,F.jsxs)("div",{className:"w-44 min-w-[176px] shrink-0 flex items-center gap-1.5 py-1.5 px-2",children:[s?(0,F.jsx)(ef,{className:"w-3 h-3 text-slate-400"}):(0,F.jsx)(Nv,{className:"w-3 h-3 text-slate-400"}),(0,F.jsx)("div",{className:"w-2.5 h-2.5 rounded-sm shrink-0",style:{backgroundColor:e.color}}),(0,F.jsx)("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200 truncate",children:e.name})]}),(0,F.jsxs)("div",{className:"flex-1 relative h-7 flex items-center",children:[(0,F.jsx)("div",{className:"absolute h-5 rounded-md opacity-30",style:{left:`${e.start/a*100}%`,width:`${l/a*100}%`,backgroundColor:e.color}}),(0,F.jsx)("div",{className:"absolute h-5 rounded-md flex items-center justify-center",style:{left:`${e.start/a*100}%`,width:`${l/a*100}%`,backgroundColor:e.color,opacity:.85},children:(0,F.jsxs)("span",{className:"text-[10px] font-bold text-white drop-shadow-sm",children:[l,"mo"]})})]})]}),s&&i.map(e=>{let t=e.end-e.start;return(0,F.jsxs)("div",{className:"flex items-center hover:bg-slate-50/50 dark:hover:bg-slate-800/30",children:[(0,F.jsx)("div",{className:"w-44 min-w-[176px] shrink-0 py-1 pl-8 pr-2",children:(0,F.jsx)("span",{className:"text-[11px] text-slate-500 dark:text-slate-400 truncate block",children:e.name})}),(0,F.jsx)("div",{className:"flex-1 relative h-5 flex items-center",children:(0,F.jsx)("div",{className:"absolute h-3.5 rounded group/bar",style:{left:`${e.start/a*100}%`,width:`${Math.max(t/a*100,1.5)}%`,backgroundColor:e.color,opacity:.65},children:(0,F.jsxs)("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-slate-800 dark:bg-slate-700 text-white text-[9px] px-1.5 py-0.5 rounded opacity-0 group-hover/bar:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:["M",e.start,"M",e.end," (",t,"mo)"]})})})]},e.name)})]},e.name)}),(0,F.jsxs)("div",{className:"flex items-center border-t border-slate-200 dark:border-slate-700 mt-1 pt-1",children:[(0,F.jsx)("div",{className:"w-44 min-w-[176px] shrink-0 py-1 px-2",children:(0,F.jsx)("span",{className:"text-[10px] font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wide",children:"Milestones"})}),(0,F.jsx)("div",{className:"flex-1 relative h-6",children:i.map((e,t)=>(0,F.jsxs)("div",{className:"absolute top-0 flex flex-col items-center group/ms",style:{left:`${e.month/a*100}%`},children:[(0,F.jsx)(Nj,{className:"w-3 h-3",style:{color:e.color}}),(0,F.jsxs)("div",{className:"absolute top-5 bg-slate-800 dark:bg-slate-700 text-white text-[9px] px-1.5 py-0.5 rounded opacity-0 group-hover/ms:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:["M",e.month,": ",e.label]})]},t))})]})]}),(0,F.jsxs)("div",{className:"mt-3 flex items-center justify-between px-2 py-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold",children:"Total Duration"}),(0,F.jsxs)("div",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:[a," months"]})]}),(0,F.jsx)("div",{className:"flex gap-3 flex-wrap",children:e.map(e=>(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e.color}}),(0,F.jsx)("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:e.name})]},e.name))}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:["~",(a/12).toFixed(1)," yrs"]})]})]})},Nw=Object.values(wQ.COUNTRIES).reduce((e,t)=>(e[t.region]||(e[t.region]=[]),e[t.region].push(t),e),{}),NN={APAC:" Asia Pacific",EMEA:" Europe, Middle East & Africa",AMER:" Americas"},NC=()=>{let{inputs:t,results:a,setInputs:r,runCalculation:n,narrative:s}=(0,ew.useCapexStore)(),{selectedCountry:i,actions:l,inputs:o}=(0,$.useSimulationStore)(),[c,d]=(0,z.useState)(!1),[u,m]=(0,z.useState)(!1);(0,z.useEffect)(()=>{i&&r({location:i.id,country:i}),setTimeout(n,50)},[i]),(0,z.useEffect)(()=>{let e={};t.itLoad!==o.itLoad&&(e.itLoad=t.itLoad);let a={n:"N+1",n1:"N+1","2n":"2N","2n1":"2N+1"}[t.redundancy]??"2N";a!==o.powerRedundancy&&(e.powerRedundancy=a);let r={air:"air",inrow:"inrow",rdhx:"rdhx",liquid:"liquid"}[t.coolingType]??"air";r!==o.coolingType&&(e.coolingType=r),Object.keys(e).length>0&&l.setInputs(e)},[t.itLoad,t.redundancy,t.coolingType]);let x=(e,t)=>{r({[e]:t})};if(!a)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:"Initializing CAPEX Engine..."});let{total:h,metrics:p,timeline:f,costs:b}=a;return(0,F.jsxs)("div",{className:"flex h-full gap-6 p-6 bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[(0,F.jsx)("div",{className:"w-[420px] flex-shrink-0 flex flex-col gap-4 overflow-y-auto pr-2 pb-20",children:(0,F.jsxs)(t1,{children:[(0,F.jsxs)(t2,{className:"pb-3 flex flex-row items-center justify-between",children:[(0,F.jsxs)(t5,{className:"text-lg flex items-center gap-2",children:[(0,F.jsx)(Ng,{className:"w-5 h-5 text-indigo-600"}),"Project Parameters"]}),(0,F.jsx)(eI,{isGenerating:u,onExport:async()=>{if(a&&i){m(!0);try{let{generateCapexPDF:r}=await e.A(28094);await r(i,a,s,t)}finally{m(!1)}}},className:"px-2 py-1 text-xs",label:"PDF"})]}),(0,F.jsxs)(t3,{className:"space-y-5",children:[(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:[(0,F.jsx)(Nn,{className:"w-3 h-3"})," Region & Country",(0,F.jsx)(ei,{content:"Syncs with Global Simulation Settings. Construction costs vary by region."})]}),(0,F.jsx)("select",{className:"w-full p-2 border rounded-md text-sm text-slate-900 bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:i?.id||"ID",onChange:e=>l.selectCountry(e.target.value),children:Object.entries(Nw).sort().map(([e,t])=>(0,F.jsx)("optgroup",{label:NN[e]||e,children:t.map(e=>(0,F.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))},e))}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Construction Index: ",(0,F.jsxs)("span",{className:"font-mono text-slate-600 dark:text-slate-400",children:[i?.constructionIndex?.toFixed(2)||"1.0","x"]})," (vs US Baseline)"]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(eJ.Zap,{className:"w-3 h-3 mr-1"})," IT Capacity ",(0,F.jsx)(ei,{content:"Total critical IT load in kW. Drives cooling, power, and rack sizing."})]}),(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsx)("input",{type:"number",className:"w-full p-2 border rounded-md text-sm text-slate-700 bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.itLoad,onChange:e=>x("itLoad",Number(e.target.value))}),(0,F.jsx)("span",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-sm font-medium text-slate-600 dark:text-slate-400",children:"kW"})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:["Redundancy Tier ",(0,F.jsx)(ei,{content:"Uptime Institute Standard. N+1 = Tier III (Concurrently Maintainable), 2N = Tier IV (Fault Tolerant)."})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["n","n1","2n","2n1"].map(e=>(0,F.jsx)("button",{onClick:()=>x("redundancy",e),className:`p-2 text-xs font-medium rounded-md border transition-all ${t.redundancy===e?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-950/30 dark:text-indigo-300 dark:border-indigo-500":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:"n"===e?"N (Basic)":"n1"===e?"N+1 (Tier III)":"2n"===e?"2N (Tier IV)":"2N+1"},e))})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(en.Activity,{className:"w-3 h-3 mr-1"})," Cooling Strategy ",(0,F.jsx)(ei,{content:"Determines cooling methodology and PUE target. Air-cooled is simplest. Direct Liquid Cooling achieves lowest PUE (~1.2)."})]}),(0,F.jsxs)("select",{className:"w-full p-2 border rounded-md text-sm text-slate-700 bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.coolingType,onChange:e=>x("coolingType",e.target.value),children:[(0,F.jsx)("option",{value:"air",children:"Air Cooled (CRAC/CRAH)"}),(0,F.jsx)("option",{value:"inrow",children:"In-Row Precision"}),(0,F.jsx)("option",{value:"rdhx",children:"Rear Door Heat Exchanger"}),(0,F.jsx)("option",{value:"liquid",children:"Direct Liquid Cooling"})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(Nb.Building,{className:"w-3 h-3 mr-1"})," Building Type ",(0,F.jsx)(ei,{content:"Construction type affects cost/m. Purpose-built is standard. Modular/prefab can reduce timeline by 40%."})]}),(0,F.jsxs)("select",{className:"w-full p-2 border rounded-md text-sm text-slate-700 bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.buildingType,onChange:e=>x("buildingType",e.target.value),children:[(0,F.jsx)("option",{value:"purpose",children:"Purpose Built (Standard)"}),(0,F.jsx)("option",{value:"warehouse",children:"Warehouse Conversion"}),(0,F.jsx)("option",{value:"modular",children:"Modular / Prefab"}),(0,F.jsx)("option",{value:"highrise",children:"Vertical High-Rise"})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(Ns,{className:"w-3 h-3 mr-1"})," Rack Density ",(0,F.jsx)(ei,{content:"Power per rack determines rack count and floor space. Ultra-high density (75kW) requires liquid cooling."})]}),(0,F.jsxs)("select",{className:"w-full p-2 border rounded-md text-sm text-slate-700 bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.rackType,onChange:e=>x("rackType",e.target.value),children:[(0,F.jsx)("option",{value:"standard",children:"Standard (6kW/rack)"}),(0,F.jsx)("option",{value:"medium",children:"Medium (12.5kW/rack)"}),(0,F.jsx)("option",{value:"high",children:"High Density (25kW/rack)"}),(0,F.jsx)("option",{value:"ultra",children:"Ultra (75kW/rack)"})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(eJ.Zap,{className:"w-3 h-3 mr-1"})," Power Backup ",(0,F.jsx)(ei,{content:"UPS provides instant battery backup. Generator provides extended runtime. Both are critical for Tier III+ facilities."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["UPS System ",(0,F.jsx)(ei,{content:"Standalone: traditional double-conversion online UPS. Modular: scalable hot-swap frames (Vertiv/Eaton). Distributed: rack-level lithium-ion units. Rotary/DRUPS: diesel rotary flywheel  no battery needed."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.upsType,onChange:e=>x("upsType",e.target.value),children:[(0,F.jsx)("option",{value:"standalone",children:"Standalone UPS"}),(0,F.jsx)("option",{value:"modular",children:"Modular UPS"}),(0,F.jsx)("option",{value:"distributed",children:"Distributed"}),(0,F.jsx)("option",{value:"rotary",children:"Rotary/DRUPS"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Generator ",(0,F.jsx)(ei,{content:"Diesel: most common, fast start, high energy density. Gas Engine: lower emissions, requires gas supply. HVO/Renewable: hydrotreated vegetable oil  drop-in diesel replacement with 90% lower CO2."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.genType,onChange:e=>x("genType",e.target.value),children:[(0,F.jsx)("option",{value:"diesel",children:"Diesel Gen"}),(0,F.jsx)("option",{value:"gas",children:"Gas Engine"}),(0,F.jsx)("option",{value:"hvo",children:"HVO/Renewable"})]})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Fuel Storage: ",t.fuelHours,"h ",(0,F.jsx)(ei,{content:"On-site fuel reserve in hours of full-load runtime. 48h is typical for Tier III. 72-168h for remote or hurricane-prone sites."})]}),(0,F.jsx)("input",{type:"range",min:12,max:168,step:12,value:t.fuelHours,onChange:e=>x("fuelHours",Number(e.target.value)),className:"w-full accent-indigo-500"}),(0,F.jsxs)("div",{className:"flex justify-between text-[10px] text-slate-400 dark:text-slate-500",children:[(0,F.jsx)("span",{children:"12h"}),(0,F.jsx)("span",{children:"72h"}),(0,F.jsx)("span",{children:"168h (7d)"})]})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(eQ,{className:"w-3 h-3 mr-1"})," Fire Protection ",(0,F.jsx)(ei,{content:"Novec 1230 and FM-200 are clean-agent systems safe for electronics. Inert gas is greener but requires larger storage."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Suppression ",(0,F.jsx)(ei,{content:"Novec 1230: clean agent, zero ODP, safe for occupied spaces. FM-200: proven clean agent (being phased out in EU). Inert Gas (IG-541): nitrogen/argon blend, zero GWP, larger cylinder storage. Wet Pipe: cheapest but risks water damage to equipment."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.fireType,onChange:e=>x("fireType",e.target.value),children:[(0,F.jsx)("option",{value:"novec",children:"Novec 1230"}),(0,F.jsx)("option",{value:"fm200",children:"FM-200"}),(0,F.jsx)("option",{value:"inert",children:"Inert Gas (IG-541)"}),(0,F.jsx)("option",{value:"sprinkler",children:"Wet Pipe Sprinkler"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Fire Alarm ",(0,F.jsx)(ei,{content:"Addressable: point-type detectors with exact zone identification. VESDA (Aspirating): air-sampling system that detects smoke at earliest stages  gold standard for data centers. Beam Detection: infrared beam across large open spaces."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.alarmType,onChange:e=>x("alarmType",e.target.value),children:[(0,F.jsx)("option",{value:"addressable",children:"Addressable"}),(0,F.jsx)("option",{value:"vesda",children:"VESDA (Aspirating)"}),(0,F.jsx)("option",{value:"beam",children:"Beam Detection"})]})]})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(Ny.Leaf,{className:"w-3 h-3 mr-1"})," Sustainability ",(0,F.jsx)(ei,{content:"Green certifications add 2-8% to build cost but reduce operating costs and improve ESG scores for investors."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Green Certification ",(0,F.jsx)(ei,{content:"LEED Silver: basic sustainable design (+2% cost). LEED Gold: high-performance building (+4%). LEED Platinum: maximum sustainability standard (+8%). Certification adds upfront cost but improves ESG scores and may unlock tax incentives."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.greenCert,onChange:e=>x("greenCert",e.target.value),children:[(0,F.jsx)("option",{value:"none",children:"None"}),(0,F.jsx)("option",{value:"silver",children:"LEED Silver (+2%)"}),(0,F.jsx)("option",{value:"gold",children:"LEED Gold (+4%)"}),(0,F.jsx)("option",{value:"platinum",children:"LEED Platinum (+8%)"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Renewable Energy ",(0,F.jsx)(ei,{content:"Solar PV: rooftop or carport panels to offset grid consumption. Solar + BESS: solar with Battery Energy Storage System for peak shaving and grid independence. Adds CAPEX but reduces long-term OPEX."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.renewableOption,onChange:e=>x("renewableOption",e.target.value),children:[(0,F.jsx)("option",{value:"none",children:"None"}),(0,F.jsx)("option",{value:"solar",children:"Solar PV"}),(0,F.jsx)("option",{value:"solar_bess",children:"Solar + BESS"})]})]})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(eJ.Zap,{className:"w-3 h-3 mr-1"})," Substation & Grid ",(0,F.jsx)(ei,{content:"Front-of-meter infrastructure includes HV/MV substation, grid connection, and utility metering. Required for builds >5MW or greenfield sites without existing power feed."})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)("input",{type:"checkbox",checked:t.includeFOM,onChange:()=>x("includeFOM",!t.includeFOM),className:"accent-indigo-500"}),(0,F.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Include Front-of-Meter Infrastructure ",(0,F.jsx)(ei,{content:"Toggle to include substation, HV switchgear, transformers, and grid connection costs. Typically $2-8M+ depending on voltage and capacity."})]})]}),t.includeFOM&&(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Substation ",(0,F.jsx)(ei,{content:"Pad Mount 11kV: compact, low-cost, suits <5MW loads. Dedicated 33kV: standard for 5-20MW campuses. 66kV/132kV: transmission-level for hyperscale 50MW+ sites with direct grid tap."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.substationType,onChange:e=>x("substationType",e.target.value),children:[(0,F.jsx)("option",{value:"pad_mounted_11kv",children:"Pad Mount 11kV"}),(0,F.jsx)("option",{value:"dedicated_33kv",children:"Dedicated 33kV"}),(0,F.jsx)("option",{value:"dedicated_66kv",children:"Dedicated 66kV"}),(0,F.jsx)("option",{value:"dedicated_132kv",children:"Dedicated 132kV"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Utility Rate ",(0,F.jsx)(ei,{content:"Local electricity tariff in $/kWh. Affects OPEX projections and payback calculations. Typical range: $0.05-$0.20/kWh depending on market."})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("input",{type:"number",className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.utilityRate,onChange:e=>x("utilityRate",Number(e.target.value))}),(0,F.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"%"})]})]})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(Nf.Calculator,{className:"w-3 h-3 mr-1"})," Soft Costs & Contingency ",(0,F.jsx)(ei,{content:"Design fee covers A&E firms. PM fee covers construction oversight. Contingency is a buffer for unforeseen costs (industry standard 10-15%)."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:"Design Fee"}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("input",{type:"number",className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.designFee,onChange:e=>x("designFee",Number(e.target.value)),min:0,max:20}),(0,F.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"%"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:"PM Fee"}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("input",{type:"number",className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.pmFee,onChange:e=>x("pmFee",Number(e.target.value)),min:0,max:15}),(0,F.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"%"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:"Contingency"}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("input",{type:"number",className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.contingency,onChange:e=>x("contingency",Number(e.target.value)),min:0,max:30}),(0,F.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"%"})]})]})]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t dark:border-slate-700 space-y-3",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center",children:[(0,F.jsx)(Q,{className:"w-3 h-3 mr-1"})," Project Year & Market ",(0,F.jsx)(ei,{content:"Construction year affects material pricing via inflation indices. City market applies local labor and supply-chain cost multipliers."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Project Year ",(0,F.jsx)(ei,{content:"Construction start year. Applies inflation/deflation adjustment to all cost estimates based on construction cost indices."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.projYear,onChange:e=>x("projYear",e.target.value),children:[(0,F.jsx)("option",{value:"2024",children:"2024"}),(0,F.jsx)("option",{value:"2025",children:"2025"}),(0,F.jsx)("option",{value:"2026",children:"2026"}),(0,F.jsx)("option",{value:"2027",children:"2027"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["City Market ",(0,F.jsx)(ei,{content:"City-level cost multiplier based on local labor rates, material costs, and market conditions. Silicon Valley and London are premium; Generic uses the country baseline."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.cityMarket,onChange:e=>x("cityMarket",e.target.value),children:[(0,F.jsx)("option",{value:"none",children:"Generic"}),(0,F.jsx)("option",{value:"silicon_valley",children:"Silicon Valley"}),(0,F.jsx)("option",{value:"northern_virginia",children:"Northern Virginia"}),(0,F.jsx)("option",{value:"tokyo",children:"Tokyo"}),(0,F.jsx)("option",{value:"singapore",children:"Singapore"}),(0,F.jsx)("option",{value:"london",children:"London"}),(0,F.jsx)("option",{value:"frankfurt",children:"Frankfurt"})]})]})]})]}),(0,F.jsx)("div",{className:"pt-3 border-t dark:border-slate-700",children:(0,F.jsxs)("button",{onClick:()=>d(!c),className:"w-full text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/30 p-2 rounded-md hover:bg-indigo-100 dark:hover:bg-indigo-950/50 transition-colors flex items-center justify-center gap-1",children:[(0,F.jsx)(w7.Layers,{className:"w-3 h-3"}),c?"Hide":"Show"," Advanced Infrastructure Options"]})}),c&&(0,F.jsxs)("div",{className:"space-y-3 animate-in slide-in-from-top-2",children:[(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Power Distribution ",(0,F.jsx)(ei,{content:"Method of delivering power from UPS output to server racks. Busway is modern and flexible. Underfloor routing works with raised floors."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Distribution ",(0,F.jsx)(ei,{content:"Busway/Busbar: tap-off units for flexible rack feeds. Cable Tray: traditional copper/aluminum runs. Overhead: ceiling-mounted runs for slab floors. Underfloor: routed beneath raised floor tiles."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.powerDistribution||"busway",onChange:e=>x("powerDistribution",e.target.value),children:[(0,F.jsx)("option",{value:"busway",children:"Busway / Busbar"}),(0,F.jsx)("option",{value:"cable_tray",children:"Cable Tray"}),(0,F.jsx)("option",{value:"overhead",children:"Overhead"}),(0,F.jsx)("option",{value:"underfloor",children:"Underfloor"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["PDU Type ",(0,F.jsx)(ei,{content:"Basic: simple power strip, no monitoring. Monitored: per-outlet power metering for capacity planning. Switched: remote on/off per outlet. Intelligent/Managed: full SNMP/API control with environmental sensors."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.pduType||"monitored",onChange:e=>x("pduType",e.target.value),children:[(0,F.jsx)("option",{value:"basic",children:"Basic"}),(0,F.jsx)("option",{value:"monitored",children:"Monitored"}),(0,F.jsx)("option",{value:"switched",children:"Switched"}),(0,F.jsx)("option",{value:"intelligent",children:"Intelligent/Managed"})]})]})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Cabling & Floor ",(0,F.jsx)(ei,{content:"Structured cabling and raised floor choices affect airflow management, cable routing capacity, and long-term scalability."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Cabling ",(0,F.jsx)(ei,{content:"Cat 6A: supports 10GbE up to 100m, most common. Cat 8: 25/40GbE for short runs (<30m). Fiber OM4: multimode for 10-100GbE up to 150m. Fiber Single-Mode: long-distance inter-building and campus backbone."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.cablingType||"cat6a",onChange:e=>x("cablingType",e.target.value),children:[(0,F.jsx)("option",{value:"cat6a",children:"Cat 6A Copper"}),(0,F.jsx)("option",{value:"cat8",children:"Cat 8"}),(0,F.jsx)("option",{value:"fiber_om4",children:"Fiber OM4"}),(0,F.jsx)("option",{value:"fiber_sm",children:"Fiber Single-Mode"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Floor Type ",(0,F.jsx)(ei,{content:"Raised Floor: standard 300mm plenum for underfloor air distribution. Slab: no raised floor, requires overhead cooling. 600mm: deeper plenum for higher airflow. 1000mm: maximum plenum for high-density or underfloor busway routing."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.floorType||"raised",onChange:e=>x("floorType",e.target.value),children:[(0,F.jsx)("option",{value:"raised",children:"Raised Floor"}),(0,F.jsx)("option",{value:"slab",children:"Slab / No Raised Floor"}),(0,F.jsx)("option",{value:"raised_600",children:"Raised 600mm"}),(0,F.jsx)("option",{value:"raised_1000",children:"Raised 1000mm"})]})]})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Security & Connectivity ",(0,F.jsx)(ei,{content:"Physical security layers and network connectivity infrastructure. Higher security tiers add mantraps, vehicle barriers, and 24/7 guard staff."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Security Level ",(0,F.jsx)(ei,{content:"Basic: CCTV and card access. Standard: adds biometric readers (fingerprint/iris). Enhanced: mantraps, IR perimeter detection, vehicle bollards. Military Grade: SCIF-level with Tempest shielding, armed guards, blast-resistant walls."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.securityLevel||"standard",onChange:e=>x("securityLevel",e.target.value),children:[(0,F.jsx)("option",{value:"basic",children:"Basic (CCTV + Access)"}),(0,F.jsx)("option",{value:"standard",children:"Standard (Biometric)"}),(0,F.jsx)("option",{value:"enhanced",children:"Enhanced (Mantrap + IR)"}),(0,F.jsx)("option",{value:"military",children:"Military Grade"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Fiber Entry ",(0,F.jsx)(ei,{content:"Single Entrance: one fiber path into building. Dual Diverse: two physically separate fiber paths from different carriers for redundancy. MMR (Meet-Me Room): carrier-neutral room for cross-connects between multiple providers."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.fiberEntry||"single",onChange:e=>x("fiberEntry",e.target.value),children:[(0,F.jsx)("option",{value:"single",children:"Single Entrance"}),(0,F.jsx)("option",{value:"dual",children:"Dual Diverse"}),(0,F.jsx)("option",{value:"mmr",children:"MMR / Meet-Me Room"})]})]})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Site & Market Conditions ",(0,F.jsx)(ei,{content:"Site preparation and labor market conditions that affect construction cost and timeline. Brownfield and overheated markets can add 10-20% to baseline costs."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Site Condition ",(0,F.jsx)(ei,{content:"Greenfield: undeveloped land, clean build but needs full site works. Brownfield: previously developed land, may require demolition or remediation. Retrofit: converting an existing building  saves on shell but limits design flexibility."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.siteCondition||"greenfield",onChange:e=>x("siteCondition",e.target.value),children:[(0,F.jsx)("option",{value:"greenfield",children:"Greenfield"}),(0,F.jsx)("option",{value:"brownfield",children:"Brownfield"}),(0,F.jsx)("option",{value:"retrofit",children:"Retrofit / Existing"})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Market Condition ",(0,F.jsx)(ei,{content:"Favorable: low labor demand, competitive bidding  cost savings. Normal: standard market pricing. Tight: skilled labor shortage, longer lead times. Overheated: extreme demand (e.g., NoVA 2024), adds ~15% premium with extended schedules."})]}),(0,F.jsxs)("select",{className:"w-full p-2 text-sm text-slate-700 border rounded bg-white dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",value:t.marketCondition||"normal",onChange:e=>x("marketCondition",e.target.value),children:[(0,F.jsx)("option",{value:"favorable",children:"Favorable (Low Labor)"}),(0,F.jsx)("option",{value:"normal",children:"Normal"}),(0,F.jsx)("option",{value:"tight",children:"Tight (Premium)"}),(0,F.jsx)("option",{value:"overheated",children:"Overheated (+15%)"})]})]})]})]})]})]})]})}),(0,F.jsxs)("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto pb-20",children:[(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(t1,{className:"bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-950/30 dark:to-slate-800 border-indigo-100 dark:border-indigo-800",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 flex items-center gap-1",children:["Total CAPEX ",(0,F.jsx)(ei,{content:"Total project capital expenditure including building, MEP, IT infrastructure, and contingency."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(h)}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:["incl. ",t.contingency,"% contingency"]})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Cost per kW ",(0,F.jsx)(ei,{content:"Capital cost normalized per kilowatt of IT capacity. Industry range: $8K-$25K/kW depending on tier and region."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:eo(p.perKw)}),(0,F.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:p.perKw<8e3?" Low Cost":p.perKw<15e3?" Standard":" Premium"})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["PUE Target ",(0,F.jsx)(ei,{content:"Projected Power Usage Effectiveness based on cooling type and climate. Drives energy cost projections."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:a.pue.toFixed(2)}),(0,F.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:a.pue<1.3?" Best-in-Class":a.pue<1.5?" Good":" Standard"})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Timeline ",(0,F.jsx)(ei,{content:"Estimated project duration from design phase through commissioning and handover."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:[f.totalMonths," ",(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-normal",children:"Months"})]}),(0,F.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"Design to Commissioning"})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Total Racks ",(0,F.jsx)(ei,{content:"Number of server racks based on IT load and rack density selection."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200",children:p.racks}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:[t.rackType," density"]})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Floor Space ",(0,F.jsx)(ei,{content:"White space (data hall) area required based on rack count and spacing standards."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200",children:[el(p.floorSpace)," m"]}),(0,F.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"White space"})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Annual Energy ",(0,F.jsx)(ei,{content:"Projected annual electricity cost based on IT load, PUE, and local electricity rate."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200",children:eo(p.annualEnergy)}),(0,F.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"@ $0.10/kWh"})]})}),(0,F.jsx)(t1,{children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:["Soft Costs ",(0,F.jsx)(ei,{content:"Design fees, project management, and other professional services as a percentage of hard costs."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200",children:eo((a.softCosts.design||0)+(a.softCosts.pm||0))}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:[t.designFee,"% D + ",t.pmFee,"% PM"]})]})})]}),(0,F.jsx)(t1,{className:"bg-indigo-50 dark:bg-indigo-950/30 border-indigo-100 dark:border-indigo-800",children:(0,F.jsx)(t3,{className:"pt-4 pb-4",children:(0,F.jsxs)("div",{className:"flex gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg h-fit",children:(0,F.jsx)(en.Activity,{className:"w-5 h-5 text-indigo-700 dark:text-indigo-400"})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h4",{className:"font-semibold text-indigo-900 dark:text-indigo-200 mb-1",children:"CAPEX Analysis"}),(0,F.jsx)("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 leading-relaxed markdown-prose",children:s})]})]})})}),(0,F.jsxs)(t1,{children:[(0,F.jsx)(t2,{children:(0,F.jsx)(t5,{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Cost Breakdown"})}),(0,F.jsx)(t3,{children:(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-x-6",children:[Object.entries(b).sort(([,e],[,t])=>t-e).map(([e,t])=>{let a=t/h*100;return(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-0 border-slate-100 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-400"}),(0,F.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-400 capitalize",children:e.replace(/([A-Z])/g," $1").trim()})]}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)("div",{className:"w-20 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:"h-full bg-indigo-400 rounded-full",style:{width:`${Math.min(a,100)}%`}})}),(0,F.jsxs)("span",{className:"text-sm font-medium text-slate-900 dark:text-white w-20 text-right",children:["$",(t/1e3).toFixed(0),"k"]})]})]},e)}),a.softCosts.design&&(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-400"}),(0,F.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Design Fee (",t.designFee,"%)"]})]}),(0,F.jsxs)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",(a.softCosts.design/1e3).toFixed(0),"k"]})]}),a.softCosts.pm&&(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),(0,F.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["PM Fee (",t.pmFee,"%)"]})]}),(0,F.jsxs)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",(a.softCosts.pm/1e3).toFixed(0),"k"]})]}),(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-rose-400"}),(0,F.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Contingency (",t.contingency,"%)"]})]}),(0,F.jsxs)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",(a.contingency/1e3).toFixed(0),"k"]})]}),a.fomTotal>0&&(0,F.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),(0,F.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Front-of-Meter"})]}),(0,F.jsxs)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",(a.fomTotal/1e3).toFixed(0),"k"]})]})]})})]}),(0,F.jsxs)(t1,{children:[(0,F.jsxs)(t2,{children:[(0,F.jsxs)(t5,{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-4 h-4"})," Project Timeline  L2 Schedule",(0,F.jsx)(ei,{content:"Interactive Gantt chart showing L1 phase groups and L2 sub-activities. Click phase headers to expand/collapse. Bars are positioned by actual start month with overlapping activities shown accurately."})]}),(0,F.jsx)(t4,{className:"text-xs text-slate-500 dark:text-slate-400",children:"Click phase headers to expand/collapse L2 sub-phases. Hover bars for duration details."})]}),(0,F.jsx)(t3,{children:(0,F.jsx)(Nk,{phases:f.phases,subPhases:f.subPhases||[],totalMonths:f.totalMonths})})]})]})]})},NS={Low:1,Medium:2,High:3,Critical:4},NP={Low:1,Medium:2,High:3,Catastrophic:4},NM=(0,X.default)("waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),NO=(0,X.default)("construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]),NE=(0,X.default)("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),NA=(0,X.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),NT=(0,X.default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var NI=["axis"],NR=(0,z.forwardRef)((e,t)=>z.createElement(f1,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:NI,tooltipPayloadSearcher:ny,categoricalChartProps:e,ref:t})),ND=z,NL=(e,t,a)=>xv(e,"xAxis",vl(e,t),a),N_=(e,t,a)=>xy(e,"xAxis",vl(e,t),a),NF=(e,t,a)=>xv(e,"yAxis",vo(e,t),a),N$=(e,t,a)=>xy(e,"yAxis",vo(e,t),a),Nz=rc([iG,NL,NF,N_,N$],(e,t,a,r,n)=>s3(e,"xAxis")?is(t,r,!1):is(a,n,!1)),Nq=rc([u5,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),NW=e=>s3(iG(e),"xAxis")?"yAxis":"xAxis",NB=rc([Nq,(e,t,a)=>mh(e,NW(e),"yAxis"===NW(e)?vo(e,t):vl(e,t),a)],(e,t)=>{if(null!=e&&null!=t){var a,{stackId:r}=e,n=uT(e);if(null!=r&&null!=n){var s=null==(a=t[r])?void 0:a.stackedData,i=null==s?void 0:s.find(e=>e.key===n);if(null!=i)return i.map(e=>[e[0],e[1]])}}}),NU=rc([iG,NL,NF,N_,N$,NB,dG,Nz,Nq,e=>e.rootProps.baseValue],(e,t,a,r,n,s,i,l,o,c)=>{var d,{chartData:u,dataStartIndex:m,dataEndIndex:x}=i;if(null!=o&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=a&&null!=r&&null!=n&&0!==r.length&&0!==n.length&&null!=l){var{data:h}=o;if(null!=(d=h&&h.length>0?h:null==u?void 0:u.slice(m,x+1)))return function(e){var t,{areaSettings:{connectNulls:a,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:l,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:m,yAxisTicks:x,bandSize:h}=e,p=s&&s.length,f=((e,t,a,r,n)=>{var s=null!=a?a:t;if(no(s))return s;var i="horizontal"===e?n:r,l=i.scale.domain();if("number"===i.type){var o=Math.max(l[0],l[1]),c=Math.min(l[0],l[1]);return"dataMin"===s?c:"dataMax"===s||o<0?o:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===s?l[0]:"dataMax"===s?l[1]:l[0]})(i,l,r,o,c),b="horizontal"===i,g=!1,y=d.map((e,t)=>{if(p)d=s[u+t];else{var r,i,l,d,y,v=s4(e,n);Array.isArray(v)?(d=v,g=!0):d=[f,v]}var j=null!=(r=null==(i=d)?void 0:i[1])?r:null,k=null==j||p&&!a&&null==s4(e,n);return b?{x:ie({axis:o,ticks:m,bandSize:h,entry:e,index:t}),y:k?null:null!=(y=c.scale.map(j))?y:null,value:d,payload:e}:{x:k?null:null!=(l=o.scale.map(j))?l:null,y:ie({axis:c,ticks:x,bandSize:h,entry:e,index:t}),value:d,payload:e}});return t=p||g?y.map(e=>{var t,a,r=Array.isArray(e.value)?e.value[0]:null;return b?{x:e.x,y:null!=r&&null!=e.y&&null!=(a=c.scale.map(r))?a:null,payload:e.payload}:{x:null!=r&&null!=(t=o.scale.map(r))?t:null,y:e.y,payload:e.payload}}):b?c.scale.map(f):o.scale.map(f),{points:y,baseLine:null!=t?t:0,isRange:g}}({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataStartIndex:m,areaSettings:o,stackedData:s,displayedData:d,chartBaseValue:c,bandSize:l})}}),NK=["id"],NH=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function NV(){return(NV=Object.assign.bind()).apply(null,arguments)}function NG(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function NY(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function NX(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?NY(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NY(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function NZ(e,t){return e&&"none"!==e?e:t}var NJ=ND.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:a,getPosition:ng,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:il(i,t),hide:l,type:c,color:NZ(r,s),unit:o,graphicalItemId:d}};return ND.createElement(y9,{tooltipEntrySettings:u})});function NQ(e){var{clipPathId:t,points:a,props:r}=e,{needClip:n,dot:s,dataKey:i}=r,l=fu(r);return ND.createElement(je,{points:a,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:i,baseProps:l,needClip:n,clipPathId:t})}function N0(e){var{showLabels:t,children:a,points:r}=e,n=r.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return NX(NX({},r),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:r,fill:void 0})});return ND.createElement(b3,{value:t?n:void 0},a)}function N1(e){var{points:t,baseLine:a,needClip:r,clipPathId:n,props:s}=e,{layout:i,type:l,stroke:o,connectNulls:c,isRange:d}=s,{id:u}=s,m=NG(s,NK),x=fu(m),h=fx(m);return ND.createElement(ND.Fragment,null,(null==t?void 0:t.length)>1&&ND.createElement(f8,{clipPath:r?"url(#clipPath-".concat(n,")"):void 0},ND.createElement(yX,NV({},h,{id:u,points:t,connectNulls:c,type:l,baseLine:a,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==o&&ND.createElement(yX,NV({},x,{className:"recharts-area-curve",layout:i,type:l,connectNulls:c,fill:"none",points:t})),"none"!==o&&d&&ND.createElement(yX,NV({},x,{className:"recharts-area-curve",layout:i,type:l,connectNulls:c,fill:"none",points:a}))),ND.createElement(NQ,{points:t,props:m,clipPathId:n}))}function N2(e){var t,a,{alpha:r,baseLine:n,points:s,strokeWidth:i}=e,l=null==(t=s[0])?void 0:t.y,o=null==(a=s[s.length-1])?void 0:a.y;if(!s0(l)||!s0(o))return null;var c=r*Math.abs(l-o),d=Math.max(...s.map(e=>e.x||0));return(no(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(e=>e.x||0),d)),no(d))?ND.createElement("rect",{x:0,y:l<o?l:l-c,width:d+(i?parseInt("".concat(i),10):1),height:Math.floor(c)}):null}function N5(e){var t,a,{alpha:r,baseLine:n,points:s,strokeWidth:i}=e,l=null==(t=s[0])?void 0:t.x,o=null==(a=s[s.length-1])?void 0:a.x;if(!s0(l)||!s0(o))return null;var c=r*Math.abs(l-o),d=Math.max(...s.map(e=>e.y||0));return(no(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(e=>e.y||0),d)),no(d))?ND.createElement("rect",{x:l<o?l:l-c,y:0,width:c,height:Math.floor(d+(i?parseInt("".concat(i),10):1))}):null}function N4(e){var{alpha:t,layout:a,points:r,baseLine:n,strokeWidth:s}=e;return"vertical"===a?ND.createElement(N2,{alpha:t,points:r,baseLine:n,strokeWidth:s}):ND.createElement(N5,{alpha:t,points:r,baseLine:n,strokeWidth:s})}function N3(e){var{needClip:t,clipPathId:a,props:r,previousPointsRef:n,previousBaselineRef:s}=e,{points:i,baseLine:l,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:u,onAnimationStart:m,onAnimationEnd:x}=r,h=gT((0,ND.useMemo)(()=>({points:i,baseLine:l}),[i,l]),"recharts-area-"),p=iY(),[f,b]=(0,ND.useState)(!1),g=(0,ND.useCallback)(()=>{"function"==typeof x&&x(),b(!1)},[x]),y=(0,ND.useCallback)(()=>{"function"==typeof m&&m(),b(!0)},[m]);if(null==p)return null;var v=n.current,j=s.current;return ND.createElement(N0,{showLabels:!f,points:i},r.children,ND.createElement(gA,{animationId:h,begin:c,duration:d,isActive:o,easing:u,onAnimationEnd:g,onAnimationStart:y,key:h},e=>{if(v){var c,d=v.length/i.length,u=1===e?i:i.map((t,a)=>{var r=Math.floor(a*d);if(v[r]){var n=v[r];return NX(NX({},t),{},{x:nh(n.x,t.x,e),y:nh(n.y,t.y,e)})}return t});if(no(l))c=nh(j,l,e);else c=null==l||ni(l)?nh(j,0,e):l.map((t,a)=>{var r=Math.floor(a*d);if(Array.isArray(j)&&j[r]){var n=j[r];return NX(NX({},t),{},{x:nh(n.x,t.x,e),y:nh(n.y,t.y,e)})}return t});return e>0&&(n.current=u,s.current=c),ND.createElement(N1,{points:u,baseLine:c,needClip:t,clipPathId:a,props:r})}return e>0&&(n.current=i,s.current=l),ND.createElement(f8,null,o&&ND.createElement("defs",null,ND.createElement("clipPath",{id:"animationClipPath-".concat(a)},ND.createElement(N4,{alpha:e,points:i,baseLine:l,layout:p,strokeWidth:r.strokeWidth}))),ND.createElement(f8,{clipPath:"url(#animationClipPath-".concat(a,")")},ND.createElement(N1,{points:i,baseLine:l,needClip:t,clipPathId:a,props:r})))}),ND.createElement(b7,{label:r.label}))}function N6(e){var{needClip:t,clipPathId:a,props:r}=e,n=(0,ND.useRef)(null),s=(0,ND.useRef)();return ND.createElement(N3,{needClip:t,clipPathId:a,props:r,previousPointsRef:n,previousBaselineRef:s})}class N8 extends ND.PureComponent{render(){var{hide:e,dot:t,points:a,className:r,top:n,left:s,needClip:i,xAxisId:l,yAxisId:o,width:c,height:d,id:u,baseLine:m,zIndex:x}=this.props;if(e)return null;var h=(0,eh.clsx)("recharts-area",r),{r:p,strokeWidth:f}=jx(t),b=gi(t),g=2*p+f,y=i?"url(#clipPath-".concat(b?"":"dots-").concat(u,")"):void 0;return ND.createElement(bA,{zIndex:x},ND.createElement(f8,{className:h},i&&ND.createElement("defs",null,ND.createElement(vr,{clipPathId:u,xAxisId:l,yAxisId:o}),!b&&ND.createElement("clipPath",{id:"clipPath-dots-".concat(u)},ND.createElement("rect",{x:s-g/2,y:n-g/2,width:c+g,height:d+g}))),ND.createElement(N6,{needClip:i,clipPathId:u,props:this.props})),ND.createElement(jn,{points:a,mainColor:NZ(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:y}),this.props.isRange&&Array.isArray(m)&&ND.createElement(jn,{points:m,mainColor:NZ(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:y}))}}var N9={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ud.area};function N7(e){var t,a=fJ(e,N9),{activeDot:r,animationBegin:n,animationDuration:s,animationEasing:i,connectNulls:l,dot:o,fill:c,fillOpacity:d,hide:u,isAnimationActive:m,legendType:x,stroke:h,xAxisId:p,yAxisId:f}=a,b=NG(a,NH),g=sB(iG),y=sB(ue),{needClip:v}=va(p,f),j=iw(),{points:k,isRange:w,baseLine:N}=null!=(t=sB(t=>NU(t,e.id,j)))?t:{},C=sB(fH);if("horizontal"!==g&&"vertical"!==g||null==C||"AreaChart"!==y&&"ComposedChart"!==y)return null;var{height:S,width:P,x:M,y:O}=C;return k&&k.length?ND.createElement(N8,NV({},b,{activeDot:r,animationBegin:n,animationDuration:s,animationEasing:i,baseLine:N,connectNulls:l,dot:o,fill:c,fillOpacity:d,height:S,hide:u,layout:g,isAnimationActive:"auto"===m?!pZ.isSsr:m,isRange:w,legendType:x,needClip:v,points:k,stroke:h,width:P,left:M,top:O,xAxisId:p,yAxisId:f})):null}var Ce=ND.memo(function(e){var t=fJ(e,N9),a=iw();return ND.createElement(vk,{id:t.id,type:"area"},e=>ND.createElement(ND.Fragment,null,ND.createElement(vg,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:NZ(r,n),value:il(a,t),payload:e}]})(t)}),ND.createElement(NJ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),ND.createElement(vw,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:s7(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:a,connectNulls:t.connectNulls}),ND.createElement(N7,NV({},t,{id:e}))))},fa);function Ct(){let{selectedCountry:t,inputs:a}=(0,$.useSimulationStore)(),r=4===a.tierLevel?4:3,[n,s]=(0,z.useState)(!1),[i,l]=(0,z.useState)(null),o=(0,z.useMemo)(()=>{let e,n,s,i,l,o,c,d;if(!t)return null;let u="liquid"===a.coolingType||"rdhx"===a.coolingType?"pumped":"air",m=eS(a.itLoad,r,u,Math.ceil(.6*a.itLoad),a.coolingTopology,a.powerRedundancy),x=(e=[],"ID"===t.id?e.push({id:"risk-seismic",category:"Natural",title:"Seismic Activity",description:"High probability of earthquakes in the Ring of Fire region.",probability:"High",impact:"Catastrophic",mitigation:"Ensure structural compliance with SNI 1726:2019 via Seismic isolating dampers."}):"JP"===t.id?e.push({id:"risk-seismic",category:"Natural",title:"Seismic Activity (JIS)",description:"Major fault lines. Frequent tremors.",probability:"High",impact:"Catastrophic",mitigation:"Strict adherence to JIS A 0101 and base isolation systems."}):"US"===t.id&&e.push({id:"risk-seismic-us",category:"Natural",title:"Seismic Risk (San Andreas)",description:"Dependent on state. CA highly vulnerable.",probability:"Medium",impact:"High",mitigation:"ASCE 7-16 compliance for data centers category IV."}),("ID"===t.id||"SG"===t.id||"MY"===t.id)&&e.push({id:"risk-humidity",category:"Natural",title:"High Humidity / Condensation",description:"Tropical climate leading to latent cooling load spikes and potential condensation.",probability:"High",impact:"Medium",mitigation:"Dehumidification coils in PAUs and vapour barrier enforcement."}),"ID"===t.id&&r<4&&e.push({id:"risk-flood",category:"Natural",title:"Flash Flooding",description:"Monsoon season risk for ground-level infrastructure.",probability:"Medium",impact:"High",mitigation:"Elevate critical plant 1.2m above 100-year flood line."}),(n=m.filter(e=>1===e.count&&!e.assetId.includes("access")&&!e.assetId.includes("cctv"))).length>0&&e.push({id:"risk-spof",category:"Operational",title:"Single Points of Failure (SPOF)",description:`Identified ${n.length} assets with N redundancy (e.g. ${n[0].assetId}).`,probability:"Medium",impact:"High",mitigation:"Maintain critical spares on-site and 4-hour SLA vendor contracts."}),3===r&&e.push({id:"risk-maint",category:"Operational",title:"Concurrent Maintainability Gaps",description:"Tier III requires active path maintenance without downtime. Human error risk during switching.",probability:"Medium",impact:"High",mitigation:"Strict MOP/SOP adherence and electrical interlock checks."}),"ID"===t.id&&e.push({id:"risk-labor-ot",category:"Labor",title:"Overtime Compliance (PP 35/2021)",description:"Strict limits on overtime (4h/day, 18h/week). Exceeding this poses legal and burnout risks.",probability:"High",impact:"Medium",mitigation:"Implement 4-shift roster or increase headcount to reduce OT dependency."}),e),h=(s=Array.from({length:5},(e,t)=>Array.from({length:5},(e,a)=>({likelihood:a+1,impact:t+1,score:(a+1)*(t+1),risks:[]}))),l=(i=x.map(e=>{let t=NS[e.probability]||2,a=NP[e.impact]||2;return t<=5&&a<=5&&s[a-1][t-1].risks.push(e),{...e,score:t*a}})).reduce((e,t)=>e+t.score,0),c=Math.min(.95,(4===r?.005:.025)+l/Math.max(o=16*x.length,1)*.15),d=Array.from({length:6},(e,t)=>({year:2025+t,score:Math.round(l*Math.pow(1.06,t)),label:0===t?"Baseline":`Year ${t}`})),{totalScore:l,maxScore:o,normalizedScore:o>0?Math.round(l/o*100):0,matrix:s,topRisks:i.sort((e,t)=>t.score-e.score),slaBreachProbability:c,fiveYearProjection:d});return{risks:x,aggregation:h,downtime:wH(r,void 0,4,t??void 0)}},[t,r,a.itLoad,a.coolingType,a.coolingTopology,a.powerRedundancy,a.headcount_Engineer]);if(!t||!o)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view risk analysis."});let{risks:c,aggregation:d,downtime:u}=o,{totalScore:m,normalizedScore:x,slaBreachProbability:h,fiveYearProjection:p,topRisks:f,matrix:b}=d,g=e=>{switch(e){case"Natural":return(0,F.jsx)(NM,{className:"w-4 h-4 text-blue-400"});case"Operational":return(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-amber-400"});case"Labor":return(0,F.jsx)(NO,{className:"w-4 h-4 text-red-400"});case"Financial":return(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-400"});default:return(0,F.jsx)(eM,{className:"w-4 h-4 text-slate-400"})}},y=(0,z.useCallback)((e,t,a)=>{a&&l(a=>a?.row===e&&a?.col===t?null:{row:e,col:t})},[]);return(0,F.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto h-[calc(100vh-140px)]",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center",children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(Na.ShieldAlert,{className:"w-5 h-5 text-cyan-500"}),"Risk Assessment Dashboard"]}),(0,F.jsx)(eI,{isGenerating:n,onExport:async()=>{s(!0);try{let{generateRiskPDF:a}=await e.A(28094),{generateRiskNarrative:r}=await e.A(41449);await a(t,d,r(d))}finally{s(!1)}}})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-slate-500 dark:text-slate-400 text-xs uppercase mb-1 flex items-center gap-1",children:[(0,F.jsx)(Na.ShieldAlert,{className:"w-3 h-3"})," Risk Score ",(0,F.jsx)(ei,{content:"Aggregated risk score across all categories. Higher = more risk. Normalized to % of maximum possible score."})]}),(0,F.jsx)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:m}),(0,F.jsxs)("div",{className:`text-xs mt-1 ${x>60?"text-red-600 dark:text-red-400":x>35?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"}`,children:[x,"% of maximum  ",c.length," risks"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-slate-500 dark:text-slate-400 text-xs uppercase mb-1 flex items-center gap-1",children:[(0,F.jsx)(J,{className:"w-3 h-3"})," Financial Exposure ",(0,F.jsx)(ei,{content:"Estimated annual cost of downtime events based on expected outage minutes x $5,000/min business impact."})]}),(0,F.jsxs)("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:["$",(u.financialImpact/1e3).toFixed(0),"k"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["@ $5k/min  ",u.expectedDowntimeMinutes," min/yr"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-slate-500 dark:text-slate-400 text-xs uppercase mb-1 flex items-center gap-1",children:[(0,F.jsx)(en.Activity,{className:"w-3 h-3"})," Availability ",(0,F.jsx)(ei,{content:"Expected annual uptime percentage based on tier redundancy level. Tier III >= 99.982%, Tier IV >= 99.995%."})]}),(0,F.jsxs)("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:[u.availability,"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Tier ",r," SLA target"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4",children:[(0,F.jsxs)("div",{className:"text-slate-500 dark:text-slate-400 text-xs uppercase mb-1 flex items-center gap-1",children:[(0,F.jsx)(eM,{className:"w-3 h-3"})," SLA Breach Prob. ",(0,F.jsx)(ei,{content:"Annual probability of exceeding the SLA downtime allowance. Factors in equipment age, maintenance strategy, and environmental conditions."})]}),(0,F.jsxs)("div",{className:`text-3xl font-bold ${h>.1?"text-red-600 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:[(100*h).toFixed(1),"%"]}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Annual breach likelihood"})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(Na.ShieldAlert,{className:"w-4 h-4 text-cyan-400"})," Risk Matrix (Likelihood  Impact) ",(0,F.jsx)(ei,{content:"55 risk assessment matrix mapping likelihood (Rare to Certain) against impact (Negligible to Catastrophic). Red zones require immediate mitigation."})]}),(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 -rotate-90 absolute -left-7 top-1/2 -translate-y-1/2 whitespace-nowrap",children:"IMPACT "}),(0,F.jsxs)("div",{className:"ml-6",children:[["Catastrophic","High","Medium","Low","Negligible"].map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,F.jsxs)("div",{className:"w-16 text-[10px] text-slate-500 text-right pr-2 flex items-center justify-end gap-0.5",children:[(0,F.jsx)("span",{children:e}),(0,F.jsx)(ei,{content:{Catastrophic:"Business-critical, >$10M loss",High:"Major disruption, $1M-$10M",Medium:"Significant impact, $100k-$1M",Low:"Minor disruption, $10k-$100k",Negligible:"Minimal impact, <$10k loss"}[e]})]}),[0,1,2,3,4].map(e=>{var a;let r=4-t,n=b[r]?.[e],s=n&&n.risks.length>0,o=i?.row===r&&i?.col===e;return(0,F.jsx)("div",{onClick:()=>y(r,e,!!s),className:`flex-1 min-h-[2.5rem] rounded-sm flex flex-col items-center justify-center relative group ${(a=(e+1)*(r+1),!s&&a<6?"bg-slate-200 dark:bg-slate-900/70":a>=12?"bg-red-500/80 dark:bg-red-600/80":a>=8?"bg-orange-500/75 dark:bg-orange-600/75":a>=4?"bg-amber-500/70 dark:bg-amber-600/70":"bg-emerald-500/70 dark:bg-emerald-600/70")}
                                                    ${s?"ring-1 ring-white/30 cursor-pointer hover:ring-2 hover:ring-white/60 transition-all":""}
                                                    ${o?"ring-2 ring-cyan-400 z-10":""}`,children:s&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"flex flex-col items-center px-0.5 overflow-hidden w-full",children:1===n.risks.length?(0,F.jsx)("span",{className:"text-[8px] leading-tight font-semibold text-white text-center truncate w-full px-0.5",children:n.risks[0].title}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:"text-[8px] leading-tight font-semibold text-white text-center truncate w-full px-0.5",children:n.risks[0].title}),(0,F.jsxs)("span",{className:"text-[7px] text-white/80",children:["+",n.risks.length-1," more"]})]})}),(0,F.jsxs)("div",{className:"absolute bottom-full mb-1 left-1/2 -translate-x-1/2 bg-slate-900 border border-slate-600 rounded p-2 hidden group-hover:block z-50 w-48",children:[n.risks.map(e=>(0,F.jsx)("div",{className:"text-[10px] text-slate-300 mb-1 font-medium",children:e.title},e.id)),(0,F.jsx)("div",{className:"text-[9px] text-cyan-400 mt-1",children:"Click for details"})]}),o&&(0,F.jsxs)("div",{className:"absolute top-full mt-1 left-1/2 -translate-x-1/2 bg-slate-900 border border-cyan-500/50 rounded-lg p-3 z-[60] w-64 shadow-xl shadow-black/30",onClick:e=>e.stopPropagation(),children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,F.jsx)("span",{className:"text-[10px] text-cyan-400 font-bold uppercase",children:"Risk Details"}),(0,F.jsx)("button",{onClick:()=>l(null),className:"text-slate-500 hover:text-white text-xs",children:""})]}),n.risks.map(e=>(0,F.jsxs)("div",{className:"mb-2 pb-2 border-b border-slate-700/50 last:border-0 last:mb-0 last:pb-0",children:[(0,F.jsxs)("div",{className:"text-xs font-bold text-white flex items-center gap-1.5",children:[g(e.category),e.title]}),(0,F.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 leading-relaxed",children:e.description}),(0,F.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,F.jsxs)("span",{className:"text-[9px] px-1 py-0.5 rounded bg-slate-800 text-slate-300",children:["P: ",e.probability]}),(0,F.jsxs)("span",{className:"text-[9px] px-1 py-0.5 rounded bg-slate-800 text-slate-300",children:["I: ",e.impact]})]})]},e.id))]})]})},e)})]},e)),(0,F.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,F.jsx)("div",{className:"w-16"}),["Rare","Unlikely","Possible","Likely","Certain"].map(e=>(0,F.jsx)("div",{className:"flex-1 text-[10px] text-slate-500 text-center flex flex-col items-center",children:(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:[e,(0,F.jsx)(ei,{content:{Rare:"Less than 1% probability per year",Unlikely:"1-10% probability",Possible:"10-50% probability",Likely:"50-90% probability",Certain:"Over 90% probability"}[e]})]})},e))]}),(0,F.jsx)("div",{className:"text-center text-[10px] text-slate-500 mt-1",children:"LIKELIHOOD "})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(eM,{className:"w-4 h-4 text-amber-400"})," Top Risk Scenarios"]}),(0,F.jsx)("div",{className:"space-y-3 max-h-[280px] overflow-y-auto",children:f.map((e,t)=>{let a;return(0,F.jsxs)("div",{className:`p-3 rounded-lg border ${(a=(({Low:1,Medium:2,High:3,Critical:4})[e.probability]||2)*(({Low:1,Medium:2,High:3,Catastrophic:4})[e.impact]||2))>=9?"border-red-500/50 bg-red-100 dark:bg-red-950/20":a>=6?"border-amber-500/50 bg-amber-100 dark:bg-amber-950/20":"border-emerald-500/50 bg-emerald-100 dark:bg-emerald-950/20"}`,children:[(0,F.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[g(e.category),(0,F.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.title})]}),(0,F.jsx)("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 px-1.5 py-0.5 rounded border border-slate-200 dark:border-transparent",children:e.score})]}),(0,F.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1 ml-6",children:e.description}),(0,F.jsxs)("div",{className:"mt-2 ml-6 flex items-center gap-3 text-[10px]",children:[(0,F.jsxs)("span",{className:`px-1.5 py-0.5 rounded ${"High"===e.probability||"Critical"===e.probability?"bg-red-50 dark:bg-red-900/50 text-red-700 dark:text-red-300":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-transparent"}`,children:["P: ",e.probability]}),(0,F.jsxs)("span",{className:`px-1.5 py-0.5 rounded ${"High"===e.impact||"Catastrophic"===e.impact?"bg-red-50 dark:bg-red-900/50 text-red-700 dark:text-red-300":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-transparent"}`,children:["I: ",e.impact]})]})]},e.id)})})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(Z,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})," Downtime Analysis (Tier ",r,")"]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase",children:"Expected Downtime"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[u.expectedDowntimeMinutes," min"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"per year"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase",children:"Availability"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:[u.availability,"%"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"annual uptime"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase",children:"Financial Impact"}),(0,F.jsxs)("div",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:["$",(u.financialImpact/1e3).toFixed(0),"k"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"annual exposure"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 uppercase",children:"SLA Breach Risk"}),(0,F.jsx)("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:u.slaBreachProbability}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"breach probability"})]})]}),(0,F.jsxs)("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center",children:["Est. MTTR ",(0,F.jsx)(ei,{content:"Mean Time To Repair: average duration to restore equipment after failure."})]}),(0,F.jsx)("div",{className:"text-sm font-bold text-amber-600 dark:text-amber-400",children:4===r?"15 min":"45 min"}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"Mean Time To Repair"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase flex items-center",children:["Est. MTBF ",(0,F.jsx)(ei,{content:"Mean Time Between Failures: average operating time between equipment failures."})]}),(0,F.jsx)("div",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:4===r?"8,760 hrs":"4,380 hrs"}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500",children:"Mean Time Between Failures"})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"})," 5-Year Risk Projection"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mb-2",children:"Without mitigation, risk compounds at ~6%/year due to aging infrastructure"}),(0,F.jsx)(iB,{width:"100%",height:200,children:(0,F.jsxs)(NR,{data:p,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #334155",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#94a3b8"}}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"score",stroke:"#ef4444",fill:"url(#riskGradient)",strokeWidth:2}),(0,F.jsx)("defs",{children:(0,F.jsxs)("linearGradient",{id:"riskGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.3}),(0,F.jsx)("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:.05})]})})]})})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,F.jsx)(NE,{className:"w-4 h-4 text-orange-500 dark:text-orange-400"})," Environmental Risk"]}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["AQI Impact ",(0,F.jsx)(ei,{content:"Air Quality Index effect on equipment: high AQI accelerates filter clogging, increases cooling load, and may require facility shutdown above AQI 300."})]}),(0,F.jsxs)("span",{className:`font-bold ${(t.environment?.baselineAQI??50)>100?"text-red-600 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:["AQI ",t.environment?.baselineAQI??50]})]}),(0,F.jsx)("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 via-amber-500 to-red-500",style:{width:`${Math.min(100,(t.environment?.baselineAQI??50)/300*100)}%`}})}),(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Grid Carbon"}),(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-bold",children:[t.environment?.gridCarbonIntensity??.5," kgCO/kWh"]})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600 dark:text-slate-500 mt-2 p-2 bg-white dark:bg-slate-800/50 rounded border border-slate-200 dark:border-transparent",children:"High AQI reduces filter life, increasing maintenance costs and swap frequency."})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,F.jsx)(NA,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"})," Supply Chain Risk"]}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Import Difficulty"}),(0,F.jsx)("span",{className:`font-bold ${"ID"===t.id?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"}`,children:"ID"===t.id||"IN"===t.id?"High":"JP"===t.id||"AU"===t.id?"Low":"Medium"})]}),(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Critical Spares Lead ",(0,F.jsx)(ei,{content:"Lead time for procuring critical replacement parts. Longer lead times increase downtime risk during equipment failures."})]}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-bold",children:"US"===t.id||"JP"===t.id?"2-4 weeks":"6-12 weeks"})]}),(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Local MFG Availability"}),(0,F.jsx)("span",{className:`font-bold ${"US"===t.id||"JP"===t.id?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:"US"===t.id||"JP"===t.id||"DE"===t.id?"Good":"Limited"})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600 dark:text-slate-500 mt-2 p-2 bg-white dark:bg-slate-800/50 rounded border border-slate-200 dark:border-transparent",children:"Long lead times increase the risk of extended outages during equipment failure."})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,F.jsx)(NT,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})," Compliance Risk"]}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Data Sovereignty ",(0,F.jsx)(ei,{content:"Legal requirements for data residency within national borders. References local regulations (e.g., Indonesia PP 71/2019, EU GDPR, Japan APPI)."})]}),(0,F.jsx)("span",{className:`font-bold ${"ID"===t.id?"text-amber-600 dark:text-amber-400":"text-slate-900 dark:text-white"}`,children:"ID"===t.id?"PP 71/2019":"DE"===t.id?"GDPR":"JP"===t.id?"APPI":"Standard"})]}),(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Labor Regulations ",(0,F.jsx)(ei,{content:"Local employment laws affecting shift patterns, overtime limits, and worker protections (e.g., Indonesia PP 35/2021)."})]}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-bold",children:"ID"===t.id?"PP 35/2021":"JP"===t.id?"LSA":"Standard"})]}),(0,F.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Certifications Required"}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-bold",children:4===r?"Uptime IV, ISO 27001":"Uptime III, ISO 27001"})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-600 dark:text-slate-500 mt-2 p-2 bg-white dark:bg-slate-800/50 rounded border border-slate-200 dark:border-transparent",children:"Non-compliance can result in operational shutdown or heavy penalties."})]})]})]}),(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-300 dark:border-slate-800 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,F.jsx)(Ns,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})," Mitigation Strategies"]}),(0,F.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:f.slice(0,6).map(e=>(0,F.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-white dark:bg-slate-800/30 rounded-lg border border-slate-200 dark:border-slate-700/50 shadow-sm dark:shadow-none",children:[g(e.category),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-xs font-medium text-slate-900 dark:text-white",children:e.title}),(0,F.jsxs)("div",{className:"text-[11px] text-emerald-600 dark:text-emerald-400 mt-1",children:[" ",e.mitigation]})]})]},e.id))})]})]})}Ce.displayName="Area";let Ca={air:{chargeKgPerKw:.15,leakRatePct:.05,gwp:2088},inrow:{chargeKgPerKw:.12,leakRatePct:.04,gwp:2088},rdhx:{chargeKgPerKw:.08,leakRatePct:.03,gwp:1430},liquid:{chargeKgPerKw:.03,leakRatePct:.02,gwp:675}},Cr=e=>{let{itLoadKw:t,pue:a,gridCarbonIntensity:r,coolingType:n,renewableOption:s,fuelHours:i,genType:l}=e,o=8760*t/1e3,c=o*a,d=c-o,u=1e3*c*r/1e3,m=Ca[n]||Ca.air,x=t*(a-1)*m.chargeKgPerKw*m.leakRatePct*m.gwp/1e3,h=.3*t*200*("hvo"===l?.2:1)*2.68/1e3+x,p=(h+u)*.12,f=h+u+p,b=0;"solar"===s&&(b=15),"solar_bess"===s&&(b=30),"liquid"===n&&(b+=5),"rdhx"===n&&(b+=3);let g=f*(1-b/100),y=25*g,v=8760*t*.7505/1e3,j=g/v,k="C";k=j<.5?"A":j<.75?"B":j<1?"C":j<1.3?"D":"F";let w=(e,t)=>e<=0?0:t<=0?99:Math.round(e/t*10)/10,N=.3*t*1200,C=.15*c*80,S=.1*t*500,P=.08*c*80,M=300*t,O=.3*d*80,E=[{name:"Solar PV Array",description:`${Math.round(.3*t)}kW rooftop solar installation`,investmentUSD:N,annualSavingsTonCO2:.15*f,annualSavingsUSD:C,paybackYears:w(N,C),color:"#f59e0b"},{name:"Battery Energy Storage",description:`${Math.round(.1*t)}kWh BESS for peak shaving`,investmentUSD:S,annualSavingsTonCO2:.08*f,annualSavingsUSD:P,paybackYears:w(S,P),color:"#3b82f6"},{name:"PPA (Green Energy)",description:"100% renewable Power Purchase Agreement",investmentUSD:0,annualSavingsTonCO2:.85*u,annualSavingsUSD:.85*y,paybackYears:0,color:"#10b981"},{name:"Liquid Cooling Retrofit",description:"Direct-to-chip liquid cooling conversion",investmentUSD:M,annualSavingsTonCO2:.12*f,annualSavingsUSD:O,paybackYears:w(M,O),color:"#06b6d4"}];return{annualEnergyMWh:c,annualEmissionsTonCO2:f,carbonIntensityPerKw:1e3*f/t,pueEfficiency:a,itEnergyMWh:o,coolingEnergyMWh:d,lossEnergyMWh:.03*c,carbonOffsetCostUSD:y,carbonTaxExposureUSD:50*g,renewableReductionPct:b,netEmissionsTonCO2:g,industryAvgEmissions:v,efficiencyRating:k,scope1:h,scope2:u,scope3:p,scope1Refrigerant:x,reductionScenarios:E}},Cn=(0,X.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Cs=(0,X.default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Ci=(0,X.default)("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var Cl=e.i(15662),Co=["axis","item"],Cc=(0,z.forwardRef)((e,t)=>z.createElement(f1,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Co,tooltipPayloadSearcher:ny,categoricalChartProps:e,ref:t}));class Cd{constructor(e){var{x:t,y:a}=e;this.xAxisScale=t,this.yAxisScale=a}map(e,t){var a,r,{position:n}=t;return{x:null!=(a=this.xAxisScale.map(e.x,{position:n}))?a:0,y:null!=(r=this.yAxisScale.map(e.y,{position:n}))?r:0}}mapWithFallback(e,t){var a,r,n,s,{position:i,fallback:l}=t;return n="rangeMin"===l?this.yAxisScale.rangeMin():"rangeMax"===l?this.yAxisScale.rangeMax():0,s="rangeMin"===l?this.xAxisScale.rangeMin():"rangeMax"===l?this.xAxisScale.rangeMax():0,{x:null!=(a=this.xAxisScale.map(e.x,{position:i}))?a:s,y:null!=(r=this.yAxisScale.map(e.y,{position:i}))?r:n}}isInRange(e){var{x:t,y:a}=e,r=null==t||this.xAxisScale.isInRange(t),n=null==a||this.yAxisScale.isInRange(a);return r&&n}}function Cu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Cm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cu(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Cx(){return(Cx=Object.assign.bind()).apply(null,arguments)}function Ch(e){var t=s$();return(0,z.useEffect)(()=>(t(pc(e)),()=>{t(pd(e))})),null}function Cp(e){var{xAxisId:t,yAxisId:a,shape:r,className:n,ifOverflow:s}=e,i=iw(),l=(0,z.useContext)(fV),o=sB(e=>uV(e,t)),c=sB(e=>uX(e,a)),d=sB(e=>m8(e,"xAxis",t,i)),u=sB(e=>m8(e,"yAxis",a,i)),m=iK();if(!l||!m||null==o||null==c||null==d||null==u)return null;var x=((e,t,a,r,n,s,i)=>{var l,o,{x:c,y:d,segment:u,ifOverflow:m}=i,x=nc(c);return nc(d)?((e,t,a,r,n,s)=>{var{x:i,width:l}=s,o=n.map(e,{position:a});if(!s0(o)||"discard"===t&&!n.isInRange(o))return null;var c=[{x:i+l,y:o},{x:i,y:o}];return"left"===r?c.reverse():c})(d,m,r,s,t,a):x?((e,t,a,r,n,s)=>{var{y:i,height:l}=s,o=n.map(e,{position:a});if(!s0(o)||"discard"===t&&!n.isInRange(o))return null;var c=[{x:o,y:i+l},{x:o,y:i}];return"top"===r?c.reverse():c})(c,m,r,n,e,a):null!=u&&2===u.length?(o=[(l=new Cd({x:e,y:t})).mapWithFallback(u[0],{position:r,fallback:"rangeMin"}),l.mapWithFallback(u[1],{position:r,fallback:"rangeMax"})],"discard"===m&&o.some(e=>!l.isInRange(e))?null:o):null})(d,u,m,e.position,o.orientation,c.orientation,e);if(!x)return null;var h=x[0],p=x[1];if(null==h||null==p)return null;var{x:f,y:b}=h,{x:g,y:y}=p,v=Cm(Cm({clipPath:"hidden"===s?"url(#".concat(l,")"):void 0},fx(e)),{},{x1:f,y1:b,x2:g,y2:y}),j=(e=>{var{x1:t,y1:a,x2:r,y2:n}=e;return((e,t)=>{var{x:a,y:r}=e,{x:n,y:s}=t;return{x:Math.min(a,n),y:Math.min(r,s),width:Math.abs(n-a),height:Math.abs(s-r)}})({x:t,y:a},{x:r,y:n})})({x1:f,y1:b,x2:g,y2:y});return z.createElement(bA,{zIndex:e.zIndex},z.createElement(f8,{className:(0,eh.clsx)("recharts-reference-line",n)},((e,t)=>{var a;if(z.isValidElement(e))a=z.cloneElement(e,t);else if("function"==typeof e)a=e(t);else{if(!s0(t.x1)||!s0(t.y1)||!s0(t.x2)||!s0(t.y2))return null;a=z.createElement("line",Cx({},t,{className:"recharts-reference-line-line"}))}return a})(r,v),z.createElement(bq,Cx({},j,{lowerWidth:j.width,upperWidth:j.width}),z.createElement(bZ,{label:e.label}),e.children)))}var Cf={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:ud.line};function Cb(e){var t=fJ(e,Cf);return z.createElement(z.Fragment,null,z.createElement(Ch,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),z.createElement(Cp,t))}Cb.displayName="ReferenceLine";let Cg=()=>{let t,a,r,n,s,i,l,o,{selectedCountry:c,inputs:d}=(0,$.useSimulationStore)(),u=(0,ew.useCapexStore)(),[m,x]=(0,z.useState)(!1),h=(0,z.useMemo)(()=>{if(!c)return null;let e=u.inputs.itLoad||d.itLoad||1e3,t=u.inputs.coolingType||d.coolingType||"air";return Cr({itLoadKw:e,pue:(0,wO.getPUE)(t),gridCarbonIntensity:c.environment.gridCarbonIntensity,coolingType:t,renewableOption:u.inputs.renewableOption||"none",fuelHours:u.inputs.fuelHours||48,genType:u.inputs.genType||"diesel",countryName:c.name})},[c,d,u.inputs]);if(!h||!c)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view carbon analysis."});let p=Math.max(h.scope1,h.scope2,h.scope3);return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(Ny.Leaf,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"}),"Carbon & ESG Dashboard"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1 flex items-center",children:[c.name,"  ",el(u.inputs.itLoad||d.itLoad||1e3)," kW IT Load  Grid: ",c.environment.gridCarbonIntensity," kgCO/kWh",(0,F.jsx)(ei,{content:"Carbon intensity of the local electricity grid in kgCO2 per kWh. Varies by country based on energy mix (coal, gas, nuclear, renewables)."})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-4",children:[(0,F.jsxs)("div",{className:`px-4 py-2 rounded-xl border text-xl font-bold ${{A:"text-emerald-400 bg-emerald-500/10 border-emerald-500/30",B:"text-cyan-400 bg-cyan-500/10 border-cyan-500/30",C:"text-amber-400 bg-amber-500/10 border-amber-500/30",D:"text-orange-400 bg-orange-500/10 border-orange-500/30",F:"text-red-400 bg-red-500/10 border-red-500/30"}[h.efficiencyRating]} flex items-center gap-1`,children:["Rating: ",h.efficiencyRating,(0,F.jsx)(ei,{content:"Efficiency rating from A (best) to F (worst) based on PUE, carbon intensity, and renewable energy adoption. A = hyperscale-class efficiency, F = legacy facility with high emissions."})]}),(0,F.jsx)(eI,{isGenerating:m,onExport:async()=>{if(c&&h){x(!0);try{let{generateCarbonPDF:t}=await e.A(28094),{generateCarbonNarrative:a}=await e.A(41449),r=a(h);await t(c,h,r)}finally{x(!1)}}}})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Ci,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Annual Emissions"}),(0,F.jsx)(ei,{content:"Total Scope 1+2+3 greenhouse gas emissions in tonnes CO2 equivalent per year."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[el(h.annualEmissionsTonCO2)," ",(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"tCO"})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Net: ",el(h.netEmissionsTonCO2)," tCO (",h.renewableReductionPct>0?`-${h.renewableReductionPct}%`:"no offset",")"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Annual Energy"}),(0,F.jsx)(ei,{content:"Total facility energy consumption including IT load, cooling overhead, and distribution losses. PUE ratio shown below."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[el(h.annualEnergyMWh)," ",(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"MWh"})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["PUE: ",h.pueEfficiency.toFixed(2)]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Offset Cost"}),(0,F.jsx)(ei,{content:"Cost to offset remaining carbon emissions through voluntary carbon credits at current market rate ($25/tCO2)."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(h.carbonOffsetCostUSD)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"@ $25/tCO voluntary market"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eM,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Carbon Tax Risk"}),(0,F.jsx)(ei,{content:"Potential annual carbon tax liability based on EU ETS-equivalent rate ($50/tCO2). Risk increases with stricter regulations."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(h.carbonTaxExposureUSD)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"@ $50/tCO (EU ETS rate)"})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center",children:["GHG Protocol Scope Breakdown",(0,F.jsx)(ei,{content:"Greenhouse Gas Protocol framework: Scope 1 (direct emissions from owned generators), Scope 2 (indirect emissions from purchased electricity), Scope 3 (value chain emissions from construction, commuting, waste)."})]})}),(0,F.jsxs)(t3,{className:"space-y-4",children:[[{label:"Scope 1  Direct",value:h.scope1,color:"#ef4444",desc:"Generators, fuel combustion",tip:"Scope 1: Direct GHG emissions from sources owned or controlled by the facility, such as diesel/gas generators and on-site fuel combustion."},{label:"Scope 2  Grid",value:h.scope2,color:"#f59e0b",desc:"Purchased electricity",tip:"Scope 2: Indirect emissions from purchased electricity consumed by the data center. Driven by grid carbon intensity and total energy demand."},{label:"Scope 3  Supply Chain",value:h.scope3,color:"#8b5cf6",desc:"Estimated upstream/downstream",tip:"Scope 3: All other indirect emissions in the value chain  embodied carbon in construction materials, employee commuting, waste disposal, and upstream fuel production."}].map(e=>(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex justify-between items-baseline mb-1",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center",children:[e.label,(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsxs)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[el(e.value,1)," tCO"]})]}),(0,F.jsx)("div",{className:"h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${p>0?e.value/p*100:0}%`,backgroundColor:e.color}})}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-0.5",children:e.desc})]},e.label)),(0,F.jsxs)("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[(0,F.jsxs)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 flex items-center",children:["Total GHG Emissions",(0,F.jsx)(ei,{content:"Sum of all three scopes (Scope 1 + 2 + 3) before any renewable energy offsets are applied. This is your gross annual carbon footprint."})]}),(0,F.jsxs)("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[el(h.annualEmissionsTonCO2,1)," tCO/yr"]})]})]})]}),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center",children:["Energy Consumption Breakdown",(0,F.jsx)(ei,{content:"Breakdown of total facility energy: IT load, cooling, lighting, UPS losses, and other mechanical systems. PUE determines the ratio of total to IT power."})]})}),(0,F.jsxs)(t3,{className:"space-y-4",children:[[{label:"IT Equipment",value:h.itEnergyMWh,color:"#3b82f6",pct:h.itEnergyMWh/h.annualEnergyMWh*100,tip:"Energy consumed by servers, storage, and networking equipment. This is the useful compute load that PUE efficiency is measured against."},{label:"Cooling Systems",value:h.coolingEnergyMWh,color:"#06b6d4",pct:h.coolingEnergyMWh/h.annualEnergyMWh*100,tip:"Energy used by CRAC/CRAH units, chillers, cooling towers, and pumps. Varies significantly by cooling type (air, DX, chilled water, liquid)."},{label:"Distribution Losses",value:h.lossEnergyMWh,color:"#64748b",pct:h.lossEnergyMWh/h.annualEnergyMWh*100,tip:"Energy lost in power distribution: UPS conversion losses, PDU transformer losses, switchgear, and cable resistance. Typically 5-12% of total load."}].map(e=>(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex justify-between items-baseline mb-1",children:[(0,F.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center",children:[e.label,(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsxs)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[el(e.value)," MWh (",e.pct.toFixed(1),"%)"]})]}),(0,F.jsx)("div",{className:"h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${e.pct}%`,backgroundColor:e.color}})})]},e.label)),(0,F.jsxs)("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,F.jsxs)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 flex items-center",children:["vs Industry Average",(0,F.jsx)(ei,{content:"Comparison against industry benchmarks: average PUE ~1.58 (Uptime Institute 2024), best-in-class <1.2 for hyperscale facilities."})]}),(0,F.jsxs)("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[el(h.industryAvgEmissions,1)," tCO/yr"]})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["Your facility is ",h.netEmissionsTonCO2<h.industryAvgEmissions?(0,F.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:[el((1-h.netEmissionsTonCO2/h.industryAvgEmissions)*100,1),"% below"]}):(0,F.jsxs)("span",{className:"text-red-600 dark:text-red-400 font-medium",children:[el((h.netEmissionsTonCO2/h.industryAvgEmissions-1)*100,1),"% above"]})," industry average"]})]})]})]})]}),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Cn,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),"Carbon Reduction Investment Scenarios",(0,F.jsx)(ei,{content:"Modeled investment pathways to reduce carbon emissions. Each scenario shows upfront cost, annual CO2 savings, financial savings, and payback period based on current facility parameters."})]})}),(0,F.jsx)(t3,{children:(0,F.jsx)("div",{className:"grid grid-cols-4 gap-3",children:h.reductionScenarios.map((e,t)=>(0,F.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hover:border-slate-300 dark:hover:border-slate-600 transition-colors",children:[(0,F.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:e.color+"20"},children:(0,F.jsx)(Cs,{className:"w-4 h-4",style:{color:e.color}})}),(0,F.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1",children:e.name}),(0,F.jsx)("p",{className:"text-[10px] text-slate-600 dark:text-slate-500 mb-3 leading-relaxed",children:e.description}),(0,F.jsxs)("div",{className:"space-y-1.5",children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Investment",(0,F.jsx)(ei,{content:"Estimated upfront capital expenditure required to implement this carbon reduction scenario."})]}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:eo(e.investmentUSD)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["CO Saved/yr",(0,F.jsx)(ei,{content:"Projected annual reduction in CO2 emissions (tonnes) if this scenario is fully implemented."})]}),(0,F.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:[el(e.annualSavingsTonCO2,1)," t"]})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Savings/yr",(0,F.jsx)(ei,{content:"Annual financial savings from reduced energy costs and avoided carbon tax/offset expenses."})]}),(0,F.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:eo(e.annualSavingsUSD)})]}),e.paybackYears>0&&(0,F.jsxs)("div",{className:"flex justify-between text-xs pt-1 border-t border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:["Payback",(0,F.jsx)(ei,{content:"Simple payback period: years to recover initial investment from annual savings. Does not account for discount rate or escalation."})]}),(0,F.jsxs)("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:[e.paybackYears," yrs"]})]})]})]},t))})})]}),(a=[{name:"Design PUE",value:t=h.pueEfficiency,color:"#10b981",tip:"Your facility's design PUE based on selected cooling type. This is the theoretical efficiency under normal operating conditions."},{name:"Industry Avg",value:1.58,color:"#f59e0b",tip:"Global industry average PUE of 1.58 per Uptime Institute 2024 Annual Survey. Includes all data center types and sizes."},{name:"Best-in-Class",value:1.1,color:"#06b6d4",tip:"Best-in-class PUE achieved by leading hyperscale operators (Google, Meta) using advanced liquid cooling and free-air economization."}],(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),"PUE Benchmark Comparison",(0,F.jsx)(ei,{content:"Power Usage Effectiveness (PUE) = Total Facility Power / IT Equipment Power. A PUE of 1.0 means all power goes to IT. Lower is better. Industry average is ~1.58 (Uptime Institute 2024)."})]})}),(0,F.jsxs)(t3,{className:"p-4",children:[(0,F.jsx)(iB,{width:"100%",height:180,children:(0,F.jsxs)(Cc,{data:a,layout:"vertical",margin:{left:100,right:40},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),(0,F.jsx)(kt,{type:"number",domain:[1,2],stroke:"#64748b",fontSize:11,tickFormatter:e=>e.toFixed(2)}),(0,F.jsx)(km,{type:"category",dataKey:"name",stroke:"#64748b",fontSize:11,width:90}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:e=>[e.toFixed(2),"PUE"]}),(0,F.jsx)(v1,{dataKey:"value",radius:[0,6,6,0],barSize:28,children:a.map((e,t)=>(0,F.jsx)(f9,{fill:e.color},t))})]})}),(0,F.jsx)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs text-slate-500",children:a.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.color}}),(0,F.jsxs)("span",{children:[e.name,": ",e.value.toFixed(2)]}),(0,F.jsx)(ei,{content:e.tip})]},t))}),(0,F.jsx)("div",{className:"mt-3 text-center",children:(0,F.jsxs)("span",{className:`text-sm font-medium ${t<=1.2?"text-emerald-600 dark:text-emerald-400":t<=1.5?"text-amber-600 dark:text-amber-400":"text-red-500 dark:text-red-400"}`,children:["Your design PUE of ",t.toFixed(2)," is ",t<=1.2?"Best-in-Class":t<=1.4?"Above Average":t<=1.58?"Near Industry Average":"Below Industry Average"]})})]})]})),(r=new Date().getFullYear(),n=h.netEmissionsTonCO2,s=h.renewableReductionPct/100,o=(l=Array.from({length:(i=2050-r)+1},(e,t)=>{let a=r+t,l=(1-s)*(1-Math.pow(1-t/i,2.5));return{year:a,emissions:Math.round(Math.max(0,n*(1-Math.min(1,s+l)))),milestone:2030===a?"2030 Target":2040===a?"2040 Target":2050===a?"Net-Zero":void 0}})).filter((e,t)=>t%2==0||t===l.length-1),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Cl.Target,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),"Carbon Net-Zero Trajectory (",r," - 2050)",(0,F.jsx)(ei,{content:"Projected emissions reduction pathway assuming accelerating renewable energy adoption over time. Uses a logistic curve model from current renewable offset to full net-zero by 2050, aligned with Paris Agreement targets."})]})}),(0,F.jsxs)(t3,{className:"p-4",children:[(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(NR,{data:o,children:[(0,F.jsx)("defs",{children:(0,F.jsxs)("linearGradient",{id:"carbonTrajectoryGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),(0,F.jsx)("stop",{offset:"50%",stopColor:"#f59e0b",stopOpacity:.15}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.05})]})}),(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",stroke:"#64748b",fontSize:11,tickFormatter:e=>`${e}`}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,tickFormatter:e=>`${el(e)}t`}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:e=>[`${el(e)} tCO2`,"Emissions"]}),(0,F.jsx)(Cb,{x:2030,stroke:"#f59e0b",strokeDasharray:"4 4",label:{value:"2030",fill:"#f59e0b",fontSize:10,position:"top"}}),(0,F.jsx)(Cb,{x:2040,stroke:"#06b6d4",strokeDasharray:"4 4",label:{value:"2040",fill:"#06b6d4",fontSize:10,position:"top"}}),(0,F.jsx)(Cb,{y:0,stroke:"#10b981",strokeWidth:2,label:{value:"Net-Zero",fill:"#10b981",fontSize:10,position:"insideTopRight"}}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"emissions",stroke:"#ef4444",fill:"url(#carbonTrajectoryGrad)",strokeWidth:2})]})}),(0,F.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[{year:r,label:"Current",value:n,color:"text-red-500 dark:text-red-400",tip:"Current annual net emissions after applying any existing renewable energy offsets from your selected configuration."},{year:2030,label:"2030 Target",value:l.find(e=>2030===e.year)?.emissions??0,color:"text-amber-500 dark:text-amber-400",tip:"2030 interim target aligned with EU Green Deal and corporate ESG commitments. Typically aims for 40-55% reduction from baseline."},{year:2050,label:"Net-Zero Target",value:0,color:"text-emerald-500 dark:text-emerald-400",tip:"Paris Agreement net-zero target year. Requires eliminating or fully offsetting all greenhouse gas emissions by 2050."}].map((e,t)=>(0,F.jsxs)("div",{className:"text-center p-2 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500 flex items-center justify-center",children:[e.label," (",e.year,")",(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsxs)("div",{className:`text-lg font-bold font-mono ${e.color}`,children:[el(e.value)," ",(0,F.jsx)("span",{className:"text-xs text-slate-400",children:"tCO2"})]})]},t))})]})]}))]})},Cy=e=>{let t=[];for(let a=0;a<e;a++)0===a?t.push(.3):1===a?t.push(.55):2===a?t.push(.75):3===a?t.push(.88):t.push(Math.min(.97,.88+(a-3)*.02));return t};Cy(10);let Cv=(0,X.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Cj=(0,X.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var Ck=e.i(44527);let Cw=(0,X.default)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);var CN=["axis"],CC=(0,z.forwardRef)((e,t)=>z.createElement(f1,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:CN,tooltipPayloadSearcher:ny,categoricalChartProps:e,ref:t})),CS=e.i(17046);let CP=({value:e,onChange:t,className:a=""})=>{let[r,n]=(0,z.useState)(!1),[s,i]=(0,z.useState)(!1),[l,o]=(0,z.useState)(""),c=()=>{n(!1);let a=Number(l);isNaN(a)||a===Math.round(e)||(t(a),i(!0))};return r?(0,F.jsx)("input",{type:"number",className:"w-20 p-0.5 text-xs text-right text-slate-900 dark:text-white bg-white dark:bg-slate-800 border border-cyan-400 dark:border-cyan-500 rounded outline-none",value:l,onChange:e=>o(e.target.value),onBlur:c,onKeyDown:e=>"Enter"===e.key&&c(),autoFocus:!0}):(0,F.jsx)("span",{className:`cursor-pointer hover:underline hover:decoration-dotted ${s?"ring-1 ring-amber-500/50 rounded px-1":""} ${a}`,onClick:()=>{n(!0),o(Math.round(e).toString())},title:"Click to override",children:eo(e)})},CM=()=>{let e,t,a,r,n,s,i,l,o,c,d,{selectedCountry:u,inputs:m}=(0,$.useSimulationStore)(),x=H(),h=(0,ew.useCapexStore)(),p=h.results,[f,b]=(0,z.useState)(!1),[g,y]=(0,z.useState)({revenuePerKwMonth:150,discountRate:.1,projectLifeYears:10,escalationRate:.03,opexEscalation:.035,taxRate:.25,depreciationYears:15}),[v,j]=(0,z.useState)({nrcPerKw:250,nrcCustomFitout:5e4,nrcCrossConnect:15e3,mrcPerKwMonth:150,mrcEscalation:3,mrcCrossConnectMonthly:5e3,contractYears:10,takeOrPayPct:70}),k=(0,z.useRef)(!1),w=(0,z.useRef)(!1);(0,z.useEffect)(()=>{k.current=!1,w.current=!1},[u?.id]),(0,z.useEffect)(()=>{if(!u||k.current)return;let e=u.economy,t=m.tierLevel??3;y({revenuePerKwMonth:Math.round((120+500*e.electricityRate)*(4===t?1.4:3===t?1:.75)),discountRate:Math.min(.18,Math.round((.06+(e.inflationRate>.05?.04:e.inflationRate>.03?.02:.01)+e.inflationRate)*100)/100),projectLifeYears:10,escalationRate:Math.round(1e3*e.inflationRate)/1e3,opexEscalation:Math.round(1e3*e.laborEscalation)/1e3,taxRate:Math.round(1e3*e.taxRate)/1e3,depreciationYears:15})},[u?.id,m.tierLevel]),(0,z.useEffect)(()=>{if(!u||w.current)return;let e=u.economy,t=m.tierLevel??3,a=m.itLoad??1e3,r=p?Math.round(p.total/Math.max(1,a)):0,n=r>0?Math.round(.02*r):4===t?350:3===t?250:150,s=Math.round((120+500*e.electricityRate)*(4===t?1.4:3===t?1:.75));j({nrcPerKw:Math.max(100,n),nrcCustomFitout:Math.round(5e4*(4===t?1.5:3===t?1:.7)),nrcCrossConnect:15e3,mrcPerKwMonth:s,mrcEscalation:Math.round(100*e.inflationRate),mrcCrossConnectMonthly:5e3,contractYears:10,takeOrPayPct:70})},[u?.id,m.tierLevel,m.itLoad,p?.total]);let[N,C]=(0,z.useState)({}),S=(e,t)=>{k.current=!0,y(a=>({...a,[e]:t}))},P=(e,t)=>{w.current=!0,j(a=>({...a,[e]:t}))},M=(0,z.useCallback)((e,t,a)=>{C(r=>({...r,[e]:{...r[e]||{},[t]:a}}))},[]),O=(0,z.useMemo)(()=>{if(!u)return 0;let e=u.labor;return(x.headcount_ShiftLead*e.baseSalary_ShiftLead+x.headcount_Engineer*e.baseSalary_Engineer+x.headcount_Technician*e.baseSalary_Technician+x.headcount_Admin*e.baseSalary_Admin+x.headcount_Janitor*e.baseSalary_Janitor)*12+1.4*x.itLoad*876/1e3+50*x.itLoad},[u,x]),E=(0,z.useMemo)(()=>{if(!p)return null;let e=wT(g.projectLifeYears);return wI({totalCapex:p.total,annualOpex:O,revenuePerKwMonth:g.revenuePerKwMonth,itLoadKw:m.itLoad,discountRate:g.discountRate,projectLifeYears:g.projectLifeYears,escalationRate:g.escalationRate,opexEscalation:g.opexEscalation,occupancyRamp:e,taxRate:g.taxRate,depreciationYears:g.depreciationYears})},[p,O,m.itLoad,g]),A=(0,z.useMemo)(()=>{let e=h.inputs.itLoad||m.itLoad||1e3,t=v.contractYears;return(e=>{let{itLoadKw:t,nrcPerKw:a,nrcCustomFitout:r,nrcCrossConnect:n,mrcPerKwMonth:s,mrcEscalation:i,mrcCrossConnectMonthly:l,contractYears:o,takeOrPayPct:c,occupancyRamp:d}=e,u=a*t+r+n,m=[],x=0,h=0;for(let e=0;e<o;e++){let a=d[e]??.95,r=Math.max(c,a)*t,n=s*Math.pow(1+i,e)*r,o=12*n,p=12*l*Math.pow(1+i,e),f=o+p,b=0===e?u:0,g=b+f;x+=g,h+=o,m.push({year:e+1,occupancy:a,billedKw:r,mrcMonthly:n,mrcAnnual:o,crossConnectAnnual:p,totalRecurring:f,nrc:b,totalRevenue:g,cumulativeRevenue:x})}let p=x,f=h/(12*o*t),b=m[0],g=b?b.totalRecurring/(t/1e3):0;return{totalNRC:u,totalMRC_lifetime:h,totalRevenue_lifetime:p,avgMrcPerKwMonth:f,contractValue:p,effectiveRate:p/(12*o*t),yearDetails:m,revenuePerMW_year1:g,blendedMonthlyRevenue:p/(12*o)}})({itLoadKw:e,nrcPerKw:v.nrcPerKw,nrcCustomFitout:v.nrcCustomFitout,nrcCrossConnect:v.nrcCrossConnect,mrcPerKwMonth:v.mrcPerKwMonth,mrcEscalation:v.mrcEscalation/100,mrcCrossConnectMonthly:v.mrcCrossConnectMonthly,contractYears:t,takeOrPayPct:v.takeOrPayPct/100,occupancyRamp:Cy(t)})},[v,m.itLoad,h.inputs.itLoad]),T=(0,z.useMemo)(()=>p?Array.from({length:8},(e,t)=>{let a=.3+.1*t,r=12*g.revenuePerKwMonth*m.itLoad*a,n=r-O,s=p.total,i=-s;for(let e=1;e<=g.projectLifeYears;e++)i+=(r*Math.pow(1+g.escalationRate,e-1)-O*Math.pow(1+g.opexEscalation,e-1))/Math.pow(1+g.discountRate,e);return{occupancy:`${(100*a).toFixed(0)}%`,occupancyPct:100*a,npv:i,irr:s>0?n/s*100:0}}):[],[p,g,O,m.itLoad]),I=(0,z.useMemo)(()=>{if(!u)return[];let e=u.labor,t=(m.headcount_ShiftLead*e.baseSalary_ShiftLead+m.headcount_Engineer*e.baseSalary_Engineer+m.headcount_Technician*e.baseSalary_Technician+m.headcount_Admin*e.baseSalary_Admin+m.headcount_Janitor*e.baseSalary_Janitor)*12,a=50*m.itLoad,r=1.4*m.itLoad*876/1e3,n=1+(g.opexEscalation||.035);return[{category:"Labor",budget:t,forecast:t*n},{category:"Maintenance",budget:a,forecast:1.05*n*a},{category:"Energy",budget:r,forecast:.98*n*r},{category:"Vendor",budget:5e4,forecast:5e4*n}]},[u,m,g.opexEscalation]);if(!E||!p||!u)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Configure CAPEX Engine first to view financial analysis."});let R=E.cashflows.map(e=>({year:`Y${e.year}`,revenue:e.revenue,opex:-e.opex,cumCashflow:e.cumulativeCashflow,cumDiscounted:e.cumulativeDiscountedCashflow})),D="w-full p-1.5 text-sm text-slate-900 dark:text-slate-200 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded outline-none focus:ring-1 focus:ring-cyan-500";return(0,F.jsxs)("div",{className:"flex gap-6",children:[(0,F.jsx)("div",{className:"w-[340px] flex-shrink-0 space-y-4 overflow-y-auto max-h-[calc(100vh-6rem)] pb-6",children:(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsxs)(t2,{className:"pb-2 flex flex-row items-center justify-between",children:[(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Nf.Calculator,{className:"w-4 h-4 text-indigo-500 dark:text-indigo-400"}),"Financial & Revenue Parameters"]}),(0,F.jsx)(eI,{isGenerating:f,onExport:async()=>{if(!u||!A)return;b(!0),await new Promise(e=>setTimeout(e,400));let e={};try{let t={scale:2,backgroundColor:"#ffffff",useCORS:!0,allowTaint:!0},a=document.getElementById("financial-cashflow-chart");a&&(e.cashflow=(await (0,wP.default)(a,t)).toDataURL("image/png"));let r=document.getElementById("financial-waterfall-chart");r&&(e.waterfall=(await (0,wP.default)(r,t)).toDataURL("image/png"));let n=document.getElementById("financial-mrc-chart");n&&(e.mrc=(await (0,wP.default)(n,t)).toDataURL("image/png"))}catch(e){console.warn("Failed to capture charts",e)}try{await (0,CS.generateFinancialPDF)(u,E,A,g,v,p.total,O,m.itLoad,e)}catch(e){console.error("Error generating Financial PDF:",e)}finally{b(!1)}},className:"px-2 py-1 text-[10px]",label:"PDF"})]}),(0,F.jsxs)(t3,{className:"space-y-4",children:[(0,F.jsx)("div",{className:"text-[10px] uppercase text-indigo-600 dark:text-indigo-400 font-semibold tracking-wider border-b border-indigo-200 dark:border-indigo-800/40 pb-1",children:"Financial Analysis"}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Revenue per kW/month ($) ",(0,F.jsx)(ei,{content:"Monthly colocation rate charged per kW of IT power. Industry range: $100-250/kW/month depending on market and tier."})]}),(0,F.jsx)("input",{type:"number",className:D,value:g.revenuePerKwMonth,onChange:e=>S("revenuePerKwMonth",Number(e.target.value))})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Discount Rate (%) ",(0,F.jsx)(ei,{content:"Weighted Average Cost of Capital (WACC). Used to discount future cashflows to present value. Typical DC range: 8-12%."})]}),(0,F.jsx)("input",{type:"number",className:D,value:(100*g.discountRate).toFixed(0),onChange:e=>S("discountRate",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Project Life (yrs) ",(0,F.jsx)(ei,{content:"Economic useful life of the facility for financial modeling. Typically 10-25 years for data centers."})]}),(0,F.jsx)("input",{type:"number",className:D,value:g.projectLifeYears,onChange:e=>S("projectLifeYears",Number(e.target.value)),min:5,max:25})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Rev. Escalation (%) ",(0,F.jsx)(ei,{content:"Monthly revenue per kW of IT capacity. Driven by market pricing and contract terms."})]}),(0,F.jsx)("input",{type:"number",className:D,value:(100*g.escalationRate).toFixed(0),onChange:e=>S("escalationRate",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["OPEX Escalation (%) ",(0,F.jsx)(ei,{content:"Annual operating expenditure normalized per kilowatt. Includes energy, maintenance, staffing, and overhead."})]}),(0,F.jsx)("input",{type:"number",className:D,value:(100*g.opexEscalation).toFixed(1),onChange:e=>S("opexEscalation",Number(e.target.value)/100)})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Tax Rate (%) ",(0,F.jsx)(ei,{content:"Corporate income tax rate applied to taxable income after depreciation. Varies by jurisdiction."})]}),(0,F.jsx)("input",{type:"number",className:D,value:(100*g.taxRate).toFixed(0),onChange:e=>S("taxRate",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Depreciation (yrs) ",(0,F.jsx)(ei,{content:"Straight-line depreciation period for CAPEX assets. Affects taxable income. Building: 20-25 yrs, MEP: 15-20 yrs."})]}),(0,F.jsx)("input",{type:"number",className:D,value:g.depreciationYears,onChange:e=>S("depreciationYears",Number(e.target.value)),min:5,max:25})]})]}),(0,F.jsx)("div",{className:"relative py-2",children:(0,F.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,F.jsx)("div",{className:"w-full border-t border-cyan-200 dark:border-cyan-800/30"})})}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-cyan-600 dark:text-cyan-400 font-semibold tracking-wider border-b border-cyan-200 dark:border-cyan-800/40 pb-1",children:"NRC (Non-Recurring Charges)"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["Setup Fee ($/kW) ",(0,F.jsx)(ei,{content:"Non-Recurring Charge per kW of contracted IT power. Covers initial provisioning, rack setup, and commissioning. Typically 2-5% of CAPEX per kW."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.nrcPerKw,onChange:e=>P("nrcPerKw",Number(e.target.value))})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["X-Connect Setup ($) ",(0,F.jsx)(ei,{content:"One-time cross-connect installation fee. Covers physical cabling between customer cage and meet-me room or carrier demarcation point."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.nrcCrossConnect,onChange:e=>P("nrcCrossConnect",Number(e.target.value))})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["Custom Fit-out ($) ",(0,F.jsx)(ei,{content:"Non-recurring charge for bespoke cage or suite buildout. Includes custom power distribution, containment, security cages, and tenant-specific infrastructure."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.nrcCustomFitout,onChange:e=>P("nrcCustomFitout",Number(e.target.value))})]}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-emerald-600 dark:text-emerald-400 font-semibold tracking-wider border-b border-emerald-200 dark:border-emerald-800/40 pb-1",children:"MRC (Monthly Recurring)"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["MRC $/kW/mo ",(0,F.jsx)(ei,{content:"Monthly Recurring Charge per kW of IT power. The core colocation fee covering power delivery, cooling, and facility access. Typically the largest revenue component."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.mrcPerKwMonth,onChange:e=>P("mrcPerKwMonth",Number(e.target.value))})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["Escalation (%/yr) ",(0,F.jsx)(ei,{content:"Annual MRC price escalation rate written into the contract. Typically tied to CPI or a fixed percentage (2-5%/yr) to offset rising energy and labor costs."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.mrcEscalation,onChange:e=>P("mrcEscalation",Number(e.target.value))})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["X-Connect MRC ($/mo) ",(0,F.jsx)(ei,{content:"Monthly recurring fee for cross-connect port maintenance. Covers fiber/copper patching, monitoring, and meet-me room access. Charged per active cross-connect."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.mrcCrossConnectMonthly,onChange:e=>P("mrcCrossConnectMonthly",Number(e.target.value))})]}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-amber-600 dark:text-amber-400 font-semibold tracking-wider border-b border-amber-200 dark:border-amber-800/40 pb-1",children:"Contract Terms"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["Lease Term (yrs) ",(0,F.jsx)(ei,{content:"Duration of the colocation lease agreement in years. Longer terms typically offer better rates and provide revenue predictability for the operator."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.contractYears,onChange:e=>P("contractYears",Number(e.target.value)),min:3,max:25})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-600 dark:text-slate-500 flex items-center gap-1",children:["Take-or-Pay (%) ",(0,F.jsx)(ei,{content:"Minimum committed power/space usage regardless of actual consumption. Protects the provider's revenue baseline. Typically 70-100% of contracted capacity."})]}),(0,F.jsx)("input",{type:"number",className:D,value:v.takeOrPayPct,onChange:e=>P("takeOrPayPct",Number(e.target.value)),min:0,max:100})]})]}),(0,F.jsxs)("div",{className:"p-2 bg-cyan-50 dark:bg-cyan-950/30 rounded border border-cyan-200 dark:border-cyan-900/40",children:[(0,F.jsx)("div",{className:"text-[9px] text-cyan-700 dark:text-cyan-400 uppercase mb-1",children:"Take-or-Pay Summary"}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:["Min ",v.takeOrPayPct,"% of ",h.inputs.itLoad||m.itLoad||1e3,"kW = ",(0,F.jsxs)("span",{className:"text-slate-900 dark:text-white font-medium",children:[Math.round(v.takeOrPayPct/100*(h.inputs.itLoad||m.itLoad||1e3))," kW"]})," billed regardless of usage"]})]}),(0,F.jsxs)("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 space-y-2",children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"CAPEX Investment"}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:eo(p.total)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Annual OPEX (est.)"}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:eo(O)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Annual Revenue (100%)"}),(0,F.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:eo(12*g.revenuePerKwMonth*m.itLoad)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Break-even Occupancy"}),(0,F.jsxs)("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:[E.breakEvenOccupancy,"%"]})]}),A&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Total NRC"}),(0,F.jsx)("span",{className:"text-cyan-600 dark:text-cyan-400 font-medium",children:eo(A.totalNRC)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:["TCV (",v.contractYears,"yr)"]}),(0,F.jsx)("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:eo(A.contractValue)})]})]})]})]})]})}),(0,F.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto pb-10",children:[(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(t1,{className:`border shadow-sm dark:shadow-none ${E.npv>=0?"bg-emerald-50 dark:bg-emerald-950/30 border-emerald-200 dark:border-emerald-800/50":"bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800/50"}`,children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"NPV"}),(0,F.jsx)(ei,{content:"Net Present Value  sum of all discounted future cashflows minus initial investment. Positive = value-creating project."})]}),(0,F.jsx)("div",{className:`text-2xl font-bold ${E.npv>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eo(E.npv)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["@ ",(100*g.discountRate).toFixed(0),"% discount rate"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-indigo-500 dark:text-indigo-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"IRR"}),(0,F.jsx)(ei,{content:"Internal Rate of Return  the discount rate at which NPV equals zero. Must exceed WACC (hurdle rate) for project approval."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-1",children:[E.irr.toFixed(1),"%",E.irr>100*g.discountRate?(0,F.jsx)(Cj,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):(0,F.jsx)(w4,{className:"w-4 h-4 text-red-600 dark:text-red-400"})]}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:E.irr>100*g.discountRate?"Exceeds hurdle rate":"Below hurdle rate"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Z,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Payback"}),(0,F.jsx)(ei,{content:"Simple payback period  years until cumulative net cashflow turns positive. Discounted payback accounts for time value of money."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[E.paybackPeriodYears," ",(0,F.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"yrs"})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Discounted: ",E.discountedPaybackYears," yrs"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Cv,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"ROI"}),(0,F.jsx)(ei,{content:"Return on Investment  total profit as percentage of initial CAPEX. PI (Profitability Index) = PV of cashflows / investment."})]}),(0,F.jsxs)("div",{className:`text-2xl font-bold ${E.roiPercent>0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[E.roiPercent.toFixed(0),"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["PI: ",E.profitabilityIndex.toFixed(2),"x"]})]})})]}),A&&(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(t1,{className:"bg-cyan-50 dark:bg-cyan-950/20 border-cyan-200 dark:border-cyan-800/40 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Ck.Receipt,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Total NRC"}),(0,F.jsx)(ei,{content:"Total Non-Recurring Charges  all one-time fees including setup, cross-connect installation, and custom fit-out. Collected at contract signing or deployment."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:eo(A.totalNRC)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"One-time setup fees"})]})}),(0,F.jsx)(t1,{className:"bg-emerald-50 dark:bg-emerald-950/20 border-emerald-200 dark:border-emerald-800/40 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Cw,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Lifetime MRC"}),(0,F.jsx)(ei,{content:"Total Monthly Recurring Charges summed over the full contract period. Includes power, cooling, and cross-connect fees with annual escalation applied."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:eo(A.totalMRC_lifetime)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Over ",v.contractYears," years"]})]})}),(0,F.jsx)(t1,{className:"bg-indigo-50 dark:bg-indigo-950/20 border-indigo-200 dark:border-indigo-800/40 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(w1.FileText,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"TCV"}),(0,F.jsx)(ei,{content:"Total Contract Value  the sum of all NRC and lifetime MRC over the full lease term. Key metric for deal sizing and sales pipeline valuation."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:eo(A.contractValue)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Total Contract Value"})]})}),(0,F.jsx)(t1,{className:"bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800/40 shadow-sm dark:shadow-none",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Effective $/kW/mo"}),(0,F.jsx)(ei,{content:"Blended effective rate per kW per month. Amortizes NRC over the contract term and adds to average MRC, giving the true all-in cost per kW."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:["$",A.effectiveRate.toFixed(0)]}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Blended rate (NRC+MRC)"})]})})]}),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-indigo-500 dark:text-indigo-400"}),"Cumulative Free Cashflow ",(0,F.jsx)(ei,{content:"Running total of net cashflows (revenue minus OPEX) over the project life. The point where the curve crosses zero marks payback. Dashed line shows time-value-adjusted (discounted) cashflow."})]})}),(0,F.jsxs)(t3,{id:"financial-cashflow-chart",className:"p-4 bg-white dark:bg-slate-800",style:f?{width:"800px",height:"320px"}:void 0,children:[(0,F.jsx)(iB,{width:"100%",height:f?320:280,children:(0,F.jsxs)(NR,{data:R,children:[(0,F.jsxs)("defs",{children:[(0,F.jsxs)("linearGradient",{id:"cashflowGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),(0,F.jsxs)("linearGradient",{id:"discountedGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})]}),(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>[eo(e),"cumCashflow"===t?"Cumulative CF":"Discounted CF"]}),(0,F.jsx)(Cb,{y:0,stroke:"#475569",strokeDasharray:"3 3"}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"cumCashflow",stroke:"#10b981",fill:"url(#cashflowGrad)",strokeWidth:2}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"cumDiscounted",stroke:"#6366f1",fill:"url(#discountedGrad)",strokeWidth:2,strokeDasharray:"4 4"})]})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-emerald-500 rounded"}),(0,F.jsx)("span",{children:"Cumulative Cashflow"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-indigo-500 rounded border-dashed"}),(0,F.jsx)("span",{children:"Discounted Cashflow"})]})]})]})]}),A&&(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-cyan-500 dark:text-cyan-400"}),"Revenue Waterfall  NRC + MRC Breakdown ",(0,F.jsx)(ei,{content:"Stacked bar chart showing annual revenue composition: one-time NRC (Year 1 only), recurring MRC from power, and cross-connect fees. The line tracks cumulative revenue over the contract."})]})}),(0,F.jsx)(t3,{id:"financial-waterfall-chart",className:"p-4 bg-white dark:bg-slate-800",style:f?{width:"800px",height:"340px"}:void 0,children:(0,F.jsx)(iB,{width:"100%",height:f?340:300,children:(0,F.jsxs)(f5,{data:A.yearDetails.map(e=>({year:`Y${e.year}`,nrc:e.nrc,mrc:e.mrcAnnual,crossConnect:e.crossConnectAnnual,cumRevenue:e.cumulativeRevenue})),children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{yAxisId:"left",stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(km,{yAxisId:"right",orientation:"right",stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>[eo(e),"nrc"===t?"NRC (One-Time)":"mrc"===t?"MRC (Power)":"crossConnect"===t?"Cross-Connect":"Cumulative Revenue"]}),(0,F.jsx)(wv,{formatter:e=>"nrc"===e?"NRC (One-Time)":"mrc"===e?"MRC (Power)":"crossConnect"===e?"Cross-Connect":"Cumulative Revenue"}),(0,F.jsx)(v1,{yAxisId:"left",dataKey:"nrc",stackId:"rev",fill:"#06b6d4",radius:[0,0,0,0]}),(0,F.jsx)(v1,{yAxisId:"left",dataKey:"mrc",stackId:"rev",fill:"#10b981",radius:[0,0,0,0]}),(0,F.jsx)(v1,{yAxisId:"left",dataKey:"crossConnect",stackId:"rev",fill:"#8b5cf6",radius:[4,4,0,0]}),(0,F.jsx)(jT,{yAxisId:"right",type:"monotone",dataKey:"cumRevenue",stroke:"#f59e0b",strokeWidth:2,dot:{r:3}})]})})})]}),A&&(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),"MRC Growth Trajectory with Take-or-Pay Floor ",(0,F.jsx)(ei,{content:"Monthly MRC progression over contract term showing the effect of annual escalation and occupancy ramp. The dashed line marks the minimum billable amount guaranteed by the take-or-pay clause."})]})}),(0,F.jsxs)(t3,{id:"financial-mrc-chart",className:"p-4 bg-white dark:bg-slate-800",style:f?{width:"800px",height:"300px"}:void 0,children:[(0,F.jsx)(iB,{width:"100%",height:f?300:260,children:(0,F.jsxs)(NR,{data:A.yearDetails.map(e=>({year:`Y${e.year}`,mrcMonthly:e.mrcMonthly})),children:[(0,F.jsx)("defs",{children:(0,F.jsxs)("linearGradient",{id:"mrcGrowthGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.4}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>[eo(e)+"/mo","Monthly MRC"]}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"mrcMonthly",stroke:"#10b981",fill:"url(#mrcGrowthGrad)",strokeWidth:2}),(0,F.jsx)(Cb,{y:v.takeOrPayPct/100*(h.inputs.itLoad||m.itLoad||1e3)*v.mrcPerKwMonth,stroke:"#f59e0b",strokeDasharray:"6 3",label:{value:"Take-or-Pay Floor",fill:"#f59e0b",fontSize:10,position:"insideTopRight"}})]})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-emerald-500 rounded"}),(0,F.jsx)("span",{children:"Monthly MRC"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-amber-500 rounded border-dashed"}),(0,F.jsx)("span",{children:"Take-or-Pay Floor"})]})]})]})]}),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Ck.Receipt,{className:"w-4 h-4 text-cyan-500 dark:text-cyan-400"}),"Year-by-Year Projection & Revenue ",(0,F.jsx)(ei,{content:"Combined financial projection and revenue model table. Shows escalated revenue, OPEX, EBITDA, net income alongside NRC/MRC revenue streams. Click any numeric cell to manually override calculated values."}),(0,F.jsx)("span",{className:"ml-auto text-[9px] text-slate-500 font-normal",children:"Click any value to override"})]})}),(0,F.jsx)(t3,{children:(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsxs)("thead",{children:[(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-600",children:[(0,F.jsx)("th",{className:"text-left py-1 text-slate-600 dark:text-slate-500 font-normal",rowSpan:2,children:"Year"}),(0,F.jsx)("th",{className:"text-center py-1 text-indigo-600 dark:text-indigo-400 font-semibold text-[10px] uppercase tracking-wider",colSpan:4,style:{borderLeft:"2px solid #334155"},children:"Financial Projection"}),(0,F.jsx)("th",{className:"text-center py-1 text-cyan-600 dark:text-cyan-400 font-semibold text-[10px] uppercase tracking-wider",colSpan:5,style:{borderLeft:"2px solid #334155"},children:"Revenue Model (NRC + MRC)"}),(0,F.jsx)("th",{className:"text-center py-1 text-amber-600 dark:text-amber-400 font-semibold text-[10px] uppercase tracking-wider",colSpan:2,style:{borderLeft:"2px solid #334155"},children:"Summary"})]}),(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",style:{borderLeft:"2px solid #334155"},children:"Revenue"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"OPEX"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"EBITDA"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"Net Income"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",style:{borderLeft:"2px solid #334155"},children:"Occ%"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"Billed kW"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"NRC"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"MRC/mo"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"MRC Yr"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",style:{borderLeft:"2px solid #334155"},children:"Total Rev"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-600 dark:text-slate-400 font-medium px-1",children:"Cum. CF"})]})]}),(0,F.jsxs)("tbody",{children:[(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 bg-slate-100 dark:bg-slate-800/30",children:[(0,F.jsx)("td",{className:"py-2 text-slate-800 dark:text-slate-300 font-medium",children:"Y0"}),(0,F.jsx)("td",{className:"text-right text-slate-500 px-1",style:{borderLeft:"2px solid #1e293b"},children:""}),(0,F.jsx)("td",{className:"text-right text-slate-500 px-1",children:""}),(0,F.jsx)("td",{className:"text-right text-slate-500 px-1",children:""}),(0,F.jsxs)("td",{className:"text-right text-red-500 dark:text-red-400 font-medium px-1",children:["-",eo(p.total)]}),(0,F.jsx)("td",{className:"text-right text-slate-500 px-1",style:{borderLeft:"2px solid #1e293b"},colSpan:5,children:""}),(0,F.jsx)("td",{className:"text-right text-red-500 dark:text-red-400 font-medium px-1",style:{borderLeft:"2px solid #1e293b"},children:""}),(0,F.jsxs)("td",{className:"text-right text-red-500 dark:text-red-400 font-medium px-1",children:["-",eo(p.total)]})]}),E.cashflows.map((e,t)=>{let a=e.year,r=A?.yearDetails[t],n=N[a]||{},s=n.revenue??e.revenue,i=n.opex??e.opex,l=s-i,o=n.netIncome??e.netIncome,c=n.mrcMonthly??r?.mrcMonthly??0,d=n.mrcAnnual??r?.mrcAnnual??0,u=a%2==0?"bg-white dark:bg-transparent":"bg-slate-50 dark:bg-transparent";return(0,F.jsxs)("tr",{className:`border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700/20 transition-colors ${u}`,children:[(0,F.jsxs)("td",{className:"py-2 text-slate-800 dark:text-slate-300",children:["Y",a]}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",style:{borderLeft:"2px solid #1e293b"},children:(0,F.jsx)(CP,{value:s,onChange:e=>M(a,"revenue",e)})}),(0,F.jsx)("td",{className:"text-right text-red-500 dark:text-red-400 px-1",children:(0,F.jsx)(CP,{value:i,onChange:e=>M(a,"opex",e)})}),(0,F.jsx)("td",{className:"text-right text-slate-900 dark:text-white px-1",children:eo(l)}),(0,F.jsx)("td",{className:`text-right font-medium px-1 ${o>=0?"text-emerald-600 dark:text-emerald-400":"text-red-500 dark:text-red-400"}`,children:(0,F.jsx)(CP,{value:o,onChange:e=>M(a,"netIncome",e)})}),(0,F.jsx)("td",{className:"text-right text-slate-700 dark:text-slate-300 px-1",style:{borderLeft:"2px solid #1e293b"},children:r?`${(100*r.occupancy).toFixed(0)}%`:""}),(0,F.jsx)("td",{className:"text-right text-slate-900 dark:text-white px-1",children:r?el(r.billedKw):""}),(0,F.jsx)("td",{className:`text-right px-1 ${r&&r.nrc>0?"text-cyan-600 dark:text-cyan-400 font-medium":"text-slate-400 dark:text-slate-600"}`,children:r&&r.nrc>0?eo(r.nrc):""}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",children:r?(0,F.jsx)(CP,{value:c,onChange:e=>M(a,"mrcMonthly",e)}):""}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",children:r?(0,F.jsx)(CP,{value:d,onChange:e=>M(a,"mrcAnnual",e)}):""}),(0,F.jsx)("td",{className:"text-right text-slate-900 dark:text-white font-medium px-1",style:{borderLeft:"2px solid #1e293b"},children:r?eo(r.totalRevenue):eo(s)}),(0,F.jsx)("td",{className:`text-right font-medium px-1 ${e.cumulativeCashflow>=0?"text-emerald-600 dark:text-emerald-400":"text-red-500 dark:text-red-400"}`,children:eo(e.cumulativeCashflow)})]},a)})]}),A&&(0,F.jsx)("tfoot",{children:(0,F.jsxs)("tr",{className:"border-t-2 border-slate-200 dark:border-slate-600 font-semibold",children:[(0,F.jsx)("td",{className:"py-2 text-slate-800 dark:text-slate-300",children:"TOTAL"}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",style:{borderLeft:"2px solid #1e293b"},children:eo(E.totalRevenue)}),(0,F.jsx)("td",{className:"text-right text-red-600 dark:text-red-400 px-1",children:eo(E.cashflows.reduce((e,t)=>e+t.opex,0))}),(0,F.jsx)("td",{className:"text-right text-slate-900 dark:text-white px-1",children:eo(E.cashflows.reduce((e,t)=>e+t.ebitda,0))}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",children:eo(E.totalProfit)}),(0,F.jsx)("td",{className:"text-right text-slate-600 dark:text-slate-500 px-1",style:{borderLeft:"2px solid #1e293b"},children:""}),(0,F.jsx)("td",{className:"text-right text-slate-600 dark:text-slate-500 px-1",children:""}),(0,F.jsx)("td",{className:"text-right text-cyan-600 dark:text-cyan-400 px-1",children:eo(A.totalNRC)}),(0,F.jsx)("td",{className:"text-right text-slate-600 dark:text-slate-500 px-1",children:""}),(0,F.jsx)("td",{className:"text-right text-emerald-600 dark:text-emerald-400 px-1",children:eo(A.totalMRC_lifetime)}),(0,F.jsx)("td",{className:"text-right text-slate-900 dark:text-white px-1",style:{borderLeft:"2px solid #1e293b"},children:eo(A.totalRevenue_lifetime)}),(0,F.jsx)("td",{className:`text-right px-1 ${E.cashflows[E.cashflows.length-1]?.cumulativeCashflow>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eo(E.cashflows[E.cashflows.length-1]?.cumulativeCashflow??0)})]})})]})})})]}),(e=T.find(e=>e.npv>=0)?.occupancyPct??100,T.length>0?(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-amber-500 dark:text-amber-400"}),"Occupancy Impact  NPV & IRR Sensitivity ",(0,F.jsx)(ei,{content:"Shows how facility occupancy rate affects project viability. The break-even point marks the minimum occupancy needed for NPV to turn positive. Critical for go/no-go decisions."})]})}),(0,F.jsx)(t3,{className:"p-4",children:(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(CC,{data:T,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"occupancy",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{yAxisId:"left",stroke:"#10b981",fontSize:11,tickFormatter:e=>eo(e),label:{value:"NPV ($)",angle:-90,position:"insideLeft",fill:"#64748b",fontSize:10}}),(0,F.jsx)(km,{yAxisId:"right",orientation:"right",stroke:"#6366f1",fontSize:11,tickFormatter:e=>`${e.toFixed(0)}%`,label:{value:"IRR (%)",angle:90,position:"insideRight",fill:"#64748b",fontSize:10}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>["npv"===t?eo(e):`${e.toFixed(1)}%`,"npv"===t?"NPV":"IRR"]}),(0,F.jsx)(Cb,{yAxisId:"left",y:0,stroke:"#ef4444",strokeDasharray:"6 3",label:{value:"Break-even",fill:"#ef4444",fontSize:10,position:"insideTopRight"}}),(0,F.jsx)(Cb,{x:`${e.toFixed(0)}%`,stroke:"#f59e0b",strokeDasharray:"4 4",label:{value:`BE: ${e.toFixed(0)}%`,fill:"#f59e0b",fontSize:10,position:"top"}}),(0,F.jsx)(jT,{yAxisId:"left",type:"monotone",dataKey:"npv",stroke:"#10b981",strokeWidth:2,dot:{r:4,fill:"#10b981"},name:"npv"}),(0,F.jsx)(jT,{yAxisId:"right",type:"monotone",dataKey:"irr",stroke:"#6366f1",strokeWidth:2,dot:{r:4,fill:"#6366f1"},strokeDasharray:"5 5",name:"irr"}),(0,F.jsx)(wv,{formatter:e=>"npv"===e?"NPV ($)":"IRR (%)"})]})})})]}):null),(t=u.labor,a=(x.headcount_ShiftLead*t.baseSalary_ShiftLead+x.headcount_Engineer*t.baseSalary_Engineer+x.headcount_Technician*t.baseSalary_Technician+x.headcount_Admin*t.baseSalary_Admin+x.headcount_Janitor*t.baseSalary_Janitor)*12,r=1.4*x.itLoad*876/1e3,n=50*x.itLoad,i=(s=[{category:"Energy",value:r,color:"#f59e0b"},{category:"Staffing",value:a,color:"#8b5cf6"},{category:"Maintenance",value:n,color:"#06b6d4"},{category:"Insurance",value:.003*p.total,color:"#ec4899"},{category:"Overhead",value:.05*O,color:"#64748b"}]).reduce((e,t)=>e+t.value,0),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(Ck.Receipt,{className:"w-4 h-4 text-purple-500 dark:text-purple-400"}),"OPEX Breakdown (Annual) ",(0,F.jsx)(ei,{content:"Annual operating expenditure breakdown by category. Energy is typically the largest cost (40-60%), followed by staffing. Understanding the mix helps identify cost optimization opportunities."})]})}),(0,F.jsxs)(t3,{className:"p-4",children:[(0,F.jsx)(iB,{width:"100%",height:260,children:(0,F.jsxs)(Cc,{data:s,layout:"vertical",children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),(0,F.jsx)(kt,{type:"number",stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(km,{type:"category",dataKey:"category",stroke:"#64748b",fontSize:11,width:90}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>[eo(e),"Annual Cost"]}),(0,F.jsx)(v1,{dataKey:"value",radius:[0,4,4,0],children:s.map((e,t)=>(0,F.jsx)(f9,{fill:e.color},t))})]})}),(0,F.jsx)("div",{className:"grid grid-cols-5 gap-2 mt-3",children:s.map((e,t)=>(0,F.jsxs)("div",{className:"text-center p-2 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mb-0.5",children:e.category}),(0,F.jsx)("div",{className:"text-xs font-bold text-slate-900 dark:text-white",children:eo(e.value)}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-400",children:[(e.value/i*100).toFixed(0),"%"]})]},t))})]})]})),(l=p.total,o=g.revenuePerKwMonth,d=(c=[-20,-10,0,10,20]).map(e=>c.map(t=>{let a=wT(g.projectLifeYears),r=wI({totalCapex:l*(1+e/100),annualOpex:O,revenuePerKwMonth:o*(1+t/100),itLoadKw:m.itLoad,discountRate:g.discountRate,projectLifeYears:g.projectLifeYears,escalationRate:g.escalationRate,opexEscalation:g.opexEscalation,occupancyRamp:a,taxRate:g.taxRate,depreciationYears:g.depreciationYears});return{capexVar:e,revVar:t,npv:r.npv,irr:r.irr}})),(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-indigo-500 dark:text-indigo-400"}),"Sensitivity Analysis  NPV & IRR ",(0,F.jsx)(ei,{content:"Two-way sensitivity matrix showing NPV and IRR under varying CAPEX and revenue assumptions. Green = viable (NPV>0, IRR>WACC), amber = marginal, red = unviable. The cyan-ringed cell is the base case."})]})}),(0,F.jsxs)(t3,{className:"p-4",children:[(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"CAPEX variation (rows) vs Revenue/kW variation (columns). Cell shows NPV / IRR."}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{children:[(0,F.jsx)("th",{className:"px-2 py-2 text-left text-slate-500 font-medium",children:"CAPEX \\\\ Rev"}),c.map(e=>(0,F.jsxs)("th",{className:"px-2 py-2 text-center text-slate-500 font-medium",children:[e>=0?"+":"",e,"%"]},e))]})}),(0,F.jsx)("tbody",{children:d.map((e,t)=>(0,F.jsxs)("tr",{className:0===c[t]?"bg-cyan-50 dark:bg-cyan-950/20":"",children:[(0,F.jsxs)("td",{className:"px-2 py-2 font-mono text-slate-700 dark:text-slate-300 font-medium",children:[c[t]>=0?"+":"",c[t],"%"]}),e.map((e,a)=>{let r=e.npv>0&&e.irr>100*g.discountRate?"bg-emerald-100 dark:bg-emerald-950/30 text-emerald-800 dark:text-emerald-300":e.npv>0?"bg-amber-100 dark:bg-amber-950/30 text-amber-800 dark:text-amber-300":"bg-red-100 dark:bg-red-950/30 text-red-800 dark:text-red-300",n=0===c[t]&&0===c[a];return(0,F.jsxs)("td",{className:`px-2 py-1.5 text-center font-mono text-[10px] rounded ${r} ${n?"ring-2 ring-cyan-500":""}`,children:[(0,F.jsx)("div",{className:"font-bold",children:eo(e.npv)}),(0,F.jsxs)("div",{className:"text-[9px] opacity-70",children:[e.irr.toFixed(1),"%"]})]},a)})]},t))})]})})]})]})),I.length>0?(0,F.jsxs)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[(0,F.jsx)(t2,{className:"pb-2",children:(0,F.jsxs)(t5,{className:"text-sm text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(er,{className:"w-4 h-4 text-cyan-500 dark:text-cyan-400"}),"Budget vs Forecast Variance ",(0,F.jsx)(ei,{content:"Compares budgeted OPEX against forecasted actuals by category. Positive variance (red) = over budget. Helps identify cost overruns early and adjust operational planning."})]})}),(0,F.jsxs)(t3,{className:"p-4",children:[(0,F.jsx)(iB,{width:"100%",height:280,children:(0,F.jsxs)(Cc,{data:I,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"category",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>[eo(e),"budget"===t?"Budget":"Forecast"]}),(0,F.jsx)(wv,{formatter:e=>"budget"===e?"Budget":"Forecast"}),(0,F.jsx)(v1,{dataKey:"budget",fill:"#06b6d4",radius:[4,4,0,0],name:"budget"}),(0,F.jsx)(v1,{dataKey:"forecast",fill:"#f59e0b",radius:[4,4,0,0],name:"forecast"})]})}),(0,F.jsx)("div",{className:"mt-3 grid grid-cols-4 gap-2",children:I.map((e,t)=>{let a=e.forecast-e.budget,r=e.budget>0?a/e.budget*100:0;return(0,F.jsxs)("div",{className:"text-center p-2 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:e.category}),(0,F.jsxs)("div",{className:`text-sm font-mono font-bold ${a>0?"text-red-500 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:[a>0?"+":"",r.toFixed(1),"%"]})]},t)})})]})]}):null]})]})};function CO(e,t,a){return 0===t?e/a:e*t/(1-Math.pow(1+t,-a))}var CE=e.i(16007);function CA(e){var t=s$();return(0,z.useEffect)(()=>{t(pR(e))},[t,e]),null}var CT=["layout"];function CI(){return(CI=Object.assign.bind()).apply(null,arguments)}var CR={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},CD=(0,z.forwardRef)(function(e,t){var a,r=fJ(e.categoricalChartProps,CR),{layout:n}=r,s=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(r,CT),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c}=e;return z.createElement(p7,{preloadedState:{options:{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0}},reduxStoreName:null!=(a=r.id)?a:i},z.createElement(fe,{chartData:r.data}),z.createElement(fr,{layout:n,margin:r.margin}),z.createElement(fn,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),z.createElement(CA,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),z.createElement(fX,CI({},s,{ref:t})))});function CL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function C_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?CL(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var CF=["item"],C$=C_(C_({},CR),{},{layout:"centric",startAngle:0,endAngle:360}),Cz=(0,z.forwardRef)((e,t)=>{var a=fJ(e,C$);return z.createElement(CD,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:CF,tooltipPayloadSearcher:ny,categoricalChartProps:a,ref:t})}),Cq=e=>e.graphicalItems.polarItems,CW=rc([uE,uA],u2),CB=rc([Cq,uQ,CW],u3),CU=rc([CB],me),CK=rc([CU,dH],ma),CH=rc([CK,uQ,CB],mn);rc([CK,uQ,CB],(e,t,a)=>a.length>0?e.flatMap(e=>a.flatMap(a=>{var r;return{value:s4(e,null!=(r=t.dataKey)?r:a.dataKey),errorDomain:[]}})).filter(Boolean):(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:s4(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var CV=()=>void 0,CG=rc([CK,uQ,CB,mj,uE],mw),CY=rc([uQ,mg,my,CV,CG,CV,iG,uE],mz),CX=rc([uQ,iG,CK,CH,d9,uE,CY],mB),CZ=rc([CX,u0,mH],mG),CJ=rc([uQ,CX,CZ,uE],mX),CQ=rc([mH,CJ],uq);function C0(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function C1(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C0(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C0(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var C2=rc([Cq,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),C5=[],C4=(e,t,a)=>(null==a?void 0:a.length)===0?C5:a,C3=rc([dH,C2,C4],(e,t,a)=>{var r,{chartData:n}=e;if(null!=t&&((r=(null==t?void 0:t.data)!=null&&t.data.length>0?t.data:n)&&r.length||null==a||(r=a.map(e=>C1(C1({},t.presentationProps),e.props))),null!=r))return r}),C6=rc([C3,C2,C4],(e,t,a)=>{if(null!=e&&null!=t)return e.map((e,r)=>{var n,s,i=s4(e,t.nameKey,t.name);return s=null!=a&&null!=(n=a[r])&&null!=(n=n.props)&&n.fill?a[r].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:il(i,t.dataKey),color:s,payload:e,type:t.legendType}})}),C8=rc([C3,C2,C4,iy],(e,t,a,r)=>{if(null!=t&&null!=e)return function(e){var t,a,r,{pieSettings:n,displayedData:s,cells:i,offset:l}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:m,tooltipType:x}=n,h=Math.abs(n.minAngle),p=ns(d-c)*Math.min(Math.abs(d-c),360),f=Math.abs(p),b=s.length<=1?0:null!=(t=n.paddingAngle)?t:0,g=s.filter(e=>0!==s4(e,u,0)).length,y=f-g*h-(f>=360?g:g-1)*b,v=s.reduce((e,t)=>{var a=s4(t,u,0);return e+(no(a)?a:0)},0);return v>0&&(a=s.map((e,t)=>{var a,s=s4(e,u,0),d=s4(e,m,t),f=((e,t,a)=>{var r,{top:n,left:s,width:i,height:l}=t,o=uc(i,l),c=s+nm(e.cx,i,i/2),d=n+nm(e.cy,l,l/2),u=nm(e.innerRadius,o,0);return{cx:c,cy:d,innerRadius:u,outerRadius:(r=e.outerRadius,"function"==typeof r?nm(r(a),o,.8*o):nm(r,o,.8*o)),maxRadius:e.maxRadius||Math.sqrt(i*i+l*l)/2}})(n,l,e),g=(no(s)?s:0)/v,j=Sr(Sr({},e),i&&i[t]&&i[t].props),k=(a=t?r.endAngle+ns(p)*b*(0!==s):c)+ns(p)*((0!==s?h:0)+g*y),w=(a+k)/2,N=(f.innerRadius+f.outerRadius)/2,C=[{name:d,value:s,payload:j,dataKey:u,type:x,graphicalItemId:n.id}],S=uo(f.cx,f.cy,N,w);return r=Sr(Sr(Sr(Sr({},n.presentationProps),{},{percent:g,cornerRadius:"string"==typeof o?parseFloat(o):o,name:d,tooltipPayload:C,midAngle:w,middleRadius:N,tooltipPosition:S},j),f),{},{value:s,dataKey:u,startAngle:a,endAngle:k,payload:j,paddingAngle:ns(p)*b})})),a}({offset:r,pieSettings:t,displayedData:e,cells:a})}),C9=["key"],C7=["onMouseEnter","onClick","onMouseLeave"],Se=["id"],St=["id"];function Sa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Sr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sa(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Sn(){return(Sn=Object.assign.bind()).apply(null,arguments)}function Ss(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Si(e){var t=(0,z.useMemo)(()=>gs(e.children,f9),[e.children]),a=sB(a=>C6(a,e.id,t));return null==a?null:z.createElement(vy,{legendPayload:a})}var Sl=z.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:n,strokeWidth:s,fill:i,name:l,hide:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:r.map(e=>e.tooltipPayload),getPosition:e=>{var t;return null==(t=r[Number(e)])?void 0:t.tooltipPosition},settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:a,name:il(l,t),hide:o,type:c,color:i,unit:"",graphicalItemId:d}};return z.createElement(y9,{tooltipEntrySettings:u})});function So(e){var{sectors:t,props:a,showLabels:r}=e,{label:n,labelLine:s,dataKey:i}=a;if(!r||!n||!t)return null;var l=fu(a),o=fm(n),c=fm(s),d="object"==typeof n&&"offsetRadius"in n&&"number"==typeof n.offsetRadius&&n.offsetRadius||20,u=t.map((e,t)=>{var a,r,u=(e.startAngle+e.endAngle)/2,m=uo(e.cx,e.cy,e.outerRadius+d,u),x=Sr(Sr(Sr(Sr({},l),e),{},{stroke:"none"},o),{},{index:t,textAnchor:(a=m.x)>(r=e.cx)?"start":a<r?"end":"middle"},m),h=Sr(Sr(Sr(Sr({},l),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[uo(e.cx,e.cy,e.outerRadius,u),m],key:"line"});return z.createElement(bA,{zIndex:ud.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},z.createElement(f8,null,s&&((e,t)=>{if(z.isValidElement(e))return z.cloneElement(e,t);if("function"==typeof e)return e(t);var a=(0,eh.clsx)("recharts-pie-label-line","boolean"!=typeof e?e.className:""),{key:r}=t,n=Ss(t,C9);return z.createElement(yX,Sn({},n,{type:"linear",className:a}))})(s,h),((e,t,a)=>{if(z.isValidElement(e))return z.cloneElement(e,t);var r=a;if("function"==typeof e&&(r=e(t),z.isValidElement(r)))return r;var n=(0,eh.clsx)("recharts-pie-label-text",j$(e));return z.createElement(bO,Sn({},t,{alignmentBaseline:"middle",className:n}),r)})(n,x,s4(e,i))))});return z.createElement(f8,{className:"recharts-pie-labels"},u)}function Sc(e){var{sectors:t,props:a,showLabels:r}=e,{label:n}=a;return"object"==typeof n&&null!=n&&"position"in n?z.createElement(b7,{label:n}):z.createElement(So,{sectors:t,props:a,showLabels:r})}function Sd(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:n,shape:s,id:i}=e,l=sB(hh),o=sB(hf),c=sB(hb),{onMouseEnter:d,onClick:u,onMouseLeave:m}=n,x=Ss(n,C7),h=y3(d,n.dataKey,i),p=y6(m),f=y8(u,n.dataKey,i);return null==t||0===t.length?null:z.createElement(z.Fragment,null,t.map((e,d)=>{if((null==e?void 0:e.startAngle)===0&&(null==e?void 0:e.endAngle)===0&&1!==t.length)return null;var u=null==c||c===i,m=String(d)===l&&(null==o||n.dataKey===o)&&u,b=a&&m?a:l?r:null,g=Sr(Sr({},e),{},{stroke:e.stroke,tabIndex:-1,[ih]:d,[ip]:i});return z.createElement(f8,Sn({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(d),tabIndex:-1,className:"recharts-pie-sector"},gc(x,e,d),{onMouseEnter:h(e,d),onMouseLeave:p(e,d),onClick:f(e,d)}),z.createElement(y1,Sn({option:null!=s?s:b,index:d,shapeType:"sector",isActive:m},g)))}))}function Su(e){var{showLabels:t,sectors:a,children:r}=e,n=(0,z.useMemo)(()=>t&&a?a.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[a,t]);return z.createElement(b8,{value:t?n:void 0},r)}function Sm(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:o,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:m}=t,x=gT(t,"recharts-pie-"),h=a.current,[p,f]=(0,z.useState)(!1),b=(0,z.useCallback)(()=>{"function"==typeof m&&m(),f(!1)},[m]),g=(0,z.useCallback)(()=>{"function"==typeof u&&u(),f(!0)},[u]);return z.createElement(Su,{showLabels:!p,sectors:n},z.createElement(gA,{animationId:x,begin:i,duration:l,isActive:s,easing:o,onAnimationStart:g,onAnimationEnd:b,key:x},e=>{var s,i=[],l=n&&n[0],o=null!=(s=null==l?void 0:l.startAngle)?s:0;return null==n||n.forEach((t,a)=>{var r=h&&h[a],n=a>0?(0,na.default)(t,"paddingAngle",0):0;if(r){var s=nh(r.endAngle-r.startAngle,t.endAngle-t.startAngle,e),l=Sr(Sr({},t),{},{startAngle:o+n,endAngle:o+s+n});i.push(l),o=l.endAngle}else{var{endAngle:c,startAngle:d}=t,u=nh(0,c-d,e),m=Sr(Sr({},t),{},{startAngle:o+n,endAngle:o+u+n});i.push(m),o=m.endAngle}}),a.current=i,z.createElement(f8,null,z.createElement(Sd,{sectors:i,activeShape:c,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:r}))}),z.createElement(Sc,{showLabels:!p,sectors:n,props:t}),t.children)}var Sx={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ud.area};function Sh(e){var{id:t}=e,a=Ss(e,Se),{hide:r,className:n,rootTabIndex:s}=e,i=(0,z.useMemo)(()=>gs(e.children,f9),[e.children]),l=sB(e=>C8(e,t,i)),o=(0,z.useRef)(null),c=(0,eh.clsx)("recharts-pie",n);return r||null==l?(o.current=null,z.createElement(f8,{tabIndex:s,className:c})):z.createElement(bA,{zIndex:e.zIndex},z.createElement(Sl,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),z.createElement(f8,{tabIndex:s,className:c},z.createElement(Sm,{props:Sr(Sr({},a),{},{sectors:l}),previousSectorsRef:o,id:t})))}function Sp(e){var t=fJ(e,Sx),{id:a}=t,r=Ss(t,St),n=fu(r);return z.createElement(vk,{id:a,type:"pie"},e=>z.createElement(z.Fragment,null,z.createElement(vN,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),z.createElement(Si,Sn({},r,{id:e})),z.createElement(Sh,Sn({},r,{id:e}))))}function Sf({label:e,value:t,sub:a,icon:r,color:n,tooltip:s}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)("div",{className:`text-${n}-600 dark:text-${n}-400`,children:r}),(0,F.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:e}),s&&(0,F.jsx)(ei,{content:s})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t}),a&&(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:a})]})}Sp.displayName="Pie";let Sb=()=>{let t,a,r,n,s,i,l,o,c,d,{selectedCountry:u,inputs:m}=(0,$.useSimulationStore)(),x=H(),h=(0,ew.useCapexStore)().results,[p,f]=(0,z.useState)("cap"),[b,g]=(0,z.useState)(!1),[y,v]=(0,z.useState)({debtRatio:.65,debtCostAnnual:.05,debtTermYears:12,equityCostOfCapital:.12,exitYear:7,exitEbitdaMultiple:18,terminalCapRate:.065,controlPremiumPct:.25,revenuePerKwMonth:150,opexEscalation:.035,escalationRate:.03,taxRate:.25,depreciationYears:15,projectLifeYears:10}),j=(e,t)=>{v(a=>({...a,[e]:t}))},k=(0,z.useMemo)(()=>{if(!u)return 0;let e=u.labor,t=(x.headcount_ShiftLead*e.baseSalary_ShiftLead+x.headcount_Engineer*e.baseSalary_Engineer+x.headcount_Technician*e.baseSalary_Technician+x.headcount_Admin*e.baseSalary_Admin+x.headcount_Janitor*e.baseSalary_Janitor)*12,a=u.economy?.electricityRate??.1;return t+x.itLoad*(0,wO.getPUE)(x.coolingType??"air")*8760*a+50*x.itLoad},[u,x]),w=(0,z.useMemo)(()=>{if(!h)return null;let e=wT(y.projectLifeYears);return wI({totalCapex:h.total,annualOpex:k,revenuePerKwMonth:y.revenuePerKwMonth,itLoadKw:x.itLoad,discountRate:y.equityCostOfCapital,projectLifeYears:y.projectLifeYears,escalationRate:y.escalationRate,opexEscalation:y.opexEscalation,occupancyRamp:e,taxRate:y.taxRate,depreciationYears:y.depreciationYears})},[h,k,x.itLoad,y]),N=(0,z.useMemo)(()=>w&&h?function(e){let{totalCapex:t,unleveredCashflows:a,itLoadKw:r,taxRate:n,debtRatio:s,debtCostAnnual:i,debtTermYears:l,equityCostOfCapital:o,exitYear:c,exitEbitdaMultiple:d,terminalCapRate:u,controlPremiumPct:m}=e,x=1-s,h=t*s,p=t*x,f=s*i*(1-n)+x*o,b=CO(h,i,l),g=[],y=h;for(let e=1;e<=l;e++){let t=y*i,a=b-t,r=Math.max(0,y-a);g.push({year:e,openingBalance:y,payment:b,interest:t,principal:a,closingBalance:r}),y=r}let v=a.length,j=[],k=0,w=[-p];for(let e=0;e<v;e++){let t=a[e],r=e+1,n=r<=l?b:0,s=t.freeCashflow-n;k+=s;let i=p>0?s/p*100:0,o=n>0?t.ebitda/n:99;j.push({year:r,unleveredFCF:t.freeCashflow,debtService:n,leveredFCF:s,cumulativeLevered:k,cashOnCashPct:i,dscr:o}),w.push(s)}let N=Math.min(4,v-1),C=a[N]?.ebitda??0,S=.95*C,P=Math.min(c-1,v-1),M=(a[P]?.ebitda??C)*d,O=c<=l?g[P]?.closingBalance??0:0,E=M-O,A=[...w];P+1<A.length&&(A[P+1]+=E,A.length=P+2);let T=100*wA(A,.12),I=j.slice(0,c).reduce((e,t)=>e+Math.max(0,t.leveredFCF),0),R=p>0?(I+E)/p:0,D=j.filter(e=>e.dscr<99).map(e=>e.dscr),L=D.length>0?Math.min(...D):0,_=j[0]?.cashOnCashPct??0,F=C*d,$=[];for(let e=14;e<=22;e+=2){let t=C*e,a=t-O;$.push({multiple:e,enterpriseValue:t,equityValue:a,impliedDollarPerKw:r>0?t/r:0})}let z=j.find(e=>e.cumulativeLevered>=0),q=z?z.year:v,W=a.length>=3,B=[{label:"DSCR",target:" 1.25x",actual:`${L.toFixed(2)}x`,pass:L>=1.25,weight:20},{label:"MOIC",target:" 2.0x",actual:`${R.toFixed(2)}x`,pass:R>=2,weight:20},{label:"Equity IRR",target:" 15%",actual:`${T.toFixed(1)}%`,pass:T>=15,weight:20},{label:"Payback Period",target:" 7 years",actual:`${q} yrs`,pass:q<=7,weight:15},{label:"Occupancy Ramp",target:"Realistic trajectory",actual:W?"On track":"Insufficient data",pass:W,weight:10},{label:"Cash-on-Cash (Y1)",target:" 8%",actual:`${_.toFixed(1)}%`,pass:_>=8,weight:15}],U=B.reduce((e,t)=>e+(t.pass?t.weight:0),0),K=[],H=[14,16,18,20,22];for(let e of[.5,.55,.6,.65,.7,.75,.8])for(let r of H){let n=t*e,s=t*(1-e),o=CO(n,i,l),d=[-s];for(let e=0;e<Math.min(c,v);e++){let t=a[e]?.freeCashflow??0,r=e+1<=l?o:0;d.push(t-r)}let u=(a[Math.min(c-1,v-1)]?.ebitda??0)*r,m=c<=l?Math.max(0,n-g.slice(0,c).reduce((e,t)=>e+t.principal,0)*(n/h)):0;d[d.length-1]+=u-m;let x=100*wA(d,.12);K.push({debtRatio:e,exitMultiple:r,equityIRR:x})}return{totalDebt:h,totalEquity:p,wacc:f,annualDebtPayment:b,debtSchedule:g,equityIRR:T,moic:R,minDSCR:L,year1CashOnCash:_,leveredFCFTable:j,valuation:{evEbitda:F,capRateVal:u>0?S/u:0,perKwVal:F,dollarPerKw:r>0?F/r:0},stabilizedEBITDA:C,stabilizedNOI:S,exitEV:M,exitRemainingDebt:O,exitEquityValue:E,ipoPrice:F*(1+m),acquisitionTable:$,readinessChecks:B,readinessScore:U,readinessLabel:U>=80?"Ready":U>=50?"Conditional":"Not Ready",sensitivityMatrix:K,paybackYear:q}}({totalCapex:h.total,unleveredCashflows:w.cashflows,itLoadKw:x.itLoad,taxRate:y.taxRate,debtRatio:y.debtRatio,debtCostAnnual:y.debtCostAnnual,debtTermYears:y.debtTermYears,equityCostOfCapital:y.equityCostOfCapital,exitYear:y.exitYear,exitEbitdaMultiple:y.exitEbitdaMultiple,terminalCapRate:y.terminalCapRate,controlPremiumPct:y.controlPremiumPct}):null,[w,h,x.itLoad,y]);if(!N||!h||!u||!w)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:"Configure CAPEX Engine first to view investment analysis."});let C="w-full p-1.5 text-sm text-slate-900 dark:text-slate-200 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded outline-none focus:ring-1 focus:ring-cyan-500";return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(CE.Landmark,{className:"w-6 h-6 text-indigo-500"}),"Investment Analysis"]}),(0,F.jsx)(eI,{isGenerating:b,onExport:async()=>{g(!0);try{let{generateInvestmentPDF:t}=await e.A(28094);await t(u,N,y,w,h.total,x.itLoad)}catch(e){console.error("Investment PDF error:",e)}finally{g(!1)}},label:"PDF",className:"px-2 py-1 text-[10px]"})]}),(0,F.jsxs)("div",{className:"flex gap-6",children:[(0,F.jsx)("div",{className:"w-[340px] flex-shrink-0 space-y-4 overflow-y-auto max-h-[calc(100vh-6rem)] pb-6",children:(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4 space-y-4 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 flex items-center gap-2",children:[(0,F.jsx)(CE.Landmark,{className:"w-4 h-4 text-indigo-500 dark:text-indigo-400"}),"Investment Parameters"]}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-indigo-600 dark:text-indigo-400 font-semibold tracking-wider border-b border-indigo-200 dark:border-indigo-800/40 pb-1",children:"Capital Structure"}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Debt Ratio (",(100*y.debtRatio).toFixed(0),"%) ",(0,F.jsx)(ei,{content:"Percentage of total CAPEX financed by debt. Higher leverage amplifies returns but increases risk."})]}),(0,F.jsx)("input",{type:"range",min:50,max:80,step:1,className:"w-full accent-indigo-500",value:100*y.debtRatio,onChange:e=>j("debtRatio",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Interest Rate (%) ",(0,F.jsx)(ei,{content:"Annual interest rate on debt financing. Typical range 4-8% for data center project finance."})]}),(0,F.jsx)("input",{type:"number",className:C,step:.5,value:(100*y.debtCostAnnual).toFixed(1),onChange:e=>j("debtCostAnnual",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Debt Term (yrs) ",(0,F.jsx)(ei,{content:"Loan repayment period in years. Longer terms reduce annual payments but increase total interest cost. Typical: 7-15 years."})]}),(0,F.jsx)("input",{type:"number",className:C,min:5,max:25,value:y.debtTermYears,onChange:e=>j("debtTermYears",Number(e.target.value))})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Equity Cost of Capital (%) ",(0,F.jsx)(ei,{content:"Required return on equity. Used as discount rate for equity cashflows and in WACC calculation."})]}),(0,F.jsx)("input",{type:"number",className:C,step:.5,value:(100*y.equityCostOfCapital).toFixed(1),onChange:e=>j("equityCostOfCapital",Number(e.target.value)/100)})]})]}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-amber-600 dark:text-amber-400 font-semibold tracking-wider border-b border-amber-200 dark:border-amber-800/40 pb-1 mt-4",children:"Exit Assumptions"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Exit Year ",(0,F.jsx)(ei,{content:"Target year for investment exit (sale, IPO, or recapitalization). Typical PE holding period: 5-7 years."})]}),(0,F.jsx)("input",{type:"number",className:C,min:3,max:10,value:y.exitYear,onChange:e=>j("exitYear",Number(e.target.value))})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Exit EV/EBITDA ",(0,F.jsx)(ei,{content:"Enterprise Value to EBITDA multiple at exit. Data center multiples typically range 15-25x depending on market conditions and contract quality."})]}),(0,F.jsx)("input",{type:"number",className:C,min:10,max:30,step:.5,value:y.exitEbitdaMultiple,onChange:e=>j("exitEbitdaMultiple",Number(e.target.value))})]})]}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Terminal Cap Rate (%) ",(0,F.jsx)(ei,{content:"Estimated value of the business beyond the explicit forecast period. Often the largest component of total valuation."})]}),(0,F.jsx)("input",{type:"number",className:C,step:.25,value:(100*y.terminalCapRate).toFixed(1),onChange:e=>j("terminalCapRate",Number(e.target.value)/100)})]}),(0,F.jsx)("div",{className:"text-[10px] uppercase text-emerald-600 dark:text-emerald-400 font-semibold tracking-wider border-b border-emerald-200 dark:border-emerald-800/40 pb-1 mt-4",children:"IPO / Acquisition"}),(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsxs)("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:["Control Premium (",(100*y.controlPremiumPct).toFixed(0),"%) ",(0,F.jsx)(ei,{content:"Premium paid above fair EV for controlling stake. Typical: 20-35%."})]}),(0,F.jsx)("input",{type:"range",min:20,max:35,step:1,className:"w-full accent-emerald-500",value:100*y.controlPremiumPct,onChange:e=>j("controlPremiumPct",Number(e.target.value)/100)})]}),(0,F.jsxs)("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 space-y-2 mt-4",children:[(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Total CAPEX"}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-medium",children:eo(h.total)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Debt"}),(0,F.jsx)("span",{className:"text-red-600 dark:text-red-400 font-medium",children:eo(N.totalDebt)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Equity"}),(0,F.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:eo(N.totalEquity)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"WACC"}),(0,F.jsx)("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:em(100*N.wacc)})]})]})]})}),(0,F.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto pb-10",children:[(0,F.jsx)("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 p-1 rounded-lg border border-slate-200 dark:border-slate-700 overflow-x-auto",children:[{id:"cap",label:"Capitalization"},{id:"returns",label:"Returns & DSCR"},{id:"valuation",label:"Valuation"},{id:"ipo",label:"IPO / Acquisition"},{id:"readiness",label:"Readiness"},{id:"sensitivity",label:"Sensitivity"}].map(e=>(0,F.jsx)("button",{onClick:()=>f(e.id),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap",p===e.id?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:e.label},e.id))}),"cap"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(Sf,{label:"Total CAPEX",value:eo(h.total),icon:(0,F.jsx)(Nb.Building,{className:"w-4 h-4"}),color:"slate",tooltip:"Total capital expenditure including land, building, MEP, and IT infrastructure. This is the total investment amount to be financed."}),(0,F.jsx)(Sf,{label:"Debt Amount",value:eo(N.totalDebt),sub:`${(100*y.debtRatio).toFixed(0)}% leverage`,icon:(0,F.jsx)(J,{className:"w-4 h-4"}),color:"red",tooltip:"Total debt financing amount based on CAPEX and debt ratio. This is the principal amount to be repaid over the debt term."}),(0,F.jsx)(Sf,{label:"Equity Required",value:eo(N.totalEquity),sub:`${((1-y.debtRatio)*100).toFixed(0)}% equity`,icon:(0,F.jsx)(J,{className:"w-4 h-4"}),color:"emerald",tooltip:"Equity capital required from sponsors/investors. This is the portion of CAPEX not covered by debt financing."}),(0,F.jsx)(Sf,{label:"WACC",value:em(100*N.wacc),sub:"Weighted avg cost",icon:(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4"}),color:"indigo",tooltip:"Weighted Average Cost of Capital  blended cost of debt and equity financing. Used as discount rate for DCF analysis."})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:"Capital Structure"}),(0,F.jsxs)("div",{className:"flex items-center gap-8",children:[(0,F.jsx)(iB,{width:200,height:200,children:(0,F.jsxs)(Cz,{children:[(0,F.jsxs)(Sp,{data:[{name:"Debt",value:N.totalDebt},{name:"Equity",value:N.totalEquity}],cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"value",strokeWidth:2,children:[(0,F.jsx)(f9,{fill:"#ef4444"}),(0,F.jsx)(f9,{fill:"#10b981"})]}),(0,F.jsx)(wn,{formatter:e=>eo(e)})]})}),(0,F.jsxs)("div",{className:"space-y-3",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,F.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Debt: ",eo(N.totalDebt)," (",(100*y.debtRatio).toFixed(0),"%)"]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),(0,F.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Equity: ",eo(N.totalEquity)," (",((1-y.debtRatio)*100).toFixed(0),"%)"]})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2",children:["Annual Debt Service: ",eo(N.annualDebtPayment)]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300",children:"Debt Amortization Schedule"})}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-500 uppercase font-semibold",children:[(0,F.jsx)("th",{className:"px-4 py-2 text-left",children:"Year"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Opening Balance"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Payment"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Interest"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Principal"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Closing Balance"})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700/50",children:N.debtSchedule.map(e=>(0,F.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors",children:[(0,F.jsxs)("td",{className:"px-4 py-2 text-slate-800 dark:text-slate-300 font-mono",children:["Y",e.year]}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-slate-600 dark:text-slate-400",children:eo(e.openingBalance)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-slate-900 dark:text-white font-medium",children:eo(e.payment)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-red-600 dark:text-red-400",children:eo(e.interest)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-emerald-600 dark:text-emerald-400",children:eo(e.principal)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-slate-600 dark:text-slate-400",children:eo(e.closingBalance)})]},e.year))})]})})]})]}),"returns"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,F.jsx)(Sf,{label:"Equity IRR",value:em(N.equityIRR),sub:N.equityIRR>15?"Above 15% target":"Below 15% target",icon:(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4"}),color:N.equityIRR>=15?"emerald":"red",tooltip:"Levered Internal Rate of Return on equity invested. Target is 15%+ for institutional data center PE investments."}),(0,F.jsx)(Sf,{label:"MOIC",value:`${N.moic.toFixed(2)}x`,sub:"Multiple on invested capital",icon:(0,F.jsx)(Cj,{className:"w-4 h-4"}),color:N.moic>=2?"emerald":"amber",tooltip:"Multiple on Invested Capital  total value returned divided by total capital invested. Target is 2-3x for PE."}),(0,F.jsx)(Sf,{label:"Min DSCR",value:`${N.minDSCR.toFixed(2)}x`,sub:N.minDSCR>=1.25?"Above 1.25x threshold":"Below 1.25x threshold",icon:(0,F.jsx)(eX,{className:"w-4 h-4"}),color:N.minDSCR>=1.25?"emerald":"red",tooltip:"Minimum Debt Service Coverage Ratio across all years. Lenders typically require 1.25x+ DSCR as a covenant threshold."}),(0,F.jsx)(Sf,{label:"Y1 Cash-on-Cash",value:em(N.year1CashOnCash),sub:"Year 1 levered yield",icon:(0,F.jsx)(J,{className:"w-4 h-4"}),color:N.year1CashOnCash>=8?"emerald":"amber",tooltip:"Year 1 levered free cashflow divided by total equity invested. Measures the immediate cash yield on equity. Target: 8%+ for stabilized assets."})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4 flex items-center gap-1",children:["Debt Service Coverage Ratio (DSCR) ",(0,F.jsx)(ei,{content:"Ratio of net operating income to total debt service payments. A DSCR below 1.0x means cashflow cannot cover debt payments. Lenders typically require 1.25x minimum."})]}),(0,F.jsx)(iB,{width:"100%",height:260,children:(0,F.jsxs)(CC,{data:N.leveredFCFTable.filter(e=>e.dscr<99).map(e=>({year:`Y${e.year}`,dscr:e.dscr})),children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"year",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,domain:[0,"auto"]}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:e=>[`${e.toFixed(2)}x`,"DSCR"]}),(0,F.jsx)(Cb,{y:1.25,stroke:"#ef4444",strokeDasharray:"6 3",label:{value:"Min 1.25x",fill:"#ef4444",fontSize:10}}),(0,F.jsx)(jT,{type:"monotone",dataKey:"dscr",stroke:"#06b6d4",strokeWidth:2,dot:{r:4}})]})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300",children:"Levered Free Cashflow"})}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-500 uppercase font-semibold",children:[(0,F.jsx)("th",{className:"px-4 py-2 text-left",children:"Year"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Unlevered FCF"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Debt Service"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Levered FCF"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Cumulative"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"CoC %"})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700/50",children:N.leveredFCFTable.map(e=>(0,F.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors",children:[(0,F.jsxs)("td",{className:"px-4 py-2 text-slate-800 dark:text-slate-300 font-mono",children:["Y",e.year]}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-emerald-600 dark:text-emerald-400",children:eo(e.unleveredFCF)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-red-600 dark:text-red-400",children:e.debtService>0?eo(e.debtService):""}),(0,F.jsx)("td",{className:(0,eh.default)("px-4 py-2 text-right font-medium",e.leveredFCF>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eo(e.leveredFCF)}),(0,F.jsx)("td",{className:(0,eh.default)("px-4 py-2 text-right",e.cumulativeLevered>=0?"text-slate-900 dark:text-white":"text-red-500 dark:text-red-400"),children:eo(e.cumulativeLevered)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-cyan-600 dark:text-cyan-400",children:em(e.cashOnCashPct)})]},e.year))})]})})]})]}),"returns"===p&&(t=N.totalEquity,r=(a=N.exitEquityValue+N.leveredFCFTable.reduce((e,t)=>e+Math.max(0,t.leveredFCF),0))-t,l=(i=a-(s=.2*Math.max(0,r-(n=.08*t*y.exitYear))))/t,o=[{label:"LP Capital Return",value:t,color:"#64748b"},{label:"LP Pref (8% hurdle)",value:Math.min(n,r),color:"#06b6d4"},{label:"GP Carry (20%)",value:s,color:"#f59e0b"},{label:"LP Excess Return",value:Math.max(0,r-n-s),color:"#10b981"}],(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-1 flex items-center gap-1",children:["GP/LP Return Waterfall ",(0,F.jsx)(ei,{content:"Distribution waterfall showing how profits are split between General Partner (GP) and Limited Partners (LP). LP receives preferred return first, then GP takes carried interest on excess profits."})]}),(0,F.jsxs)("p",{className:"text-[11px] text-slate-400 mb-4",children:["8","% preferred return hurdle, ","20","% GP carry on profits above hurdle"]}),(0,F.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:o.map((e,t)=>(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full mx-auto mb-1",style:{backgroundColor:e.color}}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mb-0.5",children:e.label}),(0,F.jsx)("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:eo(e.value)})]},t))}),(0,F.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-900/30 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["LP Total Return: ",(0,F.jsx)("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:eo(i)})," (",l.toFixed(2),"x MOIC)"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["GP Total Return: ",(0,F.jsx)("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:eo(s)})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:["Total Distributed: ",(0,F.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:eo(a)})]})]})]})),"valuation"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-5 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"text-[10px] text-indigo-600 dark:text-indigo-400 uppercase font-semibold mb-2 flex items-center gap-1",children:["EV/EBITDA Method ",(0,F.jsx)(ei,{content:"Enterprise Value  total value of the company including debt minus cash. Used for EV/EBITDA and other valuation multiples."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(N.valuation.evEbitda)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[eo(N.stabilizedEBITDA)," x ",y.exitEbitdaMultiple,"x"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-5 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 uppercase font-semibold mb-2 flex items-center gap-1",children:["Cap Rate Method ",(0,F.jsx)(ei,{content:"Discounted Cash Flow  valuation method summing present values of projected future free cash flows."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(N.valuation.capRateVal)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["NOI ",eo(N.stabilizedNOI)," / ",em(100*y.terminalCapRate)]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-5 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("div",{className:"text-[10px] text-cyan-600 dark:text-cyan-400 uppercase font-semibold mb-2 flex items-center gap-1",children:["$/kW Implied ",(0,F.jsx)(ei,{content:"Implied valuation per kilowatt of IT capacity. Benchmark: $8,000-$15,000/kW for stabilized assets in Tier 1 markets."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["$",el(N.valuation.dollarPerKw),"/kW"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["EV ",eo(N.valuation.evEbitda)," / ",el(x.itLoad)," kW"]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:"Valuation Comparison"}),(0,F.jsx)(iB,{width:"100%",height:260,children:(0,F.jsxs)(Cc,{data:[{method:"EV/EBITDA",value:N.valuation.evEbitda},{method:"Cap Rate",value:N.valuation.capRateVal},{method:"Implied ($/kW)",value:N.valuation.perKwVal}],children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155"}),(0,F.jsx)(kt,{dataKey:"method",stroke:"#64748b",fontSize:11}),(0,F.jsx)(km,{stroke:"#64748b",fontSize:11,tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:e=>[eo(e),"Enterprise Value"]}),(0,F.jsxs)(v1,{dataKey:"value",radius:[6,6,0,0],children:[(0,F.jsx)(f9,{fill:"#6366f1"}),(0,F.jsx)(f9,{fill:"#10b981"}),(0,F.jsx)(f9,{fill:"#06b6d4"})]})]})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:["Exit Waterfall (Year ",y.exitYear,")"]}),(0,F.jsx)("div",{className:"grid grid-cols-5 gap-2 text-center",children:[{label:"Exit EBITDA",value:N.stabilizedEBITDA,color:"bg-slate-200 dark:bg-slate-700"},{label:`x ${y.exitEbitdaMultiple}x`,value:N.exitEV,color:"bg-indigo-100 dark:bg-indigo-950/40"},{label:"Enterprise Value",value:N.exitEV,color:"bg-emerald-100 dark:bg-emerald-950/40"},{label:"- Remaining Debt",value:-N.exitRemainingDebt,color:"bg-red-100 dark:bg-red-950/40"},{label:"Equity Value",value:N.exitEquityValue,color:"bg-cyan-100 dark:bg-cyan-950/40"}].map((e,t)=>(0,F.jsxs)("div",{className:`${e.color} rounded-lg p-3 border border-slate-200 dark:border-slate-700`,children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase mb-1",children:e.label}),(0,F.jsx)("div",{className:(0,eh.default)("text-lg font-bold",e.value>=0?"text-slate-900 dark:text-white":"text-red-600 dark:text-red-400"),children:eo(e.value)})]},t))})]})]}),"valuation"===p&&(c=N.stabilizedNOI,d=[.05,.055,.06,.065,.07,.075,.08].map(e=>({capRate:`${(100*e).toFixed(1)}%`,terminalValue:c/e,impliedDollarPerKw:Math.round(c/e/x.itLoad),isActive:.001>Math.abs(e-y.terminalCapRate)})),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-1",children:"Terminal Value Sensitivity"}),(0,F.jsxs)("p",{className:"text-[11px] text-slate-400 mb-4",children:["Stabilized NOI of ",eo(c)," capitalized across a range of cap rates"]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-500 uppercase font-semibold",children:[(0,F.jsx)("th",{className:"px-4 py-2 text-left",children:"Cap Rate"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Terminal Value"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Implied $/kW"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"vs Current"})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700/50",children:d.map((e,t)=>{let a=c/y.terminalCapRate,r=(e.terminalValue-a)/a*100;return(0,F.jsxs)("tr",{className:(0,eh.default)("hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors",e.isActive&&"bg-cyan-50 dark:bg-cyan-950/20"),children:[(0,F.jsx)("td",{className:"px-4 py-2 text-slate-800 dark:text-slate-300 font-mono",children:e.capRate}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-slate-900 dark:text-white font-medium",children:eo(e.terminalValue)}),(0,F.jsxs)("td",{className:"px-4 py-2 text-right text-cyan-600 dark:text-cyan-400",children:["$",el(e.impliedDollarPerKw),"/kW"]}),(0,F.jsx)("td",{className:(0,eh.default)("px-4 py-2 text-right font-mono",r>0?"text-emerald-600 dark:text-emerald-400":r<0?"text-red-600 dark:text-red-400":"text-slate-500"),children:e.isActive?"":`${r>0?"+":""}${r.toFixed(1)}%`})]},t)})})]})})]})),"ipo"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:"IPO / Acquisition Pricing"}),(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,F.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-900/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 uppercase mb-1 flex items-center gap-1",children:["Pre-Money (EV) ",(0,F.jsx)(ei,{content:"Enterprise Value before any acquisition premium. Based on EV/EBITDA multiple applied to stabilized EBITDA."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(N.valuation.evEbitda)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fair value before premium"})]}),(0,F.jsxs)("div",{className:"bg-emerald-50 dark:bg-emerald-950/30 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:[(0,F.jsxs)("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 uppercase mb-1 flex items-center gap-1",children:["Control Premium ",(0,F.jsx)(ei,{content:"Additional premium paid above market value for acquiring a controlling stake. Typically 20-40% for data center acquisitions."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:["+",(100*y.controlPremiumPct).toFixed(0),"%"]}),(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:eo(N.valuation.evEbitda*y.controlPremiumPct)})]}),(0,F.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-950/30 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800",children:[(0,F.jsxs)("div",{className:"text-[10px] text-indigo-600 dark:text-indigo-400 uppercase mb-1 flex items-center gap-1",children:["IPO / Acquisition Price ",(0,F.jsx)(ei,{content:"Final transaction price including control premium. This is the total amount a buyer would pay or the implied IPO market cap."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:eo(N.ipoPrice)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Implied $/kW: $",el(N.ipoPrice/x.itLoad)]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm dark:shadow-none",children:[(0,F.jsx)("div",{className:"px-6 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300",children:"Acquisition Price Sensitivity"})}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-500 uppercase font-semibold",children:[(0,F.jsx)("th",{className:"px-4 py-2 text-left",children:"Multiple"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Enterprise Value"}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Equity Value ",(0,F.jsx)(ei,{content:"Enterprise value minus net debt. Represents the value attributable to equity holders."})]})}),(0,F.jsx)("th",{className:"px-4 py-2 text-right",children:"Implied $/kW"})]})}),(0,F.jsx)("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700/50",children:N.acquisitionTable.map(e=>(0,F.jsxs)("tr",{className:(0,eh.default)("hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors",e.multiple===y.exitEbitdaMultiple&&"bg-cyan-50 dark:bg-cyan-950/20"),children:[(0,F.jsxs)("td",{className:"px-4 py-2 text-slate-800 dark:text-slate-300 font-mono",children:[e.multiple,"x"]}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-slate-900 dark:text-white",children:eo(e.enterpriseValue)}),(0,F.jsx)("td",{className:"px-4 py-2 text-right text-emerald-600 dark:text-emerald-400 font-medium",children:eo(e.equityValue)}),(0,F.jsxs)("td",{className:"px-4 py-2 text-right text-cyan-600 dark:text-cyan-400",children:["$",el(e.impliedDollarPerKw),"/kW"]})]},e.multiple))})]})})]})]}),"readiness"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:(0,eh.default)("border rounded-xl p-6 text-center shadow-sm dark:shadow-none","Ready"===N.readinessLabel?"bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-700":"Conditional"===N.readinessLabel?"bg-amber-50 dark:bg-amber-950/30 border-amber-300 dark:border-amber-700":"bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-700"),children:[(0,F.jsx)("div",{className:"text-5xl font-bold text-slate-900 dark:text-white",children:N.readinessScore}),(0,F.jsxs)("div",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center justify-center gap-1",children:["/ 100 ",(0,F.jsx)(ei,{content:"Composite investment readiness score based on weighted checks across IRR, DSCR, MOIC, leverage, and payback metrics. 80+ = Ready, 50-79 = Conditional, below 50 = Not Ready."})]}),(0,F.jsx)("div",{className:(0,eh.default)("text-lg font-bold mt-2","Ready"===N.readinessLabel?"text-emerald-600 dark:text-emerald-400":"Conditional"===N.readinessLabel?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"),children:N.readinessLabel})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 space-y-3 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-3",children:"Investment Readiness Checklist"}),N.readinessChecks.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-3 py-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0",children:[(0,F.jsx)("div",{className:(0,eh.default)("flex-shrink-0",e.pass?"text-emerald-500":"text-red-500"),children:e.pass?(0,F.jsx)(eH,{className:"w-5 h-5"}):(0,F.jsx)(ea,{className:"w-5 h-5"})}),(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.label}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Target: ",e.target]})]}),(0,F.jsx)("div",{className:(0,eh.default)("text-sm font-mono font-bold",e.pass?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:e.actual}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 w-12 text-right",children:[e.weight,"pts"]})]},t))]})]}),"sensitivity"===p&&(0,F.jsxs)("div",{className:"space-y-4 animate-in fade-in duration-300",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:"Equity IRR Sensitivity Matrix"}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Debt Ratio (rows) x Exit EV/EBITDA Multiple (columns)"}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{children:[(0,F.jsx)("th",{className:"px-3 py-2 text-left text-slate-500 font-medium",children:"Debt %"}),[14,16,18,20,22].map(e=>(0,F.jsxs)("th",{className:"px-3 py-2 text-center text-slate-500 font-medium",children:[e,"x"]},e))]})}),(0,F.jsx)("tbody",{children:[.5,.55,.6,.65,.7,.75,.8].map(e=>(0,F.jsxs)("tr",{className:e===y.debtRatio?"bg-cyan-50 dark:bg-cyan-950/20":"",children:[(0,F.jsxs)("td",{className:"px-3 py-2 font-mono text-slate-700 dark:text-slate-300 font-medium",children:[(100*e).toFixed(0),"%"]}),[14,16,18,20,22].map(t=>{let a=N.sensitivityMatrix.find(a=>a.debtRatio===e&&a.exitMultiple===t),r=a?.equityIRR??0,n=e===y.debtRatio&&t===y.exitEbitdaMultiple;return(0,F.jsx)("td",{className:(0,eh.default)("px-3 py-2 text-center font-mono font-bold rounded",r>=20?"bg-emerald-200 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-300":r>=15?"bg-emerald-100 dark:bg-emerald-950/30 text-emerald-700 dark:text-emerald-400":r>=10?"bg-amber-100 dark:bg-amber-950/30 text-amber-700 dark:text-amber-400":"bg-red-100 dark:bg-red-950/30 text-red-700 dark:text-red-400",n&&"ring-2 ring-cyan-500"),children:em(r)},t)})]},e))})]})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm dark:shadow-none",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-300 mb-4",children:"Key Variable Impact on Equity IRR"}),(0,F.jsx)("div",{className:"space-y-3",children:[{label:"Exit EV/EBITDA Multiple",impact:"High",color:"text-red-600 dark:text-red-400",desc:"Primary driver  1x change shifts IRR by ~2-3%"},{label:"Debt Ratio (Leverage)",impact:"High",color:"text-red-600 dark:text-red-400",desc:"More leverage amplifies returns but increases risk"},{label:"Occupancy Ramp Speed",impact:"Medium",color:"text-amber-600 dark:text-amber-400",desc:"Faster ramp improves early cashflows and payback"},{label:"Interest Rate",impact:"Medium",color:"text-amber-600 dark:text-amber-400",desc:"Directly affects debt service and DSCR"},{label:"Revenue per kW",impact:"Medium",color:"text-amber-600 dark:text-amber-400",desc:"Sets the revenue ceiling for all years"},{label:"OPEX Growth",impact:"Low",color:"text-emerald-600 dark:text-emerald-400",desc:"Gradual erosion, limited short-term impact"}].map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-3 py-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0",children:[(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.label}),(0,F.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.desc})]}),(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold uppercase px-2 py-1 rounded",e.color),children:e.impact})]},t))})]})]})]})]})]})},Sg={energy:{label:"Energy Efficiency",color:"#10b981",darkColor:"#34d399"},staffing:{label:"Staffing",color:"#3b82f6",darkColor:"#60a5fa"},financial:{label:"Financial",color:"#f59e0b",darkColor:"#fbbf24"},availability:{label:"Availability",color:"#8b5cf6",darkColor:"#a78bfa"},carbon:{label:"Carbon & ESG",color:"#ef4444",darkColor:"#f87171"}},Sy=[{id:"pue",name:"Power Usage Effectiveness",unit:"PUE",category:"energy",description:"Ratio of total facility power to IT equipment power",source:"Uptime Institute Global Survey 2024",lowerIsBetter:!0,p10:1.1,p25:1.2,median:1.35,p75:1.55,p90:1.8},{id:"wue",name:"Water Usage Effectiveness",unit:"L/kWh",category:"energy",description:"Water consumed per kWh of IT energy",source:"ASHRAE TC 9.9 / The Green Grid",lowerIsBetter:!0,p10:.2,p25:.6,median:1.2,p75:1.8,p90:2.5},{id:"energy_cost_per_kw",name:"Energy Cost per kW",unit:"$/kW/yr",category:"energy",description:"Annual electricity cost per kW of IT load",source:"IEA Data Centres & Energy 2024",lowerIsBetter:!0,p10:800,p25:1100,median:1500,p75:2e3,p90:2800},{id:"staff_per_mw",name:"Staff per MW",unit:"FTE/MW",category:"staffing",description:"Full-time equivalent staff per MW of IT load",source:"Uptime Institute Staffing Benchmark 2024",lowerIsBetter:!0,p10:3.5,p25:5,median:7,p75:10,p90:14,tierOverrides:{2:{p10:2.5,p25:3.5,median:5,p75:7,p90:10},4:{p10:5,p25:7,median:10,p75:14,p90:18}}},{id:"labor_cost_pct_opex",name:"Labor Cost % of OPEX",unit:"%",category:"staffing",description:"Percentage of operating expenses attributable to labor",source:"Gartner DC Operations Report 2024",lowerIsBetter:!0,p10:18,p25:25,median:35,p75:45,p90:55},{id:"turnover_rate",name:"Annual Staff Turnover",unit:"%",category:"staffing",description:"Percentage of staff leaving annually",source:"Uptime Institute HR Survey 2024",lowerIsBetter:!0,p10:5,p25:10,median:15,p75:22,p90:30},{id:"capex_per_kw",name:"CAPEX per kW",unit:"$/kW",category:"financial",description:"Total capital expenditure per kW of IT capacity",source:"JLL Global DC Report 2024",lowerIsBetter:!0,p10:7e3,p25:9e3,median:12e3,p75:16e3,p90:22e3,tierOverrides:{2:{p10:5e3,p25:7e3,median:9e3,p75:12e3,p90:16e3},4:{p10:12e3,p25:16e3,median:2e4,p75:26e3,p90:35e3}}},{id:"opex_per_kw",name:"OPEX per kW",unit:"$/kW/yr",category:"financial",description:"Annual operating expenditure per kW of IT load",source:"S&P Global Platts / 451 Research",lowerIsBetter:!0,p10:1200,p25:1800,median:2500,p75:3500,p90:5e3},{id:"irr",name:"Internal Rate of Return",unit:"%",category:"financial",description:"Expected IRR for new DC builds",source:"CBRE DC Investment Outlook 2024",lowerIsBetter:!1,p10:25,p25:18,median:13,p75:8,p90:4},{id:"payback_years",name:"Payback Period",unit:"years",category:"financial",description:"Years to recover initial capital investment",source:"JLL / Cushman & Wakefield DC Analytics",lowerIsBetter:!0,p10:3,p25:4.5,median:6,p75:8,p90:12},{id:"uptime_pct",name:"Annual Uptime",unit:"%",category:"availability",description:"Percentage of time the facility is fully operational",source:"Uptime Institute Annual Outage Report 2024",lowerIsBetter:!1,p10:99.999,p25:99.995,median:99.982,p75:99.95,p90:99.9,tierOverrides:{2:{p10:99.99,p25:99.98,median:99.95,p75:99.9,p90:99.75},4:{p10:99.9999,p25:99.999,median:99.995,p75:99.99,p90:99.98}}},{id:"mttr_hours",name:"Mean Time to Repair",unit:"hours",category:"availability",description:"Average time to restore service after an incident",source:"Uptime Institute / IEEE",lowerIsBetter:!0,p10:.5,p25:1.5,median:4,p75:8,p90:24},{id:"cue",name:"Carbon Usage Effectiveness",unit:"kgCO2/kWh",category:"carbon",description:"Carbon emissions per kWh of IT energy consumed",source:"The Green Grid / GHG Protocol",lowerIsBetter:!0,p10:.05,p25:.15,median:.35,p75:.55,p90:.8},{id:"renewable_pct",name:"Renewable Energy %",unit:"%",category:"carbon",description:"Percentage of energy sourced from renewables",source:"RE100 / CDP Climate Disclosure",lowerIsBetter:!1,p10:100,p25:75,median:40,p75:15,p90:0},{id:"scope2_per_mw",name:"Scope 2 Emissions per MW",unit:"tCO2/MW/yr",category:"carbon",description:"Annual Scope 2 greenhouse gas emissions per MW of IT",source:"IEA / GHG Protocol",lowerIsBetter:!0,p10:200,p25:800,median:2e3,p75:3500,p90:5e3}];function Sv(e,t){let a=e.tierOverrides?.[t];return a||{p10:e.p10,p25:e.p25,median:e.median,p75:e.p75,p90:e.p90}}function Sj(e){return e<=25?"A":e<=50?"B":e<=75?"C":e<=90?"D":"F"}let Sk={A:{bg:"bg-emerald-100",text:"text-emerald-700",darkBg:"dark:bg-emerald-900/30",darkText:"dark:text-emerald-400"},B:{bg:"bg-blue-100",text:"text-blue-700",darkBg:"dark:bg-blue-900/30",darkText:"dark:text-blue-400"},C:{bg:"bg-yellow-100",text:"text-yellow-700",darkBg:"dark:bg-yellow-900/30",darkText:"dark:text-yellow-400"},D:{bg:"bg-orange-100",text:"text-orange-700",darkBg:"dark:bg-orange-900/30",darkText:"dark:text-orange-400"},F:{bg:"bg-red-100",text:"text-red-700",darkBg:"dark:bg-red-900/30",darkText:"dark:text-red-400"}};function Sw(e,t){return"%"===t?`${e.toFixed(1)}%`:"PUE"===t?e.toFixed(2):"$/kW"===t||"$/kW/yr"===t?`$${e.toLocaleString("en-US",{maximumFractionDigits:0})}`:"years"===t?`${e.toFixed(1)} yr`:"hours"===t?`${e.toFixed(1)} hr`:`${e.toFixed(2)} ${t}`}let SN=(0,X.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),SC={pue:"Power Usage Effectiveness  ratio of total facility power to IT equipment power. Lower is better. Industry median ~1.35 (Uptime Institute 2024).",wue:"Water Usage Effectiveness  liters of water consumed per kWh of IT energy. Estimated from cooling type. Lower is better.",energy_cost_per_kw:"Annual electricity cost per kW of IT load, estimated at ~60% of total OPEX. Varies significantly by region.",staff_per_mw:"Full-time equivalent staff per MW of IT load. Tier 4 facilities typically require 518 FTE/MW; Tier 2 requires 2.510.",labor_cost_pct_opex:"Labor costs as a percentage of total operating expenditure. High ratios may indicate overstaffing or under-automation.",turnover_rate:"Annual staff turnover percentage. High turnover increases training costs and operational risk. Industry median ~15%.",capex_per_kw:"Total capital expenditure per kW of IT capacity. Tier level is the strongest driver. Includes M&E, structure, and site costs.",opex_per_kw:"Annual operating expenditure per kW of IT load. Encompasses energy, staffing, maintenance, and compliance costs.",irr:"Internal Rate of Return  expected annualized return on investment. Higher is better. Industry median ~13% for new builds.",payback_years:"Years to recover initial capital investment through net cash flows. Lower is better. Affected by occupancy ramp and pricing.",uptime_pct:"Annual uptime as a percentage. Derived from tier level SLA targets. Tier 3 targets 99.982%, Tier 4 targets 99.995%.",mttr_hours:"Mean Time to Repair  average hours to restore service after an incident. Lower is better. Driven by spares, staffing, and procedures.",cue:"Carbon Usage Effectiveness  kgCO2 emitted per kWh of IT energy. Derived from grid carbon intensity. Lower is better.",renewable_pct:"Percentage of energy sourced from renewables (PPAs, on-site, RECs). Higher is better. Industry leaders target 100%.",scope2_per_mw:"Annual Scope 2 greenhouse gas emissions (tCO2) per MW of IT load. Driven by grid carbon intensity and PUE."},SS={energy:"Power Usage Effectiveness benchmark. Scores facility energy efficiency against Tier-matched peers using PUE, WUE, and energy cost per kW.",staffing:"Staff-to-MW ratio compared to industry norms. Accounts for shift model, labor cost as % of OPEX, and annual turnover rate.",financial:"OPEX per kW and CAPEX per kW benchmarked against regional and tier-appropriate comparables. Includes IRR and payback period.",availability:"Uptime achievement vs SLA targets. Based on annual uptime percentage and mean time to repair (MTTR) for the selected tier.",carbon:"Carbon intensity, renewable energy percentage, and Scope 2 emissions per MW benchmarked against industry leaders and GHG Protocol standards."};function SP(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),a=(0,ew.useCapexStore)(),r=H(),[n,s]=(0,z.useState)("scorecard"),i=(0,z.useMemo)(()=>{if(!e)return null;let n=(0,w_.calculateCapex)(a.inputs),s=r.headcount_ShiftLead+r.headcount_Engineer+r.headcount_Technician+r.headcount_Admin+r.headcount_Janitor,i=[{role:"shift-lead",count:r.headcount_ShiftLead,is24x7:!0},{role:"engineer",count:r.headcount_Engineer,is24x7:!0},{role:"technician",count:r.headcount_Technician,is24x7:!1},{role:"admin",count:r.headcount_Admin,is24x7:!1},{role:"janitor",count:r.headcount_Janitor,is24x7:!1}].reduce((a,r)=>a+12*B(r.role,r.count,t.shiftModel,e,r.is24x7).monthlyCost,0),l=n.pue,o=i+t.itLoad*l*8760/1e3*(1e3*e.economy.electricityRate)+(e.compliance.annualComplianceCost||5e4),c=wI({totalCapex:n.total,annualOpex:o,revenuePerKwMonth:120,itLoadKw:t.itLoad,discountRate:.1,projectLifeYears:10,escalationRate:.03,opexEscalation:e.economy.inflationRate,occupancyRamp:t.occupancyRamp.length>0?t.occupancyRamp:wT(10),taxRate:e.economy.taxRate,depreciationYears:7}),d=Cr({itLoadKw:t.itLoad,pue:l,gridCarbonIntensity:e.environment.gridCarbonIntensity,coolingType:t.coolingType,renewableOption:"none",fuelHours:50,genType:"diesel",countryName:e.name});return function(e){let{itLoadKw:t,coolingType:a,tierLevel:r,totalStaff:n,turnoverRate:s,totalCapex:i,annualOpex:l,irr:o,paybackYears:c,pue:d,annualCO2:u,gridCarbonIntensity:m,renewablePct:x}=e,h=t/1e3,p=d||(0,wO.getPUE)(a),f={pue:p,wue:p<=1.15?.3:p<=1.3?1:1.5,energy_cost_per_kw:l>0?.6*l/t:1500,staff_per_mw:h>0?n/h:7,labor_cost_pct_opex:l>0?Math.min(55,Math.max(15,5e4*n/l*100)):35,turnover_rate:100*(s||.15),capex_per_kw:t>0?i/t:12e3,opex_per_kw:t>0?l/t:2500,irr:o||13,payback_years:c||6,uptime_pct:4===r?99.995:3===r?99.982:99.95,mttr_hours:4===r?1:3===r?4:8,cue:m?m/1e3:.35,renewable_pct:x||0,scope2_per_mw:h>0?u/h:2e3},b=Sy.map(e=>{let t=f[e.id]??0,a=function(e,t,a){let r=Sv(t,a),n=(t.lowerIsBetter,[{pct:10,val:r.p10},{pct:25,val:r.p25},{pct:50,val:r.median},{pct:75,val:r.p75},{pct:90,val:r.p90}]);if(t.lowerIsBetter){if(e<=n[0].val)return 5;if(e>=n[4].val)return 95;for(let t=0;t<n.length-1;t++)if(e<=n[t+1].val){let a=n[t+1].val-n[t].val,r=a>0?(e-n[t].val)/a:0;return n[t].pct+r*(n[t+1].pct-n[t].pct)}}else{if(e>=n[0].val)return 5;if(e<=n[4].val)return 95;for(let t=0;t<n.length-1;t++)if(e>=n[t+1].val){let a=n[t].val-n[t+1].val,r=a>0?(n[t].val-e)/a:0;return n[t].pct+r*(n[t+1].pct-n[t].pct)}}return 50}(t,e,r),n=Sj(a),s=Sv(e,r);return{metric:e,userValue:t,percentile:a,grade:n,tierBenchmarks:s}}),g={energy:{total:0,count:0},staffing:{total:0,count:0},financial:{total:0,count:0},availability:{total:0,count:0},carbon:{total:0,count:0}};for(let e of b)g[e.metric.category].total+=100-e.percentile,g[e.metric.category].count++;let y={};for(let[e,t]of Object.entries(g)){let a=t.count>0?Math.round(t.total/t.count):50;y[e]={score:a,grade:Sj(100-a),count:t.count}}let v=Math.round(b.reduce((e,t)=>e+(100-t.percentile),0)/b.length),j=Sj(100-v),k=[...b].sort((e,t)=>e.percentile-t.percentile);return{overallScore:v,overallGrade:j,categoryScores:y,metrics:b,strengths:k.slice(0,3).map(e=>({metric:e.metric.name,grade:e.grade,detail:`Your ${e.metric.name} (${Sw(e.userValue,e.metric.unit)}) ranks in the top ${Math.round(e.percentile)}th percentile`})),improvements:k.slice(-3).reverse().map(e=>{var t,a;return{metric:e.metric.name,grade:e.grade,detail:`Your ${e.metric.name} (${Sw(e.userValue,e.metric.unit)}) is at the ${Math.round(e.percentile)}th percentile`,recommendation:(t=e.metric.id,a=e.grade,({pue:"Consider upgrading to more efficient cooling (in-row or liquid). Hot/cold aisle containment can reduce PUE by 0.1-0.2.",wue:"Evaluate air-cooled or closed-loop systems to reduce water consumption.",energy_cost_per_kw:"Negotiate long-term power purchase agreements (PPAs) or explore on-site generation.",staff_per_mw:"Implement predictive maintenance and automation to reduce manual staffing requirements.",labor_cost_pct_opex:"Consider hybrid staffing model or automation to optimize labor costs.",turnover_rate:"Improve retention through compressed shift schedules (4on3off), training programs, and competitive compensation.",capex_per_kw:"Review construction costs, consider modular builds, and optimize redundancy levels for actual SLA requirements.",opex_per_kw:"Focus on energy efficiency improvements and maintenance optimization to reduce per-kW operating costs.",irr:"Improve revenue per kW through premium services, or reduce CAPEX/OPEX to improve returns.",payback_years:"Accelerate occupancy ramp-up and optimize pricing strategy.",uptime_pct:"Invest in redundancy, predictive maintenance, and incident response training.",mttr_hours:"Pre-stage critical spares, improve monitoring, and conduct regular drill exercises.",cue:"Increase renewable energy procurement and optimize PUE to reduce carbon intensity.",renewable_pct:"Pursue renewable PPAs, on-site solar/wind, or RECs to increase clean energy percentage.",scope2_per_mw:"Switch to low-carbon grid regions or invest in renewable energy procurement."})[t]||"Review operational processes and industry best practices for improvement opportunities.")}})}}({itLoadKw:t.itLoad,coolingType:t.coolingType,tierLevel:t.tierLevel,totalStaff:s,turnoverRate:t.turnoverRate||.15,totalCapex:n.total,annualOpex:o,irr:c.irr,paybackYears:c.paybackPeriodYears,pue:l,annualCO2:d.annualEmissionsTonCO2,gridCarbonIntensity:e.environment.gridCarbonIntensity,renewablePct:0})},[e,t,a.inputs,r]);return i&&e?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:(0,F.jsx)(Cl.Target,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),"Industry Benchmarks",(0,F.jsx)(ei,{content:"Compare your data center configuration against industry-standard benchmarks from Uptime Institute, ASHRAE, and Green Grid surveys for same-tier facilities."})]}),(0,F.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Compare your configuration against industry standards"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-3 py-1.5 rounded-lg",children:[(0,F.jsx)(es,{className:"w-3.5 h-3.5"}),"Tier ",t.tierLevel," | ",e.name," | ",t.itLoad.toLocaleString()," kW",(0,F.jsx)(ei,{content:"Active configuration parameters used for benchmark scoring. Tier level, country, and IT load directly affect which peer group your facility is compared against."})]})]}),(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800/50 p-1 rounded-xl",children:[{id:"scorecard",label:"Scorecard"},{id:"detailed",label:"Detailed Metrics"},{id:"strengths",label:"Strengths & Gaps"},{id:"comparison",label:"Industry Comparison"}].map(e=>(0,F.jsx)("button",{onClick:()=>s(e.id),className:(0,eh.default)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all",n===e.id?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:e.label},e.id))}),"scorecard"===n&&(0,F.jsx)(SM,{result:i}),"detailed"===n&&(0,F.jsx)(SO,{metrics:i.metrics,tier:t.tierLevel}),"strengths"===n&&(0,F.jsx)(SA,{result:i}),"comparison"===n&&(0,F.jsx)(ST,{metrics:i.metrics})]}):(0,F.jsxs)("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[(0,F.jsx)(Cl.Target,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,F.jsx)("p",{children:"Select a country to generate benchmark analysis."})]})}function SM({result:e}){let t=Sk[e.overallGrade];return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 p-8 text-center",children:(0,F.jsxs)("div",{className:"inline-flex flex-col items-center",children:[(0,F.jsxs)("div",{className:"relative w-40 h-40",children:[(0,F.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[(0,F.jsx)("circle",{cx:"60",cy:"60",r:"52",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-slate-200 dark:text-slate-700"}),(0,F.jsx)("circle",{cx:"60",cy:"60",r:"52",fill:"none",strokeWidth:"8",strokeDasharray:`${e.overallScore/100*327} 327`,strokeLinecap:"round",className:"A"===e.overallGrade?"text-emerald-500":"B"===e.overallGrade?"text-blue-500":"C"===e.overallGrade?"text-yellow-500":"D"===e.overallGrade?"text-orange-500":"text-red-500",stroke:"currentColor"})]}),(0,F.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,F.jsx)("span",{className:(0,eh.default)("text-4xl font-bold",t.text,t.darkText),children:e.overallGrade}),(0,F.jsxs)("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-0.5",children:[e.overallScore,"/100 ",(0,F.jsx)(ei,{content:"Weighted aggregate of all category scores (0100), reflecting overall operational maturity relative to industry peers."})]})]})]}),(0,F.jsxs)("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-400 flex items-center justify-center gap-1",children:["Overall Benchmark Score",(0,F.jsx)(ei,{content:"Composite grade (AF) based on weighted scoring across all benchmark categories. A = top 10%, F = bottom 20%."})]})]})}),(0,F.jsx)("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(Sg).map(([t,a])=>{let r=e.categoryScores[t],n=Sk[r.grade];return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4 text-center",children:[(0,F.jsxs)("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 flex items-center justify-center gap-0.5",children:[a.label," ",(0,F.jsx)(ei,{content:SS[t]})]}),(0,F.jsxs)("div",{className:(0,eh.default)("text-2xl font-bold flex items-center justify-center gap-1",n.text,n.darkText),children:[r.grade," ",(0,F.jsx)(ei,{content:"Letter grade (AF) derived from percentile rank. A = top 25%, B = 2550%, C = 5075%, D = 7590%, F = bottom 10%."})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 flex items-center justify-center gap-0.5",children:[r.score,"/100 ",(0,F.jsx)(ei,{content:"Performance score (0100) for a specific operational domain relative to industry averages."})]}),(0,F.jsx)("div",{className:"mt-2 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded-full transition-all","A"===r.grade?"bg-emerald-500":"B"===r.grade?"bg-blue-500":"C"===r.grade?"bg-yellow-500":"D"===r.grade?"bg-orange-500":"bg-red-500"),style:{width:`${r.score}%`}})})]},t)})}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,F.jsx)(SN,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Top Strengths"}),(0,F.jsx)(ei,{content:"The top 3 metrics where your facility outperforms industry peers. Based on lowest percentile rank (closest to best-in-class)."})]}),(0,F.jsx)("div",{className:"space-y-2",children:e.strengths.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-1.5 py-0.5 rounded",Sk[e.grade].bg,Sk[e.grade].text,Sk[e.grade].darkBg,Sk[e.grade].darkText),children:e.grade}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:e.metric})]},t))})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,F.jsx)(eM,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Improvement Areas"}),(0,F.jsx)(ei,{content:"The 3 metrics with the most room for improvement. Each includes an actionable recommendation based on industry best practices."})]}),(0,F.jsx)("div",{className:"space-y-2",children:e.improvements.map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-1.5 py-0.5 rounded",Sk[e.grade].bg,Sk[e.grade].text,Sk[e.grade].darkBg,Sk[e.grade].darkText),children:e.grade}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:e.metric})]},t))})]})]})]})}function SO({metrics:e,tier:t}){let a=(0,z.useMemo)(()=>{let t={energy:[],staffing:[],financial:[],availability:[],carbon:[]};for(let a of e)t[a.metric.category].push(a);return t},[e]);return(0,F.jsx)("div",{className:"space-y-6",children:Object.entries(a).map(([e,a])=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,F.jsx)("div",{className:"px-5 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:[Sg[e].label," ",(0,F.jsx)(ei,{content:SS[e]})]})}),(0,F.jsx)("div",{className:"p-5 space-y-5",children:a.map(e=>(0,F.jsx)(SE,{score:e,tier:t},e.metric.id))})]},e))})}function SE({score:e,tier:t}){let a=e.tierBenchmarks,{metric:r,userValue:n,percentile:s,grade:i}=e,l=Sk[i],o=[a.p10,a.p25,a.median,a.p75,a.p90,n],c=.8*Math.min(...o),d=1.2*Math.max(...o)-c,u=e=>`${Math.max(0,Math.min(100,(e-c)/d*100))}%`;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[(0,F.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:r.name}),(0,F.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",r.unit,")"]}),(0,F.jsx)(ei,{content:SC[r.id]||r.description})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("span",{className:"text-sm font-mono font-medium text-slate-700 dark:text-slate-300",children:SI(n,r.unit)}),(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-1.5 py-0.5 rounded",l.bg,l.text,l.darkBg,l.darkText),children:i}),(0,F.jsx)(ei,{content:"Facility's position relative to industry peers. Lower percentile = better performance. 10th percentile means top 10%."})]})]}),(0,F.jsxs)("div",{className:"relative h-6 bg-slate-100 dark:bg-slate-700/50 rounded overflow-hidden",children:[(0,F.jsx)("div",{className:"absolute inset-y-0 bg-emerald-200 dark:bg-emerald-900/40 rounded-l",style:{left:u(Math.min(a.p10,a.p90)),width:u(Math.abs(a.p25-Math.min(a.p10,a.p90))+c)}}),(0,F.jsx)("div",{className:"absolute inset-y-0 bg-blue-200 dark:bg-blue-900/30",style:{left:u(Math.min(a.p25,a.p75)),width:`calc(${u(Math.max(a.p25,a.p75))} - ${u(Math.min(a.p25,a.p75))})`}}),(0,F.jsx)("div",{className:"absolute inset-y-0 w-0.5 bg-slate-400 dark:bg-slate-500",style:{left:u(a.median)}}),(0,F.jsx)("div",{className:"absolute top-0.5 bottom-0.5 w-2.5 rounded-sm bg-cyan-600 dark:bg-cyan-400 shadow-sm",style:{left:`calc(${u(n)} - 5px)`}})]}),(0,F.jsxs)("div",{className:"flex justify-between text-[10px] text-slate-400 dark:text-slate-500 mt-0.5",children:[(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["P10: ",SI(a.p10,r.unit)]}),(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["Median: ",SI(a.median,r.unit)," ",(0,F.jsx)(ei,{content:"Visual benchmark range. Blue zone = interquartile range (P25P75). Cyan marker = your value. Vertical line = industry median."})]}),(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["P90: ",SI(a.p90,r.unit)]})]})]})}function SA({result:e}){return(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(SN,{className:"w-4 h-4 text-emerald-500"}),"Top 3 Strengths",(0,F.jsx)(ei,{content:"Metrics where your configuration excels relative to industry peers. Sorted by percentile rank (best first)."})]}),e.strengths.map((e,t)=>{let a=Sk[e.grade];return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-2 py-0.5 rounded",a.bg,a.text,a.darkBg,a.darkText),children:e.grade}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.metric})]}),(0,F.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:e.detail})]},t)})]}),(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-amber-500"}),"Top 3 Improvement Areas",(0,F.jsx)(ei,{content:"Metrics with the largest gap between your performance and industry best-in-class. Each includes an actionable recommendation."})]}),e.improvements.map((e,t)=>{let a=Sk[e.grade];return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-2 py-0.5 rounded",a.bg,a.text,a.darkBg,a.darkText),children:e.grade}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.metric})]}),(0,F.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2",children:e.detail}),(0,F.jsxs)("div",{className:"flex items-start gap-1.5 text-xs text-cyan-700 dark:text-cyan-400 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-2",children:[(0,F.jsx)(Nv,{className:"w-3.5 h-3.5 mt-0.5 shrink-0"}),(0,F.jsx)("span",{children:e.recommendation})]})]},t)})]})]})}function ST({metrics:e}){return(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-900 dark:text-white",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Metric ",(0,F.jsx)(ei,{content:"Benchmark metric name and unit of measurement."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-900 dark:text-white",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Your Value ",(0,F.jsx)(ei,{content:"Your facility's calculated value for this metric based on current configuration inputs."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-0.5",children:["P10 ",(0,F.jsx)(ei,{content:"Industry distribution from top performers (P10) to bottom performers (P90). Based on Uptime Institute and Green Grid surveys."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:"P25"}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:"Median"}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:"P75"}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:"P90"}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-900 dark:text-white",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Rank ",(0,F.jsx)(ei,{content:"Percentile rank indicating where your facility falls in the industry distribution. Lower percentile = better performance."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-3 font-semibold text-slate-900 dark:text-white",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Grade ",(0,F.jsx)(ei,{content:"Letter grade (AF) derived from percentile position. A = top quartile, F = bottom decile."})]})}),(0,F.jsx)("th",{className:"text-left px-3 py-3 font-semibold text-slate-500 dark:text-slate-400",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Source ",(0,F.jsx)(ei,{content:"Data source for the benchmark values (e.g., Uptime Institute, ASHRAE, Green Grid, IEA)."})]})})]})}),(0,F.jsx)("tbody",{children:e.map((e,t)=>{let a=Sk[e.grade],r=e.tierBenchmarks;return(0,F.jsxs)("tr",{className:(0,eh.default)("border-b border-slate-100 dark:border-slate-800",t%2==0?"bg-white dark:bg-transparent":"bg-slate-50/50 dark:bg-slate-800/20"),children:[(0,F.jsxs)("td",{className:"px-4 py-2.5",children:[(0,F.jsxs)("div",{className:"font-medium text-slate-900 dark:text-white text-xs flex items-center gap-0.5",children:[e.metric.name," ",(0,F.jsx)(ei,{content:SC[e.metric.id]||e.metric.description})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:e.metric.unit})]}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono font-semibold text-cyan-700 dark:text-cyan-400 text-xs",children:SI(e.userValue,e.metric.unit)}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono text-xs text-slate-500 dark:text-slate-400",children:SI(r.p10,e.metric.unit)}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono text-xs text-slate-500 dark:text-slate-400",children:SI(r.p25,e.metric.unit)}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono text-xs text-slate-600 dark:text-slate-300 font-medium",children:SI(r.median,e.metric.unit)}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono text-xs text-slate-500 dark:text-slate-400",children:SI(r.p75,e.metric.unit)}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5 font-mono text-xs text-slate-500 dark:text-slate-400",children:SI(r.p90,e.metric.unit)}),(0,F.jsxs)("td",{className:"text-center px-3 py-2.5 text-xs text-slate-700 dark:text-slate-300",children:["P",Math.round(e.percentile)]}),(0,F.jsx)("td",{className:"text-center px-3 py-2.5",children:(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-bold px-2 py-0.5 rounded",a.bg,a.text,a.darkBg,a.darkText),children:e.grade})}),(0,F.jsx)("td",{className:"px-3 py-2.5 text-[10px] text-slate-400 dark:text-slate-500 max-w-[140px] truncate",children:e.metric.source})]},e.metric.id)})})]})})})}function SI(e,t){return"%"===t?`${e.toFixed(1)}%`:"PUE"===t?e.toFixed(2):"$/kW"===t||"$/kW/yr"===t?`$${Math.round(e).toLocaleString()}`:"years"===t||"hours"===t?`${e.toFixed(1)}`:"FTE/MW"===t?e.toFixed(1):"L/kWh"===t||"kgCO2/kWh"===t?e.toFixed(2):"tCO2/MW/yr"===t?Math.round(e).toLocaleString():e.toFixed(2)}class SR{s;constructor(e){this.s=new Uint32Array(4);let t=e>>>0;for(let e=0;e<4;e++){let a=(t=t+0x9e3779b9>>>0)^t>>>16;a=Math.imul(a,0x85ebca6b),a^=a>>>13,a=Math.imul(a,0xc2b2ae35),a^=a>>>16,this.s[e]=a>>>0}}next(){let e=this.s,t=Math.imul(5*e[1],128),a=e[1]<<9;return e[2]^=e[0],e[3]^=e[1],e[1]^=e[2],e[0]^=e[3],e[2]^=a,e[3]=e[3]<<11|e[3]>>>21,(t>>>0)/0x100000000}normal(e,t){return e+Math.sqrt(-2*Math.log(Math.max(1e-10,this.next())))*Math.cos(2*Math.PI*this.next())*t}triangular(e,t,a){let r=this.next();return r<(t-e)/(a-e)?e+Math.sqrt(r*(a-e)*(t-e)):a-Math.sqrt((1-r)*(a-e)*(a-t))}uniform(e,t){return e+this.next()*(t-e)}}let SD=[{id:"powerCost",name:"Power Cost",distribution:"normal",enabled:!0,mean:1,spread:.15,unit:"%",description:"Electricity rate variation (15%)"},{id:"pue",name:"PUE Variance",distribution:"triangular",enabled:!0,mean:1,spread:.1,unit:"%",description:"Power usage effectiveness fluctuation"},{id:"occupancy",name:"Occupancy Ramp",distribution:"uniform",enabled:!0,mean:1,spread:.2,unit:"%",description:"Demand uncertainty (20%)"},{id:"capex",name:"CAPEX Variance",distribution:"normal",enabled:!0,mean:1,spread:.1,unit:"%",description:"Construction cost overrun/underrun (10%)"},{id:"revenue",name:"Revenue/kW",distribution:"normal",enabled:!0,mean:1,spread:.12,unit:"%",description:"Pricing pressure/premium (12%)"},{id:"opexEscalation",name:"OPEX Escalation",distribution:"uniform",enabled:!0,mean:0,spread:.015,unit:"abs",description:"Annual OPEX growth rate variance (1.5%)"},{id:"taxRate",name:"Tax Rate",distribution:"uniform",enabled:!0,mean:0,spread:.03,unit:"abs",description:"Effective tax rate variance (3%)"},{id:"discountRate",name:"Discount Rate",distribution:"normal",enabled:!0,mean:0,spread:.01,unit:"abs",description:"WACC / hurdle rate variance (1%)"}];function SL(e){let t=[...e].sort((e,t)=>e-t),a=t.length,r=e.reduce((e,t)=>e+t,0)/a,n=e.reduce((e,t)=>e+(t-r)**2,0)/a,s=e=>{let r=e/100*(a-1),n=Math.floor(r),s=Math.ceil(r),i=r-n;return t[n]*(1-i)+t[s]*i};return{mean:r,median:s(50),stdDev:Math.sqrt(n),min:t[0],max:t[a-1],p5:s(5),p10:s(10),p25:s(25),p75:s(75),p90:s(90),p95:s(95),values:t}}function S_(e,t=40){let a=[...e].sort((e,t)=>e-t),r=a[0],n=(a[a.length-1]-r||1)/t,s=[];for(let e=0;e<t;e++)s.push({binStart:r+e*n,binEnd:r+(e+1)*n,count:0,frequency:0});for(let a of e){let e=Math.min(t-1,Math.floor((a-r)/n));s[e].count++}let i=e.length;for(let e of s)e.frequency=e.count/i;return s}var SF=["item"],S$=(0,z.forwardRef)((e,t)=>z.createElement(f1,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:SF,tooltipPayloadSearcher:ny,categoricalChartProps:e,ref:t})),Sz=["option","isActive"];function Sq(){return(Sq=Object.assign.bind()).apply(null,arguments)}function SW(e){var{option:t,isActive:a}=e,r=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,Sz);return"string"==typeof t?z.createElement(y1,Sq({option:z.createElement(yy,Sq({type:t},r)),isActive:a,shapeType:"symbols"},r)):z.createElement(y1,Sq({option:t,isActive:a,shapeType:"symbols"},r))}var SB=rc([u5,(e,t,a,r,n)=>n],(e,t)=>e.filter(e=>"scatter"===e.type).find(e=>e.id===t)),SU=rc([(e,t,a,r,n,s,i)=>dV(e,void 0,void 0,i),(e,t,a,r,n,s,i)=>xv(e,"xAxis",t,i),(e,t,a,r,n,s,i)=>xy(e,"xAxis",t,i),(e,t,a,r,n,s,i)=>xv(e,"yAxis",a,i),(e,t,a,r,n,s,i)=>xy(e,"yAxis",a,i),(e,t,a,r)=>xk(e,"zAxis",r,!1),SB,(e,t,a,r,n,s)=>s],(e,t,a,r,n,s,i,l)=>{var o,{chartData:c,dataStartIndex:d,dataEndIndex:u}=e;if(null!=i&&null!=(o=(null==i?void 0:i.data)!=null&&i.data.length>0?i.data:null==c?void 0:c.slice(d,u+1))&&null!=t&&null!=r&&null!=a&&null!=n&&(null==a?void 0:a.length)!==0&&(null==n?void 0:n.length)!==0)return function(e){var{displayedData:t,xAxis:a,yAxis:r,zAxis:n,scatterSettings:s,xAxisTicks:i,yAxisTicks:l,cells:o}=e,c=null==a.dataKey?s.dataKey:a.dataKey,d=null==r.dataKey?s.dataKey:r.dataKey,u=n&&n.dataKey,m=n?n.range:uZ.range,x=m&&m[0],h=a.scale.bandwidth?a.scale.bandwidth():0,p=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((e,t)=>{var m=s4(e,c),f=s4(e,d),b=null!=u&&s4(e,u)||"-",g=[{name:null==a.dataKey?s.name:a.name||String(a.dataKey),unit:a.unit||"",value:m,payload:e,dataKey:c,type:s.tooltipType},{name:null==r.dataKey?s.name:r.name||String(r.dataKey),unit:r.unit||"",value:f,payload:e,dataKey:d,type:s.tooltipType}];"-"!==b&&null!=n&&g.push({name:n.name||n.dataKey,unit:n.unit||"",value:b,payload:e,dataKey:u,type:s.tooltipType});var y=ie({axis:a,ticks:i,bandSize:h,entry:e,index:t,dataKey:c}),v=ie({axis:r,ticks:l,bandSize:p,entry:e,index:t,dataKey:d}),j="-"!==b&&null!=n?n.scale.map(b):x,k=null==j?0:Math.sqrt(Math.max(j,0)/Math.PI);return SZ(SZ({},e),{},{cx:y,cy:v,x:null==y?void 0:y-k,y:null==v?void 0:v-k,width:2*k,height:2*k,size:j,node:{x:m,y:f,z:b},tooltipPayload:g,tooltipPosition:{x:y,y:v},payload:e},o&&o[t]&&o[t].props)})}({displayedData:o,xAxis:t,yAxis:r,zAxis:s,scatterSettings:i,xAxisTicks:a,yAxisTicks:n,cells:l})}),SK=["id"],SH=["onMouseEnter","onClick","onMouseLeave"],SV=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function SG(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function SY(){return(SY=Object.assign.bind()).apply(null,arguments)}function SX(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function SZ(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?SX(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SX(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var SJ=z.memo(e=>{var{dataKey:t,points:a,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,tooltipType:o,id:c}=e,d={dataDefinedOnItem:null==a?void 0:a.map(e=>e.tooltipPayload),getPosition:e=>{var t;return null==a||null==(t=a[Number(e)])?void 0:t.tooltipPosition},settings:{stroke:r,strokeWidth:n,fill:s,nameKey:void 0,dataKey:t,name:il(i,t),hide:l,type:o,color:s,unit:"",graphicalItemId:c}};return z.createElement(y9,{tooltipEntrySettings:d})});function SQ(e){var t,a,{points:r,props:n}=e,{line:s,lineType:i,lineJointType:l}=n;if(!s)return null;var o=fu(n),c=fm(s);if("joint"===i)t=r.map(e=>{var t,a;return{x:null!=(t=e.cx)?t:null,y:null!=(a=e.cy)?a:null}});else if("fitting"===i){var{xmin:d,xmax:u,a:m,b:x}=(e=>{for(var t,a,r=e.length,n=0,s=0,i=0,l=0,o=1/0,c=-1/0,d=0,u=0,m=0;m<r;m++)d=(null==(t=e[m])?void 0:t.cx)||0,u=(null==(a=e[m])?void 0:a.cy)||0,n+=d,s+=u,i+=d*u,l+=d*d,o=Math.min(o,d),c=Math.max(c,d);var x=r*l!=n*n?(r*i-n*s)/(r*l-n*n):0;return{xmin:o,xmax:c,a:x,b:(s-x*n)/r}})(r);t=[{x:d,y:m*d+x},{x:u,y:m*u+x}]}var h=SZ(SZ(SZ({},o),{},{fill:"none",stroke:o&&o.fill},c),{},{points:t});return a=z.isValidElement(s)?z.cloneElement(s,h):"function"==typeof s?s(h):z.createElement(yX,SY({},h,{type:l})),z.createElement(f8,{className:"recharts-scatter-line",key:"recharts-scatter-line"},a)}function S0(e){var{showLabels:t,points:a,children:r}=e,n=iK(),s=(0,z.useMemo)(()=>null==a?void 0:a.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width};return SZ(SZ({},r),{},{value:void 0,payload:e.payload,viewBox:r,parentViewBox:n,fill:void 0})}),[n,a]);return z.createElement(b3,{value:t?s:void 0},r)}function S1(e){var{points:t,allOtherScatterProps:a}=e,{shape:r,activeShape:n,dataKey:s}=a,{id:i}=a,l=SG(a,SK),o=sB(hh),{onMouseEnter:c,onClick:d,onMouseLeave:u}=a,m=SG(a,SH),x=y3(c,s,i),h=y6(u),p=y8(d,s,i);if(!(Array.isArray(t)&&t.length>0))return null;var f=fu(l);return z.createElement(z.Fragment,null,z.createElement(SQ,{points:t,props:l}),t.map((e,t)=>{var a=null!=n&&!1!==n,s=a&&o===String(t),l=a&&s?n:r,c=SZ(SZ(SZ({},f),e),{},{index:t,[ip]:String(i)});return z.createElement(bA,{key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(t),zIndex:s?ud.activeDot:void 0},z.createElement(f8,SY({className:"recharts-scatter-symbol"},gc(m,e,t),{onMouseEnter:x(e,t),onMouseLeave:h(e,t),onClick:p(e,t)}),z.createElement(SW,SY({option:l,isActive:s},c))))}))}function S2(e){var{previousPointsRef:t,props:a}=e,{points:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:l}=a,o=t.current,c=gT(a,"recharts-scatter-"),[d,u]=(0,z.useState)(!1),m=(0,z.useCallback)(()=>{u(!1)},[]),x=(0,z.useCallback)(()=>{u(!0)},[]),h=!d;return z.createElement(S0,{showLabels:h,points:r},a.children,z.createElement(gA,{animationId:c,begin:s,duration:i,isActive:n,easing:l,onAnimationEnd:m,onAnimationStart:x,key:c},e=>{var n=1===e?r:null==r?void 0:r.map((t,a)=>{var r=o&&o[a];return r?SZ(SZ({},t),{},{cx:null==t.cx?void 0:nh(r.cx,t.cx,e),cy:null==t.cy?void 0:nh(r.cy,t.cy,e),size:nh(r.size,t.size,e)}):SZ(SZ({},t),{},{size:nh(0,t.size,e)})});return e>0&&(t.current=n),z.createElement(f8,null,z.createElement(S1,{points:n,allOtherScatterProps:a,showLabels:h}))}),z.createElement(b7,{label:a.label}))}var S5=(e,t,a)=>({x:e.cx,y:e.cy,value:"x"===a?Number(e.node.x):Number(e.node.y),errorVal:s4(e,t)});function S4(e){var{hide:t,points:a,className:r,needClip:n,xAxisId:s,yAxisId:i,id:l}=e,o=(0,z.useRef)(null);if(t)return null;var c=(0,eh.clsx)("recharts-scatter",r);return z.createElement(bA,{zIndex:e.zIndex},z.createElement(f8,{className:c,clipPath:n?"url(#clipPath-".concat(l,")"):void 0,id:l},n&&z.createElement("defs",null,z.createElement(vr,{clipPathId:l,xAxisId:s,yAxisId:i})),z.createElement(vt,{xAxisId:s,yAxisId:i,data:a,dataPointFormatter:S5,errorBarOffset:0},z.createElement(f8,{key:"recharts-scatter-symbols"},z.createElement(S2,{props:e,previousPointsRef:o})))))}var S3={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:ud.scatter};function S6(e){var t=fJ(e,S3),{animationBegin:a,animationDuration:r,animationEasing:n,hide:s,isAnimationActive:i,legendType:l,lineJointType:o,lineType:c,shape:d,xAxisId:u,yAxisId:m,zAxisId:x}=t,h=SG(t,SV),{needClip:p}=va(u,m),f=(0,z.useMemo)(()=>gs(e.children,f9),[e.children]),b=iw(),g=sB(t=>SU(t,u,m,x,e.id,f,b));return null==p||null==g?null:z.createElement(z.Fragment,null,z.createElement(SJ,{dataKey:e.dataKey,points:g,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),z.createElement(S4,SY({},h,{xAxisId:u,yAxisId:m,zAxisId:x,lineType:c,lineJointType:o,legendType:l,shape:d,hide:s,isAnimationActive:i,animationBegin:a,animationDuration:r,animationEasing:n,points:g,needClip:p})))}var S8=z.memo(function(e){var t=fJ(e,S3),a=iw();return z.createElement(vk,{id:t.id,type:"scatter"},e=>z.createElement(z.Fragment,null,z.createElement(vg,{legendPayload:(e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:il(a,t),payload:e}]})(t)}),z.createElement(vw,{type:"scatter",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:a}),z.createElement(S6,SY({},t,{id:e}))))},fa);S8.displayName="Scatter";var S9=e.i(77015);let S7=(0,X.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);function Pe(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),a=(0,ew.useCapexStore)(),r=H(),[n,s]=(0,z.useState)(1e4),[i,l]=(0,z.useState)(42),[o,c]=(0,z.useState)(SD),[d,u]=(0,z.useState)(null),[m,x]=(0,z.useState)(!1),[h,p]=(0,z.useState)("distributions"),f=(0,z.useMemo)(()=>{if(!e)return null;let n=(0,w_.calculateCapex)(a.inputs),s=[{role:"shift-lead",count:r.headcount_ShiftLead,is24x7:!0},{role:"engineer",count:r.headcount_Engineer,is24x7:!0},{role:"technician",count:r.headcount_Technician,is24x7:!1},{role:"admin",count:r.headcount_Admin,is24x7:!1},{role:"janitor",count:r.headcount_Janitor,is24x7:!1}].reduce((a,r)=>a+12*B(r.role,r.count,t.shiftModel,e,r.is24x7).monthlyCost,0),i=n.pue,l=s+t.itLoad*i*8760/1e3*(1e3*e.economy.electricityRate)+(e.compliance.annualComplianceCost||5e4);return{totalCapex:n.total,annualOpex:l,revenuePerKwMonth:120,itLoadKw:t.itLoad,discountRate:.1,projectLifeYears:10,escalationRate:.03,opexEscalation:e.economy.inflationRate,occupancyRamp:t.occupancyRamp.length>0?t.occupancyRamp:wT(10),taxRate:e.economy.taxRate,depreciationYears:7}},[e,t,a.inputs,r]),b=(0,z.useCallback)(()=>{f&&(x(!0),requestAnimationFrame(()=>{u(function(e,t,a=1e4,r=42){let n=performance.now(),s=new SR(r),i=[],l=[],o=[],c={},d=t.filter(e=>e.enabled);for(let e of d)c[e.id]=[];let u=[],m=0,x=Math.max(1,Math.floor(a/100));for(let t=0;t<a;t++){let r={};for(let e of d){let t;t="normal"===e.distribution?s.normal(e.mean,e.spread):"triangular"===e.distribution?s.triangular(e.mean-e.spread,e.mean,e.mean+e.spread):s.uniform(e.mean-e.spread,e.mean+e.spread),r[e.id]=t,c[e.id].push(t)}let n={...e};if(r.powerCost&&(n.annualOpex=e.annualOpex*r.powerCost),r.capex&&(n.totalCapex=e.totalCapex*r.capex),r.revenue&&(n.revenuePerKwMonth=e.revenuePerKwMonth*r.revenue),r.occupancy&&(n.occupancyRamp=e.occupancyRamp.map(e=>Math.min(1,Math.max(0,e*r.occupancy)))),void 0!==r.opexEscalation&&(n.opexEscalation=Math.max(0,e.opexEscalation+r.opexEscalation)),void 0!==r.taxRate&&(n.taxRate=Math.max(0,Math.min(.5,e.taxRate+r.taxRate))),void 0!==r.discountRate&&(n.discountRate=Math.max(.01,e.discountRate+r.discountRate)),r.pue){let e=r.pue;n.annualOpex=n.annualOpex*(.4+.6*e)}let h=wI(n);i.push(h.npv),l.push(h.irr),o.push(h.paybackPeriodYears),m+=h.npv,((t+1)%x==0||t===a-1)&&u.push({iteration:t+1,meanNpv:m/(t+1)})}let h=SL(i),p=SL(l),f=SL(o),b=S_(i),g=S_(l),y=S_(o),v=h.p5,j=SL(i).values[Math.floor(.01*a)],k=i.filter(e=>e<0).length/a,w=l.filter(e=>e<10).length/a,N=o.filter(e=>e>7).length/a;return{iterations:a,seed:r,npvStats:h,irrStats:p,paybackStats:f,npvHistogram:b,irrHistogram:g,paybackHistogram:y,varNpv5:v,varNpv1:j,probNpvNegative:k,probIrrBelow10:w,probPaybackOver7:N,convergenceHistory:u,sensitivity:d.map(e=>({variable:e.name,correlation:function(e,t){let a=e.length,r=e.reduce((e,t)=>e+t,0)/a,n=t.reduce((e,t)=>e+t,0)/a,s=0,i=0,l=0;for(let o=0;o<a;o++){let a=e[o]-r,c=t[o]-n;s+=a*c,i+=a*a,l+=c*c}let o=Math.sqrt(i*l);return o>0?s/o:0}(c[e.id],i)})).sort((e,t)=>Math.abs(t.correlation)-Math.abs(e.correlation)),durationMs:performance.now()-n}}(f,o,n,i)),x(!1)}))},[f,o,n,i]);return e?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsx)("div",{className:"flex items-center justify-between",children:(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:(0,F.jsx)(S9.Dices,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),"Monte Carlo Simulation",(0,F.jsx)(ei,{content:"Runs thousands of randomized scenarios to quantify financial uncertainty. Instead of a single forecast, produces a probability distribution of NPV, IRR, and payback outcomes."})]}),(0,F.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Probabilistic risk analysis with ",n.toLocaleString()," iterations"]})]})}),(0,F.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800/30 rounded-xl p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-bold text-orange-700 dark:text-orange-400 mb-2 flex items-center gap-2",children:[(0,F.jsx)(eM,{className:"w-4 h-4"}),"What is Monte Carlo Simulation?"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed mb-3",children:["Monte Carlo simulation is a quantitative risk analysis technique that runs thousands of scenarios by randomly varying key financial inputs (revenue, OPEX, occupancy, electricity cost, etc.) within their realistic ranges. Instead of a single deterministic forecast, it produces a",(0,F.jsx)("span",{className:"font-semibold text-orange-700 dark:text-orange-300",children:" probability distribution "}),"of outcomes  showing you not just the expected return, but the full range of possibilities."]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[(0,F.jsxs)("div",{className:"flex items-start gap-2",children:[(0,F.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500 mt-1.5 shrink-0"}),(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:[(0,F.jsx)("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"NPV Distribution"})," ",(0,F.jsx)(ei,{content:"Net Present Value histogram across all simulation runs. Shows the full range of discounted cash flow outcomes and the probability of achieving positive returns."}),"  Probability of achieving positive net present value across all scenarios"]})]}),(0,F.jsxs)("div",{className:"flex items-start gap-2",children:[(0,F.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-500 mt-1.5 shrink-0"}),(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:[(0,F.jsx)("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"IRR Risk"})," ",(0,F.jsx)(ei,{content:"Internal Rate of Return distribution. Shows the probability that returns fall below the minimum acceptable rate (hurdle rate), typically 8-12% for data center investments."}),"  Likelihood that internal rate of return falls below your hurdle rate (e.g., 10%)"]})]}),(0,F.jsxs)("div",{className:"flex items-start gap-2",children:[(0,F.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 mt-1.5 shrink-0"}),(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:[(0,F.jsx)("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"VaR (Value at Risk)"})," ",(0,F.jsx)(ei,{content:"Value at Risk quantifies downside exposure. The 5th percentile VaR means there is only a 5% probability of the outcome being worse than this threshold."}),"  Worst-case financial exposure at 5th percentile confidence level"]})]})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-[300px_1fr] gap-6",children:[(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase block mb-2 flex items-center",children:["Iterations ",(0,F.jsx)(ei,{content:"Number of random iterations. Higher counts (10,000+) produce more stable confidence intervals but take longer."})]}),(0,F.jsxs)("select",{value:n,onChange:e=>s(Number(e.target.value)),className:"w-full px-3 py-2 text-sm bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[(0,F.jsx)("option",{value:1e3,children:"1,000 (Fast)"}),(0,F.jsx)("option",{value:5e3,children:"5,000"}),(0,F.jsx)("option",{value:1e4,children:"10,000 (Default)"}),(0,F.jsx)("option",{value:25e3,children:"25,000"}),(0,F.jsx)("option",{value:5e4,children:"50,000 (Detailed)"})]}),(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase block mt-3 mb-2 flex items-center",children:["Seed ",(0,F.jsx)(ei,{content:"Random number seed for reproducibility. Same seed + same inputs = identical results, enabling comparison across scenarios."})]}),(0,F.jsx)("input",{type:"number",value:i,onChange:e=>l(Number(e.target.value)),className:"w-full px-3 py-2 text-sm bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"}),(0,F.jsx)("button",{onClick:b,disabled:m,className:"w-full mt-4 px-4 py-2.5 bg-orange-600 hover:bg-orange-500 disabled:bg-slate-400 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-sm",children:m?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Running..."]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S7,{className:"w-4 h-4"}),"Run Simulation"]})}),d&&(0,F.jsxs)("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-2 text-center",children:["Completed in ",d.durationMs.toFixed(0),"ms"]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase block mb-3 flex items-center",children:["Stochastic Variables ",(0,F.jsx)(ei,{content:"Input parameters that are randomly varied each iteration. Enable/disable variables to see how each source of uncertainty affects outcomes. More variables = more realistic but wider result ranges."})]}),(0,F.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,F.jsxs)("button",{onClick:()=>{var t;return t=e.id,void c(e=>e.map(e=>e.id===t?{...e,enabled:!e.enabled}:e))},className:(0,eh.default)("w-full text-left px-3 py-2 rounded-lg text-xs transition-colors border",e.enabled?"bg-orange-50 dark:bg-orange-900/20 border-orange-300 dark:border-orange-700 text-orange-800 dark:text-orange-300":"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400"),children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("span",{className:"font-medium",children:e.name}),(0,F.jsxs)("span",{className:"text-[10px]",children:[e.distribution," ",e.unit]})]}),(0,F.jsx)("div",{className:"text-[10px] mt-0.5 opacity-70",children:e.description})]},e.id))})]})]}),(0,F.jsx)("div",{className:"space-y-4",children:d?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800/50 p-1 rounded-xl",children:[{id:"distributions",label:"Distributions",tip:"Histogram showing the frequency distribution of simulated outcomes. Shape reveals skew and tail risk."},{id:"statistics",label:"Statistics",tip:"Summary statistics across all simulation runs including mean, median, std deviation, and percentile values."},{id:"risk",label:"Risk Metrics",tip:"Probability-based risk metrics derived from the simulation results."},{id:"convergence",label:"Convergence",tip:"Shows how simulation statistics stabilize as iteration count increases. Flat curves indicate sufficient runs."},{id:"scatter",label:"Scatter",tip:"Two-dimensional plot of NPV vs IRR for each simulation run. Reveals correlation patterns and outlier clusters."}].map(e=>(0,F.jsx)("button",{onClick:()=>p(e.id),className:(0,eh.default)("flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-all",h===e.id?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:(0,F.jsxs)("span",{className:"flex items-center justify-center",children:[e.label," ",(0,F.jsx)(ei,{content:e.tip})]})},e.id))}),"distributions"===h&&(0,F.jsx)(Pt,{result:d}),"statistics"===h&&(0,F.jsx)(Pr,{result:d}),"risk"===h&&(0,F.jsx)(Pn,{result:d}),"convergence"===h&&(0,F.jsx)(Pi,{result:d}),"scatter"===h&&(0,F.jsx)(Pl,{result:d})]}):(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-16 text-center text-slate-500 dark:text-slate-400",children:[(0,F.jsx)(S9.Dices,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),(0,F.jsx)("p",{className:"text-lg font-medium",children:"Configure and run the simulation"}),(0,F.jsx)("p",{className:"text-sm mt-1",children:'Adjust variables and click "Run Simulation" to generate results'})]})})]})]}):(0,F.jsxs)("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[(0,F.jsx)(S9.Dices,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,F.jsx)("p",{children:"Select a country to run Monte Carlo simulation."})]})}function Pt({result:e}){return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsx)(Pa,{title:"NPV Distribution",titleTip:"Mean Net Present Value across all simulation runs. Represents the probability-weighted average outcome. Negative NPV indicates the project destroys value.",data:e.npvHistogram,stats:e.npvStats,color:"#06b6d4",formatValue:eo,varLine:e.varNpv5,zeroLine:!0}),(0,F.jsx)(Pa,{title:"IRR Distribution (%)",titleTip:"Mean Internal Rate of Return across simulations. Compare against hurdle rate to assess project viability. IRR below discount rate implies negative NPV.",data:e.irrHistogram,stats:e.irrStats,color:"#8b5cf6",formatValue:e=>`${e.toFixed(1)}%`}),(0,F.jsx)(Pa,{title:"Payback Period Distribution (years)",titleTip:"Time required to recoup total CAPEX from net cash flows. Shorter payback = lower risk. Payback beyond project life means unrecovered investment.",data:e.paybackHistogram,stats:e.paybackStats,color:"#f59e0b",formatValue:e=>`${e.toFixed(1)} yr`})]})}function Pa({title:e,titleTip:t,data:a,stats:r,color:n,formatValue:s,varLine:i,zeroLine:l}){let o=a.map(e=>({name:s((e.binStart+e.binEnd)/2),x:(e.binStart+e.binEnd)/2,count:e.count,freq:e.frequency}));return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,F.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center",children:[e," ",t&&(0,F.jsx)(ei,{content:t})]}),(0,F.jsxs)("div",{className:"flex gap-3 text-[10px] text-slate-500 dark:text-slate-400",children:[(0,F.jsxs)("span",{className:"flex items-center",children:["Mean ",(0,F.jsx)(ei,{content:"Arithmetic average across all simulation runs. Represents the expected (probability-weighted) outcome."}),": ",(0,F.jsx)("span",{className:"font-mono text-slate-700 dark:text-slate-300 ml-0.5",children:s(r.mean)})]}),(0,F.jsxs)("span",{className:"flex items-center",children:["Median ",(0,F.jsx)(ei,{content:"Middle value (P50) when all results are sorted. Less sensitive to extreme outliers than the mean."}),": ",(0,F.jsx)("span",{className:"font-mono text-slate-700 dark:text-slate-300 ml-0.5",children:s(r.median)})]}),(0,F.jsxs)("span",{className:"flex items-center",children:["P5-P95 ",(0,F.jsx)(ei,{content:"90% confidence interval. 90% of all simulated outcomes fall within this range. Wider range = higher uncertainty."}),": ",(0,F.jsxs)("span",{className:"font-mono text-slate-700 dark:text-slate-300 ml-0.5",children:[s(r.p5),"  ",s(r.p95)]})]})]})]}),(0,F.jsx)(iB,{width:"100%",height:200,children:(0,F.jsxs)(Cc,{data:o,margin:{top:5,right:10,left:10,bottom:5},children:[(0,F.jsx)(kt,{dataKey:"name",tick:{fontSize:9,fill:"#94a3b8"},interval:"preserveStartEnd"}),(0,F.jsx)(km,{tick:{fontSize:9,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11},labelStyle:{color:"#e2e8f0"},formatter:e=>[e,"Count"]}),(0,F.jsx)(v1,{dataKey:"count",fill:n,radius:[2,2,0,0],opacity:.8}),l&&(0,F.jsx)(Cb,{x:s(0),stroke:"#ef4444",strokeDasharray:"4 4",strokeWidth:1.5})]})})]})}function Pr({result:e}){let t=[{label:"Mean",tip:"Arithmetic average across all simulation runs. Represents the expected (probability-weighted) outcome.",npv:eo(e.npvStats.mean),irr:`${e.irrStats.mean.toFixed(2)}%`,payback:`${e.paybackStats.mean.toFixed(2)} yr`},{label:"Median",tip:"Middle value (P50) when all results are sorted. Less sensitive to extreme outliers than the mean.",npv:eo(e.npvStats.median),irr:`${e.irrStats.median.toFixed(2)}%`,payback:`${e.paybackStats.median.toFixed(2)} yr`},{label:"Std Dev",tip:"Statistical measure of result spread. Larger std dev means higher uncertainty in outcomes.",npv:eo(e.npvStats.stdDev),irr:`${e.irrStats.stdDev.toFixed(2)}%`,payback:`${e.paybackStats.stdDev.toFixed(2)} yr`},{label:"Min",tip:"Worst outcome observed across all simulation runs. Represents the absolute downside scenario.",npv:eo(e.npvStats.min),irr:`${e.irrStats.min.toFixed(2)}%`,payback:`${e.paybackStats.min.toFixed(2)} yr`},{label:"P5",tip:"Pessimistic outcome: only 5% of simulations produced a worse result. Used for downside risk assessment.",npv:eo(e.npvStats.p5),irr:`${e.irrStats.p5.toFixed(2)}%`,payback:`${e.paybackStats.p5.toFixed(2)} yr`},{label:"P10",tip:"Percentile outcome: 10% chance of being worse. P10 is a common pessimistic planning threshold.",npv:eo(e.npvStats.p10),irr:`${e.irrStats.p10.toFixed(2)}%`,payback:`${e.paybackStats.p10.toFixed(2)} yr`},{label:"P25",tip:"Lower quartile: 25% of simulations fall below this value. Represents a conservative but not extreme scenario.",npv:eo(e.npvStats.p25),irr:`${e.irrStats.p25.toFixed(2)}%`,payback:`${e.paybackStats.p25.toFixed(2)} yr`},{label:"P75",tip:"Upper quartile: 75% of simulations fall below this value. Represents a favorable scenario.",npv:eo(e.npvStats.p75),irr:`${e.irrStats.p75.toFixed(2)}%`,payback:`${e.paybackStats.p75.toFixed(2)} yr`},{label:"P90",tip:"Optimistic outcome: 90% chance of being worse. P90 is a common upside planning threshold.",npv:eo(e.npvStats.p90),irr:`${e.irrStats.p90.toFixed(2)}%`,payback:`${e.paybackStats.p90.toFixed(2)} yr`},{label:"P95",tip:"Very optimistic: only 5% of simulations exceeded this value. Used for upside opportunity sizing.",npv:eo(e.npvStats.p95),irr:`${e.irrStats.p95.toFixed(2)}%`,payback:`${e.paybackStats.p95.toFixed(2)} yr`},{label:"Max",tip:"Best outcome observed across all simulation runs. Represents the absolute upside scenario.",npv:eo(e.npvStats.max),irr:`${e.irrStats.max.toFixed(2)}%`,payback:`${e.paybackStats.max.toFixed(2)} yr`}];return(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-900 dark:text-white",children:(0,F.jsxs)("span",{className:"flex items-center",children:["Percentile ",(0,F.jsx)(ei,{content:"Statistical breakpoints showing how outcomes are distributed. P10/P50/P90 are the most commonly used for investment decisions."})]})}),(0,F.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-cyan-600 dark:text-cyan-400",children:(0,F.jsxs)("span",{className:"flex items-center justify-center",children:["NPV ",(0,F.jsx)(ei,{content:"Net Present Value: total discounted cash flows minus initial investment. Positive NPV means the project creates value."})]})}),(0,F.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-purple-600 dark:text-purple-400",children:(0,F.jsxs)("span",{className:"flex items-center justify-center",children:["IRR ",(0,F.jsx)(ei,{content:"Internal Rate of Return: the discount rate at which NPV equals zero. Compare against WACC/hurdle rate to evaluate viability."})]})}),(0,F.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-amber-600 dark:text-amber-400",children:(0,F.jsxs)("span",{className:"flex items-center justify-center",children:["Payback ",(0,F.jsx)(ei,{content:"Simple payback period: years required to recover total CAPEX from cumulative net cash flows."})]})})]})}),(0,F.jsx)("tbody",{children:t.map((e,t)=>(0,F.jsxs)("tr",{className:(0,eh.default)("border-b border-slate-100 dark:border-slate-800",t%2==0?"":"bg-slate-50/50 dark:bg-slate-800/20"),children:[(0,F.jsx)("td",{className:"px-4 py-2 font-medium text-slate-700 dark:text-slate-300",children:(0,F.jsxs)("span",{className:"flex items-center",children:[e.label," ",(0,F.jsx)(ei,{content:e.tip})]})}),(0,F.jsx)("td",{className:"text-center px-4 py-2 font-mono text-slate-900 dark:text-white",children:e.npv}),(0,F.jsx)("td",{className:"text-center px-4 py-2 font-mono text-slate-900 dark:text-white",children:e.irr}),(0,F.jsx)("td",{className:"text-center px-4 py-2 font-mono text-slate-900 dark:text-white",children:e.payback})]},e.label))})]})})}function Pn({result:e}){return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,F.jsx)(Ps,{icon:(0,F.jsx)(Cn,{className:"w-5 h-5 text-red-500"}),label:"VaR (5%)",tip:"Maximum expected loss at a given confidence level. VaR at 95% means there's only a 5% chance of losing more than this amount.",value:eo(e.varNpv5),description:"5th percentile NPV  worst case in 95% of scenarios",severity:e.varNpv5<0?"high":"low"}),(0,F.jsx)(Ps,{icon:(0,F.jsx)(eM,{className:"w-5 h-5 text-amber-500"}),label:"P(NPV < 0)",tip:"Percentage of simulation runs resulting in negative NPV. Key decision metric for risk-averse investors. Above 20% is generally considered high risk.",value:`${(100*e.probNpvNegative).toFixed(1)}%`,description:"Probability of a negative net present value",severity:e.probNpvNegative>.2?"high":e.probNpvNegative>.05?"medium":"low"}),(0,F.jsx)(Ps,{icon:(0,F.jsx)(en.Activity,{className:"w-5 h-5 text-purple-500"}),label:"P(IRR < 10%)",tip:"Probability that the Internal Rate of Return falls below the 10% hurdle rate. Higher probability means the project is less likely to meet minimum return requirements.",value:`${(100*e.probIrrBelow10).toFixed(1)}%`,description:"Probability IRR falls below hurdle rate",severity:e.probIrrBelow10>.3?"high":e.probIrrBelow10>.1?"medium":"low"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-amber-500"}),"Sensitivity Analysis (Correlation with NPV)",(0,F.jsx)(ei,{content:"Tornado chart showing Pearson correlation between each stochastic variable and NPV. Bars extending right (green) increase NPV; bars extending left (red) decrease it. Longer bars = higher sensitivity."})]}),(0,F.jsx)(iB,{width:"100%",height:250,children:(0,F.jsxs)(Cc,{data:e.sensitivity.map(e=>({name:e.variable,correlation:Math.round(1e3*e.correlation)/1e3,fill:e.correlation>=0?"#10b981":"#ef4444"})),layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[(0,F.jsx)(kt,{type:"number",domain:[-1,1],tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(km,{type:"category",dataKey:"name",tick:{fontSize:10,fill:"#94a3b8"},width:90}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11},formatter:e=>[e.toFixed(3),"Correlation"]}),(0,F.jsx)(Cb,{x:0,stroke:"#475569"}),(0,F.jsx)(v1,{dataKey:"correlation",radius:[0,4,4,0],children:e.sensitivity.map((e,t)=>(0,F.jsx)(f9,{fill:e.correlation>=0?"#10b981":"#ef4444"},t))})]})})]})]})}function Ps({icon:e,label:t,tip:a,value:r,description:n,severity:s}){return(0,F.jsxs)("div",{className:(0,eh.default)("bg-white dark:bg-slate-800/50 rounded-xl border-2 p-4","high"===s?"border-red-300 dark:border-red-800":"medium"===s?"border-amber-300 dark:border-amber-800":"border-emerald-300 dark:border-emerald-800"),children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e,(0,F.jsx)("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:t}),a&&(0,F.jsx)(ei,{content:a})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r}),(0,F.jsx)("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1",children:n})]})}function Pi({result:e}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center",children:["Mean NPV Convergence Over Iterations",(0,F.jsx)(ei,{content:"Shows how simulation statistics stabilize as iteration count increases. Flat curves indicate sufficient runs. If the line is still oscillating at the end, consider increasing iteration count for more reliable results."})]}),(0,F.jsx)(iB,{width:"100%",height:350,children:(0,F.jsxs)(CC,{data:e.convergenceHistory,margin:{top:10,right:20,left:20,bottom:10},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"iteration",tick:{fontSize:10,fill:"#94a3b8"},tickFormatter:e=>e>=1e3?`${(e/1e3).toFixed(0)}K`:String(e)}),(0,F.jsx)(km,{tick:{fontSize:10,fill:"#94a3b8"},tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11},formatter:e=>[eo(e),"Mean NPV"],labelFormatter:e=>`Iteration ${e.toLocaleString()}`}),(0,F.jsx)(jT,{type:"monotone",dataKey:"meanNpv",stroke:"#06b6d4",strokeWidth:2,dot:!1}),(0,F.jsx)(Cb,{y:e.npvStats.mean,stroke:"#10b981",strokeDasharray:"4 4",label:{value:`Final: ${eo(e.npvStats.mean)}`,fill:"#10b981",fontSize:10}})]})})]})}function Pl({result:e}){let t=Math.min(2e3,e.iterations),a=Math.max(1,Math.floor(e.iterations/t)),r=(0,z.useMemo)(()=>{let t=[];for(let r=0;r<e.npvStats.values.length;r+=a)t.push({npv:e.npvStats.values[r]/1e6,irr:e.irrStats.values[r],payback:e.paybackStats.values[r]});return t},[e,a]);return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1 flex items-center",children:["NPV vs IRR Scatter ",(0,F.jsx)(ei,{content:"Two-dimensional plot of NPV vs IRR for each simulation run. Points in the upper-right quadrant (positive NPV, high IRR) represent favorable outcomes. Red dashed line = NPV breakeven; amber dashed line = 10% IRR hurdle rate."})]}),(0,F.jsx)("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-3",children:"Each point is one simulation run. Color indicates payback period."}),(0,F.jsx)(iB,{width:"100%",height:400,children:(0,F.jsxs)(S$,{margin:{top:10,right:20,left:10,bottom:10},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{type:"number",dataKey:"npv",name:"NPV ($M)",tick:{fontSize:10,fill:"#94a3b8"},tickFormatter:e=>`$${e.toFixed(0)}M`}),(0,F.jsx)(km,{type:"number",dataKey:"irr",name:"IRR (%)",tick:{fontSize:10,fill:"#94a3b8"},tickFormatter:e=>`${e.toFixed(0)}%`}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11},formatter:(e,t)=>"NPV ($M)"===t?[`$${Number(e).toFixed(2)}M`,t]:"IRR (%)"===t?[`${Number(e).toFixed(2)}%`,t]:[`${Number(e).toFixed(1)} yr`,t]}),(0,F.jsx)(Cb,{x:0,stroke:"#ef4444",strokeDasharray:"4 4"}),(0,F.jsx)(Cb,{y:10,stroke:"#f59e0b",strokeDasharray:"4 4"}),(0,F.jsx)(S8,{data:r,fill:"#06b6d4",opacity:.4,children:r.map((e,t)=>{let a=e.payback<=4?"#10b981":e.payback<=7?"#f59e0b":"#ef4444";return(0,F.jsx)(f9,{fill:a},t)})})]})}),(0,F.jsxs)("div",{className:"flex justify-center gap-4 mt-2 text-[10px] text-slate-500",children:[(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Payback  4yr"]}),(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-500"})," 4-7yr"]}),(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"})," > 7yr"]})]})]})}var Po=e.i(32995);let Pc="dcmoc_portfolio",Pd=e=>{try{localStorage.setItem(Pc,JSON.stringify(e))}catch{}},Pu=1,Pm=(0,Po.create)((e,t)=>({sites:(()=>{try{let e=localStorage.getItem(Pc);return e?JSON.parse(e):[]}catch{return[]}})(),activeSiteId:null,addSite:()=>{let a,r=t().sites;if(r.length>=5)return;let n=(a=`Site ${r.length+1}`,{id:`site_${Date.now()}_${Pu++}`,label:a||`Site ${Pu}`,countryId:"ID",tierLevel:3,itLoad:2500,coolingType:"air",shiftModel:"12h",staffingModel:"in-house",maintenanceStrategy:"planned",powerRedundancy:"2N",capexInputs:{}}),s=[...r,n];e({sites:s,activeSiteId:n.id}),Pd(s)},removeSite:a=>{let r=t().sites.filter(e=>e.id!==a),n=t().activeSiteId===a?r[0]?.id||null:t().activeSiteId;e({sites:r,activeSiteId:n}),Pd(r)},updateSite:(a,r)=>{let n=t().sites.map(e=>e.id===a?{...e,...r}:e);e({sites:n}),Pd(n)},duplicateSite:a=>{let r=t().sites;if(r.length>=5)return;let n=r.find(e=>e.id===a);if(!n)return;let s={...n,id:`site_${Date.now()}_${Pu++}`,label:`${n.label} (Copy)`},i=[...r,s];e({sites:i,activeSiteId:s.id}),Pd(i)},importFromCurrentConfig:()=>{let a=$.useSimulationStore.getState(),r=ew.useCapexStore.getState(),n=t().sites;if(n.length>=5)return;let s={id:`site_${Date.now()}_${Pu++}`,label:`${a.selectedCountry?.name||"Unknown"} DC`,countryId:a.selectedCountry?.id||"ID",tierLevel:a.inputs.tierLevel,itLoad:a.inputs.itLoad,coolingType:a.inputs.coolingType,shiftModel:a.inputs.shiftModel,staffingModel:a.inputs.staffingModel,maintenanceStrategy:a.inputs.maintenanceStrategy,powerRedundancy:a.inputs.powerRedundancy,capexInputs:{...r.inputs}},i=[...n,s];e({sites:i,activeSiteId:s.id}),Pd(i)},setActiveSite:t=>e({activeSiteId:t})}));function Px(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Ph(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Px(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Px(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pp=["axis"],Pf=Ph(Ph({},CR),{},{layout:"centric",startAngle:90,endAngle:-270}),Pb=(0,z.forwardRef)((e,t)=>{var a=fJ(e,Pf);return z.createElement(CD,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Pp,tooltipPayloadSearcher:ny,categoricalChartProps:a,ref:t})}),Pg=["points","className","baseLinePoints","connectNulls"];function Py(){return(Py=Object.assign.bind()).apply(null,arguments)}var Pv=e=>null!=e&&e.x===+e.x&&e.y===+e.y,Pj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];e.forEach(e=>{var a=t[t.length-1];Pv(e)?a&&a.push(e):a&&a.length>0&&t.push([])});var a=e[0],r=t[t.length-1];Pv(a)&&r&&r.push(a);var n=t[t.length-1];return n&&n.length<=0&&(t=t.slice(0,-1)),t},Pk=(e,t)=>{var a=Pj(e);t&&(a=[a.reduce((e,t)=>[...e,...t],[])]);var r=a.map(e=>e.reduce((e,t,a)=>{var r,n;return nn(_||(r=["","","",",",""],n||(n=r.slice(0)),_=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))),e,0===a?"M":"L",t.x,t.y)},"")).join("");return 1===a.length?"".concat(r,"Z"):r},Pw=e=>{var{points:t,className:a,baseLinePoints:r,connectNulls:n}=e,s=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,Pg);if(!t||!t.length)return null;var i=(0,eh.clsx)("recharts-polygon",a);if(r&&r.length){var l,o=s.stroke&&"none"!==s.stroke,c=(l=Pk(t,n),"".concat("Z"===l.slice(-1)?l.slice(0,-1):l,"L").concat(Pk(Array.from(r).reverse(),n).slice(1)));return z.createElement("g",{className:i},z.createElement("path",Py({},fx(s),{fill:"Z"===c.slice(-1)?s.fill:"none",stroke:"none",d:c})),o?z.createElement("path",Py({},fx(s),{fill:"none",d:Pk(t,n)})):null,o?z.createElement("path",Py({},fx(s),{fill:"none",d:Pk(r,n)})):null)}var d=Pk(t,n);return z.createElement("path",Py({},fx(s),{fill:"Z"===d.slice(-1)?s.fill:"none",className:i,d:d}))},PN=(e,t,a)=>{switch(t){case"angleAxis":return uy(e,a);case"radiusAxis":return uv(e,a);default:throw Error("Unexpected axis type: ".concat(t))}},PC=(e,t,a)=>{switch(t){case"angleAxis":return uS(e,a);case"radiusAxis":return uM(e,a);default:throw Error("Unexpected axis type: ".concat(t))}},PS=rc([PN,mH,CQ,PC],mV),PP=rc([iG,CH,u0,uE],xx),PM=rc([iG,PN,mH,PS,CZ,PC,xm,PP,uE],xf),PO=rc([PM],e=>{if(e){var t=new Map;return e.forEach(e=>{var a=(e.coordinate+360)%360;t.has(a)||t.set(a,e)}),Array.from(t.values())}});function PE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function PA(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?PE(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}rc([iG,PN,PS,PC,xm,PP,uE],xg);var PT=(e,t)=>PS(e,"radiusAxis",t),PI=rc([PT],e=>{if(null!=e)return{scale:e}}),PR=rc([uv,PT],(e,t)=>{if(null!=e&&null!=t)return PA(PA({},e),{},{scale:t})}),PD=(e,t,a)=>uy(e,a),PL=(e,t,a)=>PS(e,"angleAxis",a),P_=rc([PD,PL],(e,t)=>{if(null!=e&&null!=t)return PA(PA({},e),{},{scale:t})}),PF=rc([PD,PL,uO],(e,t,a)=>{if(null!=a&&null!=t)return{scale:t,type:e.type,dataKey:e.dataKey,cx:a.cx,cy:a.cy}}),P$=rc([iG,PR,(e,t,a,r)=>PM(e,"radiusAxis",t,r),P_,(e,t,a,r)=>PM(e,"angleAxis",a,r)],(e,t,a,r,n)=>s3(e,"radiusAxis")?is(t,a,!1):is(r,n,!1)),Pz=rc([Cq,(e,t,a,r,n)=>n],(e,t)=>{if(null!=e){var a=e.find(e=>"radar"===e.type&&t===e.id);return null==a?void 0:a.dataKey}}),Pq=rc([PI,PF,dH,Pz,P$],(e,t,a,r,n)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:l}=a;if(null!=e&&null!=t&&null!=s&&null!=n&&null!=r)return function(e){var{radiusAxis:t,angleAxis:a,displayedData:r,dataKey:n,bandSize:s}=e,{cx:i,cy:l}=a,o=!1,c=[],d="number"!==a.type&&null!=s?s:0;r.forEach((e,r)=>{var s,u,m=s4(e,a.dataKey,r),x=s4(e,n),h=(null!=(s=a.scale.map(m))?s:0)+d,p=Array.isArray(x)?(0,f7.default)(x):x,f=null==p?0:null!=(u=t.scale.map(p))?u:0;Array.isArray(x)&&x.length>=2&&(o=!0),c.push(PK(PK({},uo(i,l,f,h)),{},{name:m,value:x,cx:i,cy:l,radius:f,angle:h,payload:e}))});var u=[];return o&&c.forEach(e=>{if(Array.isArray(e.value)){var a,r=e.value[0],n=null==r?0:null!=(a=t.scale.map(r))?a:0;u.push(PK(PK({},e),{},{radius:n},uo(i,l,n,e.angle)))}else u.push(e)}),{points:c,isRange:o,baseLinePoints:u}}({radiusAxis:e,angleAxis:t,displayedData:s.slice(i,l+1),dataKey:r,bandSize:n})}),PW=["id"];function PB(){return(PB=Object.assign.bind()).apply(null,arguments)}function PU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function PK(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?PU(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PU(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function PH(e,t){return e&&"none"!==e?e:t}var PV=z.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:n,name:s,hide:i,tooltipType:l,id:o}=e,c={dataDefinedOnItem:void 0,getPosition:ng,settings:{stroke:a,strokeWidth:r,fill:n,nameKey:void 0,dataKey:t,name:il(s,t),hide:i,type:l,color:PH(a,n),unit:"",graphicalItemId:o}};return z.createElement(y9,{tooltipEntrySettings:c})});function PG(e){var{points:t,props:a}=e,{dot:r,dataKey:n}=a,{id:s}=a,i=fu(function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(a,PW));return z.createElement(je,{points:t,dot:r,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:n,baseProps:i})}function PY(e){var{showLabels:t,points:a,children:r}=e,n=a.map(e=>{var t,a={x:e.x,y:e.y,width:0,lowerWidth:0,upperWidth:0,height:0};return PK(PK({},a),{},{value:null!=(t=e.value)?t:"",payload:e.payload,parentViewBox:void 0,viewBox:a,fill:void 0})});return z.createElement(b3,{value:t?n:void 0},r)}function PX(e){var t,{points:a,baseLinePoints:r,props:n}=e;if(null==a)return null;var{shape:s,isRange:i,connectNulls:l}=n;return t=z.isValidElement(s)?z.cloneElement(s,PK(PK({},n),{},{points:a})):"function"==typeof s?s(PK(PK({},n),{},{points:a})):z.createElement(Pw,PB({},fx(n),{onMouseEnter:e=>{var{onMouseEnter:t}=n;t&&t(n,e)},onMouseLeave:e=>{var{onMouseLeave:t}=n;t&&t(n,e)},points:a,baseLinePoints:i?r:void 0,connectNulls:l})),z.createElement(f8,{className:"recharts-radar-polygon"},t,z.createElement(PG,{props:n,points:a}))}var PZ=(e,t,a)=>(r,n)=>{var s=e&&e[Math.floor(n*t)];return s?PK(PK({},r),{},{x:nh(s.x,r.x,a),y:nh(s.y,r.y,a)}):PK(PK({},r),{},{x:nh(r.cx,r.x,a),y:nh(r.cy,r.y,a)})};function PJ(e){var{props:t,previousPointsRef:a,previousBaseLinePointsRef:r}=e,{points:n,baseLinePoints:s,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,m=a.current,x=r.current,h=m?m.length/n.length:1,p=x?x.length/s.length:1,f=gT(t,"recharts-radar-"),[b,g]=(0,z.useState)(!1),y=(0,z.useCallback)(()=>{"function"==typeof d&&d(),g(!1)},[d]),v=(0,z.useCallback)(()=>{"function"==typeof u&&u(),g(!0)},[u]);return z.createElement(PY,{showLabels:!b,points:n},z.createElement(gA,{animationId:f,begin:l,duration:o,isActive:i,easing:c,key:"radar-".concat(f),onAnimationEnd:y,onAnimationStart:v},e=>{var i=1===e?n:n.map(PZ(m,h,e)),l=1===e?s:null==s?void 0:s.map(PZ(x,p,e));return e>0&&(a.current=i,r.current=l),z.createElement(PX,{points:i,baseLinePoints:l,props:t})}),z.createElement(b7,{label:t.label}),t.children)}function PQ(e){var t=(0,z.useRef)(void 0),a=(0,z.useRef)(void 0);return z.createElement(PJ,{props:e,previousPointsRef:t,previousBaseLinePointsRef:a})}var P0={activeDot:!0,angleAxisId:0,animationBegin:0,animationDuration:1500,animationEasing:"ease",dot:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",radiusAxisId:0,zIndex:ud.area};function P1(e){var{hide:t,className:a,points:r}=e;if(t)return null;var n=(0,eh.clsx)("recharts-radar",a);return z.createElement(bA,{zIndex:e.zIndex},z.createElement(f8,{className:n},z.createElement(PQ,e)),z.createElement(jn,{points:r,mainColor:PH(e.stroke,e.fill),itemDataKey:e.dataKey,activeDot:e.activeDot}))}function P2(e){var t=iw(),a=sB(a=>Pq(a,e.radiusAxisId,e.angleAxisId,t,e.id));return(null==a?void 0:a.points)==null?null:z.createElement(P1,PB({},e,{points:null==a?void 0:a.points,baseLinePoints:null==a?void 0:a.baseLinePoints,isRange:null==a?void 0:a.isRange}))}function P5(e){var t=fJ(e,P0);return z.createElement(vk,{id:t.id,type:"radar"},e=>z.createElement(z.Fragment,null,z.createElement(vN,{type:"radar",id:e,data:void 0,dataKey:t.dataKey,hide:t.hide,angleAxisId:t.angleAxisId,radiusAxisId:t.radiusAxisId}),z.createElement(vy,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:PH(r,n),value:il(a,t),payload:e}]})(t)}),z.createElement(PV,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),z.createElement(P2,PB({},t,{id:e}))))}P5.displayName="Radar";var P4=rc([(e,t)=>PM(e,"angleAxis",t,!1)],e=>{if(e)return e.map(e=>e.coordinate)}),P3=rc([(e,t)=>PM(e,"radiusAxis",t,!1)],e=>{if(e)return e.map(e=>e.coordinate)}),P6=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius","zIndex"];function P8(){return(P8=Object.assign.bind()).apply(null,arguments)}function P9(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function P7(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P9(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P9(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Me=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:n,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var l=P7({stroke:"#ccc"},fu(e));return z.createElement("g",{className:"recharts-polar-grid-angle"},s.map(e=>{var s=uo(t,a,r,e),i=uo(t,a,n,e);return z.createElement("line",P8({key:"line-".concat(e)},l,{x1:s.x,y1:s.y,x2:i.x,y2:i.y}))}))},Mt=e=>{var{cx:t,cy:a,radius:r}=e,n=P7({stroke:"#ccc",fill:"none"},fu(e));return z.createElement("circle",P8({},n,{className:(0,eh.clsx)("recharts-polar-grid-concentric-circle",e.className),cx:t,cy:a,r:r}))},Ma=e=>{var t,a,r,n,{radius:s}=e,i=P7({stroke:"#ccc",fill:"none"},fu(e));return z.createElement("path",P8({},i,{className:(0,eh.clsx)("recharts-polar-grid-concentric-polygon",e.className),d:(t=e.cx,a=e.cy,r=e.polarAngles,n="",r.forEach((e,r)=>{var i=uo(t,a,s,e);r?n+="L ".concat(i.x,",").concat(i.y):n+="M ".concat(i.x,",").concat(i.y)}),n+="Z")}))},Mr=e=>{var{polarRadius:t,gridType:a}=e;if(!t||!t.length)return null;var r=Math.max(...t),n=e.fill&&"none"!==e.fill;return z.createElement("g",{className:"recharts-polar-grid-concentric"},n&&"circle"===a&&z.createElement(Mt,P8({},e,{radius:r})),n&&"circle"!==a&&z.createElement(Ma,P8({},e,{radius:r})),t.map((t,r)=>"circle"===a?z.createElement(Mt,P8({key:r},e,{fill:"none",radius:t})):z.createElement(Ma,P8({key:r},e,{fill:"none",radius:t}))))},Mn={angleAxisId:0,radiusAxisId:0,gridType:"polygon",radialLines:!0,zIndex:ud.grid},Ms=e=>{var t,a,r,n,s,i,l,o,c=fJ(e,Mn),{gridType:d,radialLines:u,angleAxisId:m,radiusAxisId:x,cx:h,cy:p,innerRadius:f,outerRadius:b,polarAngles:g,polarRadius:y,zIndex:v}=c,j=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(c,P6),k=sB(uO),w=sB(e=>P4(e,m)),N=sB(e=>P3(e,x)),C=Array.isArray(g)?g:w,S=Array.isArray(y)?y:N;if(null==C||null==S)return null;var P=P7({cx:null!=(t=null!=(a=null==k?void 0:k.cx)?a:h)?t:0,cy:null!=(r=null!=(n=null==k?void 0:k.cy)?n:p)?r:0,innerRadius:null!=(s=null!=(i=null==k?void 0:k.innerRadius)?i:f)?s:0,outerRadius:null!=(l=null!=(o=null==k?void 0:k.outerRadius)?o:b)?l:0,polarAngles:C,polarRadius:S,zIndex:v},j),{outerRadius:M}=P;return M<=0?null:z.createElement(bA,{zIndex:P.zIndex},z.createElement("g",{className:"recharts-polar-grid"},z.createElement(Mr,P8({gridType:d,radialLines:u},P,{polarAngles:C,polarRadius:S})),z.createElement(Me,P8({gridType:d,radialLines:u},P,{polarAngles:C,polarRadius:S}))))};Ms.displayName="PolarGrid";var Mi=["children","type"];function Ml(){return(Ml=Object.assign.bind()).apply(null,arguments)}function Mo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Mc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mo(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Md=Math.cos(ul(45));function Mu(e){var t=s$(),a=sB(iX),r=(0,z.useMemo)(()=>{var{children:t,type:r}=e,n=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,Mi),s=uh(a,"angleAxis",r);if(null!=s)return Mc(Mc({},n),{},{type:s})},[e,a]),n=sB(e=>uy(e,null==r?void 0:r.id)),s=r===n;return((0,z.useEffect)(()=>null==r?ng:(t(pE(r)),()=>{t(pA(r))}),[t,r]),s)?e.children:null}var Mm=e=>{var{cx:t,cy:a,radius:r,axisLineType:n,axisLine:s,ticks:i}=e;if(!s)return null;var l=Mc(Mc({},fu(e)),{},{fill:"none"},fu(s));if("circle"===n)return z.createElement(v4,Ml({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:a,r:r}));var o=i.map(e=>uo(t,a,r,e.coordinate));return z.createElement(Pw,Ml({className:"recharts-polar-angle-axis-line"},l,{points:o}))},Mx=e=>{var{tick:t,tickProps:a,value:r}=e;return t?z.isValidElement(t)?z.cloneElement(t,a):"function"==typeof t?t(a):z.createElement(bO,Ml({},a,{className:"recharts-polar-angle-axis-tick-value"}),r):null},Mh=e=>{var{tick:t,tickLine:a,tickFormatter:r,stroke:n,ticks:s}=e,i=fu(e),l=fm(t),o=Mc(Mc({},i),{},{fill:"none"},fu(a)),c=s.map((s,c)=>{var d,u,m,x,h=((e,t)=>{var{cx:a,cy:r,radius:n,orientation:s,tickSize:i}=t,l=uo(a,r,n,e.coordinate),o=uo(a,r,n+("inner"===s?-1:1)*(i||8),e.coordinate);return{x1:l.x,y1:l.y,x2:o.x,y2:o.y}})(s,e),p=(d=e.orientation,(u=Math.cos(ul(-s.coordinate)))>1e-5?"outer"===d?"start":"end":u<-1e-5?"outer"===d?"end":"start":"middle"),f=(m=Math.cos(ul(-s.coordinate)),x=Math.sin(ul(-s.coordinate)),Math.abs(m)<=Md?x>0?"start":"end":"middle"),b=Mc(Mc(Mc({},i),{},{textAnchor:p,verticalAnchor:f,stroke:"none",fill:n},l),{},{index:c,payload:s,x:h.x2,y:h.y2});return z.createElement(f8,Ml({className:(0,eh.clsx)("recharts-polar-angle-axis-tick",j$(t)),key:"tick-".concat(s.coordinate)},gc(e,s,c)),a&&z.createElement("line",Ml({className:"recharts-polar-angle-axis-tick-line"},o,h)),z.createElement(Mx,{tick:t,tickProps:b,value:r?r(s.value,c):s.value}))});return z.createElement(f8,{className:"recharts-polar-angle-axis-ticks"},c)},Mp=e=>{var{angleAxisId:t}=e,a=sB(uO),r=sB(e=>PS(e,"angleAxis",t)),n=iw(),s=sB(e=>PO(e,"angleAxis",t,n));if(null==a||!s||!s.length||null==r)return null;var i=Mc(Mc(Mc({},e),{},{scale:r},a),{},{radius:a.outerRadius,ticks:s});return z.createElement(bA,{zIndex:i.zIndex},z.createElement(f8,{className:(0,eh.clsx)("recharts-polar-angle-axis","angleAxis",i.className)},z.createElement(Mm,i),z.createElement(Mh,i)))};function Mf(e){var t=fJ(e,uu);return z.createElement(Mu,{id:t.angleAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:t.reversed,includeHidden:!1,allowDecimals:t.allowDecimals,tickCount:t.tickCount,ticks:t.ticks,tick:t.tick,domain:t.domain},z.createElement(Mp,t))}Mf.displayName="PolarAngleAxis";var Mb=e.i(40105),Mg=e.i(74373),My=["type"],Mv=["cx","cy","angle","axisLine"],Mj=["angle","tickFormatter","stroke","tick"];function Mk(){return(Mk=Object.assign.bind()).apply(null,arguments)}function Mw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function MN(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mw(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mw(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function MC(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function MS(e){var t=s$(),a=sB(iX),r=(0,z.useMemo)(()=>{var{type:t}=e,r=MC(e,My),n=uh(a,"radiusAxis",t);if(null!=n)return MN(MN({},r),{},{type:n})},[e,a]);return(0,z.useEffect)(()=>null==r?ng:(t(pM(r)),()=>{t(pO(r))}),[t,r]),null}var MP=e=>{var t,a,r,n,s,{radiusAxisId:i}=e,l=sB(uO),o=sB(e=>PS(e,"radiusAxis",i)),c=sB(e=>PM(e,"radiusAxis",i,!1));if(null==l||!c||!c.length||null==o)return null;var d=MN(MN({},e),{},{scale:o},l),{tick:u,axisLine:m}=d;return z.createElement(bA,{zIndex:d.zIndex},z.createElement(f8,{className:(0,eh.clsx)("recharts-polar-radius-axis","radiusAxis",d.className)},m&&((e,t)=>{var{cx:a,cy:r,angle:n,axisLine:s}=e,i=MC(e,Mv),l=t.reduce((e,t)=>[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)],[1/0,-1/0]),o=uo(a,r,l[0],n),c=uo(a,r,l[1],n),d=MN(MN(MN({},fu(i)),{},{fill:"none"},fu(s)),{},{x1:o.x,y1:o.y,x2:c.x,y2:c.y});return z.createElement("line",Mk({className:"recharts-polar-radius-axis-line"},d))})(d,c),u&&((e,t)=>{var{angle:a,tickFormatter:r,stroke:n,tick:s}=e,i=MC(e,Mj),l=(e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle"}return t})(e.orientation),o=fu(i),c=fm(s),d=t.map((t,i)=>{var d,u=((e,t,a,r)=>{var{coordinate:n}=e;return uo(a,r,n,t)})(t,e.angle,e.cx,e.cy),m=MN(MN(MN(MN({textAnchor:l,transform:"rotate(".concat(90-a,", ").concat(u.x,", ").concat(u.y,")")},o),{},{stroke:"none",fill:n},c),{},{index:i},u),{},{payload:t});return z.createElement(f8,Mk({className:(0,eh.clsx)("recharts-polar-radius-axis-tick",j$(s)),key:"tick-".concat(t.coordinate)},gc(e,t,i)),(d=r?r(t.value,i):t.value,z.isValidElement(s)?z.cloneElement(s,m):"function"==typeof s?s(m):z.createElement(bO,Mk({},m,{className:"recharts-polar-radius-axis-tick-value"}),d)))});return z.createElement(f8,{className:"recharts-polar-radius-axis-ticks"},d)})(d,c),z.createElement(bU,(t=d.angle,a=d.cx,r=d.cy,n=(0,Mb.default)(c,e=>e.coordinate||0),{cx:a,cy:r,startAngle:t,endAngle:t,innerRadius:(null==(s=(0,Mg.default)(c,e=>e.coordinate||0))?void 0:s.coordinate)||0,outerRadius:(null==n?void 0:n.coordinate)||0,clockWise:!1}),z.createElement(bJ,{label:d.label}),d.children)))};function MM(e){var t=fJ(e,um);return z.createElement(z.Fragment,null,z.createElement(MS,{domain:t.domain,id:t.radiusAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDataOverflow:t.allowDataOverflow,reversed:t.reversed,includeHidden:t.includeHidden,allowDecimals:t.allowDecimals,ticks:t.ticks,tickCount:t.tickCount,tick:t.tick}),z.createElement(MP,t))}MM.displayName="PolarRadiusAxis";let MO=(0,X.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ME=(0,X.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var MA=e.i(66400);let MT=["#06b6d4","#8b5cf6","#f59e0b","#ef4444","#10b981"];function MI(){let e=Pm(),[t,a]=(0,z.useState)("overview"),r=(0,z.useMemo)(()=>{if(e.sites.length<2)return null;try{let t,a,r,n,s,i,l,o,c,d,u,m;return a=(t=e.sites.map(e=>{let t=wQ.COUNTRIES[e.countryId];if(!t)throw Error(`Country not found: ${e.countryId}`);let a={itLoad:e.itLoad,location:{US:"usa",GB:"europe",DE:"europe",NL:"europe",IE:"europe",FR:"europe",SE:"europe",PL:"europe",SG:"sea",JP:"japan",AU:"australia",IN:"india",CN:"china",KR:"south_korea",AE:"mena",SA:"mena",QA:"mena",BR:"south_america",CL:"south_america",MX:"south_america",CO:"south_america",ZA:"africa",NG:"africa",KE:"africa"}[e.countryId]||"sea",cityMarket:"none",buildingType:"purpose",coolingType:"inrow"===e.coolingType?"inrow":"rdhx"===e.coolingType?"rdhx":"liquid"===e.coolingType?"liquid":"air",redundancy:"2N+1"===e.powerRedundancy?"2n1":"2N"===e.powerRedundancy?"2n":"n1",rackType:"standard",upsType:"modular",genType:"diesel",fuelHours:48,fireType:"novec",alarmType:"addressable",projYear:"2025",designFee:8,pmFee:5,contingency:10,includeFOM:!1,substationType:"dedicated_33kv",transformerLead:"standard",utilityRate:9,greenCert:"none",renewableOption:"none",...e.capexInputs},r=(0,w_.calculateCapex)(a),n=K(e.itLoad,e.tierLevel,e.shiftModel,e.staffingModel,"predictive"===e.maintenanceStrategy?"in-house":"hybrid",e.maintenanceStrategy,.5),s=[{role:"shift-lead",count:n.headcounts["shift-lead"],is24x7:!0},{role:"engineer",count:n.headcounts.engineer,is24x7:!0},{role:"technician",count:n.headcounts.technician,is24x7:!1},{role:"admin",count:n.headcounts.admin,is24x7:!1},{role:"janitor",count:n.headcounts.janitor,is24x7:!1}].reduce((a,r)=>a+12*B(r.role,r.count,e.shiftModel,t,r.is24x7).monthlyCost,0),i=n.totalFTE,l=r.pue,o=s+e.itLoad*l*8760/1e3*(1e3*t.economy.electricityRate)+(t.compliance.annualComplianceCost||5e4),c=wI({totalCapex:r.total,annualOpex:o,revenuePerKwMonth:120,itLoadKw:e.itLoad,discountRate:.1,projectLifeYears:10,escalationRate:.03,opexEscalation:t.economy.inflationRate,occupancyRamp:wT(10),taxRate:t.economy.taxRate,depreciationYears:7}),d=Cr({itLoadKw:e.itLoad,pue:l,gridCarbonIntensity:t.environment.gridCarbonIntensity,coolingType:e.coolingType,renewableOption:"none",fuelHours:50,genType:"diesel",countryName:t.name});return{site:e,countryName:t.name,capex:r,financial:c,carbon:d,totalStaff:i,annualStaffCost:s,annualOpex:o,pue:l,capexPerKw:r.metrics.perKw,opexPerKw:e.itLoad>0?o/e.itLoad:0,staffPerMw:e.itLoad>0?i/(e.itLoad/1e3):0}})).reduce((e,t)=>e+t.capex.total,0),r=t.reduce((e,t)=>e+t.annualOpex,0),n=t.reduce((e,t)=>e+t.totalStaff,0),s=t.reduce((e,t)=>e+t.site.itLoad,0),i=t.reduce((e,t)=>e+t.carbon.annualEmissionsTonCO2,0),l=s>0?t.reduce((e,t)=>e+t.pue*t.site.itLoad,0)/s:0,o=t.reduce((e,t)=>e+t.financial.npv,0),c=[...t].sort((e,t)=>e.capexPerKw-t.capexPerKw),d=[...t].sort((e,t)=>e.pue-t.pue),u=[...t].sort((e,t)=>t.financial.irr-e.financial.irr),m=[...t].sort((e,t)=>t.site.tierLevel-e.site.tierLevel),{sites:t,totalCapex:a,totalAnnualOpex:r,totalStaff:n,totalItLoadKw:s,totalAnnualCO2:i,weightedPue:l,portfolioNpv:o,bestCapexPerKw:c[0]?.site.id||"",bestPue:d[0]?.site.id||"",bestIrr:u[0]?.site.id||"",lowestRisk:m[0]?.site.id||""}}catch{return null}},[e.sites]),n=Object.values(wQ.COUNTRIES).map(e=>({id:e.id,name:e.name}));return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl",children:(0,F.jsx)(w7.Layers,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),"Multi-Site Portfolio",(0,F.jsx)(ei,{content:"Analyze and compare up to 5 data center sites across financial, staffing, risk, and carbon dimensions to optimize portfolio allocation."})]}),(0,F.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Compare 2-5 data center locations side-by-side"})]}),(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsxs)("button",{onClick:e.importFromCurrentConfig,disabled:e.sites.length>=5,className:"px-3 py-2 text-xs font-medium bg-cyan-600 hover:bg-cyan-500 disabled:bg-slate-400 text-white rounded-lg transition-colors flex items-center gap-1.5",title:"Import settings from the currently active single-site configuration into the portfolio",children:[(0,F.jsx)(eA,{className:"w-3.5 h-3.5"}),"Import Current"]}),(0,F.jsxs)("button",{onClick:e.addSite,disabled:e.sites.length>=5,className:"px-3 py-2 text-xs font-medium bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-400 text-white rounded-lg transition-colors flex items-center gap-1.5",title:"Add a new blank site to the portfolio (max 5 sites)",children:[(0,F.jsx)(MO,{className:"w-3.5 h-3.5"}),"Add Site"]})]})]}),(0,F.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Math.min(e.sites.length||1,5)}, 1fr)`},children:e.sites.map((t,a)=>(0,F.jsx)(MR,{site:t,index:a,countryOptions:n,onUpdate:a=>e.updateSite(t.id,a),onDuplicate:()=>e.duplicateSite(t.id),onRemove:()=>e.removeSite(t.id),canRemove:e.sites.length>0,canDuplicate:e.sites.length<5,isBest:!!r&&(r.bestIrr===t.id||r.bestPue===t.id)},t.id))}),e.sites.length<2&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-12 text-center text-slate-500 dark:text-slate-400",children:[(0,F.jsx)(w7.Layers,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),(0,F.jsx)("p",{className:"text-sm",children:"Add at least 2 sites to begin portfolio comparison"}),(0,F.jsx)("p",{className:"text-xs mt-1",children:'Use "Import Current" to add your active configuration, or "Add Site" for a blank template'})]}),r&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"grid grid-cols-6 gap-3",children:[(0,F.jsx)(M_,{label:"Total CAPEX",value:eo(r.totalCapex),tooltip:"Combined capital expenditure across all data center sites in the portfolio."}),(0,F.jsx)(M_,{label:"Annual OPEX",value:eo(r.totalAnnualOpex),tooltip:"Total annual operating expenditure across all portfolio sites including power, staffing, and maintenance."}),(0,F.jsx)(M_,{label:"Total Staff",value:String(r.totalStaff),tooltip:"Combined headcount across all data center sites in the portfolio."}),(0,F.jsx)(M_,{label:"Total IT Load",value:`${(r.totalItLoadKw/1e3).toFixed(1)} MW`,tooltip:"Sum of IT power capacity across all portfolio sites in megawatts."}),(0,F.jsx)(M_,{label:"Wtd. PUE",value:r.weightedPue.toFixed(2),tooltip:"Power Usage Effectiveness weighted by each site's IT load contribution. Accounts for site size variation."}),(0,F.jsx)(M_,{label:"Portfolio NPV",value:eo(r.portfolioNpv),highlight:r.portfolioNpv>0,tooltip:"Net Present Value of the combined portfolio, discounting future cash flows to present value. Positive means value creation."})]}),(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800/50 p-1 rounded-xl",children:[{id:"overview",label:"Overview",tooltip:"Radar chart and rankings comparing all sites across key performance dimensions."},{id:"financial",label:"Financial",tooltip:"CAPEX, OPEX, NPV, IRR, payback, and ROI comparison across all sites."},{id:"staffing",label:"Staffing",tooltip:"Headcount, staff density per MW, and labor cost comparison across all sites."},{id:"risk",label:"Risk",tooltip:"Tier level, redundancy, maintenance strategy, and uptime comparison across all sites."},{id:"carbon",label:"Carbon",tooltip:"CO2 emissions, PUE, energy consumption, and carbon offset cost comparison."}].map(e=>(0,F.jsx)("button",{onClick:()=>a(e.id),title:e.tooltip,className:(0,eh.default)("flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-all",t===e.id?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:e.label},e.id))}),"overview"===t&&(0,F.jsx)(MF,{result:r}),"financial"===t&&(0,F.jsx)(M$,{result:r}),"staffing"===t&&(0,F.jsx)(Mz,{result:r}),"risk"===t&&(0,F.jsx)(Mq,{result:r}),"carbon"===t&&(0,F.jsx)(MW,{result:r})]})]})}function MR({site:e,index:t,countryOptions:a,onUpdate:r,onDuplicate:n,onRemove:s,canRemove:i,canDuplicate:l,isBest:o}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border-2 p-3 space-y-2",style:{borderColor:MT[t]},children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:MT[t]}}),(0,F.jsx)("input",{className:"text-sm font-bold bg-transparent text-slate-900 dark:text-white border-none outline-none w-full",value:e.label,onChange:e=>r({label:e.target.value})}),o&&(0,F.jsx)("span",{title:"Top-ranked site in IRR or PUE",children:(0,F.jsx)(Cs,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"})})]}),(0,F.jsxs)("div",{className:"flex gap-1",children:[l&&(0,F.jsx)("button",{onClick:n,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Duplicate",children:(0,F.jsx)(ME,{className:"w-3 h-3"})}),i&&(0,F.jsx)("button",{onClick:s,className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded text-slate-400 hover:text-red-500 transition-colors",title:"Remove",children:(0,F.jsx)(MA.Trash2,{className:"w-3 h-3"})})]})]}),(0,F.jsxs)("div",{className:"space-y-1.5 text-[10px]",children:[(0,F.jsx)(MD,{label:"Country",value:e.countryId,options:a.map(e=>({value:e.id,label:e.name})),onChange:e=>r({countryId:e}),tooltip:"Geographic location affects energy costs, labor rates, carbon grid intensity, and regulatory environment."}),(0,F.jsx)(MD,{label:"Tier",value:String(e.tierLevel),options:[{value:"2",label:"Tier 2"},{value:"3",label:"Tier 3"},{value:"4",label:"Tier 4"}],onChange:e=>r({tierLevel:Number(e)}),tooltip:"Uptime Institute tier classification. Higher tiers provide greater redundancy and availability (Tier 2: 99.749%, Tier 3: 99.982%, Tier 4: 99.995%)."}),(0,F.jsx)(ML,{label:"IT Load (kW)",value:e.itLoad,onChange:e=>r({itLoad:e}),tooltip:"Total IT power capacity for this site in kilowatts. Drives CAPEX, OPEX, staffing, and carbon calculations."}),(0,F.jsx)(MD,{label:"Cooling",value:e.coolingType,options:[{value:"air",label:"Air"},{value:"inrow",label:"In-Row"},{value:"rdhx",label:"RDHX"},{value:"liquid",label:"Liquid"}],onChange:e=>r({coolingType:e}),tooltip:"Cooling infrastructure type. Affects PUE, CAPEX, and energy efficiency. Liquid cooling offers lowest PUE but highest upfront cost."}),(0,F.jsx)(MD,{label:"Shift",value:e.shiftModel,options:[{value:"8h",label:"8H Continental"},{value:"12h",label:"12H 4on3off"}],onChange:e=>r({shiftModel:e}),tooltip:"Operator shift rotation model. 8H Continental uses 5 crews for 24/7 coverage; 12H 4on3off uses 4 crews with longer shifts."}),(0,F.jsx)(MD,{label:"Staffing",value:e.staffingModel,options:[{value:"in-house",label:"In-House"},{value:"hybrid",label:"Hybrid"},{value:"outsourced",label:"Outsourced"}],onChange:e=>r({staffingModel:e}),tooltip:"Staffing approach. In-house provides maximum control, outsourced reduces headcount, hybrid balances cost and oversight."})]})]})}function MD({label:e,value:t,options:a,onChange:r,tooltip:n}){return(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e,n&&(0,F.jsx)(ei,{content:n})]}),(0,F.jsx)("select",{value:t,onChange:e=>r(e.target.value),className:"px-1.5 py-0.5 text-[10px] bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded text-slate-900 dark:text-white",children:a.map(e=>(0,F.jsx)("option",{value:e.value,children:e.label},e.value))})]})}function ML({label:e,value:t,onChange:a,tooltip:r}){return(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e,r&&(0,F.jsx)(ei,{content:r})]}),(0,F.jsx)("input",{type:"number",value:t,onChange:e=>a(Number(e.target.value)),className:"w-20 px-1.5 py-0.5 text-[10px] bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded text-slate-900 dark:text-white text-right"})]})}function M_({label:e,value:t,highlight:a,tooltip:r}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-3 text-center",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center justify-center gap-1",children:[e,r&&(0,F.jsx)(ei,{content:r})]}),(0,F.jsx)("div",{className:(0,eh.default)("text-lg font-bold mt-0.5",a?"text-emerald-600 dark:text-emerald-400":"text-slate-900 dark:text-white"),children:t})]})}function MF({result:e}){let t=Math.max(...e.sites.map(e=>e.capexPerKw)),a=Math.max(...e.sites.map(e=>e.opexPerKw)),r=Math.max(...e.sites.map(e=>e.staffPerMw)),n=Math.max(...e.sites.map(e=>e.pue)),s=Math.max(...e.sites.map(e=>e.financial.irr)),i=Math.max(...e.sites.map(e=>e.carbon.annualEmissionsTonCO2)),l=[{axis:"CAPEX Efficiency",...Object.fromEntries(e.sites.map((e,a)=>[`s${a}`,t>0?(1-e.capexPerKw/t)*100:50]))},{axis:"OPEX Efficiency",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,a>0?(1-e.opexPerKw/a)*100:50]))},{axis:"Staff Efficiency",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,r>0?(1-e.staffPerMw/r)*100:50]))},{axis:"PUE",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,n>0?(1-e.pue/n)*100:50]))},{axis:"IRR",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,s>0?e.financial.irr/s*100:50]))},{axis:"Carbon",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,i>0?(1-e.carbon.annualEmissionsTonCO2/i)*100:50]))}];return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-1",children:["Site Comparison Radar",(0,F.jsx)(ei,{content:"Normalized radar chart comparing all sites across 6 key dimensions. Higher values (outer ring) indicate better performance relative to other sites."})]}),(0,F.jsx)(iB,{width:"100%",height:350,children:(0,F.jsxs)(Pb,{data:l,children:[(0,F.jsx)(Ms,{stroke:"#475569",opacity:.3}),(0,F.jsx)(Mf,{dataKey:"axis",tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(MM,{tick:{fontSize:9,fill:"#64748b"},domain:[0,100]}),e.sites.map((t,a)=>(0,F.jsx)(P5,{name:e.sites[a].site.label,dataKey:`s${a}`,stroke:MT[a],fill:MT[a],fillOpacity:.1,strokeWidth:2},a)),(0,F.jsx)(wv,{}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11}})]})}),(0,F.jsx)("div",{className:"grid grid-cols-3 gap-x-4 gap-y-1 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[{axis:"CAPEX Efficiency",desc:"Lower CAPEX per kW scores higher  measures construction cost efficiency."},{axis:"OPEX Efficiency",desc:"Lower annual OPEX per kW scores higher  measures operational cost efficiency."},{axis:"Staff Efficiency",desc:"Lower staff per MW scores higher  measures workforce productivity."},{axis:"PUE",desc:"Lower PUE scores higher  measures energy efficiency (1.0 is perfect)."},{axis:"IRR",desc:"Higher Internal Rate of Return scores higher  measures investment performance."},{axis:"Carbon",desc:"Lower annual CO2 emissions score higher  measures environmental efficiency."}].map(e=>(0,F.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-slate-500 dark:text-slate-400",children:[(0,F.jsx)("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:e.axis}),(0,F.jsx)(ei,{content:e.desc})]},e.axis))})]}),(0,F.jsx)("div",{className:"grid grid-cols-4 gap-3",children:[{label:"Best CAPEX/kW",siteId:e.bestCapexPerKw,tooltip:"Site with the lowest capital expenditure per kilowatt of IT capacity, indicating the most cost-efficient build."},{label:"Best PUE",siteId:e.bestPue,tooltip:"Site with the lowest Power Usage Effectiveness, meaning the most energy-efficient facility. Closer to 1.0 is better."},{label:"Best IRR",siteId:e.bestIrr,tooltip:"Site with the highest Internal Rate of Return, indicating the strongest projected investment performance."},{label:"Lowest Risk",siteId:e.lowestRisk,tooltip:"Site with the lowest overall risk score based on tier level, redundancy, maintenance strategy, and geographic factors."}].map(t=>{let a=e.sites.find(e=>e.site.id===t.siteId),r=e.sites.findIndex(e=>e.site.id===t.siteId);return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-3",children:[(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:[t.label,(0,F.jsx)(ei,{content:t.tooltip})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,F.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:MT[r]||"#94a3b8"}}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:a?.site.label||""})]})]},t.label)})})]})}function M$({result:e}){let t=[{metric:"CAPEX ($M)",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,e.capex.total/1e6]))},{metric:"NPV ($M)",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,e.financial.npv/1e6]))},{metric:"Annual OPEX ($M)",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,e.annualOpex/1e6]))}];return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-1",children:["Financial Comparison",(0,F.jsx)(ei,{content:"Side-by-side comparison of capital expenditure, net present value, and annual operating costs across all portfolio sites."})]}),(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(Cc,{data:t,margin:{top:10,right:20,left:10,bottom:5},children:[(0,F.jsx)(kt,{dataKey:"metric",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>`$${e}M`}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11}}),(0,F.jsx)(wv,{formatter:t=>e.sites[parseInt(t.replace("s",""))]?.site.label||t}),e.sites.map((e,t)=>(0,F.jsx)(v1,{dataKey:`s${t}`,fill:MT[t],radius:[4,4,0,0]},t))]})})]}),(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 font-medium text-slate-500",children:"Metric"}),e.sites.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:MT[t]},children:e.site.label},t))]})}),(0,F.jsx)("tbody",{children:[{label:"CAPEX/kW",get:e=>`$${Math.round(e.capexPerKw).toLocaleString()}`,tooltip:"Capital expenditure per kilowatt of IT capacity. Lower values indicate more cost-efficient construction."},{label:"OPEX/kW/yr",get:e=>`$${Math.round(e.opexPerKw).toLocaleString()}`,tooltip:"Annual operating cost per kilowatt of IT capacity. Includes energy, staffing, and maintenance."},{label:"IRR",get:e=>`${e.financial.irr.toFixed(1)}%`,tooltip:"Internal Rate of Return  the discount rate at which the project NPV equals zero. Higher is better."},{label:"NPV",get:e=>eo(e.financial.npv),tooltip:"Net Present Value  the present value of all future cash flows minus initial investment. Positive means value creation."},{label:"Payback",get:e=>`${e.financial.paybackPeriodYears.toFixed(1)} yr`,tooltip:"Time in years to recover the initial capital investment from operating cash flows."},{label:"ROI",get:e=>`${e.financial.roiPercent.toFixed(1)}%`,tooltip:"Return on Investment  total net profit as a percentage of initial capital expenditure over the project lifetime."}].map(t=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 font-medium text-slate-700 dark:text-slate-300",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[t.label,(0,F.jsx)(ei,{content:t.tooltip})]})}),e.sites.map((e,a)=>(0,F.jsx)("td",{className:"text-center px-3 py-2 font-mono text-slate-900 dark:text-white",children:t.get(e)},a))]},t.label))})]})})]})}function Mz({result:e}){let t=[{metric:"Total Staff",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,e.totalStaff]))},{metric:"Staff/MW",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,parseFloat(e.staffPerMw.toFixed(1))]))}];return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-1",children:["Staffing Comparison",(0,F.jsx)(ei,{content:"Comparison of total headcount and staff density (per MW) across sites. Influenced by shift model, staffing approach, and local labor market."})]}),(0,F.jsx)(iB,{width:"100%",height:250,children:(0,F.jsxs)(Cc,{data:t,margin:{top:10,right:20,left:10,bottom:5},children:[(0,F.jsx)(kt,{dataKey:"metric",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11}}),(0,F.jsx)(wv,{formatter:t=>e.sites[parseInt(t.replace("s",""))]?.site.label||t}),e.sites.map((e,t)=>(0,F.jsx)(v1,{dataKey:`s${t}`,fill:MT[t],radius:[4,4,0,0]},t))]})})]}),(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 font-medium text-slate-500",children:"Metric"}),e.sites.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:MT[t]},children:e.site.label},t))]})}),(0,F.jsx)("tbody",{children:[{label:"Total Staff",get:e=>String(e.totalStaff),tooltip:"Total headcount required for 24/7 operations at this site, based on shift model and staffing approach."},{label:"Staff/MW",get:e=>e.staffPerMw.toFixed(1),tooltip:"Staff density per megawatt of IT load. Lower values indicate more efficient operations staffing."},{label:"Annual Staff Cost",get:e=>`$${Math.round(e.annualStaffCost).toLocaleString()}`,tooltip:"Total annual labor cost including salaries adjusted for country-specific labor rates."},{label:"Country",get:e=>e.countryName,tooltip:"Site location which determines local labor rates, energy costs, and regulatory requirements."}].map(t=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 font-medium text-slate-700 dark:text-slate-300",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[t.label,(0,F.jsx)(ei,{content:t.tooltip})]})}),e.sites.map((e,a)=>(0,F.jsx)("td",{className:"text-center px-3 py-2 font-mono text-slate-900 dark:text-white",children:t.get(e)},a))]},t.label))})]})})]})}function Mq({result:e}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,F.jsx)("div",{className:"px-5 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Risk Profile Comparison",(0,F.jsx)(ei,{content:"Comparison of risk-related design choices across sites including tier level, redundancy configuration, and maintenance strategy."})]})}),(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 font-medium text-slate-500",children:"Risk Factor"}),e.sites.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:MT[t]},children:e.site.label},t))]})}),(0,F.jsx)("tbody",{children:[{label:"Tier Level",get:e=>`Tier ${e.site.tierLevel}`,tooltip:"Uptime Institute tier classification defining redundancy and fault tolerance (Tier 2: N+1, Tier 3: Concurrently Maintainable, Tier 4: Fault Tolerant)."},{label:"Power Redundancy",get:e=>e.site.powerRedundancy,tooltip:"Power distribution redundancy configuration (e.g., N+1, 2N). Higher redundancy reduces single-point-of-failure risk."},{label:"Maint. Strategy",get:e=>e.site.maintenanceStrategy,tooltip:"Maintenance approach  reactive (break-fix), preventive (scheduled), or predictive (condition-based monitoring)."},{label:"Cooling Type",get:e=>e.site.coolingType,tooltip:"Cooling infrastructure design. Affects energy efficiency, water usage, and maximum rack density support."},{label:"Expected Uptime",get:e=>4===e.site.tierLevel?"99.995%":3===e.site.tierLevel?"99.982%":"99.749%",tooltip:"Target availability based on tier level. Tier 4: 26 min/yr downtime, Tier 3: 1.6 hr/yr, Tier 2: 22 hr/yr."}].map(t=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 font-medium text-slate-700 dark:text-slate-300",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[t.label,(0,F.jsx)(ei,{content:t.tooltip})]})}),e.sites.map((e,a)=>(0,F.jsx)("td",{className:"text-center px-3 py-2 font-mono text-slate-900 dark:text-white",children:t.get(e)},a))]},t.label))})]})]})}function MW({result:e}){let t=[{metric:"CO (tCO/yr)",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,Math.round(e.carbon.annualEmissionsTonCO2)]))},{metric:"PUE",...Object.fromEntries(e.sites.map((e,t)=>[`s${t}`,e.pue]))}];return(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-1",children:["Carbon & Energy Comparison",(0,F.jsx)(ei,{content:"Comparison of annual CO2 emissions and PUE across sites. Lower values indicate more environmentally efficient operations."})]}),(0,F.jsx)(iB,{width:"100%",height:250,children:(0,F.jsxs)(Cc,{data:t,margin:{top:10,right:20,left:10,bottom:5},children:[(0,F.jsx)(kt,{dataKey:"metric",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:11}}),(0,F.jsx)(wv,{formatter:t=>e.sites[parseInt(t.replace("s",""))]?.site.label||t}),e.sites.map((e,t)=>(0,F.jsx)(v1,{dataKey:`s${t}`,fill:MT[t],radius:[4,4,0,0]},t))]})})]}),(0,F.jsx)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 font-medium text-slate-500",children:"Metric"}),e.sites.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:MT[t]},children:e.site.label},t))]})}),(0,F.jsx)("tbody",{children:[{label:"Annual CO",get:e=>`${Math.round(e.carbon.annualEmissionsTonCO2).toLocaleString()} tCO`,tooltip:"Total annual carbon dioxide emissions in metric tons, based on energy consumption and local grid carbon intensity."},{label:"PUE",get:e=>e.pue.toFixed(2),tooltip:"Power Usage Effectiveness  ratio of total facility power to IT equipment power. 1.0 is perfect; typical range is 1.2-1.8."},{label:"Annual Energy",get:e=>`${Math.round(e.carbon.annualEnergyMWh).toLocaleString()} MWh`,tooltip:"Total annual energy consumption including IT load and all overhead (cooling, lighting, losses) in megawatt-hours."},{label:"Grid Intensity",get:e=>`${e.carbon.pueEfficiency.toFixed(2)} PUE`,tooltip:"PUE efficiency factor reflecting how the local electricity grid carbon intensity affects overall emissions."},{label:"Carbon Offset Cost",get:e=>`$${Math.round(e.carbon.carbonOffsetCostUSD).toLocaleString()}`,tooltip:"Estimated annual cost to offset carbon emissions through verified carbon credits at current market rates."}].map(t=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 font-medium text-slate-700 dark:text-slate-300",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[t.label,(0,F.jsx)(ei,{content:t.tooltip})]})}),e.sites.map((e,a)=>(0,F.jsx)("td",{className:"text-center px-3 py-2 font-mono text-slate-900 dark:text-white",children:t.get(e)},a))]},t.label))})]})})]})}var MB=e.i(20101);let MU=[{category:"General",q:"What is DC MOC?",a:"Data Center Maintenance & Operations Calculator  a simulation engine for modeling staffing, shift patterns, CAPEX, OPEX, risk analysis, carbon/ESG, and financial projections for data center operations across 30+ countries."},{category:"General",q:"Who is DC MOC for?",a:"Data center operations managers, facility engineers, C-level executives, and consultants who need to plan staffing, estimate costs, and compare operational scenarios for new or existing data center facilities."},{category:"General",q:"Is there a demo account?",a:"Yes  use demo@resistancezero.com / demo2026 to explore all Pro features including scenario modeling, PDF reports, and advanced analytics."},{category:"General",q:"How do I export a PDF report?",a:'Each module has an "Export Full Report (PDF)" button in the top toolbar. Click it to generate a comprehensive multi-page PDF covering all KPIs, charts, tables, and recommendations for the active module. Reports are branded and print-ready.'},{category:"General",q:"Can I save and compare scenarios?",a:"Yes  the Simulation module lets you save configurations as named scenarios. The Scenario Comparison tab displays saved scenarios side-by-side, comparing cost, headcount, PUE, and risk metrics across different countries and shift models."},{category:"Financial",q:"What is EBITDA?",a:"Earnings Before Interest, Taxes, Depreciation & Amortization  a key profitability metric that measures operating performance without the effects of financing and accounting decisions. Used in DC MOC's Financial module to evaluate data center profitability."},{category:"Financial",q:"What is TCO (Total Cost of Ownership)?",a:"The complete cost of owning and operating a data center over a defined period (typically 5 years). Includes staffing payroll, shift allowances, overtime, labor escalation, turnover impact, maintenance, energy, and operational overhead."},{category:"Financial",q:"What is CAPEX vs OPEX?",a:"CAPEX (Capital Expenditure) is upfront construction cost  building, electrical infrastructure, UPS, generators, cooling, fire suppression. OPEX (Operating Expenditure) is ongoing cost  staffing, energy, maintenance, insurance. DC MOC models both."},{category:"Financial",q:"What is IRR (Internal Rate of Return)?",a:"The discount rate that makes the Net Present Value (NPV) of an investment equal to zero. Used in the Investment module to evaluate whether a data center project meets the required return threshold."},{category:"Financial",q:"What is NPV (Net Present Value)?",a:"The present value of all future cash flows minus the initial investment, discounted at a specified rate. A positive NPV indicates the project creates value. Calculated in DC MOC's Investment module."},{category:"Financial",q:"What is DSCR (Debt Service Coverage Ratio)?",a:"Net Operating Income divided by total debt service (principal + interest). A DSCR above 1.25x is generally required by lenders for data center project finance. Below 1.0x means the project cannot cover its debt obligations."},{category:"Financial",q:"What is WACC (Weighted Average Cost of Capital)?",a:"The blended cost of all capital sources (debt and equity), weighted by their proportion in the capital structure. Used as the discount rate for NPV calculations. Typical data center WACC ranges from 6-10% depending on leverage and market conditions."},{category:"Financial",q:"How is terminal value calculated?",a:"Terminal value represents the project's value beyond the explicit forecast period. DC MOC uses the exit multiple method: Terminal Value = Final Year EBITDA x Exit EV/EBITDA Multiple. This captures the residual value at the assumed exit year."},{category:"Infrastructure",q:"What is PUE (Power Usage Effectiveness)?",a:"The ratio of total facility power to IT equipment power. A PUE of 1.0 is ideal; typical values range from 1.2 (liquid-cooled) to 1.6+ (air-cooled). PUE directly impacts energy cost and carbon footprint calculations across DC MOC."},{category:"Infrastructure",q:"What is Redundancy Tier (N to 2N+1)?",a:"Data center redundancy levels for critical infrastructure  N (no backup), N+1 (one spare unit), 2N (full duplicate system), 2N+1 (full duplicate plus one spare). Higher tiers significantly increase CAPEX but improve uptime SLA from 99.67% to 99.995%."},{category:"Infrastructure",q:"What is WUE (Water Usage Effectiveness)?",a:"The ratio of annual water usage to IT equipment energy consumption (liters/kWh). Measures how efficiently a data center uses water for cooling. Tracked in DC MOC's Carbon/ESG module alongside PUE and CUE."},{category:"Infrastructure",q:"What is CUE (Carbon Usage Effectiveness)?",a:"The ratio of total CO emissions to IT energy consumption (kgCO/kWh). Depends on the local grid emission factor and PUE. A lower CUE indicates greener operations. Modeled in the Carbon/ESG module."},{category:"Infrastructure",q:"What substation types are modeled?",a:"DC MOC models four substation configurations: Outdoor (lowest cost, weather-exposed), Indoor (building-integrated, higher protection), GIS/Gas-Insulated (compact footprint for urban sites), and Prefabricated/Packaged (fastest deployment, modular). Each affects CAPEX, footprint, and maintenance requirements."},{category:"Infrastructure",q:"What UPS topologies are available?",a:"Five UPS types: Double Conversion Online (highest protection, 94-96% efficiency), Line Interactive (mid-tier, 97%), Rotary (mechanical flywheel, no battery), Modular/Scalable (pay-as-you-grow), and Flywheel-Hybrid (short-duration bridging). Selection affects CAPEX, efficiency losses, and maintenance cost."},{category:"Infrastructure",q:"How does cooling redundancy affect cost?",a:"Cooling redundancy follows the same N/N+1/2N/2N+1 framework as power. Each additional redundancy level adds 30-80% to cooling CAPEX but reduces thermal failure risk. The CAPEX module calculates exact cost impact based on cooling type (air, in-row, rear-door, liquid) and redundancy level."},{category:"Staffing",q:"What is the 4-on/3-off shift pattern?",a:"A 12-hour shift rotation: 2 days on, 2 nights on, 3 days off  completing a 7-day cycle. Industry standard for 24/7 data center operations, requiring only 2 teams with zero scheduled overtime."},{category:"Staffing",q:"What is the Continental (3-shift 8h) pattern?",a:"An 8-hour shift rotation: 2 mornings (06-14), 2 afternoons (14-22), 2 nights (22-06), 2 days off  completing an 8-day cycle. Requires 4 teams. Preferred in regions with strict maximum daily work hour regulations."},{category:"Staffing",q:"What is Shrinkage Factor?",a:"The percentage of scheduled work hours lost to annual leave, training, sick days, and absenteeism  typically 15-20%. DC MOC factors this into headcount calculations to ensure adequate on-shift coverage at all times."},{category:"Staffing",q:"What is Turnover Rate?",a:"The annual percentage of employees who leave and need to be replaced. Typical DC industry turnover is 10-20%. Higher turnover increases recruitment fees, training costs, and productivity loss during ramp-up  all modeled in the Cost of Turnover analysis."},{category:"Staffing",q:"How are shift allowances calculated?",a:"Shift allowances are country-specific multipliers applied to base salary for non-standard hours. Night shift typically adds 15-30%, weekend shifts 25-50%, and public holidays up to 100-200%. DC MOC uses each country's labor law rates for accurate calculation."},{category:"Staffing",q:"What is the competency matrix?",a:"A skills framework mapping each role (Engineer, Technician, Shift Lead) against required competencies (electrical, mechanical, HVAC, fire, BMS/DCIM). Used to identify training gaps and ensure adequate cross-functional coverage on every shift."},{category:"Analytics",q:"What is Monte Carlo simulation?",a:"A probabilistic analysis that runs thousands of randomized scenarios to model risk and uncertainty in cost projections. Instead of a single-point estimate, it provides confidence intervals (P10/P50/P90) for CAPEX and OPEX planning."},{category:"Analytics",q:"What is Sensitivity Analysis?",a:"An analysis that measures how changes in one input variable (e.g., headcount +/-20%) impact output metrics (e.g., monthly cost). Helps identify which variables have the greatest impact on total operational cost."},{category:"Analytics",q:"What is Scenario Comparison?",a:"A side-by-side analysis of saved configurations  comparing different countries, shift models, staffing ratios, or maintenance strategies to determine the optimal operational setup for a data center."},{category:"Analytics",q:"What are correlation coefficients in the analytics?",a:"Pearson correlation values (-1 to +1) measuring the linear relationship between input variables and output costs. Values near +1 indicate strong positive correlation (e.g., headcount vs cost), while values near 0 suggest weak or no relationship."},{category:"Analytics",q:"What do P10/P50/P90 confidence intervals mean?",a:"P10 means there is a 10% probability the actual value will be below this number (optimistic case). P50 is the median estimate. P90 means 90% probability the value will be below this (conservative case). The spread between P10 and P90 quantifies project uncertainty."},{category:"Capacity",q:"How does phase planning work?",a:"The Capacity module lets you define multiple build phases, each with its own IT load, start month, and construction duration. This models staged deployment  starting with Phase 1 (e.g., 2MW) and expanding to Phase 3+ as demand grows, avoiding overprovisioning."},{category:"Capacity",q:"What is the demand utilization curve?",a:"A time-series projection showing deployed capacity versus expected customer demand over the project timeline. The gap between capacity and demand represents available headroom  too much headroom wastes capital, too little risks SLA violations during demand spikes."},{category:"Capacity",q:"How is scalability score calculated?",a:"A composite metric (0-100) evaluating how efficiently the capacity plan scales: considers $/kW efficiency across phases, lead time between phases, PUE improvement trajectory, and revenue-to-CAPEX ratio. Higher scores indicate better capital efficiency."},{category:"Risk",q:"How does the risk matrix work?",a:"A 5x5 grid mapping likelihood (Rare to Certain) against impact (Negligible to Catastrophic). Each risk is plotted based on country-specific factors: seismic activity, grid reliability, political stability, and environmental conditions. Red-zone risks require immediate mitigation plans."},{category:"Risk",q:"What are MTBF and MTTR?",a:"MTBF (Mean Time Between Failures) is the average operating time between equipment failures  higher is better. MTTR (Mean Time To Repair) is the average duration to restore equipment after failure  lower is better. Together they determine availability: MTBF / (MTBF + MTTR)."},{category:"Risk",q:"How are SLA penalties calculated?",a:"SLA penalties are modeled based on contracted uptime tiers (99.9% to 99.999%). Each minute of downtime beyond the allowed threshold incurs a penalty  typically 5-10% of monthly recurring charges per hour of unplanned outage. The Risk module calculates expected annual penalty exposure."},{category:"ESG & Carbon",q:"What are Scope 1, 2, and 3 emissions?",a:"Scope 1: Direct emissions from owned sources (diesel generators, refrigerant leaks). Scope 2: Indirect emissions from purchased electricity (grid carbon intensity x consumption). Scope 3: Value chain emissions (construction materials, employee commuting, waste disposal). DC MOC calculates all three scopes."},{category:"ESG & Carbon",q:"How do carbon credits work in the model?",a:"Carbon credits offset Scope 1 and 2 emissions at a configurable price per tonne COe. The ESG module calculates annual offset cost based on total emissions and shows the net carbon position. Note: credits are supplementary  reducing actual emissions through renewable energy and efficiency improvements is prioritized."},{category:"ESG & Carbon",q:"What is RE100 and how does it apply?",a:"RE100 is a global initiative committing companies to 100% renewable electricity. In DC MOC, enabling RE100 mode assumes all purchased electricity comes from renewable sources (via PPAs or RECs), reducing Scope 2 emissions to near-zero while showing the premium cost for green energy procurement."},{category:"Maintenance",q:"What is CBM vs TBM?",a:"CBM (Condition-Based Maintenance) uses real-time sensor data  vibration, temperature, oil analysis  to predict failures and schedule maintenance only when needed. TBM (Time-Based Maintenance) follows fixed calendar intervals regardless of condition. CBM has higher sensor CAPEX but reduces unnecessary interventions by 25-40%."},{category:"Maintenance",q:"How does the spares strategy work?",a:"The Maintenance module uses ABC Pareto analysis: A-items (top 20% by value, ~80% of total cost) get tight inventory control and safety stock. B-items use standard reorder points. C-items use simplified min/max levels. Lead time, criticality, and holding cost drive the optimal stocking strategy."},{category:"Maintenance",q:"What is DCIM integration?",a:"Data Center Infrastructure Management (DCIM) software provides real-time monitoring of power, cooling, and environmental conditions. In the Maintenance module, DCIM integration enables predictive maintenance by feeding sensor data into failure prediction models, reducing unplanned downtime by 30-50%."},{category:"Compliance",q:"What regulatory requirements are covered?",a:"DC MOC auto-generates compliance checklists per country across 6 categories: Fire Safety (NFPA, local fire codes), Electrical (IEC 62271, IEEE), Environmental (ISO 14001, local EPA), Building (structural codes), Data Protection (GDPR, local privacy laws), and Telecom (licensing requirements). Each item includes authority, standard reference, frequency, and estimated cost."},{category:"Compliance",q:"What certification standards are modeled?",a:"The Compliance module covers: Uptime Institute Tier Certification (design/constructed facility/operations), ISO 27001 (information security), SOC 2 Type II (service organization controls), PCI DSS (payment data), LEED/BREEAM (green building), and country-specific certifications. Initial and annual renewal costs are estimated for each."},{category:"Investment",q:"What is the IRR hurdle rate?",a:"The minimum acceptable Internal Rate of Return for a data center investment to proceed. Typical hurdle rates: 12-15% for core markets, 18-25% for emerging markets. DC MOC flags projects below the hurdle rate as potentially unviable in the Investment module."},{category:"Investment",q:"How is cap rate used in valuation?",a:"Capitalization Rate = Net Operating Income / Property Value. For data centers, cap rates typically range 5-8% depending on market, tenant quality, and lease term. Lower cap rates indicate higher valuations. Used in the Investment module for asset valuation and exit pricing."},{category:"Investment",q:"What is an equity waterfall?",a:"A distribution hierarchy defining how cash flows are split between investors: first, preferred return (8-10% annually) to equity holders, then return of capital, then a promote/carry split (typically 80/20 or 70/30) on remaining profits. DC MOC models the full waterfall including GP promote calculations."},{category:"Portfolio",q:"How does multi-site comparison work?",a:"The Portfolio module lets you configure up to 6 data center sites with different countries, tiers, IT loads, and cooling types. It generates side-by-side comparisons of CAPEX, OPEX, staffing cost, PUE, and risk scores  plus a radar chart for visual benchmarking across sites."},{category:"Portfolio",q:"What is portfolio diversification scoring?",a:"A metric measuring geographic and operational diversity across your data center portfolio. Higher diversification reduces concentration risk  spreading sites across multiple countries/regions protects against localized disruptions (natural disasters, political instability, grid failures)."}],MK=["General","Financial","Infrastructure","Staffing","Analytics","Capacity","Risk","ESG & Carbon","Maintenance","Compliance","Investment","Portfolio"];function MH(){let[e,t]=(0,z.useState)(null),[a,r]=(0,z.useState)("all"),n="all"===a?MU:MU.filter(e=>e.category===a);return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl backdrop-blur-sm shadow-sm dark:shadow-none",children:[(0,F.jsxs)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(MB.HelpCircle,{className:"w-5 h-5 text-cyan-500 dark:text-cyan-400"}),"Frequently Asked Questions"]}),(0,F.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:"Key terms and concepts used across DC MOC modules"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,F.jsxs)("button",{onClick:()=>r("all"),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-lg border transition-all","all"===a?"bg-cyan-600 border-cyan-600 text-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-cyan-500/50"),children:["All (",MU.length,")"]}),MK.map(e=>{let t=MU.filter(t=>t.category===e).length;return(0,F.jsxs)("button",{onClick:()=>r(e),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-lg border transition-all",a===e?"bg-cyan-600 border-cyan-600 text-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-cyan-500/50"),children:[e," (",t,")"]},e)})]}),(0,F.jsx)("div",{className:"space-y-2",children:n.map((a,r)=>{let n=MU.indexOf(a),s=e===n;return(0,F.jsxs)("div",{className:(0,eh.default)("border rounded-xl overflow-hidden transition-all",s?"bg-white dark:bg-slate-800/80 border-cyan-500/30 dark:border-cyan-700/50 shadow-sm":"bg-white dark:bg-slate-900/50 border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"),children:[(0,F.jsxs)("button",{onClick:()=>t(s?null:n),className:"w-full flex items-center gap-3 px-5 py-4 text-left",children:[s?(0,F.jsx)(ef,{className:"w-4 h-4 text-cyan-500 shrink-0"}):(0,F.jsx)(Nv,{className:"w-4 h-4 text-slate-400 shrink-0"}),(0,F.jsx)("span",{className:(0,eh.default)("text-sm font-semibold flex-1",s?"text-cyan-700 dark:text-cyan-400":"text-slate-800 dark:text-slate-200"),children:a.q}),(0,F.jsx)("span",{className:"text-[10px] font-medium px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-500 shrink-0",children:a.category})]}),s&&(0,F.jsx)("div",{className:"px-5 pb-4 pl-12",children:(0,F.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:a.a})})]},n)})})]})}let MV=(0,X.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),MG=["#06b6d4","#8b5cf6","#f59e0b","#10b981","#ec4899"],MY=()=>{let{selectedCountry:t,inputs:a,actions:r}=(0,$.useSimulationStore)(),[n,s]=(0,z.useState)(a.capacityPhases),[i,l]=(0,z.useState)("overview"),[o,c]=(0,z.useState)(!1),d=(0,z.useMemo)(()=>t&&0!==n.length?wJ({phases:n,country:t,coolingType:a.coolingType,tierLevel:a.tierLevel,shiftModel:a.shiftModel,maintenanceModel:a.maintenanceModel,hybridRatio:a.hybridRatio}):null,[t,n,a]),u=(0,z.useCallback)(e=>{s([...wZ[e]])},[]),m=(0,z.useCallback)(()=>{let e=n[n.length-1],t=e?e.startMonth+e.buildMonths+6:0;s([...n,{id:`p${n.length+1}`,label:`Phase ${n.length+1}`,itLoadKw:5e3,startMonth:t,buildMonths:14,occupancyRamp:[.3,.6,.85,.95]}])},[n]),x=(0,z.useCallback)(e=>{s(n.filter((t,a)=>a!==e))},[n]),h=(0,z.useCallback)((e,t,a)=>{let r=[...n];r[e][t]=a,s(r)},[n]);if(!t)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to configure capacity plan."});let p=d?Array.from({length:Math.ceil(d.totalMonths/3)},(e,t)=>{let a=3*t;return{month:a,itLoadKw:d.cumulativeItLoad[a]??0,capex:d.cumulativeCapex[a]??0}}):[],f=[{id:"overview",label:"Overview",icon:er},{id:"details",label:"Phase Details",icon:w1.FileText},{id:"assumptions",label:"Assumptions",icon:MV}];return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(w7.Layers,{className:"w-6 h-6 text-cyan-500"}),"Capacity Planning"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[t.name,"  ",n.length," Phases  Tier ",a.tierLevel]})]}),(0,F.jsxs)("div",{className:"flex gap-2 items-center",children:[["small","medium","large"].map(e=>(0,F.jsx)("button",{onClick:()=>u(e),className:"px-3 py-1.5 text-xs font-medium bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-cyan-100 dark:hover:bg-cyan-900/30 transition-colors",children:e.charAt(0).toUpperCase()+e.slice(1)},e)),d&&(0,F.jsx)(eI,{isGenerating:o,onExport:async()=>{c(!0);try{let{generateCapacityPlanPDF:r}=await e.A(28094);await r(t,{capPlan:d,phases:n,itLoadKw:a.itLoad})}catch(e){console.error("Capacity PDF error:",e)}finally{c(!1)}},label:"PDF",className:"px-2 py-1 text-[10px]"})]})]}),d&&(0,F.jsx)(t1,{className:"bg-gradient-to-r from-cyan-50 to-indigo-50 dark:from-cyan-950/30 dark:to-indigo-950/30 border-cyan-200 dark:border-cyan-800/50",children:(0,F.jsx)(t3,{className:"pt-5 pb-4",children:(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:d.narrative})})}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,F.jsx)(t1,{className:"lg:col-span-1 bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Phase Configuration ",(0,F.jsx)(ei,{content:"Define build phases for your data center expansion. Each phase specifies IT load capacity, construction start month, and build duration."})]}),(0,F.jsx)("button",{onClick:m,className:"p-1.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors",children:(0,F.jsx)(MO,{className:"w-4 h-4"})})]}),(0,F.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:n.map((e,t)=>(0,F.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 dark:bg-slate-900/30 border border-slate-200 dark:border-slate-700",style:{borderLeftColor:MG[t%MG.length],borderLeftWidth:3},children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,F.jsx)("input",{className:"text-sm font-semibold bg-transparent text-slate-900 dark:text-white border-none focus:outline-none w-24",value:e.label,onChange:e=>h(t,"label",e.target.value)}),n.length>1&&(0,F.jsx)("button",{onClick:()=>x(t),className:"p-1 text-red-400 hover:text-red-500 transition-colors",children:(0,F.jsx)(MA.Trash2,{className:"w-3.5 h-3.5"})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("label",{className:"text-slate-500 mb-0.5 flex items-center gap-1",children:["IT Load (kW) ",(0,F.jsx)(ei,{content:"IT power capacity in kilowatts for this phase. Determines rack density, cooling requirements, and staffing levels."})]}),(0,F.jsx)("input",{type:"number",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded text-slate-900 dark:text-white text-xs",value:e.itLoadKw,onChange:e=>h(t,"itLoadKw",Math.max(100,Number(e.target.value)))})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("label",{className:"text-slate-500 mb-0.5 flex items-center gap-1",children:["Start (Mo) ",(0,F.jsx)(ei,{content:"Construction start month (from project inception). Phase 1 typically starts at month 0; subsequent phases are staggered."})]}),(0,F.jsx)("input",{type:"number",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded text-slate-900 dark:text-white text-xs",value:e.startMonth,onChange:e=>h(t,"startMonth",Math.max(0,Number(e.target.value)))})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("label",{className:"text-slate-500 mb-0.5 flex items-center gap-1",children:["Build (Mo) ",(0,F.jsx)(ei,{content:"Construction duration in months. Typical ranges: 12-18 months for shell+core, 6-9 months for fit-out."})]}),(0,F.jsx)("input",{type:"number",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded text-slate-900 dark:text-white text-xs",value:e.buildMonths,onChange:e=>h(t,"buildMonths",Math.max(3,Number(e.target.value)))})]})]})]},e.id))})]})}),(0,F.jsx)("div",{className:"lg:col-span-2 space-y-4",children:d&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-cyan-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Total Capacity"}),(0,F.jsx)(ei,{content:"Total IT power deployed across all build phases."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:ex(d.totalItLoadKw)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Total CAPEX"}),(0,F.jsx)(ei,{content:"Cumulative capital expenditure across all capacity build phases including construction, MEP, and equipment."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(d.totalCapex)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Avg $/kW"}),(0,F.jsx)(ei,{content:"Cost per kilowatt trajectory across build phases. Should decrease with economies of scale."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["$",el(d.totalCapex/d.totalItLoadKw)]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Y.Users,{className:"w-4 h-4 text-purple-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Scalability"}),(0,F.jsx)(ei,{content:"Composite score (0-100) based on CAPEX efficiency, phase spacing, and number of phases."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d.scalabilityScore})]})})]}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:["Build Timeline (Gantt) ",(0,F.jsx)(ei,{content:"Gantt chart visualization showing construction timelines for each phase. Overlapping bars indicate concurrent build activities."})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[d.phases.map((e,t)=>{let a=d.totalMonths,r=e.startMonth/a*100,n=e.buildMonths/a*100,s=Math.min(48/a*100,100-r-n);return(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)("span",{className:"text-xs text-slate-500 w-20 shrink-0",children:e.label}),(0,F.jsxs)("div",{className:"flex-1 h-6 bg-slate-100 dark:bg-slate-900/30 rounded relative",children:[(0,F.jsx)("div",{className:"absolute h-full rounded-l opacity-60",style:{left:`${r}%`,width:`${n}%`,backgroundColor:MG[t%MG.length]}}),(0,F.jsx)("div",{className:"absolute h-full rounded-r",style:{left:`${r+n}%`,width:`${s}%`,backgroundColor:MG[t%MG.length]}})]}),(0,F.jsxs)("span",{className:"text-[10px] text-slate-500 w-16 shrink-0 text-right",children:["Mo ",e.startMonth,"-",e.operationalMonth]})]},e.id)}),(0,F.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,F.jsx)("span",{className:"w-20 shrink-0"}),(0,F.jsx)("div",{className:"flex-1 flex justify-between text-[9px] text-slate-400",children:[0,Math.round(.25*d.totalMonths),Math.round(.5*d.totalMonths),Math.round(.75*d.totalMonths),d.totalMonths].map(e=>(0,F.jsxs)("span",{children:["Mo ",e]},e))}),(0,F.jsx)("span",{className:"w-16 shrink-0"})]})]}),(0,F.jsxs)("div",{className:"flex gap-4 mt-3 text-[10px] text-slate-400",children:[(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-3 h-2 rounded-sm bg-cyan-500 opacity-60"})," Build"]}),(0,F.jsxs)("span",{className:"flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-3 h-2 rounded-sm bg-cyan-500"})," Operational"]})]})]})})]})})]}),d&&(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800/50 rounded-lg p-1",children:f.map(e=>(0,F.jsxs)("button",{onClick:()=>l(e.id),className:`flex items-center gap-1.5 px-4 py-2 text-xs font-medium rounded-md transition-colors ${i===e.id?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[(0,F.jsx)(e.icon,{className:"w-3.5 h-3.5"}),e.label]},e.id))}),d&&"overview"===i&&(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:["Cumulative Capacity & Investment ",(0,F.jsx)(ei,{content:"Stacked area chart showing how total IT capacity and cumulative CAPEX investment grow over the project timeline."})]}),(0,F.jsx)(iB,{width:"100%",height:280,children:(0,F.jsxs)(f5,{data:p,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"month",tick:{fontSize:11,fill:"#94a3b8"},label:{value:"Month",position:"insideBottom",offset:-5,fill:"#64748b",fontSize:11}}),(0,F.jsx)(km,{yAxisId:"left",tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>ex(e)}),(0,F.jsx)(km,{yAxisId:"right",orientation:"right",tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>["itLoadKw"===t?ex(e):eo(e),"itLoadKw"===t?"IT Capacity":"CAPEX"]}),(0,F.jsx)(Ce,{yAxisId:"left",type:"stepAfter",dataKey:"itLoadKw",fill:"#06b6d4",fillOpacity:.2,stroke:"#06b6d4",strokeWidth:2}),(0,F.jsx)(jT,{yAxisId:"right",type:"monotone",dataKey:"capex",stroke:"#f59e0b",strokeWidth:2,dot:!1})]})})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:["Capacity vs Demand Utilization ",(0,F.jsx)(ei,{content:"Shows how deployed capacity compares to projected demand over time. The gap between capacity and demand represents available headroom."})]}),(0,F.jsx)("p",{className:"text-[11px] text-slate-400 mb-4",children:"Deployed capacity versus projected demand based on occupancy ramp assumptions"}),(0,F.jsx)(iB,{width:"100%",height:280,children:(0,F.jsxs)(f5,{data:d.utilizationCurve,children:[(0,F.jsx)("defs",{children:(0,F.jsxs)("linearGradient",{id:"capGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.2}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"month",tick:{fontSize:11,fill:"#94a3b8"},label:{value:"Month",position:"insideBottom",offset:-5,fill:"#64748b",fontSize:11}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>ex(e)}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>[ex(e),"capacityKw"===t?"Capacity":"Demand"]}),(0,F.jsx)(Ce,{type:"stepAfter",dataKey:"capacityKw",fill:"url(#capGrad)",stroke:"#06b6d4",strokeWidth:2}),(0,F.jsx)(jT,{type:"monotone",dataKey:"demandKw",stroke:"#10b981",strokeWidth:2,strokeDasharray:"5 3",dot:!1})]})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-cyan-500 rounded"}),(0,F.jsx)("span",{children:"Deployed Capacity"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-emerald-500 rounded border-dashed"}),(0,F.jsx)("span",{children:"Projected Demand"})]})]})]})}),(0,F.jsx)(t1,{className:"lg:col-span-2 bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:["Phase Comparison ",(0,F.jsx)(ei,{content:"Side-by-side comparison of all phases showing IT load, CAPEX, cost per kW, staffing, PUE, revenue, and ROI for each phase."})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Phase ",(0,F.jsx)(ei,{content:"Build phase identifier. Each phase represents a discrete capacity expansion."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["IT Load ",(0,F.jsx)(ei,{content:"IT power capacity in kilowatts provisioned for this phase."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["CAPEX ",(0,F.jsx)(ei,{content:"Capital expenditure for this phase including construction, MEP, and equipment."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["$/kW ",(0,F.jsx)(ei,{content:"Cost per kilowatt for this phase. Should decrease in later phases due to economies of scale."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["FTE ",(0,F.jsx)(ei,{content:"Full-time equivalent headcount required to operate this phase at steady state."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["PUE ",(0,F.jsx)(ei,{content:"Power Usage Effectiveness for this phase. Lower is better; 1.0 = perfect efficiency."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Revenue/yr ",(0,F.jsx)(ei,{content:"Estimated annual revenue at full occupancy based on regional colocation rates."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["ROI ",(0,F.jsx)(ei,{content:"Return on investment period in years  time to recoup CAPEX from operating margin."})]})}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Risk ",(0,F.jsx)(ei,{content:"Composite risk score (0-100) factoring supply chain, permitting, demand uncertainty, and construction complexity."})]})})]})}),(0,F.jsxs)("tbody",{children:[d.phases.map((e,t)=>{let a=d.phaseDetails[t];return(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("td",{className:"py-2 px-2 font-medium text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:MG[t%MG.length]}}),e.label]}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:ex(e.itLoadKw)}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:eo(e.capex)}),(0,F.jsxs)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:["$",el(e.capexPerKw)]}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:e.fte}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:e.pue}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-emerald-600 dark:text-emerald-400",children:a?eo(a.revenueEstimate):"-"}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:a?`${a.roiYears}yr`:"-"}),(0,F.jsx)("td",{className:"text-right py-2 px-2",children:a&&(0,F.jsx)("span",{className:`inline-block px-1.5 py-0.5 rounded text-[10px] font-medium ${a.riskScore>=60?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":a.riskScore>=35?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400"}`,children:a.riskScore})})]},e.id)}),(0,F.jsxs)("tr",{className:"font-bold",children:[(0,F.jsx)("td",{className:"py-2 px-2 text-slate-900 dark:text-white",children:"Total"}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:ex(d.totalItLoadKw)}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:eo(d.totalCapex)}),(0,F.jsxs)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:["$",el(d.totalCapex/d.totalItLoadKw)]}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:d.phases[d.phases.length-1]?.fte??0}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:d.pueEvolution[d.pueEvolution.length-1]?.pue??"-"}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-emerald-600 dark:text-emerald-400",children:eo(d.phaseDetails.reduce((e,t)=>e+t.revenueEstimate,0))}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:"-"}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-cyan-600 dark:text-cyan-400",children:"-"})]})]})]})}),(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mt-6 mb-3",children:["Staffing Ramp ",(0,F.jsx)(ei,{content:"Projected headcount growth across phases, showing when new staff must be hired to support each capacity expansion."})]}),(0,F.jsx)(iB,{width:"100%",height:150,children:(0,F.jsxs)(NR,{data:d.staffingRamp,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"month",tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8}}),(0,F.jsx)(Ce,{type:"stepAfter",dataKey:"fte",fill:"#8b5cf6",fillOpacity:.2,stroke:"#8b5cf6",strokeWidth:2})]})})]})})]}),d&&"details"===i&&(0,F.jsx)("div",{className:"space-y-4",children:d.phaseDetails.map((e,t)=>(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",style:{borderLeftColor:MG[t%MG.length],borderLeftWidth:4},children:(0,F.jsxs)(t3,{className:"pt-5",children:[(0,F.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:e.label}),(0,F.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:e.description})]}),(0,F.jsxs)("div",{className:"flex items-center gap-3 shrink-0 ml-4",children:[(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 uppercase",children:"Revenue/yr"}),(0,F.jsx)("div",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:eo(e.revenueEstimate)})]}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 uppercase",children:"ROI"}),(0,F.jsxs)("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[e.roiYears,"yr"]})]}),(0,F.jsxs)("div",{className:"text-center",children:[(0,F.jsx)("div",{className:"text-[10px] text-slate-400 uppercase",children:"Risk"}),(0,F.jsxs)("div",{className:`text-sm font-bold ${e.riskScore>=60?"text-red-500":e.riskScore>=35?"text-amber-500":"text-emerald-500"}`,children:[e.riskScore,"/100"]})]})]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:["Infrastructure Scope ",(0,F.jsx)(ei,{content:"Summary of physical infrastructure components required across all phases  generators, UPS units, cooling systems, PDUs."})]}),(0,F.jsx)("ul",{className:"space-y-1",children:e.infrastructureScope.map((e,t)=>(0,F.jsxs)("li",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-1 h-1 rounded-full bg-cyan-500 shrink-0"}),e]},t))})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:["Risk Factors ",(0,F.jsx)(ei,{content:"Identified risks for the capacity plan including supply chain delays, permitting issues, and demand uncertainty."})]}),(0,F.jsx)("ul",{className:"space-y-1",children:e.riskFactors.map((e,t)=>(0,F.jsxs)("li",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center gap-1.5",children:[(0,F.jsx)(eM,{className:"w-3 h-3 text-amber-500 shrink-0"}),e]},t))})]})]})]})},e.id))}),d&&"assumptions"===i&&(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:["Key Assumptions ",(0,F.jsx)(ei,{content:"Baseline assumptions used in capacity calculations including PUE targets, utilization rates, and cost escalation factors."})]}),(0,F.jsx)("p",{className:"text-[11px] text-slate-400 mb-4",children:"These assumptions drive the capacity plan calculations. Adjust phase configuration or global inputs to see how changes propagate."}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 px-3 text-slate-500 w-32",children:"Category"}),(0,F.jsx)("th",{className:"text-left py-2 px-3 text-slate-500",children:"Assumption"}),(0,F.jsx)("th",{className:"text-left py-2 px-3 text-slate-500 w-60",children:"Value"})]})}),(0,F.jsx)("tbody",{children:d.assumptions.map((e,t)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"py-2 px-3",children:(0,F.jsx)("span",{className:`inline-block px-2 py-0.5 rounded text-[10px] font-medium ${"CAPEX"===e.category?"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400":"Operations"===e.category?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400"}`,children:e.category})}),(0,F.jsx)("td",{className:"py-2 px-3 text-slate-700 dark:text-slate-300",children:e.assumption}),(0,F.jsx)("td",{className:"py-2 px-3 text-slate-900 dark:text-white font-medium",children:e.value})]},t))})]})})]})})]})},MX=()=>{let{selectedCountry:t,inputs:a}=(0,$.useSimulationStore)(),[r,n]=(0,z.useState)(!1),{capacityResult:s,phaseFinancials:i,blendedIrr:l,blendedNpv:o,blendedPayback:c,totalInvestment:d,profitabilityIndex:u,cashflowData:m,adjustments:x,scenarios:h,drawSchedule:p,totalIDC:f,constructionMonths:b,narrative:g}=(0,z.useMemo)(()=>{if(!t)return{capacityResult:null,phaseFinancials:[],blendedIrr:0,blendedNpv:0,blendedPayback:0,totalInvestment:0,profitabilityIndex:0,cashflowData:[],adjustments:{tax:0,disaster:0,grid:0,talent:0},scenarios:[],drawSchedule:[],totalIDC:0,constructionMonths:0,narrative:""};let e=wJ({phases:a.capacityPhases,country:t,coolingType:a.coolingType,tierLevel:a.tierLevel,shiftModel:a.shiftModel,maintenanceModel:a.maintenanceModel,hybridRatio:a.hybridRatio}),r=wV({country:t,totalCapex:e.totalCapex,annualRevenue:150*e.totalItLoadKw*12,annualOpex:50*e.totalItLoadKw*12,projectLifeYears:20,discountRate:.1,equipmentCapexShare:.65}),n=wG({country:t,totalCapex:e.totalCapex,itLoadKw:e.totalItLoadKw,annualRevenue:150*e.totalItLoadKw*12}),s=wY({country:t,itLoadKw:e.totalItLoadKw,tierLevel:a.tierLevel,coolingType:a.coolingType}),i=wX({country:t,totalFTE:e.phases[e.phases.length-1]?.fte??10,annualStaffCost:(e.phases[e.phases.length-1]?.fte??10)*36e3}),l=t.taxIncentives?.effectiveTaxRate??t.economy.taxRate,o=.1+(n.compositeScore>50?.02:.01*(n.compositeScore>30)),c=s.gridRiskAdjustedOpex,d=n.annualInsuranceCost,u=(i.adjustedSalaryMultiplier-1)*(e.phases[e.phases.length-1]?.fte??10)*36e3,m=[];for(let r=0;r<e.phases.length;r++){let s=e.phases[r],i=a.capacityPhases[r],x=i?.occupancyRamp??[.3,.6,.85,.95],h=s.capex+n.structuralCostAdder*(s.itLoadKw/e.totalItLoadKw);s.itLoadKw;let p=wI({totalCapex:h,annualOpex:50*s.itLoadKw*12+(c+d+u)*(s.itLoadKw/e.totalItLoadKw),revenuePerKwMonth:150,itLoadKw:s.itLoadKw,discountRate:o,projectLifeYears:20,escalationRate:.03,opexEscalation:t.economy.inflationRate,occupancyRamp:x.concat(Array(16).fill(.95)),taxRate:l,depreciationYears:20});m.push({phaseLabel:s.label,capex:h,irr:p.irr,npv:p.npv,payback:p.paybackPeriodYears,goNoGo:p.irr>=12})}let x=m.reduce((e,t)=>e+t.capex,0),h=m.reduce((e,t)=>e+t.irr*(t.capex/x),0),p=m.reduce((e,t)=>e+t.npv,0),f=m.reduce((e,t)=>e+t.payback*(t.capex/x),0),b=p>0?(p+x)/x:0,g=wI({totalCapex:x,annualOpex:50*e.totalItLoadKw*12+c+d+u,revenuePerKwMonth:150,itLoadKw:e.totalItLoadKw,discountRate:o,projectLifeYears:20,escalationRate:.03,opexEscalation:t.economy.inflationRate,occupancyRamp:a.occupancyRamp.concat(Array(10).fill(.95)),taxRate:l,depreciationYears:20}).cashflows.map(e=>({year:e.year,revenue:Math.round(e.revenue/1e3),opex:Math.round(-e.opex/1e3),cashflow:Math.round(e.freeCashflow/1e3),cumulative:Math.round(e.cumulativeCashflow/1e3)})),y=["conservative","base","aggressive"].map(r=>{let n="conservative"===r?1:"aggressive"===r?-1:0,s="conservative"===r?1.1:"aggressive"===r?.95:1,i=wI({totalCapex:x*s,annualOpex:50*e.totalItLoadKw*12+c+d+u,revenuePerKwMonth:150*("conservative"===r?.85:"aggressive"===r?1.15:1),itLoadKw:e.totalItLoadKw,discountRate:o,projectLifeYears:20,escalationRate:.03,opexEscalation:t.economy.inflationRate,occupancyRamp:a.occupancyRamp.map((e,t)=>Math.max(0,Math.min(.95,t+n<0?.15:e))).concat(Array(10).fill(.95)),taxRate:l,depreciationYears:20});return{scenario:r,irr:i.irr,npv:i.npv,payback:i.paybackPeriodYears,capex:Math.round(x*s)}}),v=e.phases.reduce((e,t)=>Math.max(e,t.startMonth+t.buildMonths),0),j=e.phases.map(e=>{let t=e.capex/e.buildMonths,a=.5*e.capex*(.05*e.buildMonths/12);return{label:e.label,capex:e.capex,drawMonths:e.buildMonths,monthlyDraw:Math.round(t),idc:Math.round(a)}}),k=j.reduce((e,t)=>e+t.idc,0),w=m.filter(e=>e.goNoGo).length,N=`This ${m.length}-phase investment program requires ${eo(x)} in total capital across ${t.name}. After accounting for tax incentives (${eo(r.totalIncentiveValue)}), disaster risk premiums, grid reliability costs, and talent market adjustments, the blended IRR is ${h.toFixed(1)}% against a 12% hurdle rate. ${w===m.length?"All phases pass the GO threshold":`${w} of ${m.length} phases meet the hurdle`}. Interest during construction adds ${eo(k)} to the effective cost base over ${v} months of build activity. The profitability index of ${b.toFixed(2)}x indicates ${b>1.5?"strong value creation":b>1?"positive but modest returns":"value destruction"}.`;return{capacityResult:e,phaseFinancials:m,blendedIrr:Math.round(10*h)/10,blendedNpv:Math.round(p),blendedPayback:Math.round(10*f)/10,totalInvestment:Math.round(x),profitabilityIndex:Math.round(100*b)/100,cashflowData:g,adjustments:{tax:Math.round(r.totalIncentiveValue),disaster:Math.round(n.totalRiskAdjustedCost),grid:Math.round(c),talent:Math.round(u)},scenarios:y,drawSchedule:j,totalIDC:k,constructionMonths:v,narrative:N}},[t,a]);return t&&s?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(Nf.Calculator,{className:"w-6 h-6 text-blue-500"}),"Phased Financial IRR/ROI"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[t.name,"  ",s.phases.length," Phases  Tax-adjusted  Risk-adjusted discount rate"]})]}),(0,F.jsx)(eI,{isGenerating:r,onExport:async()=>{n(!0);try{let{generatePhasedFinancialPDF:a}=await e.A(28094);await a(t,{phaseResults:i.map(e=>({label:e.phaseLabel,capex:e.capex,irr:e.irr,npv:e.npv,payback:e.payback})),blendedIRR:l,totalNPV:o,weightedPayback:c,totalInvestment:d,profitabilityIndex:u,scenarios:h,idcData:p,totalIDC:f,blendedCashflows:m,narrative:g})}catch(e){console.error("Phased Financial PDF error:",e)}finally{n(!1)}},label:"PDF",className:"px-2 py-1 text-[10px]"})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Cv,{className:"w-4 h-4 text-cyan-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Blended IRR"}),(0,F.jsx)(ei,{content:"Investment-weighted internal rate of return across all phases, adjusted for tax incentives and risk."})]}),(0,F.jsxs)("div",{className:`text-2xl font-bold ${l>=12?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[l.toFixed(1),"%"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Total NPV"})]}),(0,F.jsx)("div",{className:`text-2xl font-bold ${o>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eo(o)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Cl.Target,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Payback"})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[c," yr"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-blue-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Investment"})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(d)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-purple-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"PI"}),(0,F.jsx)(ei,{content:"Profitability Index: (NPV + Investment) / Investment. Above 1.0 = value-creating."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[u,"x"]})]})})]}),g&&(0,F.jsx)(t1,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border-blue-200 dark:border-blue-800/50",children:(0,F.jsx)(t3,{className:"pt-5 pb-4",children:(0,F.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:g})})}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Investment Decision Matrix (12% Hurdle)"}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 px-2 text-slate-500",children:"Phase"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"CAPEX"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"IRR"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"NPV"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"Payback"}),(0,F.jsx)("th",{className:"text-center py-2 px-2 text-slate-500",children:"Decision"})]})}),(0,F.jsx)("tbody",{children:i.map((e,t)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"py-2 px-2 font-medium text-slate-900 dark:text-white",children:e.phaseLabel}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:eo(e.capex)}),(0,F.jsxs)("td",{className:`text-right py-2 px-2 font-semibold ${e.irr>=12?"text-emerald-500":"text-red-500"}`,children:[e.irr.toFixed(1),"%"]}),(0,F.jsx)("td",{className:`text-right py-2 px-2 ${e.npv>=0?"text-emerald-500":"text-red-500"}`,children:eo(e.npv)}),(0,F.jsxs)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:[e.payback," yr"]}),(0,F.jsx)("td",{className:"text-center py-2 px-2",children:e.goNoGo?(0,F.jsxs)("span",{className:"inline-flex items-center gap-1 text-emerald-500 font-semibold",children:[(0,F.jsx)(eH,{className:"w-3.5 h-3.5"})," GO"]}):(0,F.jsxs)("span",{className:"inline-flex items-center gap-1 text-red-500 font-semibold",children:[(0,F.jsx)(ea,{className:"w-3.5 h-3.5"})," NO-GO"]})})]},t))})]})}),(0,F.jsxs)("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-3",children:"Cross-Module Adjustments Applied"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax Incentive Value"}),(0,F.jsxs)("span",{className:"font-medium text-emerald-500",children:["+",eo(x.tax)]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Disaster Risk Cost/Yr"}),(0,F.jsxs)("span",{className:"font-medium text-red-500",children:["-",eo(x.disaster)]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Grid Penalty OPEX/Yr"}),(0,F.jsxs)("span",{className:"font-medium text-amber-500",children:["-",eo(x.grid)]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Talent Premium/Yr"}),(0,F.jsxs)("span",{className:"font-medium text-purple-500",children:["-",eo(x.talent)]})]})]})]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Blended Cashflow ($K)"}),(0,F.jsx)(iB,{width:"100%",height:350,children:(0,F.jsxs)(f5,{data:m,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"year",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>`$${e}K`}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>[`$${el(e)}K`,"cumulative"===t?"Cumulative":"cashflow"===t?"Free Cashflow":t]}),(0,F.jsx)(Cb,{y:0,stroke:"#64748b",strokeDasharray:"3 3"}),(0,F.jsx)(v1,{dataKey:"cashflow",radius:[4,4,0,0],children:m.map((e,t)=>(0,F.jsx)(f9,{fill:e.cashflow>=0?"#10b981":"#ef4444",opacity:.6},t))}),(0,F.jsx)(jT,{type:"monotone",dataKey:"cumulative",stroke:"#06b6d4",strokeWidth:2,dot:!1})]})})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Scenario Comparison"}),(0,F.jsx)("p",{className:"text-[11px] text-slate-400 mb-4",children:"Conservative (-15% rev, +10% CAPEX), Base, Aggressive (+15% rev, -5% CAPEX)"}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 px-2 text-slate-500",children:"Scenario"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"CAPEX"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"IRR"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"NPV"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"Payback"})]})}),(0,F.jsx)("tbody",{children:h.map((e,t)=>(0,F.jsxs)("tr",{className:`border-b border-slate-100 dark:border-slate-800 ${"base"===e.scenario?"bg-cyan-50 dark:bg-cyan-950/20":""}`,children:[(0,F.jsxs)("td",{className:"py-2 px-2 font-medium text-slate-900 dark:text-white capitalize flex items-center gap-1.5",children:["conservative"===e.scenario&&(0,F.jsx)(eM,{className:"w-3 h-3 text-amber-500"}),"base"===e.scenario&&(0,F.jsx)(Cl.Target,{className:"w-3 h-3 text-cyan-500"}),"aggressive"===e.scenario&&(0,F.jsx)(ee.TrendingUp,{className:"w-3 h-3 text-emerald-500"}),e.scenario]}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:eo(e.capex)}),(0,F.jsxs)("td",{className:`text-right py-2 px-2 font-semibold ${e.irr>=12?"text-emerald-500":"text-red-500"}`,children:[e.irr.toFixed(1),"%"]}),(0,F.jsx)("td",{className:`text-right py-2 px-2 ${e.npv>=0?"text-emerald-500":"text-red-500"}`,children:eo(e.npv)}),(0,F.jsxs)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:[e.payback," yr"]})]},t))})]})})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Construction Financing & IDC"}),(0,F.jsxs)("p",{className:"text-[11px] text-slate-400 mb-4",children:["Interest during construction at 5% construction loan rate over ",b," months"]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 px-2 text-slate-500",children:"Phase"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"CAPEX"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"Draw Period"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"Monthly Draw"}),(0,F.jsx)("th",{className:"text-right py-2 px-2 text-slate-500",children:"IDC"})]})}),(0,F.jsxs)("tbody",{children:[p.map((e,t)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"py-2 px-2 font-medium text-slate-900 dark:text-white",children:e.label}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:eo(e.capex)}),(0,F.jsxs)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:[e.drawMonths," mo"]}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-700 dark:text-slate-300",children:eo(e.monthlyDraw)}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-amber-600 dark:text-amber-400 font-medium",children:eo(e.idc)})]},t)),(0,F.jsxs)("tr",{className:"font-bold border-t-2 border-slate-200 dark:border-slate-600",children:[(0,F.jsx)("td",{className:"py-2 px-2 text-slate-900 dark:text-white",children:"Total"}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-900 dark:text-white",children:eo(p.reduce((e,t)=>e+t.capex,0))}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-500",children:""}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-slate-500",children:""}),(0,F.jsx)("td",{className:"text-right py-2 px-2 text-amber-600 dark:text-amber-400",children:eo(f)})]})]})]})}),(0,F.jsx)("div",{className:"mt-3 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-800/40",children:(0,F.jsxs)("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:["Effective CAPEX (incl. IDC): ",(0,F.jsx)("span",{className:"font-bold",children:eo(d+f)}),(0,F.jsxs)("span",{className:"text-slate-500 ml-2",children:["(+",(f/d*100).toFixed(1),"% IDC premium)"]})]})})]})})]})]}):(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country and configure capacity phases to view phased financial analysis."})},MZ=(0,X.default)("gift",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M20 11v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8",key:"1sqzm4"}],["path",{d:"M7.5 7a1 1 0 0 1 0-5A4.8 8 0 0 1 12 7a4.8 8 0 0 1 4.5-5 1 1 0 0 1 0 5",key:"kc0143"}],["rect",{x:"3",y:"7",width:"18",height:"4",rx:"1",key:"1hberx"}]]),MJ=()=>{let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),a=(0,ew.useCapexStore)(),r=(0,z.useMemo)(()=>{if(!e)return null;let r=a.inputs.itLoad||t.itLoad;return wV({country:e,totalCapex:a.results?.total||1e4*r,annualRevenue:150*r*12,annualOpex:50*r*12,projectLifeYears:20,discountRate:.1,equipmentCapexShare:.65})},[e,t,a]),n=(0,z.useMemo)(()=>Object.values(wQ.COUNTRIES).map(e=>{let t=wV({country:e,totalCapex:1e7,annualRevenue:3e6,annualOpex:12e5,projectLifeYears:20,discountRate:.1,equipmentCapexShare:.65});return{country:e.name,code:e.id,value:t.totalIncentiveValue,holiday:e.taxIncentives?.taxHolidayYears??0}}).sort((e,t)=>t.value-e.value),[]);if(!r||!e)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view tax incentive analysis."});let s=r.effectiveTaxTimeline.map((t,a)=>({year:a+1,effectiveRate:Math.round(1e3*t)/10,standardRate:Math.round(1e3*e.economy.taxRate)/10,savings:r.yearlyTaxSavings[a]}));return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(Ck.Receipt,{className:"w-6 h-6 text-emerald-500"}),"Tax & Incentive Analysis"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[e.name,"  Standard Rate: ",(100*e.economy.taxRate).toFixed(1),"%  Holiday: ",e.taxIncentives?.taxHolidayYears??0," years"]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Total Savings"}),(0,F.jsx)(ei,{content:"Net present value of all tax incentives over the project lifetime."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.totalIncentiveValue)}),(0,F.jsx)("div",{className:"text-xs text-emerald-500 mt-1",children:"NPV of incentives"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Q,{className:"w-4 h-4 text-blue-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Effective Rate Y1"}),(0,F.jsx)(ei,{content:"Actual tax burden after all incentives, credits, and deductions are applied."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(100*r.effectiveTaxTimeline[0]).toFixed(1),"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["vs ",(100*e.economy.taxRate).toFixed(1),"% standard"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-cyan-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"NPV Uplift"}),(0,F.jsx)(ei,{content:"Net Present Value of all tax benefits over the project lifecycle. Key input for site selection."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.npvWithIncentives-r.npvWithoutIncentives)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-purple-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"IRR Uplift"}),(0,F.jsx)(ei,{content:"Increase in Internal Rate of Return attributable to tax incentives. Higher uplift makes the jurisdiction more attractive."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["+",(r.irrWithIncentives-r.irrWithoutIncentives).toFixed(1),"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[r.irrWithIncentives.toFixed(1),"% vs ",r.irrWithoutIncentives.toFixed(1),"%"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(MZ,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"FTZ Savings"}),(0,F.jsx)(ei,{content:"Exemption or reduction on import duties for data center equipment and construction materials."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.ftzBenefits)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"import duty saved"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Cs,{className:"w-4 h-4 text-yellow-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Ranking"}),(0,F.jsx)(ei,{content:"Country's position in the incentive value ranking, normalized across all available jurisdictions."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["#",n.findIndex(t=>t.code===e.id)+1]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["of ",n.length," countries"]})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Tax Rate Timeline (Standard vs Effective)"}),(0,F.jsx)(iB,{width:"100%",height:280,children:(0,F.jsxs)(f5,{data:s,children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"year",tick:{fontSize:11,fill:"#94a3b8"},label:{value:"Year",position:"insideBottom",offset:-5,fill:"#64748b",fontSize:11}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"},label:{value:"Tax Rate %",angle:-90,position:"insideLeft",fill:"#64748b",fontSize:11}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>"savings"===t?[eo(e),"Tax Savings"]:[`${e}%`,"effectiveRate"===t?"Effective Rate":"Standard Rate"]}),(0,F.jsx)(Ce,{type:"stepAfter",dataKey:"standardRate",fill:"#ef4444",fillOpacity:.1,stroke:"#ef4444",strokeDasharray:"5 5",strokeWidth:1}),(0,F.jsx)(Ce,{type:"stepAfter",dataKey:"effectiveRate",fill:"#10b981",fillOpacity:.2,stroke:"#10b981",strokeWidth:2}),(0,F.jsx)(v1,{dataKey:"savings",fill:"#06b6d4",opacity:.3})]})}),(0,F.jsxs)("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Available Incentive Programs"}),(0,F.jsx)("ul",{className:"space-y-1",children:r.incentiveSummary.map((e,t)=>(0,F.jsxs)("li",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-start gap-2",children:[(0,F.jsx)("span",{className:"text-emerald-500 mt-0.5",children:""})," ",e]},t))})]}),e.taxIncentives?.freeTradeZones&&e.taxIncentives.freeTradeZones.length>0&&(0,F.jsxs)("div",{className:"mt-3 p-3 bg-cyan-50 dark:bg-cyan-900/10 rounded-lg border border-cyan-200 dark:border-cyan-800/30",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-cyan-700 dark:text-cyan-400 mb-1",children:"Free Trade Zones"}),(0,F.jsx)("p",{className:"text-xs text-cyan-600 dark:text-cyan-500",children:e.taxIncentives.freeTradeZones.join("  ")})]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Incentive Value Ranking (NPV, Normalized)"}),(0,F.jsx)(iB,{width:"100%",height:420,children:(0,F.jsxs)(Cc,{data:n.slice(0,15),layout:"vertical",margin:{left:70},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{type:"number",tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>eo(e)}),(0,F.jsx)(km,{dataKey:"country",type:"category",width:80,tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>[eo(e),"value"===t?"Incentive NPV":"Holiday Years"]}),(0,F.jsx)(v1,{dataKey:"value",radius:[0,4,4,0],children:n.slice(0,15).map(t=>(0,F.jsx)(f9,{fill:t.code===e.id?"#10b981":"#06b6d4",opacity:t.code===e.id?1:.5},t.code))})]})})]})})]})]})};var MQ=e.i(51639);let M0={Low:"text-emerald-400 bg-emerald-500/10 border-emerald-500/30",Moderate:"text-amber-400 bg-amber-500/10 border-amber-500/30",High:"text-orange-400 bg-orange-500/10 border-orange-500/30",Extreme:"text-red-400 bg-red-500/10 border-red-500/30"},M1=()=>{let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),a=(0,ew.useCapexStore)(),r=(0,z.useMemo)(()=>{if(!e)return null;let r=a.inputs.itLoad||t.itLoad;return wG({country:e,totalCapex:a.results?.total||1e4*r,itLoadKw:r,annualRevenue:150*r*12})},[e,t,a]),n=(0,z.useMemo)(()=>Object.values(wQ.COUNTRIES).map(e=>({country:e.name,code:e.id,score:e.naturalDisaster?.compositeScore??20})).sort((e,t)=>e.score-t.score),[]);if(!r||!e)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view disaster risk analysis."});let s=r.riskBreakdown.map(e=>({category:e.type,score:e.score,fullMark:100}));return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(MQ.CloudLightning,{className:"w-6 h-6 text-orange-500"}),"Natural Disaster Risk Scoring"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[e.name,"  Seismic Zone ",e.naturalDisaster?.seismicZone??0,"  Insurance ",e.naturalDisaster?.insuranceMultiplier??1,"x"]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eM,{className:"w-4 h-4 text-orange-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Risk Score"}),(0,F.jsx)(ei,{content:"Composite disaster risk score (0-100). Higher = more dangerous. Weighted: seismic 30%, flood 25%, typhoon 20%, volcano 15%, tsunami 10%."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.compositeScore}),(0,F.jsx)("div",{className:`text-xs mt-1 px-2 py-0.5 rounded border w-fit ${M0[r.riskCategory]}`,children:r.riskCategory})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eX,{className:"w-4 h-4 text-blue-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Insurance/Yr"}),(0,F.jsx)(ei,{content:"Estimated effect of disaster risk on annual property insurance premiums."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.annualInsuranceCost)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[e.naturalDisaster?.insuranceMultiplier??1,"x multiplier"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eQ,{className:"w-4 h-4 text-red-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Structural Adder"}),(0,F.jsx)(ei,{content:"Capital investment required to reduce disaster risk to acceptable levels (seismic bracing, flood barriers, etc)."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.structuralCostAdder)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[((e.naturalDisaster?.structuralReinforcement??0)*100).toFixed(0),"% of CAPEX"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Expected Loss/Yr"}),(0,F.jsx)(ei,{content:"Annualized expected monetary loss from natural disaster events, factoring in probability and severity."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.expectedAnnualLoss)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eK,{className:"w-4 h-4 text-cyan-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Interruption"}),(0,F.jsx)(ei,{content:"Expected business interruption days per year due to natural disaster events affecting facility operations."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.businessInterruptionDays}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"expected days/yr"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(NM,{className:"w-4 h-4 text-blue-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Revenue at Risk"}),(0,F.jsx)(ei,{content:"Annual revenue exposed to loss from disaster-related downtime, based on expected interruption days and facility revenue."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.revenueAtRisk)})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:["Risk Radar (",e.name,")"]}),(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(Pb,{data:s,children:[(0,F.jsx)(Ms,{stroke:"#334155"}),(0,F.jsx)(Mf,{dataKey:"category",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(MM,{angle:90,domain:[0,100],tick:{fontSize:9,fill:"#64748b"}}),(0,F.jsx)(P5,{name:"Risk",dataKey:"score",stroke:"#f97316",fill:"#f97316",fillOpacity:.3})]})}),(0,F.jsx)("div",{className:"mt-4 space-y-2",children:r.riskBreakdown.map(e=>(0,F.jsxs)("div",{className:"flex items-center justify-between text-sm p-2 rounded bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:e.type}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)("div",{className:"w-20 bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,F.jsx)("div",{className:`h-2 rounded-full ${e.score>=70?"bg-red-500":e.score>=40?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${e.score}%`}})}),(0,F.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${"Critical"===e.impact?"bg-red-500/10 text-red-400":"Moderate"===e.impact?"bg-amber-500/10 text-amber-400":"None"===e.impact?"bg-slate-500/10 text-slate-400":"bg-emerald-500/10 text-emerald-400"}`,children:e.impact})]})]},e.type))})]})}),(0,F.jsxs)("div",{className:"space-y-6",children:[r.mitigationOptions.length>0&&(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Mitigation Options"}),(0,F.jsx)("div",{className:"space-y-3",children:r.mitigationOptions.map(e=>(0,F.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 dark:bg-slate-900/30 border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.name}),(0,F.jsxs)("span",{className:"text-xs font-mono text-cyan-600 dark:text-cyan-400",children:["ROI: ",e.roi,"x"]})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:e.description}),(0,F.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:["Cost: ",(0,F.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:eo(e.cost)})]}),(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:["Risk Reduction: ",(0,F.jsxs)("span",{className:"font-medium text-emerald-500",children:["-",e.riskReduction,"%"]})]})]})]},e.name))})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Risk Score by Country (Lower = Safer)"}),(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(Cc,{data:n.slice(0,15),layout:"vertical",margin:{left:70},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{type:"number",domain:[0,100],tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{dataKey:"country",type:"category",width:80,tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:e=>[`${e}/100`,"Risk Score"]}),(0,F.jsx)(v1,{dataKey:"score",radius:[0,4,4,0],children:n.slice(0,15).map(t=>(0,F.jsx)(f9,{fill:t.code===e.id?"#f97316":t.score<=20?"#10b981":t.score<=50?"#f59e0b":"#ef4444",opacity:t.code===e.id?1:.6},t.code))})]})})]})})]})]})]})};var M2=e.i(61728);let M5=(0,X.default)("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]);var M4=e.i(88480);let M3={A:"text-emerald-400 bg-emerald-500/10 border-emerald-500/30",B:"text-cyan-400 bg-cyan-500/10 border-cyan-500/30",C:"text-amber-400 bg-amber-500/10 border-amber-500/30",D:"text-orange-400 bg-orange-500/10 border-orange-500/30",F:"text-red-400 bg-red-500/10 border-red-500/30"},M6=()=>{let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),a=(0,ew.useCapexStore)(),r=(0,z.useMemo)(()=>e?wY({country:e,itLoadKw:a.inputs.itLoad||t.itLoad,tierLevel:t.tierLevel,coolingType:t.coolingType}):null,[e,t,a.inputs]),n=(0,z.useMemo)(()=>Object.values(wQ.COUNTRIES).map(e=>{let t=wY({country:e,itLoadKw:1e3,tierLevel:3,coolingType:"air"});return{country:e.name,code:e.id,score:t.reliabilityScore,uptime:e.gridReliability?.gridUptime??99}}).sort((e,t)=>t.score-e.score),[]);if(!r||!e)return(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view grid reliability analysis."});let s=e.gridReliability;return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(eJ.Zap,{className:"w-6 h-6 text-amber-500"}),"Grid Reliability Index"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[e.name,"  Grid Uptime: ",s?.gridUptime??99,"%  Tier ",t.tierLevel]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(en.Activity,{className:"w-4 h-4 text-cyan-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Grid Score"}),(0,F.jsx)(ei,{content:"Composite reliability score (0-100) based on uptime, voltage stability, brownout frequency, and outage duration."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.reliabilityScore}),(0,F.jsxs)("div",{className:`text-xs mt-1 px-2 py-0.5 rounded border w-fit ${M3[r.reliabilityGrade]}`,children:["Grade ",r.reliabilityGrade]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eJ.Zap,{className:"w-4 h-4 text-red-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Outage Hrs/Yr"}),(0,F.jsx)(ei,{content:"Expected hours of grid unavailability per year based on historical data for the selected country."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:(r.annualOutageMinutes/60).toFixed(1)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[r.annualExpectedOutages," events"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(eX,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Gen Capacity"}),(0,F.jsx)(ei,{content:"Seconds from power failure to generator reaching rated voltage and frequency. Typically 10-15s for diesel."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:el(r.requiredGenCapacity)}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"kW required"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(M2.Fuel,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Fuel Cost/Yr"}),(0,F.jsx)(ei,{content:"Annual diesel fuel expenditure for backup generators based on expected outage hours and required generator capacity."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(r.annualFuelCost)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[r.recommendedFuelHours,"h fuel reserve"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(M5,{className:"w-4 h-4 text-purple-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"BESS ROI"}),(0,F.jsx)(ei,{content:"Battery Energy Storage System payback period in years."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.batteryStorageROI<50?`${r.batteryStorageROI}yr`:"N/A"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(M4.Sun,{className:"w-4 h-4 text-yellow-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Solar Ready"}),(0,F.jsx)(ei,{content:"Feasibility score for on-site solar based on irradiance, roof area, and local net metering policy."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.solarViabilityScore}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"/100 viability"})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Annual Grid Risk Cost Breakdown"}),(0,F.jsxs)("div",{className:"space-y-3",children:[r.costBreakdown.map(e=>(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.label}),(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:eo(e.value)})]},e.label)),(0,F.jsxs)("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-2 flex items-center justify-between",children:[(0,F.jsx)("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Total Grid-Adjusted OPEX"}),(0,F.jsx)("span",{className:"text-lg font-bold text-cyan-600 dark:text-cyan-400",children:eo(r.gridRiskAdjustedOpex)})]})]}),(0,F.jsxs)("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-3",children:"Backup Architecture"}),(0,F.jsxs)("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 space-y-1",children:[(0,F.jsxs)("div",{children:["Grid Feed ",r.dualFeedRecommendation?"(Dual A+B)":"(Single)","  ATS  UPS (",el(t.itLoad)," kW)"]}),(0,F.jsxs)("div",{className:"pl-4",children:[" Generator: ",el(r.requiredGenCapacity)," kW (",r.recommendedFuelHours,"h fuel)"]}),(0,F.jsxs)("div",{className:"pl-4",children:[" UPS Battery: ",s?.voltageStability==="unstable"?"Li-Ion recommended":"VRLA standard"]}),(0,F.jsxs)("div",{className:"pl-4",children:[" Availability: ",r.availabilityWithBackup.toFixed(3),"% (with backup)"]})]})]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Grid Reliability by Country"}),(0,F.jsx)(iB,{width:"100%",height:350,children:(0,F.jsxs)(Cc,{data:n.slice(0,15),layout:"vertical",margin:{left:60},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{type:"number",domain:[0,100],tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{dataKey:"country",type:"category",width:80,tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:e=>[`${e}/100`,"Score"]}),(0,F.jsx)(v1,{dataKey:"score",radius:[0,4,4,0],children:n.slice(0,15).map(t=>(0,F.jsx)(f9,{fill:t.code===e.id?"#06b6d4":t.score>=80?"#10b981":t.score>=50?"#f59e0b":"#ef4444",opacity:t.code===e.id?1:.6},t.code))})]})})]})})]})]})};var M8=e.i(17827);let M9={Easy:"text-emerald-400 bg-emerald-500/10 border-emerald-500/30",Moderate:"text-cyan-400 bg-cyan-500/10 border-cyan-500/30",Difficult:"text-amber-400 bg-amber-500/10 border-amber-500/30","Very Difficult":"text-red-400 bg-red-500/10 border-red-500/30"},M7=()=>{let{selectedCountry:e}=(0,$.useSimulationStore)(),t=H(),{result:a,annualStaffCost:r,totalFTE:n}=(0,z.useMemo)(()=>{if(!e)return{result:null,annualStaffCost:0,totalFTE:0};let a=["shift-lead","engineer","technician","admin","janitor"],r=[t.headcount_ShiftLead,t.headcount_Engineer,t.headcount_Technician,t.headcount_Admin,t.headcount_Janitor],n=[!0,!0,!1,!1,!1],s=0,i=0;for(let l=0;l<a.length;l++){let o=B(a[l],r[l],t.shiftModel,e,n[l]);s+=12*o.monthlyCost,i+=o.headcount}return{result:wX({country:e,totalFTE:i,annualStaffCost:s}),annualStaffCost:s,totalFTE:i}},[e,t]),s=(0,z.useMemo)(()=>Object.values(wQ.COUNTRIES).map(e=>({country:e.name,code:e.id,score:e.talentPool?.talentScore??50,premium:((e.talentPool?.salaryPremium??1)-1)*100})).sort((e,t)=>t.score-e.score),[]);return a&&e?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(M8.GraduationCap,{className:"w-6 h-6 text-purple-500"}),"Talent Availability Index"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[e.name,"  ",n," FTE Required  ",e.talentPool?.dcEngineerPool??"moderate"," talent pool"]})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Cs,{className:"w-4 h-4 text-purple-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Talent Score"}),(0,F.jsx)(ei,{content:"Composite talent availability score (0-100) based on engineer pool, university pipeline, hyperscaler competition, hiring speed, and certifications."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.talentScore}),(0,F.jsx)("div",{className:`text-xs mt-1 px-2 py-0.5 rounded border w-fit ${M9[a.hiringDifficulty]}`,children:a.hiringDifficulty})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(J,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Salary Premium"}),(0,F.jsx)(ei,{content:"How facility pay compares to local market rates. Below 90% increases attrition risk."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["+",((a.adjustedSalaryMultiplier-1)*100).toFixed(0),"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[eo(a.adjustedAnnualStaffCost-r),"/yr extra"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Z,{className:"w-4 h-4 text-blue-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Time to Staff"}),(0,F.jsx)(ei,{content:"Estimated months to recruit and onboard the full operations team based on local talent pool depth and competition."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.timeToFullStaff}),(0,F.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"months to full team"})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(Y.Users,{className:"w-4 h-4 text-red-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Turnover"}),(0,F.jsx)(ei,{content:"Annual percentage of staff departing. Data center industry average is 10-15%. Higher rates increase recruitment costs."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(100*a.adjustedTurnoverRate).toFixed(0),"%"]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[eo(a.annualTurnoverCost),"/yr cost"]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(M8.GraduationCap,{className:"w-4 h-4 text-emerald-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Training/Yr"}),(0,F.jsx)(ei,{content:"Annual training hours per employee. Critical for maintaining certifications and operational competency."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(a.annualTrainingCost)})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)(ee.TrendingUp,{className:"w-4 h-4 text-orange-500"}),(0,F.jsx)("span",{className:"text-xs text-slate-500 uppercase",children:"Recruit Cost"}),(0,F.jsx)(ei,{content:"Total one-time recruitment expenditure for staffing the facility. Includes agency fees, relocation, and onboarding costs."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:eo(a.totalRecruitmentCost)}),(0,F.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[eo(a.recruitmentCostPerHire),"/hire"]})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Talent Factor Analysis"}),(0,F.jsx)("div",{className:"space-y-3",children:a.talentBreakdown.map(e=>(0,F.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[(0,F.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.metric}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.value}),(0,F.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${"Positive"===e.impact||"Fast"===e.impact||"Strong"===e.impact||"Low"===e.impact?"bg-emerald-500/10 text-emerald-400":"Negative"===e.impact||"Slow"===e.impact||"Limited"===e.impact||"High"===e.impact||"High Competition"===e.impact?"bg-red-500/10 text-red-400":"bg-slate-500/10 text-slate-400"}`,children:e.impact})]})]},e.metric))}),(0,F.jsxs)("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-3",children:"Annual Staff Cost Impact"}),(0,F.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Base Annual Staff Cost"}),(0,F.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:eo(r)})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:["+ Salary Premium (",((a.adjustedSalaryMultiplier-1)*100).toFixed(0),"%)"]}),(0,F.jsxs)("span",{className:"font-medium text-amber-500",children:["+",eo(a.adjustedAnnualStaffCost-r)]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"+ Turnover Cost"}),(0,F.jsxs)("span",{className:"font-medium text-red-500",children:["+",eo(a.annualTurnoverCost)]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"+ Training Cost"}),(0,F.jsxs)("span",{className:"font-medium text-purple-500",children:["+",eo(a.annualTrainingCost)]})]}),(0,F.jsxs)("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-2 flex justify-between",children:[(0,F.jsx)("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Talent-Adjusted Total"}),(0,F.jsx)("span",{className:"font-bold text-lg text-cyan-600 dark:text-cyan-400",children:eo(a.adjustedAnnualStaffCost+a.annualTurnoverCost+a.annualTrainingCost)})]})]})]})]})}),(0,F.jsx)(t1,{className:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:(0,F.jsxs)(t3,{className:"pt-6",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Talent Score by Country"}),(0,F.jsx)(iB,{width:"100%",height:400,children:(0,F.jsxs)(Cc,{data:s.slice(0,15),layout:"vertical",margin:{left:70},children:[(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{type:"number",domain:[0,100],tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{dataKey:"country",type:"category",width:80,tick:{fontSize:10,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},labelStyle:{color:"#e2e8f0"},formatter:(e,t)=>["score"===t?`${e}/100`:`+${e?.toFixed?.(0)??e}%`,"score"===t?"Talent Score":"Salary Premium"]}),(0,F.jsx)(v1,{dataKey:"score",radius:[0,4,4,0],children:s.slice(0,15).map(t=>(0,F.jsx)(f9,{fill:t.code===e.id?"#a855f7":t.score>=70?"#10b981":t.score>=45?"#f59e0b":"#ef4444",opacity:t.code===e.id?1:.6},t.code))})]})})]})})]})]}):(0,F.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Select a country to view talent analysis."})},Oe={fire:"Fire Safety",electrical:"Electrical",environmental:"Environmental",building:"Building & Construction","data-protection":"Data Protection",telecom:"Telecommunications"};var Ot=e.i(42420);let Oa={fire:"bg-red-500",electrical:"bg-amber-500",environmental:"bg-green-500",building:"bg-blue-500","data-protection":"bg-purple-500",telecom:"bg-cyan-500"},Or={fire:"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-800",electrical:"bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800",environmental:"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800",building:"bg-blue-50 dark:bg-blue-900/10 border-blue-200 dark:border-blue-800","data-protection":"bg-purple-50 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800",telecom:"bg-cyan-50 dark:bg-cyan-900/10 border-cyan-200 dark:border-cyan-800"};function On(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),[a,r]=(0,z.useState)("all"),n=(0,z.useMemo)(()=>{var a;let r,n,s,i,l,o;return e?(a=t.itLoad,n=(r=(function(e,t){let a=Math.max(1,t/2500),r={ID:{items:[{category:"fire",requirement:"Fire Safety Certificate (SLF)",authority:"Dinas Pemadam Kebakaran",standard:"Permen PU 26/2008",frequency:"Annual",mandatory:!0,initialCost:3500,annualCost:2e3,leadWeeks:8,notes:"Required before building occupancy"},{category:"fire",requirement:"Fire Suppression System Approval",authority:"Dinas Pemadam Kebakaran",standard:"SNI 03-3985-2000",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:6,notes:"Gas suppression inspection"},{category:"electrical",requirement:"Electrical Worthiness Certificate (SLO)",authority:"Kemenaker / KONSUIL",standard:"PUIL 2011 / SNI 0225",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:4e3,leadWeeks:12,notes:"Mandatory for all HV/LV installations"},{category:"electrical",requirement:"K3 Electrical Expert (Ahli K3 Listrik)",authority:"Kemenaker",standard:"Permen 12/2015",frequency:"Annual",mandatory:!0,initialCost:2e3,annualCost:1500,leadWeeks:4,notes:"Certified electrical safety officer required"},{category:"electrical",requirement:"Generator Operating Permit",authority:"PLN / Kemenaker",standard:"PP 14/2012",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:1500,leadWeeks:6,notes:"For all diesel generator installations"},{category:"environmental",requirement:"Environmental Impact Assessment (AMDAL)",authority:"KLHK / Dinas LH",standard:"PP 22/2021",frequency:"One-time",mandatory:!0,initialCost:15e3*a,annualCost:0,leadWeeks:24,notes:"Required for facilities >5MW"},{category:"environmental",requirement:"Environmental Management Plan (UKL-UPL)",authority:"Dinas LH",standard:"PP 22/2021",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:8,notes:"Annual reporting required"},{category:"environmental",requirement:"Emission Permit (Genset Exhaust)",authority:"KLHK",standard:"Permen LH 05/2014",frequency:"Annual",mandatory:!0,initialCost:2e3,annualCost:2e3,leadWeeks:4,notes:"Diesel generator emission testing"},{category:"building",requirement:"Building Permit (PBG)",authority:"PUPR / OSS-RBA",standard:"PP 16/2021",frequency:"One-time",mandatory:!0,initialCost:25e3*a,annualCost:0,leadWeeks:16,notes:"New OSS system since 2021"},{category:"building",requirement:"Building Worthiness Certificate (SLF)",authority:"Dinas PUPR",standard:"PP 16/2021",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:8,notes:"Structural integrity verification"},{category:"data-protection",requirement:"PSE Registration",authority:"Kominfo",standard:"PP 71/2019 (GR 71)",frequency:"Annual",mandatory:!0,initialCost:2e3,annualCost:1e3,leadWeeks:8,notes:"Electronic System Operator registration"},{category:"data-protection",requirement:"Data Protection Compliance (PDP)",authority:"Kominfo",standard:"UU 27/2022",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:12,notes:"Personal Data Protection law"},{category:"telecom",requirement:"Telecommunication License",authority:"Kominfo",standard:"PP 46/2021",frequency:"Annual",mandatory:!1,initialCost:3e3,annualCost:2e3,leadWeeks:8,notes:"If providing carrier services"}]},SG:{items:[{category:"fire",requirement:"Fire Safety Certificate",authority:"SCDF",standard:"Fire Safety Act 1993",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:5e3,leadWeeks:6,notes:"Singapore Civil Defence Force"},{category:"fire",requirement:"Fire Safety Manager Appointment",authority:"SCDF",standard:"Fire Safety Regulations",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:2e3,leadWeeks:4,notes:"Certified FSM required"},{category:"electrical",requirement:"Electrical Installation License",authority:"EMA",standard:"Electricity Act",frequency:"Annual",mandatory:!0,initialCost:1e4,annualCost:6e3,leadWeeks:8,notes:"Energy Market Authority"},{category:"electrical",requirement:"Licensed Electrical Worker (LEW)",authority:"EMA",standard:"Electricity Act S49",frequency:"Annual",mandatory:!0,initialCost:4e3,annualCost:2500,leadWeeks:4,notes:"On-site LEW mandatory"},{category:"environmental",requirement:"Environmental Protection (EP)",authority:"NEA",standard:"EPA (SG)",frequency:"Annual",mandatory:!0,initialCost:6e3,annualCost:4e3,leadWeeks:8,notes:"Noise, air, water discharge"},{category:"environmental",requirement:"Carbon Tax Compliance",authority:"NEA",standard:"Carbon Pricing Act",frequency:"Annual",mandatory:!0,initialCost:2e3,annualCost:5e3*a,leadWeeks:4,notes:"S$25/tCO2e (rising)"},{category:"building",requirement:"BCA Approval",authority:"BCA",standard:"Building Control Act",frequency:"One-time",mandatory:!0,initialCost:15e3,annualCost:0,leadWeeks:12,notes:"Building & Construction Authority"},{category:"building",requirement:"Green Mark Certification",authority:"BCA",standard:"BCA Green Mark",frequency:"Annual",mandatory:!1,initialCost:1e4,annualCost:3e3,leadWeeks:16,notes:"Recommended for new builds"},{category:"data-protection",requirement:"PDPA Compliance",authority:"PDPC",standard:"PDPA 2012",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:4e3,leadWeeks:8,notes:"Personal Data Protection Act"},{category:"telecom",requirement:"IMDA Facility License",authority:"IMDA",standard:"Telecom Act",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:6,notes:"Info-communications Media Dev Authority"}]},US:{items:[{category:"fire",requirement:"NFPA 75 / 76 Compliance",authority:"AHJ / Fire Marshal",standard:"NFPA 75 & 76",frequency:"Annual",mandatory:!0,initialCost:12e3,annualCost:6e3,leadWeeks:8,notes:"IT equipment & telecom facility protection"},{category:"fire",requirement:"Fire Suppression Inspection",authority:"Fire Marshal",standard:"NFPA 2001",frequency:"Bi-Annual",mandatory:!0,initialCost:5e3,annualCost:8e3,leadWeeks:4,notes:"Clean agent system testing"},{category:"electrical",requirement:"NEC Compliance",authority:"AHJ",standard:"NFPA 70 (NEC)",frequency:"One-time",mandatory:!0,initialCost:15e3,annualCost:0,leadWeeks:12,notes:"National Electrical Code"},{category:"electrical",requirement:"Arc Flash Study",authority:"OSHA",standard:"NFPA 70E",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:5e3,leadWeeks:6,notes:"Worker safety requirement"},{category:"electrical",requirement:"Generator Permit (Air Quality)",authority:"EPA / State",standard:"EPA Tier 4",frequency:"Annual",mandatory:!0,initialCost:6e3,annualCost:3e3,leadWeeks:8,notes:"Emission testing for diesel gensets"},{category:"environmental",requirement:"SPCC Plan (Fuel Storage)",authority:"EPA",standard:"40 CFR 112",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:4e3,leadWeeks:6,notes:"Spill Prevention, Control & Countermeasure"},{category:"environmental",requirement:"Stormwater Permit",authority:"EPA / State",standard:"CWA NPDES",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:2e3,leadWeeks:8,notes:"Construction & operation runoff"},{category:"building",requirement:"Building Permit & COO",authority:"Local AHJ",standard:"IBC / Local Code",frequency:"One-time",mandatory:!0,initialCost:2e4*a,annualCost:0,leadWeeks:16,notes:"Certificate of Occupancy"},{category:"building",requirement:"ADA Compliance",authority:"DOJ",standard:"ADA Standards",frequency:"One-time",mandatory:!0,initialCost:5e3,annualCost:0,leadWeeks:4,notes:"Accessibility requirements"},{category:"data-protection",requirement:"SOC 2 Type II Audit",authority:"AICPA",standard:"SOC 2",frequency:"Annual",mandatory:!1,initialCost:25e3,annualCost:2e4,leadWeeks:16,notes:"Industry standard for data centers"},{category:"data-protection",requirement:"State Privacy Law Compliance",authority:"State AG",standard:"CCPA / State Laws",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:8,notes:"Varies by state"},{category:"telecom",requirement:"FCC Authorization",authority:"FCC",standard:"FCC Part 15/68",frequency:"One-time",mandatory:!1,initialCost:2e3,annualCost:500,leadWeeks:4,notes:"If operating telecom services"}]},GB:{items:[{category:"fire",requirement:"Fire Risk Assessment",authority:"Local Fire Authority",standard:"BS 9999 / RRO 2005",frequency:"Annual",mandatory:!0,initialCost:6e3,annualCost:4e3,leadWeeks:4,notes:"Regulatory Reform (Fire Safety) Order"},{category:"fire",requirement:"Fire Suppression Certification",authority:"LPCB / BRE",standard:"BS EN 15004",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3500,leadWeeks:4,notes:"Clean agent systems"},{category:"electrical",requirement:"IET Wiring Regulations",authority:"HSE",standard:"BS 7671 (18th Ed)",frequency:"Annual",mandatory:!0,initialCost:1e4,annualCost:5e3,leadWeeks:8,notes:"EICR every 5 years, annual visual"},{category:"electrical",requirement:"HV Authorisation",authority:"Ofgem / DNO",standard:"Electricity at Work Act",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:4e3,leadWeeks:6,notes:"High Voltage equipment authorization"},{category:"environmental",requirement:"Environmental Permit",authority:"Environment Agency",standard:"EPA 1990",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:4e3,leadWeeks:8,notes:"Generator emissions & fuel storage"},{category:"environmental",requirement:"F-Gas Regulations",authority:"Environment Agency",standard:"EU 517/2014 (retained)",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:2500,leadWeeks:4,notes:"Refrigerant leak checks"},{category:"building",requirement:"Planning Permission & BRegs",authority:"Local Council",standard:"Building Regulations 2010",frequency:"One-time",mandatory:!0,initialCost:18e3,annualCost:0,leadWeeks:16,notes:"Building control approval"},{category:"data-protection",requirement:"UK GDPR / DPA 2018",authority:"ICO",standard:"UK GDPR",frequency:"Annual",mandatory:!0,initialCost:1e4,annualCost:6e3,leadWeeks:8,notes:"Data protection registration & compliance"},{category:"telecom",requirement:"Ofcom License",authority:"Ofcom",standard:"Communications Act 2003",frequency:"Annual",mandatory:!1,initialCost:3e3,annualCost:2e3,leadWeeks:6,notes:"If providing telecom services"}]},DE:{items:[{category:"fire",requirement:"Brandschutzkonzept",authority:"Bauordnungsamt",standard:"DIN 4102 / EN 13501",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:5e3,leadWeeks:8,notes:"Fire protection concept"},{category:"electrical",requirement:"VDE Compliance",authority:"Berufsgenossenschaft",standard:"VDE 0100 / EN 50600",frequency:"Annual",mandatory:!0,initialCost:12e3,annualCost:6e3,leadWeeks:8,notes:"EN 50600 data center standard"},{category:"electrical",requirement:"DGUV V3 Electrical Safety",authority:"BG ETEM",standard:"DGUV Vorschrift 3",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:4e3,leadWeeks:4,notes:"Employer liability insurance inspection"},{category:"environmental",requirement:"BImSchG Emission Permit",authority:"Umweltamt",standard:"BImSchG / TA Luft",frequency:"Annual",mandatory:!0,initialCost:1e4,annualCost:5e3,leadWeeks:12,notes:"Federal emission control for generators"},{category:"environmental",requirement:"WHG Water Protection",authority:"Untere Wasserbehrde",standard:"WHG / AwSV",frequency:"Annual",mandatory:!0,initialCost:4e3,annualCost:3e3,leadWeeks:6,notes:"Fuel storage water protection"},{category:"building",requirement:"Baugenehmigung",authority:"Bauordnungsamt",standard:"BauGB / LBO",frequency:"One-time",mandatory:!0,initialCost:2e4,annualCost:0,leadWeeks:20,notes:"Building permit"},{category:"data-protection",requirement:"GDPR / BDSG Compliance",authority:"LfDI / BfDI",standard:"GDPR / BDSG",frequency:"Annual",mandatory:!0,initialCost:12e3,annualCost:8e3,leadWeeks:8,notes:"Data protection officer required"},{category:"telecom",requirement:"BNetzA Registration",authority:"BNetzA",standard:"TKG 2021",frequency:"Annual",mandatory:!1,initialCost:3e3,annualCost:2e3,leadWeeks:6,notes:"Federal Network Agency"}]}},n={items:[{category:"fire",requirement:"Fire Safety Certificate",authority:"Local Fire Authority",standard:"Local Fire Code",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:6,notes:"Fire safety inspection and certificate"},{category:"fire",requirement:"Fire Suppression System Inspection",authority:"Fire Authority",standard:"Local Standard",frequency:"Annual",mandatory:!0,initialCost:4e3,annualCost:2500,leadWeeks:4,notes:"Annual inspection of suppression systems"},{category:"electrical",requirement:"Electrical Installation Certificate",authority:"Energy Authority",standard:"IEC 60364",frequency:"Annual",mandatory:!0,initialCost:8e3,annualCost:4e3,leadWeeks:8,notes:"Based on IEC standards"},{category:"electrical",requirement:"Generator Operating Permit",authority:"Energy Authority",standard:"Local Regulation",frequency:"Annual",mandatory:!0,initialCost:4e3,annualCost:2e3,leadWeeks:6,notes:"Diesel generator operation permit"},{category:"environmental",requirement:"Environmental Impact Assessment",authority:"Environmental Agency",standard:"Local EPA",frequency:"One-time",mandatory:!0,initialCost:1e4*a,annualCost:0,leadWeeks:16,notes:"For major facilities"},{category:"environmental",requirement:"Emission Compliance",authority:"Environmental Agency",standard:"Local Standard",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:2500,leadWeeks:4,notes:"Generator and cooling emissions"},{category:"building",requirement:"Building Permit",authority:"Planning Authority",standard:"Local Building Code",frequency:"One-time",mandatory:!0,initialCost:15e3*a,annualCost:0,leadWeeks:12,notes:"Construction and occupancy approval"},{category:"data-protection",requirement:"Data Protection Compliance",authority:"Data Protection Authority",standard:"Local DPA",frequency:"Annual",mandatory:!0,initialCost:5e3,annualCost:3e3,leadWeeks:8,notes:"National data protection law"},{category:"telecom",requirement:"Telecommunications License",authority:"Telecom Regulator",standard:"Local Telecom Act",frequency:"Annual",mandatory:!1,initialCost:3e3,annualCost:2e3,leadWeeks:6,notes:"If providing carrier services"}]},s={APAC:{items:n.items},EMEA:{items:[...n.items.filter(e=>"data-protection"!==e.category),{category:"data-protection",requirement:"GDPR Compliance",authority:"National DPA",standard:"EU GDPR",frequency:"Annual",mandatory:!0,initialCost:1e4,annualCost:6e3,leadWeeks:8,notes:"EU General Data Protection Regulation"},{category:"environmental",requirement:"F-Gas Regulation",authority:"Environmental Agency",standard:"EU 517/2014",frequency:"Annual",mandatory:!0,initialCost:3e3,annualCost:2500,leadWeeks:4,notes:"Refrigerant management"}]},MENA:{items:n.items.map(e=>({...e,initialCost:Math.round(.7*e.initialCost),annualCost:Math.round(.7*e.annualCost)}))},AFR:{items:n.items.map(e=>({...e,initialCost:Math.round(.6*e.initialCost),annualCost:Math.round(.6*e.annualCost),leadWeeks:e.leadWeeks+4}))},LATAM:{items:n.items.map(e=>({...e,initialCost:Math.round(.75*e.initialCost),annualCost:Math.round(.75*e.annualCost)}))},AMER:{items:n.items}};if(r[e])return r[e];let i={MY:"APAC",JP:"APAC",AU:"APAC",IN:"APAC",CN:"APAC",KR:"APAC",TH:"APAC",VN:"APAC",PH:"APAC",TW:"APAC",NZ:"APAC",AE:"MENA",SA:"MENA",QA:"MENA",ZA:"AFR",NG:"AFR",KE:"AFR",BR:"LATAM",CL:"LATAM",MX:"LATAM",CO:"LATAM",NL:"EMEA",IE:"EMEA",FR:"EMEA",SE:"EMEA",PL:"EMEA"}[e];return i&&s[i]?s[i]:n})(e.id,a).items.map((t,a)=>({...t,id:`${e.id}-${t.category}-${a}`}))).reduce((e,t)=>e+t.initialCost,0),s=r.reduce((e,t)=>e+t.annualCost,0),i=r.filter(e=>e.mandatory).length,l=["fire","electrical","environmental","building","data-protection","telecom"].map(e=>{let t=r.filter(t=>t.category===e);return{category:e,label:Oe[e],count:t.length,mandatoryCount:t.filter(e=>e.mandatory).length,initialCost:t.reduce((e,t)=>e+t.initialCost,0),annualCost:t.reduce((e,t)=>e+t.annualCost,0)}}).filter(e=>e.count>0),o=Math.round(.6*Math.min(100,r.length/14*100)+40*(i/Math.max(1,r.length))),{items:r,totalInitialCost:n,totalAnnualCost:s,mandatoryCount:i,totalCount:r.length,categoryBreakdown:l,complianceScore:Math.min(100,o),countryName:e.name}):null},[e,t.itLoad]);if(!n)return(0,F.jsx)("div",{className:"text-slate-500 text-center py-20",children:"Select a country to begin."});let s="all"===a?n.items:n.items.filter(e=>e.category===a);return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-emerald-500/10 rounded-xl",children:(0,F.jsx)(Ot.ClipboardCheck,{className:"w-6 h-6 text-emerald-500"})}),"Compliance Checklist  ",n.countryName]}),(0,F.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Module 41  Auto-generated regulatory requirements per country"})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Total Requirements",value:n.totalCount,icon:Ot.ClipboardCheck,color:"cyan",tip:"Total number of regulatory and certification requirements applicable to this country, including fire, electrical, environmental, building, data-protection, and telecom categories."},{label:"Mandatory",value:n.mandatoryCount,icon:eM,color:"amber",tip:"Requirements that are legally mandatory  non-compliance may result in fines, operational shutdowns, or license revocations."},{label:"Initial Cost",value:eo(n.totalInitialCost),icon:J,color:"blue",tip:"One-time compliance cost for certifications, inspections, equipment upgrades, and initial filing fees."},{label:"Annual Cost",value:eo(n.totalAnnualCost),icon:er,color:"green",tip:"Recurring annual cost for license renewals, periodic inspections, audits, and ongoing compliance monitoring."}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)(e.icon,{className:`w-4 h-4 text-${e.color}-500`}),(0,F.jsx)("span",{className:"text-xs text-slate-500",children:e.label}),(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.value})]},t))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:["Compliance Coverage Score ",(0,F.jsx)(ei,{content:"Weighted score (0-100) based on percentage of mandatory requirements met. Score 80 is good, 60-79 needs attention, <60 is critical risk."})]}),(0,F.jsxs)("span",{className:(0,eh.default)("text-2xl font-bold",n.complianceScore>=80?"text-emerald-500":n.complianceScore>=60?"text-amber-500":"text-red-500"),children:[n.complianceScore,"/100"]})]}),(0,F.jsx)("div",{className:"h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded-full transition-all",n.complianceScore>=80?"bg-emerald-500":n.complianceScore>=60?"bg-amber-500":"bg-red-500"),style:{width:`${n.complianceScore}%`}})})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.categoryBreakdown.map(e=>(0,F.jsxs)("button",{onClick:()=>r(a===e.category?"all":e.category),className:(0,eh.default)("p-3 rounded-xl border text-left transition-all",Or[e.category],a===e.category&&"ring-2 ring-offset-1 ring-cyan-500"),children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${Oa[e.category]}`}),(0,F.jsx)("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300",children:e.label})]}),(0,F.jsxs)("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:[e.count," items"]}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500",children:[e.mandatoryCount," mandatory  ",eo(e.annualCost),"/yr"]})]},e.category))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,F.jsxs)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["all"===a?"All Requirements":n.categoryBreakdown.find(e=>e.category===a)?.label,(0,F.jsxs)("span",{className:"ml-2 text-slate-500 font-normal",children:["(",s.length,")"]})]}),"all"!==a&&(0,F.jsx)("button",{onClick:()=>r("all"),className:"text-xs text-cyan-600 hover:text-cyan-500",children:"Show All"})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-50 dark:bg-slate-800/80",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Requirement ",(0,F.jsx)(ei,{content:"Specific regulatory or certification requirement that applies to data center operations in this jurisdiction."})]})}),(0,F.jsx)("th",{className:"text-left px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Authority ",(0,F.jsx)(ei,{content:"Government body, regulatory agency, or standards organization that enforces this requirement."})]})}),(0,F.jsx)("th",{className:"text-left px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Standard ",(0,F.jsx)(ei,{content:"Reference standard code (e.g., IEC, NFPA, ISO) that defines the technical specification."})]})}),(0,F.jsx)("th",{className:"text-center px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Freq. ",(0,F.jsx)(ei,{content:"Inspection or renewal frequency  how often compliance must be verified (annual, biennial, one-time)."})]})}),(0,F.jsx)("th",{className:"text-center px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Status ",(0,F.jsx)(ei,{content:"Mandatory requirements are legally required. Optional requirements are best-practice recommendations."})]})}),(0,F.jsx)("th",{className:"text-right px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Initial ",(0,F.jsx)(ei,{content:"One-time cost for initial certification, inspection, or equipment purchase."})]})}),(0,F.jsx)("th",{className:"text-right px-4 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Annual ",(0,F.jsx)(ei,{content:"Recurring annual cost for renewals, periodic inspections, and ongoing compliance."})]})})]})}),(0,F.jsx)("tbody",{children:s.map((e,t)=>(0,F.jsxs)("tr",{className:"border-t border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[(0,F.jsxs)("td",{className:"px-4 py-2.5",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:`w-2 h-2 rounded-full ${Oa[e.category]}`}),(0,F.jsx)("span",{className:"text-slate-800 dark:text-slate-200 font-medium",children:e.requirement})]}),e.notes&&(0,F.jsx)("p",{className:"text-[10px] text-slate-500 ml-4 mt-0.5",children:e.notes})]}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-slate-600 dark:text-slate-400 text-xs",children:e.authority}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-slate-600 dark:text-slate-400 text-xs font-mono",children:e.standard}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-center",children:(0,F.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400",children:e.frequency})}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-center",children:e.mandatory?(0,F.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-bold",children:"MANDATORY"}):(0,F.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500",children:"Optional"})}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-right font-mono text-slate-800 dark:text-slate-200",children:eo(e.initialCost)}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-right font-mono text-slate-800 dark:text-slate-200",children:eo(e.annualCost)})]},e.id))}),(0,F.jsx)("tfoot",{children:(0,F.jsxs)("tr",{className:"border-t-2 border-slate-300 dark:border-slate-600 font-bold",children:[(0,F.jsx)("td",{colSpan:5,className:"px-4 py-2.5 text-slate-900 dark:text-white",children:"Total"}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-right font-mono text-slate-900 dark:text-white",children:eo(s.reduce((e,t)=>e+t.initialCost,0))}),(0,F.jsx)("td",{className:"px-4 py-2.5 text-right font-mono text-slate-900 dark:text-white",children:eo(s.reduce((e,t)=>e+t.annualCost,0))})]})})]})})]})]})}let Os={"gen-set":{years:15,replacementCostPerUnit:35e4},"ups-module":{years:12,replacementCostPerUnit:18e4},"lv-switchgear":{years:25,replacementCostPerUnit:85e3},transformer:{years:25,replacementCostPerUnit:12e4},"chiller-air":{years:15,replacementCostPerUnit:25e4},"pac-unit":{years:15,replacementCostPerUnit:35e3},fcu:{years:12,replacementCostPerUnit:8e3},"fire-suppression":{years:10,replacementCostPerUnit:15e3},vesda:{years:10,replacementCostPerUnit:5e3},"fire-panel":{years:15,replacementCostPerUnit:12e3},"fuel-polisher":{years:12,replacementCostPerUnit:8e3},"bulk-tank":{years:20,replacementCostPerUnit:25e3},"sand-filter":{years:15,replacementCostPerUnit:6e3},"dosing-pump":{years:10,replacementCostPerUnit:3e3},"bms-server":{years:8,replacementCostPerUnit:15e3},"plc-hmi":{years:10,replacementCostPerUnit:12e3},"field-sensor":{years:8,replacementCostPerUnit:500},cctv:{years:8,replacementCostPerUnit:2e3},"access-control":{years:8,replacementCostPerUnit:3e3},"boom-gate":{years:15,replacementCostPerUnit:8e3},"loading-dock":{years:20,replacementCostPerUnit:15e3},mewp:{years:10,replacementCostPerUnit:25e3},"vent-fan":{years:12,replacementCostPerUnit:5e3},"ro-unit":{years:12,replacementCostPerUnit:35e3}};function Oi(e,t,a,r,n){if(a>t)return 0;switch(r){case"straight-line":default:return e/t;case"declining-balance":{let a=n??e;return Math.max(0,Math.min(2/t*a,a-.05*e))}case"sum-of-years":return(t-a+1)/(t*(t+1)/2)*(.95*e)}}var Ol=e.i(57796);let Oo=(0,X.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Oc={"Critical Power":"bg-red-500",Cooling:"bg-blue-500","Fire Safety":"bg-amber-500","Fuel System":"bg-orange-500","Water Treatment":"bg-cyan-500","BMS & IT":"bg-purple-500",Security:"bg-green-500",Civil:"bg-slate-500"},Od={critical:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800",high:"text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-950/30 border-amber-200 dark:border-amber-800",medium:"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",low:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700"},Ou={low:"bg-emerald-500",medium:"bg-amber-500",high:"bg-orange-500",critical:"bg-red-500"};function Om(){let{selectedCountry:t,inputs:a}=(0,$.useSimulationStore)(),[r,n]=(0,z.useState)("straight-line"),[s,i]=(0,z.useState)("depreciation"),[l,o]=(0,z.useState)(!1),c=(0,z.useMemo)(()=>t?function(e){let{country:t,itLoadKw:a,tierLevel:r,coolingType:n,coolingTopology:s,powerRedundancy:i,depreciationMethod:l,projectionYears:o}=e,c=o??25,d=t.economy.inflationRate,u=eS(a,2===r?3:r,"liquid"===n||"rdhx"===n?"pumped":"air",Math.ceil(.6*a),s??"perimeter",i??"2N"),m=[];for(let e of u){let t=Os[e.assetId];if(!t)continue;let a=eN.ASSETS.find(t=>t.id===e.assetId);if(!a)continue;let r=t.years,n=t.replacementCostPerUnit,s=n*e.count,i=Oi(s,r,1,l,s),o=s*Math.pow(1+d,r);m.push({assetId:e.assetId,name:a.name,category:a.category,count:e.count,usefulLifeYears:r,unitCost:n,totalAcquisitionCost:s,annualDepreciation:Math.round(i),replacementYear:r,replacementCost:Math.round(o)})}let x=m.reduce((e,t)=>e+t.totalAcquisitionCost,0),h=[...new Set(m.map(e=>e.category))],p=[],f=0,b={};m.forEach(e=>{b[e.assetId]=e.totalAcquisitionCost});for(let e=1;e<=c;e++){let t={},a=0;for(let r of h){let n=m.filter(e=>e.category===r),s=0;for(let t of n){let a=(e-1)%t.usefulLifeYears+1,r=Oi(t.totalAcquisitionCost,t.usefulLifeYears,a,l,b[t.assetId]);s+=r,"declining-balance"===l&&(b[t.assetId]=Math.max(.05*t.totalAcquisitionCost,(b[t.assetId]??t.totalAcquisitionCost)-r),e%t.usefulLifeYears==0&&(b[t.assetId]=t.totalAcquisitionCost))}t[r]=Math.round(s),a+=s}f+=a,p.push({year:e,byCategory:t,total:Math.round(a),cumulativeDepreciation:Math.round(f),bookValue:Math.round(Math.max(0,x-f))})}let g=[];for(let e of m)for(let t=e.usefulLifeYears;t<=c;t+=e.usefulLifeYears){let a=Math.pow(1+d,t);g.push({year:t,assetName:e.name,category:e.category,count:e.count,cost:Math.round(e.totalAcquisitionCost*a)})}g.sort((e,t)=>e.year-t.year);let y=g.reduce((e,t)=>e+t.cost,0),v=g.reduce((e,t)=>e+t.cost/Math.pow(1.08,t.year),0),j=m.map(e=>{let t=Math.max(0,e.usefulLifeYears-5),a=Math.round(t/e.usefulLifeYears*100),r=Math.min(.95,.02*Math.exp(.3*Math.min(1,5/e.usefulLifeYears)*5));return{assetId:e.assetId,name:e.name,category:e.category,healthPct:a,riskLevel:a>75?"low":a>50?"medium":a>25?"high":"critical",failureProbability:Math.round(1e3*r)/1e3,remainingLife:t}}),k=[],w=0;for(let e=0;e<=c;e++){let t=0===e?x:p[e-1]?.bookValue??0;w+=g.filter(t=>t.year===e).reduce((e,t)=>e+t.cost,0),k.push({year:e,bookValue:Math.round(t),cumulativeReplacement:Math.round(w)})}let N=m.reduce((e,t)=>{for(let a=Math.max(1,t.usefulLifeYears-2);a<=c;a+=t.usefulLifeYears){let r=Math.pow(1+d,a);e+=t.totalAcquisitionCost*r/Math.pow(1.08,a)}return e},0),C=m.reduce((e,t)=>{for(let a=t.usefulLifeYears+2;a<=c+2&&!(a>c);a+=t.usefulLifeYears){let r=Math.pow(1+d,a);e+=t.totalAcquisitionCost*r*1.3/Math.pow(1.08,a)}return e},0),S=m.reduce((e,t)=>{let a=Math.min(1,5/t.usefulLifeYears);return e+.02*t.totalAcquisitionCost*a*a},0),P=[],M={};g.forEach(e=>{M[e.year]||(M[e.year]=[]),M[e.year].push(e)});let O=0,E=0;for(let[e,t]of Object.entries(M)){let a=t.reduce((e,t)=>e+t.cost,0);a>E&&(E=a,O=Number(e))}for(let[e,t]of Object.entries(M)){let a=Number(e);t.reduce((e,t)=>e+t.cost,0);let r=t.some(e=>"Critical Power"===e.category),n=t.some(e=>"Cooling"===e.category);r&&t.length>=2?P.push({year:a,description:`Multiple critical power replacements (${t.filter(e=>"Critical Power"===e.category).map(e=>e.assetName).join(", ")})  high outage risk`,severity:"critical"}):r&&P.push({year:a,description:`${t.filter(e=>"Critical Power"===e.category).map(e=>`${e.count}x ${e.assetName}`).join(", ")} replacement due`,severity:"high"}),n&&t.filter(e=>"Cooling"===e.category).length>=2&&P.push({year:a,description:`Multiple cooling asset replacements  thermal management risk`,severity:"high"}),a===O&&P.push({year:a,description:`Peak CAPEX year  ${eo(E)} replacement spend`,severity:"medium"}),t.length>=4&&P.push({year:a,description:`${t.length} concurrent asset replacements  logistical & procurement risk`,severity:"medium"})}for(let e of m)e.usefulLifeYears<=10&&P.push({year:e.usefulLifeYears-1,description:`${e.name} approaching end-of-life  begin procurement planning`,severity:"low"});P.sort((e,t)=>e.year-t.year||("critical"===e.severity?-1:1));let A=m.reduce((e,t)=>e+t.count,0),T=m.reduce((e,t)=>e+5*t.count,0),I=A>0?Math.round(T/A*10)/10:0,R=[...m].sort((e,t)=>e.usefulLifeYears-5-(t.usefulLifeYears-5)),D=R.length>0?R[0].name:"N/A",L=g.length>0?g[0]:null;return{assets:m,totalAcquisitionCost:x,annualDepreciationSchedule:p,replacementTimeline:g,totalLifecycleCost25yr:Math.round(x+y),annualCapexRefresh:Math.round(y/c),npvOfReplacements:Math.round(v),depreciationMethod:l,projectionYears:c,healthScores:j,financialImpact:{earlyReplacementNpv:Math.round(N),deferredReplacementNpv:Math.round(C),maintenanceCostOfAging:Math.round(S),savingsFromEarly:Math.round(C-N)},bookValueCurve:k,riskEvents:P,portfolioSummary:{avgAssetAge:I,oldestAsset:D,nextReplacement:L?{name:L.assetName,year:L.year,cost:L.cost}:{name:"N/A",year:0,cost:0},peakSpendYear:O,peakSpendAmount:Math.round(E)}}}({country:t,itLoadKw:a.itLoad,tierLevel:a.tierLevel,coolingType:a.coolingType,coolingTopology:a.coolingTopology,powerRedundancy:a.powerRedundancy,depreciationMethod:r}):null,[t,a.itLoad,a.tierLevel,a.coolingType,a.coolingTopology,a.powerRedundancy,r]);if(!c)return(0,F.jsx)("div",{className:"text-slate-500 text-center py-20",children:"Select a country to begin."});let d=[...new Set(c.assets.map(e=>e.category))],u=Math.max(...c.annualDepreciationSchedule.map(e=>e.total)),m={};c.replacementTimeline.forEach(e=>{m[e.year]||(m[e.year]={items:[],total:0}),m[e.year].items.push(e),m[e.year].total+=e.cost});let{portfolioSummary:x,financialImpact:h,healthScores:p}=c,f=p.filter(e=>"critical"===e.riskLevel).length,b=p.filter(e=>"high"===e.riskLevel).length;return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-xl",children:(0,F.jsx)(Ol.LineChart,{className:"w-6 h-6 text-blue-500"})}),"Asset Lifecycle Curves"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:[c.assets.length," asset types  ",r," depreciation over ",c.projectionYears,"-year horizon"]})]}),(0,F.jsx)(eI,{isGenerating:l,onExport:async()=>{o(!0);try{let{generateAssetLifecyclePDF:a}=await e.A(28094);await a(t,c)}catch(e){console.error("Asset Lifecycle PDF error:",e)}finally{o(!1)}},label:"PDF",className:"px-2 py-1 text-[10px]"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsxs)("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:["Depreciation Method: ",(0,F.jsx)(ei,{content:"Annual accounting depreciation based on asset useful life. Straight-line spreads cost evenly; declining balance front-loads; sum-of-years accelerates early depreciation."})]}),(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[{id:"straight-line",label:"Straight-Line",tooltip:"Equal annual depreciation over asset life. Simplest method, spreads cost evenly."},{id:"declining-balance",label:"Declining Balance",tooltip:"Accelerated depreciation  higher expense in early years, decreasing over time. Matches faster initial value loss."},{id:"sum-of-years",label:"Sum-of-Years",tooltip:"Accelerated method using remaining life fraction. Front-loads depreciation more aggressively than declining balance."}].map(e=>(0,F.jsxs)("button",{onClick:()=>n(e.id),className:(0,eh.default)("px-3 py-1.5 text-xs font-medium rounded-md transition-colors flex items-center gap-1",r===e.id?"bg-white dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[e.label," ",(0,F.jsx)(ei,{content:e.tooltip})]},e.id))})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Total Acquisition",value:eo(c.totalAcquisitionCost),icon:J,color:"cyan",tooltip:"Total estimated capital cost to replace an asset at end-of-life, including procurement, installation, and commissioning."},{label:"25-Year Lifecycle",value:eo(c.totalLifecycleCost25yr),icon:er,color:"blue",tooltip:"Total cost of ownership over a 25-year horizon, including initial acquisition, scheduled replacements, and depreciation."},{label:"Annual Refresh Avg",value:eo(c.annualCapexRefresh),icon:Oo,color:"amber",tooltip:"Yearly budget allocation for scheduled asset replacements and refresh cycles, averaged over the projection period."},{label:"NPV of Replacements",value:eo(c.npvOfReplacements),icon:Cn,color:"green",tooltip:"Net Present Value of all future replacement costs, discounted to today. Lower NPV indicates more favorable long-term CAPEX exposure."}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)(e.icon,{className:`w-4 h-4 text-${e.color}-500`}),(0,F.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.label," ",(0,F.jsx)(ei,{content:e.tooltip})]})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.value})]},t))}),(0,F.jsx)("div",{className:"bg-indigo-50 dark:bg-indigo-950/30 border border-indigo-100 dark:border-indigo-800 rounded-xl p-4",children:(0,F.jsxs)("div",{className:"flex gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg h-fit",children:(0,F.jsx)(en.Activity,{className:"w-5 h-5 text-indigo-700 dark:text-indigo-400"})}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"font-semibold text-indigo-900 dark:text-indigo-200 mb-1 flex items-center gap-1",children:["Portfolio Assessment ",(0,F.jsx)(ei,{content:"AI-generated narrative summarizing the facility's asset portfolio status, upcoming replacement events, and overall lifecycle cost outlook."})]}),(0,F.jsxs)("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["This facility manages ",c.assets.length," asset types with a total portfolio value of ",eo(c.totalAcquisitionCost),"."," ","The average asset age is ",x.avgAssetAge," years, with ",x.oldestAsset," being the closest to end-of-life."," ","Next scheduled replacement: ",x.nextReplacement.name," at Year ",x.nextReplacement.year," (",eo(x.nextReplacement.cost),")."," ","Peak CAPEX spend occurs in Year ",x.peakSpendYear," at ",eo(x.peakSpendAmount),".",f>0&&` Warning: ${f} asset types are at critical health status.`,b>0&&` ${b} asset types are at high risk.`," ","The 25-year lifecycle cost of ",eo(c.totalLifecycleCost25yr)," averages ",eo(c.annualCapexRefresh),"/yr in refresh budget."]})]})]})}),(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[{id:"depreciation",label:"Depreciation Schedule",tooltip:"Annual depreciation expense by category with book value and cumulative replacement cost curves."},{id:"replacement",label:"Replacement Timeline",tooltip:"Year-by-year CAPEX replacement forecast showing when major equipment refresh events occur."},{id:"health",label:"Health & Risk",tooltip:"Current condition assessment and failure probability for each asset type, with projected risk events."},{id:"assets",label:"Asset Detail",tooltip:"Full inventory table with per-unit cost, useful life, depreciation, and replacement year for every tracked asset."}].map(e=>(0,F.jsxs)("button",{onClick:()=>i(e.id),className:(0,eh.default)("flex-1 px-3 py-2 text-xs font-medium rounded-md transition-colors flex items-center justify-center gap-1",s===e.id?"bg-white dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[e.label," ",(0,F.jsx)(ei,{content:e.tooltip})]},e.id))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:["depreciation"===s&&(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Annual Depreciation by Category (",r,") ",(0,F.jsx)(ei,{content:"Yearly depreciation expense broken down by asset category. Shows how capital costs are allocated over each asset's useful life under the selected depreciation method."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Each bar shows category-level depreciation expense for that year. Width is proportional to total annual depreciation."}),(0,F.jsx)("div",{className:"space-y-1",children:c.annualDepreciationSchedule.slice(0,25).map(e=>(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsxs)("span",{className:"w-10 text-right text-xs font-mono text-slate-500",children:["Y",e.year]}),(0,F.jsx)("div",{className:"flex-1 flex h-5 bg-slate-100 dark:bg-slate-700 rounded overflow-hidden",children:d.map(t=>{let a=e.byCategory[t]||0,r=u>0?a/u*100:0;return r>0?(0,F.jsx)("div",{className:`${Oc[t]||"bg-slate-400"} h-full`,style:{width:`${r}%`},title:`${t}: ${eo(a)}`},t):null})}),(0,F.jsx)("span",{className:"w-16 text-right text-xs font-mono text-slate-700 dark:text-slate-300",children:eo(e.total)})]},e.year))}),(0,F.jsx)("div",{className:"flex flex-wrap gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:d.map(e=>(0,F.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px]",children:[(0,F.jsx)("div",{className:`w-2.5 h-2.5 rounded ${Oc[e]||"bg-slate-400"}`}),(0,F.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:e})]},e))})]}),(0,F.jsxs)("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-1 flex items-center gap-1",children:["Book Value vs Cumulative Replacement Cost ",(0,F.jsx)(ei,{content:"Book value declines as assets depreciate. Cumulative replacement cost rises each time assets are refreshed. Crossing point indicates when total replacement spend exceeds original acquisition value."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Shows the declining book value of the portfolio against cumulative replacement spend over the projection period."}),(0,F.jsx)(iB,{width:"100%",height:280,children:(0,F.jsxs)(f5,{data:c.bookValueCurve,children:[(0,F.jsx)("defs",{children:(0,F.jsxs)("linearGradient",{id:"bvGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,F.jsx)("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),(0,F.jsx)("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),(0,F.jsx)(kE,{strokeDasharray:"3 3",stroke:"#334155",opacity:.3}),(0,F.jsx)(kt,{dataKey:"year",tick:{fontSize:11,fill:"#94a3b8"},label:{value:"Year",position:"insideBottom",offset:-5,fill:"#64748b",fontSize:11}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"},tickFormatter:e=>eo(e)}),(0,F.jsx)(wn,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8},formatter:(e,t)=>[eo(e),"bookValue"===t?"Book Value":"Cum. Replacement"]}),(0,F.jsx)(Ce,{type:"monotone",dataKey:"bookValue",fill:"url(#bvGrad)",stroke:"#06b6d4",strokeWidth:2}),(0,F.jsx)(jT,{type:"stepAfter",dataKey:"cumulativeReplacement",stroke:"#f59e0b",strokeWidth:2,dot:!1})]})}),(0,F.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs text-slate-500",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-cyan-500 rounded"}),(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["Book Value ",(0,F.jsx)(ei,{content:"Net book value of all assets after accumulated depreciation. Declines over time as assets age toward end-of-life."})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("div",{className:"w-3 h-0.5 bg-amber-500 rounded"}),(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["Cumulative Replacement Cost ",(0,F.jsx)(ei,{content:"Running total of all replacement expenditures over the projection period. Step increases correspond to asset refresh events."})]})]})]})]})]}),"replacement"===s&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["CAPEX Replacement Timeline (25 Years) ",(0,F.jsx)(ei,{content:"Planned timeline for asset refresh over 25 years, coordinated to minimize concurrent outage risk. Bars show annual replacement spend."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Annual replacement spend showing when major CAPEX events occur. Budget for peak years and spread replacements to minimize operational risk."}),(0,F.jsx)("div",{className:"space-y-1",children:Array.from({length:25},(e,t)=>t+1).map(e=>{let t=m[e],a=t?.total||0,r=Math.max(...Object.values(m).map(e=>e.total),1),n=a>0?a/r*100:0,s=e===x.peakSpendYear;return(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsxs)("span",{className:(0,eh.default)("w-10 text-right text-xs font-mono",s?"text-red-500 font-bold":"text-slate-500"),children:["Y",e]}),(0,F.jsx)("div",{className:"flex-1 h-5 bg-slate-100 dark:bg-slate-700 rounded overflow-hidden",children:a>0&&(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded",s?"bg-red-500":"bg-blue-500"),style:{width:`${n}%`}})}),(0,F.jsx)("span",{className:(0,eh.default)("w-16 text-right text-xs font-mono",s?"text-red-500 font-bold":"text-slate-700 dark:text-slate-300"),children:a>0?eo(a):""})]},e)})}),Object.entries(m).slice(0,10).map(([e,t])=>(0,F.jsxs)("div",{className:"mt-2 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,F.jsxs)("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-1",children:["Year ",e,"  ",eo(t.total)," total"]}),(0,F.jsx)("div",{className:"space-y-0.5",children:t.items.map((e,t)=>(0,F.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,F.jsxs)("span",{className:"text-slate-500",children:[e.count,"x ",e.assetName]}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-mono",children:eo(e.cost)})]},t))})]},e))]}),"health"===s&&(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Asset Health & Risk Assessment ",(0,F.jsx)(ei,{content:"Health scores based on asset age relative to useful life. Failure probability follows an exponential curve  risk increases rapidly as assets approach end-of-life."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Each card shows current health status assuming average 5-year operating age. Monitor critical and high-risk assets for proactive replacement."})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:p.map(e=>(0,F.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-900/30 rounded-lg border border-slate-200 dark:border-slate-700 p-3",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,F.jsx)("span",{className:"text-xs font-medium text-slate-800 dark:text-slate-200 truncate flex-1",children:e.name}),(0,F.jsx)("span",{className:(0,eh.default)("text-[9px] font-bold uppercase px-1.5 py-0.5 rounded","critical"===e.riskLevel?"bg-red-100 dark:bg-red-950/50 text-red-600 dark:text-red-400":"high"===e.riskLevel?"bg-amber-100 dark:bg-amber-950/50 text-amber-600 dark:text-amber-400":"medium"===e.riskLevel?"bg-blue-100 dark:bg-blue-950/50 text-blue-600 dark:text-blue-400":"bg-emerald-100 dark:bg-emerald-950/50 text-emerald-600 dark:text-emerald-400"),children:e.riskLevel})]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1",children:e.category}),(0,F.jsx)("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded-full",Ou[e.riskLevel]),style:{width:`${e.healthPct}%`}})}),(0,F.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:[e.healthPct,"% health"]}),(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-0.5",children:[e.remainingLife,"yr left ",(0,F.jsx)(ei,{content:"Estimated years of useful life remaining based on age, condition, and maintenance history."})]})]}),(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 dark:text-slate-500 mt-1 flex items-center gap-0.5",children:["Failure prob: ",(100*e.failureProbability).toFixed(1),"% ",(0,F.jsx)(ei,{content:"Annual probability of catastrophic failure based on the Weibull distribution and current asset age."})]})]},e.assetId))}),(0,F.jsxs)("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-1",children:[(0,F.jsx)(eM,{className:"w-4 h-4 text-amber-500"})," Risk Events Timeline",(0,F.jsx)(ei,{content:"Projected risk events from the replacement schedule. Critical events indicate multiple high-impact replacements in the same year."})]}),(0,F.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:c.riskEvents.slice(0,20).map((e,t)=>(0,F.jsxs)("div",{className:(0,eh.default)("flex items-start gap-3 px-3 py-2 rounded-lg border",Od[e.severity]),children:[(0,F.jsxs)("span",{className:"text-xs font-mono font-bold w-8 shrink-0",children:["Y",e.year]}),(0,F.jsx)("span",{className:"text-xs flex-1",children:e.description}),(0,F.jsx)("span",{className:"text-[9px] font-bold uppercase",children:e.severity})]},t))})]})]}),"assets"===s&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Asset Detail (",c.assets.length," asset types) ",(0,F.jsx)(ei,{content:"Total number of tracked asset types across all categories in the facility. Each row shows per-unit and aggregate cost, depreciation, and replacement year."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Complete inventory of tracked assets with cost, lifecycle, and depreciation data. Health column shows current condition assessment."}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-50 dark:bg-slate-800/80",children:[(0,F.jsx)("th",{className:"text-left px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center gap-0.5",children:["Asset ",(0,F.jsx)(ei,{content:"Equipment name and category. Color dot indicates the asset category grouping."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-0.5",children:["Qty ",(0,F.jsx)(ei,{content:"Number of units of this asset type deployed in the facility."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-0.5",children:["Life (yr) ",(0,F.jsx)(ei,{content:"Expected useful life in years before the asset requires replacement."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-0.5",children:["Unit Cost ",(0,F.jsx)(ei,{content:"Replacement cost per unit for this asset category."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-0.5",children:["Total Cost ",(0,F.jsx)(ei,{content:"Aggregate acquisition cost (unit cost multiplied by quantity deployed)."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-0.5",children:["Annual Dep. ",(0,F.jsx)(ei,{content:"Yearly depreciation expense for this asset under the selected depreciation method."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-0.5",children:["Health ",(0,F.jsx)(ei,{content:"Current asset health score (0-100%) based on age, maintenance history, and environmental factors."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-0.5",children:["Replace ",(0,F.jsx)(ei,{content:"Projected replacement year based on useful life and current age of the asset."})]})})]})}),(0,F.jsx)("tbody",{children:c.assets.map(e=>{let t=p.find(t=>t.assetId===e.assetId);return(0,F.jsxs)("tr",{className:"border-t border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-3 py-2",children:(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:`w-2 h-2 rounded-full ${Oc[e.category]||"bg-slate-400"}`}),(0,F.jsx)("span",{className:"text-slate-800 dark:text-slate-200 text-xs",children:e.name})]})}),(0,F.jsx)("td",{className:"px-3 py-2 text-center font-mono text-slate-700 dark:text-slate-300",children:e.count}),(0,F.jsx)("td",{className:"px-3 py-2 text-center font-mono text-slate-700 dark:text-slate-300",children:e.usefulLifeYears}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:eo(e.unitCost)}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:eo(e.totalAcquisitionCost)}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:eo(e.annualDepreciation)}),(0,F.jsx)("td",{className:"px-3 py-2 text-center",children:t&&(0,F.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,F.jsx)("div",{className:(0,eh.default)("w-2 h-2 rounded-full",Ou[t.riskLevel])}),(0,F.jsxs)("span",{className:"text-[10px] font-mono",children:[t.healthPct,"%"]})]})}),(0,F.jsxs)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:["Y",e.replacementYear]})]},e.assetId)})}),(0,F.jsx)("tfoot",{children:(0,F.jsxs)("tr",{className:"border-t-2 border-slate-300 dark:border-slate-600 font-bold",children:[(0,F.jsx)("td",{className:"px-3 py-2 text-slate-900 dark:text-white",children:"Total"}),(0,F.jsx)("td",{className:"px-3 py-2 text-center text-slate-900 dark:text-white",children:c.assets.reduce((e,t)=>e+t.count,0)}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-900 dark:text-white",children:eo(c.totalAcquisitionCost)}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-900 dark:text-white",children:eo(c.assets.reduce((e,t)=>e+t.annualDepreciation,0))}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{})]})})]})})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-1 flex items-center gap-2",children:[(0,F.jsx)(MV,{className:"w-4 h-4 text-emerald-500"}),"Financial Impact  Replacement Strategy",(0,F.jsx)(ei,{content:"Compares NPV of three strategies: replacing assets 2 years early, on schedule, and 2 years deferred. Deferred replacement incurs a 15% failure cost penalty per year."})]}),(0,F.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"NPV comparison of early (proactive), on-time, and deferred replacement strategies. Deferred replacement carries 15% annual failure cost penalty."}),(0,F.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,F.jsxs)("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Cj,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"}),(0,F.jsxs)("span",{className:"text-[10px] text-emerald-700 dark:text-emerald-400 uppercase font-semibold flex items-center gap-0.5",children:["Early (2yr) ",(0,F.jsx)(ei,{content:"NPV of replacing all assets 2 years before scheduled end-of-life. Higher upfront cost but avoids failure risk and unplanned downtime."})]})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:eo(h.earlyReplacementNpv)})]}),(0,F.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(Q,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"}),(0,F.jsxs)("span",{className:"text-[10px] text-blue-700 dark:text-blue-400 uppercase font-semibold flex items-center gap-0.5",children:["On-Time ",(0,F.jsx)(ei,{content:"NPV of replacing assets exactly at their scheduled end-of-life. Baseline strategy with no early or deferred cost adjustments."})]})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:eo(c.npvOfReplacements)})]}),(0,F.jsxs)("div",{className:"bg-red-50 dark:bg-red-950/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(w4,{className:"w-3.5 h-3.5 text-red-600 dark:text-red-400"}),(0,F.jsxs)("span",{className:"text-[10px] text-red-700 dark:text-red-400 uppercase font-semibold flex items-center gap-0.5",children:["Deferred (+2yr) ",(0,F.jsx)(ei,{content:"NPV of deferring replacements by 2 years beyond end-of-life. Incurs a 15% annual failure cost penalty for each deferred year."})]})]}),(0,F.jsx)("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:eo(h.deferredReplacementNpv)})]}),(0,F.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-950/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,F.jsx)(J,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"}),(0,F.jsxs)("span",{className:"text-[10px] text-amber-700 dark:text-amber-400 uppercase font-semibold flex items-center gap-0.5",children:["Aging Maint Cost ",(0,F.jsx)(ei,{content:"Estimated annual maintenance cost increase due to aging assets operating beyond optimal life. Reflects higher repair frequency and parts scarcity."})]})]}),(0,F.jsxs)("div",{className:"text-lg font-bold text-amber-600 dark:text-amber-400",children:[eo(h.maintenanceCostOfAging),"/yr"]})]})]}),h.savingsFromEarly>0&&(0,F.jsx)("div",{className:"mt-3 p-3 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:(0,F.jsxs)("p",{className:"text-xs text-emerald-800 dark:text-emerald-300",children:["Proactive replacement saves approximately ",eo(h.savingsFromEarly)," in NPV compared to deferred replacement, by avoiding failure-related costs and unplanned downtime penalties."]})})]})]})}let Ox=[{tier:"basic",label:"Basic BMS",annualLicenseCost:15e3,features:["Temperature monitoring","Basic alerts","Manual reporting"],sensorIntegration:.6},{tier:"standard",label:"Standard DCIM",annualLicenseCost:45e3,features:["Real-time dashboards","Capacity planning","Automated alerts","Power monitoring","Trend analysis"],sensorIntegration:.85},{tier:"enterprise",label:"Enterprise DCIM",annualLicenseCost:95e3,features:["AI/ML predictive analytics","Digital twin","CFD modeling","Automated workflows","API integrations","Multi-site federation"],sensorIntegration:1}],Oh=(0,X.default)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),Op=(0,X.default)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),Of={temperature:"bg-red-500",humidity:"bg-blue-500","power-quality":"bg-amber-500",vibration:"bg-orange-500","fluid-leak":"bg-cyan-500",airflow:"bg-green-500","door-access":"bg-purple-500"},Ob={temperature:"Monitors inlet/outlet air and equipment surface temperatures. Detects hot spots, cooling failures, and airflow short-circuits before thermal thresholds are breached.",humidity:"Tracks relative humidity levels across the data hall. Prevents condensation (too high) and electrostatic discharge (too low)  both leading causes of IT equipment failure.","power-quality":"Monitoring voltage, current, harmonics, and power factor. Detects issues that degrade UPS, PDU, and IT equipment lifespan.",vibration:"Continuous vibration monitoring on rotating equipment (generators, CRAC fans, pumps). Detects bearing wear, misalignment, and imbalance before catastrophic failure.","fluid-leak":"Detects water and refrigerant leaks under raised floors, around CRAH/CRAC units, and near chilled water piping. Early detection prevents floor flooding and equipment damage.",airflow:"Measures air velocity and differential pressure across equipment and containment. Identifies blanking panel gaps, containment breaches, and undersized cooling capacity.","door-access":"Monitors cabinet door open/close status and physical access events. Detects unauthorized access, doors left open (breaking containment), and correlates with thermal events."};function Og(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),[a,r]=(0,z.useState)(["temperature","humidity","power-quality","vibration","fluid-leak","airflow","door-access"]),[n,s]=(0,z.useState)("standard"),i=(0,z.useMemo)(()=>e?function(e){let{country:t,itLoadKw:a,tierLevel:r,coolingType:n,coolingTopology:s,powerRedundancy:i,enabledCategories:l,dcimTier:o}=e,c=o??"standard",d=Math.ceil(a/8),u=eS(a,2===r?3:r,"liquid"===n||"rdhx"===n?"pumped":"air",Math.ceil(.6*a),s??"perimeter",i??"2N"),m=u.find(e=>"gen-set"===e.assetId)?.count??2,x=u.find(e=>"ups-module"===e.assetId)?.count??2,h=u.find(e=>"pac-unit"===e.assetId)?.count??4,p=u.find(e=>"chiller-air"===e.assetId)?.count??2,f=l??["temperature","humidity","power-quality","vibration","fluid-leak","airflow","door-access"],b=[{category:"temperature",label:"Temperature Sensors",countFormula:"3 per rack + 2 per CRAC + 4 per chiller",count:3*d+2*h+4*p,unitCost:85,totalCost:0,failureDetectionRate:.35,energySavingsPercent:.08},{category:"humidity",label:"Humidity Sensors",countFormula:"1 per 4 racks + 1 per CRAC",count:Math.ceil(d/4)+h,unitCost:120,totalCost:0,failureDetectionRate:.15,energySavingsPercent:.03},{category:"power-quality",label:"Power Quality Meters",countFormula:"1 per UPS + 1 per PDU bus + 1 per gen",count:x+Math.ceil(d/20)+m,unitCost:650,totalCost:0,failureDetectionRate:.4,energySavingsPercent:.05},{category:"vibration",label:"Vibration Sensors",countFormula:"2 per gen + 1 per chiller + 1 per CRAC motor",count:2*m+p+h,unitCost:280,totalCost:0,failureDetectionRate:.45,energySavingsPercent:.02},{category:"fluid-leak",label:"Fluid Leak Detection",countFormula:"1 per 6 racks + 2 per chiller + 1 per CRAC",count:Math.ceil(d/6)+2*p+h,unitCost:180,totalCost:0,failureDetectionRate:.5,energySavingsPercent:.01},{category:"airflow",label:"Airflow Sensors",countFormula:"1 per 3 racks (hot/cold aisle)",count:Math.ceil(d/3),unitCost:200,totalCost:0,failureDetectionRate:.2,energySavingsPercent:.06},{category:"door-access",label:"Door / Access Sensors",countFormula:"2 per room + 1 per cabinet row",count:2*Math.ceil(d/40)+Math.ceil(d/20),unitCost:95,totalCost:0,failureDetectionRate:.05,energySavingsPercent:0}].map(e=>({...e,totalCost:e.count*e.unitCost,enabled:f.includes(e.category)})),g=b.filter(e=>e.enabled),y=g.reduce((e,t)=>e+t.totalCost,0),v=g.reduce((e,t)=>e+t.count,0),j=t.risk.downtimeCostPerMin,k=(4===r?26:3===r?96:264)*(g.length>0?g.reduce((e,t)=>e+t.failureDetectionRate,0)/g.length:0)*j,w=8760*a*t.economy.electricityRate*Math.min(.2,g.reduce((e,t)=>e+t.energySavingsPercent,0)),N=k+w,C=Math.round(Ox.find(e=>e.tier===c).annualLicenseCost*Math.max(1,a/5e3)),S=N-C,P=-y;for(let e=1;e<=5;e++)P+=S/Math.pow(1.08,e);let M=d>0?Math.round(v/d*10)/10:0;return{sensors:b,totalSensorInvestment:Math.round(y),totalSensorCount:v,annualAvertedDowntimeCost:Math.round(k),annualEnergySavings:Math.round(w),totalAnnualBenefit:Math.round(N),roiPercent:Math.round(y>0?S/y*100:0),paybackYears:Math.round(10*(S>0?y/S:99))/10,npv5Year:Math.round(P),sensorDensityPerRack:M,platformLicenseCostAnnual:C,dcimPlatforms:Ox.map(e=>({...e,annualLicenseCost:Math.round(e.annualLicenseCost*Math.max(1,a/5e3))})),selectedTier:c}}({country:e,itLoadKw:t.itLoad,tierLevel:t.tierLevel,coolingType:t.coolingType,coolingTopology:t.coolingTopology,powerRedundancy:t.powerRedundancy,enabledCategories:a,dcimTier:n}):null,[e,t.itLoad,t.tierLevel,t.coolingType,t.coolingTopology,t.powerRedundancy,a,n]);return i?(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-purple-500/10 rounded-xl",children:(0,F.jsx)(en.Activity,{className:"w-6 h-6 text-purple-500"})}),"Condition-Based Monitoring ROI"]}),(0,F.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Module 43  BMS/DCIM sensor investment vs failure avoidance savings"})]}),(0,F.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{label:"Sensor Investment",value:eo(i.totalSensorInvestment),sub:`${i.totalSensorCount} sensors`,icon:J,color:"cyan",tip:"Total one-time capital expenditure for all enabled sensor hardware. Does not include installation labor or DCIM platform licensing."},{label:"ROI",value:`${i.roiPercent}%`,sub:`Payback: ${i.paybackYears} yrs`,icon:ee.TrendingUp,color:i.roiPercent>100?"emerald":i.roiPercent>50?"amber":"red",tip:"Return on Investment  annual net benefit divided by sensor investment. Above 100% means the system pays for itself within one year."},{label:"Annual Benefit",value:eo(i.totalAnnualBenefit),sub:"Downtime + Energy savings",icon:eX,color:"green",tip:"Combined yearly value of avoided downtime costs and energy optimization savings from condition-based monitoring."},{label:"Downtime Averted",value:eo(i.annualAvertedDowntimeCost),sub:"Annual failure avoidance",icon:eJ.Zap,color:"amber",tip:"Annual cost avoidance from catching failures early vs reactive repair. Includes avoided downtime penalties and SLA credits."},{label:"Energy Savings",value:eo(i.annualEnergySavings),sub:"Annual energy optimization",icon:er,color:"blue",tip:"Yearly energy cost reduction from sensor-driven optimization  e.g., adjusting cooling setpoints, detecting airflow short-circuits, and load balancing."},{label:"5-Year NPV",value:eo(i.npv5Year),sub:`${i.sensorDensityPerRack} sensors/rack`,icon:Z,color:i.npv5Year>0?"emerald":"red",tip:"Net Present Value over 5 years  total discounted benefits minus sensor investment. Positive NPV confirms the project is financially viable at standard discount rates."}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)(e.icon,{className:`w-4 h-4 text-${e.color}-500`}),(0,F.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.label,(0,F.jsx)(ei,{content:e.tip})]})]}),(0,F.jsx)("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.value}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:e.sub})]},t))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-1",children:["Sensor Categories",(0,F.jsx)(ei,{content:"Toggle individual sensor types on/off to model different CBM deployment scopes. Each category targets specific failure modes and contributes to overall detection coverage."})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"bg-slate-50 dark:bg-slate-800/80",children:[(0,F.jsx)("th",{className:"text-left px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center gap-1",children:["Category",(0,F.jsx)(ei,{content:"Sensor type grouped by physical measurement domain. Each category monitors a different failure mode vector."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Enable",(0,F.jsx)(ei,{content:"Toggle this sensor category on/off. Disabled categories are excluded from investment totals and benefit calculations."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Count",(0,F.jsx)(ei,{content:"Number of sensor points deployed, auto-calculated from facility size, rack count, and equipment inventory."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Unit $",(0,F.jsx)(ei,{content:"Cost per individual sensor point including the probe, transmitter, and commissioning. Excludes cabling and integration labor."})]})}),(0,F.jsx)("th",{className:"text-right px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-end gap-1",children:["Total $",(0,F.jsx)(ei,{content:"Total hardware cost for this sensor category (unit cost multiplied by sensor count)."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Detection",(0,F.jsx)(ei,{content:"Failure detection rate  the percentage of equipment failures this sensor category can identify before they cause unplanned downtime."})]})}),(0,F.jsx)("th",{className:"text-center px-3 py-2 text-slate-500 font-medium",children:(0,F.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["Energy %",(0,F.jsx)(ei,{content:"Energy savings contribution  the percentage of total facility energy this sensor category can help optimize through better control and early anomaly detection."})]})})]})}),(0,F.jsx)("tbody",{children:i.sensors.map(e=>(0,F.jsxs)("tr",{className:(0,eh.default)("border-t border-slate-100 dark:border-slate-800 transition-opacity",!e.enabled&&"opacity-40"),children:[(0,F.jsxs)("td",{className:"px-3 py-2",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${Of[e.category]}`}),(0,F.jsxs)("span",{className:"text-slate-800 dark:text-slate-200 font-medium flex items-center gap-1",children:[e.label,(0,F.jsx)(ei,{content:Ob[e.category]})]})]}),(0,F.jsx)("p",{className:"text-[10px] text-slate-500 ml-4",children:e.countFormula})]}),(0,F.jsx)("td",{className:"px-3 py-2 text-center",children:(0,F.jsx)("button",{onClick:()=>{var t;return t=e.category,void r(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"text-slate-500 hover:text-cyan-500",children:e.enabled?(0,F.jsx)(Op,{className:"w-5 h-5 text-cyan-500"}):(0,F.jsx)(Oh,{className:"w-5 h-5"})})}),(0,F.jsx)("td",{className:"px-3 py-2 text-center font-mono text-slate-700 dark:text-slate-300",children:e.count}),(0,F.jsxs)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:["$",e.unitCost]}),(0,F.jsx)("td",{className:"px-3 py-2 text-right font-mono text-slate-700 dark:text-slate-300",children:eo(e.totalCost)}),(0,F.jsx)("td",{className:"px-3 py-2 text-center",children:(0,F.jsxs)("span",{className:(0,eh.default)("text-xs px-1.5 py-0.5 rounded font-medium",e.failureDetectionRate>=.4?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":e.failureDetectionRate>=.2?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"),children:[(100*e.failureDetectionRate).toFixed(0),"%"]})}),(0,F.jsx)("td",{className:"px-3 py-2 text-center font-mono text-slate-700 dark:text-slate-300",children:e.energySavingsPercent>0?`${(100*e.energySavingsPercent).toFixed(0)}%`:""})]},e.category))}),(0,F.jsx)("tfoot",{children:(0,F.jsxs)("tr",{className:"border-t-2 border-slate-300 dark:border-slate-600 font-bold",children:[(0,F.jsx)("td",{className:"px-3 py-2 text-slate-900 dark:text-white",children:"Total (Enabled)"}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{className:"px-3 py-2 text-center text-slate-900 dark:text-white",children:i.totalSensorCount}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{className:"px-3 py-2 text-right text-slate-900 dark:text-white",children:eo(i.totalSensorInvestment)}),(0,F.jsx)("td",{}),(0,F.jsx)("td",{})]})})]})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-1",children:["Investment vs Annual Benefit",(0,F.jsx)(ei,{content:"Side-by-side comparison of one-time sensor deployment cost against recurring annual savings from failure prevention and energy optimization."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:["Investment (One-Time)",(0,F.jsx)(ei,{content:"Capital expenditure for sensor hardware. This is a one-time cost that does not recur annually."})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:["Sensor Hardware",(0,F.jsx)(ei,{content:"Sum of all enabled sensor unit costs. Includes temperature probes, humidity sensors, vibration accelerometers, leak detection cables, and other monitoring devices."})]}),(0,F.jsx)("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:eo(i.totalSensorInvestment)})]}),(0,F.jsxs)("div",{className:"flex justify-between text-sm border-t border-slate-200 dark:border-slate-700 pt-2",children:[(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Total Investment",(0,F.jsx)(ei,{content:"Complete one-time capital outlay for the CBM sensor deployment. Does not include recurring DCIM licensing."})]}),(0,F.jsx)("span",{className:"font-mono font-bold text-slate-900 dark:text-white",children:eo(i.totalSensorInvestment)})]})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("h4",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:["Annual Benefits",(0,F.jsx)(ei,{content:"Recurring yearly savings from condition-based monitoring. Net of DCIM platform licensing costs."})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:["Downtime Averted",(0,F.jsx)(ei,{content:"Estimated annual savings from detecting failures before they cause unplanned outages. Based on sensor detection rates and regional downtime cost per hour."})]}),(0,F.jsxs)("span",{className:"font-mono font-medium text-green-600 dark:text-green-400",children:["+",eo(i.annualAvertedDowntimeCost)]})]}),(0,F.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:["Energy Savings",(0,F.jsx)(ei,{content:"Annual energy cost reduction from sensor-driven optimization  e.g., dynamic cooling setpoint adjustment, containment breach detection, and load balancing."})]}),(0,F.jsxs)("span",{className:"font-mono font-medium text-green-600 dark:text-green-400",children:["+",eo(i.annualEnergySavings)]})]}),(0,F.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:["Platform License",(0,F.jsx)(ei,{content:"Annual DCIM/BMS software license cost for the selected platform tier. Required to collect, analyze, and act on sensor data."})]}),(0,F.jsxs)("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:["-",eo(i.platformLicenseCostAnnual)]})]}),(0,F.jsxs)("div",{className:"flex justify-between text-sm border-t border-slate-200 dark:border-slate-700 pt-2",children:[(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Net Annual Benefit",(0,F.jsx)(ei,{content:"Total annual benefit (downtime averted + energy savings) minus DCIM platform licensing. This is the recurring yearly value of the CBM program."})]}),(0,F.jsxs)("span",{className:"font-mono font-bold text-green-600 dark:text-green-400",children:["+",eo(i.totalAnnualBenefit-i.platformLicenseCostAnnual)]})]})]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-1",children:["DCIM Platform Tier",(0,F.jsx)(ei,{content:"Select the DCIM/BMS platform tier to model. Higher tiers offer better sensor integration, predictive analytics, and automation  but at higher annual license costs."})]}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:i.dcimPlatforms.map(e=>(0,F.jsxs)("button",{onClick:()=>s(e.tier),className:(0,eh.default)("p-4 rounded-xl border text-left transition-all",n===e.tier?"border-cyan-400 dark:border-cyan-600 ring-2 ring-cyan-400/20 bg-cyan-50/50 dark:bg-cyan-900/10":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"),children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,F.jsx)("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.label}),n===e.tier&&(0,F.jsx)("div",{className:"w-2 h-2 rounded-full bg-cyan-500"})]}),(0,F.jsxs)("div",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:[eo(e.annualLicenseCost),(0,F.jsx)("span",{className:"text-xs text-slate-500 font-normal",children:"/yr"})]}),(0,F.jsx)("div",{className:"space-y-1",children:e.features.map((e,t)=>(0,F.jsxs)("div",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[(0,F.jsx)("div",{className:"w-1 h-1 rounded-full bg-slate-400"}),e]},t))}),(0,F.jsx)("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:(0,F.jsxs)("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:["Sensor Integration: ",(100*e.sensorIntegration).toFixed(0),"%",(0,F.jsx)(ei,{content:"Percentage of deployed sensors this platform can fully integrate. Lower tiers may not support all sensor protocols, reducing effective detection coverage."})]})})]},e.tier))})]})]}):(0,F.jsx)("div",{className:"text-slate-500 text-center py-20",children:"Select a country to begin."})}let Oy=(0,X.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var Ov=e.i(81430);let Oj=(0,X.default)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),Ok=(0,X.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),Ow={dieselPricePerLiter:"Local diesel fuel price before tax. Varies significantly by country and is a primary driver of annual generator operating cost.",genEfficiency:"Fuel consumption rate in liters per kWh. Lower values indicate more efficient engines. Modern Tier 2 diesel gensets typically achieve 0.24-0.30 L/kWh.",fuelStorageHours:"Hours of on-site fuel reserve at full facility load. Tier III requires minimum 24h; Tier IV typically 72-96h. Best practice is 48-72h minimum.",monthlyTestHours:"Duration of monthly generator load bank test in hours. Ensures engines can carry rated load and prevents wet-stacking from extended idle periods.",annualFullLoadTestHours:"Duration of annual full-load bank test in hours. Validates generator performance at 100% rated capacity and identifies maintenance issues."};function ON(){let{selectedCountry:e,inputs:t}=(0,$.useSimulationStore)(),[a,r]=(0,z.useState)("overview"),[n,s]=(0,z.useState)({}),[i,l]=(0,z.useState)(null),[o,c]=(0,z.useState)(""),[d,u]=(0,z.useState)("minimal"),m=(0,z.useMemo)(()=>e?w0({country:e,itLoadKw:t.itLoad,tierLevel:t.tierLevel,coolingType:t.coolingType,coolingTopology:t.coolingTopology,powerRedundancy:t.powerRedundancy,testingRegime:d,overrides:Object.keys(n).length>0?n:void 0}):null,[e,t.itLoad,t.tierLevel,t.coolingType,t.coolingTopology,t.powerRedundancy,d,n]);if(!m)return(0,F.jsx)("div",{className:"text-slate-500 text-center py-20",children:"Select a country to begin."});let x=e=>{let t=parseFloat(o);!isNaN(t)&&t>=e.min&&t<=e.max&&s(a=>({...a,[e.key]:t})),l(null)};return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsx)("div",{className:"flex items-center justify-between",children:(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-amber-500/10 rounded-xl",children:(0,F.jsx)(M2.Fuel,{className:"w-6 h-6 text-amber-500"})}),"Fuel & Generator Modeling"]}),(0,F.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Module 44  Diesel generator sizing, fuel consumption & cost modeling"})]})}),(0,F.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,F.jsxs)("div",{className:"lg:col-span-4 space-y-4",children:[(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,F.jsx)(Oy,{className:"w-4 h-4 text-amber-500"}),"Editable Parameters",(0,F.jsx)(ei,{content:"Click the pencil icon to override any parameter with a custom value. Changes instantly recalculate all KPIs, costs, and consumption figures. Use the X button to reset to defaults."})]}),(0,F.jsx)("div",{className:"space-y-3",children:m.editableParams.map(e=>{let t=i===e.key,a=void 0!==n[e.key];return(0,F.jsxs)("div",{className:(0,eh.default)("p-3 rounded-lg border transition-colors",a?"border-amber-400/50 bg-amber-50/50 dark:bg-amber-900/10 dark:border-amber-600/30":"border-slate-200 dark:border-slate-700"),children:[(0,F.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,F.jsxs)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[e.label,Ow[e.key]&&(0,F.jsx)(ei,{content:Ow[e.key]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[a&&!t&&(0,F.jsx)("button",{onClick:()=>{var t;return t=e.key,void s(e=>{let a={...e};return delete a[t],a})},className:"p-0.5 text-amber-500 hover:text-amber-600",title:"Reset to default",children:(0,F.jsx)(Ov.X,{className:"w-3 h-3"})}),!t&&(0,F.jsx)("button",{onClick:()=>{l(e.key),c(String(e.value))},className:"p-0.5 text-slate-400 hover:text-amber-500",children:(0,F.jsx)(Oy,{className:"w-3 h-3"})})]})]}),t?(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("input",{type:"number",value:o,onChange:e=>c(e.target.value),min:e.min,max:e.max,step:e.step,className:"flex-1 px-2 py-1 text-sm bg-white dark:bg-slate-900 border border-amber-400 rounded text-slate-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-amber-500",autoFocus:!0,onKeyDown:t=>"Enter"===t.key&&x(e)}),(0,F.jsx)("span",{className:"text-[10px] text-slate-500",children:e.unit}),(0,F.jsx)("button",{onClick:()=>x(e),className:"p-1 text-emerald-500 hover:text-emerald-600",children:(0,F.jsx)(Nl.Check,{className:"w-3.5 h-3.5"})}),(0,F.jsx)("button",{onClick:()=>l(null),className:"p-1 text-slate-400 hover:text-slate-500",children:(0,F.jsx)(Ov.X,{className:"w-3.5 h-3.5"})})]}):(0,F.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,F.jsx)("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:e.value}),(0,F.jsx)("span",{className:"text-xs text-slate-500",children:e.unit})]})]},e.key)})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,F.jsx)(Q,{className:"w-4 h-4 text-cyan-500"}),"Testing Regime",(0,F.jsx)(ei,{content:"Generator testing frequency and scope. Minimal covers basic monthly no-load runs plus annual loadbank test. Complete includes weekly, monthly, quarterly, and annual testing per NFPA 110 best practices."})]}),(0,F.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,F.jsx)("option",{value:"minimal",children:"Minimal (Monthly No-Load + Annual Full Load)"}),(0,F.jsx)("option",{value:"complete",children:"Complete (Weekly + Monthly + Quarterly + Annual)"})]}),(0,F.jsx)("p",{className:"text-[10px] text-slate-500 mt-2",children:"minimal"===d?"Monthly no-load run + annual full loadbank test only":"Full testing: weekly no-load, monthly loadbank, quarterly full load, annual overhaul"})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,F.jsx)(Oj,{className:"w-4 h-4 text-cyan-500"}),"Generator Specification",(0,F.jsx)(ei,{content:"Backup diesel generator configuration sized for total facility load including IT and cooling. Count and redundancy determined by tier level and power redundancy model."})]}),(0,F.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Units",(0,F.jsx)(ei,{content:"Number and rating of individual generator sets. Each unit is a standalone diesel genset with its own fuel system and controls."})]}),(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white",children:[m.generator.count,"x ",(m.generator.capacityKw/1e3).toFixed(1),"MW"]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Redundancy",(0,F.jsx)(ei,{content:"Power redundancy model. N+1 adds one spare unit. 2N doubles the entire generator plant. 2N+1 doubles plus one spare for maximum resilience."})]}),(0,F.jsx)("span",{className:"font-semibold text-slate-900 dark:text-white",children:m.generator.redundancyModel})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Total Capacity",(0,F.jsx)(ei,{content:"Combined nameplate capacity of all generators including redundant units. This is the maximum power available during a complete utility outage."})]}),(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white",children:[(m.generator.totalCapacityKw/1e3).toFixed(1)," MW"]})]})]})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,F.jsx)(Ok,{className:"w-4 h-4 text-blue-500"}),"Fuel Storage",(0,F.jsx)(ei,{content:"On-site diesel fuel storage infrastructure. Sized based on fuel storage hours parameter and total facility load. Subject to local environmental regulations and containment requirements."})]}),(0,F.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Total Storage",(0,F.jsx)(ei,{content:"Total diesel fuel volume stored on-site in liters. Calculated from fuel consumption rate multiplied by required storage hours, capped by local storage limits."})]}),(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white",children:[ed(m.storage.totalLiters)," L"]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Tank Count",(0,F.jsx)(ei,{content:"Number of 20,000-liter bulk storage tanks required. Tanks are typically double-walled steel with leak detection, bunded containment, and automatic fuel transfer systems."})]}),(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white",children:[m.storage.tankCount,"x 20,000L"]})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-slate-500 flex items-center gap-1",children:["Autonomy",(0,F.jsx)(ei,{content:"Days of continuous generator operation supported by on-site fuel reserves at full facility load. Critical metric for disaster preparedness and SLA compliance."})]}),(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white",children:[m.storage.daysOfAutonomy," days"]})]})]})]})]}),(0,F.jsxs)("div",{className:"lg:col-span-8 space-y-4",children:[(0,F.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:[{label:"Annual Fuel",value:eo(m.cost.annualFuelCostUsd),sub:`$${m.cost.dieselPriceWithTax}/L`,icon:J,color:"amber",tip:"Annualized fuel expenditure based on testing schedule, grid outage runtime, and local diesel price including tax."},{label:"Total Gen OPEX/yr",value:eo(m.cost.totalAnnualGenOpex),sub:`${eo(m.cost.annualMaintenanceUsd)} maint`,icon:er,color:"cyan",tip:"Total annual generator operating expenditure combining fuel costs, scheduled maintenance, and environmental compliance fees."},{label:"Consumption/yr",value:`${ed(m.consumption.totalLitersPerYear)} L`,sub:`${ed(m.consumption.totalLitersPerMonth)} L/mo`,icon:Ok,color:"blue",tip:"Total annual diesel consumption across all sources: scheduled testing, grid outage runtime, and fuel polishing operations."},{label:"CO Emissions",value:`${m.co2EmissionsTonsPerYear} t/yr`,sub:`${ed(m.co2EmissionsKgPerYear)} kg`,icon:eQ,color:"red",tip:"Annual carbon dioxide emissions from diesel combustion at 2.68 kgCO per liter. Used for Scope 1 emissions reporting and carbon offset calculations."},{label:"Monthly Fuel",value:eo(m.cost.monthlyFuelCostUsd),sub:"Per month",icon:Q,color:"green",tip:"Projected monthly fuel spend including scheduled testing and estimated emergency runtime. Used for operational budgeting and cash flow planning."},{label:"Env. Compliance",value:eo(m.cost.annualEnvironmentalComplianceUsd),sub:"Permits/yr",icon:eM,color:"purple",tip:"Annual cost for environmental permits, emission testing, spill prevention plans, and regulatory reporting required for on-site diesel generator operation."}].map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-3 sm:p-4",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5 mb-1.5",children:[(0,F.jsx)(e.icon,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 text-${e.color}-500 shrink-0`}),(0,F.jsx)("span",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:e.label}),(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsx)("div",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white truncate",children:e.value}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-0.5 truncate",children:e.sub})]},t))}),(0,F.jsx)("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[{id:"overview",label:"Overview"},{id:"consumption",label:"Consumption"},{id:"testing",label:"Testing Schedule"},{id:"comparison",label:"Country Compare"},{id:"environmental",label:"Environmental"}].map(e=>(0,F.jsx)("button",{onClick:()=>r(e.id),className:(0,eh.default)("flex-1 px-3 py-2 text-xs font-medium rounded-md transition-colors",a===e.id?"bg-white dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"),children:e.label},e.id))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:["overview"===a&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Cost Breakdown Summary",(0,F.jsx)(ei,{content:"Breakdown of total annual generator operating expenditure into fuel, maintenance, and environmental compliance categories."})]}),(0,F.jsx)("div",{className:"space-y-2",children:[{label:"Annual Fuel",value:m.cost.annualFuelCostUsd,pct:m.cost.annualFuelCostUsd/m.cost.totalAnnualGenOpex*100,color:"bg-amber-500",tip:"Total diesel fuel cost per year from testing, outage runtime, and fuel polishing operations."},{label:"Maintenance",value:m.cost.annualMaintenanceUsd,pct:m.cost.annualMaintenanceUsd/m.cost.totalAnnualGenOpex*100,color:"bg-cyan-500",tip:"Annual preventive and corrective maintenance cost per generator unit, including oil changes, filter replacements, and coolant service."},{label:"Environmental",value:m.cost.annualEnvironmentalComplianceUsd,pct:m.cost.annualEnvironmentalComplianceUsd/m.cost.totalAnnualGenOpex*100,color:"bg-purple-500",tip:"Annual environmental permit fees, emission testing, and regulatory compliance costs. Zero if no environmental permits required in selected country."}].map((e,t)=>(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,F.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[e.label,(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsxs)("span",{className:"font-medium text-slate-900 dark:text-white",children:[eo(e.value)," (",e.pct.toFixed(1),"%)"]})]}),(0,F.jsx)("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:`h-full ${e.color} rounded-full`,style:{width:`${e.pct}%`}})})]},t))}),(0,F.jsxs)("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[(0,F.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Total Annual Generator OPEX",(0,F.jsx)(ei,{content:"Sum of all annual generator-related operating costs: fuel, maintenance, and environmental compliance. Does not include capital expenditure or generator replacement reserves."})]}),(0,F.jsx)("span",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:eo(m.cost.totalAnnualGenOpex)})]})]}),"consumption"===a&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Fuel Consumption Breakdown",(0,F.jsx)(ei,{content:"Detailed breakdown of annual diesel consumption by source: scheduled testing, grid outage runtime, and fuel polishing. Helps identify the primary driver of fuel costs."})]}),(0,F.jsx)("div",{className:"overflow-x-auto",children:(0,F.jsxs)("table",{className:"w-full text-sm min-w-[360px]",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left py-2 text-slate-500 font-medium",children:"Category"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-500 font-medium",children:"L/Year"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-500 font-medium",children:"USD/Year"}),(0,F.jsx)("th",{className:"text-right py-2 text-slate-500 font-medium",children:"%"})]})}),(0,F.jsxs)("tbody",{children:[[{label:"Testing",liters:m.consumption.annualTestLiters,tip:"Diesel consumed during scheduled generator testing  no-load runs, load bank tests, and annual full-load exercises."},{label:"Grid Outages",liters:m.consumption.annualOutageLiters,tip:"Diesel consumed during actual grid power outages. Based on country grid reliability data (outage frequency and average duration)."},{label:"Fuel Polishing",liters:m.consumption.annualPolishingLiters,tip:"Small fuel volume consumed during monthly fuel polishing operations. Polishing removes water and particulates to maintain fuel quality for long-term storage."}].map((e,t)=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsxs)("td",{className:"py-2 text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[e.label,(0,F.jsx)(ei,{content:e.tip})]}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-900 dark:text-white",children:ed(e.liters)}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-900 dark:text-white",children:eo(Math.round(e.liters*m.cost.dieselPriceWithTax))}),(0,F.jsxs)("td",{className:"py-2 text-right font-mono text-slate-500",children:[m.consumption.totalLitersPerYear>0?(e.liters/m.consumption.totalLitersPerYear*100).toFixed(1):"0.0","%"]})]},t)),(0,F.jsxs)("tr",{className:"font-bold",children:[(0,F.jsx)("td",{className:"py-2 text-slate-900 dark:text-white",children:"Total"}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-amber-600 dark:text-amber-400",children:ed(m.consumption.totalLitersPerYear)}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-amber-600 dark:text-amber-400",children:eo(m.cost.annualFuelCostUsd)}),(0,F.jsx)("td",{className:"py-2 text-right font-mono text-slate-500",children:"100%"})]})]})]})}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,F.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-blue-600 dark:text-blue-400",children:[ed(m.consumption.totalLitersPerMonth)," L"]}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:"Per Month"})]}),(0,F.jsxs)("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,F.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-amber-600 dark:text-amber-400",children:eo(m.cost.monthlyFuelCostUsd)}),(0,F.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:"Per Month"})]})]})]}),"testing"===a&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Generator Testing Schedule",(0,F.jsx)(ei,{content:"Scheduled generator testing events per NFPA 110 and Uptime Institute best practices. Each test type specifies frequency, duration, load level, and fuel consumption per event."})]}),(0,F.jsx)("span",{className:(0,eh.default)("text-xs font-medium px-2 py-1 rounded-full","minimal"===d?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400"),children:"minimal"===d?"Minimal Regime":"Complete Regime"})]}),(0,F.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{...m.testing.weeklyNoLoad,label:"Weekly No-Load Run",icon:Z,desc:`${m.testing.weeklyNoLoad.durationMin} min per unit`},{...m.testing.monthlyLoadBank,label:"minimal"===d?"Monthly No-Load Run":"Monthly Load Bank",icon:Oj,desc:"minimal"===d?"30 min no-load per unit":`${m.testing.monthlyLoadBank.durationHours}hr at 50% load`},{...m.testing.quarterlyFullLoad,label:"Quarterly Full Load",icon:M2.Fuel,desc:"2hr at 75% load"},{...m.testing.annualOverhaul,label:"Annual Full Loadbank Test",icon:NA,desc:`${m.testing.annualOverhaul.durationHours}hr full load bank`}].filter(e=>"N/A"!==e.frequency).map((e,t)=>(0,F.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,F.jsx)(e.icon,{className:"w-4 h-4 text-amber-500"}),(0,F.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.label})]}),(0,F.jsxs)("div",{className:"text-xs text-slate-500",children:[e.frequency,"  ",e.desc]}),(0,F.jsxs)("div",{className:"text-sm font-bold text-slate-900 dark:text-white mt-1",children:[ed(e.fuelLiters)," L / event"]})]},t))})]}),"comparison"===a&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Country Diesel Price Comparison",(0,F.jsx)(ei,{content:"Comparison of annual fuel costs if the same consumption volume were purchased at each country's local diesel price including tax. Highlights cost advantage or disadvantage of the selected location."})]}),(0,F.jsxs)("p",{className:"text-xs text-slate-500",children:["Same volume (",ed(m.consumption.totalLitersPerYear)," L/yr) at each country's diesel price incl. tax"]}),(0,F.jsx)("div",{className:"space-y-1.5 max-h-96 overflow-y-auto",children:m.countryComparison.map((t,a)=>{let r=m.countryComparison[m.countryComparison.length-1]?.annualCost||1,n=t.annualCost/r*100,s=t.countryId===e?.id;return(0,F.jsxs)("div",{className:(0,eh.default)("flex items-center gap-2 px-2 py-1.5 rounded",s&&"bg-amber-50 dark:bg-amber-900/20 ring-1 ring-amber-400/30"),children:[(0,F.jsx)("span",{className:"w-6 text-[10px] font-mono text-slate-500 text-right",children:a+1}),(0,F.jsx)("span",{className:"w-8 text-xs font-bold text-slate-700 dark:text-slate-300",children:t.countryId}),(0,F.jsx)("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,F.jsx)("div",{className:(0,eh.default)("h-full rounded-full",s?"bg-amber-500":"bg-cyan-500/60"),style:{width:`${n}%`}})}),(0,F.jsxs)("span",{className:"w-16 text-right text-xs font-mono text-slate-600 dark:text-slate-400",children:["$",t.dieselPrice,"/L"]}),(0,F.jsx)("span",{className:"w-20 text-right text-xs font-mono font-semibold text-slate-900 dark:text-white",children:eo(t.annualCost)})]},t.countryId)})})]}),"environmental"===a&&(0,F.jsxs)("div",{className:"space-y-4",children:[(0,F.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-1",children:["Environmental Compliance",(0,F.jsx)(ei,{content:"Environmental impact assessment and regulatory compliance requirements for on-site diesel generator operation. Includes emissions, permits, containment, and reporting obligations."})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,F.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-200 dark:border-red-800",children:[(0,F.jsxs)("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium flex items-center gap-1",children:["CO Emissions",(0,F.jsx)(ei,{content:"Total Scope 1 carbon dioxide emissions from diesel combustion. Calculated at 2.68 kgCO per liter, the standard DEFRA emission factor for diesel fuel."})]}),(0,F.jsxs)("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300 mt-1",children:[m.co2EmissionsTonsPerYear," t/yr"]}),(0,F.jsx)("div",{className:"text-[10px] text-red-500 mt-1",children:"2.68 kgCO per liter diesel"})]}),(0,F.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/10 rounded-lg border border-green-200 dark:border-green-800",children:[(0,F.jsxs)("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center gap-1",children:["Compliance Cost",(0,F.jsx)(ei,{content:"Annual expenditure for environmental permits, emission testing reports, spill prevention plans, and regulatory compliance. Scales with number of generator units on-site."})]}),(0,F.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mt-1",children:eo(m.cost.annualEnvironmentalComplianceUsd)}),(0,F.jsx)("div",{className:"text-[10px] text-green-500 mt-1",children:"Annual permits & reporting"})]})]}),(0,F.jsxs)("div",{className:"space-y-2",children:[(0,F.jsxs)("h5",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-1",children:["Compliance Checklist",(0,F.jsx)(ei,{content:"Key environmental and safety requirements for on-site diesel generator installations. Items marked REQUIRED are mandated by local regulations; others are recommended best practices."})]}),[{item:"Emission testing (annual)",required:!0},{item:"Fuel storage containment",required:!0},{item:"Spill prevention plan",required:!0},{item:"Noise level monitoring",required:e?.fuelDiesel?.environmentalPermitRequired??!0},{item:"HVO/renewable fuel option",required:!1,available:e?.fuelDiesel?.hvoAvailable},{item:"Carbon offset reporting",required:!1}].map((e,t)=>(0,F.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,F.jsx)("div",{className:(0,eh.default)("w-5 h-5 rounded-full flex items-center justify-center text-white text-[10px]",e.required?"bg-amber-500":"bg-slate-300 dark:bg-slate-600"),children:e.required?"!":"?"}),(0,F.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:e.item}),e.required&&(0,F.jsx)("span",{className:"text-[10px] text-amber-600 font-medium",children:"REQUIRED"}),e.available&&(0,F.jsx)("span",{className:"text-[10px] text-green-600 font-medium",children:"AVAILABLE"})]},t))]})]})]})]})]})]})}var OC=e.i(40724);let OS=(0,X.default)("arrow-left-right",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),OP=["#06b6d4","#8b5cf6","#f59e0b","#ef4444"];function OM(){let{scenarios:e,comparisonIds:t,exitComparisonMode:a}=(0,wM.useScenarioStore)(),r=(0,z.useMemo)(()=>t.map(t=>e.find(e=>e.id===t)).filter(Boolean),[t,e]),n=(0,z.useMemo)(()=>r.map(e=>{let t=wQ.COUNTRIES[e.countryId];if(!t)return{scenario:e,capex:e.summary.annualCapex,capexPerKw:0,annualOpex:0,opexPerKw:0,totalStaff:e.summary.totalStaff,pue:e.summary.pue,irr:e.summary.irr||0,npv:e.summary.npv||0,paybackYears:e.summary.paybackYears||0};let a=(0,w_.calculateCapex)(e.capexInputs),r=e.simInputs,n=r.itLoad||2500,s=r.shiftModel||"8h",i=[{role:"shift-lead",count:r.headcount_ShiftLead||4,is24x7:!0},{role:"engineer",count:r.headcount_Engineer||5,is24x7:!0},{role:"technician",count:r.headcount_Technician||2,is24x7:!1},{role:"admin",count:r.headcount_Admin||1,is24x7:!1},{role:"janitor",count:r.headcount_Janitor||2,is24x7:!1}],l=i.reduce((e,a)=>e+12*B(a.role,a.count,s,t,a.is24x7).monthlyCost,0),o=i.reduce((e,t)=>e+t.count,0),c=l+n*a.pue*8760/1e3*(1e3*t.economy.electricityRate)+(t.compliance.annualComplianceCost||5e4),d=r.occupancyRamp?.length>0?r.occupancyRamp:wT(10),u=wI({totalCapex:a.total,annualOpex:c,revenuePerKwMonth:120,itLoadKw:n,discountRate:.1,projectLifeYears:10,escalationRate:.03,opexEscalation:t.economy.inflationRate,occupancyRamp:d,taxRate:t.economy.taxRate,depreciationYears:7});return{scenario:e,capex:a.total,capexPerKw:a.metrics.perKw,annualOpex:c,opexPerKw:n>0?c/n:0,totalStaff:o,pue:a.pue,irr:u.irr,npv:u.npv,paybackYears:u.paybackPeriodYears}}),[r]);if(r.length<2)return(0,F.jsxs)("div",{className:"text-center py-20 text-slate-500",children:[(0,F.jsx)("p",{children:"Select at least 2 scenarios to compare."}),(0,F.jsx)("button",{onClick:a,className:"mt-4 text-cyan-600 hover:text-cyan-400 text-sm",children:"Go back"})]});let s=n[0],i=e=>`${e>=0?"+":""}${e.toFixed(1)}%`,l=(e,t)=>0!==t?(e-t)/Math.abs(t)*100:0,o=[{key:"capex",label:"CAPEX ($M)",extract:e=>e.capex/1e6},{key:"annualOpex",label:"Annual OPEX ($M)",extract:e=>e.annualOpex/1e6},{key:"totalStaff",label:"Staff",extract:e=>e.totalStaff},{key:"pue",label:"PUE",extract:e=>e.pue}].map(e=>{let t={metric:e.label};return n.forEach((a,r)=>{t[`s${r}`]=e.extract(a)}),t}),c=["tierLevel","shiftModel","staffingModel","coolingType","powerRedundancy","itLoad","maintenanceStrategy","maintenanceModel"].filter(e=>new Set(r.map(t=>String(t.simInputs[e]??""))).size>1);return(0,F.jsxs)("div",{className:"space-y-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[(0,F.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:(0,F.jsx)(OC.GitCompare,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),"Scenario Comparison"]}),(0,F.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Comparing ",r.length," scenarios  baseline: ",(0,F.jsx)("span",{className:"font-medium text-cyan-600 dark:text-cyan-400",children:s.scenario.name})]})]}),(0,F.jsxs)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 border border-slate-300 dark:border-slate-700 rounded-lg transition-colors flex items-center gap-2",children:[(0,F.jsx)(Ov.X,{className:"w-4 h-4"}),"Exit Comparison"]})]}),(0,F.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${r.length}, 1fr)`},children:n.map((e,t)=>(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border-2 p-4 space-y-3",style:{borderColor:OP[t]},children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,F.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:OP[t]}}),(0,F.jsx)("span",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:e.scenario.name}),0===t&&(0,F.jsx)("span",{className:"text-[10px] bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-600 dark:text-slate-300",children:"BASELINE"})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,F.jsx)(OO,{label:"CAPEX",value:eo(e.capex),delta:t>0?i(l(e.capex,s.capex)):void 0}),(0,F.jsx)(OO,{label:"OPEX/yr",value:eo(e.annualOpex),delta:t>0?i(l(e.annualOpex,s.annualOpex)):void 0}),(0,F.jsx)(OO,{label:"PUE",value:e.pue.toFixed(2),delta:t>0?i(l(e.pue,s.pue)):void 0}),(0,F.jsx)(OO,{label:"Staff",value:String(e.totalStaff),delta:t>0?i(l(e.totalStaff,s.totalStaff)):void 0}),(0,F.jsx)(OO,{label:"IRR",value:`${e.irr.toFixed(1)}%`,delta:t>0?i(l(e.irr,s.irr)):void 0}),(0,F.jsx)(OO,{label:"Payback",value:`${e.paybackYears.toFixed(1)} yr`,delta:t>0?i(l(e.paybackYears,s.paybackYears)):void 0,invertDelta:!0})]})]},e.scenario.id))}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-4",children:"Side-by-Side Comparison"}),(0,F.jsx)(iB,{width:"100%",height:300,children:(0,F.jsxs)(Cc,{data:o,margin:{top:10,right:20,left:10,bottom:5},children:[(0,F.jsx)(kt,{dataKey:"metric",tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(km,{tick:{fontSize:11,fill:"#94a3b8"}}),(0,F.jsx)(wn,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:8,fontSize:12},labelStyle:{color:"#e2e8f0"}}),(0,F.jsx)(wv,{formatter:e=>{let t=parseInt(e.replace("s",""));return n[t]?.scenario.name||e}}),n.map((e,t)=>(0,F.jsx)(v1,{dataKey:`s${t}`,fill:OP[t],radius:[4,4,0,0]},t))]})})]}),(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,F.jsx)("div",{className:"px-5 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:(0,F.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(OS,{className:"w-4 h-4 text-slate-400"}),"Delta Analysis (vs Baseline)"]})}),(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 text-slate-500 font-medium",children:"Metric"}),n.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:OP[t]},children:e.scenario.name},t))]})}),(0,F.jsx)("tbody",{children:[{label:"Total CAPEX",get:e=>e.capex,fmt:eo},{label:"CAPEX/kW",get:e=>e.capexPerKw,fmt:e=>`$${Math.round(e).toLocaleString()}`},{label:"Annual OPEX",get:e=>e.annualOpex,fmt:eo},{label:"OPEX/kW",get:e=>e.opexPerKw,fmt:e=>`$${Math.round(e).toLocaleString()}`},{label:"Total Staff",get:e=>e.totalStaff,fmt:e=>String(e)},{label:"PUE",get:e=>e.pue,fmt:e=>e.toFixed(2)},{label:"IRR",get:e=>e.irr,fmt:e=>`${e.toFixed(1)}%`},{label:"NPV",get:e=>e.npv,fmt:eo},{label:"Payback",get:e=>e.paybackYears,fmt:e=>`${e.toFixed(1)} yr`}].map(e=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300 font-medium",children:e.label}),n.map((t,a)=>{let r=e.get(t),n=e.get(s),l=a>0&&0!==n?(r-n)/Math.abs(n)*100:0;return(0,F.jsxs)("td",{className:"text-center px-3 py-2",children:[(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-mono",children:e.fmt(r)}),a>0&&(0,F.jsxs)("span",{className:(0,eh.default)("ml-1",l>0?"text-red-500":l<0?"text-emerald-500":"text-slate-400"),children:["(",i(l),")"]})]},a)})]},e.label))})]})]}),c.length>0&&(0,F.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,F.jsx)("div",{className:"px-5 py-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30",children:(0,F.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Input Differences"})}),(0,F.jsxs)("table",{className:"w-full text-xs",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,F.jsx)("th",{className:"text-left px-4 py-2 text-slate-500 font-medium",children:"Parameter"}),r.map((e,t)=>(0,F.jsx)("th",{className:"text-center px-3 py-2 font-medium",style:{color:OP[t]},children:e.name},t))]})}),(0,F.jsx)("tbody",{children:c.map(e=>(0,F.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[(0,F.jsx)("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300 font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),r.map((t,a)=>{let n=t.simInputs[e],s=r[0].simInputs[e],i=a>0&&String(n)!==String(s);return(0,F.jsx)("td",{className:(0,eh.default)("text-center px-3 py-2 font-mono",i?"text-amber-600 dark:text-amber-400 font-semibold":"text-slate-600 dark:text-slate-400"),children:"number"==typeof n?n.toLocaleString():String(n)},a)})]},e))})]})]})]})}function OO({label:e,value:t,delta:a,invertDelta:r}){let n=a?.startsWith("+"),s=a?.startsWith("-"),i="text-slate-400";return a&&"+0.0%"!==a&&(i=r?n?"text-red-500":s?"text-emerald-500":"text-slate-400":n?"text-emerald-500":s?"text-red-500":"text-slate-400"),(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"text-slate-500 dark:text-slate-400 block",children:e}),(0,F.jsx)("span",{className:"text-slate-900 dark:text-white font-semibold",children:t}),a&&(0,F.jsx)("span",{className:(0,eh.default)("ml-1",i),children:a})]})}function OE(){let{activeTab:e}=(0,$.useSimulationStore)(),{isComparisonMode:t}=(0,wM.useScenarioStore)();return t?(0,F.jsx)(OM,{}):(0,F.jsx)("div",{className:"min-h-[calc(100vh-100px)]",children:(()=>{switch(e){case"sim":return(0,F.jsx)(Np,{});case"capex":return(0,F.jsx)(NC,{});case"staff":return(0,F.jsx)(eR,{});case"maint":return(0,F.jsx)(wj,{});case"risk":return(0,F.jsx)(Ct,{});case"report":return(0,F.jsx)(Nt,{});case"carbon":return(0,F.jsx)(Cg,{});case"finance":return(0,F.jsx)(CM,{});case"invest":return(0,F.jsx)(Sb,{});case"benchmark":return(0,F.jsx)(SP,{});case"montecarlo":return(0,F.jsx)(Pe,{});case"portfolio":return(0,F.jsx)(MI,{});case"capacity":return(0,F.jsx)(MY,{});case"phased-finance":return(0,F.jsx)(MX,{});case"tax":return(0,F.jsx)(MJ,{});case"disaster":return(0,F.jsx)(M1,{});case"grid":return(0,F.jsx)(M6,{});case"talent":return(0,F.jsx)(M7,{});case"compliance":return(0,F.jsx)(On,{});case"asset-lifecycle":return(0,F.jsx)(Om,{});case"cbm":return(0,F.jsx)(Og,{});case"fuel-gen":return(0,F.jsx)(ON,{});case"faq":return(0,F.jsx)(MH,{});default:return(0,F.jsxs)("div",{className:"text-center space-y-4 max-w-2xl mx-auto pt-20",children:[(0,F.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto shadow-2xl shadow-cyan-900/50 mb-8",children:(0,F.jsx)(Nf.Calculator,{className:"w-10 h-10 text-white"})}),(0,F.jsx)("h1",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Data Center M&O Calculator"}),(0,F.jsx)("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Welcome to the ResistanceZero Pro Mode simulation engine. Select a module from the left to begin modeling operational costs."}),(0,F.jsxs)("div",{className:"mt-8",children:[(0,F.jsx)("p",{className:"text-sm text-cyan-400 mb-2",children:"Ready to Simulate?"}),(0,F.jsx)("button",{onClick:()=>$.useSimulationStore.getState().actions.setActiveTab("sim"),className:"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-bold shadow-lg shadow-cyan-900/50 transition-all",children:"Launch Scenario Mode"})]})]})}})()})}e.s(["default",()=>OE],85763)}]);